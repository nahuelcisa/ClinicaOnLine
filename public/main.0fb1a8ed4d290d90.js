"use strict";var lb=Object.defineProperty,ub=Object.defineProperties,cb=Object.getOwnPropertyDescriptors,X0=Object.getOwnPropertySymbols,db=Object.prototype.hasOwnProperty,hb=Object.prototype.propertyIsEnumerable,eE=(Yt,Je,j)=>Je in Yt?lb(Yt,Je,{enumerable:!0,configurable:!0,writable:!0,value:j}):Yt[Je]=j,tE=(Yt,Je)=>{for(var j in Je||(Je={}))db.call(Je,j)&&eE(Yt,j,Je[j]);if(X0)for(var j of X0(Je))hb.call(Je,j)&&eE(Yt,j,Je[j]);return Yt},nE=(Yt,Je)=>ub(Yt,cb(Je));(self.webpackChunkTpClinicaOnLine=self.webpackChunkTpClinicaOnLine||[]).push([[179],{7128:(Yt,Je,j)=>{j.d(Je,{nm:()=>Ln});var _=j(5813),Te=(j(5e3),j(3692),j(5867),j(5861)),Le=j(9681),Ve=j(4859),he=j(2090),Pe=j(1877);const ce=new Map,fe={activated:!1,tokenObservers:[]},ke={initialized:!1,enabled:!1};function yt(ze){return ce.get(ze)||fe}function ut(ze,Ue){ce.set(ze,Ue)}function Ye(){return ke}class be{constructor(Ue,Qe,It,Wt,ln){if(this.operation=Ue,this.retryPolicy=Qe,this.getWaitDuration=It,this.lowerBound=Wt,this.upperBound=ln,this.pending=null,this.nextErrorWaitInterval=Wt,Wt>ln)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ue){var Qe=this;return(0,Te.Z)(function*(){Qe.stop();try{Qe.pending=new he.BH,yield function Xe(ze){return new Promise(Ue=>{setTimeout(Ue,ze)})}(Qe.getNextRun(Ue)),Qe.pending.resolve(),yield Qe.pending.promise,Qe.pending=new he.BH,yield Qe.operation(),Qe.pending.resolve(),yield Qe.pending.promise,Qe.process(!0).catch(()=>{})}catch(It){Qe.retryPolicy(It)?Qe.process(!1).catch(()=>{}):Qe.stop()}})()}getNextRun(Ue){if(Ue)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Qe=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Qe}}}const bt=new he.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ce(ze){if(!yt(ze).activated)throw bt.create("use-before-activation",{appName:ze.name})}function ct(ze,Ue){return wt.apply(this,arguments)}function wt(){return(wt=(0,Te.Z)(function*({url:ze,body:Ue},Qe){var It,Wt;const ln={"Content-Type":"application/json"},Zn=Qe.getImmediate({optional:!0});if(Zn){const Yi=yield Zn.getHeartbeatsHeader();Yi&&(ln["X-Firebase-Client"]=Yi)}const wi={method:"POST",body:JSON.stringify(Ue),headers:ln};let Fr,Ir;try{Fr=yield fetch(ze,wi)}catch(Yi){throw bt.create("fetch-network-error",{originalErrorMessage:null===(It=Yi)||void 0===It?void 0:It.message})}if(200!==Fr.status)throw bt.create("fetch-status-error",{httpStatus:Fr.status});try{Ir=yield Fr.json()}catch(Yi){throw bt.create("fetch-parse-error",{originalErrorMessage:null===(Wt=Yi)||void 0===Wt?void 0:Wt.message})}const Qr=Ir.ttl.match(/^([\d.]+)(s)$/);if(!Qr||!Qr[2]||isNaN(Number(Qr[1])))throw bt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Ir.ttl}`});const Ss=1e3*Number(Qr[1]),js=Date.now();return{token:Ir.token,expireTimeMillis:js+Ss,issuedAtTimeMillis:js}})).apply(this,arguments)}function Jt(ze,Ue){const{projectId:Qe,appId:It,apiKey:Wt}=ze.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Qe}/apps/${It}:exchangeDebugToken?key=${Wt}`,body:{debug_token:Ue}}}const Zt="firebase-app-check-store";let wn=null;function gt(){return wn||(wn=new Promise((ze,Ue)=>{var Qe;try{const It=indexedDB.open("firebase-app-check-database",1);It.onsuccess=Wt=>{ze(Wt.target.result)},It.onerror=Wt=>{var ln;Ue(bt.create("storage-open",{originalErrorMessage:null===(ln=Wt.target.error)||void 0===ln?void 0:ln.message}))},It.onupgradeneeded=Wt=>{0===Wt.oldVersion&&Wt.target.result.createObjectStore(Zt,{keyPath:"compositeKey"})}}catch(It){Ue(bt.create("storage-open",{originalErrorMessage:null===(Qe=It)||void 0===Qe?void 0:Qe.message}))}}),wn)}function Wn(){return(Wn=(0,Te.Z)(function*(ze,Ue){const It=(yield gt()).transaction(Zt,"readwrite"),ln=It.objectStore(Zt).put({compositeKey:ze,value:Ue});return new Promise((Zn,wi)=>{ln.onsuccess=Fr=>{Zn()},It.onerror=Fr=>{var Ir;wi(bt.create("storage-set",{originalErrorMessage:null===(Ir=Fr.target.error)||void 0===Ir?void 0:Ir.message}))}})})).apply(this,arguments)}const yr=new Pe.Yd("@firebase/app-check");function tn(ze,Ue){return(0,he.hl)()?function Me(ze,Ue){return function yn(ze,Ue){return Wn.apply(this,arguments)}(function Ur(ze){return`${ze.options.appId}-${ze.name}`}(ze),Ue)}(ze,Ue).catch(Qe=>{yr.warn(`Failed to write token to IndexedDB. Error: ${Qe}`)}):Promise.resolve()}function Nn(){return Ye().enabled}function Or(){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,Te.Z)(function*(){const ze=Ye();if(ze.enabled&&ze.token)return ze.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Mr={error:"UNKNOWN_ERROR"};function ti(ze){return he.US.encodeString(JSON.stringify(ze),!1)}function sn(ze){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,Te.Z)(function*(ze,Ue=!1){const Qe=ze.app;Ce(Qe);const It=yt(Qe);let ln,Wt=It.token;if(Wt&&!Ar(Wt)&&(ut(Qe,Object.assign(Object.assign({},It),{token:void 0})),Wt=void 0),!Wt){const Fr=yield It.cachedTokenPromise;Fr&&(Ar(Fr)?Wt=Fr:yield tn(Qe,void 0))}if(!Ue&&Wt&&Ar(Wt))return{token:Wt.token};let wi,Zn=!1;if(Nn()){It.exchangeTokenPromise||(It.exchangeTokenPromise=ct(Jt(Qe,yield Or()),ze.heartbeatServiceProvider).finally(()=>{It.exchangeTokenPromise=void 0}),Zn=!0);const Fr=yield It.exchangeTokenPromise;return yield tn(Qe,Fr),ut(Qe,Object.assign(Object.assign({},It),{token:Fr})),{token:Fr.token}}try{It.exchangeTokenPromise||(It.exchangeTokenPromise=It.provider.getToken().finally(()=>{It.exchangeTokenPromise=void 0}),Zn=!0),Wt=yield It.exchangeTokenPromise}catch(Fr){"appCheck/throttled"===Fr.code?yr.warn(Fr.message):yr.error(Fr),ln=Fr}return Wt?ln?wi=Ar(Wt)?{token:Wt.token,internalError:ln}:dr(ln):(wi={token:Wt.token},ut(Qe,Object.assign(Object.assign({},It),{token:Wt})),yield tn(Qe,Wt)):wi=dr(ln),Zn&&Dn(Qe,wi),wi})).apply(this,arguments)}function nn(ze,Ue){const Qe=yt(ze),It=Qe.tokenObservers.filter(Wt=>Wt.next!==Ue);0===It.length&&Qe.tokenRefresher&&Qe.tokenRefresher.isRunning()&&Qe.tokenRefresher.stop(),ut(ze,Object.assign(Object.assign({},Qe),{tokenObservers:It}))}function Dr(ze){const{app:Ue}=ze,Qe=yt(Ue);let It=Qe.tokenRefresher;It||(It=function Zr(ze){const{app:Ue}=ze;return new be((0,Te.Z)(function*(){let It;if(It=yt(Ue).token?yield sn(ze,!0):yield sn(ze),It.error)throw It.error;if(It.internalError)throw It.internalError}),()=>!0,()=>{const Qe=yt(Ue);if(Qe.token){let It=Qe.token.issuedAtTimeMillis+.5*(Qe.token.expireTimeMillis-Qe.token.issuedAtTimeMillis)+3e5;return It=Math.min(It,Qe.token.expireTimeMillis-3e5),Math.max(0,It-Date.now())}return 0},3e4,96e4)}(ze),ut(Ue,Object.assign(Object.assign({},Qe),{tokenRefresher:It}))),!It.isRunning()&&Qe.isTokenAutoRefreshEnabled&&It.start()}function Dn(ze,Ue){const Qe=yt(ze).tokenObservers;for(const It of Qe)try{"EXTERNAL"===It.type&&null!=Ue.error?It.error(Ue.error):It.next(Ue)}catch(Wt){}}function Ar(ze){return ze.expireTimeMillis-Date.now()>0}function dr(ze){return{token:ti(Mr),error:ze}}class ar{constructor(Ue,Qe){this.app=Ue,this.heartbeatServiceProvider=Qe}_delete(){const{tokenObservers:Ue}=yt(this.app);for(const Qe of Ue)nn(this.app,Qe.next);return Promise.resolve()}}const Un="app-check-internal";!function oi(){(0,Le._registerComponent)(new Ve.wA("app-check",ze=>function En(ze,Ue){return new ar(ze,Ue)}(ze.getProvider("app").getImmediate(),ze.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((ze,Ue,Qe)=>{ze.getProvider(Un).initialize()})),(0,Le._registerComponent)(new Ve.wA(Un,ze=>function hr(ze){return{getToken:Ue=>sn(ze,Ue),addTokenListener:Ue=>function un(ze,Ue,Qe,It){const{app:Wt}=ze,ln=yt(Wt),Zn={next:Qe,error:It,type:Ue};if(ut(Wt,Object.assign(Object.assign({},ln),{tokenObservers:[...ln.tokenObservers,Zn]})),ln.token&&Ar(ln.token)){const wi=ln.token;Promise.resolve().then(()=>{Qe({token:wi.token}),Dr(ze)}).catch(()=>{})}ln.cachedTokenPromise.then(()=>Dr(ze))}(ze,"INTERNAL",Ue),removeTokenListener:Ue=>nn(ze.app,Ue)}}(ze.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Le.registerVersion)("@firebase/app-check","0.5.15")}();class Ln{constructor(){return(0,_.vb)("app-check")}}"undefined"!=typeof window&&window},3692:(Yt,Je,j)=>{j.d(Je,{Ot:()=>ye,z6:()=>Te,ZF:()=>Ke,hX:()=>yt});var _=j(5867),E=j(5e3),J=j(5813);class ye{constructor(be){return be}}class Te{constructor(){return(0,_.C6)()}}const he=new E.OlP("angularfire2._apps"),Pe={provide:ye,useFactory:function Ve(We){return We&&1===We.length?We[0]:new ye((0,_.Mq)())},deps:[[new E.FiY,he]]},ce={provide:Te,deps:[[new E.FiY,he]]};function fe(We){return(be,Xe)=>{const At=be.runOutsideAngular(()=>We(Xe));return new ye(At)}}let ke=(()=>{class We{constructor(Xe){(0,_.KN)("angularfire",J.q4.full,"core"),(0,_.KN)("angularfire",J.q4.full,"app"),(0,_.KN)("angular",E.q4F.full,Xe.toString())}}return We.\u0275fac=function(Xe){return new(Xe||We)(E.LFG(E.Lbi))},We.\u0275mod=E.oAB({type:We}),We.\u0275inj=E.cJS({providers:[Pe,ce]}),We})();function yt(We,...be){return{ngModule:ke,providers:[{provide:he,useFactory:fe(We),multi:!0,deps:[E.R0b,E.zs3,J.HU,...be]}]}}const Ke=(0,J.u3)(_.ZF,!0)},7667:(Yt,Je,j)=>{j.d(Je,{dh:()=>yt,v0:()=>Jt,AR:()=>We});var _=j(5813),E=j(5e3),J=j(3692),ye=j(5867),Te=j(7128),Le=j(1279);j(2090),j(9681),j(1877),j(4859);class ke{constructor(dt){return dt}}class yt{constructor(){return(0,_.vb)("auth")}}const Ye=new E.OlP("angularfire2.auth-instances");function Ke(Ot){return(dt,Kt)=>{const cn=dt.runOutsideAngular(()=>Ot(Kt));return new ke(cn)}}const $e={provide:yt,deps:[[new E.FiY,Ye]]},it={provide:ke,useFactory:function Ct(Ot,dt){const Kt=(0,_.JM)("auth",Ot,dt);return Kt&&new ke(Kt)},deps:[[new E.FiY,Ye],J.Ot]};let _t=(()=>{class Ot{constructor(){(0,ye.KN)("angularfire",_.q4.full,"auth")}}return Ot.\u0275fac=function(Kt){return new(Kt||Ot)},Ot.\u0275mod=E.oAB({type:Ot}),Ot.\u0275inj=E.cJS({providers:[it,$e]}),Ot})();function We(Ot,...dt){return{ngModule:_t,providers:[{provide:Ye,useFactory:Ke(Ot),multi:!0,deps:[E.R0b,E.zs3,_.HU,J.z6,[new E.FiY,Te.nm],...dt]}]}}const Jt=(0,_.u3)(Le.n,!0)},1205:(Yt,Je,j)=>{j.d(Je,{zQ:()=>et,rT:()=>je,f7:()=>ct,L6:()=>lt,_Q:()=>Ce,lh:()=>tt,Qv:()=>bt,nw:()=>wt});var _=j(5e3),E=j(7579),J=j(9646),ye=j(8306),Te=j(8996),Le=j(6451),Ve=j(6063);class he extends E.x{constructor(On=1/0,St=1/0,Zt=Ve.l){super(),this._bufferSize=On,this._windowTime=St,this._timestampProvider=Zt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=St===1/0,this._bufferSize=Math.max(1,On),this._windowTime=Math.max(1,St)}next(On){const{isStopped:St,_buffer:Zt,_infiniteTimeWindow:an,_timestampProvider:wn,_windowTime:gt}=this;St||(Zt.push(On),!an&&Zt.push(wn.now()+gt)),this._trimBuffer(),super.next(On)}_subscribe(On){this._throwIfClosed(),this._trimBuffer();const St=this._innerSubscribe(On),{_infiniteTimeWindow:Zt,_buffer:an}=this,wn=an.slice();for(let gt=0;gt<wn.length&&!On.closed;gt+=Zt?1:2)On.next(wn[gt]);return this._checkFinalizedStatuses(On),St}_trimBuffer(){const{_bufferSize:On,_timestampProvider:St,_buffer:Zt,_infiniteTimeWindow:an}=this,wn=(an?1:2)*On;if(On<1/0&&wn<Zt.length&&Zt.splice(0,Zt.length-wn),!an){const gt=St.now();let Dt=0;for(let Me=1;Me<Zt.length&&Zt[Me]<=gt;Me+=2)Dt=Me;Dt&&Zt.splice(0,Dt+1)}}}var Pe=j(3099);function ce(Jt,On,St){var Zt,an;let wn,gt=!1;return Jt&&"object"==typeof Jt?(wn=null!==(Zt=Jt.bufferSize)&&void 0!==Zt?Zt:1/0,On=null!==(an=Jt.windowTime)&&void 0!==an?an:1/0,gt=!!Jt.refCount,St=Jt.scheduler):wn=null!=Jt?Jt:1/0,(0,Pe.B)({connector:()=>new he(wn,On,St),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:gt})}var fe=j(3900),ke=j(576);function yt(Jt,On){return(0,ke.m)(On)?(0,fe.w)(()=>Jt,On):(0,fe.w)(()=>Jt)}var ut=j(5363),Ye=j(4004),Ct=j(590),Ke=j(9468),$e=j(9300),it=j(5813),_t=j(2011),We=j(9808),be=j(7128);j(127);const bt=new _.OlP("angularfire2.auth.use-emulator"),lt=new _.OlP("angularfire2.auth.settings"),Ce=new _.OlP("angularfire2.auth.tenant-id"),je=new _.OlP("angularfire2.auth.langugage-code"),tt=new _.OlP("angularfire2.auth.use-device-language"),ct=new _.OlP("angularfire.auth.persistence"),wt=(Jt,On,St,Zt,an,wn,gt,Dt)=>(0,_t.cc)(`${Jt.name}.auth`,"AngularFireAuth",Jt.name,()=>{const Me=On.runOutsideAngular(()=>Jt.auth());if(St&&Me.useEmulator(...St),Zt&&(Me.tenantId=Zt),Me.languageCode=an,wn&&Me.useDeviceLanguage(),gt)for(const[ot,_e]of Object.entries(gt))Me.settings[ot]=_e;return Dt&&Me.setPersistence(Dt),Me},[St,Zt,an,wn,gt,Dt]);let et=(()=>{class Jt{constructor(St,Zt,an,wn,gt,Dt,Me,ot,_e,yn,Wn,jn){const qr=new E.x,Ur=(0,J.of)(void 0).pipe((0,ut.Q)(gt.outsideAngular),(0,fe.w)(()=>wn.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,5881)))),(0,Ye.U)(()=>(0,_t.on)(St,wn,Zt)),(0,Ye.U)(yr=>wt(yr,wn,Dt,ot,_e,yn,Me,Wn)),ce({bufferSize:1,refCount:!1}));if((0,We.PM)(an))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,J.of)(null);else{Ur.pipe((0,Ct.P)()).subscribe();const Rt=Ur.pipe((0,fe.w)(ir=>ir.getRedirectResult().then(vn=>vn,()=>null)),it.iC,ce({bufferSize:1,refCount:!1})),xr=Ur.pipe((0,fe.w)(ir=>new ye.y(vn=>({unsubscribe:wn.runOutsideAngular(()=>ir.onAuthStateChanged(Nn=>vn.next(Nn),Nn=>vn.error(Nn),()=>vn.complete()))})))),tn=Ur.pipe((0,fe.w)(ir=>new ye.y(vn=>({unsubscribe:wn.runOutsideAngular(()=>ir.onIdTokenChanged(Nn=>vn.next(Nn),Nn=>vn.error(Nn),()=>vn.complete()))}))));this.authState=Rt.pipe(yt(xr),(0,Ke.R)(gt.outsideAngular),(0,ut.Q)(gt.insideAngular)),this.user=Rt.pipe(yt(tn),(0,Ke.R)(gt.outsideAngular),(0,ut.Q)(gt.insideAngular)),this.idToken=this.user.pipe((0,fe.w)(ir=>ir?(0,Te.D)(ir.getIdToken()):(0,J.of)(null))),this.idTokenResult=this.user.pipe((0,fe.w)(ir=>ir?(0,Te.D)(ir.getIdTokenResult()):(0,J.of)(null))),this.credential=(0,Le.T)(Rt,qr,this.authState.pipe((0,$e.h)(ir=>!ir))).pipe((0,Ye.U)(ir=>(null==ir?void 0:ir.user)?ir:null),(0,Ke.R)(gt.outsideAngular),(0,ut.Q)(gt.insideAngular))}return(0,_t.pX)(this,Ur,wn,{spy:{apply:(yr,Rt,xr)=>{(yr.startsWith("signIn")||yr.startsWith("createUser"))&&xr.then(tn=>qr.next(tn))}}})}}return Jt.\u0275fac=function(St){return new(St||Jt)(_.LFG(_t.Dh),_.LFG(_t.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(it.HU),_.LFG(bt,8),_.LFG(lt,8),_.LFG(Ce,8),_.LFG(je,8),_.LFG(tt,8),_.LFG(ct,8),_.LFG(be.nm,8))},Jt.\u0275prov=_.Yz7({token:Jt,factory:Jt.\u0275fac,providedIn:"any"}),Jt})()},2011:(Yt,Je,j)=>{j.d(Je,{hO:()=>yt,xv:()=>Pe,Dh:()=>he,GT:()=>Le,cc:()=>ut,on:()=>ce,pX:()=>Te});var _=j(5e3),E=j(127),J=j(5813);Yt=j.hmd(Yt);const ye=["ngOnDestroy"],Te=($e,it,_t,We={})=>new Proxy($e,{get:(be,Xe)=>_t.runOutsideAngular(()=>{var At;if($e[Xe])return(null===(At=null==We?void 0:We.spy)||void 0===At?void 0:At.get)&&We.spy.get(Xe,$e[Xe]),$e[Xe];if(ye.indexOf(Xe)>-1)return()=>{};const bt=it.toPromise().then(lt=>{const Ce=lt&&lt[Xe];return"function"==typeof Ce?Ce.bind(lt):Ce&&Ce.then?Ce.then(je=>_t.run(()=>je)):_t.run(()=>Ce)});return new Proxy(()=>{},{get:(lt,Ce)=>bt[Ce],apply:(lt,Ce,je)=>bt.then(tt=>{var ct;const wt=tt&&tt(...je);return(null===(ct=null==We?void 0:We.spy)||void 0===ct?void 0:ct.apply)&&We.spy.apply(Xe,je,wt),wt})})})}),Le=($e,it)=>{it.forEach(_t=>{Object.getOwnPropertyNames(_t.prototype||_t).forEach(We=>{Object.defineProperty($e.prototype,We,Object.getOwnPropertyDescriptor(_t.prototype||_t,We))})})};class Ve{constructor(it){return it}}const he=new _.OlP("angularfire2.app.options"),Pe=new _.OlP("angularfire2.app.name");function ce($e,it,_t){const be="object"==typeof _t&&_t||{};be.name=be.name||"string"==typeof _t&&_t||"[DEFAULT]";const At=E.Z.apps.filter(bt=>bt&&bt.name===be.name)[0]||it.runOutsideAngular(()=>E.Z.initializeApp($e,be));try{JSON.stringify($e)!==JSON.stringify(At.options)&&fe("error",`${At.name} Firebase App already initialized with different options${Yt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(bt){}return new Ve(At)}const fe=($e,...it)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[$e](...it)},ke={provide:Ve,useFactory:ce,deps:[he,_.R0b,[new _.FiY,Pe]]};let yt=(()=>{class $e{constructor(_t){E.Z.registerVersion("angularfire",J.q4.full,"core"),E.Z.registerVersion("angularfire",J.q4.full,"app-compat"),E.Z.registerVersion("angular",_.q4F.full,_t.toString())}static initializeApp(_t,We){return{ngModule:$e,providers:[{provide:he,useValue:_t},{provide:Pe,useValue:We}]}}}return $e.\u0275fac=function(_t){return new(_t||$e)(_.LFG(_.Lbi))},$e.\u0275mod=_.oAB({type:$e}),$e.\u0275inj=_.cJS({providers:[ke]}),$e})();function ut($e,it,_t,We,be){const[,Xe,At]=globalThis.\u0275AngularfireInstanceCache.find(bt=>bt[0]===$e)||[];if(Xe)return function Ye($e,it){try{return $e.toString()===it.toString()}catch(_t){return $e===it}}(be,At)||(Ke("error",`${it} was already initialized on the ${_t} Firebase App with different settings.${Ct?" You may need to reload as Firebase is not HMR aware.":""}`),Ke("warn",{is:be,was:At})),Xe;{const bt=We();return globalThis.\u0275AngularfireInstanceCache.push([$e,bt,be]),bt}}const Ct=!!Yt.hot,Ke=($e,...it)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[$e](...it)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},3562:(Yt,Je,j)=>{j.d(Je,{gg:()=>je,ET:()=>qr,hJ:()=>xr,BS:()=>ot,ad:()=>ar,Cm:()=>an});var _=j(5813),E=j(5e3),J=j(7667),ye=j(3692),Te=j(5867),Le=j(7128),Ve=j(2731),he=j(8306),Pe=j(4004),ce={includeMetadataChanges:!1};function Ce(xt,jt){return void 0===jt&&(jt={}),function At(xt){return function fe(xt,jt){return void 0===jt&&(jt=ce),new he.y(function(kn){return{unsubscribe:(0,Ve.cf)(xt,jt,{next:kn.next.bind(kn),error:kn.error.bind(kn),complete:kn.complete.bind(kn)})}})}(xt,{includeMetadataChanges:!0}).pipe((0,Pe.U)(function(jt){return jt.docs}))}(xt).pipe((0,Pe.U)(function(kn){return kn.map(function(Un){return function ut(xt,jt){void 0===jt&&(jt={});var kn=xt.data();return!xt.exists()||"object"!=typeof kn||null===kn||jt.idField&&(kn[jt.idField]=xt.id),kn}(Un,jt)})}))}class je{constructor(jt){return jt}}const tt="firestore",et=new E.OlP("angularfire2.firestore-instances");function Jt(xt){return(jt,kn)=>{const Un=jt.runOutsideAngular(()=>xt(kn));return new je(Un)}}const On={provide:class ct{constructor(){return(0,_.vb)(tt)}},deps:[[new E.FiY,et]]},St={provide:je,useFactory:function Tn(xt,jt){const kn=(0,_.JM)(tt,xt,jt);return kn&&new je(kn)},deps:[[new E.FiY,et],ye.Ot]};let Zt=(()=>{class xt{constructor(){(0,Te.KN)("angularfire",_.q4.full,"fst")}}return xt.\u0275fac=function(kn){return new(kn||xt)},xt.\u0275mod=E.oAB({type:xt}),xt.\u0275inj=E.cJS({providers:[St,On]}),xt})();function an(xt,...jt){return{ngModule:Zt,providers:[{provide:et,useFactory:Jt(xt),multi:!0,deps:[E.R0b,E.zs3,_.HU,ye.z6,[new E.FiY,J.dh],[new E.FiY,Le.nm],...jt]}]}}const ot=(0,_.u3)(Ce,!0),qr=(0,_.u3)(Ve.ET,!0),xr=(0,_.u3)(Ve.hJ,!0),ar=(0,_.u3)(Ve.ad,!0)},5813:(Yt,Je,j)=>{j.d(Je,{q4:()=>wa,iC:()=>qi,fc:()=>Ca,HU:()=>il,vb:()=>Wo,JM:()=>Ic,u3:()=>Al});var _=j(5e3),E=j(5867),J=j(5861),ye=j(9681),Te=j(2090),Le=j(4859),Ve=j(1877),he=j(8766);const Pe="@firebase/installations",ce="0.5.15",ke=`w:${ce}`,yt="FIS_v2",it=new Te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function _t(O){return O instanceof Te.ZR&&O.code.includes("request-failed")}function We({projectId:O}){return`https://firebaseinstallations.googleapis.com/v1/projects/${O}/installations`}function be(O){return{token:O.token,requestStatus:2,expiresIn:tt(O.expiresIn),creationTime:Date.now()}}function Xe(O,B){return At.apply(this,arguments)}function At(){return(At=(0,J.Z)(function*(O,B){const ve=(yield B.json()).error;return it.create("request-failed",{requestName:O,serverCode:ve.code,serverMessage:ve.message,serverStatus:ve.status})})).apply(this,arguments)}function bt({apiKey:O}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O})}function lt(O,{refreshToken:B}){const re=bt(O);return re.append("Authorization",function ct(O){return`${yt} ${O}`}(B)),re}function Ce(O){return je.apply(this,arguments)}function je(){return(je=(0,J.Z)(function*(O){const B=yield O();return B.status>=500&&B.status<600?O():B})).apply(this,arguments)}function tt(O){return Number(O.replace("s","000"))}function wt(O,B){return et.apply(this,arguments)}function et(){return(et=(0,J.Z)(function*({appConfig:O,heartbeatServiceProvider:B},{fid:re}){const ve=We(O),Ze=bt(O),pt=B.getImmediate({optional:!0});if(pt){const wr=yield pt.getHeartbeatsHeader();wr&&Ze.append("x-firebase-client",wr)}const _n={method:"POST",headers:Ze,body:JSON.stringify({fid:re,authVersion:yt,appId:O.appId,sdkVersion:ke})},Sn=yield Ce(()=>fetch(ve,_n));if(Sn.ok){const wr=yield Sn.json();return{fid:wr.fid||re,registrationStatus:2,refreshToken:wr.refreshToken,authToken:be(wr.authToken)}}throw yield Xe("Create Installation",Sn)})).apply(this,arguments)}function Tn(O){return new Promise(B=>{setTimeout(B,O)})}const On=/^[cdef][\w-]{21}$/;function Zt(){try{const O=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(O),O[0]=112+O[0]%16;const re=function an(O){return function Jt(O){return btoa(String.fromCharCode(...O)).replace(/\+/g,"-").replace(/\//g,"_")}(O).substr(0,22)}(O);return On.test(re)?re:""}catch(O){return""}}function wn(O){return`${O.appName}!${O.appId}`}const gt=new Map;function Dt(O,B){const re=wn(O);_e(re,B),function yn(O,B){const re=function jn(){return!Wn&&"BroadcastChannel"in self&&(Wn=new BroadcastChannel("[Firebase] FID Change"),Wn.onmessage=O=>{_e(O.data.key,O.data.fid)}),Wn}();re&&re.postMessage({key:O,fid:B}),function qr(){0===gt.size&&Wn&&(Wn.close(),Wn=null)}()}(re,B)}function _e(O,B){const re=gt.get(O);if(re)for(const ve of re)ve(B)}let Wn=null;const Rt="firebase-installations-store";let xr=null;function tn(){return xr||(xr=(0,he.X3)("firebase-installations-database",1,{upgrade:(O,B)=>{0===B&&O.createObjectStore(Rt)}})),xr}function ir(O,B){return vn.apply(this,arguments)}function vn(){return(vn=(0,J.Z)(function*(O,B){const re=wn(O),Ze=(yield tn()).transaction(Rt,"readwrite"),pt=Ze.objectStore(Rt),Ut=yield pt.get(re);return yield pt.put(B,re),yield Ze.done,(!Ut||Ut.fid!==B.fid)&&Dt(O,B.fid),B})).apply(this,arguments)}function Nn(O){return Or.apply(this,arguments)}function Or(){return(Or=(0,J.Z)(function*(O){const B=wn(O),ve=(yield tn()).transaction(Rt,"readwrite");yield ve.objectStore(Rt).delete(B),yield ve.done})).apply(this,arguments)}function Gr(O,B){return jr.apply(this,arguments)}function jr(){return(jr=(0,J.Z)(function*(O,B){const re=wn(O),Ze=(yield tn()).transaction(Rt,"readwrite"),pt=Ze.objectStore(Rt),Ut=yield pt.get(re),_n=B(Ut);return void 0===_n?yield pt.delete(re):yield pt.put(_n,re),yield Ze.done,_n&&(!Ut||Ut.fid!==_n.fid)&&Dt(O,_n.fid),_n})).apply(this,arguments)}function Mr(O){return ti.apply(this,arguments)}function ti(){return(ti=(0,J.Z)(function*(O){let B;const re=yield Gr(O.appConfig,ve=>{const Ze=sn(ve),pt=Vn(O,Ze);return B=pt.registrationPromise,pt.installationEntry});return""===re.fid?{installationEntry:yield B}:{installationEntry:re,registrationPromise:B}})).apply(this,arguments)}function sn(O){return Ar(O||{fid:Zt(),registrationStatus:0})}function Vn(O,B){if(0===B.registrationStatus){if(!navigator.onLine)return{installationEntry:B,registrationPromise:Promise.reject(it.create("app-offline"))};const re={fid:B.fid,registrationStatus:1,registrationTime:Date.now()},ve=function un(O,B){return nn.apply(this,arguments)}(O,re);return{installationEntry:re,registrationPromise:ve}}return 1===B.registrationStatus?{installationEntry:B,registrationPromise:Dr(O)}:{installationEntry:B}}function nn(){return(nn=(0,J.Z)(function*(O,B){try{const re=yield wt(O,B);return ir(O.appConfig,re)}catch(re){throw _t(re)&&409===re.customData.serverCode?yield Nn(O.appConfig):yield ir(O.appConfig,{fid:B.fid,registrationStatus:0}),re}})).apply(this,arguments)}function Dr(O){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,J.Z)(function*(O){let B=yield Dn(O.appConfig);for(;1===B.registrationStatus;)yield Tn(100),B=yield Dn(O.appConfig);if(0===B.registrationStatus){const{installationEntry:re,registrationPromise:ve}=yield Mr(O);return ve||re}return B})).apply(this,arguments)}function Dn(O){return Gr(O,B=>{if(!B)throw it.create("installation-not-found");return Ar(B)})}function Ar(O){return function dr(O){return 1===O.registrationStatus&&O.registrationTime+1e4<Date.now()}(O)?{fid:O.fid,registrationStatus:0}:O}function ar(O,B){return En.apply(this,arguments)}function En(){return(En=(0,J.Z)(function*({appConfig:O,heartbeatServiceProvider:B},re){const ve=hr(O,re),Ze=lt(O,re),pt=B.getImmediate({optional:!0});if(pt){const wr=yield pt.getHeartbeatsHeader();wr&&Ze.append("x-firebase-client",wr)}const _n={method:"POST",headers:Ze,body:JSON.stringify({installation:{sdkVersion:ke,appId:O.appId}})},Sn=yield Ce(()=>fetch(ve,_n));if(Sn.ok)return be(yield Sn.json());throw yield Xe("Generate Auth Token",Sn)})).apply(this,arguments)}function hr(O,{fid:B}){return`${We(O)}/${B}/authTokens:generate`}function Gn(O){return cr.apply(this,arguments)}function cr(){return(cr=(0,J.Z)(function*(O,B=!1){let re;const ve=yield Gr(O.appConfig,pt=>{if(!tr(pt))throw it.create("not-registered");const Ut=pt.authToken;if(!B&&Se(Ut))return pt;if(1===Ut.requestStatus)return re=Ot(O,B),pt;{if(!navigator.onLine)throw it.create("app-offline");const _n=Fe(pt);return re=cn(O,_n),_n}});return re?yield re:ve.authToken})).apply(this,arguments)}function Ot(O,B){return dt.apply(this,arguments)}function dt(){return(dt=(0,J.Z)(function*(O,B){let re=yield Kt(O.appConfig);for(;1===re.authToken.requestStatus;)yield Tn(100),re=yield Kt(O.appConfig);const ve=re.authToken;return 0===ve.requestStatus?Gn(O,B):ve})).apply(this,arguments)}function Kt(O){return Gr(O,B=>{if(!tr(B))throw it.create("not-registered");return function me(O){return 1===O.requestStatus&&O.requestTime+1e4<Date.now()}(B.authToken)?Object.assign(Object.assign({},B),{authToken:{requestStatus:0}}):B})}function cn(O,B){return hn.apply(this,arguments)}function hn(){return(hn=(0,J.Z)(function*(O,B){try{const re=yield ar(O,B),ve=Object.assign(Object.assign({},B),{authToken:re});return yield ir(O.appConfig,ve),re}catch(re){if(!_t(re)||401!==re.customData.serverCode&&404!==re.customData.serverCode){const ve=Object.assign(Object.assign({},B),{authToken:{requestStatus:0}});yield ir(O.appConfig,ve)}else yield Nn(O.appConfig);throw re}})).apply(this,arguments)}function tr(O){return void 0!==O&&2===O.registrationStatus}function Se(O){return 2===O.requestStatus&&!function we(O){const B=Date.now();return B<O.creationTime||O.creationTime+O.expiresIn<B+36e5}(O)}function Fe(O){const B={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},O),{authToken:B})}function K(){return(K=(0,J.Z)(function*(O){const B=O,{installationEntry:re,registrationPromise:ve}=yield Mr(B);return ve?ve.catch(console.error):Gn(B).catch(console.error),re.fid})).apply(this,arguments)}function ue(){return(ue=(0,J.Z)(function*(O,B=!1){const re=O;return yield De(re),(yield Gn(re,B)).token})).apply(this,arguments)}function De(O){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,J.Z)(function*(O){const{registrationPromise:B}=yield Mr(O);B&&(yield B)})).apply(this,arguments)}function oi(O){return it.create("missing-app-config-values",{valueName:O})}const $r="installations",Ln=O=>{const B=O.getProvider("app").getImmediate(),re=function Un(O){if(!O||!O.options)throw oi("App Configuration");if(!O.name)throw oi("App Name");const B=["projectId","apiKey","appId"];for(const re of B)if(!O.options[re])throw oi(re);return{appName:O.name,projectId:O.options.projectId,apiKey:O.options.apiKey,appId:O.options.appId}}(B);return{app:B,appConfig:re,heartbeatServiceProvider:(0,ye._getProvider)(B,"heartbeat"),_delete:()=>Promise.resolve()}},Rr=O=>{const B=O.getProvider("app").getImmediate(),re=(0,ye._getProvider)(B,$r).getImmediate();return{getId:()=>function le(O){return K.apply(this,arguments)}(re),getToken:Ze=>function ee(O){return ue.apply(this,arguments)}(re,Ze)}};(function Kr(){(0,ye._registerComponent)(new Le.wA($r,Ln,"PUBLIC")),(0,ye._registerComponent)(new Le.wA("installations-internal",Rr,"PRIVATE"))})(),(0,ye.registerVersion)(Pe,ce),(0,ye.registerVersion)(Pe,ce,"esm2017");const ni="@firebase/remote-config",ri=new Te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class js{constructor(B,re,ve,Ze){this.client=B,this.storage=re,this.storageCache=ve,this.logger=Ze}isCachedDataFresh(B,re){if(!re)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ve=Date.now()-re,Ze=ve<=B;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ve}. Cache max age millis (minimumFetchIntervalMillis setting): ${B}. Is cache hit: ${Ze}.`),Ze}fetch(B){var re=this;return(0,J.Z)(function*(){const[ve,Ze]=yield Promise.all([re.storage.getLastSuccessfulFetchTimestampMillis(),re.storage.getLastSuccessfulFetchResponse()]);if(Ze&&re.isCachedDataFresh(B.cacheMaxAgeMillis,ve))return Ze;B.eTag=Ze&&Ze.eTag;const pt=yield re.client.fetch(B),Ut=[re.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===pt.status&&Ut.push(re.storage.setLastSuccessfulFetchResponse(pt)),yield Promise.all(Ut),pt})()}}function Yi(O=navigator){return O.languages&&O.languages[0]||O.language}class Ui{constructor(B,re,ve,Ze,pt,Ut){this.firebaseInstallations=B,this.sdkVersion=re,this.namespace=ve,this.projectId=Ze,this.apiKey=pt,this.appId=Ut}fetch(B){var re=this;return(0,J.Z)(function*(){var ve,Ze,pt;const[Ut,_n]=yield Promise.all([re.firebaseInstallations.getId(),re.firebaseInstallations.getToken()]),wr=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${re.projectId}/namespaces/${re.namespace}:fetch?key=${re.apiKey}`,Lr={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":B.eTag||"*"},zn={sdk_version:re.sdkVersion,app_instance_id:Ut,app_instance_id_token:_n,app_id:re.appId,language_code:Yi()},Si={method:"POST",headers:Lr,body:JSON.stringify(zn)},po=fetch(wr,Si),Zu=new Promise((Ao,ol)=>{B.signal.addEventListener(()=>{const go=new Error("The operation was aborted.");go.name="AbortError",ol(go)})});let Sl;try{yield Promise.race([po,Zu]),Sl=yield po}catch(Ao){let ol="fetch-client-network";throw"AbortError"===(null===(ve=Ao)||void 0===ve?void 0:ve.name)&&(ol="fetch-timeout"),ri.create(ol,{originalErrorMessage:null===(Ze=Ao)||void 0===Ze?void 0:Ze.message})}let Zs=Sl.status;const ro=Sl.headers.get("ETag")||void 0;let sl,xl;if(200===Sl.status){let Ao;try{Ao=yield Sl.json()}catch(ol){throw ri.create("fetch-client-parse",{originalErrorMessage:null===(pt=ol)||void 0===pt?void 0:pt.message})}sl=Ao.entries,xl=Ao.state}if("INSTANCE_STATE_UNSPECIFIED"===xl?Zs=500:"NO_CHANGE"===xl?Zs=304:("NO_TEMPLATE"===xl||"EMPTY_CONFIG"===xl)&&(sl={}),304!==Zs&&200!==Zs)throw ri.create("fetch-status",{httpStatus:Zs});return{status:Zs,eTag:ro,config:sl}})()}}class uo{constructor(B,re){this.client=B,this.storage=re}fetch(B){var re=this;return(0,J.Z)(function*(){const ve=(yield re.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return re.attemptFetch(B,ve)})()}attemptFetch(B,{throttleEndTimeMillis:re,backoffCount:ve}){var Ze=this;return(0,J.Z)(function*(){yield function lo(O,B){return new Promise((re,ve)=>{const Ze=Math.max(B-Date.now(),0),pt=setTimeout(re,Ze);O.addEventListener(()=>{clearTimeout(pt),ve(ri.create("fetch-throttle",{throttleEndTimeMillis:B}))})})}(B.signal,re);try{const pt=yield Ze.client.fetch(B);return yield Ze.storage.deleteThrottleMetadata(),pt}catch(pt){if(!function Ns(O){if(!(O instanceof Te.ZR&&O.customData))return!1;const B=Number(O.customData.httpStatus);return 429===B||500===B||503===B||504===B}(pt))throw pt;const Ut={throttleEndTimeMillis:Date.now()+(0,Te.$s)(ve),backoffCount:ve+1};return yield Ze.storage.setThrottleMetadata(Ut),Ze.attemptFetch(B,Ut)}})()}}class Co{constructor(B,re,ve,Ze,pt){this.app=B,this._client=re,this._storageCache=ve,this._storage=Ze,this._logger=pt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function xs(O,B){var re;const ve=O.target.error||void 0;return ri.create(B,{originalErrorMessage:ve&&(null===(re=ve)||void 0===re?void 0:re.message)})}const es="app_namespace_store";class bo{constructor(B,re,ve,Ze=function No(){return new Promise((O,B)=>{var re;try{const ve=indexedDB.open("firebase_remote_config",1);ve.onerror=Ze=>{B(xs(Ze,"storage-open"))},ve.onsuccess=Ze=>{O(Ze.target.result)},ve.onupgradeneeded=Ze=>{0===Ze.oldVersion&&Ze.target.result.createObjectStore(es,{keyPath:"compositeKey"})}}catch(ve){B(ri.create("storage-open",{originalErrorMessage:null===(re=ve)||void 0===re?void 0:re.message}))}})}()){this.appId=B,this.appName=re,this.namespace=ve,this.openDbPromise=Ze}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(B){return this.set("last_fetch_status",B)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(B){return this.set("last_successful_fetch_timestamp_millis",B)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(B){return this.set("last_successful_fetch_response",B)}getActiveConfig(){return this.get("active_config")}setActiveConfig(B){return this.set("active_config",B)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(B){return this.set("active_config_etag",B)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(B){return this.set("throttle_metadata",B)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(B){var re=this;return(0,J.Z)(function*(){const ve=yield re.openDbPromise;return new Promise((Ze,pt)=>{var Ut;const Sn=ve.transaction([es],"readonly").objectStore(es),wr=re.createCompositeKey(B);try{const Lr=Sn.get(wr);Lr.onerror=zn=>{pt(xs(zn,"storage-get"))},Lr.onsuccess=zn=>{const Si=zn.target.result;Ze(Si?Si.value:void 0)}}catch(Lr){pt(ri.create("storage-get",{originalErrorMessage:null===(Ut=Lr)||void 0===Ut?void 0:Ut.message}))}})})()}set(B,re){var ve=this;return(0,J.Z)(function*(){const Ze=yield ve.openDbPromise;return new Promise((pt,Ut)=>{var _n;const wr=Ze.transaction([es],"readwrite").objectStore(es),Lr=ve.createCompositeKey(B);try{const zn=wr.put({compositeKey:Lr,value:re});zn.onerror=Si=>{Ut(xs(Si,"storage-set"))},zn.onsuccess=()=>{pt()}}catch(zn){Ut(ri.create("storage-set",{originalErrorMessage:null===(_n=zn)||void 0===_n?void 0:_n.message}))}})})()}delete(B){var re=this;return(0,J.Z)(function*(){const ve=yield re.openDbPromise;return new Promise((Ze,pt)=>{var Ut;const Sn=ve.transaction([es],"readwrite").objectStore(es),wr=re.createCompositeKey(B);try{const Lr=Sn.delete(wr);Lr.onerror=zn=>{pt(xs(zn,"storage-delete"))},Lr.onsuccess=()=>{Ze()}}catch(Lr){pt(ri.create("storage-delete",{originalErrorMessage:null===(Ut=Lr)||void 0===Ut?void 0:Ut.message}))}})})()}createCompositeKey(B){return[this.appId,this.appName,this.namespace,B].join()}}class Oo{constructor(B){this.storage=B}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var B=this;return(0,J.Z)(function*(){const re=B.storage.getLastFetchStatus(),ve=B.storage.getLastSuccessfulFetchTimestampMillis(),Ze=B.storage.getActiveConfig(),pt=yield re;pt&&(B.lastFetchStatus=pt);const Ut=yield ve;Ut&&(B.lastSuccessfulFetchTimestampMillis=Ut);const _n=yield Ze;_n&&(B.activeConfig=_n)})()}setLastFetchStatus(B){return this.lastFetchStatus=B,this.storage.setLastFetchStatus(B)}setLastSuccessfulFetchTimestampMillis(B){return this.lastSuccessfulFetchTimestampMillis=B,this.storage.setLastSuccessfulFetchTimestampMillis(B)}setActiveConfig(B){return this.activeConfig=B,this.storage.setActiveConfig(B)}}function Ls(){return ps.apply(this,arguments)}function ps(){return(ps=(0,J.Z)(function*(){if(!(0,Te.hl)())return!1;try{return yield(0,Te.eu)()}catch(O){return!1}})).apply(this,arguments)}!function Fs(){(0,ye._registerComponent)(new Le.wA("remote-config",function O(B,{instanceIdentifier:re}){const ve=B.getProvider("app").getImmediate(),Ze=B.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw ri.create("registration-window");if(!(0,Te.hl)())throw ri.create("indexed-db-unavailable");const{projectId:pt,apiKey:Ut,appId:_n}=ve.options;if(!pt)throw ri.create("registration-project-id");if(!Ut)throw ri.create("registration-api-key");if(!_n)throw ri.create("registration-app-id");const Sn=new bo(_n,ve.name,re=re||"firebase"),wr=new Oo(Sn),Lr=new Ve.Yd(ni);Lr.logLevel=Ve.in.ERROR;const zn=new Ui(Ze,ye.SDK_VERSION,re,pt,Ut,_n),Si=new uo(zn,Sn),po=new js(Si,Sn,wr,Lr),Zu=new Co(ve,po,wr,Sn,Lr);return function Qe(O){const B=(0,Te.m9)(O);B._initializePromise||(B._initializePromise=B._storageCache.loadFromStorage().then(()=>{B._isInitializationComplete=!0}))}(Zu),Zu},"PUBLIC").setMultipleInstances(!0)),(0,ye.registerVersion)(ni,"0.3.14"),(0,ye.registerVersion)(ni,"0.3.14","esm2017")}();const co="/firebase-messaging-sw.js",us="/firebase-cloud-messaging-push-scope",Jr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",fr="google.c.a.c_id",or="google.c.a.c_l",lr="google.c.a.ts",pi="google.c.a.e";var Hs=(()=>{return(O=Hs||(Hs={})).PUSH_RECEIVED="push-received",O.NOTIFICATION_CLICKED="notification-clicked",Hs;var O})();function Ri(O){const B=new Uint8Array(O);return btoa(String.fromCharCode(...B)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ko(O){const re=(O+"=".repeat((4-O.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ve=atob(re),Ze=new Uint8Array(ve.length);for(let pt=0;pt<ve.length;++pt)Ze[pt]=ve.charCodeAt(pt);return Ze}const ai="fcm_token_details_db",G="fcm_token_object_Store";function pe(O){return xe.apply(this,arguments)}function xe(){return xe=(0,J.Z)(function*(O){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(pt=>pt.name).includes(ai))return null;let B=null;return(yield(0,he.X3)(ai,5,{upgrade:(ve=(0,J.Z)(function*(Ze,pt,Ut,_n){var Sn;if(pt<2||!Ze.objectStoreNames.contains(G))return;const wr=_n.objectStore(G),Lr=yield wr.index("fcmSenderId").get(O);if(yield wr.clear(),Lr)if(2===pt){const zn=Lr;if(!zn.auth||!zn.p256dh||!zn.endpoint)return;B={token:zn.fcmToken,createTime:null!==(Sn=zn.createTime)&&void 0!==Sn?Sn:Date.now(),subscriptionOptions:{auth:zn.auth,p256dh:zn.p256dh,endpoint:zn.endpoint,swScope:zn.swScope,vapidKey:"string"==typeof zn.vapidKey?zn.vapidKey:Ri(zn.vapidKey)}}}else if(3===pt){const zn=Lr;B={token:zn.fcmToken,createTime:zn.createTime,subscriptionOptions:{auth:Ri(zn.auth),p256dh:Ri(zn.p256dh),endpoint:zn.endpoint,swScope:zn.swScope,vapidKey:Ri(zn.vapidKey)}}}else if(4===pt){const zn=Lr;B={token:zn.fcmToken,createTime:zn.createTime,subscriptionOptions:{auth:Ri(zn.auth),p256dh:Ri(zn.p256dh),endpoint:zn.endpoint,swScope:zn.swScope,vapidKey:Ri(zn.vapidKey)}}}}),function(pt,Ut,_n,Sn){return ve.apply(this,arguments)})})).close(),yield(0,he.Lj)(ai),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),qe(B)?B:null;var ve}),xe.apply(this,arguments)}function qe(O){if(!O||!O.subscriptionOptions)return!1;const{subscriptionOptions:B}=O;return"number"==typeof O.createTime&&O.createTime>0&&"string"==typeof O.token&&O.token.length>0&&"string"==typeof B.auth&&B.auth.length>0&&"string"==typeof B.p256dh&&B.p256dh.length>0&&"string"==typeof B.endpoint&&B.endpoint.length>0&&"string"==typeof B.swScope&&B.swScope.length>0&&"string"==typeof B.vapidKey&&B.vapidKey.length>0}const fn="firebase-messaging-store";let Mn=null;function An(){return Mn||(Mn=(0,he.X3)("firebase-messaging-database",1,{upgrade:(O,B)=>{0===B&&O.createObjectStore(fn)}})),Mn}function F(O){return te.apply(this,arguments)}function te(){return(te=(0,J.Z)(function*(O){const B=Mt(O),ve=yield(yield An()).transaction(fn).objectStore(fn).get(B);if(ve)return ve;{const Ze=yield pe(O.appConfig.senderId);if(Ze)return yield V(O,Ze),Ze}})).apply(this,arguments)}function V(O,B){return se.apply(this,arguments)}function se(){return(se=(0,J.Z)(function*(O,B){const re=Mt(O),Ze=(yield An()).transaction(fn,"readwrite");return yield Ze.objectStore(fn).put(B,re),yield Ze.done,B})).apply(this,arguments)}function Ie(O){return ht.apply(this,arguments)}function ht(){return(ht=(0,J.Z)(function*(O){const B=Mt(O),ve=(yield An()).transaction(fn,"readwrite");yield ve.objectStore(fn).delete(B),yield ve.done})).apply(this,arguments)}function Mt({appConfig:O}){return O.appId}const Qn=new Te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function $n(O,B){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,J.Z)(function*(O,B){var re;const ve=yield Xr(O),Ze=Vi(B),pt={method:"POST",headers:ve,body:JSON.stringify(Ze)};let Ut;try{Ut=yield(yield fetch(Pi(O.appConfig),pt)).json()}catch(_n){throw Qn.create("token-subscribe-failed",{errorInfo:null===(re=_n)||void 0===re?void 0:re.toString()})}if(Ut.error)throw Qn.create("token-subscribe-failed",{errorInfo:Ut.error.message});if(!Ut.token)throw Qn.create("token-subscribe-no-token");return Ut.token})).apply(this,arguments)}function Jn(O,B){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,J.Z)(function*(O,B){var re;const ve=yield Xr(O),Ze=Vi(B.subscriptionOptions),pt={method:"PATCH",headers:ve,body:JSON.stringify(Ze)};let Ut;try{Ut=yield(yield fetch(`${Pi(O.appConfig)}/${B.token}`,pt)).json()}catch(_n){throw Qn.create("token-update-failed",{errorInfo:null===(re=_n)||void 0===re?void 0:re.toString()})}if(Ut.error)throw Qn.create("token-update-failed",{errorInfo:Ut.error.message});if(!Ut.token)throw Qn.create("token-update-no-token");return Ut.token})).apply(this,arguments)}function Hr(O,B){return rn.apply(this,arguments)}function rn(){return(rn=(0,J.Z)(function*(O,B){var re;const Ze={method:"DELETE",headers:yield Xr(O)};try{const Ut=yield(yield fetch(`${Pi(O.appConfig)}/${B}`,Ze)).json();if(Ut.error)throw Qn.create("token-unsubscribe-failed",{errorInfo:Ut.error.message})}catch(pt){throw Qn.create("token-unsubscribe-failed",{errorInfo:null===(re=pt)||void 0===re?void 0:re.toString()})}})).apply(this,arguments)}function Pi({projectId:O}){return`https://fcmregistrations.googleapis.com/v1/projects/${O}/registrations`}function Xr(O){return li.apply(this,arguments)}function li(){return(li=(0,J.Z)(function*({appConfig:O,installations:B}){const re=yield B.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O.apiKey,"x-goog-firebase-installations-auth":`FIS ${re}`})})).apply(this,arguments)}function Vi({p256dh:O,auth:B,endpoint:re,vapidKey:ve}){const Ze={web:{endpoint:re,auth:B,p256dh:O}};return ve!==Jr&&(Ze.web.applicationPubKey=ve),Ze}const $=6048e5;function U(O){return N.apply(this,arguments)}function N(){return(N=(0,J.Z)(function*(O){const B=yield Qi(O.swRegistration,O.vapidKey),re={vapidKey:O.vapidKey,swScope:O.swRegistration.scope,endpoint:B.endpoint,auth:Ri(B.getKey("auth")),p256dh:Ri(B.getKey("p256dh"))},ve=yield F(O.firebaseDependencies);if(ve){if(Io(ve.subscriptionOptions,re))return Date.now()>=ve.createTime+$?In(O,{token:ve.token,createTime:Date.now(),subscriptionOptions:re}):ve.token;try{yield Hr(O.firebaseDependencies,ve.token)}catch(Ze){console.warn(Ze)}return Ti(O.firebaseDependencies,re)}return Ti(O.firebaseDependencies,re)})).apply(this,arguments)}function q(O){return rt.apply(this,arguments)}function rt(){return(rt=(0,J.Z)(function*(O){const B=yield F(O.firebaseDependencies);B&&(yield Hr(O.firebaseDependencies,B.token),yield Ie(O.firebaseDependencies));const re=yield O.swRegistration.pushManager.getSubscription();return!re||re.unsubscribe()})).apply(this,arguments)}function In(O,B){return sr.apply(this,arguments)}function sr(){return(sr=(0,J.Z)(function*(O,B){try{const re=yield Jn(O.firebaseDependencies,B),ve=Object.assign(Object.assign({},B),{token:re,createTime:Date.now()});return yield V(O.firebaseDependencies,ve),re}catch(re){throw yield q(O),re}})).apply(this,arguments)}function Ti(O,B){return gi.apply(this,arguments)}function gi(){return(gi=(0,J.Z)(function*(O,B){const ve={token:yield $n(O,B),createTime:Date.now(),subscriptionOptions:B};return yield V(O,ve),ve.token})).apply(this,arguments)}function Qi(O,B){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,J.Z)(function*(O,B){return(yield O.pushManager.getSubscription())||O.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ko(B)})})).apply(this,arguments)}function Io(O,B){return B.vapidKey===O.vapidKey&&B.endpoint===O.endpoint&&B.auth===O.auth&&B.p256dh===O.p256dh}function da(O){const B={from:O.from,collapseKey:O.collapse_key,messageId:O.fcmMessageId};return function ii(O,B){if(!B.notification)return;O.notification={};const re=B.notification.title;re&&(O.notification.title=re);const ve=B.notification.body;ve&&(O.notification.body=ve);const Ze=B.notification.image;Ze&&(O.notification.image=Ze)}(B,O),function Ko(O,B){!B.data||(O.data=B.data)}(B,O),function Yo(O,B){var re,ve,Ze,pt,Ut;if(!B.fcmOptions&&!(null===(re=B.notification)||void 0===re?void 0:re.click_action))return;O.fcmOptions={};const _n=null!==(Ze=null===(ve=B.fcmOptions)||void 0===ve?void 0:ve.link)&&void 0!==Ze?Ze:null===(pt=B.notification)||void 0===pt?void 0:pt.click_action;_n&&(O.fcmOptions.link=_n);const Sn=null===(Ut=B.fcmOptions)||void 0===Ut?void 0:Ut.analytics_label;Sn&&(O.fcmOptions.analyticsLabel=Sn)}(B,O),B}function ts(O){return"object"==typeof O&&!!O&&fr in O}function bs(O,B){const re=[];for(let ve=0;ve<O.length;ve++)re.push(O.charAt(ve)),ve<B.length&&re.push(B.charAt(ve));return re.join("")}function cs(O){return Qn.create("missing-app-config-values",{valueName:O})}bs("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),bs("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Is{constructor(B,re,ve){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ze=function ha(O){if(!O||!O.options)throw cs("App Configuration Object");if(!O.name)throw cs("App Name");const B=["projectId","apiKey","appId","messagingSenderId"],{options:re}=O;for(const ve of B)if(!re[ve])throw cs(ve);return{appName:O.name,projectId:re.projectId,apiKey:re.apiKey,appId:re.appId,senderId:re.messagingSenderId}}(B);this.firebaseDependencies={app:B,appConfig:Ze,installations:re,analyticsProvider:ve}}_delete(){return Promise.resolve()}}function pr(O){return yl.apply(this,arguments)}function yl(){return(yl=(0,J.Z)(function*(O){var B;try{O.swRegistration=yield navigator.serviceWorker.register(co,{scope:us}),O.swRegistration.update().catch(()=>{})}catch(re){throw Qn.create("failed-service-worker-registration",{browserErrorMessage:null===(B=re)||void 0===B?void 0:B.message})}})).apply(this,arguments)}function Fo(O,B){return fa.apply(this,arguments)}function fa(){return(fa=(0,J.Z)(function*(O,B){if(!B&&!O.swRegistration&&(yield pr(O)),B||!O.swRegistration){if(!(B instanceof ServiceWorkerRegistration))throw Qn.create("invalid-sw-registration");O.swRegistration=B}})).apply(this,arguments)}function _i(O,B){return Js.apply(this,arguments)}function Js(){return(Js=(0,J.Z)(function*(O,B){B?O.vapidKey=B:O.vapidKey||(O.vapidKey=Jr)})).apply(this,arguments)}function Lo(){return(Lo=(0,J.Z)(function*(O,B){if(!navigator)throw Qn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Qn.create("permission-blocked");return yield _i(O,null==B?void 0:B.vapidKey),yield Fo(O,null==B?void 0:B.serviceWorkerRegistration),U(O)})).apply(this,arguments)}function Xs(O,B,re){return pa.apply(this,arguments)}function pa(){return(pa=(0,J.Z)(function*(O,B,re){const ve=Pa(B);(yield O.firebaseDependencies.analyticsProvider.get()).logEvent(ve,{message_id:re[fr],message_name:re[or],message_time:re[lr],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Pa(O){switch(O){case Hs.NOTIFICATION_CLICKED:return"notification_open";case Hs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Oa(){return(Oa=(0,J.Z)(function*(O,B){const re=B.data;if(!re.isFirebaseMessaging)return;O.onMessageHandler&&re.messageType===Hs.PUSH_RECEIVED&&("function"==typeof O.onMessageHandler?O.onMessageHandler(da(re)):O.onMessageHandler.next(da(re)));const ve=re.data;ts(ve)&&"1"===ve[pi]&&(yield Xs(O,re.messageType,ve))})).apply(this,arguments)}const Uo="@firebase/messaging",ga=O=>{const B=new Is(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),O.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",re=>function Na(O,B){return Oa.apply(this,arguments)}(B,re)),B},ka=O=>{const B=O.getProvider("messaging").getImmediate();return{getToken:ve=>function Gl(O,B){return Lo.apply(this,arguments)}(B,ve)}};function ns(){return fo.apply(this,arguments)}function fo(){return(fo=(0,J.Z)(function*(){try{yield(0,Te.eu)()}catch(O){return!1}return"undefined"!=typeof window&&(0,Te.hl)()&&(0,Te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ho(){(0,ye._registerComponent)(new Le.wA("messaging",ga,"PUBLIC")),(0,ye._registerComponent)(new Le.wA("messaging-internal",ka,"PRIVATE")),(0,ye.registerVersion)(Uo,"0.9.19"),(0,ye.registerVersion)(Uo,"0.9.19","esm2017")}();const Bi="analytics",Ws="firebase_id",Us="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$t="https://www.googletagmanager.com/gtag/js",gr=new Ve.Yd("@firebase/analytics");function eo(O){return Promise.all(O.map(B=>B.catch(re=>re)))}function Jo(O,B){const re=document.createElement("script");re.src=`${$t}?l=${O}&id=${B}`,re.async=!0,document.head.appendChild(re)}function er(O,B,re,ve,Ze,pt){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,J.Z)(function*(O,B,re,ve,Ze,pt){const Ut=ve[Ze];try{if(Ut)yield B[Ut];else{const Sn=(yield eo(re)).find(wr=>wr.measurementId===Ze);Sn&&(yield B[Sn.appId])}}catch(_n){gr.error(_n)}O("config",Ze,pt)})).apply(this,arguments)}function mn(O,B,re,ve,Ze){return mt.apply(this,arguments)}function mt(){return(mt=(0,J.Z)(function*(O,B,re,ve,Ze){try{let pt=[];if(Ze&&Ze.send_to){let Ut=Ze.send_to;Array.isArray(Ut)||(Ut=[Ut]);const _n=yield eo(re);for(const Sn of Ut){const wr=_n.find(zn=>zn.measurementId===Sn),Lr=wr&&B[wr.appId];if(!Lr){pt=[];break}pt.push(Lr)}}0===pt.length&&(pt=Object.values(B)),yield Promise.all(pt),O("event",ve,Ze||{})}catch(pt){gr.error(pt)}})).apply(this,arguments)}function vl(O){const B=window.document.getElementsByTagName("script");for(const re of Object.values(B))if(re.src&&re.src.includes($t)&&re.src.includes(O))return re;return null}const si=new Te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),tl=new class ya{constructor(B={},re=1e3){this.throttleMetadata=B,this.intervalMillis=re}getThrottleMetadata(B){return this.throttleMetadata[B]}setThrottleMetadata(B,re){this.throttleMetadata[B]=re}deleteThrottleMetadata(B){delete this.throttleMetadata[B]}};function Xo(O){return new Headers({Accept:"application/json","x-goog-api-key":O})}function Va(O){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,J.Z)(function*(O){var B;const{appId:re,apiKey:ve}=O,Ze={method:"GET",headers:Xo(ve)},pt=Us.replace("{app-id}",re),Ut=yield fetch(pt,Ze);if(200!==Ut.status&&304!==Ut.status){let _n="";try{const Sn=yield Ut.json();(null===(B=Sn.error)||void 0===B?void 0:B.message)&&(_n=Sn.error.message)}catch(Sn){}throw si.create("config-fetch-failed",{httpStatus:Ut.status,responseMessage:_n})}return Ut.json()})).apply(this,arguments)}function va(O){return mr.apply(this,arguments)}function mr(){return(mr=(0,J.Z)(function*(O,B=tl,re){const{appId:ve,apiKey:Ze,measurementId:pt}=O.options;if(!ve)throw si.create("no-app-id");if(!Ze){if(pt)return{measurementId:pt,appId:ve};throw si.create("no-api-key")}const Ut=B.getThrottleMetadata(ve)||{backoffCount:0,throttleEndTimeMillis:Date.now()},_n=new $o;return setTimeout((0,J.Z)(function*(){_n.abort()}),void 0!==re?re:6e4),jo({appId:ve,apiKey:Ze,measurementId:pt},Ut,_n,B)})).apply(this,arguments)}function jo(O,B,re){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,J.Z)(function*(O,{throttleEndTimeMillis:B,backoffCount:re},ve,Ze=tl){var pt,Ut;const{appId:_n,measurementId:Sn}=O;try{yield vi(ve,B)}catch(wr){if(Sn)return gr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Sn} provided in the "measurementId" field in the local Firebase config. [${null===(pt=wr)||void 0===pt?void 0:pt.message}]`),{appId:_n,measurementId:Sn};throw wr}try{const wr=yield Va(O);return Ze.deleteThrottleMetadata(_n),wr}catch(wr){const Lr=wr;if(!nr(Lr)){if(Ze.deleteThrottleMetadata(_n),Sn)return gr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Sn} provided in the "measurementId" field in the local Firebase config. [${null==Lr?void 0:Lr.message}]`),{appId:_n,measurementId:Sn};throw wr}const zn=503===Number(null===(Ut=null==Lr?void 0:Lr.customData)||void 0===Ut?void 0:Ut.httpStatus)?(0,Te.$s)(re,Ze.intervalMillis,30):(0,Te.$s)(re,Ze.intervalMillis),Si={throttleEndTimeMillis:Date.now()+zn,backoffCount:re+1};return Ze.setThrottleMetadata(_n,Si),gr.debug(`Calling attemptFetch again in ${zn} millis`),jo(O,Si,ve,Ze)}})).apply(this,arguments)}function vi(O,B){return new Promise((re,ve)=>{const Ze=Math.max(B-Date.now(),0),pt=setTimeout(re,Ze);O.addEventListener(()=>{clearTimeout(pt),ve(si.create("fetch-throttle",{throttleEndTimeMillis:B}))})})}function nr(O){if(!(O instanceof Te.ZR&&O.customData))return!1;const B=Number(O.customData.httpStatus);return 429===B||500===B||503===B||504===B}class $o{constructor(){this.listeners=[]}addEventListener(B){this.listeners.push(B)}abort(){this.listeners.forEach(B=>B())}}let Tr,Et;function hi(){return(hi=(0,J.Z)(function*(O,B,re,ve,Ze){if(Ze&&Ze.global)O("event",re,ve);else{const pt=yield B;O("event",re,Object.assign(Object.assign({},ve),{send_to:pt}))}})).apply(this,arguments)}function bn(O){Et=O}function rr(O){Tr=O}function Fn(){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,J.Z)(function*(){var O;if(!(0,Te.hl)())return gr.warn(si.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Te.eu)()}catch(B){return gr.warn(si.create("indexeddb-unavailable",{errorInfo:null===(O=B)||void 0===O?void 0:O.toString()}).message),!1}return!0})).apply(this,arguments)}function Ts(){return(Ts=(0,J.Z)(function*(O,B,re,ve,Ze,pt,Ut){var _n;const Sn=va(O);Sn.then(po=>{re[po.measurementId]=po.appId,O.options.measurementId&&po.measurementId!==O.options.measurementId&&gr.warn(`The measurement ID in the local Firebase config (${O.options.measurementId}) does not match the measurement ID fetched from the server (${po.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(po=>gr.error(po)),B.push(Sn);const wr=Fn().then(po=>{if(po)return ve.getId()}),[Lr,zn]=yield Promise.all([Sn,wr]);vl(pt)||Jo(pt,Lr.measurementId),Et&&(Ze("consent","default",Et),bn(void 0)),Ze("js",new Date);const Si=null!==(_n=null==Ut?void 0:Ut.config)&&void 0!==_n?_n:{};return Si.origin="firebase",Si.update=!0,null!=zn&&(Si[Ws]=zn),Ze("config",Lr.measurementId,Si),Tr&&(Ze("set",Tr),rr(void 0)),Lr.measurementId})).apply(this,arguments)}class ei{constructor(B){this.app=B}_delete(){return delete nt[this.app.options.appId],Promise.resolve()}}let nt={},ds=[];const rs={};let zs,Ba,Vs="dataLayer",Ea=!1;function Hu(O,B,re){!function $u(){const O=[];if((0,Te.ru)()&&O.push("This is a browser extension environment."),(0,Te.zI)()||O.push("Cookies are not available."),O.length>0){const B=O.map((ve,Ze)=>`(${Ze+1}) ${ve}`).join(" "),re=si.create("invalid-analytics-context",{errorInfo:B});gr.warn(re.message)}}();const ve=O.options.appId;if(!ve)throw si.create("no-app-id");if(!O.options.apiKey){if(!O.options.measurementId)throw si.create("no-api-key");gr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${O.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=nt[ve])throw si.create("already-exists",{id:ve});if(!Ea){!function pn(O){let B=[];Array.isArray(window[O])?B=window[O]:window[O]=B}(Vs);const{wrappedGtag:pt,gtagCore:Ut}=function Gi(O,B,re,ve,Ze){let pt=function(...Ut){window[ve].push(arguments)};return window[Ze]&&"function"==typeof window[Ze]&&(pt=window[Ze]),window[Ze]=function Gt(O,B,re,ve){function pt(){return(pt=(0,J.Z)(function*(Ut,_n,Sn){try{"event"===Ut?yield mn(O,B,re,_n,Sn):"config"===Ut?yield er(O,B,re,ve,_n,Sn):"consent"===Ut?O("consent","update",Sn):O("set",_n)}catch(wr){gr.error(wr)}})).apply(this,arguments)}return function Ze(Ut,_n,Sn){return pt.apply(this,arguments)}}(pt,O,B,re),{gtagCore:pt,wrappedGtag:window[Ze]}}(nt,ds,rs,Vs,"gtag");Ba=pt,zs=Ut,Ea=!0}return nt[ve]=function Br(O,B,re,ve,Ze,pt,Ut){return Ts.apply(this,arguments)}(O,ds,rs,B,zs,Vs,re),new ei(O)}function Cc(){return ja.apply(this,arguments)}function ja(){return(ja=(0,J.Z)(function*(){if((0,Te.ru)()||!(0,Te.zI)()||!(0,Te.hl)())return!1;try{return yield(0,Te.eu)()}catch(O){return!1}})).apply(this,arguments)}const qs="@firebase/analytics";!function Di(){(0,ye._registerComponent)(new Le.wA(Bi,(B,{options:re})=>Hu(B.getProvider("app").getImmediate(),B.getProvider("installations-internal").getImmediate(),re),"PUBLIC")),(0,ye._registerComponent)(new Le.wA("analytics-internal",function O(B){try{const re=B.getProvider(Bi).getImmediate();return{logEvent:(ve,Ze,pt)=>function nl(O,B,re,ve){O=(0,Te.m9)(O),function wl(O,B,re,ve,Ze){return hi.apply(this,arguments)}(Ba,nt[O.app.options.appId],B,re,ve).catch(Ze=>gr.error(Ze))}(re,ve,Ze,pt)}}catch(re){throw si.create("interop-component-reg-failed",{reason:re})}},"PRIVATE")),(0,ye.registerVersion)(qs,"0.8.3"),(0,ye.registerVersion)(qs,"0.8.3","esm2017")}();var bc=j(4408),$i=j(7565);const Gu=new class $a extends $i.v{}(class no extends bc.o{constructor(B,re){super(B,re),this.scheduler=B,this.work=re}schedule(B,re=0){return re>0?super.schedule(B,re):(this.delay=re,this.state=B,this.scheduler.flush(this),this)}execute(B,re){return re>0||this.closed?super.execute(B,re):this._execute(B,re)}requestAsyncId(B,re,ve=0){return null!=ve&&ve>0||null==ve&&this.delay>0?super.requestAsyncId(B,re,ve):B.flush(this)}});var vu=j(4986),Cl=j(8306),ea=j(8505),gs=j(5363),rl=j(9468);const wa=new _.GfV("7.4.1"),ta="__angularfire_symbol__analyticsIsSupportedValue",bl="__angularfire_symbol__analyticsIsSupported",Ha="__angularfire_symbol__remoteConfigIsSupportedValue",Ho="__angularfire_symbol__remoteConfigIsSupported",Il="__angularfire_symbol__messagingIsSupportedValue",na="__angularfire_symbol__messagingIsSupported";function Ic(O,B,re){if(B){if(1===B.length)return B[0];const pt=B.filter(Ut=>Ut.app===re);if(1===pt.length)return pt[0]}return re.container.getProvider(O).getImmediate({optional:!0})}globalThis[bl]||(globalThis[bl]=Cc().then(O=>globalThis[ta]=O).catch(()=>globalThis[ta]=!1)),globalThis[na]||(globalThis[na]=ns().then(O=>globalThis[Il]=O).catch(()=>globalThis[Il]=!1)),globalThis[Ho]||(globalThis[Ho]=Ls().then(O=>globalThis[Ha]=O).catch(()=>globalThis[Ha]=!1));const Wo=(O,B)=>{const re=B?[B]:(0,E.C6)(),ve=[];return re.forEach(Ze=>{Ze.container.getProvider(O).instances.forEach(Ut=>{ve.includes(Ut)||ve.push(Ut)})}),ve};function Wa(){}class Ga{constructor(B,re=Gu){this.zone=B,this.delegate=re}now(){return this.delegate.now()}schedule(B,re,ve){const Ze=this.zone;return this.delegate.schedule(function(Ut){Ze.runGuarded(()=>{B.apply(this,[Ut])})},re,ve)}}class Tl{constructor(B){this.zone=B,this.task=null}call(B,re){const ve=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wa,{},Wa,Wa)),re.pipe((0,ea.b)({next:ve,complete:ve,error:ve})).subscribe(B).add(ve)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let il=(()=>{class O{constructor(re){this.ngZone=re,this.outsideAngular=re.runOutsideAngular(()=>new Ga(Zone.current)),this.insideAngular=re.run(()=>new Ga(Zone.current,vu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return O.\u0275fac=function(re){return new(re||O)(_.LFG(_.R0b))},O.\u0275prov=_.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();function ia(){const O=globalThis.\u0275AngularFireScheduler;if(!O)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return O}function qu(O){return ia().ngZone.runOutsideAngular(()=>O())}function Dl(O){return ia().ngZone.run(()=>O())}function Ca(O){return O.pipe((0,gs.Q)(ia().outsideAngular))}function qi(O){return ia(),function ms(O){return function(re){return(re=re.lift(new Tl(O.ngZone))).pipe((0,rl.R)(O.outsideAngular),(0,gs.Q)(O.insideAngular))}}(ia())(O)}const Ai=(O,B)=>function(){const ve=arguments;return B&&setTimeout(()=>{"scheduled"===B.state&&B.invoke()},10),Dl(()=>O.apply(void 0,ve))},Al=(O,B)=>function(){let re;const ve=arguments;for(let pt=0;pt<arguments.length;pt++)"function"==typeof ve[pt]&&(B&&(re||(re=Dl(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wa,{},Wa,Wa)))),ve[pt]=Ai(ve[pt],re));const Ze=qu(()=>O.apply(this,ve));if(!B){if(Ze instanceof Cl.y){const pt=ia();return Ze.pipe((0,rl.R)(pt.outsideAngular),(0,gs.Q)(pt.insideAngular))}return Dl(()=>Ze)}return Ze instanceof Cl.y?Ze.pipe(qi):Ze instanceof Promise?Dl(()=>new Promise((pt,Ut)=>Ze.then(_n=>Dl(()=>pt(_n)),_n=>Dl(()=>Ut(_n))))):"function"==typeof Ze&&re?function(){return setTimeout(()=>{re&&"scheduled"===re.state&&re.invoke()},10),Ze.apply(this,arguments)}:Dl(()=>Ze)}},1279:(Yt,Je,j)=>{j.d(Je,{$:()=>yl,A:()=>Zt,B:()=>gt,G:()=>Ss,H:()=>Ns,J:()=>Ri,L:()=>Fi,M:()=>V,N:()=>Mt,P:()=>Tc,Q:()=>on,R:()=>zl,T:()=>Qn,U:()=>ht,V:()=>Pr,W:()=>Hr,X:()=>Vi,Y:()=>Ko,Z:()=>ts,_:()=>ha,a:()=>rr,a0:()=>Gl,a1:()=>Xs,a2:()=>Pa,a3:()=>Oa,a4:()=>Rs,a5:()=>ka,a6:()=>ns,a7:()=>fo,a8:()=>Fa,a9:()=>Ec,aA:()=>qh,aB:()=>Ku,aC:()=>xl,aD:()=>sl,aE:()=>Ir,aI:()=>Br,aL:()=>Qt,aa:()=>id,ab:()=>Bi,ac:()=>Vo,af:()=>gr,ag:()=>Jo,ah:()=>pn,ak:()=>rt,al:()=>El,an:()=>nr,ao:()=>A,ap:()=>Ue,aq:()=>tn,ar:()=>ze,as:()=>di,at:()=>Wn,au:()=>za,av:()=>Qu,aw:()=>jn,ax:()=>Rt,ay:()=>vn,az:()=>Bn,b:()=>Et,c:()=>Ze,d:()=>Sn,e:()=>Ut,f:()=>go,g:()=>ul,h:()=>zd,i:()=>qs,j:()=>qd,k:()=>ld,l:()=>Wa,m:()=>io,n:()=>Jd,o:()=>Jt,r:()=>Tl,s:()=>Ic,u:()=>Dl});var _=j(5861),E=j(2090),J=j(9681),ye=j(1877);function he(b,m){var v={};for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&m.indexOf(S)<0&&(v[S]=b[S]);if(null!=b&&"function"==typeof Object.getOwnPropertySymbols){var z=0;for(S=Object.getOwnPropertySymbols(b);z<S.length;z++)m.indexOf(S[z])<0&&Object.prototype.propertyIsEnumerable.call(b,S[z])&&(v[S[z]]=b[S[z]])}return v}var et=j(4859);const Jt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Zt={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const gt=function an(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Dt=function wn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Me=new E.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_e=new ye.Yd("@firebase/auth");function yn(b,...m){_e.logLevel<=ye.in.ERROR&&_e.error(`Auth (${J.SDK_VERSION}): ${b}`,...m)}function Wn(b,...m){throw yr(b,...m)}function jn(b,...m){return yr(b,...m)}function qr(b,m,v){const S=Object.assign(Object.assign({},Dt()),{[m]:v});return new E.LL("auth","Firebase",S).create(m,{appName:b.name})}function Ur(b,m,v){if(!(m instanceof v))throw v.name!==m.constructor.name&&Wn(b,"argument-error"),qr(b,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yr(b,...m){if("string"!=typeof b){const v=m[0],S=[...m.slice(1)];return S[0]&&(S[0].appName=b.name),b._errorFactory.create(v,...S)}return Me.create(b,...m)}function Rt(b,m,...v){if(!b)throw yr(m,...v)}function xr(b){const m="INTERNAL ASSERTION FAILED: "+b;throw yn(m),new Error(m)}function tn(b,m){b||xr(m)}const ir=new Map;function vn(b){tn(b instanceof Function,"Expected a class definition");let m=ir.get(b);return m?(tn(m instanceof b,"Instance stored in cache mismatched with class"),m):(m=new b,ir.set(b,m),m)}function Gr(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function jr(){return"http:"===Mr()||"https:"===Mr()}function Mr(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class Vn{constructor(m,v){this.shortDelay=m,this.longDelay=v,tn(v>m,"Short delay should be less than long delay!"),this.isMobile=(0,E.uI)()||(0,E.b$)()}get(){return function ti(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(jr()||(0,E.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function un(b,m){tn(b.emulator,"Emulator should always be set here");const{url:v}=b.emulator;return m?`${v}${m.startsWith("/")?m.slice(1):m}`:v}class nn{static initialize(m,v,S){this.fetchImpl=m,v&&(this.headersImpl=v),S&&(this.responseImpl=S)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Dr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Zr=new Vn(3e4,6e4);function Dn(b,m){return b.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:b.tenantId}):m}function Ar(b,m,v,S){return dr.apply(this,arguments)}function dr(){return(dr=(0,_.Z)(function*(b,m,v,S,z={}){return ar(b,z,(0,_.Z)(function*(){let ne={},Oe={};S&&("GET"===m?Oe=S:ne={body:JSON.stringify(S)});const Tt=(0,E.xO)(Object.assign({key:b.config.apiKey},Oe)).slice(1),gn=yield b._getAdditionalHeaders();return gn["Content-Type"]="application/json",b.languageCode&&(gn["X-Firebase-Locale"]=b.languageCode),nn.fetch()(cr(b,b.config.apiHost,v,Tt),Object.assign({method:m,headers:gn,referrerPolicy:"no-referrer"},ne))}))})).apply(this,arguments)}function ar(b,m,v){return En.apply(this,arguments)}function En(){return(En=(0,_.Z)(function*(b,m,v){b._canInitEmulator=!1;const S=Object.assign(Object.assign({},Dr),m);try{const z=new Ot(b),ne=yield Promise.race([v(),z.promise]);z.clearNetworkTimeout();const Oe=yield ne.json();if("needConfirmation"in Oe)throw dt(b,"account-exists-with-different-credential",Oe);if(ne.ok&&!("errorMessage"in Oe))return Oe;{const Tt=ne.ok?Oe.errorMessage:Oe.error.message,[gn,en]=Tt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===gn)throw dt(b,"credential-already-in-use",Oe);if("EMAIL_EXISTS"===gn)throw dt(b,"email-already-in-use",Oe);if("USER_DISABLED"===gn)throw dt(b,"user-disabled",Oe);const Rn=S[gn]||gn.toLowerCase().replace(/[_\s]+/g,"-");if(en)throw qr(b,Rn,en);Wn(b,Rn)}}catch(z){if(z instanceof E.ZR)throw z;Wn(b,"network-request-failed")}})).apply(this,arguments)}function hr(b,m,v,S){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,_.Z)(function*(b,m,v,S,z={}){const ne=yield Ar(b,m,v,S,z);return"mfaPendingCredential"in ne&&Wn(b,"multi-factor-auth-required",{_serverResponse:ne}),ne})).apply(this,arguments)}function cr(b,m,v,S){const z=`${m}${v}?${S}`;return b.config.emulator?un(b.config,z):`${b.config.apiScheme}://${z}`}class Ot{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((v,S)=>{this.timer=setTimeout(()=>S(jn(this.auth,"network-request-failed")),Zr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function dt(b,m,v){const S={appName:b.name};v.email&&(S.email=v.email),v.phoneNumber&&(S.phoneNumber=v.phoneNumber);const z=jn(b,m,S);return z.customData._tokenResponse=v,z}function cn(){return(cn=(0,_.Z)(function*(b,m){return Ar(b,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function hn(b,m){return tr.apply(this,arguments)}function tr(){return(tr=(0,_.Z)(function*(b,m){return Ar(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Se(b,m){return we.apply(this,arguments)}function we(){return(we=(0,_.Z)(function*(b,m){return Ar(b,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Fe(b){if(b)try{const m=new Date(Number(b));if(!isNaN(m.getTime()))return m.toUTCString()}catch(m){}}function K(){return(K=(0,_.Z)(function*(b,m=!1){const v=(0,E.m9)(b),S=yield v.getIdToken(m),z=ue(S);Rt(z&&z.exp&&z.auth_time&&z.iat,v.auth,"internal-error");const ne="object"==typeof z.firebase?z.firebase:void 0,Oe=null==ne?void 0:ne.sign_in_provider;return{claims:z,token:S,authTime:Fe(ee(z.auth_time)),issuedAtTime:Fe(ee(z.iat)),expirationTime:Fe(ee(z.exp)),signInProvider:Oe||null,signInSecondFactor:(null==ne?void 0:ne.sign_in_second_factor)||null}})).apply(this,arguments)}function ee(b){return 1e3*Number(b)}function ue(b){var m;const[v,S,z]=b.split(".");if(void 0===v||void 0===S||void 0===z)return yn("JWT malformed, contained fewer than 3 sections"),null;try{const ne=(0,E.tV)(S);return ne?JSON.parse(ne):(yn("Failed to decode base64 JWT payload"),null)}catch(ne){return yn("Caught error parsing JWT payload as JSON",null===(m=ne)||void 0===m?void 0:m.toString()),null}}function Ge(b,m){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,_.Z)(function*(b,m,v=!1){if(v)return m;try{return yield m}catch(S){throw S instanceof E.ZR&&Bt(S)&&b.auth.currentUser===b&&(yield b.auth.signOut()),S}})).apply(this,arguments)}function Bt({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class qn{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var v;if(m){const S=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),S}{this.errorBackoff=3e4;const z=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,z)}}schedule(m=!1){var v=this;if(!this.isRunning)return;const S=this.getInterval(m);this.timerId=setTimeout((0,_.Z)(function*(){yield v.iteration()}),S)}iteration(){var m=this;return(0,_.Z)(function*(){var v;try{yield m.user.getIdToken(!0)}catch(S){return void("auth/network-request-failed"===(null===(v=S)||void 0===v?void 0:v.code)&&m.schedule(!0))}m.schedule()})()}}class Er{constructor(m,v){this.createdAt=m,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fe(this.lastLoginAt),this.creationTime=Fe(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function xt(b){return jt.apply(this,arguments)}function jt(){return(jt=(0,_.Z)(function*(b){var m;const v=b.auth,S=yield b.getIdToken(),z=yield Ge(b,Se(v,{idToken:S}));Rt(null==z?void 0:z.users.length,v,"internal-error");const ne=z.users[0];b._notifyReloadListener(ne);const Oe=(null===(m=ne.providerUserInfo)||void 0===m?void 0:m.length)?$r(ne.providerUserInfo):[],Tt=oi(b.providerData,Oe),Rn=!!b.isAnonymous&&!(b.email&&ne.passwordHash||(null==Tt?void 0:Tt.length)),ci={uid:ne.localId,displayName:ne.displayName||null,photoURL:ne.photoUrl||null,email:ne.email||null,emailVerified:ne.emailVerified||!1,phoneNumber:ne.phoneNumber||null,tenantId:ne.tenantId||null,providerData:Tt,metadata:new Er(ne.createdAt,ne.lastLoginAt),isAnonymous:Rn};Object.assign(b,ci)})).apply(this,arguments)}function Un(){return(Un=(0,_.Z)(function*(b){const m=(0,E.m9)(b);yield xt(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function oi(b,m){return[...b.filter(S=>!m.some(z=>z.providerId===S.providerId)),...m]}function $r(b){return b.map(m=>{var{providerId:v}=m,S=he(m,["providerId"]);return{providerId:v,uid:S.rawId||"",displayName:S.displayName||null,email:S.email||null,phoneNumber:S.phoneNumber||null,photoURL:S.photoUrl||null}})}function Ln(){return(Ln=(0,_.Z)(function*(b,m){const v=yield ar(b,{},(0,_.Z)(function*(){const S=(0,E.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:z,apiKey:ne}=b.config,Oe=cr(b,z,"/v1/token",`key=${ne}`),Tt=yield b._getAdditionalHeaders();return Tt["Content-Type"]="application/x-www-form-urlencoded",nn.fetch()(Oe,{method:"POST",headers:Tt,body:S})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class Rr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){Rt(m.idToken,"internal-error"),Rt(void 0!==m.idToken,"internal-error"),Rt(void 0!==m.refreshToken,"internal-error");const v="expiresIn"in m&&void 0!==m.expiresIn?Number(m.expiresIn):function De(b){const m=ue(b);return Rt(m,"internal-error"),Rt(void 0!==m.exp,"internal-error"),Rt(void 0!==m.iat,"internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,v)}getToken(m,v=!1){var S=this;return(0,_.Z)(function*(){return Rt(!S.accessToken||S.refreshToken,m,"user-token-expired"),v||!S.accessToken||S.isExpired?S.refreshToken?(yield S.refresh(m,S.refreshToken),S.accessToken):null:S.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,v){var S=this;return(0,_.Z)(function*(){const{accessToken:z,refreshToken:ne,expiresIn:Oe}=yield function zt(b,m){return Ln.apply(this,arguments)}(m,v);S.updateTokensAndExpiration(z,ne,Number(Oe))})()}updateTokensAndExpiration(m,v,S){this.refreshToken=v||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*S}static fromJSON(m,v){const{refreshToken:S,accessToken:z,expirationTime:ne}=v,Oe=new Rr;return S&&(Rt("string"==typeof S,"internal-error",{appName:m}),Oe.refreshToken=S),z&&(Rt("string"==typeof z,"internal-error",{appName:m}),Oe.accessToken=z),ne&&(Rt("number"==typeof ne,"internal-error",{appName:m}),Oe.expirationTime=ne),Oe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new Rr,this.toJSON())}_performRefresh(){return xr("not implemented")}}function Kr(b,m){Rt("string"==typeof b||void 0===b,"internal-error",{appName:m})}class ni{constructor(m){var{uid:v,auth:S,stsTokenManager:z}=m,ne=he(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=S,this.stsTokenManager=z,this.accessToken=z.accessToken,this.displayName=ne.displayName||null,this.email=ne.email||null,this.emailVerified=ne.emailVerified||!1,this.phoneNumber=ne.phoneNumber||null,this.photoURL=ne.photoURL||null,this.isAnonymous=ne.isAnonymous||!1,this.tenantId=ne.tenantId||null,this.providerData=ne.providerData?[...ne.providerData]:[],this.metadata=new Er(ne.createdAt||void 0,ne.lastLoginAt||void 0)}getIdToken(m){var v=this;return(0,_.Z)(function*(){const S=yield Ge(v,v.stsTokenManager.getToken(v.auth,m));return Rt(S,v.auth,"internal-error"),v.accessToken!==S&&(v.accessToken=S,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),S})()}getIdTokenResult(m){return function le(b){return K.apply(this,arguments)}(this,m)}reload(){return function kn(b){return Un.apply(this,arguments)}(this)}_assign(m){this!==m&&(Rt(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(v=>Object.assign({},v)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new ni(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){Rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,v=!1){var S=this;return(0,_.Z)(function*(){let z=!1;m.idToken&&m.idToken!==S.stsTokenManager.accessToken&&(S.stsTokenManager.updateFromServerResponse(m),z=!0),v&&(yield xt(S)),yield S.auth._persistUserIfCurrent(S),z&&S.auth._notifyListenersIfCurrent(S)})()}delete(){var m=this;return(0,_.Z)(function*(){const v=yield m.getIdToken();return yield Ge(m,function Kt(b,m){return cn.apply(this,arguments)}(m.auth,{idToken:v})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,v){var S,z,ne,Oe,Tt,gn,en,Rn;const ci=null!==(S=v.displayName)&&void 0!==S?S:void 0,Oi=null!==(z=v.email)&&void 0!==z?z:void 0,ss=null!==(ne=v.phoneNumber)&&void 0!==ne?ne:void 0,mo=null!==(Oe=v.photoURL)&&void 0!==Oe?Oe:void 0,Rc=null!==(Tt=v.tenantId)&&void 0!==Tt?Tt:void 0,ys=null!==(gn=v._redirectEventId)&&void 0!==gn?gn:void 0,tu=null!==(en=v.createdAt)&&void 0!==en?en:void 0,Xd=null!==(Rn=v.lastLoginAt)&&void 0!==Rn?Rn:void 0,{uid:oa,emailVerified:qa,isAnonymous:Pc,providerData:bu,stsTokenManager:Iu}=v;Rt(oa&&Iu,m,"internal-error");const Nc=Rr.fromJSON(this.name,Iu);Rt("string"==typeof oa,m,"internal-error"),Kr(ci,m.name),Kr(Oi,m.name),Rt("boolean"==typeof qa,m,"internal-error"),Rt("boolean"==typeof Pc,m,"internal-error"),Kr(ss,m.name),Kr(mo,m.name),Kr(Rc,m.name),Kr(ys,m.name),Kr(tu,m.name),Kr(Xd,m.name);const nu=new ni({uid:oa,auth:m,email:Oi,emailVerified:qa,displayName:ci,isAnonymous:Pc,photoURL:mo,phoneNumber:ss,tenantId:Rc,stsTokenManager:Nc,createdAt:tu,lastLoginAt:Xd});return bu&&Array.isArray(bu)&&(nu.providerData=bu.map(hd=>Object.assign({},hd))),ys&&(nu._redirectEventId=ys),nu}static _fromIdTokenResponse(m,v,S=!1){return(0,_.Z)(function*(){const z=new Rr;z.updateFromServerResponse(v);const ne=new ni({uid:v.localId,auth:m,stsTokenManager:z,isAnonymous:S});return yield xt(ne),ne})()}}const Fi=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(v,S){var z=this;return(0,_.Z)(function*(){z.storage[v]=S})()}_get(v){var S=this;return(0,_.Z)(function*(){const z=S.storage[v];return void 0===z?null:z})()}_remove(v){var S=this;return(0,_.Z)(function*(){delete S.storage[v]})()}_addListener(v,S){}_removeListener(v,S){}}return b.type="NONE",b})();function Bn(b,m,v){return`firebase:${b}:${m}:${v}`}class Li{constructor(m,v,S){this.persistence=m,this.auth=v,this.userKey=S;const{config:z,name:ne}=this.auth;this.fullUserKey=Bn(this.userKey,z.apiKey,ne),this.fullPersistenceKey=Bn("persistence",z.apiKey,ne),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,_.Z)(function*(){const v=yield m.persistence._get(m.fullUserKey);return v?ni._fromJSON(m.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var v=this;return(0,_.Z)(function*(){if(v.persistence===m)return;const S=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=m,S?v.setCurrentUser(S):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,v,S="authUser"){return(0,_.Z)(function*(){if(!v.length)return new Li(vn(Fi),m,S);const z=(yield Promise.all(v.map(function(){var en=(0,_.Z)(function*(Rn){if(yield Rn._isAvailable())return Rn});return function(Rn){return en.apply(this,arguments)}}()))).filter(en=>en);let ne=z[0]||vn(Fi);const Oe=Bn(S,m.config.apiKey,m.name);let Tt=null;for(const en of v)try{const Rn=yield en._get(Oe);if(Rn){const ci=ni._fromJSON(m,Rn);en!==ne&&(Tt=ci),ne=en;break}}catch(Rn){}const gn=z.filter(en=>en._shouldAllowMigration);return ne._shouldAllowMigration&&gn.length?(ne=gn[0],Tt&&(yield ne._set(Oe,Tt.toJSON())),yield Promise.all(v.map(function(){var en=(0,_.Z)(function*(Rn){if(Rn!==ne)try{yield Rn._remove(Oe)}catch(ci){}});return function(Rn){return en.apply(this,arguments)}}())),new Li(ne,m,S)):new Li(ne,m,S)})()}}function ri(b){const m=b.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(mi(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(Yn(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(kr(m))return"Blackberry";if(Mi(m))return"Webos";if(Xi(m))return"Safari";if((m.includes("chrome/")||ws(m))&&!m.includes("edge/"))return"Chrome";if(di(m))return"Android";{const S=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==S?void 0:S.length))return S[1]}return"Other"}function Yn(b=(0,E.z$)()){return/firefox\//i.test(b)}function Xi(b=(0,E.z$)()){const m=b.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function ws(b=(0,E.z$)()){return/crios\//i.test(b)}function mi(b=(0,E.z$)()){return/iemobile/i.test(b)}function di(b=(0,E.z$)()){return/android/i.test(b)}function kr(b=(0,E.z$)()){return/blackberry/i.test(b)}function Mi(b=(0,E.z$)()){return/webos/i.test(b)}function ze(b=(0,E.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function Ue(b=(0,E.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}function Wt(b=(0,E.z$)()){return ze(b)||di(b)||Mi(b)||kr(b)||/windows phone/i.test(b)||mi(b)}function Zn(b,m=[]){let v;switch(b){case"Browser":v=ri((0,E.z$)());break;case"Worker":v=`${ri((0,E.z$)())}-${b}`;break;default:v=b}const S=m.length?m.join(","):"FirebaseCore-web";return`${v}/JsCore/${J.SDK_VERSION}/${S}`}class wi{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,v){const S=ne=>new Promise((Oe,Tt)=>{try{Oe(m(ne))}catch(gn){Tt(gn)}});S.onAbort=v,this.queue.push(S);const z=this.queue.length-1;return()=>{this.queue[z]=()=>Promise.resolve()}}runMiddleware(m){var v=this;return(0,_.Z)(function*(){var S;if(v.auth.currentUser===m)return;const z=[];try{for(const ne of v.queue)yield ne(m),ne.onAbort&&z.push(ne.onAbort)}catch(ne){z.reverse();for(const Oe of z)try{Oe()}catch(Tt){}throw v.auth._errorFactory.create("login-blocked",{originalMessage:null===(S=ne)||void 0===S?void 0:S.message})}})()}}class Fr{constructor(m,v,S){this.app=m,this.heartbeatServiceProvider=v,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qr(this),this.idTokenSubscription=new Qr(this),this.beforeStateQueue=new wi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Me,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(m,v){var S=this;return v&&(this._popupRedirectResolver=vn(v)),this._initializationPromise=this.queue((0,_.Z)(function*(){var z,ne;if(!S._deleted&&(S.persistenceManager=yield Li.create(S,m),!S._deleted)){if(null===(z=S._popupRedirectResolver)||void 0===z?void 0:z._shouldInitProactively)try{yield S._popupRedirectResolver._initialize(S)}catch(Oe){}yield S.initializeCurrentUser(v),S.lastNotifiedUid=(null===(ne=S.currentUser)||void 0===ne?void 0:ne.uid)||null,!S._deleted&&(S._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,_.Z)(function*(){if(m._deleted)return;const v=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||v){if(m.currentUser&&v&&m.currentUser.uid===v.uid)return m._currentUser._assign(v),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(v,!0)}})()}initializeCurrentUser(m){var v=this;return(0,_.Z)(function*(){var S;const z=yield v.assertedPersistence.getCurrentUser();let ne=z,Oe=!1;if(m&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const Tt=null===(S=v.redirectUser)||void 0===S?void 0:S._redirectEventId,gn=null==ne?void 0:ne._redirectEventId,en=yield v.tryRedirectSignIn(m);(!Tt||Tt===gn)&&(null==en?void 0:en.user)&&(ne=en.user,Oe=!0)}if(!ne)return v.directlySetCurrentUser(null);if(!ne._redirectEventId){if(Oe)try{yield v.beforeStateQueue.runMiddleware(ne)}catch(Tt){ne=z,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(Tt))}return ne?v.reloadAndSetCurrentUserOrClear(ne):v.directlySetCurrentUser(null)}return Rt(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===ne._redirectEventId?v.directlySetCurrentUser(ne):v.reloadAndSetCurrentUserOrClear(ne)})()}tryRedirectSignIn(m){var v=this;return(0,_.Z)(function*(){let S=null;try{S=yield v._popupRedirectResolver._completeRedirectFn(v,m,!0)}catch(z){yield v._setRedirectUser(null)}return S})()}reloadAndSetCurrentUserOrClear(m){var v=this;return(0,_.Z)(function*(){var S;try{yield xt(m)}catch(z){if("auth/network-request-failed"!==(null===(S=z)||void 0===S?void 0:S.code))return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function sn(){if("undefined"==typeof navigator)return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var m=this;return(0,_.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var v=this;return(0,_.Z)(function*(){const S=m?(0,E.m9)(m):null;return S&&Rt(S.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(S&&S._clone(v))})()}_updateCurrentUser(m,v=!1){var S=this;return(0,_.Z)(function*(){if(!S._deleted)return m&&Rt(S.tenantId===m.tenantId,S,"tenant-id-mismatch"),v||(yield S.beforeStateQueue.runMiddleware(m)),S.queue((0,_.Z)(function*(){yield S.directlySetCurrentUser(m),S.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,_.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var v=this;return this.queue((0,_.Z)(function*(){yield v.assertedPersistence.setPersistence(vn(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new E.LL("auth","Firebase",m())}onAuthStateChanged(m,v,S){return this.registerStateListener(this.authStateSubscription,m,v,S)}beforeAuthStateChanged(m,v){return this.beforeStateQueue.pushCallback(m,v)}onIdTokenChanged(m,v,S){return this.registerStateListener(this.idTokenSubscription,m,v,S)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,v){var S=this;return(0,_.Z)(function*(){const z=yield S.getOrInitRedirectPersistenceManager(v);return null===m?z.removeCurrentUser():z.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var v=this;return(0,_.Z)(function*(){if(!v.redirectPersistenceManager){const S=m&&vn(m)||v._popupRedirectResolver;Rt(S,v,"argument-error"),v.redirectPersistenceManager=yield Li.create(v,[vn(S._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(m){var v=this;return(0,_.Z)(function*(){var S,z;return v._isInitialized&&(yield v.queue((0,_.Z)(function*(){}))),(null===(S=v._currentUser)||void 0===S?void 0:S._redirectEventId)===m?v._currentUser:(null===(z=v.redirectUser)||void 0===z?void 0:z._redirectEventId)===m?v.redirectUser:null})()}_persistUserIfCurrent(m){var v=this;return(0,_.Z)(function*(){if(m===v.currentUser)return v.queue((0,_.Z)(function*(){return v.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const S=null!==(v=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==S&&(this.lastNotifiedUid=S,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,v,S,z){if(this._deleted)return()=>{};const ne="function"==typeof v?v:v.next.bind(v),Oe=this._isInitialized?Promise.resolve():this._initializationPromise;return Rt(Oe,this,"internal-error"),Oe.then(()=>ne(this.currentUser)),"function"==typeof v?m.addObserver(v,S,z):m.addObserver(v)}directlySetCurrentUser(m){var v=this;return(0,_.Z)(function*(){v.currentUser&&v.currentUser!==m&&v._currentUser._stopProactiveRefresh(),m&&v.isProactiveRefreshEnabled&&m._startProactiveRefresh(),v.currentUser=m,m?yield v.assertedPersistence.setCurrentUser(m):yield v.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return Rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Zn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,_.Z)(function*(){var v;const S={"X-Client-Version":m.clientVersion};m.app.options.appId&&(S["X-Firebase-gmpid"]=m.app.options.appId);const z=yield null===(v=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();return z&&(S["X-Firebase-Client"]=z),S})()}}function Ir(b){return(0,E.m9)(b)}class Qr{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,E.ne)(v=>this.observer=v)}get next(){return Rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ss(b,m,v){const S=Ir(b);Rt(S._canInitEmulator,S,"emulator-config-failed"),Rt(/^https?:\/\//.test(m),S,"invalid-emulator-scheme");const z=!!(null==v?void 0:v.disableWarnings),ne=js(m),{host:Oe,port:Tt}=function Yi(b){const m=js(b),v=/(\/\/)?([^?#/]+)/.exec(b.substr(m.length));if(!v)return{host:"",port:null};const S=v[2].split("@").pop()||"",z=/^(\[[^\]]+\])(:|$)/.exec(S);if(z){const ne=z[1];return{host:ne,port:Ui(S.substr(ne.length+1))}}{const[ne,Oe]=S.split(":");return{host:ne,port:Ui(Oe)}}}(m);S.config.emulator={url:`${ne}//${Oe}${null===Tt?"":`:${Tt}`}/`},S.settings.appVerificationDisabledForTesting=!0,S.emulatorConfig=Object.freeze({host:Oe,port:Tt,protocol:ne.replace(":",""),options:Object.freeze({disableWarnings:z})}),z||function lo(){function b(){const m=document.createElement("p"),v=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}function js(b){const m=b.indexOf(":");return m<0?"":b.substr(0,m+1)}function Ui(b){if(!b)return null;const m=Number(b);return isNaN(m)?null:m}class Ns{constructor(m,v){this.providerId=m,this.signInMethod=v}toJSON(){return xr("not implemented")}_getIdTokenResponse(m){return xr("not implemented")}_linkToIdToken(m,v){return xr("not implemented")}_getReauthenticationResolver(m){return xr("not implemented")}}function uo(b,m){return wo.apply(this,arguments)}function wo(){return(wo=(0,_.Z)(function*(b,m){return Ar(b,"POST","/v1/accounts:resetPassword",Dn(b,m))})).apply(this,arguments)}function $s(b,m){return Co.apply(this,arguments)}function Co(){return(Co=(0,_.Z)(function*(b,m){return Ar(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function xs(b,m){return es.apply(this,arguments)}function es(){return(es=(0,_.Z)(function*(b,m){return Ar(b,"POST","/v1/accounts:update",Dn(b,m))})).apply(this,arguments)}function ks(){return(ks=(0,_.Z)(function*(b,m){return hr(b,"POST","/v1/accounts:signInWithPassword",Dn(b,m))})).apply(this,arguments)}function No(b,m){return bo.apply(this,arguments)}function bo(){return(bo=(0,_.Z)(function*(b,m){return Ar(b,"POST","/v1/accounts:sendOobCode",Dn(b,m))})).apply(this,arguments)}function Oo(b,m){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,_.Z)(function*(b,m){return No(b,m)})).apply(this,arguments)}function ca(b,m){return zi.apply(this,arguments)}function zi(){return(zi=(0,_.Z)(function*(b,m){return No(b,m)})).apply(this,arguments)}function Ls(b,m){return ps.apply(this,arguments)}function ps(){return(ps=(0,_.Z)(function*(b,m){return No(b,m)})).apply(this,arguments)}function co(b,m){return us.apply(this,arguments)}function us(){return(us=(0,_.Z)(function*(b,m){return No(b,m)})).apply(this,arguments)}function Cs(){return(Cs=(0,_.Z)(function*(b,m){return hr(b,"POST","/v1/accounts:signInWithEmailLink",Dn(b,m))})).apply(this,arguments)}function or(){return(or=(0,_.Z)(function*(b,m){return hr(b,"POST","/v1/accounts:signInWithEmailLink",Dn(b,m))})).apply(this,arguments)}class lr extends Ns{constructor(m,v,S,z=null){super("password",S),this._email=m,this._password=v,this._tenantId=z}static _fromEmailAndPassword(m,v){return new lr(m,v,"password")}static _fromEmailAndCode(m,v,S=null){return new lr(m,v,"emailLink",S)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const v="string"==typeof m?JSON.parse(m):m;if((null==v?void 0:v.email)&&(null==v?void 0:v.password)){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(m){var v=this;return(0,_.Z)(function*(){switch(v.signInMethod){case"password":return function Os(b,m){return ks.apply(this,arguments)}(m,{returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Jr(b,m){return Cs.apply(this,arguments)}(m,{email:v._email,oobCode:v._password});default:Wn(m,"internal-error")}})()}_linkToIdToken(m,v){var S=this;return(0,_.Z)(function*(){switch(S.signInMethod){case"password":return $s(m,{idToken:v,returnSecureToken:!0,email:S._email,password:S._password});case"emailLink":return function fr(b,m){return or.apply(this,arguments)}(m,{idToken:v,email:S._email,oobCode:S._password});default:Wn(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function pi(b,m){return zr.apply(this,arguments)}function zr(){return(zr=(0,_.Z)(function*(b,m){return hr(b,"POST","/v1/accounts:signInWithIdp",Dn(b,m))})).apply(this,arguments)}class Ri extends Ns{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const v=new Ri(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(v.idToken=m.idToken),m.accessToken&&(v.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(v.nonce=m.nonce),m.pendingToken&&(v.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(v.accessToken=m.oauthToken,v.secret=m.oauthTokenSecret):Wn("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const v="string"==typeof m?JSON.parse(m):m,{providerId:S,signInMethod:z}=v,ne=he(v,["providerId","signInMethod"]);if(!S||!z)return null;const Oe=new Ri(S,z);return Oe.idToken=ne.idToken||void 0,Oe.accessToken=ne.accessToken||void 0,Oe.secret=ne.secret,Oe.nonce=ne.nonce,Oe.pendingToken=ne.pendingToken||null,Oe}_getIdTokenResponse(m){return pi(m,this.buildRequest())}_linkToIdToken(m,v){const S=this.buildRequest();return S.idToken=v,pi(m,S)}_getReauthenticationResolver(m){const v=this.buildRequest();return v.autoCreate=!1,pi(m,v)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),m.postBody=(0,E.xO)(v)}return m}}function ko(b,m){return ai.apply(this,arguments)}function ai(){return(ai=(0,_.Z)(function*(b,m){return Ar(b,"POST","/v1/accounts:sendVerificationCode",Dn(b,m))})).apply(this,arguments)}function G(){return(G=(0,_.Z)(function*(b,m){return hr(b,"POST","/v1/accounts:signInWithPhoneNumber",Dn(b,m))})).apply(this,arguments)}function xe(){return(xe=(0,_.Z)(function*(b,m){const v=yield hr(b,"POST","/v1/accounts:signInWithPhoneNumber",Dn(b,m));if(v.temporaryProof)throw dt(b,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const qe={USER_NOT_FOUND:"user-not-found"};function Ft(){return(Ft=(0,_.Z)(function*(b,m){return hr(b,"POST","/v1/accounts:signInWithPhoneNumber",Dn(b,Object.assign(Object.assign({},m),{operation:"REAUTH"})),qe)})).apply(this,arguments)}class fn extends Ns{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,v){return new fn({verificationId:m,verificationCode:v})}static _fromTokenResponse(m,v){return new fn({phoneNumber:m,temporaryProof:v})}_getIdTokenResponse(m){return function X(b,m){return G.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,v){return function pe(b,m){return xe.apply(this,arguments)}(m,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function vt(b,m){return Ft.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:v,verificationId:S,verificationCode:z}=this.params;return m&&v?{temporaryProof:m,phoneNumber:v}:{sessionInfo:S,code:z}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:v,verificationCode:S,phoneNumber:z,temporaryProof:ne}=m;return S||v||z||ne?new fn({verificationId:v,verificationCode:S,phoneNumber:z,temporaryProof:ne}):null}}class F{constructor(m){var v,S,z,ne,Oe,Tt;const gn=(0,E.zd)((0,E.pd)(m)),en=null!==(v=gn.apiKey)&&void 0!==v?v:null,Rn=null!==(S=gn.oobCode)&&void 0!==S?S:null,ci=function Mn(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(z=gn.mode)&&void 0!==z?z:null);Rt(en&&Rn&&ci,"argument-error"),this.apiKey=en,this.operation=ci,this.code=Rn,this.continueUrl=null!==(ne=gn.continueUrl)&&void 0!==ne?ne:null,this.languageCode=null!==(Oe=gn.languageCode)&&void 0!==Oe?Oe:null,this.tenantId=null!==(Tt=gn.tenantId)&&void 0!==Tt?Tt:null}static parseLink(m){const v=function An(b){const m=(0,E.zd)((0,E.pd)(b)).link,v=m?(0,E.zd)((0,E.pd)(m)).deep_link_id:null,S=(0,E.zd)((0,E.pd)(b)).deep_link_id;return(S?(0,E.zd)((0,E.pd)(S)).link:null)||S||v||m||b}(m);try{return new F(v)}catch(S){return null}}}let V=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(v,S){return lr._fromEmailAndPassword(v,S)}static credentialWithLink(v,S){const z=F.parseLink(S);return Rt(z,"argument-error"),lr._fromEmailAndCode(v,z.code,z.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class se{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Ie extends se{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class ht extends Ie{static credentialFromJSON(m){const v="string"==typeof m?JSON.parse(m):m;return Rt("providerId"in v&&"signInMethod"in v,"argument-error"),Ri._fromParams(v)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return Rt(m.idToken||m.accessToken,"argument-error"),Ri._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return ht.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return ht.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:v,oauthAccessToken:S,oauthTokenSecret:z,pendingToken:ne,nonce:Oe,providerId:Tt}=m;if(!S&&!z&&!v&&!ne||!Tt)return null;try{return new ht(Tt)._credential({idToken:v,accessToken:S,nonce:Oe,pendingToken:ne})}catch(gn){return null}}}let Mt=(()=>{class b extends Ie{constructor(){super("facebook.com")}static credential(v){return Ri._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return b.credential(v.oauthAccessToken)}catch(S){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),on=(()=>{class b extends Ie{constructor(){super("google.com"),this.addScope("profile")}static credential(v,S){return Ri._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:S})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:S,oauthAccessToken:z}=v;if(!S&&!z)return null;try{return b.credential(S,z)}catch(ne){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Qn=(()=>{class b extends Ie{constructor(){super("github.com")}static credential(v){return Ri._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return b.credential(v.oauthAccessToken)}catch(S){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class Qt extends Ns{constructor(m,v){super(m,m),this.pendingToken=v}_getIdTokenResponse(m){return pi(m,this.buildRequest())}_linkToIdToken(m,v){const S=this.buildRequest();return S.idToken=v,pi(m,S)}_getReauthenticationResolver(m){const v=this.buildRequest();return v.autoCreate=!1,pi(m,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const v="string"==typeof m?JSON.parse(m):m,{providerId:S,signInMethod:z,pendingToken:ne}=v;return S&&z&&ne&&S===z?new Qt(S,ne):null}static _create(m,v){return new Qt(m,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Pr extends se{constructor(m){Rt(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return Pr.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return Pr.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const v=Qt.fromJSON(m);return Rt(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:v,providerId:S}=m;if(!v||!S)return null;try{return Qt._create(S,v)}catch(z){return null}}}let Hr=(()=>{class b extends Ie{constructor(){super("twitter.com")}static credential(v,S){return Ri._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:S})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:S,oauthTokenSecret:z}=v;if(!S||!z)return null;try{return b.credential(S,z)}catch(ne){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function rn(b,m){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,_.Z)(function*(b,m){return hr(b,"POST","/v1/accounts:signUp",Dn(b,m))})).apply(this,arguments)}class Xr{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,v,S,z=!1){return(0,_.Z)(function*(){const ne=yield ni._fromIdTokenResponse(m,S,z),Oe=li(S);return new Xr({user:ne,providerId:Oe,_tokenResponse:S,operationType:v})})()}static _forOperation(m,v,S){return(0,_.Z)(function*(){yield m._updateTokensIfNecessary(S,!0);const z=li(S);return new Xr({user:m,providerId:z,_tokenResponse:S,operationType:v})})()}}function li(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function Vi(b){return $.apply(this,arguments)}function $(){return($=(0,_.Z)(function*(b){var m;const v=Ir(b);if(yield v._initializationPromise,null===(m=v.currentUser)||void 0===m?void 0:m.isAnonymous)return new Xr({user:v.currentUser,providerId:null,operationType:"signIn"});const S=yield rn(v,{returnSecureToken:!0}),z=yield Xr._fromIdTokenResponse(v,"signIn",S,!0);return yield v._updateCurrentUser(z.user),z})).apply(this,arguments)}class U extends E.ZR{constructor(m,v,S,z){var ne;super(v.code,v.message),this.operationType=S,this.user=z,Object.setPrototypeOf(this,U.prototype),this.customData={appName:m.name,tenantId:null!==(ne=m.tenantId)&&void 0!==ne?ne:void 0,_serverResponse:v.customData._serverResponse,operationType:S}}static _fromErrorAndOperation(m,v,S,z){return new U(m,v,S,z)}}function N(b,m,v,S){return("reauthenticate"===m?v._getReauthenticationResolver(b):v._getIdTokenResponse(b)).catch(ne=>{throw"auth/multi-factor-auth-required"===ne.code?U._fromErrorAndOperation(b,ne,m,S):ne})}function q(b){return new Set(b.map(({providerId:m})=>m).filter(m=>!!m))}function rt(b,m){return In.apply(this,arguments)}function In(){return(In=(0,_.Z)(function*(b,m){const v=(0,E.m9)(b);yield gi(!0,v,m);const{providerUserInfo:S}=yield hn(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[m]}),z=q(S||[]);return v.providerData=v.providerData.filter(ne=>z.has(ne.providerId)),z.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v})).apply(this,arguments)}function sr(b,m){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,_.Z)(function*(b,m,v=!1){const S=yield Ge(b,m._linkToIdToken(b.auth,yield b.getIdToken()),v);return Xr._forOperation(b,"link",S)})).apply(this,arguments)}function gi(b,m,v){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,_.Z)(function*(b,m,v){yield xt(m);const z=!1===b?"provider-already-linked":"no-such-provider";Rt(q(m.providerData).has(v)===b,m.auth,z)})).apply(this,arguments)}function Ms(b,m){return Io.apply(this,arguments)}function Io(){return(Io=(0,_.Z)(function*(b,m,v=!1){var S;const{auth:z}=b,ne="reauthenticate";try{const Oe=yield Ge(b,N(z,ne,m,b),v);Rt(Oe.idToken,z,"internal-error");const Tt=ue(Oe.idToken);Rt(Tt,z,"internal-error");const{sub:gn}=Tt;return Rt(b.uid===gn,z,"user-mismatch"),Xr._forOperation(b,ne,Oe)}catch(Oe){throw"auth/user-not-found"===(null===(S=Oe)||void 0===S?void 0:S.code)&&Wn(z,"user-mismatch"),Oe}})).apply(this,arguments)}function da(b,m){return ii.apply(this,arguments)}function ii(){return(ii=(0,_.Z)(function*(b,m,v=!1){const S="signIn",z=yield N(b,S,m),ne=yield Xr._fromIdTokenResponse(b,S,z);return v||(yield b._updateCurrentUser(ne.user)),ne})).apply(this,arguments)}function Ko(b,m){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,_.Z)(function*(b,m){return da(Ir(b),m)})).apply(this,arguments)}function ts(b,m){return bs.apply(this,arguments)}function bs(){return(bs=(0,_.Z)(function*(b,m){const v=(0,E.m9)(b);return yield gi(!1,v,m.providerId),sr(v,m)})).apply(this,arguments)}function ha(b,m){return cs.apply(this,arguments)}function cs(){return(cs=(0,_.Z)(function*(b,m){return Ms((0,E.m9)(b),m)})).apply(this,arguments)}function Is(b,m){return pr.apply(this,arguments)}function pr(){return(pr=(0,_.Z)(function*(b,m){return hr(b,"POST","/v1/accounts:signInWithCustomToken",Dn(b,m))})).apply(this,arguments)}function yl(b,m){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,_.Z)(function*(b,m){const v=Ir(b),S=yield Is(v,{token:m,returnSecureToken:!0}),z=yield Xr._fromIdTokenResponse(v,"signIn",S);return yield v._updateCurrentUser(z.user),z})).apply(this,arguments)}class fa{constructor(m,v){this.factorId=m,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(m,v){return"phoneInfo"in v?_i._fromServerResponse(m,v):Wn(m,"internal-error")}}class _i extends fa{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,v){return new _i(v)}}function Js(b,m,v){var S;Rt((null===(S=v.url)||void 0===S?void 0:S.length)>0,b,"invalid-continue-uri"),Rt(void 0===v.dynamicLinkDomain||v.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),m.continueUrl=v.url,m.dynamicLinkDomain=v.dynamicLinkDomain,m.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(Rt(v.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),m.iOSBundleId=v.iOS.bundleId),v.android&&(Rt(v.android.packageName.length>0,b,"missing-android-pkg-name"),m.androidInstallApp=v.android.installApp,m.androidMinimumVersionCode=v.android.minimumVersion,m.androidPackageName=v.android.packageName)}function Gl(b,m,v){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,_.Z)(function*(b,m,v){const S=(0,E.m9)(b),z={requestType:"PASSWORD_RESET",email:m};v&&Js(S,z,v),yield ca(S,z)})).apply(this,arguments)}function Xs(b,m,v){return pa.apply(this,arguments)}function pa(){return(pa=(0,_.Z)(function*(b,m,v){yield uo((0,E.m9)(b),{oobCode:m,newPassword:v})})).apply(this,arguments)}function Pa(b,m){return Na.apply(this,arguments)}function Na(){return(Na=(0,_.Z)(function*(b,m){yield xs((0,E.m9)(b),{oobCode:m})})).apply(this,arguments)}function Oa(b,m){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,_.Z)(function*(b,m){const v=(0,E.m9)(b),S=yield uo(v,{oobCode:m}),z=S.requestType;switch(Rt(z,v,"internal-error"),z){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Rt(S.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Rt(S.mfaInfo,v,"internal-error");default:Rt(S.email,v,"internal-error")}let ne=null;return S.mfaInfo&&(ne=fa._fromServerResponse(Ir(v),S.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===S.requestType?S.newEmail:S.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===S.requestType?S.email:S.newEmail)||null,multiFactorInfo:ne},operation:z}})).apply(this,arguments)}function Rs(b,m){return ga.apply(this,arguments)}function ga(){return(ga=(0,_.Z)(function*(b,m){const{data:v}=yield Oa((0,E.m9)(b),m);return v.email})).apply(this,arguments)}function ka(b,m,v){return ho.apply(this,arguments)}function ho(){return(ho=(0,_.Z)(function*(b,m,v){const S=Ir(b),z=yield rn(S,{returnSecureToken:!0,email:m,password:v}),ne=yield Xr._fromIdTokenResponse(S,"signIn",z);return yield S._updateCurrentUser(ne.user),ne})).apply(this,arguments)}function ns(b,m,v){return Ko((0,E.m9)(b),V.credential(m,v))}function fo(b,m,v){return yi.apply(this,arguments)}function yi(){return(yi=(0,_.Z)(function*(b,m,v){const S=(0,E.m9)(b),z={requestType:"EMAIL_SIGNIN",email:m};Rt(v.handleCodeInApp,S,"argument-error"),v&&Js(S,z,v),yield Ls(S,z)})).apply(this,arguments)}function Fa(b,m){const v=F.parseLink(m);return"EMAIL_SIGNIN"===(null==v?void 0:v.operation)}function Ec(b,m,v){return La.apply(this,arguments)}function La(){return(La=(0,_.Z)(function*(b,m,v){const S=(0,E.m9)(b),z=V.credentialWithLink(m,v||Gr());return Rt(z._tenantId===(S.tenantId||null),S,"tenant-id-mismatch"),Ko(S,z)})).apply(this,arguments)}function wc(b,m){return ma.apply(this,arguments)}function ma(){return(ma=(0,_.Z)(function*(b,m){return Ar(b,"POST","/v1/accounts:createAuthUri",Dn(b,m))})).apply(this,arguments)}function id(b,m){return _a.apply(this,arguments)}function _a(){return(_a=(0,_.Z)(function*(b,m){const S={identifier:m,continueUri:jr()?Gr():"http://localhost"},{signinMethods:z}=yield wc((0,E.m9)(b),S);return z||[]})).apply(this,arguments)}function Bi(b,m){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,_.Z)(function*(b,m){const v=(0,E.m9)(b),z={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};m&&Js(v.auth,z,m);const{email:ne}=yield Oo(v.auth,z);ne!==b.email&&(yield b.reload())})).apply(this,arguments)}function Vo(b,m,v){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,_.Z)(function*(b,m,v){const S=(0,E.m9)(b),ne={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:m};v&&Js(S.auth,ne,v);const{email:Oe}=yield co(S.auth,ne);Oe!==b.email&&(yield b.reload())})).apply(this,arguments)}function Us(b,m){return $t.apply(this,arguments)}function $t(){return($t=(0,_.Z)(function*(b,m){return Ar(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function gr(b,m){return eo.apply(this,arguments)}function eo(){return(eo=(0,_.Z)(function*(b,{displayName:m,photoURL:v}){if(void 0===m&&void 0===v)return;const S=(0,E.m9)(b),ne={idToken:yield S.getIdToken(),displayName:m,photoUrl:v,returnSecureToken:!0},Oe=yield Ge(S,Us(S.auth,ne));S.displayName=Oe.displayName||null,S.photoURL=Oe.photoUrl||null;const Tt=S.providerData.find(({providerId:gn})=>"password"===gn);Tt&&(Tt.displayName=S.displayName,Tt.photoURL=S.photoURL),yield S._updateTokensIfNecessary(Oe)})).apply(this,arguments)}function Jo(b,m){return er((0,E.m9)(b),m,null)}function pn(b,m){return er((0,E.m9)(b),null,m)}function er(b,m,v){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,_.Z)(function*(b,m,v){const{auth:S}=b,ne={idToken:yield b.getIdToken(),returnSecureToken:!0};m&&(ne.email=m),v&&(ne.password=v);const Oe=yield Ge(b,$s(S,ne));yield b._updateTokensIfNecessary(Oe,!0)})).apply(this,arguments)}class mt{constructor(m,v,S={}){this.isNewUser=m,this.providerId=v,this.profile=S}}class Gt extends mt{constructor(m,v,S,z){super(m,v,S),this.username=z}}class Gi extends mt{constructor(m,v){super(m,"facebook.com",v)}}class vl extends Gt{constructor(m,v){super(m,"github.com",v,"string"==typeof(null==v?void 0:v.login)?null==v?void 0:v.login:null)}}class ju extends mt{constructor(m,v){super(m,"google.com",v)}}class si extends Gt{constructor(m,v,S){super(m,"twitter.com",v,S)}}function El(b){const{user:m,_tokenResponse:v}=b;return m.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function mn(b){var m,v;if(!b)return null;const{providerId:S}=b,z=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},ne=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!S&&(null==b?void 0:b.idToken)){const Oe=null===(v=null===(m=ue(b.idToken))||void 0===m?void 0:m.firebase)||void 0===v?void 0:v.sign_in_provider;if(Oe)return new mt(ne,"anonymous"!==Oe&&"custom"!==Oe?Oe:null)}if(!S)return null;switch(S){case"facebook.com":return new Gi(ne,z);case"github.com":return new vl(ne,z);case"google.com":return new ju(ne,z);case"twitter.com":return new si(ne,z,b.screenName||null);case"custom":case"anonymous":return new mt(ne,null);default:return new mt(ne,S,z)}}(v)}class Gs{constructor(m,v,S){this.type=m,this.credential=v,this.auth=S}static _fromIdtoken(m,v){return new Gs("enroll",m,v)}static _fromMfaPendingCredential(m){return new Gs("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var v,S;if(null==m?void 0:m.multiFactorSession){if(null===(v=m.multiFactorSession)||void 0===v?void 0:v.pendingCredential)return Gs._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null===(S=m.multiFactorSession)||void 0===S?void 0:S.idToken)return Gs._fromIdtoken(m.multiFactorSession.idToken)}return null}}class vi{constructor(m,v,S){this.session=m,this.hints=v,this.signInResolver=S}static _fromError(m,v){const S=Ir(m),z=v.customData._serverResponse,ne=(z.mfaInfo||[]).map(Tt=>fa._fromServerResponse(S,Tt));Rt(z.mfaPendingCredential,S,"internal-error");const Oe=Gs._fromMfaPendingCredential(z.mfaPendingCredential);return new vi(Oe,ne,function(){var Tt=(0,_.Z)(function*(gn){const en=yield gn._process(S,Oe);delete z.mfaInfo,delete z.mfaPendingCredential;const Rn=Object.assign(Object.assign({},z),{idToken:en.idToken,refreshToken:en.refreshToken});switch(v.operationType){case"signIn":const ci=yield Xr._fromIdTokenResponse(S,v.operationType,Rn);return yield S._updateCurrentUser(ci.user),ci;case"reauthenticate":return Rt(v.user,S,"internal-error"),Xr._forOperation(v.user,v.operationType,Rn);default:Wn(S,"internal-error")}});return function(gn){return Tt.apply(this,arguments)}}())}resolveSignIn(m){var v=this;return(0,_.Z)(function*(){return v.signInResolver(m)})()}}function nr(b,m){var v;const S=(0,E.m9)(b),z=m;return Rt(m.customData.operationType,S,"argument-error"),Rt(null===(v=z.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,S,"argument-error"),vi._fromError(S,z)}function $o(b,m){return Ar(b,"POST","/v2/accounts/mfaEnrollment:start",Dn(b,m))}class hi{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(S=>fa._fromServerResponse(m.auth,S)))})}static _fromUser(m){return new hi(m)}getSession(){var m=this;return(0,_.Z)(function*(){return Gs._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,v){var S=this;return(0,_.Z)(function*(){const z=m,ne=yield S.getSession(),Oe=yield Ge(S.user,z._process(S.user.auth,ne,v));return yield S.user._updateTokensIfNecessary(Oe),S.user.reload()})()}unenroll(m){var v=this;return(0,_.Z)(function*(){var S;const z="string"==typeof m?m:m.uid,ne=yield v.user.getIdToken(),Oe=yield Ge(v.user,function wl(b,m){return Ar(b,"POST","/v2/accounts/mfaEnrollment:withdraw",Dn(b,m))}(v.user.auth,{idToken:ne,mfaEnrollmentId:z}));v.enrolledFactors=v.enrolledFactors.filter(({uid:Tt})=>Tt!==z),yield v.user._updateTokensIfNecessary(Oe);try{yield v.user.reload()}catch(Tt){if("auth/user-token-expired"!==(null===(S=Tt)||void 0===S?void 0:S.code))throw Tt}})()}}const x=new WeakMap;function A(b){const m=(0,E.m9)(b);return x.has(m)||x.set(m,hi._fromUser(m)),x.get(m)}const T="__sak";class k{constructor(m,v){this.storageRetriever=m,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(T,"1"),this.storage.removeItem(T),Promise.resolve(!0)):Promise.resolve(!1)}catch(m){return Promise.resolve(!1)}}_set(m,v){return this.storage.setItem(m,JSON.stringify(v)),Promise.resolve()}_get(m){const v=this.storage.getItem(m);return Promise.resolve(v?JSON.parse(v):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Et=(()=>{class b extends k{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,S)=>this.onStorageEvent(v,S),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function W(){const b=(0,E.z$)();return Xi(b)||ze(b)}()&&function ln(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=Wt(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const S of Object.keys(this.listeners)){const z=this.storage.getItem(S),ne=this.localCache[S];z!==ne&&v(S,ne,z)}}onStorageEvent(v,S=!1){if(!v.key)return void this.forAllChangedKeys((Tt,gn,en)=>{this.notifyListeners(Tt,en)});const z=v.key;if(S?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Tt=this.storage.getItem(z);if(v.newValue!==Tt)null!==v.newValue?this.storage.setItem(z,v.newValue):this.storage.removeItem(z);else if(this.localCache[z]===v.newValue&&!S)return}const ne=()=>{const Tt=this.storage.getItem(z);!S&&this.localCache[z]===Tt||this.notifyListeners(z,Tt)},Oe=this.storage.getItem(z);!function It(){return(0,E.w1)()&&10===document.documentMode}()||Oe===v.newValue||v.newValue===v.oldValue?ne():setTimeout(ne,10)}notifyListeners(v,S){this.localCache[v]=S;const z=this.listeners[v];if(z)for(const ne of Array.from(z))ne(S&&JSON.parse(S))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,S,z)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:S,newValue:z}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,S){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(S)}_removeListener(v,S){this.listeners[v]&&(this.listeners[v].delete(S),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,S){var z=()=>super._set,ne=this;return(0,_.Z)(function*(){yield z().call(ne,v,S),ne.localCache[v]=JSON.stringify(S)})()}_get(v){var S=()=>super._get,z=this;return(0,_.Z)(function*(){const ne=yield S().call(z,v);return z.localCache[v]=JSON.stringify(ne),ne})()}_remove(v){var S=()=>super._remove,z=this;return(0,_.Z)(function*(){yield S().call(z,v),delete z.localCache[v]})()}}return b.type="LOCAL",b})(),rr=(()=>{class b extends k{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,S){}_removeListener(v,S){}}return b.type="SESSION",b})();let Vr=(()=>{class b{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const S=this.receivers.find(ne=>ne.isListeningto(v));if(S)return S;const z=new b(v);return this.receivers.push(z),z}isListeningto(v){return this.eventTarget===v}handleEvent(v){var S=this;return(0,_.Z)(function*(){const z=v,{eventId:ne,eventType:Oe,data:Tt}=z.data,gn=S.handlersMap[Oe];if(!(null==gn?void 0:gn.size))return;z.ports[0].postMessage({status:"ack",eventId:ne,eventType:Oe});const en=Array.from(gn).map(function(){var ci=(0,_.Z)(function*(Oi){return Oi(z.origin,Tt)});return function(Oi){return ci.apply(this,arguments)}}()),Rn=yield function Fn(b){return Promise.all(b.map(function(){var m=(0,_.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(S){return{fulfilled:!1,reason:S}}});return function(v){return m.apply(this,arguments)}}()))}(en);z.ports[0].postMessage({status:"done",eventId:ne,eventType:Oe,response:Rn})})()}_subscribe(v,S){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(S)}_unsubscribe(v,S){this.handlersMap[v]&&S&&this.handlersMap[v].delete(S),(!S||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function Br(b="",m=10){let v="";for(let S=0;S<m;S++)v+=Math.floor(10*Math.random());return b+v}class Ts{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,v,S=50){var z=this;return(0,_.Z)(function*(){const ne="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!ne)throw new Error("connection_unavailable");let Oe,Tt;return new Promise((gn,en)=>{const Rn=Br("",20);ne.port1.start();const ci=setTimeout(()=>{en(new Error("unsupported_event"))},S);Tt={messageChannel:ne,onMessage(Oi){const ss=Oi;if(ss.data.eventId===Rn)switch(ss.data.status){case"ack":clearTimeout(ci),Oe=setTimeout(()=>{en(new Error("timeout"))},3e3);break;case"done":clearTimeout(Oe),gn(ss.data.response);break;default:clearTimeout(ci),clearTimeout(Oe),en(new Error("invalid_response"))}}},z.handlers.add(Tt),ne.port1.addEventListener("message",Tt.onMessage),z.target.postMessage({eventType:m,eventId:Rn,data:v},[ne.port2])}).finally(()=>{Tt&&z.removeMessageHandler(Tt)})})()}}function ei(){return window}function ds(){return void 0!==ei().WorkerGlobalScope&&"function"==typeof ei().importScripts}function Vs(){return(Vs=(0,_.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const Ba="firebaseLocalStorageDb",ji="firebaseLocalStorage",$u="fbase_key";class Hu{constructor(m){this.request=m}toPromise(){return new Promise((m,v)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function sd(b,m){return b.transaction([ji],m?"readwrite":"readonly").objectStore(ji)}function Cc(){const b=indexedDB.open(Ba,1);return new Promise((m,v)=>{b.addEventListener("error",()=>{v(b.error)}),b.addEventListener("upgradeneeded",()=>{const S=b.result;try{S.createObjectStore(ji,{keyPath:$u})}catch(z){v(z)}}),b.addEventListener("success",(0,_.Z)(function*(){const S=b.result;S.objectStoreNames.contains(ji)?m(S):(S.close(),yield function To(){const b=indexedDB.deleteDatabase(Ba);return new Hu(b).toPromise()}(),m(yield Cc()))}))})}function ja(b,m,v){return _u.apply(this,arguments)}function _u(){return(_u=(0,_.Z)(function*(b,m,v){const S=sd(b,!0).put({[$u]:m,value:v});return new Hu(S).toPromise()})).apply(this,arguments)}function yu(){return(yu=(0,_.Z)(function*(b,m){const v=sd(b,!1).get(m),S=yield new Hu(v).toPromise();return void 0===S?null:S.value})).apply(this,arguments)}function Yr(b,m){const v=sd(b,!0).delete(m);return new Hu(v).toPromise()}const qs=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,_.Z)(function*(){return v.db||(v.db=yield Cc()),v.db})()}_withRetries(v){var S=this;return(0,_.Z)(function*(){let z=0;for(;;)try{const ne=yield S._openDb();return yield v(ne)}catch(ne){if(z++>3)throw ne;S.db&&(S.db.close(),S.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,_.Z)(function*(){return ds()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,_.Z)(function*(){v.receiver=Vr._getInstance(function zs(){return ds()?self:null}()),v.receiver._subscribe("keyChanged",function(){var S=(0,_.Z)(function*(z,ne){return{keyProcessed:(yield v._poll()).includes(ne.key)}});return function(z,ne){return S.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var S=(0,_.Z)(function*(z,ne){return["keyChanged"]});return function(z,ne){return S.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,_.Z)(function*(){var S,z;if(v.activeServiceWorker=yield function rs(){return Vs.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new Ts(v.activeServiceWorker);const ne=yield v.sender._send("ping",{},800);!ne||(null===(S=ne[0])||void 0===S?void 0:S.fulfilled)&&(null===(z=ne[0])||void 0===z?void 0:z.value.includes("keyChanged"))&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var S=this;return(0,_.Z)(function*(){if(S.sender&&S.activeServiceWorker&&function to(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===S.activeServiceWorker)try{yield S.sender._send("keyChanged",{key:v},S.serviceWorkerReceiverAvailable?800:50)}catch(z){}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const v=yield Cc();return yield ja(v,T,"1"),yield Yr(v,T),!0}catch(v){}return!1})()}_withPendingWrite(v){var S=this;return(0,_.Z)(function*(){S.pendingWrites++;try{yield v()}finally{S.pendingWrites--}})()}_set(v,S){var z=this;return(0,_.Z)(function*(){return z._withPendingWrite((0,_.Z)(function*(){return yield z._withRetries(ne=>ja(ne,v,S)),z.localCache[v]=S,z.notifyServiceWorker(v)}))})()}_get(v){var S=this;return(0,_.Z)(function*(){const z=yield S._withRetries(ne=>function Ni(b,m){return yu.apply(this,arguments)}(ne,v));return S.localCache[v]=z,z})()}_remove(v){var S=this;return(0,_.Z)(function*(){return S._withPendingWrite((0,_.Z)(function*(){return yield S._withRetries(z=>Yr(z,v)),delete S.localCache[v],S.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,_.Z)(function*(){const S=yield v._withRetries(Oe=>{const Tt=sd(Oe,!1).getAll();return new Hu(Tt).toPromise()});if(!S)return[];if(0!==v.pendingWrites)return[];const z=[],ne=new Set;for(const{fbase_key:Oe,value:Tt}of S)ne.add(Oe),JSON.stringify(v.localCache[Oe])!==JSON.stringify(Tt)&&(v.notifyListeners(Oe,Tt),z.push(Oe));for(const Oe of Object.keys(v.localCache))v.localCache[Oe]&&!ne.has(Oe)&&(v.notifyListeners(Oe,null),z.push(Oe));return z})()}notifyListeners(v,S){this.localCache[v]=S;const z=this.listeners[v];if(z)for(const ne of Array.from(z))ne(S)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,S){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(S)}_removeListener(v,S){this.listeners[v]&&(this.listeners[v].delete(S),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function Do(b,m){return Ar(b,"POST","/v2/accounts/mfaSignIn:start",Dn(b,m))}function no(){return(no=(0,_.Z)(function*(b){return(yield Ar(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function $a(b){return new Promise((m,v)=>{const S=document.createElement("script");S.setAttribute("src",b),S.onload=m,S.onerror=z=>{const ne=jn("internal-error");ne.customData=z,v(ne)},S.type="text/javascript",S.charset="UTF-8",function $i(){var b,m;return null!==(m=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==m?m:document}().appendChild(S)})}function Gu(b){return`__${b}${Math.floor(1e6*Math.random())}`}const Cl=1e12;class ea{constructor(m){this.auth=m,this.counter=Cl,this._widgets=new Map}render(m,v){const S=this.counter;return this._widgets.set(S,new gs(m,this.auth.name,v||{})),this.counter++,S}reset(m){var v;const S=m||Cl;null===(v=this._widgets.get(S))||void 0===v||v.delete(),this._widgets.delete(S)}getResponse(m){var v;return(null===(v=this._widgets.get(m||Cl))||void 0===v?void 0:v.getResponse())||""}execute(m){var v=this;return(0,_.Z)(function*(){var S;return null===(S=v._widgets.get(m||Cl))||void 0===S||S.execute(),""})()}}class gs{constructor(m,v,S){this.params=S,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const z="string"==typeof m?document.getElementById(m):m;Rt(z,"argument-error",{appName:v}),this.container=z,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function rl(b){const m=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let S=0;S<b;S++)m.push(v.charAt(Math.floor(Math.random()*v.length)));return m.join("")}(50);const{callback:m,"expired-callback":v}=this.params;if(m)try{m(this.responseToken)}catch(S){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch(S){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const wa=Gu("rcb"),ta=new Vn(3e4,6e4);class Ha{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(m=ei().grecaptcha)||void 0===m?void 0:m.render)}load(m,v=""){return Rt(function Ho(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(v),m,"argument-error"),this.shouldResolveImmediately(v)?Promise.resolve(ei().grecaptcha):new Promise((S,z)=>{const ne=ei().setTimeout(()=>{z(jn(m,"network-request-failed"))},ta.get());ei()[wa]=()=>{ei().clearTimeout(ne),delete ei()[wa];const Tt=ei().grecaptcha;if(!Tt)return void z(jn(m,"internal-error"));const gn=Tt.render;Tt.render=(en,Rn)=>{const ci=gn(en,Rn);return this.counter++,ci},this.hostLanguage=v,S(Tt)},$a(`https://www.google.com/recaptcha/api.js??${(0,E.xO)({onload:wa,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(ne),z(jn(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var v;return!!(null===(v=ei().grecaptcha)||void 0===v?void 0:v.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Il{load(m){return(0,_.Z)(function*(){return new ea(m)})()}clearedOneInstance(){}}const na="recaptcha",zu={theme:"light",type:"image"};class zl{constructor(m,v=Object.assign({},zu),S){this.parameters=v,this.type=na,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ir(S),this.isInvisible="invisible"===this.parameters.size,Rt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const z="string"==typeof m?document.getElementById(m):m;Rt(z,this.auth,"argument-error"),this.container=z,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Il:new Ha,this.validateStartingState()}verify(){var m=this;return(0,_.Z)(function*(){m.assertNotDestroyed();const v=yield m.render(),S=m.getAssertedRecaptcha();return S.getResponse(v)||new Promise(ne=>{const Oe=Tt=>{!Tt||(m.tokenChangeListeners.delete(Oe),ne(Tt))};m.tokenChangeListeners.add(Oe),m.isInvisible&&S.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){Rt(!this.parameters.sitekey,this.auth,"argument-error"),Rt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Rt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return v=>{if(this.tokenChangeListeners.forEach(S=>S(v)),"function"==typeof m)m(v);else if("string"==typeof m){const S=ei()[m];"function"==typeof S&&S(v)}}}assertNotDestroyed(){Rt(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,_.Z)(function*(){if(yield m.init(),!m.widgetId){let v=m.container;if(!m.isInvisible){const S=document.createElement("div");v.appendChild(S),v=S}m.widgetId=m.getAssertedRecaptcha().render(v,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,_.Z)(function*(){Rt(jr()&&!ds(),m.auth,"internal-error"),yield function Eu(){let b=null;return new Promise(m=>{"complete"!==document.readyState?(b=()=>m(),window.addEventListener("load",b)):m()}).catch(m=>{throw b&&window.removeEventListener("load",b),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const v=yield function bc(b){return no.apply(this,arguments)}(m.auth);Rt(v,m.auth,"internal-error"),m.parameters.sitekey=v})()}getAssertedRecaptcha(){return Rt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ra{constructor(m,v){this.verificationId=m,this.onConfirmation=v}confirm(m){const v=fn._fromVerification(this.verificationId,m);return this.onConfirmation(v)}}function Ic(b,m,v){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,_.Z)(function*(b,m,v){const S=Ir(b),z=yield ia(S,m,(0,E.m9)(v));return new ra(z,ne=>Ko(S,ne))})).apply(this,arguments)}function Wa(b,m,v){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,_.Z)(function*(b,m,v){const S=(0,E.m9)(b);yield gi(!1,S,"phone");const z=yield ia(S.auth,m,(0,E.m9)(v));return new ra(z,ne=>ts(S,ne))})).apply(this,arguments)}function Tl(b,m,v){return il.apply(this,arguments)}function il(){return(il=(0,_.Z)(function*(b,m,v){const S=(0,E.m9)(b),z=yield ia(S.auth,m,(0,E.m9)(v));return new ra(z,ne=>ha(S,ne))})).apply(this,arguments)}function ia(b,m,v){return qu.apply(this,arguments)}function qu(){return(qu=(0,_.Z)(function*(b,m,v){var S;const z=yield v.verify();try{let ne;if(Rt("string"==typeof z,b,"argument-error"),Rt(v.type===na,b,"argument-error"),ne="string"==typeof m?{phoneNumber:m}:m,"session"in ne){const Oe=ne.session;if("phoneNumber"in ne)return Rt("enroll"===Oe.type,b,"internal-error"),(yield $o(b,{idToken:Oe.credential,phoneEnrollmentInfo:{phoneNumber:ne.phoneNumber,recaptchaToken:z}})).phoneSessionInfo.sessionInfo;{Rt("signin"===Oe.type,b,"internal-error");const Tt=(null===(S=ne.multiFactorHint)||void 0===S?void 0:S.uid)||ne.multiFactorUid;return Rt(Tt,b,"missing-multi-factor-info"),(yield Do(b,{mfaPendingCredential:Oe.credential,mfaEnrollmentId:Tt,phoneSignInInfo:{recaptchaToken:z}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Oe}=yield ko(b,{phoneNumber:ne.phoneNumber,recaptchaToken:z});return Oe}}finally{v._reset()}})).apply(this,arguments)}function Dl(b,m){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,_.Z)(function*(b,m){yield sr((0,E.m9)(b),m)})).apply(this,arguments)}let Tc=(()=>{class b{constructor(v){this.providerId=b.PROVIDER_ID,this.auth=Ir(v)}verifyPhoneNumber(v,S){return ia(this.auth,v,(0,E.m9)(S))}static credential(v,S){return fn._fromVerification(v,S)}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:S,temporaryProof:z}=v;return S&&z?fn._fromTokenResponse(S,z):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function qi(b,m){return m?vn(m):(Rt(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class ms extends Ns{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return pi(m,this._buildIdpRequest())}_linkToIdToken(m,v){return pi(m,this._buildIdpRequest(v))}_getReauthenticationResolver(m){return pi(m,this._buildIdpRequest())}_buildIdpRequest(m){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(v.idToken=m),v}}function Ai(b){return da(b.auth,new ms(b),b.bypassAuthState)}function Al(b){const{auth:m,user:v}=b;return Rt(v,m,"internal-error"),Ms(v,new ms(b),b.bypassAuthState)}function O(b){return B.apply(this,arguments)}function B(){return(B=(0,_.Z)(function*(b){const{auth:m,user:v}=b;return Rt(v,m,"internal-error"),sr(v,new ms(b),b.bypassAuthState)})).apply(this,arguments)}class re{constructor(m,v,S,z,ne=!1){this.auth=m,this.resolver=S,this.user=z,this.bypassAuthState=ne,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var m=this;return new Promise(function(){var v=(0,_.Z)(function*(S,z){m.pendingPromise={resolve:S,reject:z};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(ne){m.reject(ne)}});return function(S,z){return v.apply(this,arguments)}}())}onAuthEvent(m){var v=this;return(0,_.Z)(function*(){const{urlResponse:S,sessionId:z,postBody:ne,tenantId:Oe,error:Tt,type:gn}=m;if(Tt)return void v.reject(Tt);const en={auth:v.auth,requestUri:S,sessionId:z,tenantId:Oe||void 0,postBody:ne||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(gn)(en))}catch(Rn){v.reject(Rn)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Ai;case"linkViaPopup":case"linkViaRedirect":return O;case"reauthViaPopup":case"reauthViaRedirect":return Al;default:Wn(this.auth,"internal-error")}}resolve(m){tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ve=new Vn(2e3,1e4);function Ze(b,m,v){return pt.apply(this,arguments)}function pt(){return(pt=(0,_.Z)(function*(b,m,v){const S=Ir(b);Ur(b,m,se);const z=qi(S,v);return new Lr(S,"signInViaPopup",m,z).executeNotNull()})).apply(this,arguments)}function Ut(b,m,v){return _n.apply(this,arguments)}function _n(){return(_n=(0,_.Z)(function*(b,m,v){const S=(0,E.m9)(b);Ur(S.auth,m,se);const z=qi(S.auth,v);return new Lr(S.auth,"reauthViaPopup",m,z,S).executeNotNull()})).apply(this,arguments)}function Sn(b,m,v){return wr.apply(this,arguments)}function wr(){return(wr=(0,_.Z)(function*(b,m,v){const S=(0,E.m9)(b);Ur(S.auth,m,se);const z=qi(S.auth,v);return new Lr(S.auth,"linkViaPopup",m,z,S).executeNotNull()})).apply(this,arguments)}let Lr=(()=>{class b extends re{constructor(v,S,z,ne,Oe){super(v,S,ne,Oe),this.provider=z,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var v=this;return(0,_.Z)(function*(){const S=yield v.execute();return Rt(S,v.auth,"internal-error"),S})()}onExecution(){var v=this;return(0,_.Z)(function*(){tn(1===v.filter.length,"Popup operations only handle one event");const S=Br();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],S),v.authWindow.associatedEvent=S,v.resolver._originValidation(v.auth).catch(z=>{v.reject(z)}),v.resolver._isIframeWebStorageSupported(v.auth,z=>{z||v.reject(jn(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const v=()=>{var S,z;this.pollId=(null===(z=null===(S=this.authWindow)||void 0===S?void 0:S.window)||void 0===z?void 0:z.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(jn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(v,ve.get())};v()}}return b.currentPopupAction=null,b})();const Si=new Map;class po extends re{constructor(m,v,S=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,S),this.eventId=null}execute(){var m=()=>super.execute,v=this;return(0,_.Z)(function*(){let S=Si.get(v.auth._key());if(!S){try{const ne=(yield function Zu(b,m){return Sl.apply(this,arguments)}(v.resolver,v.auth))?yield m().call(v):null;S=()=>Promise.resolve(ne)}catch(z){S=()=>Promise.reject(z)}Si.set(v.auth._key(),S)}return v.bypassAuthState||Si.set(v.auth._key(),()=>Promise.resolve(null)),S()})()}onAuthEvent(m){var v=()=>super.onAuthEvent,S=this;return(0,_.Z)(function*(){if("signInViaRedirect"===m.type)return v().call(S,m);if("unknown"!==m.type){if(m.eventId){const z=yield S.auth._redirectUserForId(m.eventId);if(z)return S.user=z,v().call(S,m);S.resolve(null)}}else S.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function Sl(){return(Sl=(0,_.Z)(function*(b,m){const v=ol(m),S=Ao(b);if(!(yield S._isAvailable()))return!1;const z="true"===(yield S._get(v));return yield S._remove(v),z})).apply(this,arguments)}function Zs(b,m){return ro.apply(this,arguments)}function ro(){return(ro=(0,_.Z)(function*(b,m){return Ao(b)._set(ol(m),"true")})).apply(this,arguments)}function sl(){Si.clear()}function xl(b,m){Si.set(b._key(),m)}function Ao(b){return vn(b._redirectPersistence)}function ol(b){return Bn("pendingRedirect",b.config.apiKey,b.name)}function go(b,m,v){return function Gd(b,m,v){return Ml.apply(this,arguments)}(b,m,v)}function Ml(){return(Ml=(0,_.Z)(function*(b,m,v){const S=Ir(b);Ur(b,m,se);const z=qi(S,v);return yield Zs(z,S),z._openRedirect(S,m,"signInViaRedirect")})).apply(this,arguments)}function zd(b,m,v){return function al(b,m,v){return ll.apply(this,arguments)}(b,m,v)}function ll(){return(ll=(0,_.Z)(function*(b,m,v){const S=(0,E.m9)(b);Ur(S.auth,m,se);const z=qi(S.auth,v);yield Zs(z,S.auth);const ne=yield Dc(S);return z._openRedirect(S.auth,m,"reauthViaRedirect",ne)})).apply(this,arguments)}function ul(b,m,v){return function ql(b,m,v){return Bs.apply(this,arguments)}(b,m,v)}function Bs(){return(Bs=(0,_.Z)(function*(b,m,v){const S=(0,E.m9)(b);Ur(S.auth,m,se);const z=qi(S.auth,v);yield gi(!1,S,m.providerId),yield Zs(z,S.auth);const ne=yield Dc(S);return z._openRedirect(S.auth,m,"linkViaRedirect",ne)})).apply(this,arguments)}function qd(b,m){return Go.apply(this,arguments)}function Go(){return(Go=(0,_.Z)(function*(b,m){return yield Ir(b)._initializationPromise,Ku(b,m,!1)})).apply(this,arguments)}function Ku(b,m){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,_.Z)(function*(b,m,v=!1){const S=Ir(b),z=qi(S,m),Oe=yield new po(S,z,v).execute();return Oe&&!v&&(delete Oe.user._redirectEventId,yield S._persistUserIfCurrent(Oe.user),yield S._setRedirectUser(null,m)),Oe})).apply(this,arguments)}function Dc(b){return wu.apply(this,arguments)}function wu(){return(wu=(0,_.Z)(function*(b){const m=Br(`${b.uid}:::`);return b._redirectEventId=m,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),m})).apply(this,arguments)}class qh{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let v=!1;return this.consumers.forEach(S=>{this.isEventForConsumer(m,S)&&(v=!0,this.sendToConsumer(m,S),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Zh(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zd(b);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=m,v=!0)),v}sendToConsumer(m,v){var S;if(m.error&&!Zd(m)){const z=(null===(S=m.error.code)||void 0===S?void 0:S.split("auth/")[1])||"internal-error";v.onError(jn(this.auth,z))}else v.onAuthEvent(m)}isEventForConsumer(m,v){const S=null===v.eventId||!!m.eventId&&m.eventId===v.eventId;return v.filter.includes(m.type)&&S}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(od(m))}saveEventToCache(m){this.cachedEventUids.add(od(m)),this.lastProcessedEventTime=Date.now()}}function od(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(m=>m).join("-")}function Zd({type:b,error:m}){return"unknown"===b&&"auth/no-auth-event"===(null==m?void 0:m.code)}function Qu(b){return sa.apply(this,arguments)}function sa(){return(sa=(0,_.Z)(function*(b,m={}){return Ar(b,"GET","/v1/projects",m)})).apply(this,arguments)}const Zl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ac=/^https?/;function So(){return(So=(0,_.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:m}=yield Qu(b);for(const v of m)try{if(ad(v))return}catch(S){}Wn(b,"unauthorized-domain")})).apply(this,arguments)}function ad(b){const m=Gr(),{protocol:v,hostname:S}=new URL(m);if(b.startsWith("chrome-extension://")){const Oe=new URL(b);return""===Oe.hostname&&""===S?"chrome-extension:"===v&&b.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===v&&Oe.hostname===S}if(!Ac.test(v))return!1;if(Zl.test(b))return S===b;const z=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+z+"|"+z+")$","i").test(S)}const Kl=new Vn(3e4,6e4);function Kd(){const b=ei().___jsl;if(null==b?void 0:b.H)for(const m of Object.keys(b.H))if(b.H[m].r=b.H[m].r||[],b.H[m].L=b.H[m].L||[],b.H[m].r=[...b.H[m].L],b.CP)for(let v=0;v<b.CP.length;v++)b.CP[v]=null}let Ju=null;function Kh(b){return Ju=Ju||function dl(b){return new Promise((m,v)=>{var S,z,ne;function Oe(){Kd(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{Kd(),v(jn(b,"network-request-failed"))},timeout:Kl.get()})}if(null===(z=null===(S=ei().gapi)||void 0===S?void 0:S.iframes)||void 0===z?void 0:z.Iframe)m(gapi.iframes.getContext());else{if(!(null===(ne=ei().gapi)||void 0===ne?void 0:ne.load)){const Tt=Gu("iframefcb");return ei()[Tt]=()=>{gapi.load?Oe():v(jn(b,"network-request-failed"))},$a(`https://apis.google.com/js/api.js?onload=${Tt}`).catch(gn=>v(gn))}Oe()}}).catch(m=>{throw Ju=null,m})}(b),Ju}const Pl=new Vn(5e3,15e3),is={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cu(b){const m=b.config;Rt(m.authDomain,b,"auth-domain-config-required");const v=m.emulator?un(m,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,S={apiKey:m.apiKey,appName:b.name,v:J.SDK_VERSION},z=Yl.get(b.config.apiHost);z&&(S.eid=z);const ne=b._getFrameworks();return ne.length&&(S.fw=ne.join(",")),`${v}?${(0,E.xO)(S).slice(1)}`}function Ql(){return Ql=(0,_.Z)(function*(b){const m=yield Kh(b),v=ei().gapi;return Rt(v,b,"internal-error"),m.open({where:document.body,url:Cu(b),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:is,dontclear:!0},S=>new Promise(function(){var z=(0,_.Z)(function*(ne,Oe){yield S.restyle({setHideOnLeave:!1});const Tt=jn(b,"network-request-failed"),gn=ei().setTimeout(()=>{Oe(Tt)},Pl.get());function en(){ei().clearTimeout(gn),ne(S)}S.ping(en).then(en,()=>{Oe(Tt)})});return function(ne,Oe){return z.apply(this,arguments)}}()))}),Ql.apply(this,arguments)}const Xu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Qd{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(m){}}}function za(b,m,v,S,z,ne){Rt(b.config.authDomain,b,"auth-domain-config-required"),Rt(b.config.apiKey,b,"invalid-api-key");const Oe={apiKey:b.config.apiKey,appName:b.name,authType:v,redirectUrl:S,v:J.SDK_VERSION,eventId:z};if(m instanceof se){m.setDefaultLanguage(b.languageCode),Oe.providerId=m.providerId||"",(0,E.xb)(m.getCustomParameters())||(Oe.customParameters=JSON.stringify(m.getCustomParameters()));for(const[gn,en]of Object.entries(ne||{}))Oe[gn]=en}if(m instanceof Ie){const gn=m.getScopes().filter(en=>""!==en);gn.length>0&&(Oe.scopes=gn.join(","))}b.tenantId&&(Oe.tid=b.tenantId);const Tt=Oe;for(const gn of Object.keys(Tt))void 0===Tt[gn]&&delete Tt[gn];return`${function _s({config:b}){return b.emulator?un(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,E.xO)(Tt).slice(1)}`}const ui="webStorageSupport",ld=class Sc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rr,this._completeRedirectFn=Ku,this._overrideRedirectResult=xl}_openPopup(m,v,S,z){var ne=this;return(0,_.Z)(function*(){var Oe;tn(null===(Oe=ne.eventManagers[m._key()])||void 0===Oe?void 0:Oe.manager,"_initialize() not called before _openPopup()");const Tt=za(m,v,S,Gr(),z);return function tc(b,m,v,S=500,z=600){const ne=Math.max((window.screen.availHeight-z)/2,0).toString(),Oe=Math.max((window.screen.availWidth-S)/2,0).toString();let Tt="";const gn=Object.assign(Object.assign({},Xu),{width:S.toString(),height:z.toString(),top:ne,left:Oe}),en=(0,E.z$)().toLowerCase();v&&(Tt=ws(en)?"_blank":v),Yn(en)&&(m=m||"http://localhost",gn.scrollbars="yes");const Rn=Object.entries(gn).reduce((Oi,[ss,mo])=>`${Oi}${ss}=${mo},`,"");if(function Qe(b=(0,E.z$)()){var m;return ze(b)&&!!(null===(m=window.navigator)||void 0===m?void 0:m.standalone)}(en)&&"_self"!==Tt)return function Xl(b,m){const v=document.createElement("a");v.href=b,v.target=m;const S=document.createEvent("MouseEvent");S.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(S)}(m||"",Tt),new Qd(null);const ci=window.open(m||"",Tt,Rn);Rt(ci,b,"popup-blocked");try{ci.focus()}catch(Oi){}return new Qd(ci)}(m,Tt,Br())})()}_openRedirect(m,v,S,z){var ne=this;return(0,_.Z)(function*(){return yield ne._originValidation(m),function nt(b){ei().location.href=b}(za(m,v,S,Gr(),z)),new Promise(()=>{})})()}_initialize(m){const v=m._key();if(this.eventManagers[v]){const{manager:z,promise:ne}=this.eventManagers[v];return z?Promise.resolve(z):(tn(ne,"If manager is not set, promise should be"),ne)}const S=this.initAndGetManager(m);return this.eventManagers[v]={promise:S},S.catch(()=>{delete this.eventManagers[v]}),S}initAndGetManager(m){var v=this;return(0,_.Z)(function*(){const S=yield function zo(b){return Ql.apply(this,arguments)}(m),z=new qh(m);return S.register("authEvent",ne=>(Rt(null==ne?void 0:ne.authEvent,m,"invalid-auth-event"),{status:z.onEvent(ne.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[m._key()]={manager:z},v.iframes[m._key()]=S,z})()}_isIframeWebStorageSupported(m,v){this.iframes[m._key()].send(ui,{type:ui},z=>{var ne;const Oe=null===(ne=null==z?void 0:z[0])||void 0===ne?void 0:ne[ui];void 0!==Oe&&v(!!Oe),Wn(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const v=m._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Rl(b){return So.apply(this,arguments)}(m)),this.originValidationPromises[v]}get _shouldInitProactively(){return Wt()||Xi()||ze()}};class xc extends class Ps{constructor(m){this.factorId=m}_process(m,v,S){switch(v.type){case"enroll":return this._finalizeEnroll(m,v.credential,S);case"signin":return this._finalizeSignIn(m,v.credential);default:return xr("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new xc(m)}_finalizeEnroll(m,v,S){return function Tr(b,m){return Ar(b,"POST","/v2/accounts/mfaEnrollment:finalize",Dn(b,m))}(m,{idToken:v,displayName:S,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,v){return function Di(b,m){return Ar(b,"POST","/v2/accounts/mfaSignIn:finalize",Dn(b,m))}(m,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let io=(()=>{class b{constructor(){}static assertion(v){return xc._fromCredential(v)}}return b.FACTOR_ID="phone",b})();var Mc="@firebase/auth",eu="0.20.10";class Qh{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var v=this;return(0,_.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const v=this.auth.onIdTokenChanged(S=>{var z;m((null===(z=S)||void 0===z?void 0:z.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,v),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const v=this.internalListeners.get(m);!v||(this.internalListeners.delete(m),v(),this.updateProactiveRefresh())}assertAuthConfigured(){Rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const cd=(0,E.Pz)("authIdTokenMaxAge")||300;let dd=null;const Wr=b=>function(){var m=(0,_.Z)(function*(v){const S=v&&(yield v.getIdTokenResult()),z=S&&((new Date).getTime()-Date.parse(S.issuedAtTime))/1e3;if(z&&z>cd)return;const ne=null==S?void 0:S.token;dd!==ne&&(dd=ne,yield fetch(b,{method:ne?"POST":"DELETE",headers:ne?{Authorization:`Bearer ${ne}`}:{}}))});return function(v){return m.apply(this,arguments)}}();function Jd(b=(0,J.getApp)()){const m=(0,J._getProvider)(b,"auth");if(m.isInitialized())return m.getImmediate();const v=function Nn(b,m){const v=(0,J._getProvider)(b,"auth");if(v.isInitialized()){const z=v.getImmediate(),ne=v.getOptions();if((0,E.vZ)(ne,null!=m?m:{}))return z;Wn(z,"already-initialized")}return v.initialize({options:m})}(b,{popupRedirectResolver:ld,persistence:[qs,Et,rr]}),S=(0,E.Pz)("authTokenSyncURL");if(S){const ne=Wr(S);(function tl(b,m,v){(0,E.m9)(b).beforeAuthStateChanged(m,v)})(v,ne,()=>ne(v.currentUser)),function ya(b,m,v,S){(0,E.m9)(b).onIdTokenChanged(m,v,S)}(v,Oe=>ne(Oe))}const z=(0,E.q4)("auth");return z&&Ss(v,`http://${z}`),v}!function ud(b){(0,J._registerComponent)(new et.wA("auth",(m,{options:v})=>{const S=m.getProvider("app").getImmediate(),z=m.getProvider("heartbeat"),{apiKey:ne,authDomain:Oe}=S.options;return((Tt,gn)=>{Rt(ne&&!ne.includes(":"),"invalid-api-key",{appName:Tt.name}),Rt(!(null==Oe?void 0:Oe.includes(":")),"argument-error",{appName:Tt.name});const en={apiKey:ne,authDomain:Oe,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zn(b)},Rn=new Fr(Tt,gn,en);return function Or(b,m){const v=(null==m?void 0:m.persistence)||[],S=(Array.isArray(v)?v:[v]).map(vn);(null==m?void 0:m.errorMap)&&b._updateErrorMap(m.errorMap),b._initializeWithPersistence(S,null==m?void 0:m.popupRedirectResolver)}(Rn,v),Rn})(S,z)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,v,S)=>{m.getProvider("auth-internal").initialize()})),(0,J._registerComponent)(new et.wA("auth-internal",m=>{const v=Ir(m.getProvider("auth").getImmediate());return new Qh(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,J.registerVersion)(Mc,eu,function xi(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,J.registerVersion)(Mc,eu,"esm2017")}("Browser")},5525:(Yt,Je,j)=>{j.d(Je,{u7:()=>u,Jj:()=>Hl,IX:()=>u_,my:()=>Ds,xU:()=>p,Lz:()=>td,WA:()=>Gt,F8:()=>nd,$q:()=>C,W:()=>D,EK:()=>vi,PU:()=>sp,l7:()=>ea,Ky:()=>x,Xb:()=>hi,Cf:()=>Nr,K9:()=>Ua,Me:()=>Do,yq:()=>eo,Wi:()=>Yc,ET:()=>hs,Ab:()=>br,vr:()=>_r,Fc:()=>G_,hJ:()=>qf,B$:()=>om,at:()=>Yp,oe:()=>Ji,AK:()=>Im,TF:()=>cg,JU:()=>kd,ST:()=>c_,fH:()=>xa,Ix:()=>ug,Wu:()=>v_,Lx:()=>vg,qY:()=>As,GL:()=>Ys,QT:()=>ae,kl:()=>He,Xk:()=>st,PL:()=>kt,UQ:()=>Lt,zN:()=>Cn,ad:()=>pm,nP:()=>bi,b9:()=>Em,vh:()=>$d,Pb:()=>Jf,L$:()=>Xf,cf:()=>Es,sc:()=>Ma,Xo:()=>__,IO:()=>zh,iE:()=>Jc,Eo:()=>Zf,i3:()=>Eg,Bt:()=>Kn,pl:()=>ur,Ub:()=>Us,qK:()=>Y,TQ:()=>Cm,e0:()=>y_,r7:()=>Ei,Mx:()=>kh,ar:()=>m_});var he,_=j(5861),E=j(9681),J=j(4859),ye=j(1877),Te=j(2090),Le="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ve={},Pe=Pe||{},ce=Le||self;function fe(){}function ke(o){var e=typeof o;return"array"==(e="object"!=e?e:o?Array.isArray(o)?"array":e:"null")||"object"==e&&"number"==typeof o.length}function yt(o){var e=typeof o;return"object"==e&&null!=o||"function"==e}var Ye="closure_uid_"+(1e9*Math.random()>>>0),Ct=0;function Ke(o,e,t){return o.call.apply(o.bind,arguments)}function $e(o,e,t){if(!o)throw Error();if(2<arguments.length){var l=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(h,l),o.apply(e,h)}}return function(){return o.apply(e,arguments)}}function it(o,e,t){return(it=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ke:$e).apply(null,arguments)}function _t(o,e){var t=Array.prototype.slice.call(arguments,1);return function(){var l=t.slice();return l.push.apply(l,arguments),o.apply(this,l)}}function We(o,e){function t(){}t.prototype=e.prototype,o.X=e.prototype,o.prototype=new t,o.prototype.constructor=o,o.Wb=function(l,h,g){for(var w=Array(arguments.length-2),R=2;R<arguments.length;R++)w[R-2]=arguments[R];return e.prototype[h].apply(l,w)}}function be(){this.s=this.s,this.o=this.o}var At={};be.prototype.s=!1,be.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var o=function ut(o){return Object.prototype.hasOwnProperty.call(o,Ye)&&o[Ye]||(o[Ye]=++Ct)}(this);delete At[o]}},be.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bt=Array.prototype.indexOf?function(o,e){return Array.prototype.indexOf.call(o,e,void 0)}:function(o,e){if("string"==typeof o)return"string"!=typeof e||1!=e.length?-1:o.indexOf(e,0);for(let t=0;t<o.length;t++)if(t in o&&o[t]===e)return t;return-1};function lt(o){const e=o.length;if(0<e){const t=Array(e);for(let l=0;l<e;l++)t[l]=o[l];return t}return[]}function Ce(o,e){for(let t=1;t<arguments.length;t++){const l=arguments[t];if(ke(l)){const h=o.length||0,g=l.length||0;o.length=h+g;for(let w=0;w<g;w++)o[h+w]=l[w]}else o.push(l)}}function je(o,e){this.type=o,this.g=this.target=e,this.defaultPrevented=!1}je.prototype.h=function(){this.defaultPrevented=!0};var tt=function(){if(!ce.addEventListener||!Object.defineProperty)return!1;var o=!1,e=Object.defineProperty({},"passive",{get:function(){o=!0}});try{ce.addEventListener("test",fe,e),ce.removeEventListener("test",fe,e)}catch(t){}return o}();function ct(o){return/^[\s\xa0]*$/.test(o)}var wt=String.prototype.trim?function(o){return o.trim()}:function(o){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(o)[1]};function et(o,e){return o<e?-1:o>e?1:0}function Tn(){var o=ce.navigator;return o&&(o=o.userAgent)?o:""}function Jt(o){return-1!=Tn().indexOf(o)}function On(o){return On[" "](o),o}On[" "]=fe;var _e,o,Zt=Jt("Opera"),an=Jt("Trident")||Jt("MSIE"),wn=Jt("Edge"),gt=wn||an,Dt=Jt("Gecko")&&!(-1!=Tn().toLowerCase().indexOf("webkit")&&!Jt("Edge"))&&!(Jt("Trident")||Jt("MSIE"))&&!Jt("Edge"),Me=-1!=Tn().toLowerCase().indexOf("webkit")&&!Jt("Edge");function ot(){var o=ce.document;return o?o.documentMode:void 0}e:{var yn="",Wn=(o=Tn(),Dt?/rv:([^\);]+)(\)|;)/.exec(o):wn?/Edge\/([\d\.]+)/.exec(o):an?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(o):Me?/WebKit\/(\S+)/.exec(o):Zt?/(?:Version)[ \/]?(\S+)/.exec(o):void 0);if(Wn&&(yn=Wn?Wn[1]:""),an){var jn=ot();if(null!=jn&&jn>parseFloat(yn)){_e=String(jn);break e}}_e=yn}var qr={};var xr=ce.document&&an&&(ot()||parseInt(_e,10))||void 0;function tn(o,e){if(je.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var t=this.type=o.type,l=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=e,e=o.relatedTarget){if(Dt){e:{try{On(e.nodeName);var h=!0;break e}catch(g){}h=!1}h||(e=null)}}else"mouseover"==t?e=o.fromElement:"mouseout"==t&&(e=o.toElement);this.relatedTarget=e,l?(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0):(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType="string"==typeof o.pointerType?o.pointerType:ir[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&tn.X.h.call(this)}}We(tn,je);var ir={2:"touch",3:"pen",4:"mouse"};tn.prototype.h=function(){tn.X.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var vn="closure_listenable_"+(1e6*Math.random()|0),Nn=0;function Or(o,e,t,l,h){this.listener=o,this.proxy=null,this.src=e,this.type=t,this.capture=!!l,this.ha=h,this.key=++Nn,this.ba=this.ea=!1}function Gr(o){o.ba=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function jr(o,e,t){for(const l in o)e.call(t,o[l],l,o)}function Mr(o){const e={};for(const t in o)e[t]=o[t];return e}const ti="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sn(o,e){let t,l;for(let h=1;h<arguments.length;h++){for(t in l=arguments[h],l)o[t]=l[t];for(let g=0;g<ti.length;g++)t=ti[g],Object.prototype.hasOwnProperty.call(l,t)&&(o[t]=l[t])}}function Vn(o){this.src=o,this.g={},this.h=0}function un(o,e){var t=e.type;if(t in o.g){var g,l=o.g[t],h=bt(l,e);(g=0<=h)&&Array.prototype.splice.call(l,h,1),g&&(Gr(e),0==o.g[t].length&&(delete o.g[t],o.h--))}}function nn(o,e,t,l){for(var h=0;h<o.length;++h){var g=o[h];if(!g.ba&&g.listener==e&&g.capture==!!t&&g.ha==l)return h}return-1}Vn.prototype.add=function(o,e,t,l,h){var g=o.toString();(o=this.g[g])||(o=this.g[g]=[],this.h++);var w=nn(o,e,l,h);return-1<w?(e=o[w],t||(e.ea=!1)):((e=new Or(e,this.src,g,!!l,h)).ea=t,o.push(e)),e};var Dr="closure_lm_"+(1e6*Math.random()|0),Zr={};function Dn(o,e,t,l,h){if(l&&l.once)return ar(o,e,t,l,h);if(Array.isArray(e)){for(var g=0;g<e.length;g++)Dn(o,e[g],t,l,h);return null}return t=Kt(t),o&&o[vn]?o.N(e,t,yt(l)?!!l.capture:!!l,h):Ar(o,e,t,!1,l,h)}function Ar(o,e,t,l,h,g){if(!e)throw Error("Invalid event type");var w=yt(h)?!!h.capture:!!h,R=Ot(o);if(R||(o[Dr]=R=new Vn(o)),(t=R.add(e,t,l,w,g)).proxy)return t;if(l=function dr(){const e=cr;return function o(t){return e.call(o.src,o.listener,t)}}(),t.proxy=l,l.src=o,l.listener=t,o.addEventListener)tt||(h=w),void 0===h&&(h=!1),o.addEventListener(e.toString(),l,h);else if(o.attachEvent)o.attachEvent(Gn(e.toString()),l);else{if(!o.addListener||!o.removeListener)throw Error("addEventListener and attachEvent are unavailable.");o.addListener(l)}return t}function ar(o,e,t,l,h){if(Array.isArray(e)){for(var g=0;g<e.length;g++)ar(o,e[g],t,l,h);return null}return t=Kt(t),o&&o[vn]?o.O(e,t,yt(l)?!!l.capture:!!l,h):Ar(o,e,t,!0,l,h)}function En(o,e,t,l,h){if(Array.isArray(e))for(var g=0;g<e.length;g++)En(o,e[g],t,l,h);else l=yt(l)?!!l.capture:!!l,t=Kt(t),o&&o[vn]?(o=o.i,(e=String(e).toString())in o.g&&-1<(t=nn(g=o.g[e],t,l,h))&&(Gr(g[t]),Array.prototype.splice.call(g,t,1),0==g.length&&(delete o.g[e],o.h--))):o&&(o=Ot(o))&&(e=o.g[e.toString()],o=-1,e&&(o=nn(e,t,l,h)),(t=-1<o?e[o]:null)&&hr(t))}function hr(o){if("number"!=typeof o&&o&&!o.ba){var e=o.src;if(e&&e[vn])un(e.i,o);else{var t=o.type,l=o.proxy;e.removeEventListener?e.removeEventListener(t,l,o.capture):e.detachEvent?e.detachEvent(Gn(t),l):e.addListener&&e.removeListener&&e.removeListener(l),(t=Ot(e))?(un(t,o),0==t.h&&(t.src=null,e[Dr]=null)):Gr(o)}}}function Gn(o){return o in Zr?Zr[o]:Zr[o]="on"+o}function cr(o,e){if(o.ba)o=!0;else{e=new tn(e,this);var t=o.listener,l=o.ha||o.src;o.ea&&hr(o),o=t.call(l,e)}return o}function Ot(o){return(o=o[Dr])instanceof Vn?o:null}var dt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kt(o){return"function"==typeof o?o:(o[dt]||(o[dt]=function(e){return o.handleEvent(e)}),o[dt])}function cn(){be.call(this),this.i=new Vn(this),this.P=this,this.I=null}function hn(o,e){var t,l=o.I;if(l)for(t=[];l;l=l.I)t.push(l);if(o=o.P,l=e.type||e,"string"==typeof e)e=new je(e,o);else if(e instanceof je)e.target=e.target||o;else{var h=e;sn(e=new je(l,o),h)}if(h=!0,t)for(var g=t.length-1;0<=g;g--){var w=e.g=t[g];h=tr(w,l,!0,e)&&h}if(h=tr(w=e.g=o,l,!0,e)&&h,h=tr(w,l,!1,e)&&h,t)for(g=0;g<t.length;g++)h=tr(w=e.g=t[g],l,!1,e)&&h}function tr(o,e,t,l){if(!(e=o.i.g[String(e)]))return!0;e=e.concat();for(var h=!0,g=0;g<e.length;++g){var w=e[g];if(w&&!w.ba&&w.capture==t){var R=w.listener,H=w.ha||w.src;w.ea&&un(o.i,w),h=!1!==R.call(H,l)&&h}}return h&&!l.defaultPrevented}We(cn,be),cn.prototype[vn]=!0,cn.prototype.removeEventListener=function(o,e,t,l){En(this,o,e,t,l)},cn.prototype.M=function(){if(cn.X.M.call(this),this.i){var e,o=this.i;for(e in o.g){for(var t=o.g[e],l=0;l<t.length;l++)Gr(t[l]);delete o.g[e],o.h--}}this.I=null},cn.prototype.N=function(o,e,t,l){return this.i.add(String(o),e,!1,t,l)},cn.prototype.O=function(o,e,t,l){return this.i.add(String(o),e,!0,t,l)};var Se=ce.JSON.stringify;function we(){var o=Vt;let e=null;return o.g&&(e=o.g,o.g=o.g.next,o.g||(o.h=null),e.next=null),e}var ue,me=new class{constructor(o,e){this.i=o,this.j=e,this.h=0,this.g=null}get(){let o;return 0<this.h?(this.h--,o=this.g,this.g=o.next,o.next=null):o=this.i(),o}}(()=>new le,o=>o.reset());class le{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function K(o){ce.setTimeout(()=>{throw o},0)}function ee(o,e){ue||function De(){var o=ce.Promise.resolve(void 0);ue=function(){o.then(Bt)}}(),Ge||(ue(),Ge=!0),Vt.add(o,e)}var Ge=!1,Vt=new class Fe{constructor(){this.h=this.g=null}add(e,t){const l=me.get();l.set(e,t),this.h?this.h.next=l:this.g=l,this.h=l}};function Bt(){for(var o;o=we();){try{o.h.call(o.g)}catch(t){K(t)}var e=me;e.j(o),100>e.h&&(e.h++,o.next=e.g,e.g=o)}Ge=!1}function qn(o,e){cn.call(this),this.h=o||1,this.g=e||ce,this.j=it(this.lb,this),this.l=Date.now()}function Er(o){o.ca=!1,o.R&&(o.g.clearTimeout(o.R),o.R=null)}function xt(o,e,t){if("function"==typeof o)t&&(o=it(o,t));else{if(!o||"function"!=typeof o.handleEvent)throw Error("Invalid listener argument");o=it(o.handleEvent,o)}return 2147483647<Number(e)?-1:ce.setTimeout(o,e||0)}function jt(o){o.g=xt(()=>{o.g=null,o.i&&(o.i=!1,jt(o))},o.j);const e=o.h;o.h=null,o.m.apply(null,e)}We(qn,cn),(he=qn.prototype).ca=!1,he.R=null,he.lb=function(){if(this.ca){var o=Date.now()-this.l;0<o&&o<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-o):(this.R&&(this.g.clearTimeout(this.R),this.R=null),hn(this,"tick"),this.ca&&(Er(this),this.start()))}},he.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},he.M=function(){qn.X.M.call(this),Er(this),delete this.g};class kn extends be{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:jt(this)}M(){super.M(),this.g&&(ce.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Un(o){be.call(this),this.h=o,this.g={}}We(Un,be);var oi=[];function $r(o,e,t,l){Array.isArray(t)||(t&&(oi[0]=t.toString()),t=oi);for(var h=0;h<t.length;h++){var g=Dn(e,t[h],l||o.handleEvent,!1,o.h||o);if(!g)break;o.g[g.key]=g}}function zt(o){jr(o.g,function(e,t){this.g.hasOwnProperty(t)&&hr(e)},o),o.g={}}function Ln(){this.g=!0}function ni(o,e,t,l){o.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Fi(o,e){if(!o.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(o=0;o<t.length;o++)if(Array.isArray(t[o])){var l=t[o];if(!(2>l.length)){var h=l[1];if(Array.isArray(h)&&!(1>h.length)){var g=h[0];if("noop"!=g&&"stop"!=g&&"close"!=g)for(var w=1;w<h.length;w++)h[w]=""}}}return Se(t)}catch(R){return e}}(o,t)+(l?" "+l:"")})}Un.prototype.M=function(){Un.X.M.call(this),zt(this)},Un.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ln.prototype.Aa=function(){this.g=!1},Ln.prototype.info=function(){};var Bn={},Li=null;function ri(){return Li=Li||new cn}function Yn(o){je.call(this,Bn.Pa,o)}function Xi(o){const e=ri();hn(e,new Yn(e,o))}function ws(o,e){je.call(this,Bn.STAT_EVENT,o),this.stat=e}function mi(o){const e=ri();hn(e,new ws(e,o))}function di(o,e){je.call(this,Bn.Qa,o),this.size=e}function kr(o,e){if("function"!=typeof o)throw Error("Fn must not be null and must be a function");return ce.setTimeout(function(){o()},e)}Bn.Pa="serverreachability",We(Yn,je),Bn.STAT_EVENT="statevent",We(ws,je),Bn.Qa="timingevent",We(di,je);var Mi={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},ze={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ue(){}function It(){}Ue.prototype.h=null;var wi,Wt={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function ln(){je.call(this,"d")}function Zn(){je.call(this,"c")}function Fr(){}function Ir(o,e,t,l){this.l=o,this.j=e,this.m=t,this.U=l||1,this.S=new Un(this),this.O=Ss,this.T=new qn(o=gt?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Qr}function Qr(){this.i=null,this.g="",this.h=!1}We(ln,je),We(Zn,je),We(Fr,Ue),Fr.prototype.g=function(){return new XMLHttpRequest},Fr.prototype.i=function(){return{}},wi=new Fr;var Ss=45e3,js={},Yi={};function Ui(o,e,t){o.K=1,o.v=Cs(Ls(e)),o.s=t,o.P=!0,lo(o,null)}function lo(o,e){o.F=Date.now(),$s(o),o.A=Ls(o.v);var t=o.A,l=o.U;Array.isArray(l)||(l=[String(l)]),xe(t.i,"t",l),o.C=0,t=o.l.H,o.h=new Qr,o.g=Na(o.l,t?e:null,!o.s),0<o.N&&(o.L=new kn(it(o.La,o,o.g),o.N)),$r(o.S,o.g,"readystatechange",o.ib),e=o.H?Mr(o.H):{},o.s?(o.u||(o.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",o.g.da(o.A,o.u,o.s,e)):(o.u="GET",o.g.da(o.A,o.u,null,e)),Xi(1),function Rr(o,e,t,l,h,g){o.info(function(){if(o.g)if(g)for(var w="",R=g.split("&"),H=0;H<R.length;H++){var Q=R[H].split("=");if(1<Q.length){var de=Q[0];Q=Q[1];var Re=de.split("_");w=2<=Re.length&&"type"==Re[1]?w+(de+"=")+Q+"&":w+(de+"=redacted&")}}else w=null;else w=g;return"XMLHTTP REQ ("+l+") [attempt "+h+"]: "+e+"\n"+t+"\n"+w})}(o.j,o.u,o.A,o.m,o.U,o.s)}function Ns(o){return!!o.g&&"GET"==o.u&&2!=o.K&&o.l.Da}function uo(o,e,t){let h,l=!0;for(;!o.I&&o.C<t.length;){if(h=wo(o,t),h==Yi){4==e&&(o.o=4,mi(14),l=!1),ni(o.j,o.m,null,"[Incomplete Response]");break}if(h==js){o.o=4,mi(15),ni(o.j,o.m,t,"[Invalid Chunk]"),l=!1;break}ni(o.j,o.m,h,null),ks(o,h)}Ns(o)&&h!=Yi&&h!=js&&(o.h.g="",o.C=0),4!=e||0!=t.length||o.h.h||(o.o=1,mi(16),l=!1),o.i=o.i&&l,l?0<t.length&&!o.$&&(o.$=!0,(e=o.l).g==o&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),fa(e),e.K=!0,mi(11))):(ni(o.j,o.m,t,"[Invalid Chunked Response]"),Os(o),es(o))}function wo(o,e){var t=o.C,l=e.indexOf("\n",t);return-1==l?Yi:(t=Number(e.substring(t,l)),isNaN(t)?js:(l+=1)+t>e.length?Yi:(e=e.substr(l,t),o.C=l+t,e))}function $s(o){o.V=Date.now()+o.O,Co(o,o.O)}function Co(o,e){if(null!=o.B)throw Error("WatchDog timer not null");o.B=kr(it(o.gb,o),e)}function xs(o){o.B&&(ce.clearTimeout(o.B),o.B=null)}function es(o){0==o.l.G||o.I||Gl(o.l,o)}function Os(o){xs(o);var e=o.L;e&&"function"==typeof e.na&&e.na(),o.L=null,Er(o.T),zt(o.S),o.g&&(e=o.g,o.g=null,e.abort(),e.na())}function ks(o,e){try{var t=o.l;if(0!=t.G&&(t.g==o||te(t.h,o)))if(!o.J&&te(t.h,o)&&3==t.G){try{var l=t.Fa.g.parse(e)}catch(Q){l=null}if(Array.isArray(l)&&3==l.length){var h=l;if(0==h[0])e:if(t.u)t.Ba=h[1],0<t.Ba-t.T&&37500>h[2]&&t.L&&0==t.A&&!t.v&&(t.v=kr(it(t.cb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<o.F))break e;Js(t),Yo(t)}Fo(t),mi(18)}if(1>=F(t.h)&&t.ja){try{t.ja()}catch(Q){}t.ja=void 0}}else Xs(t,11)}else if((o.J||t.g==o)&&Js(t),!ct(e))for(h=t.Fa.g.parse(e),e=0;e<h.length;e++){let Q=h[e];if(t.T=Q[0],Q=Q[1],2==t.G)if("c"==Q[0]){t.I=Q[1],t.ka=Q[2];const de=Q[3];null!=de&&(t.ma=de,t.j.info("VER="+t.ma));const Re=Q[4];null!=Re&&(t.Ca=Re,t.j.info("SVER="+t.Ca));const ft=Q[5];null!=ft&&"number"==typeof ft&&0<ft&&(t.J=l=1.5*ft,t.j.info("backChannelRequestTimeoutMs_="+l)),l=t;const Pt=o.g;if(Pt){const Ht=Pt.g?Pt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ht){var g=l.h;g.g||-1==Ht.indexOf("spdy")&&-1==Ht.indexOf("quic")&&-1==Ht.indexOf("h2")||(g.j=g.l,g.g=new Set,g.h&&(V(g,g.h),g.h=null))}if(l.D){const Pn=Pt.g?Pt.g.getResponseHeader("X-HTTP-Session-Id"):null;Pn&&(l.za=Pn,Jr(l.F,l.D,Pn))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-o.F,t.j.info("Handshake RTT: "+t.P+"ms"));var w=o;if((l=t).sa=Pa(l,l.H?l.ka:null,l.V),w.J){se(l.h,w);var R=w,H=l.J;H&&R.setTimeout(H),R.B&&(xs(R),$s(R)),l.g=w}else yl(l);0<t.i.length&&bs(t)}else"stop"!=Q[0]&&"close"!=Q[0]||Xs(t,7);else 3==t.G&&("stop"==Q[0]||"close"==Q[0]?"stop"==Q[0]?Xs(t,7):Ko(t):"noop"!=Q[0]&&t.l&&t.l.wa(Q),t.A=0)}Xi(4)}catch(Q){}}function Oo(o,e){if(o.forEach&&"function"==typeof o.forEach)o.forEach(e,void 0);else if(ke(o)||"string"==typeof o)Array.prototype.forEach.call(o,e,void 0);else for(var t=function bo(o){if(o.oa&&"function"==typeof o.oa)return o.oa();if(!o.W||"function"!=typeof o.W){if("undefined"!=typeof Map&&o instanceof Map)return Array.from(o.keys());if(!("undefined"!=typeof Set&&o instanceof Set)){if(ke(o)||"string"==typeof o){var e=[];o=o.length;for(var t=0;t<o;t++)e.push(t);return e}e=[],t=0;for(const l in o)e[t++]=l;return e}}}(o),l=function No(o){if(o.W&&"function"==typeof o.W)return o.W();if("undefined"!=typeof Map&&o instanceof Map||"undefined"!=typeof Set&&o instanceof Set)return Array.from(o.values());if("string"==typeof o)return o.split("");if(ke(o)){for(var e=[],t=o.length,l=0;l<t;l++)e.push(o[l]);return e}for(l in e=[],t=0,o)e[t++]=o[l];return e}(o),h=l.length,g=0;g<h;g++)e.call(void 0,l[g],t&&t[g],o)}(he=Ir.prototype).setTimeout=function(o){this.O=o},he.ib=function(o){o=o.target;const e=this.L;e&&3==gi(o)?e.l():this.La(o)},he.La=function(o){try{if(o==this.g)e:{const de=gi(this.g);var e=this.g.Ea();const Re=this.g.aa();if(!(3>de)&&(3!=de||gt||this.g&&(this.h.h||this.g.fa()||Qi(this.g)))){this.I||4!=de||7==e||Xi(8==e||0>=Re?3:2),xs(this);var t=this.g.aa();this.Y=t;t:if(Ns(this)){var l=Qi(this.g);o="";var h=l.length,g=4==gi(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Os(this),es(this);var w="";break t}this.h.i=new ce.TextDecoder}for(e=0;e<h;e++)this.h.h=!0,o+=this.h.i.decode(l[e],{stream:g&&e==h-1});l.splice(0,h),this.h.g+=o,this.C=0,w=this.h.g}else w=this.g.fa();if(this.i=200==t,function Kr(o,e,t,l,h,g,w){o.info(function(){return"XMLHTTP RESP ("+l+") [ attempt "+h+"]: "+e+"\n"+t+"\n"+g+" "+w})}(this.j,this.u,this.A,this.m,this.U,de,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var R,H=this.g;if((R=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ct(R)){var Q=R;break t}}Q=null}if(!(t=Q)){this.i=!1,this.o=3,mi(12),Os(this),es(this);break e}ni(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ks(this,t)}this.P?(uo(this,de,w),gt&&this.i&&3==de&&($r(this.S,this.T,"tick",this.hb),this.T.start())):(ni(this.j,this.m,w,null),ks(this,w)),4==de&&Os(this),this.i&&!this.I&&(4==de?Gl(this.l,this):(this.i=!1,$s(this)))}else 400==t&&0<w.indexOf("Unknown SID")?(this.o=3,mi(12)):(this.o=0,mi(13)),Os(this),es(this)}}}catch(de){}},he.hb=function(){if(this.g){var o=gi(this.g),e=this.g.fa();this.C<e.length&&(xs(this),uo(this,o,e),this.i&&4!=o&&$s(this))}},he.cancel=function(){this.I=!0,Os(this)},he.gb=function(){this.B=null;const o=Date.now();0<=o-this.V?(function fi(o,e){o.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Xi(3),mi(17)),Os(this),this.o=2,es(this)):Co(this,this.V-o)};var Fs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zi(o,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,o instanceof zi){this.h=void 0!==e?e:o.h,ps(this,o.j),this.s=o.s,this.g=o.g,co(this,o.m),this.l=o.l,e=o.i;var t=new ai;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),us(this,t),this.o=o.o}else o&&(t=String(o).match(Fs))?(this.h=!!e,ps(this,t[1]||"",!0),this.s=fr(t[2]||""),this.g=fr(t[3]||"",!0),co(this,t[4]),this.l=fr(t[5]||"",!0),us(this,t[6]||"",!0),this.o=fr(t[7]||"")):(this.h=!!e,this.i=new ai(null,this.h))}function Ls(o){return new zi(o)}function ps(o,e,t){o.j=t?fr(e,!0):e,o.j&&(o.j=o.j.replace(/:$/,""))}function co(o,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);o.m=e}else o.m=null}function us(o,e,t){e instanceof ai?(o.i=e,function vt(o,e){e&&!o.j&&(X(o),o.i=null,o.g.forEach(function(t,l){var h=l.toLowerCase();l!=h&&(G(this,l),xe(this,h,t))},o)),o.j=e}(o.i,o.h)):(t||(e=or(e,Ri)),o.i=new ai(e,o.h))}function Jr(o,e,t){o.i.set(e,t)}function Cs(o){return Jr(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function fr(o,e){return o?e?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function or(o,e,t){return"string"==typeof o?(o=encodeURI(o).replace(e,lr),t&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function lr(o){return"%"+((o=o.charCodeAt(0))>>4&15).toString(16)+(15&o).toString(16)}zi.prototype.toString=function(){var o=[],e=this.j;e&&o.push(or(e,pi,!0),":");var t=this.g;return(t||"file"==e)&&(o.push("//"),(e=this.s)&&o.push(or(e,pi,!0),"@"),o.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&o.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&o.push("/"),o.push(or(t,"/"==t.charAt(0)?Hs:zr,!0))),(t=this.i.toString())&&o.push("?",t),(t=this.o)&&o.push("#",or(t,ko)),o.join("")};var pi=/[#\/\?@]/g,zr=/[#\?:]/g,Hs=/[#\?]/g,Ri=/[#\?@]/g,ko=/#/g;function ai(o,e){this.h=this.g=null,this.i=o||null,this.j=!!e}function X(o){o.g||(o.g=new Map,o.h=0,o.i&&function ca(o,e){if(o){o=o.split("&");for(var t=0;t<o.length;t++){var l=o[t].indexOf("="),h=null;if(0<=l){var g=o[t].substring(0,l);h=o[t].substring(l+1)}else g=o[t];e(g,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}}(o.i,function(e,t){o.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function G(o,e){X(o),e=qe(o,e),o.g.has(e)&&(o.i=null,o.h-=o.g.get(e).length,o.g.delete(e))}function pe(o,e){return X(o),e=qe(o,e),o.g.has(e)}function xe(o,e,t){G(o,e),0<t.length&&(o.i=null,o.g.set(qe(o,e),lt(t)),o.h+=t.length)}function qe(o,e){return e=String(e),o.j&&(e=e.toLowerCase()),e}function fn(o){this.l=o||Mn,o=ce.PerformanceNavigationTiming?0<(o=ce.performance.getEntriesByType("navigation")).length&&("hq"==o[0].nextHopProtocol||"h2"==o[0].nextHopProtocol):!!(ce.g&&ce.g.Ga&&ce.g.Ga()&&ce.g.Ga().$b),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(he=ai.prototype).add=function(o,e){X(this),this.i=null,o=qe(this,o);var t=this.g.get(o);return t||this.g.set(o,t=[]),t.push(e),this.h+=1,this},he.forEach=function(o,e){X(this),this.g.forEach(function(t,l){t.forEach(function(h){o.call(e,h,l,this)},this)},this)},he.oa=function(){X(this);const o=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let l=0;l<e.length;l++){const h=o[l];for(let g=0;g<h.length;g++)t.push(e[l])}return t},he.W=function(o){X(this);let e=[];if("string"==typeof o)pe(this,o)&&(e=e.concat(this.g.get(qe(this,o))));else{o=Array.from(this.g.values());for(let t=0;t<o.length;t++)e=e.concat(o[t])}return e},he.set=function(o,e){return X(this),this.i=null,pe(this,o=qe(this,o))&&(this.h-=this.g.get(o).length),this.g.set(o,[e]),this.h+=1,this},he.get=function(o,e){return o&&0<(o=this.W(o)).length?String(o[0]):e},he.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var l=e[t];const g=encodeURIComponent(String(l)),w=this.W(l);for(l=0;l<w.length;l++){var h=g;""!==w[l]&&(h+="="+encodeURIComponent(String(w[l]))),o.push(h)}}return this.i=o.join("&")};var Mn=10;function An(o){return!!o.h||!!o.g&&o.g.size>=o.j}function F(o){return o.h?1:o.g?o.g.size:0}function te(o,e){return o.h?o.h==e:!!o.g&&o.g.has(e)}function V(o,e){o.g?o.g.add(e):o.h=e}function se(o,e){o.h&&o.h==e?o.h=null:o.g&&o.g.has(e)&&o.g.delete(e)}function Ie(o){if(null!=o.h)return o.i.concat(o.h.D);if(null!=o.g&&0!==o.g.size){let e=o.i;for(const t of o.g.values())e=e.concat(t.D);return e}return lt(o.i)}function ht(){}function Mt(){this.g=new ht}function on(o,e,t){const l=t||"";try{Oo(o,function(h,g){let w=h;yt(h)&&(w=Se(h)),e.push(l+g+"="+encodeURIComponent(w))})}catch(h){throw e.push(l+"type="+encodeURIComponent("_badmap")),h}}function $n(o,e,t,l,h){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,h(l)}catch(g){}}function Qt(o){this.l=o.ac||null,this.j=o.jb||!1}function Jn(o,e){cn.call(this),this.D=o,this.u=e,this.m=void 0,this.readyState=Pr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fn.prototype.cancel=function(){if(this.i=Ie(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const o of this.g.values())o.cancel();this.g.clear()}},ht.prototype.stringify=function(o){return ce.JSON.stringify(o,void 0)},ht.prototype.parse=function(o){return ce.JSON.parse(o,void 0)},We(Qt,Ue),Qt.prototype.g=function(){return new Jn(this.l,this.j)},Qt.prototype.i=function(o){return function(){return o}}({}),We(Jn,cn);var Pr=0;function Hr(o){o.j.read().then(o.Ta.bind(o)).catch(o.ga.bind(o))}function rn(o){o.readyState=4,o.l=null,o.j=null,o.A=null,Pi(o)}function Pi(o){o.onreadystatechange&&o.onreadystatechange.call(o)}(he=Jn.prototype).open=function(o,e){if(this.readyState!=Pr)throw this.abort(),Error("Error reopening a connection");this.C=o,this.B=e,this.readyState=1,Pi(this)},he.send=function(o){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};o&&(e.body=o),(this.D||ce).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},he.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,rn(this)),this.readyState=Pr},he.Wa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Pi(this)),this.g&&(this.readyState=3,Pi(this),this.g)))if("arraybuffer"===this.responseType)o.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==ce.ReadableStream&&"body"in o){if(this.j=o.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Hr(this)}else o.text().then(this.Va.bind(this),this.ga.bind(this))},he.Ta=function(o){if(this.g){if(this.u&&o.value)this.response.push(o.value);else if(!this.u){var e=o.value?o.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!o.done}))&&(this.response=this.responseText+=e)}o.done?rn(this):Pi(this),3==this.readyState&&Hr(this)}},he.Va=function(o){this.g&&(this.response=this.responseText=o,rn(this))},he.Ua=function(o){this.g&&(this.response=o,rn(this))},he.ga=function(){this.g&&rn(this)},he.setRequestHeader=function(o,e){this.v.append(o,e)},he.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},he.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],e=this.h.entries();for(var t=e.next();!t.done;)o.push((t=t.value)[0]+": "+t[1]),t=e.next();return o.join("\r\n")},Object.defineProperty(Jn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(o){this.m=o?"include":"same-origin"}});var Xr=ce.JSON.parse;function li(o){cn.call(this),this.headers=new Map,this.u=o||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Vi,this.K=this.L=!1}We(li,cn);var Vi="",$=/^https?$/i,U=["POST","PUT"];function q(o,e){o.h=!1,o.g&&(o.l=!0,o.g.abort(),o.l=!1),o.j=e,o.m=5,rt(o),sr(o)}function rt(o){o.D||(o.D=!0,hn(o,"complete"),hn(o,"error"))}function In(o){if(o.h&&void 0!==Pe&&(!o.C[1]||4!=gi(o)||2!=o.aa()))if(o.v&&4==gi(o))xt(o.Ha,0,o);else if(hn(o,"readystatechange"),4==gi(o)){o.h=!1;try{const R=o.aa();e:switch(R){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var l;if(l=0===R){var h=String(o.H).match(Fs)[1]||null;if(!h&&ce.self&&ce.self.location){var g=ce.self.location.protocol;h=g.substr(0,g.length-1)}l=!$.test(h?h.toLowerCase():"")}t=l}if(t)hn(o,"complete"),hn(o,"success");else{o.m=6;try{var w=2<gi(o)?o.g.statusText:""}catch(H){w=""}o.j=w+" ["+o.aa()+"]",rt(o)}}finally{sr(o)}}}function sr(o,e){if(o.g){Ti(o);const t=o.g,l=o.C[0]?fe:null;o.g=null,o.C=null,e||hn(o,"ready");try{t.onreadystatechange=l}catch(h){}}}function Ti(o){o.g&&o.K&&(o.g.ontimeout=null),o.A&&(ce.clearTimeout(o.A),o.A=null)}function gi(o){return o.g?o.g.readyState:0}function Qi(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.J){case Vi:case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ms(o){let e="";return jr(o,function(t,l){e+=l,e+=":",e+=t,e+="\r\n"}),e}function Io(o,e,t){e:{for(l in t){var l=!1;break e}l=!0}l||(t=Ms(t),"string"==typeof o?null!=t&&encodeURIComponent(String(t)):Jr(o,e,t))}function da(o,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[o]||e}function ii(o){this.Ca=0,this.i=[],this.j=new Ln,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=da("failFast",!1,o),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=da("baseRetryDelayMs",5e3,o),this.bb=da("retryDelaySeedMs",1e4,o),this.$a=da("forwardChannelMaxRetries",2,o),this.ta=da("forwardChannelRequestTimeoutMs",2e4,o),this.ra=o&&o.xmlHttpFactory||void 0,this.Da=o&&o.Zb||!1,this.J=void 0,this.H=o&&o.supportsCrossDomainXhr||!1,this.I="",this.h=new fn(o&&o.concurrentRequestLimit),this.Fa=new Mt,this.O=o&&o.fastHandshake||!1,this.N=o&&o.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=o&&o.Xb||!1,o&&o.Aa&&this.j.Aa(),o&&o.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&o&&o.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Ko(o){if(ts(o),3==o.G){var e=o.U++,t=Ls(o.F);Jr(t,"SID",o.I),Jr(t,"RID",e),Jr(t,"TYPE","terminate"),Is(o,t),(e=new Ir(o,o.j,e,void 0)).K=2,e.v=Cs(Ls(t)),t=!1,ce.navigator&&ce.navigator.sendBeacon&&(t=ce.navigator.sendBeacon(e.v.toString(),"")),!t&&ce.Image&&((new Image).src=e.v,t=!0),t||(e.g=Na(e.l,null),e.g.da(e.v)),e.F=Date.now(),$s(e)}pa(o)}function Yo(o){o.g&&(fa(o),o.g.cancel(),o.g=null)}function ts(o){Yo(o),o.u&&(ce.clearTimeout(o.u),o.u=null),Js(o),o.h.cancel(),o.m&&("number"==typeof o.m&&ce.clearTimeout(o.m),o.m=null)}function bs(o){An(o.h)||o.m||(o.m=!0,ee(o.Ja,o),o.C=0)}function cs(o,e){var t;t=e?e.m:o.U++;const l=Ls(o.F);Jr(l,"SID",o.I),Jr(l,"RID",t),Jr(l,"AID",o.T),Is(o,l),o.o&&o.s&&Io(l,o.o,o.s),t=new Ir(o,o.j,t,o.C+1),null===o.o&&(t.H=o.s),e&&(o.i=e.D.concat(o.i)),e=pr(o,t,1e3),t.setTimeout(Math.round(.5*o.ta)+Math.round(.5*o.ta*Math.random())),V(o.h,t),Ui(t,l,e)}function Is(o,e){o.ia&&jr(o.ia,function(t,l){Jr(e,l,t)}),o.l&&Oo({},function(t,l){Jr(e,l,t)})}function pr(o,e,t){t=Math.min(o.i.length,t);var l=o.l?it(o.l.Ra,o.l,o):null;e:{var h=o.i;let g=-1;for(;;){const w=["count="+t];-1==g?0<t?(g=h[0].h,w.push("ofs="+g)):g=0:w.push("ofs="+g);let R=!0;for(let H=0;H<t;H++){let Q=h[H].h;const de=h[H].g;if(Q-=g,0>Q)g=Math.max(0,h[H].h-100),R=!1;else try{on(de,w,"req"+Q+"_")}catch(Re){l&&l(de)}}if(R){l=w.join("&");break e}}}return o=o.i.splice(0,t),e.D=o,l}function yl(o){o.g||o.u||(o.Z=1,ee(o.Ia,o),o.A=0)}function Fo(o){return!(o.g||o.u||3<=o.A||(o.Z++,o.u=kr(it(o.Ia,o),Lo(o,o.A)),o.A++,0))}function fa(o){null!=o.B&&(ce.clearTimeout(o.B),o.B=null)}function _i(o){o.g=new Ir(o,o.j,"rpc",o.Z),null===o.o&&(o.g.H=o.s),o.g.N=0;var e=Ls(o.sa);Jr(e,"RID","rpc"),Jr(e,"SID",o.I),Jr(e,"CI",o.L?"0":"1"),Jr(e,"AID",o.T),Jr(e,"TYPE","xmlhttp"),Is(o,e),o.o&&o.s&&Io(e,o.o,o.s),o.J&&o.g.setTimeout(o.J);var t=o.g;o=o.ka,t.K=1,t.v=Cs(Ls(e)),t.s=null,t.P=!0,lo(t,o)}function Js(o){null!=o.v&&(ce.clearTimeout(o.v),o.v=null)}function Gl(o,e){var t=null;if(o.g==e){Js(o),fa(o),o.g=null;var l=2}else{if(!te(o.h,e))return;t=e.D,se(o.h,e),l=1}if(0!=o.G)if(o.pa=e.Y,e.i)if(1==l){t=e.s?e.s.length:0,e=Date.now()-e.F;var h=o.C;hn(l=ri(),new di(l,t,e,h)),bs(o)}else yl(o);else if(3==(h=e.o)||0==h&&0<o.pa||!(1==l&&function ha(o,e){return!(F(o.h)>=o.h.j-(o.m?1:0)||(o.m?(o.i=e.D.concat(o.i),0):1==o.G||2==o.G||o.C>=(o.Za?0:o.$a)||(o.m=kr(it(o.Ja,o,e),Lo(o,o.C)),o.C++,0)))}(o,e)||2==l&&Fo(o)))switch(t&&0<t.length&&(e=o.h,e.i=e.i.concat(t)),h){case 1:Xs(o,5);break;case 4:Xs(o,10);break;case 3:Xs(o,6);break;default:Xs(o,2)}}function Lo(o,e){let t=o.Xa+Math.floor(Math.random()*o.bb);return o.l||(t*=2),t*e}function Xs(o,e){if(o.j.info("Error code "+e),2==e){var t=null;o.l&&(t=null);var l=it(o.kb,o);t||(t=new zi("//www.google.com/images/cleardot.gif"),ce.location&&"http"==ce.location.protocol||ps(t,"https"),Cs(t)),function Qn(o,e){const t=new Ln;if(ce.Image){const l=new Image;l.onload=_t($n,t,l,"TestLoadImage: loaded",!0,e),l.onerror=_t($n,t,l,"TestLoadImage: error",!1,e),l.onabort=_t($n,t,l,"TestLoadImage: abort",!1,e),l.ontimeout=_t($n,t,l,"TestLoadImage: timeout",!1,e),ce.setTimeout(function(){l.ontimeout&&l.ontimeout()},1e4),l.src=o}else e(!1)}(t.toString(),l)}else mi(2);o.G=0,o.l&&o.l.va(e),pa(o),ts(o)}function pa(o){if(o.G=0,o.la=[],o.l){const e=Ie(o.h);(0!=e.length||0!=o.i.length)&&(Ce(o.la,e),Ce(o.la,o.i),o.h.i.length=0,lt(o.i),o.i.length=0),o.l.ua()}}function Pa(o,e,t){var l=t instanceof zi?Ls(t):new zi(t,void 0);if(""!=l.g)e&&(l.g=e+"."+l.g),co(l,l.m);else{var h=ce.location;l=h.protocol,e=e?e+"."+h.hostname:h.hostname,h=+h.port;var g=new zi(null,void 0);l&&ps(g,l),e&&(g.g=e),h&&co(g,h),t&&(g.l=t),l=g}return e=o.za,(t=o.D)&&e&&Jr(l,t,e),Jr(l,"VER",o.ma),Is(o,l),l}function Na(o,e,t){if(e&&!o.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new li(t&&o.Da&&!o.ra?new Qt({jb:!0}):o.ra)).Ka(o.H),e}function Oa(){}function Uo(){if(an&&!(10<=Number(xr)))throw Error("Environmental error: no available transport.")}function Rs(o,e){cn.call(this),this.g=new ii(e),this.l=o,this.h=e&&e.messageUrlParams||null,o=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.s=o,o=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(o?o["X-WebChannel-Content-Type"]=e.messageContentType:o={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(o?o["X-WebChannel-Client-Profile"]=e.ya:o={"X-WebChannel-Client-Profile":e.ya}),this.g.S=o,(o=e&&e.Yb)&&!ct(o)&&(this.g.o=o),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ct(e)&&(this.g.D=e,null!==(o=this.h)&&e in o&&e in(o=this.h)&&delete o[e]),this.j=new ho(this)}function ga(o){ln.call(this);var e=o.__sm__;if(e){e:{for(const t in e){o=t;break e}o=void 0}(this.i=o)&&(o=this.i,e=null!==e&&o in e?e[o]:void 0),this.data=e}else this.data=o}function ka(){Zn.call(this),this.status=1}function ho(o){this.g=o}(he=li.prototype).Ka=function(o){this.L=o},he.da=function(o,e,t,l){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+o);e=e?e.toUpperCase():"GET",this.H=o,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():wi.g(),this.C=function Qe(o){return o.h||(o.h=o.i())}(this.u?this.u:wi),this.g.onreadystatechange=it(this.Ha,this);try{this.F=!0,this.g.open(e,String(o),!0),this.F=!1}catch(g){return void q(this,g)}if(o=t||"",t=new Map(this.headers),l)if(Object.getPrototypeOf(l)===Object.prototype)for(var h in l)t.set(h,l[h]);else{if("function"!=typeof l.keys||"function"!=typeof l.get)throw Error("Unknown input type for opt_headers: "+String(l));for(const g of l.keys())t.set(g,l.get(g))}l=Array.from(t.keys()).find(g=>"content-type"==g.toLowerCase()),h=ce.FormData&&o instanceof ce.FormData,!(0<=bt(U,e))||l||h||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[g,w]of t)this.g.setRequestHeader(g,w);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ti(this),0<this.B&&((this.K=function N(o){return an&&function Ur(){return function St(o){var e=qr;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=o(9)}(function(){let o=0;const e=wt(String(_e)).split("."),t=wt("9").split("."),l=Math.max(e.length,t.length);for(let w=0;0==o&&w<l;w++){var h=e[w]||"",g=t[w]||"";do{if(h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],0==h[0].length&&0==g[0].length)break;o=et(0==h[1].length?0:parseInt(h[1],10),0==g[1].length?0:parseInt(g[1],10))||et(0==h[2].length,0==g[2].length)||et(h[2],g[2]),h=h[3],g=g[3]}while(0==o)}return 0<=o})}()&&"number"==typeof o.timeout&&void 0!==o.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=it(this.qa,this)):this.A=xt(this.qa,this.B,this)),this.v=!0,this.g.send(o),this.v=!1}catch(g){q(this,g)}},he.qa=function(){void 0!==Pe&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hn(this,"timeout"),this.abort(8))},he.abort=function(o){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=o||7,hn(this,"complete"),hn(this,"abort"),sr(this))},he.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),sr(this,!0)),li.X.M.call(this)},he.Ha=function(){this.s||(this.F||this.v||this.l?In(this):this.fb())},he.fb=function(){In(this)},he.aa=function(){try{return 2<gi(this)?this.g.status:-1}catch(o){return-1}},he.fa=function(){try{return this.g?this.g.responseText:""}catch(o){return""}},he.Sa=function(o){if(this.g){var e=this.g.responseText;return o&&0==e.indexOf(o)&&(e=e.substring(o.length)),Xr(e)}},he.Ea=function(){return this.m},he.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(he=ii.prototype).ma=8,he.G=1,he.Ja=function(o){if(this.m)if(this.m=null,1==this.G){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const h=new Ir(this,this.j,o,void 0);let g=this.s;if(this.S&&(g?(g=Mr(g),sn(g,this.S)):g=this.S),null!==this.o||this.N||(h.H=g,g=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var l=this.i[t];if(void 0===(l="__data__"in l.g&&"string"==typeof(l=l.g.__data__)?l.length:void 0))break;if(4096<(e+=l)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=pr(this,h,e),Jr(t=Ls(this.F),"RID",o),Jr(t,"CVER",22),this.D&&Jr(t,"X-HTTP-Session-Id",this.D),Is(this,t),g&&(this.N?e="headers="+encodeURIComponent(String(Ms(g)))+"&"+e:this.o&&Io(t,this.o,g)),V(this.h,h),this.Ya&&Jr(t,"TYPE","init"),this.O?(Jr(t,"$req",e),Jr(t,"SID","null"),h.Z=!0,Ui(h,t,null)):Ui(h,t,e),this.G=2}}else 3==this.G&&(o?cs(this,o):0==this.i.length||An(this.h)||cs(this))},he.Ia=function(){if(this.u=null,_i(this),this.$&&!(this.K||null==this.g||0>=this.P)){var o=2*this.P;this.j.info("BP detection timer enabled: "+o),this.B=kr(it(this.eb,this),o)}},he.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,mi(10),Yo(this),_i(this))},he.cb=function(){null!=this.v&&(this.v=null,Yo(this),Fo(this),mi(19))},he.kb=function(o){o?(this.j.info("Successfully pinged google.com"),mi(2)):(this.j.info("Failed to ping google.com"),mi(1))},(he=Oa.prototype).xa=function(){},he.wa=function(){},he.va=function(){},he.ua=function(){},he.Ra=function(){},Uo.prototype.g=function(o,e){return new Rs(o,e)},We(Rs,cn),Rs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var o=this.g,e=this.l,t=this.h||void 0;mi(0),o.V=e,o.ia=t||{},o.L=o.Y,o.F=Pa(o,null,o.V),bs(o)},Rs.prototype.close=function(){Ko(this.g)},Rs.prototype.u=function(o){var e=this.g;if("string"==typeof o){var t={};t.__data__=o,o=t}else this.v&&((t={}).__data__=Se(o),o=t);e.i.push(new class{constructor(o,e){this.h=o,this.g=e}}(e.ab++,o)),3==e.G&&bs(e)},Rs.prototype.M=function(){this.g.l=null,delete this.j,Ko(this.g),delete this.g,Rs.X.M.call(this)},We(ga,ln),We(ka,Zn),We(ho,Oa),ho.prototype.xa=function(){hn(this.g,"a")},ho.prototype.wa=function(o){hn(this.g,new ga(o))},ho.prototype.va=function(o){hn(this.g,new ka(o))},ho.prototype.ua=function(){hn(this.g,"b")},Uo.prototype.createWebChannel=Uo.prototype.g,Rs.prototype.send=Rs.prototype.u,Rs.prototype.open=Rs.prototype.m,Rs.prototype.close=Rs.prototype.close,Mi.NO_ERROR=0,Mi.TIMEOUT=8,Mi.HTTP_ERROR=6,ze.COMPLETE="complete",It.EventType=Wt,Wt.OPEN="a",Wt.CLOSE="b",Wt.ERROR="c",Wt.MESSAGE="d",cn.prototype.listen=cn.prototype.N,li.prototype.listenOnce=li.prototype.O,li.prototype.getLastError=li.prototype.Oa,li.prototype.getLastErrorCode=li.prototype.Ea,li.prototype.getStatus=li.prototype.aa,li.prototype.getResponseJson=li.prototype.Sa,li.prototype.getResponseText=li.prototype.fa,li.prototype.send=li.prototype.da,li.prototype.setWithCredentials=li.prototype.Ka;var ns=Ve.createWebChannelTransport=function(){return new Uo},fo=Ve.getStatEventTarget=function(){return ri()},yi=Ve.ErrorCode=Mi,Fa=Ve.EventType=ze,Ec=Ve.Event=Bn,La=Ve.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},wc=Ve.FetchXmlHttpFactory=Qt,ma=Ve.WebChannel=It,id=Ve.XhrIo=li;const _a="@firebase/firestore";class Bi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bi.UNAUTHENTICATED=new Bi(null),Bi.GOOGLE_CREDENTIALS=new Bi("google-credentials-uid"),Bi.FIRST_PARTY=new Bi("first-party-uid"),Bi.MOCK_USER=new Bi("mock-user");let Ws="9.12.1";const Vo=new ye.Yd("@firebase/firestore");function Qo(){return Vo.logLevel}function Us(o){Vo.setLogLevel(o)}function $t(o,...e){if(Vo.logLevel<=ye.in.DEBUG){const t=e.map(Jo);Vo.debug(`Firestore (${Ws}): ${o}`,...t)}}function gr(o,...e){if(Vo.logLevel<=ye.in.ERROR){const t=e.map(Jo);Vo.error(`Firestore (${Ws}): ${o}`,...t)}}function eo(o,...e){if(Vo.logLevel<=ye.in.WARN){const t=e.map(Jo);Vo.warn(`Firestore (${Ws}): ${o}`,...t)}}function Jo(o){if("string"==typeof o)return o;try{return JSON.stringify(o)}catch(t){return o}}function pn(o="Unexpected state"){const e=`FIRESTORE (${Ws}) INTERNAL ASSERTION FAILED: `+o;throw gr(e),new Error(e)}function er(o,e){o||pn()}function Ua(o,e){o||pn()}function mn(o,e){return o}const mt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Gt extends Te.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class vl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ju{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Bi.UNAUTHENTICATED))}shutdown(){}}class si{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class El{constructor(e){this.t=e,this.currentUser=Bi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var l=this;let h=this.i;const g=Q=>this.i!==h?(h=this.i,t(Q)):Promise.resolve();let w=new Gi;this.o=()=>{this.i++,this.currentUser=this.u(),w.resolve(),w=new Gi,e.enqueueRetryable(()=>g(this.currentUser))};const R=()=>{const Q=w;e.enqueueRetryable((0,_.Z)(function*(){yield Q.promise,yield g(l.currentUser)}))},H=Q=>{$t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=Q,this.auth.addAuthTokenListener(this.o),R()};this.t.onInit(Q=>H(Q)),setTimeout(()=>{if(!this.auth){const Q=this.t.getImmediate({optional:!0});Q?H(Q):($t("FirebaseAuthCredentialsProvider","Auth not yet detected"),w.resolve(),w=new Gi)}},0),R()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(l=>this.i!==e?($t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):l?(er("string"==typeof l.accessToken),new vl(l.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return er(null===e||"string"==typeof e),new Bi(e)}}class mu{constructor(e,t,l,h){this.h=e,this.l=t,this.m=l,this.g=h,this.type="FirstParty",this.user=Bi.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(er(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class ya{constructor(e,t,l,h){this.h=e,this.l=t,this.m=l,this.g=h}getToken(){return Promise.resolve(new mu(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Bi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Xo{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const l=g=>{null!=g.error&&$t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${g.error.message}`);const w=g.token!==this.A;return this.A=g.token,$t("FirebaseAppCheckTokenProvider",`Received ${w?"new":"existing"} token.`),w?t(g.token):Promise.resolve()};this.o=g=>{e.enqueueRetryable(()=>l(g))};const h=g=>{$t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=g,this.appCheck.addTokenListener(this.o)};this.T.onInit(g=>h(g)),setTimeout(()=>{if(!this.appCheck){const g=this.T.getImmediate({optional:!0});g?h(g):$t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(er("string"==typeof t.token),this.A=t.token,new tl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Bo(o){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(o);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let l=0;l<o;l++)t[l]=Math.floor(256*Math.random());return t}class va{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let l="";for(;l.length<20;){const h=Bo(40);for(let g=0;g<h.length;++g)l.length<20&&h[g]<t&&(l+=e.charAt(h[g]%e.length))}return l}}function mr(o,e){return o<e?-1:o>e?1:0}function jo(o,e,t){return o.length===e.length&&o.every((l,h)=>t(l,e[h]))}function Gs(o){return o+"\0"}class vi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Gt(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Gt(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Gt(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Gt(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vi.fromMillis(Date.now())}static fromDate(e){return vi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),l=Math.floor(1e6*(e-1e3*t));return new vi(t,l)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?mr(this.nanoseconds,e.nanoseconds):mr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class nr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new nr(e)}static min(){return new nr(new vi(0,0))}static max(){return new nr(new vi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class $o{constructor(e,t,l){void 0===t?t=0:t>e.length&&pn(),void 0===l?l=e.length-t:l>e.length-t&&pn(),this.segments=e,this.offset=t,this.len=l}get length(){return this.len}isEqual(e){return 0===$o.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $o?e.forEach(l=>{t.push(l)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,l=this.limit();t<l;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const l=Math.min(e.length,t.length);for(let h=0;h<l;h++){const g=e.get(h),w=t.get(h);if(g<w)return-1;if(g>w)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Tr extends $o{construct(e,t,l){return new Tr(e,t,l)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const l of e){if(l.indexOf("//")>=0)throw new Gt(mt.INVALID_ARGUMENT,`Invalid segment (${l}). Paths must not contain // in them.`);t.push(...l.split("/").filter(h=>h.length>0))}return new Tr(t)}static emptyPath(){return new Tr([])}}const wl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hi extends $o{construct(e,t,l){return new hi(e,t,l)}static isValidIdentifier(e){return wl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new hi(["__name__"])}static fromServerFormat(e){const t=[];let l="",h=0;const g=()=>{if(0===l.length)throw new Gt(mt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(l),l=""};let w=!1;for(;h<e.length;){const R=e[h];if("\\"===R){if(h+1===e.length)throw new Gt(mt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const H=e[h+1];if("\\"!==H&&"."!==H&&"`"!==H)throw new Gt(mt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);l+=H,h+=2}else"`"===R?(w=!w,h++):"."!==R||w?(l+=R,h++):(g(),h++)}if(g(),w)throw new Gt(mt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hi(t)}static emptyPath(){return new hi([])}}class x{constructor(e){this.path=e}static fromPath(e){return new x(Tr.fromString(e))}static fromName(e){return new x(Tr.fromString(e).popFirst(5))}static empty(){return new x(Tr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Tr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Tr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new x(new Tr(e.slice()))}}class A{constructor(e,t,l,h){this.indexId=e,this.collectionGroup=t,this.fields=l,this.indexState=h}}function T(o){return o.fields.find(e=>2===e.kind)}function k(o){return o.fields.filter(e=>2!==e.kind)}A.UNKNOWN_ID=-1;class oe{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ne{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ne(0,rr.min())}}function Et(o,e){const t=o.toTimestamp().seconds,l=o.toTimestamp().nanoseconds+1,h=nr.fromTimestamp(1e9===l?new vi(t+1,0):new vi(t,l));return new rr(h,x.empty(),e)}function bn(o){return new rr(o.readTime,o.key,-1)}class rr{constructor(e,t,l){this.readTime=e,this.documentKey=t,this.largestBatchId=l}static min(){return new rr(nr.min(),x.empty(),-1)}static max(){return new rr(nr.max(),x.empty(),-1)}}function Fn(o,e){let t=o.readTime.compareTo(e.readTime);return 0!==t?t:(t=x.comparator(o.documentKey,e.documentKey),0!==t?t:mr(o.largestBatchId,e.largestBatchId))}const Vr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Br{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ts(o){return ei.apply(this,arguments)}function ei(){return ei=(0,_.Z)(function*(o){if(o.code!==mt.FAILED_PRECONDITION||o.message!==Vr)throw o;$t("LocalStore","Unexpectedly lost primary lease")}),ei.apply(this,arguments)}class nt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new nt((l,h)=>{this.nextCallback=g=>{this.wrapSuccess(e,g).next(l,h)},this.catchCallback=g=>{this.wrapFailure(t,g).next(l,h)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof nt?t:nt.resolve(t)}catch(t){return nt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):nt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):nt.reject(t)}static resolve(e){return new nt((t,l)=>{t(e)})}static reject(e){return new nt((t,l)=>{l(e)})}static waitFor(e){return new nt((t,l)=>{let h=0,g=0,w=!1;e.forEach(R=>{++h,R.next(()=>{++g,w&&g===h&&t()},H=>l(H))}),w=!0,g===h&&t()})}static or(e){let t=nt.resolve(!1);for(const l of e)t=t.next(h=>h?nt.resolve(h):l());return t}static forEach(e,t){const l=[];return e.forEach((h,g)=>{l.push(t.call(this,h,g))}),this.waitFor(l)}static mapArray(e,t){return new nt((l,h)=>{const g=e.length,w=new Array(g);let R=0;for(let H=0;H<g;H++){const Q=H;t(e[Q]).next(de=>{w[Q]=de,++R,R===g&&l(w)},de=>h(de))}})}static doWhile(e,t){return new nt((l,h)=>{const g=()=>{!0===e()?t().next(()=>{g()},h):l()};g()})}}class ds{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Gi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new to(e,t.error)):this.P.resolve()},this.transaction.onerror=l=>{const h=$u(l.target.error);this.P.reject(new to(e,h))}}static open(e,t,l,h){try{return new ds(t,e.transaction(h,l))}catch(g){throw new to(t,g)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||($t("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ba(t)}}class rs{constructor(e,t,l){this.name=e,this.version=t,this.S=l,12.2===rs.D((0,Te.z$)())&&gr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $t("SimpleDb","Removing database:",e),Ea(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Te.hl)())return!1;if(rs.N())return!0;const e=(0,Te.z$)(),t=rs.D(e),l=0<t&&t<10,h=rs.k(e),g=0<h&&h<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||l||g)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),l=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(l)}static k(e){const t=e.match(/Android ([\d.]+)/i),l=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(l)}F(e){var t=this;return(0,_.Z)(function*(){return t.db||($t("SimpleDb","Opening database:",t.name),t.db=yield new Promise((l,h)=>{const g=indexedDB.open(t.name,t.version);g.onsuccess=w=>{l(w.target.result)},g.onblocked=()=>{h(new to(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},g.onerror=w=>{const R=w.target.error;h("VersionError"===R.name?new Gt(mt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===R.name?new Gt(mt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+R):new to(e,R))},g.onupgradeneeded=w=>{$t("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',w.oldVersion),t.S.$(w.target.result,g.transaction,w.oldVersion,t.version).next(()=>{$t("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=l=>t.B(l)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,l,h){var g=this;return(0,_.Z)(function*(){const w="readonly"===t;let R=0;for(;;){++R;try{g.db=yield g.F(e);const H=ds.open(g.db,e,w?"readonly":"readwrite",l),Q=h(H).next(de=>(H.V(),de)).catch(de=>(H.abort(de),nt.reject(de))).toPromise();return Q.catch(()=>{}),yield H.v,Q}catch(H){const Q=H,de="FirebaseError"!==Q.name&&R<3;if($t("SimpleDb","Transaction failed with error:",Q.message,"Retrying:",de),g.close(),!de)return Promise.reject(Q)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Vs{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Ea(this.U.delete())}}class to extends Gt{constructor(e,t){super(mt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function zs(o){return"IndexedDbTransactionError"===o.name}class Ba{constructor(e){this.store=e}put(e,t){let l;return void 0!==t?($t("SimpleDb","PUT",this.store.name,e,t),l=this.store.put(t,e)):($t("SimpleDb","PUT",this.store.name,"<auto-key>",e),l=this.store.put(e)),Ea(l)}add(e){return $t("SimpleDb","ADD",this.store.name,e,e),Ea(this.store.add(e))}get(e){return Ea(this.store.get(e)).next(t=>(void 0===t&&(t=null),$t("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return $t("SimpleDb","DELETE",this.store.name,e),Ea(this.store.delete(e))}count(){return $t("SimpleDb","COUNT",this.store.name),Ea(this.store.count())}W(e,t){const l=this.options(e,t);if(l.index||"function"!=typeof this.store.getAll){const h=this.cursor(l),g=[];return this.H(h,(w,R)=>{g.push(R)}).next(()=>g)}{const h=this.store.getAll(l.range);return new nt((g,w)=>{h.onerror=R=>{w(R.target.error)},h.onsuccess=R=>{g(R.target.result)}})}}J(e,t){const l=this.store.getAll(e,null===t?void 0:t);return new nt((h,g)=>{l.onerror=w=>{g(w.target.error)},l.onsuccess=w=>{h(w.target.result)}})}Y(e,t){$t("SimpleDb","DELETE ALL",this.store.name);const l=this.options(e,t);l.X=!1;const h=this.cursor(l);return this.H(h,(g,w,R)=>R.delete())}Z(e,t){let l;t?l=e:(l={},t=e);const h=this.cursor(l);return this.H(h,t)}tt(e){const t=this.cursor({});return new nt((l,h)=>{t.onerror=g=>{const w=$u(g.target.error);h(w)},t.onsuccess=g=>{const w=g.target.result;w?e(w.primaryKey,w.value).next(R=>{R?w.continue():l()}):l()}})}H(e,t){const l=[];return new nt((h,g)=>{e.onerror=w=>{g(w.target.error)},e.onsuccess=w=>{const R=w.target.result;if(!R)return void h();const H=new Vs(R),Q=t(R.primaryKey,R.value,H);if(Q instanceof nt){const de=Q.catch(Re=>(H.done(),nt.reject(Re)));l.push(de)}H.isDone?h():null===H.G?R.continue():R.continue(H.G)}}).next(()=>nt.waitFor(l))}options(e,t){let l;return void 0!==e&&("string"==typeof e?l=e:t=e),{index:l,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const l=this.store.index(e.index);return e.X?l.openKeyCursor(e.range,t):l.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ea(o){return new nt((e,t)=>{o.onsuccess=l=>{e(l.target.result)},o.onerror=l=>{const h=$u(l.target.error);t(h)}})}let ji=!1;function $u(o){const e=rs.D((0,Te.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(o.message.indexOf(t)>=0){const l=new Gt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ji||(ji=!0,setTimeout(()=>{throw l},0)),l}}return o}class Hu{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;$t("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_.Z)(function*(){t.task=null;try{$t("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(l){zs(l)?$t("IndexBackiller","Ignoring IndexedDB error during index backfill: ",l):yield Ts(l)}yield t.nt(6e4)}))}}class sd{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,_.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",l=>t.it(l,e))})()}it(e,t){const l=new Set;let h=t,g=!0;return nt.doWhile(()=>!0===g&&h>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(w=>{if(null!==w&&!l.has(w))return $t("IndexBackiller",`Processing collection: ${w}`),this.rt(e,w,h).next(R=>{h-=R,l.add(w)});g=!1})).next(()=>t-h)}rt(e,t,l){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(h=>this.localStore.localDocuments.getNextDocuments(e,t,h,l).next(g=>{const w=g.changes;return this.localStore.indexManager.updateIndexEntries(e,w).next(()=>this.ot(h,g)).next(R=>($t("IndexBackiller",`Updating offset: ${R}`),this.localStore.indexManager.updateCollectionGroup(e,t,R))).next(()=>w.size)}))}ot(e,t){let l=e;return t.changes.forEach((h,g)=>{const w=bn(g);Fn(w,l)>0&&(l=w)}),new rr(l.readTime,l.documentKey,Math.max(t.batchId,e.largestBatchId))}}class To{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=l=>this.ut(l),this.ct=l=>t.writeSequenceNumber(l))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Cc(o){let e=0;for(const t in o)Object.prototype.hasOwnProperty.call(o,t)&&e++;return e}function ja(o,e){for(const t in o)Object.prototype.hasOwnProperty.call(o,t)&&e(t,o[t])}function _u(o){for(const e in o)if(Object.prototype.hasOwnProperty.call(o,e))return!1;return!0}To.at=-1;class Ni{constructor(e,t){this.comparator=e,this.root=t||Yr.EMPTY}insert(e,t){return new Ni(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yr.BLACK,null,null))}remove(e){return new Ni(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const l=this.comparator(e,t.key);if(0===l)return t.value;l<0?t=t.left:l>0&&(t=t.right)}return null}indexOf(e){let t=0,l=this.root;for(;!l.isEmpty();){const h=this.comparator(e,l.key);if(0===h)return t+l.left.size;h<0?l=l.left:(t+=l.left.size+1,l=l.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,l)=>(e(t,l),!1))}toString(){const e=[];return this.inorderTraversal((t,l)=>(e.push(`${t}:${l}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yu(this.root,e,this.comparator,!1)}getReverseIterator(){return new yu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yu(this.root,e,this.comparator,!0)}}class yu{constructor(e,t,l,h){this.isReverse=h,this.nodeStack=[];let g=1;for(;!e.isEmpty();)if(g=t?l(e.key,t):1,t&&h&&(g*=-1),g<0)e=this.isReverse?e.left:e.right;else{if(0===g){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yr{constructor(e,t,l,h,g){this.key=e,this.value=t,this.color=null!=l?l:Yr.RED,this.left=null!=h?h:Yr.EMPTY,this.right=null!=g?g:Yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,l,h,g){return new Yr(null!=e?e:this.key,null!=t?t:this.value,null!=l?l:this.color,null!=h?h:this.left,null!=g?g:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,l){let h=this;const g=l(e,h.key);return h=g<0?h.copy(null,null,null,h.left.insert(e,t,l),null):0===g?h.copy(null,t,null,null,null):h.copy(null,null,null,null,h.right.insert(e,t,l)),h.fixUp()}removeMin(){if(this.left.isEmpty())return Yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let l,h=this;if(t(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,t),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),0===t(e,h.key)){if(h.right.isEmpty())return Yr.EMPTY;l=h.right.min(),h=h.copy(l.key,l.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,t))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pn();const e=this.left.check();if(e!==this.right.check())throw pn();return e+(this.isRed()?0:1)}}Yr.EMPTY=null,Yr.RED=!0,Yr.BLACK=!1,Yr.EMPTY=new class{constructor(){this.size=0}get key(){throw pn()}get value(){throw pn()}get color(){throw pn()}get left(){throw pn()}get right(){throw pn()}copy(o,e,t,l,h){return this}insert(o,e,t){return new Yr(o,e)}remove(o,e){return this}isEmpty(){return!0}inorderTraversal(o){return!1}reverseTraversal(o){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ci{constructor(e){this.comparator=e,this.data=new Ni(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,l)=>(e(t),!1))}forEachInRange(e,t){const l=this.data.getIteratorFrom(e[0]);for(;l.hasNext();){const h=l.getNext();if(this.comparator(h.key,e[1])>=0)return;t(h.key)}}forEachWhile(e,t){let l;for(l=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();l.hasNext();)if(!e(l.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nl(this.data.getIterator())}getIteratorFrom(e){return new nl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(l=>{t=t.add(l)}),t}isEqual(e){if(!(e instanceof Ci)||this.size!==e.size)return!1;const t=this.data.getIterator(),l=e.data.getIterator();for(;t.hasNext();){const h=t.getNext().key,g=l.getNext().key;if(0!==this.comparator(h,g))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ci(this.comparator);return t.data=e,t}}class nl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Wu(o){return o.hasNext()?o.getNext():void 0}class qs{constructor(e){this.fields=e,e.sort(hi.comparator)}static empty(){return new qs([])}unionWith(e){let t=new Ci(hi.comparator);for(const l of this.fields)t=t.add(l);for(const l of e)t=t.add(l);return new qs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,(t,l)=>t.isEqual(l))}}function Do(){return"undefined"!=typeof atob}class Di{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Di(t)}static fromUint8Array(e){const t=function(l){let h="";for(let g=0;g<l.length;++g)h+=String.fromCharCode(l[g]);return h}(e);return new Di(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let l=0;l<e.length;l++)t[l]=e.charCodeAt(l);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Di.EMPTY_BYTE_STRING=new Di("");const bc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function no(o){if(er(!!o),"string"==typeof o){let e=0;const t=bc.exec(o);if(er(!!t),t[1]){let h=t[1];h=(h+"000000000").substr(0,9),e=Number(h)}const l=new Date(o);return{seconds:Math.floor(l.getTime()/1e3),nanos:e}}return{seconds:$i(o.seconds),nanos:$i(o.nanos)}}function $i(o){return"number"==typeof o?o:"string"==typeof o?Number(o):0}function $a(o){return"string"==typeof o?Di.fromBase64String(o):Di.fromUint8Array(o)}function Gu(o){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==o?void 0:o.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Wd(o){const e=o.mapValue.fields.__previous_value__;return Gu(e)?Wd(e):e}function vu(o){const e=no(o.mapValue.fields.__local_write_time__.timestampValue);return new vi(e.seconds,e.nanos)}class Cl{constructor(e,t,l,h,g,w,R,H){this.databaseId=e,this.appId=t,this.persistenceKey=l,this.host=h,this.ssl=g,this.forceLongPolling=w,this.autoDetectLongPolling=R,this.useFetchStreams=H}}class ea{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ea("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ea&&e.projectId===this.projectId&&e.database===this.database}}function gs(o){return null==o}function rl(o){return 0===o&&1/o==-1/0}function wa(o){return"number"==typeof o&&Number.isInteger(o)&&!rl(o)&&o<=Number.MAX_SAFE_INTEGER&&o>=Number.MIN_SAFE_INTEGER}const ta={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bl={nullValue:"NULL_VALUE"};function Ha(o){return"nullValue"in o?0:"booleanValue"in o?1:"integerValue"in o||"doubleValue"in o?2:"timestampValue"in o?3:"stringValue"in o?5:"bytesValue"in o?6:"referenceValue"in o?7:"geoPointValue"in o?8:"arrayValue"in o?9:"mapValue"in o?Gu(o)?4:ia(o)?9007199254740991:10:pn()}function Ho(o,e){if(o===e)return!0;const t=Ha(o);if(t!==Ha(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return o.booleanValue===e.booleanValue;case 4:return vu(o).isEqual(vu(e));case 3:return function(l,h){if("string"==typeof l.timestampValue&&"string"==typeof h.timestampValue&&l.timestampValue.length===h.timestampValue.length)return l.timestampValue===h.timestampValue;const g=no(l.timestampValue),w=no(h.timestampValue);return g.seconds===w.seconds&&g.nanos===w.nanos}(o,e);case 5:return o.stringValue===e.stringValue;case 6:return h=e,$a(o.bytesValue).isEqual($a(h.bytesValue));case 7:return o.referenceValue===e.referenceValue;case 8:return function(l,h){return $i(l.geoPointValue.latitude)===$i(h.geoPointValue.latitude)&&$i(l.geoPointValue.longitude)===$i(h.geoPointValue.longitude)}(o,e);case 2:return function(l,h){if("integerValue"in l&&"integerValue"in h)return $i(l.integerValue)===$i(h.integerValue);if("doubleValue"in l&&"doubleValue"in h){const g=$i(l.doubleValue),w=$i(h.doubleValue);return g===w?rl(g)===rl(w):isNaN(g)&&isNaN(w)}return!1}(o,e);case 9:return jo(o.arrayValue.values||[],e.arrayValue.values||[],Ho);case 10:return function(l,h){const g=l.mapValue.fields||{},w=h.mapValue.fields||{};if(Cc(g)!==Cc(w))return!1;for(const R in g)if(g.hasOwnProperty(R)&&(void 0===w[R]||!Ho(g[R],w[R])))return!1;return!0}(o,e);default:return pn()}var h}function Il(o,e){return void 0!==(o.values||[]).find(t=>Ho(t,e))}function na(o,e){if(o===e)return 0;const t=Ha(o),l=Ha(e);if(t!==l)return mr(t,l);switch(t){case 0:case 9007199254740991:return 0;case 1:return mr(o.booleanValue,e.booleanValue);case 2:return function(h,g){const w=$i(h.integerValue||h.doubleValue),R=$i(g.integerValue||g.doubleValue);return w<R?-1:w>R?1:w===R?0:isNaN(w)?isNaN(R)?0:-1:1}(o,e);case 3:return zu(o.timestampValue,e.timestampValue);case 4:return zu(vu(o),vu(e));case 5:return mr(o.stringValue,e.stringValue);case 6:return function(h,g){const w=$a(h),R=$a(g);return w.compareTo(R)}(o.bytesValue,e.bytesValue);case 7:return function(h,g){const w=h.split("/"),R=g.split("/");for(let H=0;H<w.length&&H<R.length;H++){const Q=mr(w[H],R[H]);if(0!==Q)return Q}return mr(w.length,R.length)}(o.referenceValue,e.referenceValue);case 8:return function(h,g){const w=mr($i(h.latitude),$i(g.latitude));return 0!==w?w:mr($i(h.longitude),$i(g.longitude))}(o.geoPointValue,e.geoPointValue);case 9:return function(h,g){const w=h.values||[],R=g.values||[];for(let H=0;H<w.length&&H<R.length;++H){const Q=na(w[H],R[H]);if(Q)return Q}return mr(w.length,R.length)}(o.arrayValue,e.arrayValue);case 10:return function(h,g){if(h===ta.mapValue&&g===ta.mapValue)return 0;if(h===ta.mapValue)return 1;if(g===ta.mapValue)return-1;const w=h.fields||{},R=Object.keys(w),H=g.fields||{},Q=Object.keys(H);R.sort(),Q.sort();for(let de=0;de<R.length&&de<Q.length;++de){const Re=mr(R[de],Q[de]);if(0!==Re)return Re;const ft=na(w[R[de]],H[Q[de]]);if(0!==ft)return ft}return mr(R.length,Q.length)}(o.mapValue,e.mapValue);default:throw pn()}}function zu(o,e){if("string"==typeof o&&"string"==typeof e&&o.length===e.length)return mr(o,e);const t=no(o),l=no(e),h=mr(t.seconds,l.seconds);return 0!==h?h:mr(t.nanos,l.nanos)}function zl(o){return Eu(o)}function Eu(o){return"nullValue"in o?"null":"booleanValue"in o?""+o.booleanValue:"integerValue"in o?""+o.integerValue:"doubleValue"in o?""+o.doubleValue:"timestampValue"in o?function(l){const h=no(l);return`time(${h.seconds},${h.nanos})`}(o.timestampValue):"stringValue"in o?o.stringValue:"bytesValue"in o?$a(o.bytesValue).toBase64():"referenceValue"in o?x.fromName(o.referenceValue).toString():"geoPointValue"in o?`geo(${(e=o.geoPointValue).latitude},${e.longitude})`:"arrayValue"in o?function(l){let h="[",g=!0;for(const w of l.values||[])g?g=!1:h+=",",h+=Eu(w);return h+"]"}(o.arrayValue):"mapValue"in o?function(l){const h=Object.keys(l.fields||{}).sort();let g="{",w=!0;for(const R of h)w?w=!1:g+=",",g+=`${R}:${Eu(l.fields[R])}`;return g+"}"}(o.mapValue):pn();var e}function ra(o,e){return{referenceValue:`projects/${o.projectId}/databases/${o.database}/documents/${e.path.canonicalString()}`}}function Ic(o){return!!o&&"integerValue"in o}function Wo(o){return!!o&&"arrayValue"in o}function Wa(o){return!!o&&"nullValue"in o}function Ga(o){return!!o&&"doubleValue"in o&&isNaN(Number(o.doubleValue))}function Tl(o){return!!o&&"mapValue"in o}function il(o){if(o.geoPointValue)return{geoPointValue:Object.assign({},o.geoPointValue)};if(o.timestampValue&&"object"==typeof o.timestampValue)return{timestampValue:Object.assign({},o.timestampValue)};if(o.mapValue){const e={mapValue:{fields:{}}};return ja(o.mapValue.fields,(t,l)=>e.mapValue.fields[t]=il(l)),e}if(o.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(o.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=il(o.arrayValue.values[t]);return e}return Object.assign({},o)}function ia(o){return"__max__"===(((o.mapValue||{}).fields||{}).__type__||{}).stringValue}function qu(o){return"nullValue"in o?bl:"booleanValue"in o?{booleanValue:!1}:"integerValue"in o||"doubleValue"in o?{doubleValue:NaN}:"timestampValue"in o?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in o?{stringValue:""}:"bytesValue"in o?{bytesValue:""}:"referenceValue"in o?ra(ea.empty(),x.empty()):"geoPointValue"in o?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in o?{arrayValue:{}}:"mapValue"in o?{mapValue:{}}:pn()}function Dl(o){return"nullValue"in o?{booleanValue:!1}:"booleanValue"in o?{doubleValue:NaN}:"integerValue"in o||"doubleValue"in o?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in o?{stringValue:""}:"stringValue"in o?{bytesValue:""}:"bytesValue"in o?ra(ea.empty(),x.empty()):"referenceValue"in o?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in o?{arrayValue:{}}:"arrayValue"in o?{mapValue:{}}:"mapValue"in o?ta:pn()}function Ca(o,e){const t=na(o.value,e.value);return 0!==t?t:o.inclusive&&!e.inclusive?-1:!o.inclusive&&e.inclusive?1:0}function Tc(o,e){const t=na(o.value,e.value);return 0!==t?t:o.inclusive&&!e.inclusive?1:!o.inclusive&&e.inclusive?-1:0}class qi{constructor(e){this.value=e}static empty(){return new qi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let l=0;l<e.length-1;++l)if(t=(t.mapValue.fields||{})[e.get(l)],!Tl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=il(t)}setAll(e){let t=hi.emptyPath(),l={},h=[];e.forEach((w,R)=>{if(!t.isImmediateParentOf(R)){const H=this.getFieldsMap(t);this.applyChanges(H,l,h),l={},h=[],t=R.popLast()}w?l[R.lastSegment()]=il(w):h.push(R.lastSegment())});const g=this.getFieldsMap(t);this.applyChanges(g,l,h)}delete(e){const t=this.field(e.popLast());Tl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ho(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let l=0;l<e.length;++l){let h=t.mapValue.fields[e.get(l)];Tl(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},t.mapValue.fields[e.get(l)]=h),t=h}return t.mapValue.fields}applyChanges(e,t,l){ja(t,(h,g)=>e[h]=g);for(const h of l)delete e[h]}clone(){return new qi(il(this.value))}}function ms(o){const e=[];return ja(o.fields,(t,l)=>{const h=new hi([t]);if(Tl(l)){const g=ms(l.mapValue).fields;if(0===g.length)e.push(h);else for(const w of g)e.push(h.child(w))}else e.push(h)}),new qs(e)}class Ai{constructor(e,t,l,h,g,w){this.key=e,this.documentType=t,this.version=l,this.readTime=h,this.data=g,this.documentState=w}static newInvalidDocument(e){return new Ai(e,0,nr.min(),nr.min(),qi.empty(),0)}static newFoundDocument(e,t,l){return new Ai(e,1,t,nr.min(),l,0)}static newNoDocument(e,t){return new Ai(e,2,t,nr.min(),qi.empty(),0)}static newUnknownDocument(e,t){return new Ai(e,3,t,nr.min(),qi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ai&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ai(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Al{constructor(e,t=null,l=[],h=[],g=null,w=null,R=null){this.path=e,this.collectionGroup=t,this.orderBy=l,this.filters=h,this.limit=g,this.startAt=w,this.endAt=R,this.ht=null}}function O(o,e=null,t=[],l=[],h=null,g=null,w=null){return new Al(o,e,t,l,h,g,w)}function B(o){const e=mn(o);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(l=>{return(h=l).field.canonicalString()+h.op.toString()+zl(h.value);var h}).join(","),t+="|ob:",t+=e.orderBy.map(l=>{return(h=l).field.canonicalString()+h.dir;var h}).join(","),gs(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(l=>zl(l)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(l=>zl(l)).join(",")),e.ht=t}return e.ht}function ve(o,e){if(o.limit!==e.limit||o.orderBy.length!==e.orderBy.length)return!1;for(let h=0;h<o.orderBy.length;h++)if(!xl(o.orderBy[h],e.orderBy[h]))return!1;if(o.filters.length!==e.filters.length)return!1;for(let h=0;h<o.filters.length;h++)if((t=o.filters[h]).op!==(l=e.filters[h]).op||!t.field.isEqual(l.field)||!Ho(t.value,l.value))return!1;var t,l;return o.collectionGroup===e.collectionGroup&&!!o.path.isEqual(e.path)&&!!ol(o.startAt,e.startAt)&&ol(o.endAt,e.endAt)}function Ze(o){return x.isDocumentKey(o.path)&&null===o.collectionGroup&&0===o.filters.length}function pt(o,e){return o.filters.filter(t=>t instanceof Sn&&t.field.isEqual(e))}function Ut(o,e,t){let l=bl,h=!0;for(const g of pt(o,e)){let w=bl,R=!0;switch(g.op){case"<":case"<=":w=qu(g.value);break;case"==":case"in":case">=":w=g.value;break;case">":w=g.value,R=!1;break;case"!=":case"not-in":w=bl}Ca({value:l,inclusive:h},{value:w,inclusive:R})<0&&(l=w,h=R)}if(null!==t)for(let g=0;g<o.orderBy.length;++g)if(o.orderBy[g].field.isEqual(e)){const w=t.position[g];Ca({value:l,inclusive:h},{value:w,inclusive:t.inclusive})<0&&(l=w,h=t.inclusive);break}return{value:l,inclusive:h}}function _n(o,e,t){let l=ta,h=!0;for(const g of pt(o,e)){let w=ta,R=!0;switch(g.op){case">=":case">":w=Dl(g.value),R=!1;break;case"==":case"in":case"<=":w=g.value;break;case"<":w=g.value,R=!1;break;case"!=":case"not-in":w=ta}Tc({value:l,inclusive:h},{value:w,inclusive:R})>0&&(l=w,h=R)}if(null!==t)for(let g=0;g<o.orderBy.length;++g)if(o.orderBy[g].field.isEqual(e)){const w=t.position[g];Tc({value:l,inclusive:h},{value:w,inclusive:t.inclusive})>0&&(l=w,h=t.inclusive);break}return{value:l,inclusive:h}}class Sn extends class{}{constructor(e,t,l){super(),this.field=e,this.op=t,this.value=l}static create(e,t,l){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,l):new wr(e,t,l):"array-contains"===t?new po(e,l):"in"===t?new Zu(e,l):"not-in"===t?new Sl(e,l):"array-contains-any"===t?new Zs(e,l):new Sn(e,t,l)}static lt(e,t,l){return"in"===t?new Lr(e,l):new zn(e,l)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(na(t,this.value)):null!==t&&Ha(this.value)===Ha(t)&&this.ft(na(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pn()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class wr extends Sn{constructor(e,t,l){super(e,t,l),this.key=x.fromName(l.referenceValue)}matches(e){const t=x.comparator(e.key,this.key);return this.ft(t)}}class Lr extends Sn{constructor(e,t){super(e,"in",t),this.keys=Si(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class zn extends Sn{constructor(e,t){super(e,"not-in",t),this.keys=Si(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Si(o,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(l=>x.fromName(l.referenceValue))}class po extends Sn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wo(t)&&Il(t.arrayValue,this.value)}}class Zu extends Sn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Il(this.value.arrayValue,t)}}class Sl extends Sn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Il(this.value.arrayValue,t)}}class Zs extends Sn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wo(t)||!t.arrayValue.values)&&t.arrayValue.values.some(l=>Il(this.value.arrayValue,l))}}class ro{constructor(e,t){this.position=e,this.inclusive=t}}class sl{constructor(e,t="asc"){this.field=e,this.dir=t}}function xl(o,e){return o.dir===e.dir&&o.field.isEqual(e.field)}function Ao(o,e,t){let l=0;for(let h=0;h<o.position.length;h++){const g=e[h],w=o.position[h];if(l=g.field.isKeyField()?x.comparator(x.fromName(w.referenceValue),t.key):na(w,t.data.field(g.field)),"desc"===g.dir&&(l*=-1),0!==l)break}return l}function ol(o,e){if(null===o)return null===e;if(null===e||o.inclusive!==e.inclusive||o.position.length!==e.position.length)return!1;for(let t=0;t<o.position.length;t++)if(!Ho(o.position[t],e.position[t]))return!1;return!0}class go{constructor(e,t=null,l=[],h=[],g=null,w="F",R=null,H=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=l,this.filters=h,this.limit=g,this.limitType=w,this.startAt=R,this.endAt=H,this._t=null,this.wt=null}}function Gd(o,e,t,l,h,g,w,R){return new go(o,e,t,l,h,g,w,R)}function Ml(o){return new go(o)}function zd(o){return 0===o.filters.length&&null===o.limit&&null==o.startAt&&null==o.endAt&&(0===o.explicitOrderBy.length||1===o.explicitOrderBy.length&&o.explicitOrderBy[0].field.isKeyField())}function al(o){return o.explicitOrderBy.length>0?o.explicitOrderBy[0].field:null}function ll(o){for(const e of o.filters)if(e.dt())return e.field;return null}function ul(o){return null!==o.collectionGroup}function ql(o){const e=mn(o);if(null===e._t){e._t=[];const t=ll(e),l=al(e);if(null!==t&&null===l)t.isKeyField()||e._t.push(new sl(t)),e._t.push(new sl(hi.keyField(),"asc"));else{let h=!1;for(const g of e.explicitOrderBy)e._t.push(g),g.field.isKeyField()&&(h=!0);if(!h){const g=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new sl(hi.keyField(),g))}}}return e._t}function Bs(o){const e=mn(o);if(!e.wt)if("F"===e.limitType)e.wt=O(e.path,e.collectionGroup,ql(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const g of ql(e))t.push(new sl(g.field,"desc"===g.dir?"asc":"desc"));const l=e.endAt?new ro(e.endAt.position,e.endAt.inclusive):null,h=e.startAt?new ro(e.startAt.position,e.startAt.inclusive):null;e.wt=O(e.path,e.collectionGroup,t,e.filters,e.limit,l,h)}return e.wt}function qd(o,e,t){return new go(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),e,t,o.startAt,o.endAt)}function Go(o,e){return ve(Bs(o),Bs(e))&&o.limitType===e.limitType}function Ku(o){return`${B(Bs(o))}|lt:${o.limitType}`}function Yu(o){return`Query(target=${function re(o){let e=o.path.canonicalString();return null!==o.collectionGroup&&(e+=" collectionGroup="+o.collectionGroup),o.filters.length>0&&(e+=`, filters: [${o.filters.map(t=>{return`${(l=t).field.canonicalString()} ${l.op} ${zl(l.value)}`;var l}).join(", ")}]`),gs(o.limit)||(e+=", limit: "+o.limit),o.orderBy.length>0&&(e+=`, orderBy: [${o.orderBy.map(t=>{return`${(l=t).field.canonicalString()} (${l.dir})`;var l}).join(", ")}]`),o.startAt&&(e+=", startAt: ",e+=o.startAt.inclusive?"b:":"a:",e+=o.startAt.position.map(t=>zl(t)).join(",")),o.endAt&&(e+=", endAt: ",e+=o.endAt.inclusive?"a:":"b:",e+=o.endAt.position.map(t=>zl(t)).join(",")),`Target(${e})`}(Bs(o))}; limitType=${o.limitType})`}function Dc(o,e){return e.isFoundDocument()&&function(t,l){const h=l.key.path;return null!==t.collectionGroup?l.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(h):x.isDocumentKey(t.path)?t.path.isEqual(h):t.path.isImmediateParentOf(h)}(o,e)&&function(t,l){for(const h of t.explicitOrderBy)if(!h.field.isKeyField()&&null===l.data.field(h.field))return!1;return!0}(o,e)&&function(t,l){for(const h of t.filters)if(!h.matches(l))return!1;return!0}(o,e)&&(l=e,!((t=o).startAt&&!function(h,g,w){const R=Ao(h,g,w);return h.inclusive?R<=0:R<0}(t.startAt,ql(t),l)||t.endAt&&!function(h,g,w){const R=Ao(h,g,w);return h.inclusive?R>=0:R>0}(t.endAt,ql(t),l)));var t,l}function wu(o){return o.collectionGroup||(o.path.length%2==1?o.path.lastSegment():o.path.get(o.path.length-2))}function cl(o){return(e,t)=>{let l=!1;for(const h of ql(o)){const g=qh(h,e,t);if(0!==g)return g;l=l||h.field.isKeyField()}return 0}}function qh(o,e,t){const l=o.field.isKeyField()?x.comparator(e.key,t.key):function(h,g,w){const R=g.data.field(h),H=w.data.field(h);return null!==R&&null!==H?na(R,H):pn()}(o.field,e,t);switch(o.dir){case"asc":return l;case"desc":return-1*l;default:return pn()}}function od(o,e){if(o.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rl(e)?"-0":e}}function Zd(o){return{integerValue:""+o}}function Zh(o,e){return wa(e)?Zd(e):od(o,e)}class Qu{constructor(){this._=void 0}}function sa(o,e,t){return o instanceof Rl?function(l,h){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return h&&(g.fields.__previous_value__=h),{mapValue:g}}(t,e):o instanceof So?ad(o,e):o instanceof Kl?Kd(o,e):function(l,h){const g=Ac(l,h),w=Ju(g)+Ju(l.yt);return Ic(g)&&Ic(l.yt)?Zd(w):od(l.It,w)}(o,e)}function Zl(o,e,t){return o instanceof So?ad(o,e):o instanceof Kl?Kd(o,e):t}function Ac(o,e){return o instanceof dl?Ic(t=e)||(l=t)&&"doubleValue"in l?e:{integerValue:0}:null;var l,t}class Rl extends Qu{}class So extends Qu{constructor(e){super(),this.elements=e}}function ad(o,e){const t=Kh(e);for(const l of o.elements)t.some(h=>Ho(h,l))||t.push(l);return{arrayValue:{values:t}}}class Kl extends Qu{constructor(e){super(),this.elements=e}}function Kd(o,e){let t=Kh(e);for(const l of o.elements)t=t.filter(h=>!Ho(h,l));return{arrayValue:{values:t}}}class dl extends Qu{constructor(e,t){super(),this.It=e,this.yt=t}}function Ju(o){return $i(o.integerValue||o.doubleValue)}function Kh(o){return Wo(o)&&o.arrayValue.values?o.arrayValue.values.slice():[]}class Pl{constructor(e,t){this.field=e,this.transform=t}}class bg{constructor(e,t){this.version=e,this.transformResults=t}}class is{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new is}static exists(e){return new is(void 0,e)}static updateTime(e){return new is(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yl(o,e){return void 0!==o.updateTime?e.isFoundDocument()&&e.version.isEqual(o.updateTime):void 0===o.exists||o.exists===e.isFoundDocument()}class Cu{}function zo(o,e){if(!o.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return o.isNoDocument()?new hl(o.key,is.none()):new Nl(o.key,o.data,is.none());{const t=o.data,l=qi.empty();let h=new Ci(hi.comparator);for(let g of e.fields)if(!h.has(g)){let w=t.field(g);null===w&&g.length>1&&(g=g.popLast(),w=t.field(g)),null===w?l.delete(g):l.set(g,w),h=h.add(g)}return new Jl(o.key,l,new qs(h.toArray()),is.none())}}function Ql(o,e,t){o instanceof Nl?function(l,h,g){const w=l.value.clone(),R=tc(l.fieldTransforms,h,g.transformResults);w.setAll(R),h.convertToFoundDocument(g.version,w).setHasCommittedMutations()}(o,e,t):o instanceof Jl?function(l,h,g){if(!Yl(l.precondition,h))return void h.convertToUnknownDocument(g.version);const w=tc(l.fieldTransforms,h,g.transformResults),R=h.data;R.setAll(Qd(l)),R.setAll(w),h.convertToFoundDocument(g.version,R).setHasCommittedMutations()}(o,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Xu(o,e,t,l){return o instanceof Nl?function(h,g,w,R){if(!Yl(h.precondition,g))return w;const H=h.value.clone(),Q=Xl(h.fieldTransforms,R,g);return H.setAll(Q),g.convertToFoundDocument(g.version,H).setHasLocalMutations(),null}(o,e,t,l):o instanceof Jl?function(h,g,w,R){if(!Yl(h.precondition,g))return w;const H=Xl(h.fieldTransforms,R,g),Q=g.data;return Q.setAll(Qd(h)),Q.setAll(H),g.convertToFoundDocument(g.version,Q).setHasLocalMutations(),null===w?null:w.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(de=>de.field))}(o,e,t,l):(w=t,Yl(o.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):w);var g,w}function ec(o,e){let t=null;for(const l of o.fieldTransforms){const h=e.data.field(l.field),g=Ac(l.transform,h||null);null!=g&&(null===t&&(t=qi.empty()),t.set(l.field,g))}return t||null}function ba(o,e){return o.type===e.type&&!!o.key.isEqual(e.key)&&!!o.precondition.isEqual(e.precondition)&&(l=e.fieldTransforms,!!(void 0===(t=o.fieldTransforms)&&void 0===l||t&&l&&jo(t,l,(h,g)=>function Yd(o,e){return o.field.isEqual(e.field)&&(l=e.transform,(t=o.transform)instanceof So&&l instanceof So||t instanceof Kl&&l instanceof Kl?jo(t.elements,l.elements,Ho):t instanceof dl&&l instanceof dl?Ho(t.yt,l.yt):t instanceof Rl&&l instanceof Rl);var t,l}(h,g))))&&(0===o.type?o.value.isEqual(e.value):1!==o.type||o.data.isEqual(e.data)&&o.fieldMask.isEqual(e.fieldMask));var t,l}class Nl extends Cu{constructor(e,t,l,h=[]){super(),this.key=e,this.value=t,this.precondition=l,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class Jl extends Cu{constructor(e,t,l,h,g=[]){super(),this.key=e,this.data=t,this.fieldMask=l,this.precondition=h,this.fieldTransforms=g,this.type=1}getFieldMask(){return this.fieldMask}}function Qd(o){const e=new Map;return o.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const l=o.data.field(t);e.set(t,l)}}),e}function tc(o,e,t){const l=new Map;er(o.length===t.length);for(let h=0;h<t.length;h++){const g=o[h],w=g.transform,R=e.data.field(g.field);l.set(g.field,Zl(w,R,t[h]))}return l}function Xl(o,e,t){const l=new Map;for(const h of o){const g=h.transform,w=t.data.field(h.field);l.set(h.field,sa(g,w,e))}return l}class hl extends Cu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Yh extends Cu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class za{constructor(e){this.count=e}}var _s,ui;function Sc(o){switch(o){default:return pn();case mt.CANCELLED:case mt.UNKNOWN:case mt.DEADLINE_EXCEEDED:case mt.RESOURCE_EXHAUSTED:case mt.INTERNAL:case mt.UNAVAILABLE:case mt.UNAUTHENTICATED:return!1;case mt.INVALID_ARGUMENT:case mt.NOT_FOUND:case mt.ALREADY_EXISTS:case mt.PERMISSION_DENIED:case mt.FAILED_PRECONDITION:case mt.ABORTED:case mt.OUT_OF_RANGE:case mt.UNIMPLEMENTED:case mt.DATA_LOSS:return!0}}function ld(o){if(void 0===o)return gr("GRPC error has no .code"),mt.UNKNOWN;switch(o){case _s.OK:return mt.OK;case _s.CANCELLED:return mt.CANCELLED;case _s.UNKNOWN:return mt.UNKNOWN;case _s.DEADLINE_EXCEEDED:return mt.DEADLINE_EXCEEDED;case _s.RESOURCE_EXHAUSTED:return mt.RESOURCE_EXHAUSTED;case _s.INTERNAL:return mt.INTERNAL;case _s.UNAVAILABLE:return mt.UNAVAILABLE;case _s.UNAUTHENTICATED:return mt.UNAUTHENTICATED;case _s.INVALID_ARGUMENT:return mt.INVALID_ARGUMENT;case _s.NOT_FOUND:return mt.NOT_FOUND;case _s.ALREADY_EXISTS:return mt.ALREADY_EXISTS;case _s.PERMISSION_DENIED:return mt.PERMISSION_DENIED;case _s.FAILED_PRECONDITION:return mt.FAILED_PRECONDITION;case _s.ABORTED:return mt.ABORTED;case _s.OUT_OF_RANGE:return mt.OUT_OF_RANGE;case _s.UNIMPLEMENTED:return mt.UNIMPLEMENTED;case _s.DATA_LOSS:return mt.DATA_LOSS;default:return pn()}}(ui=_s||(_s={}))[ui.OK=0]="OK",ui[ui.CANCELLED=1]="CANCELLED",ui[ui.UNKNOWN=2]="UNKNOWN",ui[ui.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ui[ui.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ui[ui.NOT_FOUND=5]="NOT_FOUND",ui[ui.ALREADY_EXISTS=6]="ALREADY_EXISTS",ui[ui.PERMISSION_DENIED=7]="PERMISSION_DENIED",ui[ui.UNAUTHENTICATED=16]="UNAUTHENTICATED",ui[ui.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ui[ui.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ui[ui.ABORTED=10]="ABORTED",ui[ui.OUT_OF_RANGE=11]="OUT_OF_RANGE",ui[ui.UNIMPLEMENTED=12]="UNIMPLEMENTED",ui[ui.INTERNAL=13]="INTERNAL",ui[ui.UNAVAILABLE=14]="UNAVAILABLE",ui[ui.DATA_LOSS=15]="DATA_LOSS";class Ps{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),l=this.inner[t];if(void 0!==l)for(const[h,g]of l)if(this.equalsFn(h,e))return g}has(e){return void 0!==this.get(e)}set(e,t){const l=this.mapKeyFn(e),h=this.inner[l];if(void 0===h)return this.inner[l]=[[e,t]],void this.innerSize++;for(let g=0;g<h.length;g++)if(this.equalsFn(h[g][0],e))return void(h[g]=[e,t]);h.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),l=this.inner[t];if(void 0===l)return!1;for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],e))return 1===l.length?delete this.inner[t]:l.splice(h,1),this.innerSize--,!0;return!1}forEach(e){ja(this.inner,(t,l)=>{for(const[h,g]of l)e(h,g)})}isEmpty(){return _u(this.inner)}size(){return this.innerSize}}const xc=new Ni(x.comparator);function io(){return xc}const Mc=new Ni(x.comparator);function eu(...o){let e=Mc;for(const t of o)e=e.insert(t.key,t);return e}function Qh(o){let e=Mc;return o.forEach((t,l)=>e=e.insert(t,l.overlayedDocument)),e}function xi(){return Ol()}function ud(){return Ol()}function Ol(){return new Ps(o=>o.toString(),(o,e)=>o.isEqual(e))}const cd=new Ni(x.comparator),dd=new Ci(x.comparator);function Wr(...o){let e=dd;for(const t of o)e=e.add(t);return e}const Jd=new Ci(mr);function b(){return Jd}class m{constructor(e,t,l,h,g){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=l,this.documentUpdates=h,this.resolvedLimboDocuments=g}static createSynthesizedRemoteEventForCurrentChange(e,t,l){const h=new Map;return h.set(e,v.createSynthesizedTargetChangeForCurrentChange(e,t,l)),new m(nr.min(),h,b(),io(),Wr())}}class v{constructor(e,t,l,h,g){this.resumeToken=e,this.current=t,this.addedDocuments=l,this.modifiedDocuments=h,this.removedDocuments=g}static createSynthesizedTargetChangeForCurrentChange(e,t,l){return new v(l,t,Wr(),Wr(),Wr())}}class S{constructor(e,t,l,h){this.Tt=e,this.removedTargetIds=t,this.key=l,this.Et=h}}class z{constructor(e,t){this.targetId=e,this.At=t}}class ne{constructor(e,t,l=Di.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=t,this.resumeToken=l,this.cause=h}}class Oe{constructor(){this.Rt=0,this.bt=en(),this.Pt=Di.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Wr(),t=Wr(),l=Wr();return this.bt.forEach((h,g)=>{switch(g){case 0:e=e.add(h);break;case 2:t=t.add(h);break;case 1:l=l.add(h);break;default:pn()}}),new v(this.Pt,this.vt,e,t,l)}Nt(){this.Vt=!1,this.bt=en()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Tt{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=io(),this.qt=gn(),this.Kt=new Ci(mr)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const l=this.zt(t);switch(e.state){case 0:this.Ht(t)&&l.Ct(e.resumeToken);break;case 1:l.Ft(),l.St||l.Nt(),l.Ct(e.resumeToken);break;case 2:l.Ft(),l.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(l.$t(),l.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),l.Ct(e.resumeToken));break;default:pn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((l,h)=>{this.Ht(h)&&t(h)})}Yt(e){const t=e.targetId,l=e.At.count,h=this.Xt(t);if(h){const g=h.target;if(Ze(g))if(0===l){const w=new x(g.path);this.jt(t,w,Ai.newNoDocument(w,nr.min()))}else er(1===l);else this.Zt(t)!==l&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((g,w)=>{const R=this.Xt(w);if(R){if(g.current&&Ze(R.target)){const H=new x(R.target.path);null!==this.Ut.get(H)||this.ee(w,H)||this.jt(w,H,Ai.newNoDocument(H,e))}g.Dt&&(t.set(w,g.xt()),g.Nt())}});let l=Wr();this.qt.forEach((g,w)=>{let R=!0;w.forEachWhile(H=>{const Q=this.Xt(H);return!Q||2===Q.purpose||(R=!1,!1)}),R&&(l=l.add(g))}),this.Ut.forEach((g,w)=>w.setReadTime(e));const h=new m(e,t,this.Kt,this.Ut,l);return this.Ut=io(),this.qt=gn(),this.Kt=new Ci(mr),h}Qt(e,t){if(!this.Ht(e))return;const l=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,l),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,l){if(!this.Ht(e))return;const h=this.zt(e);this.ee(e,t)?h.kt(t,1):h.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),l&&(this.Ut=this.Ut.insert(t,l))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new Oe,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Ci(mr),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||$t("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Oe),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function gn(){return new Ni(x.comparator)}function en(){return new Ni(x.comparator)}const Rn={asc:"ASCENDING",desc:"DESCENDING"},ci={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Oi{constructor(e,t){this.databaseId=e,this.gt=t}}function ss(o,e){return o.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mo(o,e){return o.gt?e.toBase64():e.toUint8Array()}function Rc(o,e){return ss(o,e.toTimestamp())}function ys(o){return er(!!o),nr.fromTimestamp(function(e){const t=no(e);return new vi(t.seconds,t.nanos)}(o))}function tu(o,e){return(t=o,new Tr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Xd(o){const e=Tr.fromString(o);return er(ru(e)),e}function oa(o,e){return tu(o.databaseId,e.path)}function qa(o,e){const t=Xd(e);if(t.get(1)!==o.databaseId.projectId)throw new Gt(mt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+o.databaseId.projectId);if(t.get(3)!==o.databaseId.database)throw new Gt(mt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+o.databaseId.database);return new x(Nc(t))}function Pc(o,e){return tu(o.databaseId,e)}function bu(o){const e=Xd(o);return 4===e.length?Tr.emptyPath():Nc(e)}function Iu(o){return new Tr(["projects",o.databaseId.projectId,"databases",o.databaseId.database]).canonicalString()}function Nc(o){return er(o.length>4&&"documents"===o.get(4)),o.popFirst(5)}function nu(o,e,t){return{name:oa(o,e),fields:t.value.mapValue.fields}}function hd(o,e,t){const l=qa(o,e.name),h=ys(e.updateTime),g=new qi({mapValue:{fields:e.fields}}),w=Ai.newFoundDocument(l,h,g);return t&&w.setHasCommittedMutations(),t?w.setHasCommittedMutations():w}function Oc(o,e){let t;if(e instanceof Nl)t={update:nu(o,e.key,e.value)};else if(e instanceof hl)t={delete:oa(o,e.key)};else if(e instanceof Jl)t={update:nu(o,e.key,e.data),updateMask:kl(e.fieldMask)};else{if(!(e instanceof Yh))return pn();t={verify:oa(o,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(l=>function(h,g){const w=g.transform;if(w instanceof Rl)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof So)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof Kl)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof dl)return{fieldPath:g.field.canonicalString(),increment:w.yt};throw pn()}(0,l))),e.precondition.isNone||(t.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:Rc(o,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:pn()),t;var h}function op(o,e){const t=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?is.updateTime(ys(h.updateTime)):void 0!==h.exists?is.exists(h.exists):is.none():is.none(),l=e.updateTransforms?e.updateTransforms.map(h=>function(g,w){let R=null;"setToServerValue"in w?(er("REQUEST_TIME"===w.setToServerValue),R=new Rl):"appendMissingElements"in w?R=new So(w.appendMissingElements.values||[]):"removeAllFromArray"in w?R=new Kl(w.removeAllFromArray.values||[]):"increment"in w?R=new dl(g,w.increment):pn();const H=hi.fromServerFormat(w.fieldPath);return new Pl(H,R)}(o,h)):[];var h;if(e.update){const h=qa(o,e.update.name),g=new qi({mapValue:{fields:e.update.fields}});if(e.updateMask){const w=new qs((e.updateMask.fieldPaths||[]).map(Q=>hi.fromServerFormat(Q)));return new Jl(h,g,w,t,l)}return new Nl(h,g,t,l)}if(e.delete){const h=qa(o,e.delete);return new hl(h,t)}if(e.verify){const h=qa(o,e.verify);return new Yh(h,t)}return pn()}function ap(o,e){return{documents:[Pc(o,e.path)]}}function th(o,e){const t={structuredQuery:{}},l=e.path;null!==e.collectionGroup?(t.parent=Pc(o,l),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Pc(o,l.popLast()),t.structuredQuery.from=[{collectionId:l.lastSegment()}]);const h=function(H){if(0===H.length)return;const Q=H.map(de=>function(Re){if("=="===Re.op){if(Ga(Re.value))return{unaryFilter:{field:xo(Re.field),op:"IS_NAN"}};if(Wa(Re.value))return{unaryFilter:{field:xo(Re.field),op:"IS_NULL"}}}else if("!="===Re.op){if(Ga(Re.value))return{unaryFilter:{field:xo(Re.field),op:"IS_NOT_NAN"}};if(Wa(Re.value))return{unaryFilter:{field:xo(Re.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xo(Re.field),op:Jh(Re.op),value:Re.value}}}(de));return 1===Q.length?Q[0]:{compositeFilter:{op:"AND",filters:Q}}}(e.filters);h&&(t.structuredQuery.where=h);const g=function(H){if(0!==H.length)return H.map(Q=>{return{field:xo((de=Q).field),direction:nc(de.dir)};var de})}(e.orderBy);g&&(t.structuredQuery.orderBy=g);const w=(Q=e.limit,o.gt||gs(Q)?Q:{value:Q});var Q,R,H;return null!==w&&(t.structuredQuery.limit=w),e.startAt&&(t.structuredQuery.startAt={before:(R=e.startAt).inclusive,values:R.position}),e.endAt&&(t.structuredQuery.endAt={before:!(H=e.endAt).inclusive,values:H.position}),t}function lp(o){let e=bu(o.parent);const t=o.structuredQuery,l=t.from?t.from.length:0;let h=null;if(l>0){er(1===l);const de=t.from[0];de.allDescendants?h=de.collectionId:e=e.child(de.collectionId)}let g=[];t.where&&(g=nh(t.where));let w=[];t.orderBy&&(w=t.orderBy.map(de=>{return new sl(fl((Re=de).field),function(ft){switch(ft){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Re.direction));var Re}));let R=null;t.limit&&(R=function(de){let Re;return Re="object"==typeof de?de.value:de,gs(Re)?null:Re}(t.limit));let H=null;var de;t.startAt&&(H=new ro((de=t.startAt).values||[],!!de.before));let Q=null;return t.endAt&&(Q=function(de){return new ro(de.values||[],!de.before)}(t.endAt)),Gd(e,h,w,g,R,"F",H,Q)}function nh(o){return o?void 0!==o.unaryFilter?[P_(o)]:void 0!==o.fieldFilter?[Pm(o)]:void 0!==o.compositeFilter?o.compositeFilter.filters.map(e=>nh(e)).reduce((e,t)=>e.concat(t)):pn():[]}function nc(o){return Rn[o]}function Jh(o){return ci[o]}function xo(o){return{fieldPath:o.canonicalString()}}function fl(o){return hi.fromServerFormat(o.fieldPath)}function Pm(o){return Sn.create(fl(o.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pn()}}(o.fieldFilter.op),o.fieldFilter.value)}function P_(o){switch(o.unaryFilter.op){case"IS_NAN":const e=fl(o.unaryFilter.field);return Sn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=fl(o.unaryFilter.field);return Sn.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=fl(o.unaryFilter.field);return Sn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=fl(o.unaryFilter.field);return Sn.create(h,"!=",{nullValue:"NULL_VALUE"});default:return pn()}}function kl(o){const e=[];return o.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ru(o){return o.length>=4&&"projects"===o.get(0)&&"databases"===o.get(2)}function Ka(o){let e="";for(let t=0;t<o.length;t++)e.length>0&&(e=Xh(e)),e=ly(o.get(t),e);return Xh(e)}function ly(o,e){let t=e;const l=o.length;for(let h=0;h<l;h++){const g=o.charAt(h);switch(g){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=g}}return t}function Xh(o){return o+"\x01\x01"}function rc(o){const e=o.length;if(er(e>=2),2===e)return er("\x01"===o.charAt(0)&&"\x01"===o.charAt(1)),Tr.emptyPath();const t=e-2,l=[];let h="";for(let g=0;g<e;){const w=o.indexOf("\x01",g);switch((w<0||w>t)&&pn(),o.charAt(w+1)){case"\x01":const R=o.substring(g,w);let H;0===h.length?H=R:(h+=R,H=h,h=""),l.push(H);break;case"\x10":h+=o.substring(g,w),h+="\0";break;case"\x11":h+=o.substring(g,w+1);break;default:pn()}g=w+2}return new Tr(l)}const iu=["userId","batchId"];function rh(o,e){return[o,Ka(e)]}function up(o,e,t){return[o,Ka(e),t]}const ih={},sh=["prefixPath","collectionGroup","readTime","documentId"],Tu=["prefixPath","collectionGroup","documentId"],Tg=["collectionGroup","readTime","prefixPath","documentId"],Nm=["canonicalId","targetId"],Dg=["targetId","path"],Ag=["path","targetId"],Om=["collectionId","parent"],uy=["indexId","uid"],oh=["uid","sequenceNumber"],ef=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],km=["indexId","uid","orderedDocumentKey"],Fm=["userId","collectionPath","documentId"],Sg=["userId","collectionPath","largestBatchId"],xg=["userId","collectionGroup","largestBatchId"],Lm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Um=[...Lm,"documentOverlays"],Vm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Mg=Vm,N_=[...Mg,"indexConfiguration","indexState","indexEntries"];class tf extends Br{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function so(o,e){const t=mn(o);return rs.M(t.ie,e)}class nf{constructor(e,t,l,h){this.batchId=e,this.localWriteTime=t,this.baseMutations=l,this.mutations=h}applyToRemoteDocument(e,t){const l=t.mutationResults;for(let h=0;h<this.mutations.length;h++){const g=this.mutations[h];g.key.isEqual(e.key)&&Ql(g,e,l[h])}}applyToLocalView(e,t){for(const l of this.baseMutations)l.key.isEqual(e.key)&&(t=Xu(l,e,t,this.localWriteTime));for(const l of this.mutations)l.key.isEqual(e.key)&&(t=Xu(l,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const l=ud();return this.mutations.forEach(h=>{const g=e.get(h.key),w=g.overlayedDocument;let R=this.applyToLocalView(w,g.mutatedFields);R=t.has(h.key)?null:R;const H=zo(w,R);null!==H&&l.set(h.key,H),w.isValidDocument()||w.convertToNoDocument(nr.min())}),l}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Wr())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,(t,l)=>ba(t,l))&&jo(this.baseMutations,e.baseMutations,(t,l)=>ba(t,l))}}class rf{constructor(e,t,l,h){this.batch=e,this.commitVersion=t,this.mutationResults=l,this.docVersions=h}static from(e,t,l){er(e.mutations.length===l.length);let h=cd;const g=e.mutations;for(let w=0;w<g.length;w++)h=h.insert(g[w].key,l[w].version);return new rf(e,t,l,h)}}class cp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class kc{constructor(e,t,l,h,g=nr.min(),w=nr.min(),R=Di.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=l,this.sequenceNumber=h,this.snapshotVersion=g,this.lastLimboFreeSnapshotVersion=w,this.resumeToken=R}withSequenceNumber(e){return new kc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new kc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new kc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class dp{constructor(e){this.re=e}}function ic(o,e){const t=e.key,l={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:sf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())l.document={name:oa(h=o.re,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:ss(h,g.version.toTimestamp())};else if(e.isNoDocument())l.noDocument={path:t.path.toArray(),readTime:sc(e.version)};else{if(!e.isUnknownDocument())return pn();l.unknownDocument={path:t.path.toArray(),version:sc(e.version)}}var h,g;return l}function sf(o){const e=o.toTimestamp();return[e.seconds,e.nanoseconds]}function sc(o){const e=o.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function fd(o){const e=new vi(o.seconds,o.nanoseconds);return nr.fromTimestamp(e)}function Du(o,e){const t=(e.baseMutations||[]).map(g=>op(o.re,g));for(let g=0;g<e.mutations.length-1;++g){const w=e.mutations[g];g+1<e.mutations.length&&void 0!==e.mutations[g+1].transform&&(w.updateTransforms=e.mutations[g+1].transform.fieldTransforms,e.mutations.splice(g+1,1),++g)}const l=e.mutations.map(g=>op(o.re,g)),h=vi.fromMillis(e.localWriteTimeMs);return new nf(e.batchId,h,t,l)}function ah(o){const e=fd(o.readTime),t=void 0!==o.lastLimboFreeSnapshotVersion?fd(o.lastLimboFreeSnapshotVersion):nr.min();let l;var h;return void 0!==o.query.documents?(er(1===(h=o.query).documents.length),l=Bs(Ml(bu(h.documents[0])))):l=Bs(lp(o.query)),new kc(l,o.targetId,0,o.lastListenSequenceNumber,e,t,Di.fromBase64String(o.resumeToken))}function lh(o,e){const t=sc(e.snapshotVersion),l=sc(e.lastLimboFreeSnapshotVersion);let h;h=Ze(e.target)?ap(o.re,e.target):th(o.re,e.target);const g=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:B(e.target),readTime:t,resumeToken:g,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:l,query:h}}function uh(o){const e=lp({parent:o.parent,structuredQuery:o.structuredQuery});return"LAST"===o.limitType?qd(e,e.limit,"L"):e}function af(o,e){return new cp(e.largestBatchId,op(o.re,e.overlayMutation))}function lf(o,e){const t=e.path.lastSegment();return[o,Ka(e.path.popLast()),t]}function hp(o,e,t,l){return{indexId:o,uid:e.uid||"",sequenceNumber:t,readTime:sc(l.readTime),documentKey:Ka(l.documentKey.path),largestBatchId:l.largestBatchId}}class uf{getBundleMetadata(e,t){return ch(e).get(t).next(l=>{if(l)return{id:(h=l).bundleId,createTime:fd(h.createTime),version:h.version};var h})}saveBundleMetadata(e,t){return ch(e).put({bundleId:(l=t).id,createTime:sc(ys(l.createTime)),version:l.version});var l}getNamedQuery(e,t){return fp(e).get(t).next(l=>{if(l)return{name:(h=l).name,query:uh(h.bundledQuery),readTime:fd(h.readTime)};var h})}saveNamedQuery(e,t){return fp(e).put({name:(l=t).name,readTime:sc(ys(l.readTime)),bundledQuery:l.bundledQuery});var l}}function ch(o){return so(o,"bundles")}function fp(o){return so(o,"namedQueries")}class Fc{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Fc(e,t.uid||"")}getOverlay(e,t){return dh(e).get(lf(this.userId,t)).next(l=>l?af(this.It,l):null)}getOverlays(e,t){const l=xi();return nt.forEach(t,h=>this.getOverlay(e,h).next(g=>{null!==g&&l.set(h,g)})).next(()=>l)}saveOverlays(e,t,l){const h=[];return l.forEach((g,w)=>{const R=new cp(t,w);h.push(this.ue(e,R))}),nt.waitFor(h)}removeOverlaysForBatchId(e,t,l){const h=new Set;t.forEach(w=>h.add(Ka(w.getCollectionPath())));const g=[];return h.forEach(w=>{const R=IDBKeyRange.bound([this.userId,w,l],[this.userId,w,l+1],!1,!0);g.push(dh(e).Y("collectionPathOverlayIndex",R))}),nt.waitFor(g)}getOverlaysForCollection(e,t,l){const h=xi(),g=Ka(t),w=IDBKeyRange.bound([this.userId,g,l],[this.userId,g,Number.POSITIVE_INFINITY],!0);return dh(e).W("collectionPathOverlayIndex",w).next(R=>{for(const H of R){const Q=af(this.It,H);h.set(Q.getKey(),Q)}return h})}getOverlaysForCollectionGroup(e,t,l,h){const g=xi();let w;const R=IDBKeyRange.bound([this.userId,t,l],[this.userId,t,Number.POSITIVE_INFINITY],!0);return dh(e).Z({index:"collectionGroupOverlayIndex",range:R},(H,Q,de)=>{const Re=af(this.It,Q);g.size()<h||Re.largestBatchId===w?(g.set(Re.getKey(),Re),w=Re.largestBatchId):de.done()}).next(()=>g)}ue(e,t){return dh(e).put(function(l,h,g){const[w,R,H]=lf(h,g.mutation.key);return{userId:h,collectionPath:R,documentId:H,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:Oc(l.re,g.mutation)}}(this.It,this.userId,t))}}function dh(o){return so(o,"documentOverlays")}class oc{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe($i(e.integerValue));else if("doubleValue"in e){const l=$i(e.doubleValue);isNaN(l)?this.le(t,13):(this.le(t,15),rl(l)?t.fe(0):t.fe(l))}else if("timestampValue"in e){const l=e.timestampValue;this.le(t,20),"string"==typeof l?t.de(l):(t.de(`${l.seconds||""}`),t.fe(l.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me($a(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const l=e.geoPointValue;this.le(t,45),t.fe(l.latitude||0),t.fe(l.longitude||0)}else"mapValue"in e?ia(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):pn()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const l=e.fields||{};this.le(t,55);for(const h of Object.keys(l))this._e(h,t),this.ae(l[h],t)}pe(e,t){const l=e.values||[];this.le(t,50);for(const h of l)this.ae(h,t)}ge(e,t){this.le(t,37),x.fromName(e).path.forEach(l=>{this.le(t,60),this.Ie(l,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function hh(o){if(0===o)return 8;let e=0;return o>>4==0&&(e+=4,o<<=4),o>>6==0&&(e+=2,o<<=2),o>>7==0&&(e+=1),e}function Rg(o){const e=64-function(t){let l=0;for(let h=0;h<8;++h){const g=hh(255&t[h]);if(l+=g,8!==g)break}return l}(o);return Math.ceil(e/8)}oc.Te=new oc;class jm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let l=t.next();for(;!l.done;)this.Ae(l.value),l=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let l=t.next();for(;!l.done;)this.Pe(l.value),l=t.next();this.ve()}Ve(e){for(const t of e){const l=t.charCodeAt(0);if(l<128)this.Ae(l);else if(l<2048)this.Ae(960|l>>>6),this.Ae(128|63&l);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|l>>>12),this.Ae(128|63&l>>>6),this.Ae(128|63&l);else{const h=t.codePointAt(0);this.Ae(240|h>>>18),this.Ae(128|63&h>>>12),this.Ae(128|63&h>>>6),this.Ae(128|63&h)}}this.Re()}Se(e){for(const t of e){const l=t.charCodeAt(0);if(l<128)this.Pe(l);else if(l<2048)this.Pe(960|l>>>6),this.Pe(128|63&l);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|l>>>12),this.Pe(128|63&l>>>6),this.Pe(128|63&l);else{const h=t.codePointAt(0);this.Pe(240|h>>>18),this.Pe(128|63&h>>>12),this.Pe(128|63&h>>>6),this.Pe(128|63&h)}}this.ve()}De(e){const t=this.Ce(e),l=Rg(t);this.xe(1+l),this.buffer[this.position++]=255&l;for(let h=t.length-l;h<t.length;++h)this.buffer[this.position++]=255&t[h]}Ne(e){const t=this.Ce(e),l=Rg(t);this.xe(1+l),this.buffer[this.position++]=~(255&l);for(let h=t.length-l;h<t.length;++h)this.buffer[this.position++]=~(255&t[h])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(h){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,h,!1),new Uint8Array(g.buffer)}(e),l=0!=(128&t[0]);t[0]^=l?255:128;for(let h=1;h<t.length;++h)t[h]^=l?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let l=2*this.buffer.length;l<t&&(l=t);const h=new Uint8Array(l);h.set(this.buffer),this.buffer=h}}class O_{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class k_{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class pd{constructor(){this.Be=new jm,this.Le=new O_(this.Be),this.Ue=new k_(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Au{constructor(e,t,l,h){this.indexId=e,this.documentKey=t,this.arrayValue=l,this.directionalValue=h}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,l=new Uint8Array(t);return l.set(this.directionalValue,0),t!==e?l.set([0],this.directionalValue.length):++l[l.length-1],new Au(this.indexId,this.documentKey,this.arrayValue,l)}}function Lc(o,e){let t=o.indexId-e.indexId;return 0!==t?t:(t=F_(o.arrayValue,e.arrayValue),0!==t?t:(t=F_(o.directionalValue,e.directionalValue),0!==t?t:x.comparator(o.documentKey,e.documentKey)))}function F_(o,e){for(let t=0;t<o.length&&t<e.length;++t){const l=o[t]-e[t];if(0!==l)return l}return o.length-e.length}class Pg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const l=t;l.dt()?this.je=l:this.Qe.push(l)}}We(e){const t=T(e);if(void 0!==t&&!this.ze(t))return!1;const l=k(e);let h=0,g=0;for(;h<l.length&&this.ze(l[h]);++h);if(h===l.length)return!0;if(void 0!==this.je){const w=l[h];if(!this.He(this.je,w)||!this.Je(this.Ge[g++],w))return!1;++h}for(;h<l.length;++h){const w=l[h];if(g>=this.Ge.length||!this.Je(this.Ge[g++],w))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class L_{constructor(){this.Ye=new pp}addToCollectionParentIndex(e,t){return this.Ye.add(t),nt.resolve()}getCollectionParents(e,t){return nt.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return nt.resolve()}deleteFieldIndex(e,t){return nt.resolve()}getDocumentsMatchingTarget(e,t){return nt.resolve(null)}getIndexType(e,t){return nt.resolve(0)}getFieldIndexes(e,t){return nt.resolve([])}getNextCollectionGroupToUpdate(e){return nt.resolve(null)}getMinOffset(e,t){return nt.resolve(rr.min())}getMinOffsetFromCollectionGroup(e,t){return nt.resolve(rr.min())}updateCollectionGroup(e,t,l){return nt.resolve()}updateIndexEntries(e,t){return nt.resolve()}}class pp{constructor(){this.index={}}add(e){const t=e.lastSegment(),l=e.popLast(),h=this.index[t]||new Ci(Tr.comparator),g=!h.has(l);return this.index[t]=h.add(l),g}has(e){const t=e.lastSegment(),l=e.popLast(),h=this.index[t];return h&&h.has(l)}getEntries(e){return(this.index[e]||new Ci(Tr.comparator)).toArray()}}const gp=new Uint8Array(0);class mp{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new pp,this.Ze=new Ps(l=>B(l),(l,h)=>ve(l,h)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const l=t.lastSegment(),h=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const g={collectionId:l,parent:Ka(h)};return Ya(e).put(g)}return nt.resolve()}getCollectionParents(e,t){const l=[],h=IDBKeyRange.bound([t,""],[Gs(t),""],!1,!0);return Ya(e).W(h).next(g=>{for(const w of g){if(w.collectionId!==t)break;l.push(rc(w.parent))}return l})}addFieldIndex(e,t){const l=cf(e),h={indexId:(w=t).indexId,collectionGroup:w.collectionGroup,fields:w.fields.map(R=>[R.fieldPath.canonicalString(),R.kind])};var w;delete h.indexId;const g=l.add(h);if(t.indexState){const w=Uc(e);return g.next(R=>{w.put(hp(R,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return g.next()}deleteFieldIndex(e,t){const l=cf(e),h=Uc(e),g=fh(e);return l.delete(t.indexId).next(()=>h.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>g.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const l=fh(e);let h=!0;const g=new Map;return nt.forEach(this.tn(t),w=>this.en(e,w).next(R=>{h&&(h=!!R),g.set(w,R)})).next(()=>{if(h){let w=Wr();const R=[];return nt.forEach(g,(H,Q)=>{var de;$t("IndexedDbIndexManager",`Using index ${de=H,`id=${de.indexId}|cg=${de.collectionGroup}|f=${de.fields.map(Zi=>`${Zi.fieldPath}:${Zi.kind}`).join(",")}`} to execute ${B(t)}`);const Re=function(Zi,vo){const ki=T(vo);if(void 0===ki)return null;for(const Ki of pt(Zi,ki.fieldPath))switch(Ki.op){case"array-contains-any":return Ki.value.arrayValue.values||[];case"array-contains":return[Ki.value]}return null}(Q,H),ft=function(Zi,vo){const ki=new Map;for(const Ki of k(vo))for(const ua of pt(Zi,Ki.fieldPath))switch(ua.op){case"==":case"in":ki.set(Ki.fieldPath.canonicalString(),ua.value);break;case"not-in":case"!=":return ki.set(Ki.fieldPath.canonicalString(),ua.value),Array.from(ki.values())}return null}(Q,H),Pt=function(Zi,vo){const ki=[];let Ki=!0;for(const ua of k(vo)){const vc=0===ua.kind?Ut(Zi,ua.fieldPath,Zi.startAt):_n(Zi,ua.fieldPath,Zi.startAt);ki.push(vc.value),Ki&&(Ki=vc.inclusive)}return new ro(ki,Ki)}(Q,H),Ht=function(Zi,vo){const ki=[];let Ki=!0;for(const ua of k(vo)){const vc=0===ua.kind?_n(Zi,ua.fieldPath,Zi.endAt):Ut(Zi,ua.fieldPath,Zi.endAt);ki.push(vc.value),Ki&&(Ki=vc.inclusive)}return new ro(ki,Ki)}(Q,H),Pn=this.nn(H,Q,Pt),Hn=this.nn(H,Q,Ht),Wi=this.sn(H,Q,ft),fs=this.rn(H.indexId,Re,Pn,Pt.inclusive,Hn,Ht.inclusive,Wi);return nt.forEach(fs,Zi=>l.J(Zi,t.limit).next(vo=>{vo.forEach(ki=>{const Ki=x.fromSegments(ki.documentKey);w.has(Ki)||(w=w.add(Ki),R.push(Ki))})}))}).next(()=>R)}return nt.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,l,h,g,w,R){const H=(null!=t?t.length:1)*Math.max(l.length,g.length),Q=H/(null!=t?t.length:1),de=[];for(let Re=0;Re<H;++Re){const ft=t?this.on(t[Re/Q]):gp,Pt=this.un(e,ft,l[Re%Q],h),Ht=this.cn(e,ft,g[Re%Q],w),Pn=R.map(Hn=>this.un(e,ft,Hn,!0));de.push(...this.createRange(Pt,Ht,Pn))}return de}un(e,t,l,h){const g=new Au(e,x.empty(),t,l);return h?g:g.Ke()}cn(e,t,l,h){const g=new Au(e,x.empty(),t,l);return h?g.Ke():g}en(e,t){const l=new Pg(t),h=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,h).next(g=>{let w=null;for(const R of g)l.We(R)&&(!w||R.fields.length>w.fields.length)&&(w=R);return w})}getIndexType(e,t){let l=2;return nt.forEach(this.tn(t),h=>this.en(e,h).next(g=>{g?0!==l&&g.fields.length<function(w){let R=new Ci(hi.comparator),H=!1;for(const Q of w.filters){const de=Q;de.field.isKeyField()||("array-contains"===de.op||"array-contains-any"===de.op?H=!0:R=R.add(de.field))}for(const Q of w.orderBy)Q.field.isKeyField()||(R=R.add(Q.field));return R.size+(H?1:0)}(h)&&(l=1):l=0})).next(()=>l)}an(e,t){const l=new pd;for(const h of k(e)){const g=t.data.field(h.fieldPath);if(null==g)return null;const w=l.qe(h.kind);oc.Te.ce(g,w)}return l.$e()}on(e){const t=new pd;return oc.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const l=new pd;return oc.Te.ce(ra(this.databaseId,t),l.qe(function(h){const g=k(h);return 0===g.length?0:g[g.length-1].kind}(e))),l.$e()}sn(e,t,l){if(null===l)return[];let h=[];h.push(new pd);let g=0;for(const w of k(e)){const R=l[g++];for(const H of h)if(this.ln(t,w.fieldPath)&&Wo(R))h=this.fn(h,w,R);else{const Q=H.qe(w.kind);oc.Te.ce(R,Q)}}return this.dn(h)}nn(e,t,l){return this.sn(e,t,l.position)}dn(e){const t=[];for(let l=0;l<e.length;++l)t[l]=e[l].$e();return t}fn(e,t,l){const h=[...e],g=[];for(const w of l.arrayValue.values||[])for(const R of h){const H=new pd;H.seed(R.$e()),oc.Te.ce(w,H.qe(t.kind)),g.push(H)}return g}ln(e,t){return!!e.filters.find(l=>l instanceof Sn&&l.field.isEqual(t)&&("in"===l.op||"not-in"===l.op))}getFieldIndexes(e,t){const l=cf(e),h=Uc(e);return(t?l.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):l.W()).next(g=>{const w=[];return nt.forEach(g,R=>h.get([R.indexId,this.uid]).next(H=>{w.push(function(Q,de){const Re=de?new Ne(de.sequenceNumber,new rr(fd(de.readTime),new x(rc(de.documentKey)),de.largestBatchId)):Ne.empty(),ft=Q.fields.map(([Pt,Ht])=>new oe(hi.fromServerFormat(Pt),Ht));return new A(Q.indexId,Q.collectionGroup,ft,Re)}(R,H))})).next(()=>w)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((l,h)=>{const g=l.indexState.sequenceNumber-h.indexState.sequenceNumber;return 0!==g?g:mr(l.collectionGroup,h.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,l){const h=cf(e),g=Uc(e);return this._n(e).next(w=>h.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(R=>nt.forEach(R,H=>g.put(hp(H.indexId,this.user,w,l)))))}updateIndexEntries(e,t){const l=new Map;return nt.forEach(t,(h,g)=>{const w=l.get(h.collectionGroup);return(w?nt.resolve(w):this.getFieldIndexes(e,h.collectionGroup)).next(R=>(l.set(h.collectionGroup,R),nt.forEach(R,H=>this.wn(e,h,H).next(Q=>{const de=this.mn(g,H);return Q.isEqual(de)?nt.resolve():this.gn(e,g,H,Q,de)}))))})}yn(e,t,l,h){return fh(e).put({indexId:h.indexId,uid:this.uid,arrayValue:h.arrayValue,directionalValue:h.directionalValue,orderedDocumentKey:this.hn(l,t.key),documentKey:t.key.path.toArray()})}pn(e,t,l,h){return fh(e).delete([h.indexId,this.uid,h.arrayValue,h.directionalValue,this.hn(l,t.key),t.key.path.toArray()])}wn(e,t,l){const h=fh(e);let g=new Ci(Lc);return h.Z({index:"documentKeyIndex",range:IDBKeyRange.only([l.indexId,this.uid,this.hn(l,t)])},(w,R)=>{g=g.add(new Au(l.indexId,t,R.arrayValue,R.directionalValue))}).next(()=>g)}mn(e,t){let l=new Ci(Lc);const h=this.an(t,e);if(null==h)return l;const g=T(t);if(null!=g){const w=e.data.field(g.fieldPath);if(Wo(w))for(const R of w.arrayValue.values||[])l=l.add(new Au(t.indexId,e.key,this.on(R),h))}else l=l.add(new Au(t.indexId,e.key,gp,h));return l}gn(e,t,l,h,g){$t("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const w=[];return function(R,H,Q,de,Re){const ft=R.getIterator(),Pt=H.getIterator();let Ht=Wu(ft),Pn=Wu(Pt);for(;Ht||Pn;){let Hn=!1,Wi=!1;if(Ht&&Pn){const fs=Q(Ht,Pn);fs<0?Wi=!0:fs>0&&(Hn=!0)}else null!=Ht?Wi=!0:Hn=!0;Hn?(de(Pn),Pn=Wu(Pt)):Wi?(Re(Ht),Ht=Wu(ft)):(Ht=Wu(ft),Pn=Wu(Pt))}}(h,g,Lc,R=>{w.push(this.yn(e,t,l,R))},R=>{w.push(this.pn(e,t,l,R))}),nt.waitFor(w)}_n(e){let t=1;return Uc(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(l,h,g)=>{g.done(),t=h.sequenceNumber+1}).next(()=>t)}createRange(e,t,l){l=l.sort((w,R)=>Lc(w,R)).filter((w,R,H)=>!R||0!==Lc(w,H[R-1]));const h=[];h.push(e);for(const w of l){const R=Lc(w,e),H=Lc(w,t);if(0===R)h[0]=e.Ke();else if(R>0&&H<0)h.push(w),h.push(w.Ke());else if(H>0)break}h.push(t);const g=[];for(let w=0;w<h.length;w+=2)g.push(IDBKeyRange.bound([h[w].indexId,this.uid,h[w].arrayValue,h[w].directionalValue,gp,[]],[h[w+1].indexId,this.uid,h[w+1].arrayValue,h[w+1].directionalValue,gp,[]]));return g}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Ng)}getMinOffset(e,t){return nt.mapArray(this.tn(t),l=>this.en(e,l).next(h=>h||pn())).next(Ng)}}function Ya(o){return so(o,"collectionParents")}function fh(o){return so(o,"indexEntries")}function cf(o){return so(o,"indexConfiguration")}function Uc(o){return so(o,"indexState")}function Ng(o){er(0!==o.length);let e=o[0].indexState.offset,t=e.largestBatchId;for(let l=1;l<o.length;l++){const h=o[l].indexState.offset;Fn(h,e)<0&&(e=h),t<h.largestBatchId&&(t=h.largestBatchId)}return new rr(e.readTime,e.documentKey,t)}const Og={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ia{constructor(e,t,l){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=l}static withCacheSize(e){return new Ia(e,Ia.DEFAULT_COLLECTION_PERCENTILE,Ia.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function _p(o,e,t){const l=o.store("mutations"),h=o.store("documentMutations"),g=[],w=IDBKeyRange.only(t.batchId);let R=0;const H=l.Z({range:w},(de,Re,ft)=>(R++,ft.delete()));g.push(H.next(()=>{er(1===R)}));const Q=[];for(const de of t.mutations){const Re=up(e,de.key.path,t.batchId);g.push(h.delete(Re)),Q.push(de.key)}return nt.waitFor(g).next(()=>Q)}function df(o){if(!o)return 0;let e;if(o.document)e=o.document;else if(o.unknownDocument)e=o.unknownDocument;else{if(!o.noDocument)throw pn();e=o.noDocument}return JSON.stringify(e).length}Ia.DEFAULT_COLLECTION_PERCENTILE=10,Ia.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ia.DEFAULT=new Ia(41943040,Ia.DEFAULT_COLLECTION_PERCENTILE,Ia.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ia.DISABLED=new Ia(-1,0,0);class hf{constructor(e,t,l,h){this.userId=e,this.It=t,this.indexManager=l,this.referenceDelegate=h,this.In={}}static oe(e,t,l,h){er(""!==e.uid);const g=e.isAuthenticated()?e.uid:"";return new hf(g,t,l,h)}checkEmpty(e){let t=!0;const l=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cr(e).Z({index:"userMutationsIndex",range:l},(h,g,w)=>{t=!1,w.done()}).next(()=>t)}addMutationBatch(e,t,l,h){const g=gd(e),w=Cr(e);return w.add({}).next(R=>{er("number"==typeof R);const H=new nf(R,t,l,h),Q=function(ft,Pt,Ht){const Pn=Ht.baseMutations.map(Wi=>Oc(ft.re,Wi)),Hn=Ht.mutations.map(Wi=>Oc(ft.re,Wi));return{userId:Pt,batchId:Ht.batchId,localWriteTimeMs:Ht.localWriteTime.toMillis(),baseMutations:Pn,mutations:Hn}}(this.It,this.userId,H),de=[];let Re=new Ci((ft,Pt)=>mr(ft.canonicalString(),Pt.canonicalString()));for(const ft of h){const Pt=up(this.userId,ft.key.path,R);Re=Re.add(ft.key.path.popLast()),de.push(w.put(Q)),de.push(g.put(Pt,ih))}return Re.forEach(ft=>{de.push(this.indexManager.addToCollectionParentIndex(e,ft))}),e.addOnCommittedListener(()=>{this.In[R]=H.keys()}),nt.waitFor(de).next(()=>H)})}lookupMutationBatch(e,t){return Cr(e).get(t).next(l=>l?(er(l.userId===this.userId),Du(this.It,l)):null)}Tn(e,t){return this.In[t]?nt.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(l=>{if(l){const h=l.keys();return this.In[t]=h,h}return null})}getNextMutationBatchAfterBatchId(e,t){const l=t+1,h=IDBKeyRange.lowerBound([this.userId,l]);let g=null;return Cr(e).Z({index:"userMutationsIndex",range:h},(w,R,H)=>{R.userId===this.userId&&(er(R.batchId>=l),g=Du(this.It,R)),H.done()}).next(()=>g)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let l=-1;return Cr(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(h,g,w)=>{l=g.batchId,w.done()}).next(()=>l)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Cr(e).W("userMutationsIndex",t).next(l=>l.map(h=>Du(this.It,h)))}getAllMutationBatchesAffectingDocumentKey(e,t){const l=rh(this.userId,t.path),h=IDBKeyRange.lowerBound(l),g=[];return gd(e).Z({range:h},(w,R,H)=>{const[Q,de,Re]=w,ft=rc(de);if(Q===this.userId&&t.path.isEqual(ft))return Cr(e).get(Re).next(Pt=>{if(!Pt)throw pn();er(Pt.userId===this.userId),g.push(Du(this.It,Pt))});H.done()}).next(()=>g)}getAllMutationBatchesAffectingDocumentKeys(e,t){let l=new Ci(mr);const h=[];return t.forEach(g=>{const w=rh(this.userId,g.path),R=IDBKeyRange.lowerBound(w),H=gd(e).Z({range:R},(Q,de,Re)=>{const[ft,Pt,Ht]=Q,Pn=rc(Pt);ft===this.userId&&g.path.isEqual(Pn)?l=l.add(Ht):Re.done()});h.push(H)}),nt.waitFor(h).next(()=>this.En(e,l))}getAllMutationBatchesAffectingQuery(e,t){const l=t.path,h=l.length+1,g=rh(this.userId,l),w=IDBKeyRange.lowerBound(g);let R=new Ci(mr);return gd(e).Z({range:w},(H,Q,de)=>{const[Re,ft,Pt]=H,Ht=rc(ft);Re===this.userId&&l.isPrefixOf(Ht)?Ht.length===h&&(R=R.add(Pt)):de.done()}).next(()=>this.En(e,R))}En(e,t){const l=[],h=[];return t.forEach(g=>{h.push(Cr(e).get(g).next(w=>{if(null===w)throw pn();er(w.userId===this.userId),l.push(Du(this.It,w))}))}),nt.waitFor(h).next(()=>l)}removeMutationBatch(e,t){return _p(e.ie,this.userId,t).next(l=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),nt.forEach(l,h=>this.referenceDelegate.markPotentiallyOrphaned(e,h))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return nt.resolve();const l=IDBKeyRange.lowerBound([this.userId]),h=[];return gd(e).Z({range:l},(g,w,R)=>{if(g[0]===this.userId){const H=rc(g[1]);h.push(H)}else R.done()}).next(()=>{er(0===h.length)})})}containsKey(e,t){return $m(e,this.userId,t)}Rn(e){return kg(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function $m(o,e,t){const l=rh(e,t.path),h=l[1],g=IDBKeyRange.lowerBound(l);let w=!1;return gd(o).Z({range:g,X:!0},(R,H,Q)=>{const[de,Re,ft]=R;de===e&&Re===h&&(w=!0),Q.done()}).next(()=>w)}function Cr(o){return so(o,"mutations")}function gd(o){return so(o,"documentMutations")}function kg(o){return so(o,"mutationQueues")}class Vc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Vc(0)}static vn(){return new Vc(-1)}}class yp{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const l=new Vc(t.highestTargetId);return t.highestTargetId=l.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>nr.fromTimestamp(new vi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,l){return this.Vn(e).next(h=>(h.highestListenSequenceNumber=t,l&&(h.lastRemoteSnapshotVersion=l.toTimestamp()),t>h.highestListenSequenceNumber&&(h.highestListenSequenceNumber=t),this.Sn(e,h)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(l=>(l.targetCount+=1,this.Cn(t,l),this.Sn(e,l))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>aa(e).delete(t.targetId)).next(()=>this.Vn(e)).next(l=>(er(l.targetCount>0),l.targetCount-=1,this.Sn(e,l)))}removeTargets(e,t,l){let h=0;const g=[];return aa(e).Z((w,R)=>{const H=ah(R);H.sequenceNumber<=t&&null===l.get(H.targetId)&&(h++,g.push(this.removeTargetData(e,H)))}).next(()=>nt.waitFor(g)).next(()=>h)}forEachTarget(e,t){return aa(e).Z((l,h)=>{const g=ah(h);t(g)})}Vn(e){return Fg(e).get("targetGlobalKey").next(t=>(er(null!==t),t))}Sn(e,t){return Fg(e).put("targetGlobalKey",t)}Dn(e,t){return aa(e).put(lh(this.It,t))}Cn(e,t){let l=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,l=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,l=!0),l}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const l=B(t),h=IDBKeyRange.bound([l,Number.NEGATIVE_INFINITY],[l,Number.POSITIVE_INFINITY]);let g=null;return aa(e).Z({range:h,index:"queryTargetsIndex"},(w,R,H)=>{const Q=ah(R);ve(t,Q.target)&&(g=Q,H.done())}).next(()=>g)}addMatchingKeys(e,t,l){const h=[],g=Bc(e);return t.forEach(w=>{const R=Ka(w.path);h.push(g.put({targetId:l,path:R})),h.push(this.referenceDelegate.addReference(e,l,w))}),nt.waitFor(h)}removeMatchingKeys(e,t,l){const h=Bc(e);return nt.forEach(t,g=>{const w=Ka(g.path);return nt.waitFor([h.delete([l,w]),this.referenceDelegate.removeReference(e,l,g)])})}removeMatchingKeysForTargetId(e,t){const l=Bc(e),h=IDBKeyRange.bound([t],[t+1],!1,!0);return l.delete(h)}getMatchingKeysForTargetId(e,t){const l=IDBKeyRange.bound([t],[t+1],!1,!0),h=Bc(e);let g=Wr();return h.Z({range:l,X:!0},(w,R,H)=>{const Q=rc(w[1]),de=new x(Q);g=g.add(de)}).next(()=>g)}containsKey(e,t){const l=Ka(t.path),h=IDBKeyRange.bound([l],[Gs(l)],!1,!0);let g=0;return Bc(e).Z({index:"documentTargetsIndex",X:!0,range:h},([w,R],H,Q)=>{0!==w&&(g++,Q.done())}).next(()=>g>0)}se(e,t){return aa(e).get(t).next(l=>l?ah(l):null)}}function aa(o){return so(o,"targets")}function Fg(o){return so(o,"targetGlobal")}function Bc(o){return so(o,"targetDocuments")}function vp([o,e],[t,l]){const h=mr(o,t);return 0===h?mr(e,l):h}class ac{constructor(e){this.xn=e,this.buffer=new Ci(vp),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const l=this.buffer.last();vp(t,l)<0&&(this.buffer=this.buffer.delete(l).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Lg{constructor(e,t,l){this.garbageCollector=e,this.asyncQueue=t,this.localStore=l,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;$t("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(l){zs(l)?$t("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",l):yield Ts(l)}yield t.Fn(3e5)}))}}class Hm{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(l=>Math.floor(t/100*l))}nthSequenceNumber(e,t){if(0===t)return nt.resolve(To.at);const l=new ac(t);return this.$n.forEachTarget(e,h=>l.On(h.sequenceNumber)).next(()=>this.$n.Ln(e,h=>l.On(h))).next(()=>l.maxValue)}removeTargets(e,t,l){return this.$n.removeTargets(e,t,l)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?($t("LruGarbageCollector","Garbage collection skipped; disabled"),nt.resolve(Og)):this.getCacheSize(e).next(l=>l<this.params.cacheSizeCollectionThreshold?($t("LruGarbageCollector",`Garbage collection skipped; Cache size ${l} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Og):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let l,h,g,w,R,H,Q;const de=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Re=>(Re>this.params.maximumSequenceNumbersToCollect?($t("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Re}`),h=this.params.maximumSequenceNumbersToCollect):h=Re,w=Date.now(),this.nthSequenceNumber(e,h))).next(Re=>(l=Re,R=Date.now(),this.removeTargets(e,l,t))).next(Re=>(g=Re,H=Date.now(),this.removeOrphanedDocuments(e,l))).next(Re=>(Q=Date.now(),Qo()<=ye.in.DEBUG&&$t("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${w-de}ms\n\tDetermined least recently used ${h} in `+(R-w)+`ms\n\tRemoved ${g} targets in `+(H-R)+`ms\n\tRemoved ${Re} documents in `+(Q-H)+`ms\nTotal Duration: ${Q-de}ms`),nt.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:g,documentsRemoved:Re})))}}class Ug{constructor(e,t){this.db=e,this.garbageCollector=new Hm(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(l=>t.next(h=>l+h))}qn(e){let t=0;return this.Ln(e,l=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(l,h)=>t(h))}addReference(e,t,l){return Vg(e,l)}removeReference(e,t,l){return Vg(e,l)}removeTargets(e,t,l){return this.db.getTargetCache().removeTargets(e,t,l)}markPotentiallyOrphaned(e,t){return Vg(e,t)}Gn(e,t){return function(l,h){let g=!1;return kg(l).tt(w=>$m(l,w,h).next(R=>(R&&(g=!0),nt.resolve(!R)))).next(()=>g)}(e,t)}removeOrphanedDocuments(e,t){const l=this.db.getRemoteDocumentCache().newChangeBuffer(),h=[];let g=0;return this.Kn(e,(w,R)=>{if(R<=t){const H=this.Gn(e,w).next(Q=>{if(!Q)return g++,l.getEntry(e,w).next(()=>(l.removeEntry(w,nr.min()),Bc(e).delete([0,Ka(w.path)])))});h.push(H)}}).next(()=>nt.waitFor(h)).next(()=>l.apply(e)).next(()=>g)}removeTarget(e,t){const l=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,l)}updateLimboDocument(e,t){return Vg(e,t)}Kn(e,t){const l=Bc(e);let h,g=To.at;return l.Z({index:"documentTargetsIndex"},([w,R],{path:H,sequenceNumber:Q})=>{0===w?(g!==To.at&&t(new x(rc(h)),g),g=Q,h=H):g=To.at}).next(()=>{g!==To.at&&t(new x(rc(h)),g)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Vg(o,e){return Bc(o).put((l=o.currentSequenceNumber,{targetId:0,path:Ka(e.path),sequenceNumber:l}));var l}class Bg{constructor(){this.changes=new Ps(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ai.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const l=this.changes.get(t);return void 0!==l?nt.resolve(l):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cy{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,l){return lc(e).put(l)}removeEntry(e,t,l){return lc(e).delete(function(h,g){const w=h.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],sf(g),w[w.length-1]]}(t,l))}updateMetadata(e,t){return this.getMetadata(e).next(l=>(l.byteSize+=t,this.Qn(e,l)))}getEntry(e,t){let l=Ai.newInvalidDocument(t);return lc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(md(t))},(h,g)=>{l=this.jn(t,g)}).next(()=>l)}Wn(e,t){let l={size:0,document:Ai.newInvalidDocument(t)};return lc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(md(t))},(h,g)=>{l={document:this.jn(t,g),size:df(g)}}).next(()=>l)}getEntries(e,t){let l=io();return this.zn(e,t,(h,g)=>{const w=this.jn(h,g);l=l.insert(h,w)}).next(()=>l)}Hn(e,t){let l=io(),h=new Ni(x.comparator);return this.zn(e,t,(g,w)=>{const R=this.jn(g,w);l=l.insert(g,R),h=h.insert(g,df(w))}).next(()=>({documents:l,Jn:h}))}zn(e,t,l){if(t.isEmpty())return nt.resolve();let h=new Ci(Wm);t.forEach(H=>h=h.add(H));const g=IDBKeyRange.bound(md(h.first()),md(h.last())),w=h.getIterator();let R=w.getNext();return lc(e).Z({index:"documentKeyIndex",range:g},(H,Q,de)=>{const Re=x.fromSegments([...Q.prefixPath,Q.collectionGroup,Q.documentId]);for(;R&&Wm(R,Re)<0;)l(R,null),R=w.getNext();R&&R.isEqual(Re)&&(l(R,Q),R=w.hasNext()?w.getNext():null),R?de.j(md(R)):de.done()}).next(()=>{for(;R;)l(R,null),R=w.hasNext()?w.getNext():null})}getAllFromCollection(e,t,l){const h=[t.popLast().toArray(),t.lastSegment(),sf(l.readTime),l.documentKey.path.isEmpty()?"":l.documentKey.path.lastSegment()],g=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lc(e).W(IDBKeyRange.bound(h,g,!0)).next(w=>{let R=io();for(const H of w){const Q=this.jn(x.fromSegments(H.prefixPath.concat(H.collectionGroup,H.documentId)),H);R=R.insert(Q.key,Q)}return R})}getAllFromCollectionGroup(e,t,l,h){let g=io();const w=U_(t,l),R=U_(t,rr.max());return lc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(w,R,!0)},(H,Q,de)=>{const Re=this.jn(x.fromSegments(Q.prefixPath.concat(Q.collectionGroup,Q.documentId)),Q);g=g.insert(Re.key,Re),g.size===h&&de.done()}).next(()=>g)}newChangeBuffer(e){return new Ep(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return wp(e).get("remoteDocumentGlobalKey").next(t=>(er(!!t),t))}Qn(e,t){return wp(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const l=function Bm(o,e){let t;if(e.document)t=hd(o.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const l=x.fromSegments(e.noDocument.path),h=fd(e.noDocument.readTime);t=Ai.newNoDocument(l,h),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pn();{const l=x.fromSegments(e.unknownDocument.path),h=fd(e.unknownDocument.version);t=Ai.newUnknownDocument(l,h)}}return e.readTime&&t.setReadTime(function(l){const h=new vi(l[0],l[1]);return nr.fromTimestamp(h)}(e.readTime)),t}(this.It,t);if(!l.isNoDocument()||!l.version.isEqual(nr.min()))return l}return Ai.newInvalidDocument(e)}}function ph(o){return new cy(o)}class Ep extends Bg{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Ps(l=>l.toString(),(l,h)=>l.isEqual(h))}applyChanges(e){const t=[];let l=0,h=new Ci((g,w)=>mr(g.canonicalString(),w.canonicalString()));return this.changes.forEach((g,w)=>{const R=this.Xn.get(g);if(t.push(this.Yn.removeEntry(e,g,R.readTime)),w.isValidDocument()){const H=ic(this.Yn.It,w);h=h.add(g.path.popLast()),l+=df(H)-R.size,t.push(this.Yn.addEntry(e,g,H))}else if(l-=R.size,this.trackRemovals){const H=ic(this.Yn.It,w.convertToNoDocument(nr.min()));t.push(this.Yn.addEntry(e,g,H))}}),h.forEach(g=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,g))}),t.push(this.Yn.updateMetadata(e,l)),nt.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(l=>(this.Xn.set(t,{size:l.size,readTime:l.document.readTime}),l.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:l,Jn:h})=>(h.forEach((g,w)=>{this.Xn.set(g,{size:w,readTime:l.get(g).readTime})}),l))}}function wp(o){return so(o,"remoteDocumentGlobal")}function lc(o){return so(o,"remoteDocumentsV14")}function md(o){const e=o.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function U_(o,e){const t=e.documentKey.path.toArray();return[o,sf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Wm(o,e){const t=o.path.toArray(),l=e.path.toArray();let h=0;for(let g=0;g<t.length-2&&g<l.length-2;++g)if(h=mr(t[g],l[g]),h)return h;return h=mr(t.length,l.length),h||(h=mr(t[t.length-2],l[l.length-2]),h||mr(t[t.length-1],l[l.length-1]))}class V_{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Gm{constructor(e,t,l,h){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=l,this.indexManager=h}getDocument(e,t){let l=null;return this.documentOverlayCache.getOverlay(e,t).next(h=>(l=h,this.getBaseDocument(e,t,l))).next(h=>(null!==l&&Xu(l.mutation,h,qs.empty(),vi.now()),h))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(l=>this.getLocalViewOfDocuments(e,l,Wr()).next(()=>l))}getLocalViewOfDocuments(e,t,l=Wr()){const h=xi();return this.populateOverlays(e,h,t).next(()=>this.computeViews(e,t,h,l).next(g=>{let w=eu();return g.forEach((R,H)=>{w=w.insert(R,H.overlayedDocument)}),w}))}getOverlayedDocuments(e,t){const l=xi();return this.populateOverlays(e,l,t).next(()=>this.computeViews(e,t,l,Wr()))}populateOverlays(e,t,l){const h=[];return l.forEach(g=>{t.has(g)||h.push(g)}),this.documentOverlayCache.getOverlays(e,h).next(g=>{g.forEach((w,R)=>{t.set(w,R)})})}computeViews(e,t,l,h){let g=io();const w=Ol(),R=Ol();return t.forEach((H,Q)=>{const de=l.get(Q.key);h.has(Q.key)&&(void 0===de||de.mutation instanceof Jl)?g=g.insert(Q.key,Q):void 0!==de&&(w.set(Q.key,de.mutation.getFieldMask()),Xu(de.mutation,Q,de.mutation.getFieldMask(),vi.now()))}),this.recalculateAndSaveOverlays(e,g).next(H=>(H.forEach((Q,de)=>w.set(Q,de)),t.forEach((Q,de)=>{var Re;return R.set(Q,new V_(de,null!==(Re=w.get(Q))&&void 0!==Re?Re:null))}),R))}recalculateAndSaveOverlays(e,t){const l=Ol();let h=new Ni((w,R)=>w-R),g=Wr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(w=>{for(const R of w)R.keys().forEach(H=>{const Q=t.get(H);if(null===Q)return;let de=l.get(H)||qs.empty();de=R.applyToLocalView(Q,de),l.set(H,de);const Re=(h.get(R.batchId)||Wr()).add(H);h=h.insert(R.batchId,Re)})}).next(()=>{const w=[],R=h.getReverseIterator();for(;R.hasNext();){const H=R.getNext(),Q=H.key,de=H.value,Re=ud();de.forEach(ft=>{if(!g.has(ft)){const Pt=zo(t.get(ft),l.get(ft));null!==Pt&&Re.set(ft,Pt),g=g.add(ft)}}),w.push(this.documentOverlayCache.saveOverlays(e,Q,Re))}return nt.waitFor(w)}).next(()=>l)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(l=>this.recalculateAndSaveOverlays(e,l))}getDocumentsMatchingQuery(e,t,l){return x.isDocumentKey((h=t).path)&&null===h.collectionGroup&&0===h.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ul(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,l):this.getDocumentsMatchingCollectionQuery(e,t,l);var h}getNextDocuments(e,t,l,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,l,h).next(g=>{const w=h-g.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,l.largestBatchId,h-g.size):nt.resolve(xi());let R=-1,H=g;return w.next(Q=>nt.forEach(Q,(de,Re)=>(R<Re.largestBatchId&&(R=Re.largestBatchId),g.get(de)?nt.resolve():this.getBaseDocument(e,de,Re).next(ft=>{H=H.insert(de,ft)}))).next(()=>this.populateOverlays(e,Q,g)).next(()=>this.computeViews(e,H,Q,Wr())).next(de=>({batchId:R,changes:Qh(de)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new x(t)).next(l=>{let h=eu();return l.isFoundDocument()&&(h=h.insert(l.key,l)),h})}getDocumentsMatchingCollectionGroupQuery(e,t,l){const h=t.collectionGroup;let g=eu();return this.indexManager.getCollectionParents(e,h).next(w=>nt.forEach(w,R=>{const H=(Q=t,de=R.child(h),new go(de,null,Q.explicitOrderBy.slice(),Q.filters.slice(),Q.limit,Q.limitType,Q.startAt,Q.endAt));var Q,de;return this.getDocumentsMatchingCollectionQuery(e,H,l).next(Q=>{Q.forEach((de,Re)=>{g=g.insert(de,Re)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,t,l){let h;return this.remoteDocumentCache.getAllFromCollection(e,t.path,l).next(g=>(h=g,this.documentOverlayCache.getOverlaysForCollection(e,t.path,l.largestBatchId))).next(g=>{g.forEach((R,H)=>{const Q=H.getKey();null===h.get(Q)&&(h=h.insert(Q,Ai.newInvalidDocument(Q)))});let w=eu();return h.forEach((R,H)=>{const Q=g.get(R);void 0!==Q&&Xu(Q.mutation,H,qs.empty(),vi.now()),Dc(t,H)&&(w=w.insert(R,H))}),w})}getBaseDocument(e,t,l){return null===l||1===l.mutation.type?this.remoteDocumentCache.getEntry(e,t):nt.resolve(Ai.newInvalidDocument(t))}}class B_{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return nt.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var l;return this.Zn.set(t.id,{id:(l=t).id,version:l.version,createTime:ys(l.createTime)}),nt.resolve()}getNamedQuery(e,t){return nt.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(l=t).name,query:uh(l.bundledQuery),readTime:ys(l.readTime)}),nt.resolve();var l}}class zm{constructor(){this.overlays=new Ni(x.comparator),this.es=new Map}getOverlay(e,t){return nt.resolve(this.overlays.get(t))}getOverlays(e,t){const l=xi();return nt.forEach(t,h=>this.getOverlay(e,h).next(g=>{null!==g&&l.set(h,g)})).next(()=>l)}saveOverlays(e,t,l){return l.forEach((h,g)=>{this.ue(e,t,g)}),nt.resolve()}removeOverlaysForBatchId(e,t,l){const h=this.es.get(l);return void 0!==h&&(h.forEach(g=>this.overlays=this.overlays.remove(g)),this.es.delete(l)),nt.resolve()}getOverlaysForCollection(e,t,l){const h=xi(),g=t.length+1,w=new x(t.child("")),R=this.overlays.getIteratorFrom(w);for(;R.hasNext();){const H=R.getNext().value,Q=H.getKey();if(!t.isPrefixOf(Q.path))break;Q.path.length===g&&H.largestBatchId>l&&h.set(H.getKey(),H)}return nt.resolve(h)}getOverlaysForCollectionGroup(e,t,l,h){let g=new Ni((Q,de)=>Q-de);const w=this.overlays.getIterator();for(;w.hasNext();){const Q=w.getNext().value;if(Q.getKey().getCollectionGroup()===t&&Q.largestBatchId>l){let de=g.get(Q.largestBatchId);null===de&&(de=xi(),g=g.insert(Q.largestBatchId,de)),de.set(Q.getKey(),Q)}}const R=xi(),H=g.getIterator();for(;H.hasNext()&&(H.getNext().value.forEach((Q,de)=>R.set(Q,de)),!(R.size()>=h)););return nt.resolve(R)}ue(e,t,l){const h=this.overlays.get(l.key);if(null!==h){const w=this.es.get(h.largestBatchId).delete(l.key);this.es.set(h.largestBatchId,w)}this.overlays=this.overlays.insert(l.key,new cp(t,l));let g=this.es.get(t);void 0===g&&(g=Wr(),this.es.set(t,g)),this.es.set(t,g.add(l.key))}}class qm{constructor(){this.ns=new Ci(Mo.ss),this.rs=new Ci(Mo.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const l=new Mo(e,t);this.ns=this.ns.add(l),this.rs=this.rs.add(l)}us(e,t){e.forEach(l=>this.addReference(l,t))}removeReference(e,t){this.cs(new Mo(e,t))}hs(e,t){e.forEach(l=>this.removeReference(l,t))}ls(e){const t=new x(new Tr([])),l=new Mo(t,e),h=new Mo(t,e+1),g=[];return this.rs.forEachInRange([l,h],w=>{this.cs(w),g.push(w.key)}),g}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new x(new Tr([])),l=new Mo(t,e),h=new Mo(t,e+1);let g=Wr();return this.rs.forEachInRange([l,h],w=>{g=g.add(w.key)}),g}containsKey(e){const t=new Mo(e,0),l=this.ns.firstAfterOrEqual(t);return null!==l&&e.isEqual(l.key)}}class Mo{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return x.comparator(e.key,t.key)||mr(e._s,t._s)}static os(e,t){return mr(e._s,t._s)||x.comparator(e.key,t.key)}}class dy{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Ci(Mo.ss)}checkEmpty(e){return nt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,l,h){const g=this.ws;this.ws++;const w=new nf(g,t,l,h);this.mutationQueue.push(w);for(const R of h)this.gs=this.gs.add(new Mo(R.key,g)),this.indexManager.addToCollectionParentIndex(e,R.key.path.popLast());return nt.resolve(w)}lookupMutationBatch(e,t){return nt.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const h=this.ps(t+1),g=h<0?0:h;return nt.resolve(this.mutationQueue.length>g?this.mutationQueue[g]:null)}getHighestUnacknowledgedBatchId(){return nt.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return nt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const l=new Mo(t,0),h=new Mo(t,Number.POSITIVE_INFINITY),g=[];return this.gs.forEachInRange([l,h],w=>{const R=this.ys(w._s);g.push(R)}),nt.resolve(g)}getAllMutationBatchesAffectingDocumentKeys(e,t){let l=new Ci(mr);return t.forEach(h=>{const g=new Mo(h,0),w=new Mo(h,Number.POSITIVE_INFINITY);this.gs.forEachInRange([g,w],R=>{l=l.add(R._s)})}),nt.resolve(this.Is(l))}getAllMutationBatchesAffectingQuery(e,t){const l=t.path,h=l.length+1;let g=l;x.isDocumentKey(g)||(g=g.child(""));const w=new Mo(new x(g),0);let R=new Ci(mr);return this.gs.forEachWhile(H=>{const Q=H.key.path;return!!l.isPrefixOf(Q)&&(Q.length===h&&(R=R.add(H._s)),!0)},w),nt.resolve(this.Is(R))}Is(e){const t=[];return e.forEach(l=>{const h=this.ys(l);null!==h&&t.push(h)}),t}removeMutationBatch(e,t){er(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let l=this.gs;return nt.forEach(t.mutations,h=>{const g=new Mo(h.key,t.batchId);return l=l.delete(g),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)}).next(()=>{this.gs=l})}An(e){}containsKey(e,t){const l=new Mo(t,0),h=this.gs.firstAfterOrEqual(l);return nt.resolve(t.isEqual(h&&h.key))}performConsistencyCheck(e){return nt.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Zm{constructor(e){this.Es=e,this.docs=new Ni(x.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const l=t.key,h=this.docs.get(l),g=h?h.size:0,w=this.Es(t);return this.docs=this.docs.insert(l,{document:t.mutableCopy(),size:w}),this.size+=w-g,this.indexManager.addToCollectionParentIndex(e,l.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const l=this.docs.get(t);return nt.resolve(l?l.document.mutableCopy():Ai.newInvalidDocument(t))}getEntries(e,t){let l=io();return t.forEach(h=>{const g=this.docs.get(h);l=l.insert(h,g?g.document.mutableCopy():Ai.newInvalidDocument(h))}),nt.resolve(l)}getAllFromCollection(e,t,l){let h=io();const g=new x(t.child("")),w=this.docs.getIteratorFrom(g);for(;w.hasNext();){const{key:R,value:{document:H}}=w.getNext();if(!t.isPrefixOf(R.path))break;R.path.length>t.length+1||Fn(bn(H),l)<=0||(h=h.insert(H.key,H.mutableCopy()))}return nt.resolve(h)}getAllFromCollectionGroup(e,t,l,h){pn()}As(e,t){return nt.forEach(this.docs,l=>t(l))}newChangeBuffer(e){return new Km(this)}getSize(e){return nt.resolve(this.size)}}class Km extends Bg{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((l,h)=>{h.isValidDocument()?t.push(this.Yn.addEntry(e,h)):this.Yn.removeEntry(l)}),nt.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class j_{constructor(e){this.persistence=e,this.Rs=new Ps(t=>B(t),ve),this.lastRemoteSnapshotVersion=nr.min(),this.highestTargetId=0,this.bs=0,this.Ps=new qm,this.targetCount=0,this.vs=Vc.Pn()}forEachTarget(e,t){return this.Rs.forEach((l,h)=>t(h)),nt.resolve()}getLastRemoteSnapshotVersion(e){return nt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return nt.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),nt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,l){return l&&(this.lastRemoteSnapshotVersion=l),t>this.bs&&(this.bs=t),nt.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Vc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,nt.resolve()}updateTargetData(e,t){return this.Dn(t),nt.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,nt.resolve()}removeTargets(e,t,l){let h=0;const g=[];return this.Rs.forEach((w,R)=>{R.sequenceNumber<=t&&null===l.get(R.targetId)&&(this.Rs.delete(w),g.push(this.removeMatchingKeysForTargetId(e,R.targetId)),h++)}),nt.waitFor(g).next(()=>h)}getTargetCount(e){return nt.resolve(this.targetCount)}getTargetData(e,t){const l=this.Rs.get(t)||null;return nt.resolve(l)}addMatchingKeys(e,t,l){return this.Ps.us(t,l),nt.resolve()}removeMatchingKeys(e,t,l){this.Ps.hs(t,l);const h=this.persistence.referenceDelegate,g=[];return h&&t.forEach(w=>{g.push(h.markPotentiallyOrphaned(e,w))}),nt.waitFor(g)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),nt.resolve()}getMatchingKeysForTargetId(e,t){const l=this.Ps.ds(t);return nt.resolve(l)}containsKey(e,t){return nt.resolve(this.Ps.containsKey(t))}}class Cp{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new To(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new j_(this),this.indexManager=new L_,this.remoteDocumentCache=new Zm(l=>this.referenceDelegate.xs(l)),this.It=new dp(t),this.Ns=new B_(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let l=this.Vs[e.toKey()];return l||(l=new dy(t,this.referenceDelegate),this.Vs[e.toKey()]=l),l}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,l){$t("MemoryPersistence","Starting transaction:",e);const h=new hy(this.Ss.next());return this.referenceDelegate.ks(),l(h).next(g=>this.referenceDelegate.Os(h).next(()=>g)).toPromise().then(g=>(h.raiseOnCommittedEvent(),g))}Ms(e,t){return nt.or(Object.values(this.Vs).map(l=>()=>l.containsKey(e,t)))}}class hy extends Br{constructor(e){super(),this.currentSequenceNumber=e}}class jg{constructor(e){this.persistence=e,this.Fs=new qm,this.$s=null}static Bs(e){return new jg(e)}get Ls(){if(this.$s)return this.$s;throw pn()}addReference(e,t,l){return this.Fs.addReference(l,t),this.Ls.delete(l.toString()),nt.resolve()}removeReference(e,t,l){return this.Fs.removeReference(l,t),this.Ls.add(l.toString()),nt.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),nt.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(h=>this.Ls.add(h.toString()));const l=this.persistence.getTargetCache();return l.getMatchingKeysForTargetId(e,t.targetId).next(h=>{h.forEach(g=>this.Ls.add(g.toString()))}).next(()=>l.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nt.forEach(this.Ls,l=>{const h=x.fromPath(l);return this.Us(e,h).next(g=>{g||t.removeEntry(h,nr.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(l=>{l?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return nt.or([()=>nt.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class fy{constructor(e){this.It=e}$(e,t,l,h){const g=new ds("createOrUpgrade",t);var R;l<1&&h>=1&&(e.createObjectStore("owner"),(R=e).createObjectStore("mutationQueues",{keyPath:"userId"}),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iu,{unique:!0}),R.createObjectStore("documentMutations"),$_(e),function(R){R.createObjectStore("remoteDocuments")}(e));let w=nt.resolve();return l<3&&h>=3&&(0!==l&&(function(R){R.deleteObjectStore("targetDocuments"),R.deleteObjectStore("targets"),R.deleteObjectStore("targetGlobal")}(e),$_(e)),w=w.next(()=>function(R){const H=R.store("targetGlobal"),Q={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:nr.min().toTimestamp(),targetCount:0};return H.put("targetGlobalKey",Q)}(g))),l<4&&h>=4&&(0!==l&&(w=w.next(()=>function(R,H){return H.store("mutations").W().next(Q=>{R.deleteObjectStore("mutations"),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iu,{unique:!0});const de=H.store("mutations"),Re=Q.map(ft=>de.put(ft));return nt.waitFor(Re)})}(e,g))),w=w.next(()=>{!function(R){R.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),l<5&&h>=5&&(w=w.next(()=>this.qs(g))),l<6&&h>=6&&(w=w.next(()=>(function(R){R.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(g)))),l<7&&h>=7&&(w=w.next(()=>this.Gs(g))),l<8&&h>=8&&(w=w.next(()=>this.Qs(e,g))),l<9&&h>=9&&(w=w.next(()=>{!function(R){R.objectStoreNames.contains("remoteDocumentChanges")&&R.deleteObjectStore("remoteDocumentChanges")}(e)})),l<10&&h>=10&&(w=w.next(()=>this.js(g))),l<11&&h>=11&&(w=w.next(()=>{(function(R){R.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(R){R.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),l<12&&h>=12&&(w=w.next(()=>{!function(R){const H=R.createObjectStore("documentOverlays",{keyPath:Fm});H.createIndex("collectionPathOverlayIndex",Sg,{unique:!1}),H.createIndex("collectionGroupOverlayIndex",xg,{unique:!1})}(e)})),l<13&&h>=13&&(w=w.next(()=>function(R){const H=R.createObjectStore("remoteDocumentsV14",{keyPath:sh});H.createIndex("documentKeyIndex",Tu),H.createIndex("collectionGroupIndex",Tg)}(e)).next(()=>this.Ws(e,g)).next(()=>e.deleteObjectStore("remoteDocuments"))),l<14&&h>=14&&(w=w.next(()=>this.zs(e,g))),l<15&&h>=15&&(w=w.next(()=>function(R){R.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),R.createObjectStore("indexState",{keyPath:uy}).createIndex("sequenceNumberIndex",oh,{unique:!1}),R.createObjectStore("indexEntries",{keyPath:ef}).createIndex("documentKeyIndex",km,{unique:!1})}(e))),w}Ks(e){let t=0;return e.store("remoteDocuments").Z((l,h)=>{t+=df(h)}).next(()=>{const l={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",l)})}qs(e){const t=e.store("mutationQueues"),l=e.store("mutations");return t.W().next(h=>nt.forEach(h,g=>{const w=IDBKeyRange.bound([g.userId,-1],[g.userId,g.lastAcknowledgedBatchId]);return l.W("userMutationsIndex",w).next(R=>nt.forEach(R,H=>{er(H.userId===g.userId);const Q=Du(this.It,H);return _p(e,g.userId,Q).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),l=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(h=>{const g=[];return l.Z((w,R)=>{const H=new Tr(w),Q=[0,Ka(H)];g.push(t.get(Q).next(de=>de?nt.resolve():t.put({targetId:0,path:Ka(H),sequenceNumber:h.highestListenSequenceNumber})))}).next(()=>nt.waitFor(g))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Om});const l=t.store("collectionParents"),h=new pp,g=w=>{if(h.add(w)){const R=w.lastSegment(),H=w.popLast();return l.put({collectionId:R,parent:Ka(H)})}};return t.store("remoteDocuments").Z({X:!0},(w,R)=>{const H=new Tr(w);return g(H.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([w,R,H],Q)=>{const de=rc(R);return g(de.popLast())}))}js(e){const t=e.store("targets");return t.Z((l,h)=>{const g=ah(h),w=lh(this.It,g);return t.put(w)})}Ws(e,t){const l=t.store("remoteDocuments"),h=[];return l.Z((g,w)=>{const R=t.store("remoteDocumentsV14"),H=(Q=w,Q.document?new x(Tr.fromString(Q.document.name).popFirst(5)):Q.noDocument?x.fromSegments(Q.noDocument.path):Q.unknownDocument?x.fromSegments(Q.unknownDocument.path):pn()).path.toArray();var Q;const de={prefixPath:H.slice(0,H.length-2),collectionGroup:H[H.length-2],documentId:H[H.length-1],readTime:w.readTime||[0,0],unknownDocument:w.unknownDocument,noDocument:w.noDocument,document:w.document,hasCommittedMutations:!!w.hasCommittedMutations};h.push(R.put(de))}).next(()=>nt.waitFor(h))}zs(e,t){const l=t.store("mutations"),h=ph(this.It),g=new Cp(jg.Bs,this.It.re);return l.W().next(w=>{const R=new Map;return w.forEach(H=>{var Q;let de=null!==(Q=R.get(H.userId))&&void 0!==Q?Q:Wr();Du(this.It,H).keys().forEach(Re=>de=de.add(Re)),R.set(H.userId,de)}),nt.forEach(R,(H,Q)=>{const de=new Bi(Q),Re=Fc.oe(this.It,de),ft=g.getIndexManager(de),Pt=hf.oe(de,this.It,ft,g.referenceDelegate);return new Gm(h,Pt,Re,ft).recalculateAndSaveOverlaysForDocumentKeys(new tf(t,To.at),H).next()})})}}function $_(o){o.createObjectStore("targetDocuments",{keyPath:Dg}).createIndex("documentTargetsIndex",Ag,{unique:!0}),o.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Nm,{unique:!0}),o.createObjectStore("targetGlobal")}const Ym="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Qm{constructor(e,t,l,h,g,w,R,H,Q,de,Re=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=l,this.Hs=g,this.window=w,this.document=R,this.Js=Q,this.Ys=de,this.Xs=Re,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=ft=>Promise.resolve(),!Qm.C())throw new Gt(mt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ug(this,h),this.ii=t+"main",this.It=new dp(H),this.ri=new rs(this.ii,this.Xs,new fy(this.It)),this.Cs=new yp(this.referenceDelegate,this.It),this.remoteDocumentCache=ph(this.It),this.Ns=new uf,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===de&&gr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Gt(mt.FAILED_PRECONDITION,Ym);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new To(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var l=(0,_.Z)(function*(h){if(t.started)return e(h)});return function(h){return l.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,_.Z)(function*(l){null===l.newVersion&&(yield e())});return function(l){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,_.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>$g(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(zs(e))return $t("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $t("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return bp(e).get("owner").next(t=>nt.resolve(this.mi(t)))}gi(e){return $g(e).delete(this.clientId)}yi(){var e=this;return(0,_.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",l=>{const h=so(l,"clientMetadata");return h.W().next(g=>{const w=e.Ii(g,18e5),R=g.filter(H=>-1===w.indexOf(H));return nt.forEach(R,H=>h.delete(H.clientId)).next(()=>R)})}).catch(()=>[]);if(e.oi)for(const l of t)e.oi.removeItem(e.Ti(l.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?nt.resolve(!0):bp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Gt(mt.FAILED_PRECONDITION,Ym);return!1}}return!(!this.networkEnabled||!this.inForeground)||$g(e).W().next(l=>void 0===this.Ii(l,5e3).find(h=>{if(this.clientId!==h.clientId){const w=!this.inForeground&&h.inForeground,R=this.networkEnabled===h.networkEnabled;if(!this.networkEnabled&&h.networkEnabled||w&&R)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&$t("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const l=new tf(t,To.at);return e._i(l).next(()=>e.gi(l))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(l=>this.pi(l.updateTimeMs,t)&&!this.Ei(l.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>$g(e).W().next(t=>this.Ii(t,18e5).map(l=>l.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return hf.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mp(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Fc.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,l){$t("IndexedDbPersistence","Starting transaction:",e);const h="readonly"===t?"readonly":"readwrite",g=15===(w=this.Xs)?N_:14===w?Mg:13===w?Vm:12===w?Um:11===w?Lm:void pn();var w;let R;return this.ri.runTransaction(e,h,g,H=>(R=new tf(H,this.Ss?this.Ss.next():To.at),"readwrite-primary"===t?this.fi(R).next(Q=>!!Q||this.di(R)).next(Q=>{if(!Q)throw gr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Gt(mt.FAILED_PRECONDITION,Vr);return l(R)}).next(Q=>this.wi(R).next(()=>Q)):this.Vi(R).next(()=>l(R)))).then(H=>(R.raiseOnCommittedEvent(),H))}Vi(e){return bp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Gt(mt.FAILED_PRECONDITION,Ym)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bp(e).put("owner",t)}static C(){return rs.C()}_i(e){const t=bp(e);return t.get("owner").next(l=>this.mi(l)?($t("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):nt.resolve())}pi(e,t){const l=Date.now();return!(e<l-t||e>l&&(gr(`Detected an update time that is in the future: ${e} > ${l}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Te.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const l=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return $t("IndexedDbPersistence",`Client '${e}' ${l?"is":"is not"} zombied in LocalStorage`),l}catch(l){return gr("IndexedDbPersistence","Failed to get zombied client id.",l),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){gr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function bp(o){return so(o,"owner")}function $g(o){return so(o,"clientMetadata")}function Jm(o,e){let t=o.projectId;return o.isDefaultDatabase||(t+="."+o.database),"firestore/"+e+"/"+t+"/"}class Xm{constructor(e,t,l,h){this.targetId=e,this.fromCache=t,this.Si=l,this.Di=h}static Ci(e,t){let l=Wr(),h=Wr();for(const g of t.docChanges)switch(g.type){case 0:l=l.add(g.doc.key);break;case 1:h=h.add(g.doc.key)}return new Xm(e,t.fromCache,l,h)}}class uc{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,l,h){return this.ki(e,t).next(g=>g||this.Oi(e,t,h,l)).next(g=>g||this.Mi(e,t))}ki(e,t){if(zd(t))return nt.resolve(null);let l=Bs(t);return this.indexManager.getIndexType(e,l).next(h=>0===h?null:(null!==t.limit&&1===h&&(t=qd(t,null,"F"),l=Bs(t)),this.indexManager.getDocumentsMatchingTarget(e,l).next(g=>{const w=Wr(...g);return this.Ni.getDocuments(e,w).next(R=>this.indexManager.getMinOffset(e,l).next(H=>{const Q=this.Fi(t,R);return this.$i(t,Q,w,H.readTime)?this.ki(e,qd(t,null,"F")):this.Bi(e,Q,t,H)}))})))}Oi(e,t,l,h){return zd(t)||h.isEqual(nr.min())?this.Mi(e,t):this.Ni.getDocuments(e,l).next(g=>{const w=this.Fi(t,g);return this.$i(t,w,l,h)?this.Mi(e,t):(Qo()<=ye.in.DEBUG&&$t("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),Yu(t)),this.Bi(e,w,t,Et(h,-1)))})}Fi(e,t){let l=new Ci(cl(e));return t.forEach((h,g)=>{Dc(e,g)&&(l=l.add(g))}),l}$i(e,t,l,h){if(null===e.limit)return!1;if(l.size!==t.size)return!0;const g="F"===e.limitType?t.last():t.first();return!!g&&(g.hasPendingWrites||g.version.compareTo(h)>0)}Mi(e,t){return Qo()<=ye.in.DEBUG&&$t("QueryEngine","Using full collection scan to execute query:",Yu(t)),this.Ni.getDocumentsMatchingQuery(e,t,rr.min())}Bi(e,t,l,h){return this.Ni.getDocumentsMatchingQuery(e,l,h).next(g=>(t.forEach(w=>{g=g.insert(w.key,w)}),g))}}class Hg{constructor(e,t,l,h){this.persistence=e,this.Li=t,this.It=h,this.Ui=new Ni(mr),this.qi=new Ps(g=>B(g),ve),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(l)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gm(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Ip(o,e,t,l){return new Hg(o,e,t,l)}function Fl(o,e){return _d.apply(this,arguments)}function _d(){return _d=(0,_.Z)(function*(o,e){const t=mn(o);return yield t.persistence.runTransaction("Handle user change","readonly",l=>{let h;return t.mutationQueue.getAllMutationBatches(l).next(g=>(h=g,t.Qi(e),t.mutationQueue.getAllMutationBatches(l))).next(g=>{const w=[],R=[];let H=Wr();for(const Q of h){w.push(Q.batchId);for(const de of Q.mutations)H=H.add(de.key)}for(const Q of g){R.push(Q.batchId);for(const de of Q.mutations)H=H.add(de.key)}return t.localDocuments.getDocuments(l,H).next(Q=>({ji:Q,removedBatchIds:w,addedBatchIds:R}))})})}),_d.apply(this,arguments)}function Tp(o,e){const t=mn(o);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",l=>{const h=e.batch.keys(),g=t.Gi.newChangeBuffer({trackRemovals:!0});return function(w,R,H,Q){const de=H.batch,Re=de.keys();let ft=nt.resolve();return Re.forEach(Pt=>{ft=ft.next(()=>Q.getEntry(R,Pt)).next(Ht=>{const Pn=H.docVersions.get(Pt);er(null!==Pn),Ht.version.compareTo(Pn)<0&&(de.applyToRemoteDocument(Ht,H),Ht.isValidDocument()&&(Ht.setReadTime(H.commitVersion),Q.addEntry(Ht)))})}),ft.next(()=>w.mutationQueue.removeMutationBatch(R,de))}(t,l,e,g).next(()=>g.apply(l)).next(()=>t.mutationQueue.performConsistencyCheck(l)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(l,h,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,function(w){let R=Wr();for(let H=0;H<w.mutationResults.length;++H)w.mutationResults[H].transformResults.length>0&&(R=R.add(w.batch.mutations[H].key));return R}(e))).next(()=>t.localDocuments.getDocuments(l,h))})}function Ll(o){const e=mn(o);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function ff(o,e){const t=mn(o),l=e.snapshotVersion;let h=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",g=>{const w=t.Gi.newChangeBuffer({trackRemovals:!0});h=t.Ui;const R=[];e.targetChanges.forEach((de,Re)=>{const ft=h.get(Re);if(!ft)return;R.push(t.Cs.removeMatchingKeys(g,de.removedDocuments,Re).next(()=>t.Cs.addMatchingKeys(g,de.addedDocuments,Re)));let Pt=ft.withSequenceNumber(g.currentSequenceNumber);var Ht,Pn,Hn;e.targetMismatches.has(Re)?Pt=Pt.withResumeToken(Di.EMPTY_BYTE_STRING,nr.min()).withLastLimboFreeSnapshotVersion(nr.min()):de.resumeToken.approximateByteSize()>0&&(Pt=Pt.withResumeToken(de.resumeToken,l)),h=h.insert(Re,Pt),Pn=Pt,Hn=de,(0===(Ht=ft).resumeToken.approximateByteSize()||Pn.snapshotVersion.toMicroseconds()-Ht.snapshotVersion.toMicroseconds()>=3e8||Hn.addedDocuments.size+Hn.modifiedDocuments.size+Hn.removedDocuments.size>0)&&R.push(t.Cs.updateTargetData(g,Pt))});let H=io(),Q=Wr();if(e.documentUpdates.forEach(de=>{e.resolvedLimboDocuments.has(de)&&R.push(t.persistence.referenceDelegate.updateLimboDocument(g,de))}),R.push(Ul(g,w,e.documentUpdates).next(de=>{H=de.Wi,Q=de.zi})),!l.isEqual(nr.min())){const de=t.Cs.getLastRemoteSnapshotVersion(g).next(Re=>t.Cs.setTargetsMetadata(g,g.currentSequenceNumber,l));R.push(de)}return nt.waitFor(R).next(()=>w.apply(g)).next(()=>t.localDocuments.getLocalViewOfDocuments(g,H,Q)).next(()=>H)}).then(g=>(t.Ui=h,g))}function Ul(o,e,t){let l=Wr(),h=Wr();return t.forEach(g=>l=l.add(g)),e.getEntries(o,l).next(g=>{let w=io();return t.forEach((R,H)=>{const Q=g.get(R);H.isFoundDocument()!==Q.isFoundDocument()&&(h=h.add(R)),H.isNoDocument()&&H.version.isEqual(nr.min())?(e.removeEntry(R,H.readTime),w=w.insert(R,H)):!Q.isValidDocument()||H.version.compareTo(Q.version)>0||0===H.version.compareTo(Q.version)&&Q.hasPendingWrites?(e.addEntry(H),w=w.insert(R,H)):$t("LocalStore","Ignoring outdated watch update for ",R,". Current version:",Q.version," Watch version:",H.version)}),{Wi:w,zi:h}})}function pf(o,e){const t=mn(o);return t.persistence.runTransaction("Get next mutation batch","readonly",l=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(l,e)))}function cc(o,e){const t=mn(o);return t.persistence.runTransaction("Allocate target","readwrite",l=>{let h;return t.Cs.getTargetData(l,e).next(g=>g?(h=g,nt.resolve(h)):t.Cs.allocateTargetId(l).next(w=>(h=new kc(e,w,0,l.currentSequenceNumber),t.Cs.addTargetData(l,h).next(()=>h))))}).then(l=>{const h=t.Ui.get(l.targetId);return(null===h||l.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(l.targetId,l),t.qi.set(e,l.targetId)),l})}function su(o,e,t){return Qa.apply(this,arguments)}function Qa(){return Qa=(0,_.Z)(function*(o,e,t){const l=mn(o),h=l.Ui.get(e),g=t?"readwrite":"readwrite-primary";try{t||(yield l.persistence.runTransaction("Release target",g,w=>l.persistence.referenceDelegate.removeTarget(w,h)))}catch(w){if(!zs(w))throw w;$t("LocalStore",`Failed to update sequence numbers for target ${e}: ${w}`)}l.Ui=l.Ui.remove(e),l.qi.delete(h.target)}),Qa.apply(this,arguments)}function jc(o,e,t){const l=mn(o);let h=nr.min(),g=Wr();return l.persistence.runTransaction("Execute query","readonly",w=>function(R,H,Q){const de=mn(R),Re=de.qi.get(Q);return void 0!==Re?nt.resolve(de.Ui.get(Re)):de.Cs.getTargetData(H,Q)}(l,w,Bs(e)).next(R=>{if(R)return h=R.lastLimboFreeSnapshotVersion,l.Cs.getMatchingKeysForTargetId(w,R.targetId).next(H=>{g=H})}).next(()=>l.Li.getDocumentsMatchingQuery(w,e,t?h:nr.min(),t?g:Wr())).next(R=>(yd(l,wu(e),R),{documents:R,Hi:g})))}function Wg(o,e){const t=mn(o),l=mn(t.Cs),h=t.Ui.get(e);return h?Promise.resolve(h.target):t.persistence.runTransaction("Get target data","readonly",g=>l.se(g,e).next(w=>w?w.target:null))}function Gg(o,e){const t=mn(o),l=t.Ki.get(e)||nr.min();return t.persistence.runTransaction("Get new document changes","readonly",h=>t.Gi.getAllFromCollectionGroup(h,e,Et(l,-1),Number.MAX_SAFE_INTEGER)).then(h=>(yd(t,e,h),h))}function yd(o,e,t){let l=o.Ki.get(e)||nr.min();t.forEach((h,g)=>{g.readTime.compareTo(l)>0&&(l=g.readTime)}),o.Ki.set(e,l)}function gf(){return gf=(0,_.Z)(function*(o,e,t,l){const h=mn(o);let g=Wr(),w=io();for(const Q of t){const de=e.Ji(Q.metadata.name);Q.document&&(g=g.add(de));const Re=e.Yi(Q);Re.setReadTime(e.Xi(Q.metadata.readTime)),w=w.insert(de,Re)}const R=h.Gi.newChangeBuffer({trackRemovals:!0}),H=yield cc(h,(Q=l,Bs(Ml(Tr.fromString(`__bundle__/docs/${Q}`)))));var Q;return h.persistence.runTransaction("Apply bundle documents","readwrite",Q=>Ul(Q,R,w).next(de=>(R.apply(Q),de)).next(de=>h.Cs.removeMatchingKeysForTargetId(Q,H.targetId).next(()=>h.Cs.addMatchingKeys(Q,g,H.targetId)).next(()=>h.localDocuments.getLocalViewOfDocuments(Q,de.Wi,de.zi)).next(()=>de.Wi)))}),gf.apply(this,arguments)}function Hc(o,e){return Xt.apply(this,arguments)}function Xt(){return Xt=(0,_.Z)(function*(o,e,t=Wr()){const l=yield cc(o,Bs(uh(e.bundledQuery))),h=mn(o);return h.persistence.runTransaction("Save named query","readwrite",g=>{const w=ys(e.readTime);if(l.snapshotVersion.compareTo(w)>=0)return h.Ns.saveNamedQuery(g,e);const R=l.withResumeToken(Di.EMPTY_BYTE_STRING,w);return h.Ui=h.Ui.insert(R.targetId,R),h.Cs.updateTargetData(g,R).next(()=>h.Cs.removeMatchingKeysForTargetId(g,l.targetId)).next(()=>h.Cs.addMatchingKeys(g,t,l.targetId)).next(()=>h.Ns.saveNamedQuery(g,e))})}),Xt.apply(this,arguments)}function Wc(o,e){return`firestore_clients_${o}_${e}`}function zg(o,e,t){let l=`firestore_mutations_${o}_${t}`;return e.isAuthenticated()&&(l+=`_${e.uid}`),l}function vd(o,e){return`firestore_targets_${o}_${e}`}class Ed{constructor(e,t,l,h){this.user=e,this.batchId=t,this.state=l,this.error=h}static Zi(e,t,l){const h=JSON.parse(l);let g,w="object"==typeof h&&-1!==["pending","acknowledged","rejected"].indexOf(h.state)&&(void 0===h.error||"object"==typeof h.error);return w&&h.error&&(w="string"==typeof h.error.message&&"string"==typeof h.error.code,w&&(g=new Gt(h.error.code,h.error.message))),w?new Ed(e,t,h.state,g):(gr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${l}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dc{constructor(e,t,l){this.targetId=e,this.state=t,this.error=l}static Zi(e,t){const l=JSON.parse(t);let h,g="object"==typeof l&&-1!==["not-current","current","rejected"].indexOf(l.state)&&(void 0===l.error||"object"==typeof l.error);return g&&l.error&&(g="string"==typeof l.error.message&&"string"==typeof l.error.code,g&&(h=new Gt(l.error.code,l.error.message))),g?new dc(e,l.state,h):(gr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ou{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const l=JSON.parse(t);let h="object"==typeof l&&l.activeTargetIds instanceof Array,g=b();for(let w=0;h&&w<l.activeTargetIds.length;++w)h=wa(l.activeTargetIds[w]),g=g.add(l.activeTargetIds[w]);return h?new ou(e,g):(gr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class wd{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new wd(t.clientId,t.onlineState):(gr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Cd{constructor(){this.activeTargetIds=b()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Dp{constructor(e,t,l,h,g){this.window=e,this.Hs=t,this.persistenceKey=l,this.sr=h,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Ni(mr),this.started=!1,this.cr=[];const w=l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=g,this.ar=Wc(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Cd),this.lr=new RegExp(`^firestore_clients_${w}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${w}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${w}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(R){return`firestore_bundle_loaded_v2_${R}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_.Z)(function*(){const t=yield e.syncEngine.vi();for(const h of t){if(h===e.sr)continue;const g=e.getItem(Wc(e.persistenceKey,h));if(g){const w=ou.Zi(h,g);w&&(e.ur=e.ur.insert(w.clientId,w))}}e.gr();const l=e.storage.getItem(e.wr);if(l){const h=e.yr(l);h&&e.pr(h)}for(const h of e.cr)e.rr(h);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((l,h)=>{h.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,l){this.Tr(e,t,l),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const l=this.storage.getItem(vd(this.persistenceKey,e));if(l){const h=dc.Zi(e,l);h&&(t=h.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(vd(this.persistenceKey,e))}updateQueryState(e,t,l){this.Rr(e,t,l)}handleUserChange(e,t,l){t.forEach(h=>{this.Er(h)}),this.currentUser=e,l.forEach(h=>{this.addPendingMutation(h)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $t("SharedClientState","READ",e,t),t}setItem(e,t){$t("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){$t("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const l=e;if(l.storageArea===this.storage){if($t("SharedClientState","EVENT",l.key,l.newValue),l.key===this.ar)return void gr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,_.Z)(function*(){if(t.started){if(null!==l.key)if(t.lr.test(l.key)){if(null==l.newValue){const h=t.vr(l.key);return t.Vr(h,null)}{const h=t.Sr(l.key,l.newValue);if(h)return t.Vr(h.clientId,h)}}else if(t.dr.test(l.key)){if(null!==l.newValue){const h=t.Dr(l.key,l.newValue);if(h)return t.Cr(h)}}else if(t._r.test(l.key)){if(null!==l.newValue){const h=t.Nr(l.key,l.newValue);if(h)return t.kr(h)}}else if(l.key===t.wr){if(null!==l.newValue){const h=t.yr(l.newValue);if(h)return t.pr(h)}}else if(l.key===t.hr){const h=function(g){let w=To.at;if(null!=g)try{const R=JSON.parse(g);er("number"==typeof R),w=R}catch(R){gr("SharedClientState","Failed to read sequence number from WebStorage",R)}return w}(l.newValue);h!==To.at&&t.sequenceNumberHandler(h)}else if(l.key===t.mr){const h=t.Or(l.newValue);yield Promise.all(h.map(g=>t.syncEngine.Mr(g)))}}else t.cr.push(l)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,l){const h=new Ed(this.currentUser,e,t,l),g=zg(this.persistenceKey,this.currentUser,e);this.setItem(g,h.tr())}Er(e){const t=zg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,l){const h=vd(this.persistenceKey,e),g=new dc(e,t,l);this.setItem(h,g.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const l=this.vr(e);return ou.Zi(l,t)}Dr(e,t){const l=this.dr.exec(e),h=Number(l[1]);return Ed.Zi(new Bi(void 0!==l[2]?l[2]:null),h,t)}Nr(e,t){const l=this._r.exec(e),h=Number(l[1]);return dc.Zi(h,t)}yr(e){return wd.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,_.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);$t("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const l=t?this.ur.insert(e,t):this.ur.remove(e),h=this.Ir(this.ur),g=this.Ir(l),w=[],R=[];return g.forEach(H=>{h.has(H)||w.push(H)}),h.forEach(H=>{g.has(H)||R.push(H)}),this.syncEngine.Br(w,R).then(()=>{this.ur=l})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=b();return e.forEach((l,h)=>{t=t.unionWith(h.activeTargetIds)}),t}}class mf{constructor(){this.Lr=new Cd,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,l){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,l){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Cd,Promise.resolve()}handleUserChange(e,t,l){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ap{qr(e){}shutdown(){}}class Sp{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){$t("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){$t("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const xp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qg{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class hc extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,l,h,g){const w=this.ho(e,t);$t("RestConnection","Sending: ",w,l);const R={};return this.lo(R,h,g),this.fo(e,w,R,l).then(H=>($t("RestConnection","Received: ",H),H),H=>{throw eo("RestConnection",`${e} failed with error: `,H,"url: ",w,"request:",l),H})}_o(e,t,l,h,g,w){return this.ao(e,t,l,h,g)}lo(e,t,l){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ws,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((h,g)=>e[g]=h),l&&l.headers.forEach((h,g)=>e[g]=h)}ho(e,t){return`${this.oo}/v1/${t}:${xp[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,l,h){return new Promise((g,w)=>{const R=new id;R.setWithCredentials(!0),R.listenOnce(Fa.COMPLETE,()=>{try{switch(R.getLastErrorCode()){case yi.NO_ERROR:const Q=R.getResponseJson();$t("Connection","XHR received:",JSON.stringify(Q)),g(Q);break;case yi.TIMEOUT:$t("Connection",'RPC "'+e+'" timed out'),w(new Gt(mt.DEADLINE_EXCEEDED,"Request time out"));break;case yi.HTTP_ERROR:const de=R.getStatus();if($t("Connection",'RPC "'+e+'" failed with status:',de,"response text:",R.getResponseText()),de>0){const Re=R.getResponseJson().error;if(Re&&Re.status&&Re.message){const ft=function(Pt){const Ht=Pt.toLowerCase().replace(/_/g,"-");return Object.values(mt).indexOf(Ht)>=0?Ht:mt.UNKNOWN}(Re.status);w(new Gt(ft,Re.message))}else w(new Gt(mt.UNKNOWN,"Server responded with status "+R.getStatus()))}else w(new Gt(mt.UNAVAILABLE,"Connection failed."));break;default:pn()}}finally{$t("Connection",'RPC "'+e+'" completed.')}});const H=JSON.stringify(h);R.send(t,"POST",H,l,15)})}wo(e,t,l){const h=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=ns(),w=fo(),R={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(R.xmlHttpFactory=new wc({})),this.lo(R.initMessageHeaders,t,l),R.encodeInitMessageHeaders=!0;const H=h.join("");$t("Connection","Creating WebChannel: "+H,R);const Q=g.createWebChannel(H,R);let de=!1,Re=!1;const ft=new qg({Hr:Ht=>{Re?$t("Connection","Not sending because WebChannel is closed:",Ht):(de||($t("Connection","Opening WebChannel transport."),Q.open(),de=!0),$t("Connection","WebChannel sending:",Ht),Q.send(Ht))},Jr:()=>Q.close()}),Pt=(Ht,Pn,Hn)=>{Ht.listen(Pn,Wi=>{try{Hn(Wi)}catch(fs){setTimeout(()=>{throw fs},0)}})};return Pt(Q,ma.EventType.OPEN,()=>{Re||$t("Connection","WebChannel transport opened.")}),Pt(Q,ma.EventType.CLOSE,()=>{Re||(Re=!0,$t("Connection","WebChannel transport closed"),ft.io())}),Pt(Q,ma.EventType.ERROR,Ht=>{Re||(Re=!0,eo("Connection","WebChannel transport errored:",Ht),ft.io(new Gt(mt.UNAVAILABLE,"The operation could not be completed")))}),Pt(Q,ma.EventType.MESSAGE,Ht=>{var Pn;if(!Re){const Hn=Ht.data[0];er(!!Hn);const Wi=Hn,fs=Wi.error||(null===(Pn=Wi[0])||void 0===Pn?void 0:Pn.error);if(fs){$t("Connection","WebChannel received error:",fs);const Zi=fs.status;let vo=function(Ki){const ua=_s[Ki];if(void 0!==ua)return ld(ua)}(Zi),ki=fs.message;void 0===vo&&(vo=mt.INTERNAL,ki="Unknown error status: "+Zi+" with message "+fs.message),Re=!0,ft.io(new Gt(vo,ki)),Q.close()}else $t("Connection","WebChannel received:",Hn),ft.ro(Hn)}}),Pt(w,Ec.STAT_EVENT,Ht=>{Ht.stat===La.PROXY?$t("Connection","Detected buffering proxy"):Ht.stat===La.NOPROXY&&$t("Connection","Detected no buffering proxy")}),setTimeout(()=>{ft.so()},0),ft}}function Ja(){return"undefined"!=typeof window?window:null}function _o(){return"undefined"!=typeof document?document:null}function yo(o){return new Oi(o,!0)}class _f{constructor(e,t,l=1e3,h=1.5,g=6e4){this.Hs=e,this.timerId=t,this.mo=l,this.yo=h,this.po=g,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),l=Math.max(0,Date.now()-this.Eo),h=Math.max(0,t-l);h>0&&$t("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${l} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,h,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class bd{constructor(e,t,l,h,g,w,R,H){this.Hs=e,this.vo=l,this.Vo=h,this.So=g,this.authCredentialsProvider=w,this.appCheckCredentialsProvider=R,this.listener=H,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new _f(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,_.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,_.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var l=this;return(0,_.Z)(function*(){l.Uo(),l.qo(),l.No.cancel(),l.Do++,4!==e?l.No.reset():t&&t.code===mt.RESOURCE_EXHAUSTED?(gr(t.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),l.No.Ao()):t&&t.code===mt.UNAUTHENTICATED&&3!==l.state&&(l.authCredentialsProvider.invalidateToken(),l.appCheckCredentialsProvider.invalidateToken()),null!==l.stream&&(l.Ko(),l.stream.close(),l.stream=null),l.state=e,yield l.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([l,h])=>{this.Do===t&&this.Qo(l,h)},l=>{e(()=>{const h=new Gt(mt.UNKNOWN,"Fetching auth token failed: "+l.message);return this.jo(h)})})}Qo(e,t){const l=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{l(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(h=>{l(()=>this.jo(h))}),this.stream.onMessage(h=>{l(()=>this.onMessage(h))})}Mo(){var e=this;this.state=5,this.No.Ro((0,_.Z)(function*(){e.state=0,e.start()}))}jo(e){return $t("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():($t("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yf extends bd{constructor(e,t,l,h,g,w){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,l,h,w),this.It=g}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function eh(o,e){let t;if("targetChange"in e){const l="NO_CHANGE"===(H=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===H?1:"REMOVE"===H?2:"CURRENT"===H?3:"RESET"===H?4:pn(),h=e.targetChange.targetIds||[],g=function(H,Q){return H.gt?(er(void 0===Q||"string"==typeof Q),Di.fromBase64String(Q||"")):(er(void 0===Q||Q instanceof Uint8Array),Di.fromUint8Array(Q||new Uint8Array))}(o,e.targetChange.resumeToken),w=e.targetChange.cause,R=w&&function(H){const Q=void 0===H.code?mt.UNKNOWN:ld(H.code);return new Gt(Q,H.message||"")}(w);t=new ne(l,h,g,R||null)}else if("documentChange"in e){const l=e.documentChange,h=qa(o,l.document.name),g=ys(l.document.updateTime),w=new qi({mapValue:{fields:l.document.fields}}),R=Ai.newFoundDocument(h,g,w);t=new S(l.targetIds||[],l.removedTargetIds||[],R.key,R)}else if("documentDelete"in e){const l=e.documentDelete,h=qa(o,l.document),g=l.readTime?ys(l.readTime):nr.min(),w=Ai.newNoDocument(h,g);t=new S([],l.removedTargetIds||[],w.key,w)}else if("documentRemove"in e){const l=e.documentRemove,h=qa(o,l.document);t=new S([],l.removedTargetIds||[],h,null)}else{if(!("filter"in e))return pn();{const l=e.filter,g=new za(l.count||0);t=new z(l.targetId,g)}}var H;return t}(this.It,e),l=function(h){if(!("targetChange"in h))return nr.min();const g=h.targetChange;return g.targetIds&&g.targetIds.length?nr.min():g.readTime?ys(g.readTime):nr.min()}(e);return this.listener.zo(t,l)}Ho(e){const t={};t.database=Iu(this.It),t.addTarget=function(h,g){let w;const R=g.target;return w=Ze(R)?{documents:ap(h,R)}:{query:th(h,R)},w.targetId=g.targetId,g.resumeToken.approximateByteSize()>0?w.resumeToken=mo(h,g.resumeToken):g.snapshotVersion.compareTo(nr.min())>0&&(w.readTime=ss(h,g.snapshotVersion.toTimestamp())),w}(this.It,e);const l=function Za(o,e){const t=function(l,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);l&&(t.labels=l),this.Lo(t)}Jo(e){const t={};t.database=Iu(this.It),t.removeTarget=e,this.Lo(t)}}class Ta extends bd{constructor(e,t,l,h,g,w){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,l,h,w),this.It=g,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(er(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function Ig(o,e){return o&&o.length>0?(er(void 0!==e),o.map(t=>function(l,h){let g=ys(l.updateTime?l.updateTime:h);return g.isEqual(nr.min())&&(g=ys(h)),new bg(g,l.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),l=ys(e.commitTime);return this.listener.tu(l,t)}return er(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Iu(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(l=>Oc(this.It,l))};this.Lo(t)}}class Zg extends class{}{constructor(e,t,l,h){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=l,this.It=h,this.su=!1}iu(){if(this.su)throw new Gt(mt.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,l){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,g])=>this.So.ao(e,t,l,h,g)).catch(h=>{throw"FirebaseError"===h.name?(h.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Gt(mt.UNKNOWN,h.toString())})}_o(e,t,l,h){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,w])=>this.So._o(e,t,l,g,w,h)).catch(g=>{throw"FirebaseError"===g.name?(g.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new Gt(mt.UNKNOWN,g.toString())})}terminate(){this.su=!0}}class Su{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(gr(t),this.uu=!1):$t("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class vf{constructor(e,t,l,h,g){var w=this;this.localStore=e,this.datastore=t,this.asyncQueue=l,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=g,this.gu.qr(R=>{l.enqueueAndForget((0,_.Z)(function*(){var H;pl(w)&&($t("RemoteStore","Restarting streams for network reachability change."),yield(H=(0,_.Z)(function*(Q){const de=mn(Q);de.wu.add(4),yield Id(de),de.yu.set("Unknown"),de.wu.delete(4),yield Vl(de)}),function(Q){return H.apply(this,arguments)})(w))}))}),this.yu=new Su(l,h)}}function Vl(o){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,_.Z)(function*(o){if(pl(o))for(const e of o.mu)yield e(!0)}),Mp.apply(this,arguments)}function Id(o){return Ef.apply(this,arguments)}function Ef(){return Ef=(0,_.Z)(function*(o){for(const e of o.mu)yield e(!1)}),Ef.apply(this,arguments)}function Bl(o,e){const t=mn(o);t._u.has(e.targetId)||(t._u.set(e.targetId,e),Td(t)?wf(t):Da(t).Oo()&&Rp(t,e))}function Gc(o,e){const t=mn(o),l=Da(t);t._u.delete(e),l.Oo()&&Pp(t,e),0===t._u.size&&(l.Oo()?l.$o():pl(t)&&t.yu.set("Unknown"))}function Rp(o,e){o.pu.Mt(e.targetId),Da(o).Ho(e)}function Pp(o,e){o.pu.Mt(e),Da(o).Jo(e)}function wf(o){o.pu=new Tt({getRemoteKeysForTarget:e=>o.remoteSyncer.getRemoteKeysForTarget(e),se:e=>o._u.get(e)||null}),Da(o).start(),o.yu.cu()}function Td(o){return pl(o)&&!Da(o).ko()&&o._u.size>0}function pl(o){return 0===mn(o).wu.size}function gl(o){o.pu=void 0}function Np(o){return gh.apply(this,arguments)}function gh(){return gh=(0,_.Z)(function*(o){o._u.forEach((e,t)=>{Rp(o,e)})}),gh.apply(this,arguments)}function e_(o,e){return Op.apply(this,arguments)}function Op(){return Op=(0,_.Z)(function*(o,e){gl(o),Td(o)?(o.yu.lu(e),wf(o)):o.yu.set("Unknown")}),Op.apply(this,arguments)}function kp(o,e,t){return Cf.apply(this,arguments)}function Cf(){return Cf=(0,_.Z)(function*(o,e,t){if(o.yu.set("Online"),e instanceof ne&&2===e.state&&e.cause)try{yield(l=(0,_.Z)(function*(h,g){const w=g.cause;for(const R of g.targetIds)h._u.has(R)&&(yield h.remoteSyncer.rejectListen(R,w),h._u.delete(R),h.pu.removeTarget(R))}),function(h,g){return l.apply(this,arguments)})(o,e)}catch(l){$t("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),l),yield bf(o,l)}else if(e instanceof S?o.pu.Gt(e):e instanceof z?o.pu.Yt(e):o.pu.Wt(e),!t.isEqual(nr.min()))try{const l=yield Ll(o.localStore);t.compareTo(l)>=0&&(yield function(h,g){const w=h.pu.te(g);return w.targetChanges.forEach((R,H)=>{if(R.resumeToken.approximateByteSize()>0){const Q=h._u.get(H);Q&&h._u.set(H,Q.withResumeToken(R.resumeToken,g))}}),w.targetMismatches.forEach(R=>{const H=h._u.get(R);if(!H)return;h._u.set(R,H.withResumeToken(Di.EMPTY_BYTE_STRING,H.snapshotVersion)),Pp(h,R);const Q=new kc(H.target,R,1,H.sequenceNumber);Rp(h,Q)}),h.remoteSyncer.applyRemoteEvent(w)}(o,t))}catch(l){$t("RemoteStore","Failed to raise snapshot:",l),yield bf(o,l)}var l}),Cf.apply(this,arguments)}function bf(o,e,t){return If.apply(this,arguments)}function If(){return If=(0,_.Z)(function*(o,e,t){if(!zs(e))throw e;o.wu.add(1),yield Id(o),o.yu.set("Offline"),t||(t=()=>Ll(o.localStore)),o.asyncQueue.enqueueRetryable((0,_.Z)(function*(){$t("RemoteStore","Retrying IndexedDB access"),yield t(),o.wu.delete(1),yield Vl(o)}))}),If.apply(this,arguments)}function mh(o,e){return e().catch(t=>bf(o,t,e))}function Dd(o){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,_.Z)(function*(o){const e=mn(o),t=jl(e);let l=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;_h(e);)try{const h=yield pf(e.localStore,l);if(null===h){0===e.du.length&&t.$o();break}l=h.batchId,Lp(e,h)}catch(h){yield bf(e,h)}Yg(e)&&Tf(e)}),Fp.apply(this,arguments)}function _h(o){return pl(o)&&o.du.length<10}function Lp(o,e){o.du.push(e);const t=jl(o);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function Yg(o){return pl(o)&&!jl(o).ko()&&o.du.length>0}function Tf(o){jl(o).start()}function Df(o){return os.apply(this,arguments)}function os(){return os=(0,_.Z)(function*(o){jl(o).nu()}),os.apply(this,arguments)}function Af(o){return Sf.apply(this,arguments)}function Sf(){return Sf=(0,_.Z)(function*(o){const e=jl(o);for(const t of o.du)e.Zo(t.mutations)}),Sf.apply(this,arguments)}function xf(o,e,t){return au.apply(this,arguments)}function au(){return au=(0,_.Z)(function*(o,e,t){const l=o.du.shift(),h=rf.from(l,e,t);yield mh(o,()=>o.remoteSyncer.applySuccessfulWrite(h)),yield Dd(o)}),au.apply(this,arguments)}function Qg(o,e){return yh.apply(this,arguments)}function yh(){return yh=(0,_.Z)(function*(o,e){var t;e&&jl(o).Xo&&(yield(t=(0,_.Z)(function*(l,h){if(Sc(g=h.code)&&g!==mt.ABORTED){const w=l.du.shift();jl(l).Fo(),yield mh(l,()=>l.remoteSyncer.rejectFailedWrite(w.batchId,h)),yield Dd(l)}var g}),function(l,h){return t.apply(this,arguments)})(o,e)),Yg(o)&&Tf(o)}),yh.apply(this,arguments)}function Up(o,e){return Mf.apply(this,arguments)}function Mf(){return Mf=(0,_.Z)(function*(o,e){const t=mn(o);t.asyncQueue.verifyOperationInProgress(),$t("RemoteStore","RemoteStore received new credentials");const l=pl(t);t.wu.add(3),yield Id(t),l&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Vl(t)}),Mf.apply(this,arguments)}function Rf(o,e){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,_.Z)(function*(o,e){const t=mn(o);e?(t.wu.delete(2),yield Vl(t)):e||(t.wu.add(2),yield Id(t),t.yu.set("Unknown"))}),Pf.apply(this,arguments)}function Da(o){return o.Iu||(o.Iu=function(e,t,l){const h=mn(e);return h.iu(),new yf(t,h.So,h.authCredentials,h.appCheckCredentials,h.It,l)}(o.datastore,o.asyncQueue,{Yr:Np.bind(null,o),Zr:e_.bind(null,o),zo:kp.bind(null,o)}),o.mu.push(function(){var e=(0,_.Z)(function*(t){t?(o.Iu.Fo(),Td(o)?wf(o):o.yu.set("Unknown")):(yield o.Iu.stop(),gl(o))});return function(t){return e.apply(this,arguments)}}())),o.Iu}function jl(o){return o.Tu||(o.Tu=function(e,t,l){const h=mn(e);return h.iu(),new Ta(t,h.So,h.authCredentials,h.appCheckCredentials,h.It,l)}(o.datastore,o.asyncQueue,{Yr:Df.bind(null,o),Zr:Qg.bind(null,o),eu:Af.bind(null,o),tu:xf.bind(null,o)}),o.mu.push(function(){var e=(0,_.Z)(function*(t){t?(o.Tu.Fo(),yield Dd(o)):(yield o.Tu.stop(),o.du.length>0&&($t("RemoteStore",`Stopping write stream with ${o.du.length} pending writes`),o.du=[]))});return function(t){return e.apply(this,arguments)}}())),o.Tu}class Nf{constructor(e,t,l,h,g){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=l,this.op=h,this.removalCallback=g,this.deferred=new Gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(w=>{})}static createAndSchedule(e,t,l,h,g){const w=Date.now()+l,R=new Nf(e,t,w,h,g);return R.start(l),R}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Gt(mt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xu(o,e){if(gr("AsyncQueue",`${e}: ${o}`),zs(o))return new Gt(mt.UNAVAILABLE,`${e}: ${o}`);throw o}class vh{constructor(e){this.comparator=e?(t,l)=>e(t,l)||x.comparator(t.key,l.key):(t,l)=>x.comparator(t.key,l.key),this.keyedMap=eu(),this.sortedSet=new Ni(this.comparator)}static emptySet(e){return new vh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,l)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),l=e.sortedSet.getIterator();for(;t.hasNext();){const h=t.getNext().key,g=l.getNext().key;if(!h.isEqual(g))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const l=new vh;return l.comparator=this.comparator,l.keyedMap=e,l.sortedSet=t,l}}class Of{constructor(){this.Eu=new Ni(x.comparator)}track(e){const t=e.doc.key,l=this.Eu.get(t);l?0!==e.type&&3===l.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==l.type?this.Eu=this.Eu.insert(t,{type:l.type,doc:e.doc}):2===e.type&&2===l.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===l.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===l.type?this.Eu=this.Eu.remove(t):1===e.type&&2===l.type?this.Eu=this.Eu.insert(t,{type:1,doc:l.doc}):0===e.type&&1===l.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):pn():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,l)=>{e.push(l)}),e}}class zc{constructor(e,t,l,h,g,w,R,H,Q){this.query=e,this.docs=t,this.oldDocs=l,this.docChanges=h,this.mutatedKeys=g,this.fromCache=w,this.syncStateChanged=R,this.excludesMetadataChanges=H,this.hasCachedResults=Q}static fromInitialDocuments(e,t,l,h,g){const w=[];return t.forEach(R=>{w.push({type:0,doc:R})}),new zc(e,t,vh.emptySet(t),w,l,h,!0,!1,g)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Go(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,l=e.docChanges;if(t.length!==l.length)return!1;for(let h=0;h<t.length;h++)if(t[h].type!==l[h].type||!t[h].doc.isEqual(l[h].doc))return!1;return!0}}class Vp{constructor(){this.Ru=void 0,this.listeners=[]}}class Eh{constructor(){this.queries=new Ps(e=>Ku(e),Go),this.onlineState="Unknown",this.bu=new Set}}function Jg(o,e){return wh.apply(this,arguments)}function wh(){return wh=(0,_.Z)(function*(o,e){const t=mn(o),l=e.query;let h=!1,g=t.queries.get(l);if(g||(h=!0,g=new Vp),h)try{g.Ru=yield t.onListen(l)}catch(w){const R=xu(w,`Initialization of query '${Yu(e.query)}' failed`);return void e.onError(R)}t.queries.set(l,g),g.listeners.push(e),e.Pu(t.onlineState),g.Ru&&e.vu(g.Ru)&&ml(t)}),wh.apply(this,arguments)}function kf(o,e){return Hi.apply(this,arguments)}function Hi(){return Hi=(0,_.Z)(function*(o,e){const t=mn(o),l=e.query;let h=!1;const g=t.queries.get(l);if(g){const w=g.listeners.indexOf(e);w>=0&&(g.listeners.splice(w,1),h=0===g.listeners.length)}if(h)return t.queries.delete(l),t.onUnlisten(l)}),Hi.apply(this,arguments)}function Bp(o,e){const t=mn(o);let l=!1;for(const h of e){const w=t.queries.get(h.query);if(w){for(const R of w.listeners)R.vu(h)&&(l=!0);w.Ru=h}}l&&ml(t)}function jp(o,e,t){const l=mn(o),h=l.queries.get(e);if(h)for(const g of h.listeners)g.onError(t);l.queries.delete(e)}function ml(o){o.bu.forEach(e=>{e.next()})}class Ff{constructor(e,t,l){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=l||{}}vu(e){if(!this.options.includeMetadataChanges){const l=[];for(const h of e.docChanges)3!==h.type&&l.push(h);e=new zc(e.query,e.docs,e.oldDocs,l,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=zc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class $p{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class Ch{constructor(e){this.It=e}Ji(e){return qa(this.It,e)}Yi(e){return e.metadata.exists?hd(this.It,e.document,!1):Ai.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return ys(e)}}class pc{constructor(e,t,l){this.Mu=e,this.localStore=t,this.It=l,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=la(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const l=Tr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(l.get(l.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,l=new Ch(this.It);for(const h of e)if(h.metadata.queries){const g=l.Ji(h.metadata.name);for(const w of h.metadata.queries){const R=(t.get(w)||Wr()).add(g);t.set(w,R)}}return t}complete(){var e=this;return(0,_.Z)(function*(){const t=yield function $c(o,e,t,l){return gf.apply(this,arguments)}(e.localStore,new Ch(e.It),e.documents,e.Mu.id),l=e.$u(e.documents);for(const h of e.queries)yield Hc(e.localStore,h,l.get(h.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function la(o){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:o.totalDocuments,totalBytes:o.totalBytes}}class Hp{constructor(e){this.key=e}}class Lf{constructor(e){this.key=e}}class gc{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Wr(),this.mutatedKeys=Wr(),this.Gu=cl(e),this.Qu=new vh(this.Gu)}get ju(){return this.Uu}Wu(e,t){const l=t?t.zu:new Of,h=t?t.Qu:this.Qu;let g=t?t.mutatedKeys:this.mutatedKeys,w=h,R=!1;const H="F"===this.query.limitType&&h.size===this.query.limit?h.last():null,Q="L"===this.query.limitType&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal((de,Re)=>{const ft=h.get(de),Pt=Dc(this.query,Re)?Re:null,Ht=!!ft&&this.mutatedKeys.has(ft.key),Pn=!!Pt&&(Pt.hasLocalMutations||this.mutatedKeys.has(Pt.key)&&Pt.hasCommittedMutations);let Hn=!1;ft&&Pt?ft.data.isEqual(Pt.data)?Ht!==Pn&&(l.track({type:3,doc:Pt}),Hn=!0):this.Hu(ft,Pt)||(l.track({type:2,doc:Pt}),Hn=!0,(H&&this.Gu(Pt,H)>0||Q&&this.Gu(Pt,Q)<0)&&(R=!0)):!ft&&Pt?(l.track({type:0,doc:Pt}),Hn=!0):ft&&!Pt&&(l.track({type:1,doc:ft}),Hn=!0,(H||Q)&&(R=!0)),Hn&&(Pt?(w=w.add(Pt),g=Pn?g.add(de):g.delete(de)):(w=w.delete(de),g=g.delete(de)))}),null!==this.query.limit)for(;w.size>this.query.limit;){const de="F"===this.query.limitType?w.last():w.first();w=w.delete(de.key),g=g.delete(de.key),l.track({type:1,doc:de})}return{Qu:w,zu:l,$i:R,mutatedKeys:g}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,l){const h=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const g=e.zu.Au();g.sort((Q,de)=>function(Re,ft){const Pt=Ht=>{switch(Ht){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pn()}};return Pt(Re)-Pt(ft)}(Q.type,de.type)||this.Gu(Q.doc,de.doc)),this.Ju(l);const w=t?this.Yu():[],R=0===this.Ku.size&&this.current?1:0,H=R!==this.qu;return this.qu=R,0!==g.length||H?{snapshot:new zc(this.query,e.Qu,h,g,e.mutatedKeys,0===R,H,!1,!!l&&l.resumeToken.approximateByteSize()>0),Xu:w}:{Xu:w}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Of,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Wr(),this.Qu.forEach(l=>{this.Zu(l.key)&&(this.Ku=this.Ku.add(l.key))});const t=[];return e.forEach(l=>{this.Ku.has(l)||t.push(new Lf(l))}),this.Ku.forEach(l=>{e.has(l)||t.push(new Hp(l))}),t}tc(e){this.Uu=e.Hi,this.Ku=Wr();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return zc.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class H_{constructor(e,t,l){this.query=e,this.targetId=t,this.view=l}}class t_{constructor(e){this.key=e,this.nc=!1}}class qc{constructor(e,t,l,h,g,w){this.localStore=e,this.remoteStore=t,this.eventManager=l,this.sharedClientState=h,this.currentUser=g,this.maxConcurrentLimboResolutions=w,this.sc={},this.ic=new Ps(R=>Ku(R),Go),this.rc=new Map,this.oc=new Set,this.uc=new Ni(x.comparator),this.cc=new Map,this.ac=new qm,this.hc={},this.lc=new Map,this.fc=Vc.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function Xg(o,e){return qo.apply(this,arguments)}function qo(){return qo=(0,_.Z)(function*(o,e){const t=Od(o);let l,h;const g=t.ic.get(e);if(g)l=g.targetId,t.sharedClientState.addLocalQueryTarget(l),h=g.view.ec();else{const w=yield cc(t.localStore,Bs(e));t.isPrimaryClient&&Bl(t.remoteStore,w);const R=t.sharedClientState.addLocalQueryTarget(w.targetId);l=w.targetId,h=yield bh(t,e,l,"current"===R,w.resumeToken)}return h}),qo.apply(this,arguments)}function bh(o,e,t,l,h){return Ad.apply(this,arguments)}function Ad(){return Ad=(0,_.Z)(function*(o,e,t,l,h){o._c=(Re,ft,Pt)=>{return(Ht=(0,_.Z)(function*(Pn,Hn,Wi,fs){let Zi=Hn.view.Wu(Wi);Zi.$i&&(Zi=yield jc(Pn.localStore,Hn.query,!1).then(({documents:Ki})=>Hn.view.Wu(Ki,Zi)));const vo=fs&&fs.targetChanges.get(Hn.targetId),ki=Hn.view.applyChanges(Zi,Pn.isPrimaryClient,vo);return Ks(Pn,Hn.targetId,ki.Xu),ki.snapshot}),function(Pn,Hn,Wi,fs){return Ht.apply(this,arguments)})(o,Re,ft,Pt);var Ht};const g=yield jc(o.localStore,e,!0),w=new gc(e,g.Hi),R=w.Wu(g.documents),H=v.createSynthesizedTargetChangeForCurrentChange(t,l&&"Offline"!==o.onlineState,h),Q=w.applyChanges(R,o.isPrimaryClient,H);Ks(o,t,Q.Xu);const de=new H_(e,t,w);return o.ic.set(e,de),o.rc.has(t)?o.rc.get(t).push(e):o.rc.set(t,[e]),Q.snapshot}),Ad.apply(this,arguments)}function Uf(o,e){return Ih.apply(this,arguments)}function Ih(){return Ih=(0,_.Z)(function*(o,e){const t=mn(o),l=t.ic.get(e),h=t.rc.get(l.targetId);if(h.length>1)return t.rc.set(l.targetId,h.filter(g=>!Go(g,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(l.targetId),t.sharedClientState.isActiveQueryTarget(l.targetId)||(yield su(t.localStore,l.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(l.targetId),Gc(t.remoteStore,l.targetId),_l(t,l.targetId)}).catch(Ts))):(_l(t,l.targetId),yield su(t.localStore,l.targetId,!0))}),Ih.apply(this,arguments)}function Th(){return Th=(0,_.Z)(function*(o,e,t){const l=Xa(o);try{const h=yield function(g,w){const R=mn(g),H=vi.now(),Q=w.reduce((ft,Pt)=>ft.add(Pt.key),Wr());let de,Re;return R.persistence.runTransaction("Locally write mutations","readwrite",ft=>{let Pt=io(),Ht=Wr();return R.Gi.getEntries(ft,Q).next(Pn=>{Pt=Pn,Pt.forEach((Hn,Wi)=>{Wi.isValidDocument()||(Ht=Ht.add(Hn))})}).next(()=>R.localDocuments.getOverlayedDocuments(ft,Pt)).next(Pn=>{de=Pn;const Hn=[];for(const Wi of w){const fs=ec(Wi,de.get(Wi.key).overlayedDocument);null!=fs&&Hn.push(new Jl(Wi.key,fs,ms(fs.value.mapValue),is.exists(!0)))}return R.mutationQueue.addMutationBatch(ft,H,Hn,w)}).next(Pn=>{Re=Pn;const Hn=Pn.applyToLocalDocumentSet(de,Ht);return R.documentOverlayCache.saveOverlays(ft,Pn.batchId,Hn)})}).then(()=>({batchId:Re.batchId,changes:Qh(de)}))}(l.localStore,e);l.sharedClientState.addPendingMutation(h.batchId),function(g,w,R){let H=g.hc[g.currentUser.toKey()];H||(H=new Ni(mr)),H=H.insert(w,R),g.hc[g.currentUser.toKey()]=H}(l,h.batchId,t),yield oo(l,h.changes),yield Dd(l.remoteStore)}catch(h){const g=xu(h,"Failed to persist write");t.reject(g)}}),Th.apply(this,arguments)}function em(o,e){return Vf.apply(this,arguments)}function Vf(){return Vf=(0,_.Z)(function*(o,e){const t=mn(o);try{const l=yield ff(t.localStore,e);e.targetChanges.forEach((h,g)=>{const w=t.cc.get(g);w&&(er(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1),h.addedDocuments.size>0?w.nc=!0:h.modifiedDocuments.size>0?er(w.nc):h.removedDocuments.size>0&&(er(w.nc),w.nc=!1))}),yield oo(t,l,e)}catch(l){yield Ts(l)}}),Vf.apply(this,arguments)}function tm(o,e,t){const l=mn(o);if(l.isPrimaryClient&&0===t||!l.isPrimaryClient&&1===t){const h=[];l.ic.forEach((g,w)=>{const R=w.view.Pu(e);R.snapshot&&h.push(R.snapshot)}),function(g,w){const R=mn(g);R.onlineState=w;let H=!1;R.queries.forEach((Q,de)=>{for(const Re of de.listeners)Re.Pu(w)&&(H=!0)}),H&&ml(R)}(l.eventManager,e),h.length&&l.sc.zo(h),l.onlineState=e,l.isPrimaryClient&&l.sharedClientState.setOnlineState(e)}}function Bf(o,e,t){return Dh.apply(this,arguments)}function Dh(){return Dh=(0,_.Z)(function*(o,e,t){const l=mn(o);l.sharedClientState.updateQueryState(e,"rejected",t);const h=l.cc.get(e),g=h&&h.key;if(g){let w=new Ni(x.comparator);w=w.insert(g,Ai.newNoDocument(g,nr.min()));const R=Wr().add(g),H=new m(nr.min(),new Map,new Ci(mr),w,R);yield em(l,H),l.uc=l.uc.remove(g),l.cc.delete(e),Gp(l)}else yield su(l.localStore,e,!1).then(()=>_l(l,e,t)).catch(Ts)}),Dh.apply(this,arguments)}function Ah(o,e){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,_.Z)(function*(o,e){const t=mn(o),l=e.batch.batchId;try{const h=yield Tp(t.localStore,e);$f(t,l,null),Md(t,l),t.sharedClientState.updateMutationState(l,"acknowledged"),yield oo(t,h)}catch(h){yield Ts(h)}}),Sd.apply(this,arguments)}function nm(o,e,t){return jf.apply(this,arguments)}function jf(){return jf=(0,_.Z)(function*(o,e,t){const l=mn(o);try{const h=yield function(g,w){const R=mn(g);return R.persistence.runTransaction("Reject batch","readwrite-primary",H=>{let Q;return R.mutationQueue.lookupMutationBatch(H,w).next(de=>(er(null!==de),Q=de.keys(),R.mutationQueue.removeMutationBatch(H,de))).next(()=>R.mutationQueue.performConsistencyCheck(H)).next(()=>R.documentOverlayCache.removeOverlaysForBatchId(H,Q,w)).next(()=>R.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(H,Q)).next(()=>R.localDocuments.getDocuments(H,Q))})}(l.localStore,e);$f(l,e,t),Md(l,e),l.sharedClientState.updateMutationState(e,"rejected",t),yield oo(l,h)}catch(h){yield Ts(h)}}),jf.apply(this,arguments)}function Zc(){return Zc=(0,_.Z)(function*(o,e){const t=mn(o);pl(t.remoteStore)||$t("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const l=yield function(g){const w=mn(g);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",R=>w.mutationQueue.getHighestUnacknowledgedBatchId(R))}(t.localStore);if(-1===l)return void e.resolve();const h=t.lc.get(l)||[];h.push(e),t.lc.set(l,h)}catch(l){const h=xu(l,"Initialization of waitForPendingWrites() operation failed");e.reject(h)}}),Zc.apply(this,arguments)}function Md(o,e){(o.lc.get(e)||[]).forEach(t=>{t.resolve()}),o.lc.delete(e)}function $f(o,e,t){const l=mn(o);let h=l.hc[l.currentUser.toKey()];if(h){const g=h.get(e);g&&(t?g.reject(t):g.resolve(),h=h.remove(e)),l.hc[l.currentUser.toKey()]=h}}function _l(o,e,t=null){o.sharedClientState.removeLocalQueryTarget(e);for(const l of o.rc.get(e))o.ic.delete(l),t&&o.sc.wc(l,t);o.rc.delete(e),o.isPrimaryClient&&o.ac.ls(e).forEach(l=>{o.ac.containsKey(l)||rm(o,l)})}function rm(o,e){o.oc.delete(e.path.canonicalString());const t=o.uc.get(e);null!==t&&(Gc(o.remoteStore,t),o.uc=o.uc.remove(e),o.cc.delete(t),Gp(o))}function Ks(o,e,t){for(const l of t)l instanceof Hp?(o.ac.addReference(l.key,e),n_(o,l)):l instanceof Lf?($t("SyncEngine","Document no longer in limbo: "+l.key),o.ac.removeReference(l.key,e),o.ac.containsKey(l.key)||rm(o,l.key)):pn()}function n_(o,e){const t=e.key,l=t.path.canonicalString();o.uc.get(t)||o.oc.has(l)||($t("SyncEngine","New document in limbo: "+t),o.oc.add(l),Gp(o))}function Gp(o){for(;o.oc.size>0&&o.uc.size<o.maxConcurrentLimboResolutions;){const e=o.oc.values().next().value;o.oc.delete(e);const t=new x(Tr.fromString(e)),l=o.fc.next();o.cc.set(l,new t_(t)),o.uc=o.uc.insert(t,l),Bl(o.remoteStore,new kc(Bs(Ml(t.path)),l,2,To.at))}}function oo(o,e,t){return lu.apply(this,arguments)}function lu(){return lu=(0,_.Z)(function*(o,e,t){const l=mn(o),h=[],g=[],w=[];var R;l.ic.isEmpty()||(l.ic.forEach((R,H)=>{w.push(l._c(H,e,t).then(Q=>{if((Q||t)&&l.isPrimaryClient&&l.sharedClientState.updateQueryState(H.targetId,(null==Q?void 0:Q.fromCache)?"not-current":"current"),Q){h.push(Q);const de=Xm.Ci(H.targetId,Q);g.push(de)}}))}),yield Promise.all(w),l.sc.zo(h),yield(R=(0,_.Z)(function*(H,Q){const de=mn(H);try{yield de.persistence.runTransaction("notifyLocalViewChanges","readwrite",Re=>nt.forEach(Q,ft=>nt.forEach(ft.Si,Pt=>de.persistence.referenceDelegate.addReference(Re,ft.targetId,Pt)).next(()=>nt.forEach(ft.Di,Pt=>de.persistence.referenceDelegate.removeReference(Re,ft.targetId,Pt)))))}catch(Re){if(!zs(Re))throw Re;$t("LocalStore","Failed to update sequence numbers: "+Re)}for(const Re of Q){const ft=Re.targetId;if(!Re.fromCache){const Pt=de.Ui.get(ft),Pn=Pt.withLastLimboFreeSnapshotVersion(Pt.snapshotVersion);de.Ui=de.Ui.insert(ft,Pn)}}}),function(H,Q){return R.apply(this,arguments)})(l.localStore,g))}),lu.apply(this,arguments)}function Rd(o,e){return zp.apply(this,arguments)}function zp(){return zp=(0,_.Z)(function*(o,e){const t=mn(o);if(!t.currentUser.isEqual(e)){$t("SyncEngine","User change. New user:",e.toKey());const l=yield Fl(t.localStore,e);t.currentUser=e,(h=t).lc.forEach(w=>{w.forEach(R=>{R.reject(new Gt(mt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.lc.clear(),t.sharedClientState.handleUserChange(e,l.removedBatchIds,l.addedBatchIds),yield oo(t,l.ji)}var h}),zp.apply(this,arguments)}function im(o,e){const t=mn(o),l=t.cc.get(e);if(l&&l.nc)return Wr().add(l.key);{let h=Wr();const g=t.rc.get(e);if(!g)return h;for(const w of g){const R=t.ic.get(w);h=h.unionWith(R.view.ju)}return h}}function qp(o,e){return mc.apply(this,arguments)}function mc(){return mc=(0,_.Z)(function*(o,e){const t=mn(o),l=yield jc(t.localStore,e.query,!0),h=e.view.tc(l);return t.isPrimaryClient&&Ks(t,e.targetId,h.Xu),h}),mc.apply(this,arguments)}function Hf(o,e){return Sh.apply(this,arguments)}function Sh(){return Sh=(0,_.Z)(function*(o,e){const t=mn(o);return Gg(t.localStore,e).then(l=>oo(t,l))}),Sh.apply(this,arguments)}function Zp(o,e,t,l){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,_.Z)(function*(o,e,t,l){const h=mn(o),g=yield function(w,R){const H=mn(w),Q=mn(H.mutationQueue);return H.persistence.runTransaction("Lookup mutation documents","readonly",de=>Q.Tn(de,R).next(Re=>Re?H.localDocuments.getDocuments(de,Re):nt.resolve(null)))}(h.localStore,e);var R;null!==g?("pending"===t?yield Dd(h.remoteStore):"acknowledged"===t||"rejected"===t?($f(h,e,l||null),Md(h,e),R=e,mn(mn(h.localStore).mutationQueue).An(R)):pn(),yield oo(h,g)):$t("SyncEngine","Cannot apply mutation batch with id: "+e)}),Kp.apply(this,arguments)}function Wf(){return Wf=(0,_.Z)(function*(o,e){const t=mn(o);if(Od(t),Xa(t),!0===e&&!0!==t.dc){const l=t.sharedClientState.getAllActiveQueryTargets(),h=yield Aa(t,l.toArray());t.dc=!0,yield Rf(t.remoteStore,!0);for(const g of h)Bl(t.remoteStore,g)}else if(!1===e&&!1!==t.dc){const l=[];let h=Promise.resolve();t.rc.forEach((g,w)=>{t.sharedClientState.isLocalQueryTarget(w)?l.push(w):h=h.then(()=>(_l(t,w),su(t.localStore,w,!0))),Gc(t.remoteStore,w)}),yield h,yield Aa(t,l),function(g){const w=mn(g);w.cc.forEach((R,H)=>{Gc(w.remoteStore,H)}),w.ac.fs(),w.cc=new Map,w.uc=new Ni(x.comparator)}(t),t.dc=!1,yield Rf(t.remoteStore,!1)}}),Wf.apply(this,arguments)}function Aa(o,e,t){return xh.apply(this,arguments)}function xh(){return xh=(0,_.Z)(function*(o,e,t){const l=mn(o),h=[],g=[];for(const w of e){let R;const H=l.rc.get(w);if(H&&0!==H.length){R=yield cc(l.localStore,Bs(H[0]));for(const Q of H){const de=l.ic.get(Q),Re=yield qp(l,de);Re.snapshot&&g.push(Re.snapshot)}}else{const Q=yield Wg(l.localStore,w);R=yield cc(l.localStore,Q),yield bh(l,_c(Q),w,!1,R.resumeToken)}h.push(R)}return l.sc.zo(g),h}),xh.apply(this,arguments)}function _c(o){return Gd(o.path,o.collectionGroup,o.orderBy,o.filters,o.limit,"F",o.startAt,o.endAt)}function Pd(o){const e=mn(o);return mn(mn(e.localStore).persistence).vi()}function r_(o,e,t,l){return Kc.apply(this,arguments)}function Kc(){return Kc=(0,_.Z)(function*(o,e,t,l){const h=mn(o);if(h.dc)return void $t("SyncEngine","Ignoring unexpected query state notification.");const g=h.rc.get(e);if(g&&g.length>0)switch(t){case"current":case"not-current":{const w=yield Gg(h.localStore,wu(g[0])),R=m.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Di.EMPTY_BYTE_STRING);yield oo(h,w,R);break}case"rejected":yield su(h.localStore,e,!0),_l(h,e,l);break;default:pn()}}),Kc.apply(this,arguments)}function Gf(o,e,t){return Nd.apply(this,arguments)}function Nd(){return Nd=(0,_.Z)(function*(o,e,t){const l=Od(o);if(l.dc){for(const h of e){if(l.rc.has(h)){$t("SyncEngine","Adding an already active target "+h);continue}const g=yield Wg(l.localStore,h),w=yield cc(l.localStore,g);yield bh(l,_c(g),w.targetId,!1,w.resumeToken),Bl(l.remoteStore,w)}for(const h of t)l.rc.has(h)&&(yield su(l.localStore,h,!1).then(()=>{Gc(l.remoteStore,h),_l(l,h)}).catch(Ts))}}),Nd.apply(this,arguments)}function Od(o){const e=mn(o);return e.remoteStore.remoteSyncer.applyRemoteEvent=em.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=im.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bf.bind(null,e),e.sc.zo=Bp.bind(null,e.eventManager),e.sc.wc=jp.bind(null,e.eventManager),e}function Xa(o){const e=mn(o);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ah.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nm.bind(null,e),e}class ao{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_.Z)(function*(){t.It=yo(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Ip(this.persistence,new uc,e.initialUser,this.It)}yc(e){return new Cp(jg.Bs,this.It)}gc(e){return new mf}terminate(){var e=this;return(0,_.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Mu extends ao{constructor(e,t,l){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=l,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,l=this;return(0,_.Z)(function*(){yield t().call(l,e),yield l.Ac.initialize(l,e),yield Xa(l.Ac.syncEngine),yield Dd(l.Ac.remoteStore),yield l.persistence.li(()=>(l.gcScheduler&&!l.gcScheduler.started&&l.gcScheduler.start(),l.indexBackfillerScheduler&&!l.indexBackfillerScheduler.started&&l.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Ip(this.persistence,new uc,e.initialUser,this.It)}Tc(e,t){return new Lg(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const l=new sd(t,this.persistence);return new Hu(e.asyncQueue,l)}yc(e){const t=Jm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),l=void 0!==this.cacheSizeBytes?Ia.withCacheSize(this.cacheSizeBytes):Ia.DEFAULT;return new Qm(this.synchronizeTabs,t,e.clientId,l,e.asyncQueue,Ja(),_o(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new mf}}class zf extends Mu{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,l=this;return(0,_.Z)(function*(){yield t().call(l,e);const h=l.Ac.syncEngine;l.sharedClientState instanceof Dp&&(l.sharedClientState.syncEngine={Fr:Zp.bind(null,h),$r:r_.bind(null,h),Br:Gf.bind(null,h),vi:Pd.bind(null,h),Mr:Hf.bind(null,h)},yield l.sharedClientState.start()),yield l.persistence.li(function(){var g=(0,_.Z)(function*(w){yield function sm(o,e){return Wf.apply(this,arguments)}(l.Ac.syncEngine,w),l.gcScheduler&&(w&&!l.gcScheduler.started?l.gcScheduler.start():w||l.gcScheduler.stop()),l.indexBackfillerScheduler&&(w&&!l.indexBackfillerScheduler.started?l.indexBackfillerScheduler.start():w||l.indexBackfillerScheduler.stop())});return function(w){return g.apply(this,arguments)}}())})()}gc(e){const t=Ja();if(!Dp.C(t))throw new Gt(mt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const l=Jm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Dp(t,e.asyncQueue,l,e.clientId,e.initialUser)}}class Sa{initialize(e,t){var l=this;return(0,_.Z)(function*(){l.localStore||(l.localStore=e.localStore,l.sharedClientState=e.sharedClientState,l.datastore=l.createDatastore(t),l.remoteStore=l.createRemoteStore(t),l.eventManager=l.createEventManager(t),l.syncEngine=l.createSyncEngine(t,!e.synchronizeTabs),l.sharedClientState.onlineStateHandler=h=>tm(l.syncEngine,h,1),l.remoteStore.remoteSyncer.handleCredentialChange=Rd.bind(null,l.syncEngine),yield Rf(l.remoteStore,l.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Eh}createDatastore(e){const t=yo(e.databaseInfo.databaseId),l=new hc(e.databaseInfo);return new Zg(e.authCredentials,e.appCheckCredentials,l,t)}createRemoteStore(e){return t=this.localStore,l=this.datastore,h=e.asyncQueue,g=R=>tm(this.syncEngine,R,0),w=Sp.C()?new Sp:new Ap,new vf(t,l,h,g,w);var t,l,h,g,w}createSyncEngine(e,t){return function(l,h,g,w,R,H,Q){const de=new qc(l,h,g,w,R,H);return Q&&(de.dc=!0),de}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_.Z)(function*(t){const l=mn(t);$t("RemoteStore","RemoteStore shutting down."),l.wu.add(5),yield Id(l),l.gu.shutdown(),l.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Rh(o,e,t){if(!t)throw new Gt(mt.INVALID_ARGUMENT,`Function ${o}() cannot be called with an empty ${e}.`)}function Yc(o,e,t,l){if(!0===e&&!0===l)throw new Gt(mt.INVALID_ARGUMENT,`${o} and ${t} cannot be used together.`)}function Qc(o){if(!x.isDocumentKey(o))throw new Gt(mt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${o} has ${o.length}.`)}function uu(o){if(x.isDocumentKey(o))throw new Gt(mt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${o} has ${o.length}.`)}function Ru(o){if(void 0===o)return"undefined";if(null===o)return"null";if("string"==typeof o)return o.length>20&&(o=`${o.substring(0,20)}...`),JSON.stringify(o);if("number"==typeof o||"boolean"==typeof o)return""+o;if("object"==typeof o){if(o instanceof Array)return"an array";{const e=(t=o).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof o?"a function":pn()}function Nr(o,e){if("_delegate"in o&&(o=o._delegate),!(o instanceof e)){if(e.name===o.constructor.name)throw new Gt(mt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ru(o);throw new Gt(mt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return o}function Pu(o,e){if(e<=0)throw new Gt(mt.INVALID_ARGUMENT,`Function ${o}() requires a positive number, but it was: ${e}.`)}const Nu=new Map;class cu{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Gt(mt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Gt(mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Yc("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class du{constructor(e,t,l,h){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=l,this._app=h,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cu({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Gt(mt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Gt(mt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cu(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ju;switch(t.type){case"gapi":return new ya(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Gt(mt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Nu.get(e);t&&($t("ComponentProvider","Removing Datastore"),Nu.delete(e),t.terminate())}(this),Promise.resolve()}}function Yp(o,e,t,l={}){var h;const g=(o=Nr(o,du))._getSettings();if("firestore.googleapis.com"!==g.host&&g.host!==e&&eo("Host has been set in both settings() and useEmulator(), emulator host will be used"),o._setSettings(Object.assign(Object.assign({},g),{host:`${e}:${t}`,ssl:!1})),l.mockUserToken){let w,R;if("string"==typeof l.mockUserToken)w=l.mockUserToken,R=Bi.MOCK_USER;else{w=(0,Te.Sg)(l.mockUserToken,null===(h=o._app)||void 0===h?void 0:h.options.projectId);const H=l.mockUserToken.sub||l.mockUserToken.user_id;if(!H)throw new Gt(mt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new Bi(H)}o._authCredentials=new si(new vl(w,R))}}class Ds{constructor(e,t,l){this.converter=t,this._key=l,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $l(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ds(this.firestore,e,this._key)}}class Ro{constructor(e,t,l){this.converter=t,this._query=l,this.type="query",this.firestore=e}withConverter(e){return new Ro(this.firestore,e,this._query)}}class $l extends Ro{constructor(e,t,l){super(e,t,Ml(l)),this._path=l,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ds(this.firestore,null,new x(e))}withConverter(e){return new $l(this.firestore,e,this._path)}}function qf(o,e,...t){if(o=(0,Te.m9)(o),Rh("collection","path",e),o instanceof du){const l=Tr.fromString(e,...t);return uu(l),new $l(o,null,l)}{if(!(o instanceof Ds||o instanceof $l))throw new Gt(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const l=o._path.child(Tr.fromString(e,...t));return uu(l),new $l(o.firestore,null,l)}}function om(o,e){if(o=Nr(o,du),Rh("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Gt(mt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ro(o,null,(t=e,new go(Tr.emptyPath(),t)));var t}function kd(o,e,...t){if(o=(0,Te.m9)(o),1===arguments.length&&(e=va.R()),Rh("doc","path",e),o instanceof du){const l=Tr.fromString(e,...t);return Qc(l),new Ds(o,null,new x(l))}{if(!(o instanceof Ds||o instanceof $l))throw new Gt(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const l=o._path.child(Tr.fromString(e,...t));return Qc(l),new Ds(o.firestore,o instanceof $l?o.converter:null,new x(l))}}function Zf(o,e){return o=(0,Te.m9)(o),e=(0,Te.m9)(e),(o instanceof Ds||o instanceof $l)&&(e instanceof Ds||e instanceof $l)&&o.firestore===e.firestore&&o.path===e.path&&o.converter===e.converter}function Jc(o,e){return o=(0,Te.m9)(o),e=(0,Te.m9)(e),o instanceof Ro&&e instanceof Ro&&o.firestore===e.firestore&&Go(o._query,e._query)&&o.converter===e.converter}function am(o,e=10240){let t=0;return{read:()=>(0,_.Z)(function*(){if(t<o.byteLength){const l={value:o.slice(t,t+e),done:!1};return t+=e,l}return{done:!0}})(),cancel:()=>(0,_.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Fd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):gr("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class i_{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Gi,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(l=>{l&&l.Ou()?this.metadata.resolve(l.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==l?void 0:l.payload)}`))},l=>this.metadata.reject(l))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,_.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,_.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,_.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const l=e.vc.decode(t),h=Number(l);isNaN(h)&&e.Dc(`length string (${l}) is not valid number`);const g=yield e.Cc(h);return new $p(JSON.parse(g),t.length+h)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,_.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const l=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),l})()}Cc(e){var t=this;return(0,_.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const l=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),l})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,_.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const l=new Uint8Array(e.buffer.length+t.value.length);l.set(e.buffer),l.set(t.value,e.buffer.length),e.buffer=l}return t.done})()}}class s_{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Gt(mt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const l=yield(h=(0,_.Z)(function*(g,w){const R=mn(g),H=Iu(R.It)+"/documents",Q={documents:w.map(Pt=>oa(R.It,Pt))},de=yield R._o("BatchGetDocuments",H,Q,w.length),Re=new Map;de.forEach(Pt=>{const Ht=function Rm(o,e){return"found"in e?function(t,l){er(!!l.found);const h=qa(t,l.found.name),g=ys(l.found.updateTime),w=new qi({mapValue:{fields:l.found.fields}});return Ai.newFoundDocument(h,g,w)}(o,e):"missing"in e?function(t,l){er(!!l.missing),er(!!l.readTime);const h=qa(t,l.missing),g=ys(l.readTime);return Ai.newNoDocument(h,g)}(o,e):pn()}(R.It,Pt);Re.set(Ht.key.toString(),Ht)});const ft=[];return w.forEach(Pt=>{const Ht=Re.get(Pt.toString());er(!!Ht),ft.push(Ht)}),ft}),function(g,w){return h.apply(this,arguments)})(t.datastore,e);var h;return l.forEach(h=>t.recordVersion(h)),l})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(l){this.lastWriteError=l}this.writtenDocs.add(e.toString())}delete(e){this.write(new hl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var l;e.mutations.forEach(l=>{t.delete(l.key.toString())}),t.forEach((l,h)=>{const g=x.fromPath(h);e.mutations.push(new Yh(g,e.precondition(g)))}),yield(l=(0,_.Z)(function*(h,g){const w=mn(h),R=Iu(w.It)+"/documents",H={writes:g.map(Q=>Oc(w.It,Q))};yield w.ao("Commit",R,H)}),function(h,g){return l.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw pn();t=nr.min()}const l=this.readVersions.get(e.key.toString());if(l){if(!t.isEqual(l))throw new Gt(mt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(nr.min())?is.exists(!1):is.updateTime(t):is.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(nr.min()))throw new Gt(mt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return is.updateTime(t)}return is.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class lm{constructor(e,t,l,h,g){this.asyncQueue=e,this.datastore=t,this.options=l,this.updateFunction=h,this.deferred=g,this.kc=l.maxAttempts,this.No=new _f(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,_.Z)(function*(){const t=new s_(e.datastore),l=e.Mc(t);l&&l.then(h=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(h)}).catch(g=>{e.Fc(g)}))}).catch(h=>{e.Fc(h)})}))}Mc(e){try{const t=this.updateFunction(e);return!gs(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Sc(t)}return!1}}class o_{constructor(e,t,l,h){var g=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=l,this.databaseInfo=h,this.user=Bi.UNAUTHENTICATED,this.clientId=va.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(l,function(){var w=(0,_.Z)(function*(R){$t("FirestoreClient","Received user=",R.uid),yield g.authCredentialListener(R),g.user=R});return function(R){return w.apply(this,arguments)}}()),this.appCheckCredentials.start(l,w=>($t("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}getConfiguration(){var e=this;return(0,_.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Gt(mt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(l){const h=xu(l,"Failed to shutdown persistence");t.reject(h)}})),t.promise}}function Yf(o,e){return Ph.apply(this,arguments)}function Ph(){return Ph=(0,_.Z)(function*(o,e){o.asyncQueue.verifyOperationInProgress(),$t("FirestoreClient","Initializing OfflineComponentProvider");const t=yield o.getConfiguration();yield e.initialize(t);let l=t.initialUser;o.setCredentialChangeListener(function(){var h=(0,_.Z)(function*(g){l.isEqual(g)||(yield Fl(e.localStore,g),l=g)});return function(g){return h.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>o.terminate()),o.offlineComponents=e}),Ph.apply(this,arguments)}function Qp(o,e){return um.apply(this,arguments)}function um(){return um=(0,_.Z)(function*(o,e){o.asyncQueue.verifyOperationInProgress();const t=yield Jp(o);$t("FirestoreClient","Initializing OnlineComponentProvider");const l=yield o.getConfiguration();yield e.initialize(t,l),o.setCredentialChangeListener(h=>Up(e.remoteStore,h)),o.setAppCheckTokenChangeListener((h,g)=>Up(e.remoteStore,g)),o.onlineComponents=e}),um.apply(this,arguments)}function Jp(o){return Nh.apply(this,arguments)}function Nh(){return Nh=(0,_.Z)(function*(o){return o.offlineComponents||($t("FirestoreClient","Using default OfflineComponentProvider"),yield Yf(o,new ao)),o.offlineComponents}),Nh.apply(this,arguments)}function Ld(o){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,_.Z)(function*(o){return o.onlineComponents||($t("FirestoreClient","Using default OnlineComponentProvider"),yield Qp(o,new Sa)),o.onlineComponents}),Xp.apply(this,arguments)}function cm(o){return Jp(o).then(e=>e.persistence)}function eg(o){return Jp(o).then(e=>e.localStore)}function dm(o){return Ld(o).then(e=>e.remoteStore)}function Qf(o){return Ld(o).then(e=>e.syncEngine)}function Xc(o){return ng.apply(this,arguments)}function ng(){return ng=(0,_.Z)(function*(o){const e=yield Ld(o),t=e.eventManager;return t.onListen=Xg.bind(null,e.syncEngine),t.onUnlisten=Uf.bind(null,e.syncEngine),t}),ng.apply(this,arguments)}function rg(o,e,t={}){const l=new Gi;return o.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function(h,g,w,R,H){const Q=new Fd({next:Re=>{g.enqueueAndForget(()=>kf(h,de));const ft=Re.docs.has(w);!ft&&Re.fromCache?H.reject(new Gt(mt.UNAVAILABLE,"Failed to get document because the client is offline.")):ft&&Re.fromCache&&R&&"server"===R.source?H.reject(new Gt(mt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):H.resolve(Re)},error:Re=>H.reject(Re)}),de=new Ff(Ml(w.path),Q,{includeMetadataChanges:!0,ku:!0});return Jg(h,de)}(yield Xc(o),o.asyncQueue,e,t,l)})),l.promise}function Zo(o,e,t={}){const l=new Gi;return o.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function(h,g,w,R,H){const Q=new Fd({next:Re=>{g.enqueueAndForget(()=>kf(h,de)),Re.fromCache&&"server"===R.source?H.reject(new Gt(mt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):H.resolve(Re)},error:Re=>H.reject(Re)}),de=new Ff(w,Q,{includeMetadataChanges:!0,ku:!0});return Jg(h,de)}(yield Xc(o),o.asyncQueue,e,t,l)})),l.promise}class l_{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new _f(this,"async_queue_retry"),this.Wc=()=>{const t=_o();t&&$t("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=_o();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=_o();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Gi;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,_.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!zs(t))throw t;$t("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(l=>{throw this.Kc=l,this.Gc=!1,gr("INTERNAL UNHANDLED ERROR: ",function(g){let w=g.message||"";return g.stack&&(w=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),w}(l)),l}).then(l=>(this.Gc=!1,l))));return this.Bc=t,t}enqueueAfterDelay(e,t,l){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const h=Nf.createAndSchedule(this,e,t,l,g=>this.Yc(g));return this.qc.push(h),h}zc(){this.Kc&&pn()}verifyOperationInProgress(){}Xc(){var e=this;return(0,_.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,l)=>t.targetTimeMs-l.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function og(o){return function(e,t){if("object"!=typeof e||null===e)return!1;const l=e;for(const h of["next","error","complete"])if(h in l&&"function"==typeof l[h])return!0;return!1}(o)}class ag{constructor(){this._progressObserver={},this._taskCompletionResolver=new Gi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,l){this._progressObserver={next:e,error:t,complete:l}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const u_=-1;class as extends du{constructor(e,t,l,h){super(e,t,l,h),this.type="firestore",this._queue=new l_,this._persistenceKey=(null==h?void 0:h.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Oh(this),this._firestoreClient.terminate()}}function pm(o,e){const t="object"==typeof o?o:(0,E.getApp)(),l="string"==typeof o?o:e||"(default)",h=(0,E._getProvider)(t,"firestore").getImmediate({identifier:l});if(!h._initialized){const g=(0,Te.P0)("firestore");g&&Yp(h,...g)}return h}function As(o){return o._firestoreClient||Oh(o),o._firestoreClient.verifyNotTerminated(),o._firestoreClient}function Oh(o){var e;const t=o._freezeSettings(),l=(g=(null===(e=o._app)||void 0===e?void 0:e.options.appId)||"",new Cl(o._databaseId,g,o._persistenceKey,(R=t).host,R.ssl,R.experimentalForceLongPolling,R.experimentalAutoDetectLongPolling,R.useFetchStreams));var g,R;o._firestoreClient=new o_(o._authCredentials,o._appCheckCredentials,o._queue,l)}function c_(o,e){ep(o=Nr(o,as));const t=As(o),l=o._freezeSettings(),h=new Sa;return ed(t,h,new Mu(h,l.cacheSizeBytes,null==e?void 0:e.forceOwnership))}function xa(o){ep(o=Nr(o,as));const e=As(o),t=o._freezeSettings(),l=new Sa;return ed(e,l,new zf(l,t.cacheSizeBytes))}function ed(o,e,t){const l=new Gi;return o.asyncQueue.enqueue((0,_.Z)(function*(){try{yield Yf(o,t),yield Qp(o,e),l.resolve()}catch(h){const g=h;if(!("FirebaseError"===(w=g).name?w.code===mt.FAILED_PRECONDITION||w.code===mt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&w instanceof DOMException)||22===w.code||20===w.code||11===w.code))throw g;eo("Error enabling offline persistence. Falling back to persistence disabled: "+g),l.reject(g)}var w})).then(()=>l.promise)}function G_(o){if(o._initialized&&!o._terminated)throw new Gt(mt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Gi;return o._queue.enqueueAndForgetEvenWhileRestricted((0,_.Z)(function*(){try{yield(t=(0,_.Z)(function*(l){if(!rs.C())return Promise.resolve();const h=l+"main";yield rs.delete(h)}),function(l){return t.apply(this,arguments)})(Jm(o._databaseId,o._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}function kh(o){return function(e){const t=new Gi;return e.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function xd(o,e){return Zc.apply(this,arguments)}(yield Qf(e),t)})),t.promise}(As(o=Nr(o,as)))}function ug(o){return function Ud(o){return o.asyncQueue.enqueue((0,_.Z)(function*(){const e=yield cm(o),t=yield dm(o);return e.setNetworkEnabled(!0),function(l){const h=mn(l);return h.wu.delete(0),Vl(h)}(t)}))}(As(o=Nr(o,as)))}function cg(o){return function a_(o){return o.asyncQueue.enqueue((0,_.Z)(function*(){const e=yield cm(o),t=yield dm(o);return e.setNetworkEnabled(!1),(l=(0,_.Z)(function*(h){const g=mn(h);g.wu.add(0),yield Id(g),g.yu.set("Offline")}),function(h){return l.apply(this,arguments)})(t);var l}))}(As(o=Nr(o,as)))}function Jf(o,e){const t=As(o=Nr(o,as)),l=new ag;return function Vd(o,e,t,l){const h=function(g,w){let R;return R="string"==typeof g?(new TextEncoder).encode(g):g,H=function(H,Q){if(H instanceof Uint8Array)return am(H,Q);if(H instanceof ArrayBuffer)return am(new Uint8Array(H),Q);if(H instanceof ReadableStream)return H.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(R),new i_(H,w);var H}(t,yo(e));o.asyncQueue.enqueueAndForget((0,_.Z)(function*(){!function Mh(o,e,t){const l=mn(o);var h;(h=(0,_.Z)(function*(g,w,R){try{const H=yield w.getMetadata();if(yield function(ft,Pt){const Ht=mn(ft),Pn=ys(Pt.createTime);return Ht.persistence.runTransaction("hasNewerBundle","readonly",Hn=>Ht.Ns.getBundleMetadata(Hn,Pt.id)).then(Hn=>!!Hn&&Hn.createTime.compareTo(Pn)>=0)}(g.localStore,H))return yield w.close(),R._completeWith({taskState:"Success",documentsLoaded:(ft=H).totalDocuments,bytesLoaded:ft.totalBytes,totalDocuments:ft.totalDocuments,totalBytes:ft.totalBytes}),Promise.resolve(new Set);R._updateProgress(la(H));const Q=new pc(H,g.localStore,w.It);let de=yield w.mc();for(;de;){const ft=yield Q.Fu(de);ft&&R._updateProgress(ft),de=yield w.mc()}const Re=yield Q.complete();return yield oo(g,Re.Lu,void 0),yield function(ft,Pt){const Ht=mn(ft);return Ht.persistence.runTransaction("Save bundle","readwrite",Pn=>Ht.Ns.saveBundleMetadata(Pn,Pt))}(g.localStore,H),R._completeWith(Re.progress),Promise.resolve(Re.Bu)}catch(H){return eo("SyncEngine",`Loading bundle failed with ${H}`),R._failWith(H),Promise.resolve(new Set)}var ft}),function(g,w,R){return h.apply(this,arguments)})(l,e,t).then(h=>{l.sharedClientState.notifyBundleLoaded(h)})}(yield Qf(o),h,l)}))}(t,o._databaseId,e,l),l}function Xf(o,e){return function sg(o,e){return o.asyncQueue.enqueue((0,_.Z)(function*(){return function(t,l){const h=mn(t);return h.persistence.runTransaction("Get named query","readonly",g=>h.Ns.getNamedQuery(g,l))}(yield eg(o),e)}))}(As(o=Nr(o,as)),e).then(t=>t?new Ro(o,null,t.query):null)}function ep(o){if(o._initialized||o._terminated)throw new Gt(mt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Hl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hl(Di.fromBase64String(e))}catch(t){throw new Gt(mt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hl(Di.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class td{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Gt(mt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class hu{constructor(e){this._methodName=e}}class nd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Gt(mt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Gt(mt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return mr(this._lat,e._lat)||mr(this._long,e._long)}}const d_=/^__.*__$/;class gm{constructor(e,t,l){this.data=e,this.fieldMask=t,this.fieldTransforms=l}toMutation(e,t){return null!==this.fieldMask?new Jl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nl(e,this.data,t,this.fieldTransforms)}}class Fh{constructor(e,t,l){this.data=e,this.fieldMask=t,this.fieldTransforms=l}toMutation(e,t){return new Jl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hg(o){switch(o){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pn()}}class Lh{constructor(e,t,l,h,g,w){this.settings=e,this.databaseId=t,this.It=l,this.ignoreUndefinedProperties=h,void 0===g&&this.na(),this.fieldTransforms=g||[],this.fieldMask=w||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Lh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const l=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.ia({path:l,oa:!1});return h.ua(e),h}ca(e){var t;const l=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.ia({path:l,oa:!1});return h.na(),h}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Wh(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(hg(this.sa)&&d_.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class tp{constructor(e,t,l){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=l||yo(e)}da(e,t,l,h=!1){return new Lh({sa:e,methodName:t,fa:l,path:hi.emptyPath(),oa:!1,la:h},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function fu(o){const e=o._freezeSettings(),t=yo(o._databaseId);return new tp(o._databaseId,!!e.ignoreUndefinedProperties,t)}function Uh(o,e,t,l,h,g={}){const w=o.da(g.merge||g.mergeFields?2:0,e,t,h);np("Data must be an object, but it was:",w,l);const R=pg(l,w);let H,Q;if(g.merge)H=new qs(w.fieldMask),Q=w.fieldTransforms;else if(g.mergeFields){const de=[];for(const Re of g.mergeFields){const ft=Hh(e,Re,t);if(!w.contains(ft))throw new Gt(mt.INVALID_ARGUMENT,`Field '${ft}' is specified in your field mask but missing from your input data.`);p_(de,ft)||de.push(ft)}H=new qs(de),Q=w.fieldTransforms.filter(Re=>H.covers(Re.field))}else H=null,Q=w.fieldTransforms;return new gm(new qi(R),H,Q)}class Ou extends hu{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ou}}function Vh(o,e,t){return new Lh({sa:3,fa:e.settings.fa,methodName:o._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Bh extends hu{_toFieldTransform(e){return new Pl(e.path,new Rl)}isEqual(e){return e instanceof Bh}}class mm extends hu{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Vh(this,e,!0),l=this._a.map(g=>ku(g,t)),h=new So(l);return new Pl(e.path,h)}isEqual(e){return this===e}}class h_ extends hu{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Vh(this,e,!0),l=this._a.map(g=>ku(g,t)),h=new Kl(l);return new Pl(e.path,h)}isEqual(e){return this===e}}class _m extends hu{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new dl(e.It,Zh(e.It,this.wa));return new Pl(e.path,t)}isEqual(e){return this===e}}function fg(o,e,t,l){const h=o.da(1,e,t);np("Data must be an object, but it was:",h,l);const g=[],w=qi.empty();ja(l,(H,Q)=>{const de=Bd(e,H,t);Q=(0,Te.m9)(Q);const Re=h.ca(de);if(Q instanceof Ou)g.push(de);else{const ft=ku(Q,Re);null!=ft&&(g.push(de),w.set(de,ft))}});const R=new qs(g);return new Fh(w,R,h.fieldTransforms)}function jh(o,e,t,l,h,g){const w=o.da(1,e,t),R=[Hh(e,l,t)],H=[h];if(g.length%2!=0)throw new Gt(mt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let ft=0;ft<g.length;ft+=2)R.push(Hh(e,g[ft])),H.push(g[ft+1]);const Q=[],de=qi.empty();for(let ft=R.length-1;ft>=0;--ft)if(!p_(Q,R[ft])){const Pt=R[ft];let Ht=H[ft];Ht=(0,Te.m9)(Ht);const Pn=w.ca(Pt);if(Ht instanceof Ou)Q.push(Pt);else{const Hn=ku(Ht,Pn);null!=Hn&&(Q.push(Pt),de.set(Pt,Hn))}}const Re=new qs(Q);return new Fh(de,Re,w.fieldTransforms)}function $h(o,e,t,l=!1){return ku(t,o.da(l?4:3,e))}function ku(o,e){if(gg(o=(0,Te.m9)(o)))return np("Unsupported field value:",e,o),pg(o,e);if(o instanceof hu)return function(t,l){if(!hg(l.sa))throw l.ha(`${t._methodName}() can only be used with update() and set()`);if(!l.path)throw l.ha(`${t._methodName}() is not currently supported inside arrays`);const h=t._toFieldTransform(l);h&&l.fieldTransforms.push(h)}(o,e),null;if(void 0===o&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),o instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,l){const h=[];let g=0;for(const w of t){let R=ku(w,l.aa(g));null==R&&(R={nullValue:"NULL_VALUE"}),h.push(R),g++}return{arrayValue:{values:h}}}(o,e)}return function(t,l){if(null===(t=(0,Te.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Zh(l.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const h=vi.fromDate(t);return{timestampValue:ss(l.It,h)}}if(t instanceof vi){const h=new vi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ss(l.It,h)}}if(t instanceof nd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Hl)return{bytesValue:mo(l.It,t._byteString)};if(t instanceof Ds){const h=l.databaseId,g=t.firestore._databaseId;if(!g.isEqual(h))throw l.ha(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:tu(t.firestore._databaseId||l.databaseId,t._key.path)}}throw l.ha(`Unsupported field value: ${Ru(t)}`)}(o,e)}function pg(o,e){const t={};return _u(o)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ja(o,(l,h)=>{const g=ku(h,e.ra(l));null!=g&&(t[l]=g)}),{mapValue:{fields:t}}}function gg(o){return!("object"!=typeof o||null===o||o instanceof Array||o instanceof Date||o instanceof vi||o instanceof nd||o instanceof Hl||o instanceof Ds||o instanceof hu)}function np(o,e,t){if(!gg(t)||"object"!=typeof(l=t)||null===l||Object.getPrototypeOf(l)!==Object.prototype&&null!==Object.getPrototypeOf(l)){const l=Ru(t);throw e.ha("an object"===l?o+" a custom object":o+" "+l)}var l}function Hh(o,e,t){if((e=(0,Te.m9)(e))instanceof td)return e._internalPath;if("string"==typeof e)return Bd(o,e);throw Wh("Field path arguments must be of type string or ",o,!1,void 0,t)}const f_=new RegExp("[~\\*/\\[\\]]");function Bd(o,e,t){if(e.search(f_)>=0)throw Wh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,o,!1,void 0,t);try{return new td(...e.split("."))._internalPath}catch(l){throw Wh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,o,!1,void 0,t)}}function Wh(o,e,t,l,h){const g=l&&!l.isEmpty(),w=void 0!==h;let R=`Function ${e}() called with invalid data`;t&&(R+=" (via `toFirestore()`)"),R+=". ";let H="";return(g||w)&&(H+=" (found",g&&(H+=` in field ${l}`),w&&(H+=` in document ${h}`),H+=")"),new Gt(mt.INVALID_ARGUMENT,R+o+H)}function p_(o,e){return o.some(t=>t.isEqual(e))}class jd{constructor(e,t,l,h,g){this._firestore=e,this._userDataWriter=t,this._key=l,this._document=h,this._converter=g}get id(){return this._key.path.lastSegment()}get ref(){return new Ds(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new g_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Gh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class g_ extends jd{data(){return super.data()}}function Gh(o,e){return"string"==typeof e?Bd(o,e):e instanceof td?e._internalPath:e._delegate._internalPath}function ym(o){if("L"===o.limitType&&0===o.explicitOrderBy.length)throw new Gt(mt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vs{}function zh(o,...e){for(const t of e)o=t._apply(o);return o}class vm extends vs{constructor(e,t,l){super(),this.ma=e,this.ga=t,this.ya=l,this.type="where"}_apply(e){const t=fu(e.firestore),l=function(h,g,w,R,H,Q,de){let Re;if(H.isKeyField()){if("array-contains"===Q||"array-contains-any"===Q)throw new Gt(mt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Q}' queries on documentId().`);if("in"===Q||"not-in"===Q){pu(de,Q);const Pt=[];for(const Ht of de)Pt.push(ip(R,h,Ht));Re={arrayValue:{values:Pt}}}else Re=ip(R,h,de)}else"in"!==Q&&"not-in"!==Q&&"array-contains-any"!==Q||pu(de,Q),Re=$h(w,"where",de,"in"===Q||"not-in"===Q);const ft=Sn.create(H,Q,Re);return function(Pt,Ht){if(Ht.dt()){const Hn=ll(Pt);if(null!==Hn&&!Hn.isEqual(Ht.field))throw new Gt(mt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Hn.toString()}' and '${Ht.field.toString()}'`);const Wi=al(Pt);null!==Wi&&bm(0,Ht.field,Wi)}const Pn=function(Hn,Wi){for(const fs of Hn.filters)if(Wi.indexOf(fs.op)>=0)return fs.op;return null}(Pt,function(Hn){switch(Hn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Ht.op));if(null!==Pn)throw new Gt(mt.INVALID_ARGUMENT,Pn===Ht.op?`Invalid query. You cannot use more than one '${Ht.op.toString()}' filter.`:`Invalid query. You cannot use '${Ht.op.toString()}' filters with '${Pn.toString()}' filters.`)}(h,ft),ft}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Ro(e.firestore,e.converter,function(h,g){const w=h.filters.concat([g]);return new go(h.path,h.collectionGroup,h.explicitOrderBy.slice(),w,h.limit,h.limitType,h.startAt,h.endAt)}(e._query,l))}}function m_(o,e,t){const l=e,h=Gh("where",o);return new vm(h,l,t)}class mg extends vs{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(l,h,g){if(null!==l.startAt)throw new Gt(mt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==l.endAt)throw new Gt(mt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const w=new sl(h,g);return function(R,H){if(null===al(R)){const Q=ll(R);null!==Q&&bm(0,Q,H.field)}}(l,w),w}(e._query,this.ma,this.pa);return new Ro(e.firestore,e.converter,function(l,h){const g=l.explicitOrderBy.concat([h]);return new go(l.path,l.collectionGroup,g,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(e._query,t))}}function __(o,e="asc"){const t=e,l=Gh("orderBy",o);return new mg(l,t)}class _g extends vs{constructor(e,t,l){super(),this.type=e,this.Ia=t,this.Ta=l}_apply(e){return new Ro(e.firestore,e.converter,qd(e._query,this.Ia,this.Ta))}}function Em(o){return Pu("limit",o),new _g("limit",o,"F")}function $d(o){return Pu("limitToLast",o),new _g("limitToLast",o,"L")}class wm extends vs{constructor(e,t,l){super(),this.type=e,this.Ea=t,this.Aa=l}_apply(e){const t=rp(e,this.type,this.Ea,this.Aa);return new Ro(e.firestore,e.converter,(h=t,new go((l=e._query).path,l.collectionGroup,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,h,l.endAt)));var l,h}}function y_(...o){return new wm("startAt",o,!0)}function Cm(...o){return new wm("startAfter",o,!1)}class yg extends vs{constructor(e,t,l){super(),this.type=e,this.Ea=t,this.Aa=l}_apply(e){const t=rp(e,this.type,this.Ea,this.Aa);return new Ro(e.firestore,e.converter,(h=t,new go((l=e._query).path,l.collectionGroup,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,h)));var l,h}}function vg(...o){return new yg("endBefore",o,!1)}function v_(...o){return new yg("endAt",o,!0)}function rp(o,e,t,l){if(t[0]=(0,Te.m9)(t[0]),t[0]instanceof jd)return function(h,g,w,R,H){if(!R)throw new Gt(mt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const Q=[];for(const de of ql(h))if(de.field.isKeyField())Q.push(ra(g,R.key));else{const Re=R.data.field(de.field);if(Gu(Re))throw new Gt(mt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+de.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Re){const ft=de.field.canonicalString();throw new Gt(mt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ft}' (used as the orderBy) does not exist.`)}Q.push(Re)}return new ro(Q,H)}(o._query,o.firestore._databaseId,e,t[0]._document,l);{const h=fu(o.firestore);return function(g,w,R,H,Q,de){const Re=g.explicitOrderBy;if(Q.length>Re.length)throw new Gt(mt.INVALID_ARGUMENT,`Too many arguments provided to ${H}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ft=[];for(let Pt=0;Pt<Q.length;Pt++){const Ht=Q[Pt];if(Re[Pt].field.isKeyField()){if("string"!=typeof Ht)throw new Gt(mt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${H}(), but got a ${typeof Ht}`);if(!ul(g)&&-1!==Ht.indexOf("/"))throw new Gt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${H}() must be a plain document ID, but '${Ht}' contains a slash.`);const Pn=g.path.child(Tr.fromString(Ht));if(!x.isDocumentKey(Pn))throw new Gt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${H}() must result in a valid document path, but '${Pn}' is not because it contains an odd number of segments.`);const Hn=new x(Pn);ft.push(ra(w,Hn))}else{const Pn=$h(R,H,Ht);ft.push(Pn)}}return new ro(ft,de)}(o._query,o.firestore._databaseId,h,e,t,l)}}function ip(o,e,t){if("string"==typeof(t=(0,Te.m9)(t))){if(""===t)throw new Gt(mt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ul(e)&&-1!==t.indexOf("/"))throw new Gt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const l=e.path.child(Tr.fromString(t));if(!x.isDocumentKey(l))throw new Gt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${l}' is not because it has an odd number of segments (${l.length}).`);return ra(o,new x(l))}if(t instanceof Ds)return ra(o,t._key);throw new Gt(mt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ru(t)}.`)}function pu(o,e){if(!Array.isArray(o)||0===o.length)throw new Gt(mt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(o.length>10)throw new Gt(mt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function bm(o,e,t){if(!t.isEqual(e))throw new Gt(mt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class u{convertValue(e,t="none"){switch(Ha(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $i(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($a(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw pn()}}convertObject(e,t){const l={};return ja(e.fields,(h,g)=>{l[h]=this.convertValue(g,t)}),l}convertGeoPoint(e){return new nd($i(e.latitude),$i(e.longitude))}convertArray(e,t){return(e.values||[]).map(l=>this.convertValue(l,t))}convertServerTimestamp(e,t){switch(t){case"previous":const l=Wd(e);return null==l?null:this.convertValue(l,t);case"estimate":return this.convertTimestamp(vu(e));default:return null}}convertTimestamp(e){const t=no(e);return new vi(t.seconds,t.nanos)}convertDocumentKey(e,t){const l=Tr.fromString(e);er(ru(l));const h=new ea(l.get(1),l.get(3)),g=new x(l.popFirst(5));return h.isEqual(t)||gr(`Document ${g} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),g}}function i(o,e,t){let l;return l=o?t&&(t.merge||t.mergeFields)?o.toFirestore(e,t):o.toFirestore(e):e,l}class s extends u{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ds(this.firestore,null,t)}}class c{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class p extends jd{constructor(e,t,l,h,g,w){super(e,t,l,h,w),this._firestore=e,this._firestoreImpl=e,this.metadata=g}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new C(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const l=this._document.data.field(Gh("DocumentSnapshot.get",e));if(null!==l)return this._userDataWriter.convertValue(l,t.serverTimestamps)}}}class C extends p{data(e={}){return super.data(e)}}class D{constructor(e,t,l,h){this._firestore=e,this._userDataWriter=t,this._snapshot=h,this.metadata=new c(h.hasPendingWrites,h.fromCache),this.query=l}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(l=>{e.call(t,new C(this._firestore,this._userDataWriter,l.key,l,new c(this._snapshot.mutatedKeys.has(l.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Gt(mt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(l,h){if(l._snapshot.oldDocs.isEmpty()){let g=0;return l._snapshot.docChanges.map(w=>({type:"added",doc:new C(l._firestore,l._userDataWriter,w.doc.key,w.doc,new c(l._snapshot.mutatedKeys.has(w.doc.key),l._snapshot.fromCache),l.query.converter),oldIndex:-1,newIndex:g++}))}{let g=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(w=>h||3!==w.type).map(w=>{const R=new C(l._firestore,l._userDataWriter,w.doc.key,w.doc,new c(l._snapshot.mutatedKeys.has(w.doc.key),l._snapshot.fromCache),l.query.converter);let H=-1,Q=-1;return 0!==w.type&&(H=g.indexOf(w.doc.key),g=g.delete(w.doc.key)),1!==w.type&&(g=g.add(w.doc),Q=g.indexOf(w.doc.key)),{type:L(w.type),doc:R,oldIndex:H,newIndex:Q}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function L(o){switch(o){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pn()}}function Y(o,e){return o instanceof p&&e instanceof p?o._firestore===e._firestore&&o._key.isEqual(e._key)&&(null===o._document?null===e._document:o._document.isEqual(e._document))&&o._converter===e._converter:o instanceof D&&e instanceof D&&o._firestore===e._firestore&&Jc(o.query,e.query)&&o.metadata.isEqual(e.metadata)&&o._snapshot.isEqual(e._snapshot)}function ae(o){o=Nr(o,Ds);const e=Nr(o.firestore,as);return rg(As(e),o._key).then(t=>Qs(e,o,t))}class Ae extends u{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ds(this.firestore,null,t)}}function He(o){o=Nr(o,Ds);const e=Nr(o.firestore,as),t=As(e),l=new Ae(e);return function hm(o,e){const t=new Gi;return o.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return(l=(0,_.Z)(function*(h,g,w){try{const R=yield function(H,Q){const de=mn(H);return de.persistence.runTransaction("read document","readonly",Re=>de.localDocuments.getDocument(Re,Q))}(h,g);R.isFoundDocument()?w.resolve(R):R.isNoDocument()?w.resolve(null):w.reject(new Gt(mt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(R){const H=xu(R,`Failed to get document '${g} from cache`);w.reject(H)}}),function(h,g,w){return l.apply(this,arguments)})(yield eg(o),e,t);var l})),t.promise}(t,o._key).then(h=>new p(e,l,o._key,h,new c(null!==h&&h.hasLocalMutations,!0),o.converter))}function st(o){o=Nr(o,Ds);const e=Nr(o.firestore,as);return rg(As(e),o._key,{source:"server"}).then(t=>Qs(e,o,t))}function kt(o){o=Nr(o,Ro);const e=Nr(o.firestore,as),t=As(e),l=new Ae(e);return ym(o._query),Zo(t,o._query).then(h=>new D(e,l,o,h))}function Lt(o){o=Nr(o,Ro);const e=Nr(o.firestore,as),t=As(e),l=new Ae(e);return function fm(o,e){const t=new Gi;return o.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return(l=(0,_.Z)(function*(h,g,w){try{const R=yield jc(h,g,!0),H=new gc(g,R.Hi),Q=H.Wu(R.documents),de=H.applyChanges(Q,!1);w.resolve(de.snapshot)}catch(R){const H=xu(R,`Failed to execute query '${g} against cache`);w.reject(H)}}),function(h,g,w){return l.apply(this,arguments)})(yield eg(o),e,t);var l})),t.promise}(t,o._query).then(h=>new D(e,l,o,h))}function Cn(o){o=Nr(o,Ro);const e=Nr(o.firestore,as),t=As(e),l=new Ae(e);return Zo(t,o._query,{source:"server"}).then(h=>new D(e,l,o,h))}function ur(o,e,t){o=Nr(o,Ds);const l=Nr(o.firestore,as),h=i(o.converter,e,t);return Ys(l,[Uh(fu(l),"setDoc",o._key,h,null!==o.converter,t).toMutation(o._key,is.none())])}function Ei(o,e,t,...l){o=Nr(o,Ds);const h=Nr(o.firestore,as),g=fu(h);let w;return w="string"==typeof(e=(0,Te.m9)(e))||e instanceof td?jh(g,"updateDoc",o._key,e,t,l):fg(g,"updateDoc",o._key,e),Ys(h,[w.toMutation(o._key,is.exists(!0))])}function Ji(o){return Ys(Nr(o.firestore,as),[new hl(o._key,is.none())])}function hs(o,e){const t=Nr(o.firestore,as),l=kd(o),h=i(o.converter,e);return Ys(t,[Uh(fu(o.firestore),"addDoc",l._key,h,null!==o.converter,{}).toMutation(l._key,is.exists(!1))]).then(()=>l)}function Es(o,...e){var t,l,h;o=(0,Te.m9)(o);let g={includeMetadataChanges:!1},w=0;"object"!=typeof e[w]||og(e[w])||(g=e[w],w++);const R={includeMetadataChanges:g.includeMetadataChanges};if(og(e[w])){const Re=e[w];e[w]=null===(t=Re.next)||void 0===t?void 0:t.bind(Re),e[w+1]=null===(l=Re.error)||void 0===l?void 0:l.bind(Re),e[w+2]=null===(h=Re.complete)||void 0===h?void 0:h.bind(Re)}let H,Q,de;if(o instanceof Ds)Q=Nr(o.firestore,as),de=Ml(o._key.path),H={next:Re=>{e[w]&&e[w](Qs(Q,o,Re))},error:e[w+1],complete:e[w+2]};else{const Re=Nr(o,Ro);Q=Nr(Re.firestore,as),de=Re._query;const ft=new Ae(Q);H={next:Pt=>{e[w]&&e[w](new D(Q,ft,Re,Pt))},error:e[w+1],complete:e[w+2]},ym(o._query)}return function(Re,ft,Pt,Ht){const Pn=new Fd(Ht),Hn=new Ff(ft,Pn,Pt);return Re.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return Jg(yield Xc(Re),Hn)})),()=>{Pn.bc(),Re.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return kf(yield Xc(Re),Hn)}))}}(As(Q),de,R,H)}function Ma(o,e){return function ig(o,e){const t=new Fd(e);return o.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return l=yield Xc(o),h=t,mn(l).bu.add(h),void h.next();var l,h})),()=>{t.bc(),o.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return l=yield Xc(o),h=t,void mn(l).bu.delete(h);var l,h}))}}(As(o=Nr(o,as)),og(e)?e:{next:e})}function Ys(o,e){return function(t,l){const h=new Gi;return t.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function Wp(o,e,t){return Th.apply(this,arguments)}(yield Qf(t),l,h)})),h.promise}(As(o),e)}function Qs(o,e,t){const l=t.docs.get(e._key),h=new Ae(o);return new p(o,h,e._key,l,new c(t.hasPendingWrites,t.fromCache),e.converter)}const gu={maxAttempts:5};class sp{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=fu(e)}set(e,t,l){this._verifyNotCommitted();const h=el(e,this._firestore),g=i(h.converter,t,l),w=Uh(this._dataReader,"WriteBatch.set",h._key,g,null!==h.converter,l);return this._mutations.push(w.toMutation(h._key,is.none())),this}update(e,t,l,...h){this._verifyNotCommitted();const g=el(e,this._firestore);let w;return w="string"==typeof(t=(0,Te.m9)(t))||t instanceof td?jh(this._dataReader,"WriteBatch.update",g._key,t,l,h):fg(this._dataReader,"WriteBatch.update",g._key,t),this._mutations.push(w.toMutation(g._key,is.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=el(e,this._firestore);return this._mutations=this._mutations.concat(new hl(t._key,is.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Gt(mt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function el(o,e){if((o=(0,Te.m9)(o)).firestore!==e)throw new Gt(mt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return o}class yc extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=fu(e)}get(e){const t=el(e,this._firestore),l=new s(this._firestore);return this._transaction.lookup([t._key]).then(h=>{if(!h||1!==h.length)return pn();const g=h[0];if(g.isFoundDocument())return new jd(this._firestore,l,g.key,g,t.converter);if(g.isNoDocument())return new jd(this._firestore,l,t._key,null,t.converter);throw pn()})}set(e,t,l){const h=el(e,this._firestore),g=i(h.converter,t,l),w=Uh(this._dataReader,"Transaction.set",h._key,g,null!==h.converter,l);return this._transaction.set(h._key,w),this}update(e,t,l,...h){const g=el(e,this._firestore);let w;return w="string"==typeof(t=(0,Te.m9)(t))||t instanceof td?jh(this._dataReader,"Transaction.update",g._key,t,l,h):fg(this._dataReader,"Transaction.update",g._key,t),this._transaction.update(g._key,w),this}delete(e){const t=el(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=el(e,this._firestore),l=new Ae(this._firestore);return super.get(e).then(h=>new p(this._firestore,l,t._key,h._document,new c(!1,!1),t.converter))}}function Eg(o,e,t){o=Nr(o,as);const l=Object.assign(Object.assign({},gu),t);return function(h){if(h.maxAttempts<1)throw new Gt(mt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(l),function(h,g,w){const R=new Gi;return h.asyncQueue.enqueueAndForget((0,_.Z)(function*(){const H=yield function tg(o){return Ld(o).then(e=>e.datastore)}(h);new lm(h.asyncQueue,H,w,g,R).run()})),R.promise}(As(o),h=>e(new yc(o,h)),l)}function Im(){return new Ou("deleteField")}function Kn(){return new Bh("serverTimestamp")}function _r(...o){return new mm("arrayUnion",o)}function br(...o){return new h_("arrayRemove",o)}function bi(o){return new _m("increment",o)}!function(o,e=!0){Ws=E.SDK_VERSION,(0,E._registerComponent)(new J.wA("firestore",(t,{instanceIdentifier:l,options:h})=>{const g=t.getProvider("app").getImmediate(),w=new as(new El(t.getProvider("auth-internal")),new Xo(t.getProvider("app-check-internal")),function(R,H){if(!Object.prototype.hasOwnProperty.apply(R.options,["projectId"]))throw new Gt(mt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ea(R.options.projectId,H)}(g,l),g);return h=Object.assign({useFetchStreams:e},h),w._setSettings(h),w},"PUBLIC").setMultipleInstances(!0)),(0,E.registerVersion)(_a,"3.7.1",o),(0,E.registerVersion)(_a,"3.7.1","esm2017")}()},6961:(Yt,Je,j)=>{j.d(Je,{bm:()=>Or,UJ:()=>Zr,gE:()=>wt,FN:()=>Fi,$Y:()=>Bn,IX:()=>Qe,qm:()=>jr,g6:()=>lr,gH:()=>lt,y4:()=>je,a1:()=>zr,oq:()=>fr,Jt:()=>Cs,sd:()=>ps,cF:()=>pi,pb:()=>us,aF:()=>Jr,iH:()=>or,Ym:()=>co,KV:()=>ca,B0:()=>Ls});var _=j(5861),E=j(9681),J=j(2090),ye=j(4859);const Te="firebasestorage.googleapis.com",Le="storageBucket";class ce extends J.ZR{constructor(G,pe,xe=0){super(fe(G),`Firebase Storage: ${pe} (${fe(G)})`),this.status_=xe,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ce.prototype)}get status(){return this.status_}set status(G){this.status_=G}_codeEquals(G){return fe(G)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(G){this.customData.serverResponse=G,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function fe(X){return"storage/"+X}function ke(){return new ce("unknown","An unknown error occurred, please check the error payload for server response.")}function $e(){return new ce("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function it(){return new ce("canceled","User canceled the upload/download.")}function Xe(){return new ce("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function lt(X){return new ce("invalid-argument",X)}function Ce(){return new ce("app-deleted","The Firebase app was deleted.")}function je(X){return new ce("invalid-root-operation","The operation '"+X+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function tt(X,G){return new ce("invalid-format","String does not match format '"+X+"': "+G)}function ct(X){throw new ce("internal-error","Internal error: "+X)}class wt{constructor(G,pe){this.bucket=G,this.path_=pe}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const G=encodeURIComponent;return"/b/"+G(this.bucket)+"/o/"+G(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(G,pe){let xe;try{xe=wt.makeFromUrl(G,pe)}catch(qe){return new wt(G,"")}if(""===xe.path)return xe;throw function We(X){return new ce("invalid-default-bucket","Invalid default bucket '"+X+"'.")}(G)}static makeFromUrl(G,pe){let xe=null;const qe="([A-Za-z0-9.\\-_]+)",fn=new RegExp("^gs://"+qe+"(/(.*))?$","i");function An(Qt){Qt.path_=decodeURIComponent(Qt.path)}const te=pe.replace(/[.]/g,"\\."),$n=[{regex:fn,indices:{bucket:1,path:3},postModify:function vt(Qt){"/"===Qt.path.charAt(Qt.path.length-1)&&(Qt.path_=Qt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${te}/v[A-Za-z0-9_]+/b/${qe}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:An},{regex:new RegExp(`^https?://${pe===Te?"(?:storage.googleapis.com|storage.cloud.google.com)":pe}/${qe}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:An}];for(let Qt=0;Qt<$n.length;Qt++){const Jn=$n[Qt],Pr=Jn.regex.exec(G);if(Pr){let rn=Pr[Jn.indices.path];rn||(rn=""),xe=new wt(Pr[Jn.indices.bucket],rn),Jn.postModify(xe);break}}if(null==xe)throw function _t(X){return new ce("invalid-url","Invalid URL '"+X+"'.")}(G);return xe}}class et{constructor(G){this.promise_=Promise.reject(G)}getPromise(){return this.promise_}cancel(G=!1){}}function an(X){return"string"==typeof X||X instanceof String}function wn(X){return gt()&&X instanceof Blob}function gt(){return"undefined"!=typeof Blob}function Dt(X,G,pe,xe){if(xe<G)throw lt(`Invalid value for '${X}'. Expected ${G} or greater.`);if(xe>pe)throw lt(`Invalid value for '${X}'. Expected ${pe} or less.`)}function Me(X,G,pe){let xe=G;return null==pe&&(xe=`https://${G}`),`${pe}://${xe}/v0${X}`}function ot(X){const G=encodeURIComponent;let pe="?";for(const xe in X)X.hasOwnProperty(xe)&&(pe=pe+(G(xe)+"=")+G(X[xe])+"&");return pe=pe.slice(0,-1),pe}var _e=(()=>{return(X=_e||(_e={}))[X.NO_ERROR=0]="NO_ERROR",X[X.NETWORK_ERROR=1]="NETWORK_ERROR",X[X.ABORT=2]="ABORT",_e;var X})();function yn(X,G){const pe=X>=500&&X<600,qe=-1!==[408,429].indexOf(X),vt=-1!==G.indexOf(X);return pe||qe||vt}class Wn{constructor(G,pe,xe,qe,vt,Ft,fn,Mn,An,F,te,V=!0){this.url_=G,this.method_=pe,this.headers_=xe,this.body_=qe,this.successCodes_=vt,this.additionalRetryCodes_=Ft,this.callback_=fn,this.errorCallback_=Mn,this.timeout_=An,this.progressCallback_=F,this.connectionFactory_=te,this.retry=V,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((se,Ie)=>{this.resolve_=se,this.reject_=Ie,this.start_()})}start_(){const pe=(xe,qe)=>{const vt=this.resolve_,Ft=this.reject_,fn=qe.connection;if(qe.wasSuccessCode)try{const Mn=this.callback_(fn,fn.getResponse());!function On(X){return void 0!==X}(Mn)?vt():vt(Mn)}catch(Mn){Ft(Mn)}else if(null!==fn){const Mn=ke();Mn.serverResponse=fn.getErrorText(),Ft(this.errorCallback_?this.errorCallback_(fn,Mn):Mn)}else Ft(qe.canceled?this.appDelete_?Ce():it():$e())};this.canceled_?pe(0,new jn(!1,null,!0)):this.backoffId_=function Tn(X,G,pe){let xe=1,qe=null,vt=null,Ft=!1,fn=0;function Mn(){return 2===fn}let An=!1;function F(...Mt){An||(An=!0,G.apply(null,Mt))}function te(Mt){qe=setTimeout(()=>{qe=null,X(se,Mn())},Mt)}function V(){vt&&clearTimeout(vt)}function se(Mt,...on){if(An)return void V();if(Mt)return V(),void F.call(null,Mt,...on);if(Mn()||Ft)return V(),void F.call(null,Mt,...on);let $n;xe<64&&(xe*=2),1===fn?(fn=2,$n=0):$n=1e3*(xe+Math.random()),te($n)}let Ie=!1;function ht(Mt){Ie||(Ie=!0,V(),!An&&(null!==qe?(Mt||(fn=2),clearTimeout(qe),te(0)):Mt||(fn=1)))}return te(0),vt=setTimeout(()=>{Ft=!0,ht(!0)},pe),ht}((xe,qe)=>{if(qe)return void xe(!1,new jn(!1,null,!0));const vt=this.connectionFactory_();this.pendingConnection_=vt;const Ft=fn=>{null!==this.progressCallback_&&this.progressCallback_(fn.loaded,fn.lengthComputable?fn.total:-1)};null!==this.progressCallback_&&vt.addUploadProgressListener(Ft),vt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&vt.removeUploadProgressListener(Ft),this.pendingConnection_=null;const fn=vt.getErrorCode()===_e.NO_ERROR,Mn=vt.getStatus();if((!fn||yn(Mn,this.additionalRetryCodes_))&&this.retry){const F=vt.getErrorCode()===_e.ABORT;return void xe(!1,new jn(!1,null,F))}const An=-1!==this.successCodes_.indexOf(Mn);xe(!0,new jn(An,vt))})},pe,this.timeout_)}getPromise(){return this.promise_}cancel(G){this.canceled_=!0,this.appDelete_=G||!1,null!==this.backoffId_&&function Jt(X){X(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class jn{constructor(G,pe,xe){this.wasSuccessCode=G,this.connection=pe,this.canceled=!!xe}}function ir(...X){const G=function tn(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==G){const pe=new G;for(let xe=0;xe<X.length;xe++)pe.append(X[xe]);return pe.getBlob()}if(gt())return new Blob(X);throw new ce("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Or={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Gr{constructor(G,pe){this.data=G,this.contentType=pe||null}}function jr(X,G){switch(X){case Or.RAW:return new Gr(Mr(G));case Or.BASE64:case Or.BASE64URL:return new Gr(sn(X,G));case Or.DATA_URL:return new Gr(function un(X){const G=new Vn(X);return G.base64?sn(Or.BASE64,G.rest):function ti(X){let G;try{G=decodeURIComponent(X)}catch(pe){throw tt(Or.DATA_URL,"Malformed data URL.")}return Mr(G)}(G.rest)}(G),function nn(X){return new Vn(X).contentType}(G))}throw ke()}function Mr(X){const G=[];for(let pe=0;pe<X.length;pe++){let xe=X.charCodeAt(pe);xe<=127?G.push(xe):xe<=2047?G.push(192|xe>>6,128|63&xe):55296==(64512&xe)?pe<X.length-1&&56320==(64512&X.charCodeAt(pe+1))?(xe=65536|(1023&xe)<<10|1023&X.charCodeAt(++pe),G.push(240|xe>>18,128|xe>>12&63,128|xe>>6&63,128|63&xe)):G.push(239,191,189):56320==(64512&xe)?G.push(239,191,189):G.push(224|xe>>12,128|xe>>6&63,128|63&xe)}return new Uint8Array(G)}function sn(X,G){switch(X){case Or.BASE64:{const qe=-1!==G.indexOf("-"),vt=-1!==G.indexOf("_");if(qe||vt)throw tt(X,"Invalid character '"+(qe?"-":"_")+"' found: is it base64url encoded?");break}case Or.BASE64URL:{const qe=-1!==G.indexOf("+"),vt=-1!==G.indexOf("/");if(qe||vt)throw tt(X,"Invalid character '"+(qe?"+":"/")+"' found: is it base64 encoded?");G=G.replace(/-/g,"+").replace(/_/g,"/");break}}let pe;try{pe=function Nn(X){return atob(X)}(G)}catch(qe){throw tt(X,"Invalid character found")}const xe=new Uint8Array(pe.length);for(let qe=0;qe<pe.length;qe++)xe[qe]=pe.charCodeAt(qe);return xe}class Vn{constructor(G){this.base64=!1,this.contentType=null;const pe=G.match(/^data:([^,]+)?,/);if(null===pe)throw tt(Or.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const xe=pe[1]||null;null!=xe&&(this.base64=function Dr(X,G){return X.length>=G.length&&X.substring(X.length-G.length)===G}(xe,";base64"),this.contentType=this.base64?xe.substring(0,xe.length-";base64".length):xe),this.rest=G.substring(G.indexOf(",")+1)}}class Zr{constructor(G,pe){let xe=0,qe="";wn(G)?(this.data_=G,xe=G.size,qe=G.type):G instanceof ArrayBuffer?(pe?this.data_=new Uint8Array(G):(this.data_=new Uint8Array(G.byteLength),this.data_.set(new Uint8Array(G))),xe=this.data_.length):G instanceof Uint8Array&&(pe?this.data_=G:(this.data_=new Uint8Array(G.length),this.data_.set(G)),xe=G.length),this.size_=xe,this.type_=qe}size(){return this.size_}type(){return this.type_}slice(G,pe){if(wn(this.data_)){const qe=function vn(X,G,pe){return X.webkitSlice?X.webkitSlice(G,pe):X.mozSlice?X.mozSlice(G,pe):X.slice?X.slice(G,pe):null}(this.data_,G,pe);return null===qe?null:new Zr(qe)}{const xe=new Uint8Array(this.data_.buffer,G,pe-G);return new Zr(xe,!0)}}static getBlob(...G){if(gt()){const pe=G.map(xe=>xe instanceof Zr?xe.data_:xe);return new Zr(ir.apply(null,pe))}{const pe=G.map(Ft=>an(Ft)?jr(Or.RAW,Ft).data:Ft.data_);let xe=0;pe.forEach(Ft=>{xe+=Ft.byteLength});const qe=new Uint8Array(xe);let vt=0;return pe.forEach(Ft=>{for(let fn=0;fn<Ft.length;fn++)qe[vt++]=Ft[fn]}),new Zr(qe,!0)}}uploadData(){return this.data_}}function Dn(X){let G;try{G=JSON.parse(X)}catch(pe){return null}return function Zt(X){return"object"==typeof X&&!Array.isArray(X)}(G)?G:null}function ar(X){const G=X.lastIndexOf("/",X.length-2);return-1===G?X:X.slice(G+1)}function En(X,G){return G}class hr{constructor(G,pe,xe,qe){this.server=G,this.local=pe||G,this.writable=!!xe,this.xform=qe||En}}let Gn=null;function Ot(){if(Gn)return Gn;const X=[];X.push(new hr("bucket")),X.push(new hr("generation")),X.push(new hr("metageneration")),X.push(new hr("name","fullPath",!0));const pe=new hr("name");pe.xform=function G(vt,Ft){return function cr(X){return!an(X)||X.length<2?X:ar(X)}(Ft)},X.push(pe);const qe=new hr("size");return qe.xform=function xe(vt,Ft){return void 0!==Ft?Number(Ft):Ft},X.push(qe),X.push(new hr("timeCreated")),X.push(new hr("updated")),X.push(new hr("md5Hash",null,!0)),X.push(new hr("cacheControl",null,!0)),X.push(new hr("contentDisposition",null,!0)),X.push(new hr("contentEncoding",null,!0)),X.push(new hr("contentLanguage",null,!0)),X.push(new hr("contentType",null,!0)),X.push(new hr("metadata","customMetadata",!0)),Gn=X,Gn}function cn(X,G,pe){const xe=Dn(G);return null===xe?null:function Kt(X,G,pe){const xe={type:"file"},qe=pe.length;for(let vt=0;vt<qe;vt++){const Ft=pe[vt];xe[Ft.local]=Ft.xform(xe,G[Ft.server])}return function dt(X,G){Object.defineProperty(X,"ref",{get:function pe(){const vt=new wt(X.bucket,X.fullPath);return G._makeStorageReference(vt)}})}(xe,X),xe}(X,xe,pe)}function tr(X,G){const pe={},xe=G.length;for(let qe=0;qe<xe;qe++){const vt=G[qe];vt.writable&&(pe[vt.server]=X[vt.local])}return JSON.stringify(pe)}const Se="prefixes";class le{constructor(G,pe,xe,qe){this.url=G,this.method=pe,this.handler=xe,this.timeout=qe,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function K(X){if(!X)throw ke()}function ee(X,G){return function pe(xe,qe){const vt=cn(X,qe,G);return K(null!==vt),vt}}function Ge(X){return function G(pe,xe){let qe;return qe=401===pe.getStatus()?pe.getErrorText().includes("Firebase App Check token is invalid")?function Ct(){return new ce("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Ye(){return new ce("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===pe.getStatus()?function ut(X){return new ce("quota-exceeded","Quota for bucket '"+X+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(X.bucket):403===pe.getStatus()?function Ke(X){return new ce("unauthorized","User does not have permission to access '"+X+"'.")}(X.path):xe,qe.status=pe.getStatus(),qe.serverResponse=xe.serverResponse,qe}}function Vt(X){const G=Ge(X);return function pe(xe,qe){let vt=G(xe,qe);return 404===xe.getStatus()&&(vt=function yt(X){return new ce("object-not-found","Object '"+X+"' does not exist.")}(X.path)),vt.serverResponse=qe.serverResponse,vt}}function Bt(X,G,pe){const qe=Me(G.fullServerUrl(),X.host,X._protocol),Ft=X.maxOperationRetryTime,fn=new le(qe,"GET",ee(X,pe),Ft);return fn.errorHandler=Vt(G),fn}function qn(X,G,pe,xe,qe){const vt={};vt.prefix=G.isRoot?"":G.path+"/",pe&&pe.length>0&&(vt.delimiter=pe),xe&&(vt.pageToken=xe),qe&&(vt.maxResults=qe);const fn=Me(G.bucketOnlyServerUrl(),X.host,X._protocol),An=X.maxOperationRetryTime,F=new le(fn,"GET",function ue(X,G){return function pe(xe,qe){const vt=function me(X,G,pe){const xe=Dn(pe);return null===xe?null:function Fe(X,G,pe){const xe={prefixes:[],items:[],nextPageToken:pe.nextPageToken};if(pe[Se])for(const qe of pe[Se]){const vt=qe.replace(/\/$/,""),Ft=X._makeStorageReference(new wt(G,vt));xe.prefixes.push(Ft)}if(pe.items)for(const qe of pe.items){const vt=X._makeStorageReference(new wt(G,qe.name));xe.items.push(vt)}return xe}(X,G,xe)}(X,G,qe);return K(null!==vt),vt}}(X,G.bucket),An);return F.urlParams=vt,F.errorHandler=Ge(G),F}function oi(X,G,pe){const xe=Object.assign({},pe);return xe.fullPath=X.path,xe.size=G.size(),xe.contentType||(xe.contentType=function Un(X,G){return X&&X.contentType||G&&G.type()||"application/octet-stream"}(null,G)),xe}function $r(X,G,pe,xe,qe){const vt=G.bucketOnlyServerUrl(),Ft={"X-Goog-Upload-Protocol":"multipart"},Mn=function fn(){let $n="";for(let Qt=0;Qt<2;Qt++)$n+=Math.random().toString().slice(2);return $n}();Ft["Content-Type"]="multipart/related; boundary="+Mn;const An=oi(G,xe,qe),F=tr(An,pe),se=Zr.getBlob("--"+Mn+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+F+"\r\n--"+Mn+"\r\nContent-Type: "+An.contentType+"\r\n\r\n",xe,"\r\n--"+Mn+"--");if(null===se)throw Xe();const Ie={name:An.fullPath},ht=Me(vt,X.host,X._protocol),on=X.maxUploadRetryTime,Qn=new le(ht,"POST",ee(X,pe),on);return Qn.urlParams=Ie,Qn.headers=Ft,Qn.body=se.uploadData(),Qn.errorHandler=Ge(G),Qn}class zt{constructor(G,pe,xe,qe){this.current=G,this.total=pe,this.finalized=!!xe,this.metadata=qe||null}}function Ln(X,G){let pe=null;try{pe=X.getResponseHeader("X-Goog-Upload-Status")}catch(qe){K(!1)}return K(!!pe&&-1!==(G||["active"]).indexOf(pe)),pe}const Fi={STATE_CHANGED:"state_changed"},Bn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Li(X){switch(X){case"running":case"pausing":case"canceling":return Bn.RUNNING;case"paused":return Bn.PAUSED;case"success":return Bn.SUCCESS;case"canceled":return Bn.CANCELED;default:return Bn.ERROR}}class ri{constructor(G,pe,xe){if(function St(X){return"function"==typeof X}(G)||null!=pe||null!=xe)this.next=G,this.error=null!=pe?pe:void 0,this.complete=null!=xe?xe:void 0;else{const vt=G;this.next=vt.next,this.error=vt.error,this.complete=vt.complete}}}function Yn(X){return(...G)=>{Promise.resolve().then(()=>X(...G))}}class mi extends class ws{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_e.NO_ERROR,this.sendPromise_=new Promise(G=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_e.ABORT,G()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_e.NETWORK_ERROR,G()}),this.xhr_.addEventListener("load",()=>{G()})})}send(G,pe,xe,qe){if(this.sent_)throw ct("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(pe,G,!0),void 0!==qe)for(const vt in qe)qe.hasOwnProperty(vt)&&this.xhr_.setRequestHeader(vt,qe[vt].toString());return void 0!==xe?this.xhr_.send(xe):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ct("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ct("cannot .getStatus() before sending");try{return this.xhr_.status}catch(G){return-1}}getResponse(){if(!this.sent_)throw ct("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ct("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(G){return this.xhr_.getResponseHeader(G)}addUploadProgressListener(G){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",G)}removeUploadProgressListener(G){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",G)}}{initXhr(){this.xhr_.responseType="text"}}function di(){return new mi}class Qe{constructor(G,pe,xe=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=G,this._blob=pe,this._metadata=xe,this._mappings=Ot(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=qe=>{if(this._request=void 0,this._chunkMultiplier=1,qe._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const vt=this.isExponentialBackoffExpired();if(yn(qe.status,[])){if(!vt)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();qe=$e()}this._error=qe,this._transition("error")}},this._metadataErrorHandler=qe=>{this._request=void 0,qe._codeEquals("canceled")?this.completeTransitions_():(this._error=qe,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((qe,vt)=>{this._resolve=qe,this._reject=vt,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const G=this._transferred;return pe=>this._updateProgress(G+pe)}_shouldDoResumable(G){return G.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(G){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([pe,xe])=>{switch(this._state){case"running":G(pe,xe);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((G,pe)=>{const xe=function Rr(X,G,pe,xe,qe){const vt=G.bucketOnlyServerUrl(),Ft=oi(G,xe,qe),fn={name:Ft.fullPath},Mn=Me(vt,X.host,X._protocol),F={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${xe.size()}`,"X-Goog-Upload-Header-Content-Type":Ft.contentType,"Content-Type":"application/json; charset=utf-8"},te=tr(Ft,pe),Ie=new le(Mn,"POST",function se(ht){let Mt;Ln(ht);try{Mt=ht.getResponseHeader("X-Goog-Upload-URL")}catch(on){K(!1)}return K(an(Mt)),Mt},X.maxUploadRetryTime);return Ie.urlParams=fn,Ie.headers=F,Ie.body=te,Ie.errorHandler=Ge(G),Ie}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),qe=this._ref.storage._makeRequest(xe,di,G,pe);this._request=qe,qe.getPromise().then(vt=>{this._request=void 0,this._uploadUrl=vt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const G=this._uploadUrl;this._resolveToken((pe,xe)=>{const qe=function Kr(X,G,pe,xe){const Mn=new le(pe,"POST",function vt(An){const F=Ln(An,["active","final"]);let te=null;try{te=An.getResponseHeader("X-Goog-Upload-Size-Received")}catch(se){K(!1)}te||K(!1);const V=Number(te);return K(!isNaN(V)),new zt(V,xe.size(),"final"===F)},X.maxUploadRetryTime);return Mn.headers={"X-Goog-Upload-Command":"query"},Mn.errorHandler=Ge(G),Mn}(this._ref.storage,this._ref._location,G,this._blob),vt=this._ref.storage._makeRequest(qe,di,pe,xe);this._request=vt,vt.getPromise().then(Ft=>{Ft=Ft,this._request=void 0,this._updateProgress(Ft.current),this._needToFetchStatus=!1,Ft.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const G=262144*this._chunkMultiplier,pe=new zt(this._transferred,this._blob.size()),xe=this._uploadUrl;this._resolveToken((qe,vt)=>{let Ft;try{Ft=function fi(X,G,pe,xe,qe,vt,Ft,fn){const Mn=new zt(0,0);if(Ft?(Mn.current=Ft.current,Mn.total=Ft.total):(Mn.current=0,Mn.total=xe.size()),xe.size()!==Mn.total)throw function At(){return new ce("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const An=Mn.total-Mn.current;let F=An;qe>0&&(F=Math.min(F,qe));const te=Mn.current;let se="";se=0===F?"finalize":An===F?"upload, finalize":"upload";const Ie={"X-Goog-Upload-Command":se,"X-Goog-Upload-Offset":`${Mn.current}`},ht=xe.slice(te,te+F);if(null===ht)throw Xe();const $n=new le(pe,"POST",function Mt(Qt,Jn){const Pr=Ln(Qt,["active","final"]),Hr=Mn.current+F,rn=xe.size();let Pi;return Pi="final"===Pr?ee(G,vt)(Qt,Jn):null,new zt(Hr,rn,"final"===Pr,Pi)},G.maxUploadRetryTime);return $n.headers=Ie,$n.body=ht.uploadData(),$n.progressCallback=fn||null,$n.errorHandler=Ge(X),$n}(this._ref._location,this._ref.storage,xe,this._blob,G,this._mappings,pe,this._makeProgressCallback())}catch(Mn){return this._error=Mn,void this._transition("error")}const fn=this._ref.storage._makeRequest(Ft,di,qe,vt,!1);this._request=fn,fn.getPromise().then(Mn=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Mn.current),Mn.finalized?(this._metadata=Mn.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((G,pe)=>{const xe=Bt(this._ref.storage,this._ref._location,this._mappings),qe=this._ref.storage._makeRequest(xe,di,G,pe);this._request=qe,qe.getPromise().then(vt=>{this._request=void 0,this._metadata=vt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((G,pe)=>{const xe=$r(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),qe=this._ref.storage._makeRequest(xe,di,G,pe);this._request=qe,qe.getPromise().then(vt=>{this._request=void 0,this._metadata=vt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(G){const pe=this._transferred;this._transferred=G,this._transferred!==pe&&this._notifyObservers()}_transition(G){if(this._state!==G)switch(G){case"canceling":case"pausing":this._state=G,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const pe="paused"===this._state;this._state=G,pe&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=G,this._notifyObservers();break;case"canceled":this._error=it(),this._state=G,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const G=Li(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:G,metadata:this._metadata,task:this,ref:this._ref}}on(G,pe,xe,qe){const vt=new ri(pe||void 0,xe||void 0,qe||void 0);return this._addObserver(vt),()=>{this._removeObserver(vt)}}then(G,pe){return this._promise.then(G,pe)}catch(G){return this.then(null,G)}_addObserver(G){this._observers.push(G),this._notifyObserver(G)}_removeObserver(G){const pe=this._observers.indexOf(G);-1!==pe&&this._observers.splice(pe,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(pe=>{this._notifyObserver(pe)})}_finishPromise(){if(void 0!==this._resolve){let G=!0;switch(Li(this._state)){case Bn.SUCCESS:Yn(this._resolve.bind(null,this.snapshot))();break;case Bn.CANCELED:case Bn.ERROR:Yn(this._reject.bind(null,this._error))();break;default:G=!1}G&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(G){switch(Li(this._state)){case Bn.RUNNING:case Bn.PAUSED:G.next&&Yn(G.next.bind(G,this.snapshot))();break;case Bn.SUCCESS:G.complete&&Yn(G.complete.bind(G))();break;default:G.error&&Yn(G.error.bind(G,this._error))()}}resume(){const G="paused"===this._state||"pausing"===this._state;return G&&this._transition("running"),G}pause(){const G="running"===this._state;return G&&this._transition("pausing"),G}cancel(){const G="running"===this._state||"pausing"===this._state;return G&&this._transition("canceling"),G}}class It{constructor(G,pe){this._service=G,this._location=pe instanceof wt?pe:wt.makeFromUrl(pe,G.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(G,pe){return new It(G,pe)}get root(){const G=new wt(this._location.bucket,"");return this._newRef(this._service,G)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ar(this._location.path)}get storage(){return this._service}get parent(){const G=function Ar(X){if(0===X.length)return null;const G=X.lastIndexOf("/");return-1===G?"":X.slice(0,G)}(this._location.path);if(null===G)return null;const pe=new wt(this._location.bucket,G);return new It(this._service,pe)}_throwIfRoot(G){if(""===this._location.path)throw je(G)}}function Qr(X,G,pe){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,_.Z)(function*(X,G,pe){const qe=yield js(X,{pageToken:pe});G.prefixes.push(...qe.prefixes),G.items.push(...qe.items),null!=qe.nextPageToken&&(yield Qr(X,G,qe.nextPageToken))})).apply(this,arguments)}function js(X,G){null!=G&&"number"==typeof G.maxResults&&Dt("options.maxResults",1,1e3,G.maxResults);const pe=G||{},xe=qn(X.storage,X._location,"/",pe.pageToken,pe.maxResults);return X.storage.makeRequestWithTokens(xe,di)}function lo(X){X._throwIfRoot("getDownloadURL");const G=function xt(X,G,pe){const qe=Me(G.fullServerUrl(),X.host,X._protocol),Ft=X.maxOperationRetryTime,fn=new le(qe,"GET",function De(X,G){return function pe(xe,qe){const vt=cn(X,qe,G);return K(null!==vt),function hn(X,G,pe,xe){const qe=Dn(G);if(null===qe||!an(qe.downloadTokens))return null;const vt=qe.downloadTokens;if(0===vt.length)return null;const Ft=encodeURIComponent;return vt.split(",").map(An=>{const te=X.fullPath;return Me("/b/"+Ft(X.bucket)+"/o/"+Ft(te),pe,xe)+ot({alt:"media",token:An})})[0]}(vt,qe,X.host,X._protocol)}}(X,pe),Ft);return fn.errorHandler=Vt(G),fn}(X.storage,X._location,Ot());return X.storage.makeRequestWithTokens(G,di).then(pe=>{if(null===pe)throw function bt(){return new ce("no-download-url","The given file does not have any download URLs.")}();return pe})}function uo(X,G){const pe=function dr(X,G){const pe=G.split("/").filter(xe=>xe.length>0).join("/");return 0===X.length?pe:X+"/"+pe}(X._location.path,G),xe=new wt(X._location.bucket,pe);return new It(X.storage,xe)}function Co(X,G){if(X instanceof ks){const pe=X;if(null==pe._bucket)throw function be(){return new ce("no-default-bucket","No default bucket found. Did you set the '"+Le+"' property when initializing the app?")}();const xe=new It(pe,pe._bucket);return null!=G?Co(xe,G):xe}return void 0!==G?uo(X,G):X}function xs(X,G){if(G&&function wo(X){return/^[A-Za-z]+:\/\//.test(X)}(G)){if(X instanceof ks)return function $s(X,G){return new It(X,G)}(X,G);throw lt("To use ref(service, url), the first argument must be a Storage instance.")}return Co(X,G)}function es(X,G){const pe=null==G?void 0:G[Le];return null==pe?null:wt.makeFromBucketSpec(pe,X)}class ks{constructor(G,pe,xe,qe,vt){this.app=G,this._authProvider=pe,this._appCheckProvider=xe,this._url=qe,this._firebaseVersion=vt,this._bucket=null,this._host=Te,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=qe?wt.makeFromBucketSpec(qe,this._host):es(this._host,this.app.options)}get host(){return this._host}set host(G){this._host=G,this._bucket=null!=this._url?wt.makeFromBucketSpec(this._url,G):es(G,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(G){Dt("time",0,Number.POSITIVE_INFINITY,G),this._maxUploadRetryTime=G}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(G){Dt("time",0,Number.POSITIVE_INFINITY,G),this._maxOperationRetryTime=G}_getAuthToken(){var G=this;return(0,_.Z)(function*(){if(G._overrideAuthToken)return G._overrideAuthToken;const pe=G._authProvider.getImmediate({optional:!0});if(pe){const xe=yield pe.getToken();if(null!==xe)return xe.accessToken}return null})()}_getAppCheckToken(){var G=this;return(0,_.Z)(function*(){const pe=G._appCheckProvider.getImmediate({optional:!0});return pe?(yield pe.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(G=>G.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(G){return new It(this,G)}_makeRequest(G,pe,xe,qe,vt=!0){if(this._deleted)return new et(Ce());{const Ft=function xr(X,G,pe,xe,qe,vt,Ft=!0){const fn=ot(X.urlParams),Mn=X.url+fn,An=Object.assign({},X.headers);return function yr(X,G){G&&(X["X-Firebase-GMPID"]=G)}(An,G),function qr(X,G){null!==G&&G.length>0&&(X.Authorization="Firebase "+G)}(An,pe),function Ur(X,G){X["X-Firebase-Storage-Version"]="webjs/"+(null!=G?G:"AppManager")}(An,vt),function Rt(X,G){null!==G&&(X["X-Firebase-AppCheck"]=G)}(An,xe),new Wn(Mn,X.method,An,X.body,X.successCodes,X.additionalRetryCodes,X.handler,X.errorHandler,X.timeout,X.progressCallback,qe,Ft)}(G,this._appId,xe,qe,pe,this._firebaseVersion,vt);return this._requests.add(Ft),Ft.getPromise().then(()=>this._requests.delete(Ft),()=>this._requests.delete(Ft)),Ft}}makeRequestWithTokens(G,pe){var xe=this;return(0,_.Z)(function*(){const[qe,vt]=yield Promise.all([xe._getAuthToken(),xe._getAppCheckToken()]);return xe._makeRequest(G,pe,qe,vt).getPromise()})()}}const No="@firebase/storage",Oo="storage";function ca(X,G,pe){return function Zn(X,G,pe){X._throwIfRoot("uploadBytes");const xe=$r(X.storage,X._location,Ot(),new Zr(G,!0),pe);return X.storage.makeRequestWithTokens(xe,di).then(qe=>({metadata:qe,ref:X}))}(X=(0,J.m9)(X),G,pe)}function Ls(X,G,pe){return function wi(X,G,pe){return X._throwIfRoot("uploadBytesResumable"),new Qe(X,new Zr(G),pe)}(X=(0,J.m9)(X),G,pe)}function ps(X){return function Yi(X){X._throwIfRoot("getMetadata");const G=Bt(X.storage,X._location,Ot());return X.storage.makeRequestWithTokens(G,di)}(X=(0,J.m9)(X))}function co(X,G){return function Ui(X,G){X._throwIfRoot("updateMetadata");const pe=function jt(X,G,pe,xe){const vt=Me(G.fullServerUrl(),X.host,X._protocol),fn=tr(pe,xe),An=X.maxOperationRetryTime,F=new le(vt,"PATCH",ee(X,xe),An);return F.headers={"Content-Type":"application/json; charset=utf-8"},F.body=fn,F.errorHandler=Vt(G),F}(X.storage,X._location,G,Ot());return X.storage.makeRequestWithTokens(pe,di)}(X=(0,J.m9)(X),G)}function us(X,G){return js(X=(0,J.m9)(X),G)}function Jr(X){return function Ir(X){const G={prefixes:[],items:[]};return Qr(X,G).then(()=>G)}(X=(0,J.m9)(X))}function Cs(X){return lo(X=(0,J.m9)(X))}function fr(X){return function Ns(X){X._throwIfRoot("deleteObject");const G=function kn(X,G){const xe=Me(G.fullServerUrl(),X.host,X._protocol),fn=new le(xe,"DELETE",function Ft(Mn,An){},X.maxOperationRetryTime);return fn.successCodes=[200,204],fn.errorHandler=Vt(G),fn}(X.storage,X._location);return X.storage.makeRequestWithTokens(G,di)}(X=(0,J.m9)(X))}function or(X,G){return xs(X=(0,J.m9)(X),G)}function lr(X,G){return uo(X,G)}function pi(X=(0,E.getApp)(),G){X=(0,J.m9)(X);const xe=(0,E._getProvider)(X,Oo).getImmediate({identifier:G}),qe=(0,J.P0)("storage");return qe&&zr(xe,...qe),xe}function zr(X,G,pe,xe={}){!function Os(X,G,pe,xe={}){X.host=`${G}:${pe}`,X._protocol="http";const{mockUserToken:qe}=xe;qe&&(X._overrideAuthToken="string"==typeof qe?qe:(0,J.Sg)(qe,X.app.options.projectId))}(X,G,pe,xe)}function ko(X,{instanceIdentifier:G}){const pe=X.getProvider("app").getImmediate(),xe=X.getProvider("auth-internal"),qe=X.getProvider("app-check-internal");return new ks(pe,xe,qe,G,E.SDK_VERSION)}!function ai(){(0,E._registerComponent)(new ye.wA(Oo,ko,"PUBLIC").setMultipleInstances(!0)),(0,E.registerVersion)(No,"0.9.12",""),(0,E.registerVersion)(No,"0.9.12","esm2017")}()},2090:(Yt,Je,j)=>{j.d(Je,{BH:()=>St,LL:()=>gt,ZR:()=>wn,gQ:()=>Mr,zI:()=>lt,hu:()=>E,g5:()=>J,US:()=>Le,tV:()=>Pe,h$:()=>Ve,L:()=>he,$s:()=>Kt,r3:()=>yr,Sg:()=>Zt,ne:()=>ti,p$:()=>ce,vZ:()=>ir,ZB:()=>fe,gK:()=>Zr,pd:()=>jr,aH:()=>Jt,q4:()=>et,P0:()=>Tn,Pz:()=>On,m9:()=>tr,z$:()=>yt,GJ:()=>Ur,jU:()=>Ct,ru:()=>Ke,xb:()=>xr,w1:()=>_t,hl:()=>At,uI:()=>ut,UG:()=>Ye,Yr:()=>be,b$:()=>$e,G6:()=>Xe,w9:()=>qr,cI:()=>ot,UI:()=>tn,xO:()=>Or,zd:()=>Gr,DV:()=>Rt,ug:()=>En,dS:()=>ar,Wl:()=>_e,eu:()=>bt});const E=function(Se,we){if(!Se)throw J(we)},J=function(Se){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Se)},ye=function(Se){const we=[];let Fe=0;for(let me=0;me<Se.length;me++){let le=Se.charCodeAt(me);le<128?we[Fe++]=le:le<2048?(we[Fe++]=le>>6|192,we[Fe++]=63&le|128):55296==(64512&le)&&me+1<Se.length&&56320==(64512&Se.charCodeAt(me+1))?(le=65536+((1023&le)<<10)+(1023&Se.charCodeAt(++me)),we[Fe++]=le>>18|240,we[Fe++]=le>>12&63|128,we[Fe++]=le>>6&63|128,we[Fe++]=63&le|128):(we[Fe++]=le>>12|224,we[Fe++]=le>>6&63|128,we[Fe++]=63&le|128)}return we},Le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Se,we){if(!Array.isArray(Se))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Fe=we?this.byteToCharMapWebSafe_:this.byteToCharMap_,me=[];for(let le=0;le<Se.length;le+=3){const K=Se[le],ee=le+1<Se.length,ue=ee?Se[le+1]:0,De=le+2<Se.length,Ge=De?Se[le+2]:0;let qn=(15&ue)<<2|Ge>>6,Er=63&Ge;De||(Er=64,ee||(qn=64)),me.push(Fe[K>>2],Fe[(3&K)<<4|ue>>4],Fe[qn],Fe[Er])}return me.join("")},encodeString(Se,we){return this.HAS_NATIVE_SUPPORT&&!we?btoa(Se):this.encodeByteArray(ye(Se),we)},decodeString(Se,we){return this.HAS_NATIVE_SUPPORT&&!we?atob(Se):function(Se){const we=[];let Fe=0,me=0;for(;Fe<Se.length;){const le=Se[Fe++];if(le<128)we[me++]=String.fromCharCode(le);else if(le>191&&le<224){const K=Se[Fe++];we[me++]=String.fromCharCode((31&le)<<6|63&K)}else if(le>239&&le<365){const De=((7&le)<<18|(63&Se[Fe++])<<12|(63&Se[Fe++])<<6|63&Se[Fe++])-65536;we[me++]=String.fromCharCode(55296+(De>>10)),we[me++]=String.fromCharCode(56320+(1023&De))}else{const K=Se[Fe++],ee=Se[Fe++];we[me++]=String.fromCharCode((15&le)<<12|(63&K)<<6|63&ee)}}return we.join("")}(this.decodeStringToByteArray(Se,we))},decodeStringToByteArray(Se,we){this.init_();const Fe=we?this.charToByteMapWebSafe_:this.charToByteMap_,me=[];for(let le=0;le<Se.length;){const K=Fe[Se.charAt(le++)],ue=le<Se.length?Fe[Se.charAt(le)]:0;++le;const Ge=le<Se.length?Fe[Se.charAt(le)]:64;++le;const Bt=le<Se.length?Fe[Se.charAt(le)]:64;if(++le,null==K||null==ue||null==Ge||null==Bt)throw Error();me.push(K<<2|ue>>4),64!==Ge&&(me.push(ue<<4&240|Ge>>2),64!==Bt&&me.push(Ge<<6&192|Bt))}return me},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Se=0;Se<this.ENCODED_VALS.length;Se++)this.byteToCharMap_[Se]=this.ENCODED_VALS.charAt(Se),this.charToByteMap_[this.byteToCharMap_[Se]]=Se,this.byteToCharMapWebSafe_[Se]=this.ENCODED_VALS_WEBSAFE.charAt(Se),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Se]]=Se,Se>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Se)]=Se,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Se)]=Se)}}},Ve=function(Se){const we=ye(Se);return Le.encodeByteArray(we,!0)},he=function(Se){return Ve(Se).replace(/\./g,"")},Pe=function(Se){try{return Le.decodeString(Se,!0)}catch(we){console.error("base64Decode failed: ",we)}return null};function ce(Se){return fe(void 0,Se)}function fe(Se,we){if(!(we instanceof Object))return we;switch(we.constructor){case Date:return new Date(we.getTime());case Object:void 0===Se&&(Se={});break;case Array:Se=[];break;default:return we}for(const Fe in we)!we.hasOwnProperty(Fe)||!ke(Fe)||(Se[Fe]=fe(Se[Fe],we[Fe]));return Se}function ke(Se){return"__proto__"!==Se}function yt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ut(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function Ye(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Se){return!1}}function Ct(){return"object"==typeof self&&self.self===self}function Ke(){const Se="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Se&&void 0!==Se.id}function $e(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _t(){const Se=yt();return Se.indexOf("MSIE ")>=0||Se.indexOf("Trident/")>=0}function be(){return!1}function Xe(){return!Ye()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function At(){return"object"==typeof indexedDB}function bt(){return new Promise((Se,we)=>{try{let Fe=!0;const me="validate-browser-context-for-indexeddb-analytics-module",le=self.indexedDB.open(me);le.onsuccess=()=>{le.result.close(),Fe||self.indexedDB.deleteDatabase(me),Se(!0)},le.onupgradeneeded=()=>{Fe=!1},le.onerror=()=>{var K;we((null===(K=le.error)||void 0===K?void 0:K.message)||"")}}catch(Fe){we(Fe)}})}function lt(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const wt=()=>{try{return function Ce(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const Se=process.env.__FIREBASE_DEFAULTS__;return Se?JSON.parse(Se):void 0})()||(()=>{if("undefined"==typeof document)return;let Se;try{Se=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Fe){return}const we=Se&&Pe(Se[1]);return we&&JSON.parse(we)})()}catch(Se){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Se}`)}},et=Se=>{var we,Fe;return null===(Fe=null===(we=wt())||void 0===we?void 0:we.emulatorHosts)||void 0===Fe?void 0:Fe[Se]},Tn=Se=>{const we=et(Se);if(!we)return;const Fe=we.lastIndexOf(":");if(Fe<=0||Fe+1===we.length)throw new Error(`Invalid host ${we} with no separate hostname and port!`);const me=parseInt(we.substring(Fe+1),10);return"["===we[0]?[we.substring(1,Fe-1),me]:[we.substring(0,Fe),me]},Jt=()=>{var Se;return null===(Se=wt())||void 0===Se?void 0:Se.config},On=Se=>{var we;return null===(we=wt())||void 0===we?void 0:we[`_${Se}`]};class St{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((we,Fe)=>{this.resolve=we,this.reject=Fe})}wrapCallback(we){return(Fe,me)=>{Fe?this.reject(Fe):this.resolve(me),"function"==typeof we&&(this.promise.catch(()=>{}),1===we.length?we(Fe):we(Fe,me))}}}function Zt(Se,we){if(Se.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const me=we||"demo-project",le=Se.iat||0,K=Se.sub||Se.user_id;if(!K)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ee=Object.assign({iss:`https://securetoken.google.com/${me}`,aud:me,iat:le,exp:le+3600,auth_time:le,sub:K,user_id:K,firebase:{sign_in_provider:"custom",identities:{}}},Se);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(ee)),""].join(".")}class wn extends Error{constructor(we,Fe,me){super(Fe),this.code=we,this.customData=me,this.name="FirebaseError",Object.setPrototypeOf(this,wn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gt.prototype.create)}}class gt{constructor(we,Fe,me){this.service=we,this.serviceName=Fe,this.errors=me}create(we,...Fe){const me=Fe[0]||{},le=`${this.service}/${we}`,K=this.errors[we],ee=K?function Dt(Se,we){return Se.replace(Me,(Fe,me)=>{const le=we[me];return null!=le?String(le):`<${me}?>`})}(K,me):"Error";return new wn(le,`${this.serviceName}: ${ee} (${le}).`,me)}}const Me=/\{\$([^}]+)}/g;function ot(Se){return JSON.parse(Se)}function _e(Se){return JSON.stringify(Se)}const yn=function(Se){let we={},Fe={},me={},le="";try{const K=Se.split(".");we=ot(Pe(K[0])||""),Fe=ot(Pe(K[1])||""),le=K[2],me=Fe.d||{},delete Fe.d}catch(K){}return{header:we,claims:Fe,data:me,signature:le}},qr=function(Se){const Fe=yn(Se).claims;return!!Fe&&"object"==typeof Fe&&Fe.hasOwnProperty("iat")},Ur=function(Se){const we=yn(Se).claims;return"object"==typeof we&&!0===we.admin};function yr(Se,we){return Object.prototype.hasOwnProperty.call(Se,we)}function Rt(Se,we){if(Object.prototype.hasOwnProperty.call(Se,we))return Se[we]}function xr(Se){for(const we in Se)if(Object.prototype.hasOwnProperty.call(Se,we))return!1;return!0}function tn(Se,we,Fe){const me={};for(const le in Se)Object.prototype.hasOwnProperty.call(Se,le)&&(me[le]=we.call(Fe,Se[le],le,Se));return me}function ir(Se,we){if(Se===we)return!0;const Fe=Object.keys(Se),me=Object.keys(we);for(const le of Fe){if(!me.includes(le))return!1;const K=Se[le],ee=we[le];if(vn(K)&&vn(ee)){if(!ir(K,ee))return!1}else if(K!==ee)return!1}for(const le of me)if(!Fe.includes(le))return!1;return!0}function vn(Se){return null!==Se&&"object"==typeof Se}function Or(Se){const we=[];for(const[Fe,me]of Object.entries(Se))Array.isArray(me)?me.forEach(le=>{we.push(encodeURIComponent(Fe)+"="+encodeURIComponent(le))}):we.push(encodeURIComponent(Fe)+"="+encodeURIComponent(me));return we.length?"&"+we.join("&"):""}function Gr(Se){const we={};return Se.replace(/^\?/,"").split("&").forEach(me=>{if(me){const[le,K]=me.split("=");we[decodeURIComponent(le)]=decodeURIComponent(K)}}),we}function jr(Se){const we=Se.indexOf("?");if(!we)return"";const Fe=Se.indexOf("#",we);return Se.substring(we,Fe>0?Fe:void 0)}class Mr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let we=1;we<this.blockSize;++we)this.pad_[we]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(we,Fe){Fe||(Fe=0);const me=this.W_;if("string"==typeof we)for(let Bt=0;Bt<16;Bt++)me[Bt]=we.charCodeAt(Fe)<<24|we.charCodeAt(Fe+1)<<16|we.charCodeAt(Fe+2)<<8|we.charCodeAt(Fe+3),Fe+=4;else for(let Bt=0;Bt<16;Bt++)me[Bt]=we[Fe]<<24|we[Fe+1]<<16|we[Fe+2]<<8|we[Fe+3],Fe+=4;for(let Bt=16;Bt<80;Bt++){const qn=me[Bt-3]^me[Bt-8]^me[Bt-14]^me[Bt-16];me[Bt]=4294967295&(qn<<1|qn>>>31)}let Ge,Vt,le=this.chain_[0],K=this.chain_[1],ee=this.chain_[2],ue=this.chain_[3],De=this.chain_[4];for(let Bt=0;Bt<80;Bt++){Bt<40?Bt<20?(Ge=ue^K&(ee^ue),Vt=1518500249):(Ge=K^ee^ue,Vt=1859775393):Bt<60?(Ge=K&ee|ue&(K|ee),Vt=2400959708):(Ge=K^ee^ue,Vt=3395469782);const qn=(le<<5|le>>>27)+Ge+De+Vt+me[Bt]&4294967295;De=ue,ue=ee,ee=4294967295&(K<<30|K>>>2),K=le,le=qn}this.chain_[0]=this.chain_[0]+le&4294967295,this.chain_[1]=this.chain_[1]+K&4294967295,this.chain_[2]=this.chain_[2]+ee&4294967295,this.chain_[3]=this.chain_[3]+ue&4294967295,this.chain_[4]=this.chain_[4]+De&4294967295}update(we,Fe){if(null==we)return;void 0===Fe&&(Fe=we.length);const me=Fe-this.blockSize;let le=0;const K=this.buf_;let ee=this.inbuf_;for(;le<Fe;){if(0===ee)for(;le<=me;)this.compress_(we,le),le+=this.blockSize;if("string"==typeof we){for(;le<Fe;)if(K[ee]=we.charCodeAt(le),++ee,++le,ee===this.blockSize){this.compress_(K),ee=0;break}}else for(;le<Fe;)if(K[ee]=we[le],++ee,++le,ee===this.blockSize){this.compress_(K),ee=0;break}}this.inbuf_=ee,this.total_+=Fe}digest(){const we=[];let Fe=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let le=this.blockSize-1;le>=56;le--)this.buf_[le]=255&Fe,Fe/=256;this.compress_(this.buf_);let me=0;for(let le=0;le<5;le++)for(let K=24;K>=0;K-=8)we[me]=this.chain_[le]>>K&255,++me;return we}}function ti(Se,we){const Fe=new sn(Se,we);return Fe.subscribe.bind(Fe)}class sn{constructor(we,Fe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Fe,this.task.then(()=>{we(this)}).catch(me=>{this.error(me)})}next(we){this.forEachObserver(Fe=>{Fe.next(we)})}error(we){this.forEachObserver(Fe=>{Fe.error(we)}),this.close(we)}complete(){this.forEachObserver(we=>{we.complete()}),this.close()}subscribe(we,Fe,me){let le;if(void 0===we&&void 0===Fe&&void 0===me)throw new Error("Missing Observer.");le=function un(Se,we){if("object"!=typeof Se||null===Se)return!1;for(const Fe of we)if(Fe in Se&&"function"==typeof Se[Fe])return!0;return!1}(we,["next","error","complete"])?we:{next:we,error:Fe,complete:me},void 0===le.next&&(le.next=nn),void 0===le.error&&(le.error=nn),void 0===le.complete&&(le.complete=nn);const K=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?le.error(this.finalError):le.complete()}catch(ee){}}),this.observers.push(le),K}unsubscribeOne(we){void 0===this.observers||void 0===this.observers[we]||(delete this.observers[we],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(we){if(!this.finalized)for(let Fe=0;Fe<this.observers.length;Fe++)this.sendOne(Fe,we)}sendOne(we,Fe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[we])try{Fe(this.observers[we])}catch(me){"undefined"!=typeof console&&console.error&&console.error(me)}})}close(we){this.finalized||(this.finalized=!0,void 0!==we&&(this.finalError=we),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nn(){}function Zr(Se,we){return`${Se} failed: ${we} argument `}const ar=function(Se){const we=[];let Fe=0;for(let me=0;me<Se.length;me++){let le=Se.charCodeAt(me);if(le>=55296&&le<=56319){const K=le-55296;me++,E(me<Se.length,"Surrogate pair missing trail surrogate."),le=65536+(K<<10)+(Se.charCodeAt(me)-56320)}le<128?we[Fe++]=le:le<2048?(we[Fe++]=le>>6|192,we[Fe++]=63&le|128):le<65536?(we[Fe++]=le>>12|224,we[Fe++]=le>>6&63|128,we[Fe++]=63&le|128):(we[Fe++]=le>>18|240,we[Fe++]=le>>12&63|128,we[Fe++]=le>>6&63|128,we[Fe++]=63&le|128)}return we},En=function(Se){let we=0;for(let Fe=0;Fe<Se.length;Fe++){const me=Se.charCodeAt(Fe);me<128?we++:me<2048?we+=2:me>=55296&&me<=56319?(we+=4,Fe++):we+=3}return we};function Kt(Se,we=1e3,Fe=2){const me=we*Math.pow(Fe,Se),le=Math.round(.5*me*(Math.random()-.5)*2);return Math.min(144e5,me+le)}function tr(Se){return Se&&Se._delegate?Se._delegate:Se}},4203:(Yt,Je,j)=>{j.d(Je,{w:()=>ut});var _=j(2382),E=j(5e3),J=j(7293),ye=j(2290),Te=j(1009),Le=j(9808);function Ve(Ye,Ct){1&Ye&&(E.TgZ(0,"small",16),E._uU(1,"El nombre es requerido "),E.qZA())}function he(Ye,Ct){1&Ye&&(E.TgZ(0,"small",16),E._uU(1,"El apellido es requeridos"),E.qZA())}function Pe(Ye,Ct){1&Ye&&(E.TgZ(0,"small",16),E._uU(1,"La edad es requerida"),E.qZA())}function ce(Ye,Ct){1&Ye&&(E.TgZ(0,"small",16),E._uU(1,"El dni es requerido"),E.qZA())}function fe(Ye,Ct){1&Ye&&(E.TgZ(0,"small",16),E._uU(1,"La especialidad es requerida "),E.qZA())}function ke(Ye,Ct){1&Ye&&(E.TgZ(0,"small",16),E._uU(1,"El mail es requerido"),E.qZA())}function yt(Ye,Ct){1&Ye&&(E.TgZ(0,"small",16),E._uU(1,"La clave es requerida"),E.qZA())}let ut=(()=>{class Ye{constructor(Ke,$e,it,_t){this.fb=Ke,this.fs=$e,this.toastr=it,this.router=_t,this.grupoControles=this.fb.group({nombre:["",[_.kI.required]],apellido:["",[_.kI.required]],edad:["",[_.kI.required]],esp:["",[_.kI.required]],dni:["",[_.kI.required]],mail:["",[_.kI.required]],clave:["",[_.kI.required]],foto:[]})}agregarProfesional(){var Ke,$e,it,_t,We,be,Xe;let At={nombre:null===(Ke=this.grupoControles.get("nombre"))||void 0===Ke?void 0:Ke.value,apellido:null===($e=this.grupoControles.get("apellido"))||void 0===$e?void 0:$e.value,edad:null===(it=this.grupoControles.get("edad"))||void 0===it?void 0:it.value,especialidad:null===(_t=this.grupoControles.get("esp"))||void 0===_t?void 0:_t.value,dni:null===(We=this.grupoControles.get("dni"))||void 0===We?void 0:We.value,mail:null===(be=this.grupoControles.get("mail"))||void 0===be?void 0:be.value,clave:null===(Xe=this.grupoControles.get("clave"))||void 0===Xe?void 0:Xe.value,foto:this.foto,perfil:"profesional",habilitado:!1};this.fs.agregarProfesional(At),this.toastr.success("Confirme mail y el administrador deber\xe1 habilitarlo ahora!","Profesional registrado!"),this.grupoControles.reset(),setTimeout(()=>{this.router.navigateByUrl("/login")},3e3)}upload(Ke){this.foto=Ke.target.files[0]}ngOnInit(){}}return Ye.\u0275fac=function(Ke){return new(Ke||Ye)(E.Y36(_.qu),E.Y36(J.C),E.Y36(ye._W),E.Y36(Te.F0))},Ye.\u0275cmp=E.Xpm({type:Ye,selectors:[["app-alta-profesional"]],decls:31,vars:9,consts:[[1,"wrapper"],[1,"logo"],["src","../../../assets/doctor.png","alt",""],[1,"text-center","mt-4","name"],[1,"p-3","mt-3",3,"formGroup","ngSubmit"],[1,"form-field","d-flex","align-items-center"],["type","text","name","nombre","formControlName","nombre","placeholder","Nombre"],["class","invalid",4,"ngIf"],["type","text","name","apellido","formControlName","apellido","placeholder","Apellido"],["type","number","name","edad","formControlName","edad","placeholder","Edad"],["type","number","name","dni","formControlName","dni","placeholder","DNI"],["type","text","name","esp","formControlName","esp","placeholder","Especialidad"],["type","text","name","mail","formControlName","mail","placeholder","Mail"],["type","password","name","clave","formControlName","clave","placeholder","Password"],["type","file","name","foro","formControlName","foto","placeholder","Foto",3,"change"],["type","submit",1,"btn","mt-3",3,"disabled"],[1,"invalid"]],template:function(Ke,$e){if(1&Ke&&(E.TgZ(0,"div",0),E.TgZ(1,"div",1),E._UZ(2,"img",2),E.qZA(),E.TgZ(3,"div",3),E._uU(4," Registro Profesional "),E.qZA(),E.TgZ(5,"form",4),E.NdJ("ngSubmit",function(){return $e.agregarProfesional()}),E.TgZ(6,"div",5),E._UZ(7,"input",6),E.YNc(8,Ve,2,0,"small",7),E.qZA(),E.TgZ(9,"div",5),E._UZ(10,"input",8),E.YNc(11,he,2,0,"small",7),E.qZA(),E.TgZ(12,"div",5),E._UZ(13,"input",9),E.YNc(14,Pe,2,0,"small",7),E.qZA(),E.TgZ(15,"div",5),E._UZ(16,"input",10),E.YNc(17,ce,2,0,"small",7),E.qZA(),E.TgZ(18,"div",5),E._UZ(19,"input",11),E.YNc(20,fe,2,0,"small",7),E.qZA(),E.TgZ(21,"div",5),E._UZ(22,"input",12),E.YNc(23,ke,2,0,"small",7),E.qZA(),E.TgZ(24,"div",5),E._UZ(25,"input",13),E.YNc(26,yt,2,0,"small",7),E.qZA(),E.TgZ(27,"div",5),E.TgZ(28,"input",14),E.NdJ("change",function(_t){return $e.upload(_t)}),E.qZA(),E.qZA(),E.TgZ(29,"button",15),E._uU(30,"Registrar"),E.qZA(),E.qZA(),E.qZA()),2&Ke){let it,_t,We,be,Xe,At,bt;E.xp6(5),E.Q6J("formGroup",$e.grupoControles),E.xp6(3),E.Q6J("ngIf",(null==(it=$e.grupoControles.get("nombre"))||null==it.errors?null:it.errors.required)&&(null==(it=$e.grupoControles.get("nombre"))?null:it.touched)),E.xp6(3),E.Q6J("ngIf",(null==(_t=$e.grupoControles.get("apellido"))||null==_t.errors?null:_t.errors.required)&&(null==(_t=$e.grupoControles.get("apellido"))?null:_t.touched)),E.xp6(3),E.Q6J("ngIf",(null==(We=$e.grupoControles.get("edad"))||null==We.errors?null:We.errors.required)&&(null==(We=$e.grupoControles.get("edad"))?null:We.touched)),E.xp6(3),E.Q6J("ngIf",(null==(be=$e.grupoControles.get("dni"))||null==be.errors?null:be.errors.required)&&(null==(be=$e.grupoControles.get("dni"))?null:be.touched)),E.xp6(3),E.Q6J("ngIf",(null==(Xe=$e.grupoControles.get("esp"))||null==Xe.errors?null:Xe.errors.required)&&(null==(Xe=$e.grupoControles.get("esp"))?null:Xe.touched)),E.xp6(3),E.Q6J("ngIf",(null==(At=$e.grupoControles.get("mail"))||null==At.errors?null:At.errors.required)&&(null==(At=$e.grupoControles.get("mail"))?null:At.touched)),E.xp6(3),E.Q6J("ngIf",(null==(bt=$e.grupoControles.get("clave"))||null==bt.errors?null:bt.errors.required)&&(null==(bt=$e.grupoControles.get("clave"))?null:bt.touched)),E.xp6(3),E.Q6J("disabled",$e.grupoControles.invalid)}},directives:[_._Y,_.JL,_.sg,_.Fj,_.JJ,_.u,Le.O5,_.wV],styles:['@import"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}body[_ngcontent-%COMP%]{background:#67aadd}.wrapper[_ngcontent-%COMP%]{max-width:350px;min-height:500px;margin:30px auto;padding:40px 30px 30px;background-color:#ecf0f3;border-radius:15px;box-shadow:13px 13px 20px #cbced1,-13px -13px 20px #fff}.logo[_ngcontent-%COMP%]{width:80px;margin:auto}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:80px;object-fit:cover;border-radius:50%;box-shadow:0 0 3px #5f5f5f,0 0 0 5px #ecf0f3,8px 8px 15px #a7aaa7,-8px -8px 15px #fff}.wrapper[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:600;font-size:1.4rem;letter-spacing:1.3px;padding-left:10px;color:#555}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;display:block;border:none;outline:none;background:none;font-size:1.2rem;color:#666;padding:10px 15px 10px 10px}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{padding-left:10px;margin-bottom:20px;border-radius:20px;box-shadow:inset 8px 8px 8px #cbced1,inset -8px -8px 8px #fff}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{color:#555}.wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{box-shadow:none;width:100%;height:40px;background-color:#03a9f4;color:#fff;border-radius:25px;box-shadow:3px 3px 3px #b1b1b1,-3px -3px 3px #fff;letter-spacing:1.3px}.wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#039be5}.wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:.8rem;color:#03a9f4}.wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#039be5}@media (max-width: 380px){.wrapper[_ngcontent-%COMP%]{margin:30px 20px;padding:40px 15px 15px}}']}),Ye})()},5108:(Yt,Je,j)=>{j.d(Je,{U:()=>ut});var _=j(2382),E=j(5e3),J=j(7293),ye=j(2290),Te=j(1009),Le=j(9808);function Ve(Ye,Ct){1&Ye&&(E.TgZ(0,"small",16),E._uU(1,"El nombre es requerido "),E.qZA())}function he(Ye,Ct){1&Ye&&(E.TgZ(0,"small",16),E._uU(1,"El apellido es requeridos"),E.qZA())}function Pe(Ye,Ct){1&Ye&&(E.TgZ(0,"small",16),E._uU(1,"La edad es requerida"),E.qZA())}function ce(Ye,Ct){1&Ye&&(E.TgZ(0,"small",16),E._uU(1,"El dni es requerido"),E.qZA())}function fe(Ye,Ct){1&Ye&&(E.TgZ(0,"small",16),E._uU(1,"La obra social es requerida "),E.qZA())}function ke(Ye,Ct){1&Ye&&(E.TgZ(0,"small",16),E._uU(1,"El mail es requerido"),E.qZA())}function yt(Ye,Ct){1&Ye&&(E.TgZ(0,"small",16),E._uU(1,"La clave es requerida"),E.qZA())}let ut=(()=>{class Ye{constructor(Ke,$e,it,_t){this.fb=Ke,this.fs=$e,this.toastr=it,this.router=_t,this.grupoControles=this.fb.group({nombre:["",[_.kI.required]],apellido:["",[_.kI.required]],edad:["",[_.kI.required]],obraSocial:["",[_.kI.required]],dni:["",[_.kI.required]],mail:["",[_.kI.required]],clave:["",[_.kI.required]],foto:[]})}agregarUsuario(){var Ke,$e,it,_t,We,be,Xe;let At={nombre:null===(Ke=this.grupoControles.get("nombre"))||void 0===Ke?void 0:Ke.value,apellido:null===($e=this.grupoControles.get("apellido"))||void 0===$e?void 0:$e.value,edad:null===(it=this.grupoControles.get("edad"))||void 0===it?void 0:it.value,obraSocial:null===(_t=this.grupoControles.get("obraSocial"))||void 0===_t?void 0:_t.value,dni:null===(We=this.grupoControles.get("dni"))||void 0===We?void 0:We.value,mail:null===(be=this.grupoControles.get("mail"))||void 0===be?void 0:be.value,clave:null===(Xe=this.grupoControles.get("clave"))||void 0===Xe?void 0:Xe.value,perfil:"paciente",foto:this.foto};this.fs.agregarUsuario(At),this.toastr.success("Confirme mail ahora!","Usuario registrado!"),this.grupoControles.reset(),setTimeout(()=>{this.router.navigateByUrl("/login")},3e3)}upload(Ke){this.foto=Ke.target.files[0]}ngOnInit(){}}return Ye.\u0275fac=function(Ke){return new(Ke||Ye)(E.Y36(_.qu),E.Y36(J.C),E.Y36(ye._W),E.Y36(Te.F0))},Ye.\u0275cmp=E.Xpm({type:Ye,selectors:[["app-alta-usuario"]],decls:31,vars:9,consts:[[1,"wrapper"],[1,"logo"],["src","../../../assets/paciente.png","alt",""],[1,"text-center","mt-4","name"],[1,"p-3","mt-3",3,"formGroup","ngSubmit"],[1,"form-field","d-flex","align-items-center"],["type","text","name","nombre","formControlName","nombre","placeholder","Nombre"],["class","invalid",4,"ngIf"],["type","text","name","apellido","formControlName","apellido","placeholder","Apellido"],["type","number","name","edad","formControlName","edad","placeholder","Edad"],["type","number","name","dni","formControlName","dni","placeholder","DNI"],["type","text","name","obraSocial","formControlName","obraSocial","placeholder","Obra Social"],["type","text","name","mail","formControlName","mail","placeholder","Mail"],["type","password","name","clave","formControlName","clave","placeholder","Password"],["type","file","name","foro","formControlName","foto","placeholder","Foto",3,"change"],["type","submit",1,"btn","mt-3",3,"disabled"],[1,"invalid"]],template:function(Ke,$e){if(1&Ke&&(E.TgZ(0,"div",0),E.TgZ(1,"div",1),E._UZ(2,"img",2),E.qZA(),E.TgZ(3,"div",3),E._uU(4," Registro Paciente "),E.qZA(),E.TgZ(5,"form",4),E.NdJ("ngSubmit",function(){return $e.agregarUsuario()}),E.TgZ(6,"div",5),E._UZ(7,"input",6),E.YNc(8,Ve,2,0,"small",7),E.qZA(),E.TgZ(9,"div",5),E._UZ(10,"input",8),E.YNc(11,he,2,0,"small",7),E.qZA(),E.TgZ(12,"div",5),E._UZ(13,"input",9),E.YNc(14,Pe,2,0,"small",7),E.qZA(),E.TgZ(15,"div",5),E._UZ(16,"input",10),E.YNc(17,ce,2,0,"small",7),E.qZA(),E.TgZ(18,"div",5),E._UZ(19,"input",11),E.YNc(20,fe,2,0,"small",7),E.qZA(),E.TgZ(21,"div",5),E._UZ(22,"input",12),E.YNc(23,ke,2,0,"small",7),E.qZA(),E.TgZ(24,"div",5),E._UZ(25,"input",13),E.YNc(26,yt,2,0,"small",7),E.qZA(),E.TgZ(27,"div",5),E.TgZ(28,"input",14),E.NdJ("change",function(_t){return $e.upload(_t)}),E.qZA(),E.qZA(),E.TgZ(29,"button",15),E._uU(30,"Registrar"),E.qZA(),E.qZA(),E.qZA()),2&Ke){let it,_t,We,be,Xe,At,bt;E.xp6(5),E.Q6J("formGroup",$e.grupoControles),E.xp6(3),E.Q6J("ngIf",(null==(it=$e.grupoControles.get("nombre"))||null==it.errors?null:it.errors.required)&&(null==(it=$e.grupoControles.get("nombre"))?null:it.touched)),E.xp6(3),E.Q6J("ngIf",(null==(_t=$e.grupoControles.get("apellido"))||null==_t.errors?null:_t.errors.required)&&(null==(_t=$e.grupoControles.get("apellido"))?null:_t.touched)),E.xp6(3),E.Q6J("ngIf",(null==(We=$e.grupoControles.get("edad"))||null==We.errors?null:We.errors.required)&&(null==(We=$e.grupoControles.get("edad"))?null:We.touched)),E.xp6(3),E.Q6J("ngIf",(null==(be=$e.grupoControles.get("dni"))||null==be.errors?null:be.errors.required)&&(null==(be=$e.grupoControles.get("dni"))?null:be.touched)),E.xp6(3),E.Q6J("ngIf",(null==(Xe=$e.grupoControles.get("obraSocial"))||null==Xe.errors?null:Xe.errors.required)&&(null==(Xe=$e.grupoControles.get("obraSocial"))?null:Xe.touched)),E.xp6(3),E.Q6J("ngIf",(null==(At=$e.grupoControles.get("mail"))||null==At.errors?null:At.errors.required)&&(null==(At=$e.grupoControles.get("mail"))?null:At.touched)),E.xp6(3),E.Q6J("ngIf",(null==(bt=$e.grupoControles.get("clave"))||null==bt.errors?null:bt.errors.required)&&(null==(bt=$e.grupoControles.get("clave"))?null:bt.touched)),E.xp6(3),E.Q6J("disabled",$e.grupoControles.invalid)}},directives:[_._Y,_.JL,_.sg,_.Fj,_.JJ,_.u,Le.O5,_.wV],styles:['@import"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}body[_ngcontent-%COMP%]{background:#67aadd}.wrapper[_ngcontent-%COMP%]{max-width:350px;min-height:500px;margin:30px auto;padding:40px 30px 30px;background-color:#ecf0f3;border-radius:15px;box-shadow:13px 13px 20px #cbced1,-13px -13px 20px #fff}.logo[_ngcontent-%COMP%]{width:80px;margin:auto}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:80px;object-fit:cover;border-radius:50%;box-shadow:0 0 3px #5f5f5f,0 0 0 5px #ecf0f3,8px 8px 15px #a7aaa7,-8px -8px 15px #fff}.wrapper[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:600;font-size:1.4rem;letter-spacing:1.3px;padding-left:10px;color:#555}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;display:block;border:none;outline:none;background:none;font-size:1.2rem;color:#666;padding:10px 15px 10px 10px}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{padding-left:10px;margin-bottom:20px;border-radius:20px;box-shadow:inset 8px 8px 8px #cbced1,inset -8px -8px 8px #fff}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{color:#555}.wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{box-shadow:none;width:100%;height:40px;background-color:#03a9f4;color:#fff;border-radius:25px;box-shadow:3px 3px 3px #b1b1b1,-3px -3px 3px #fff;letter-spacing:1.3px}.wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#039be5}.wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:.8rem;color:#03a9f4}.wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#039be5}@media (max-width: 380px){.wrapper[_ngcontent-%COMP%]{margin:30px 20px;padding:40px 15px 15px}}']}),Ye})()},7556:(Yt,Je,j)=>{j.d(Je,{e:()=>Te});var _=j(5861),E=j(5e3),J=j(1205),ye=j(1009);let Te=(()=>{class Le{constructor(he,Pe){this.afAuth=he,this.router=Pe,this.user=""}sendVerificationEmail(){var he=this;return(0,_.Z)(function*(){var Pe;return null===(Pe=yield he.afAuth.currentUser)||void 0===Pe?void 0:Pe.sendEmailVerification()})()}login(he,Pe){var ce=this;return(0,_.Z)(function*(){try{const fe=yield ce.afAuth.signInWithEmailAndPassword(he,Pe);return ce.userDateFirebase=fe,fe}catch(fe){return console.log(fe),fe}})()}register(he,Pe){var ce=this;return(0,_.Z)(function*(){try{yield ce.afAuth.createUserWithEmailAndPassword(he,Pe),ce.sendVerificationEmail()}catch(fe){console.log(fe)}})()}logout(){var he=this;return(0,_.Z)(function*(){try{yield he.afAuth.signOut().then(()=>{he.router.navigateByUrl("/login")})}catch(Pe){console.log(Pe)}})()}}return Le.\u0275fac=function(he){return new(he||Le)(E.LFG(J.zQ),E.LFG(ye.F0))},Le.\u0275prov=E.Yz7({token:Le,factory:Le.\u0275fac,providedIn:"root"}),Le})()},7293:(Yt,Je,j)=>{j.d(Je,{C:()=>Le});var _=j(3562),E=j(6961),J=j(2731),ye=j(5e3),Te=j(7556);let Le=(()=>{class Ve{constructor(Pe,ce){this.Firestore=Pe,this.as=ce,this.storage=(0,E.cF)(),this.profesionalCollectionReference=(0,_.hJ)(this.Firestore,"profesionales"),this.pacientesCollectionReference=(0,_.hJ)(this.Firestore,"pacientes"),this.usuariosCollectionReference=(0,_.hJ)(this.Firestore,"usuarios"),this.adminCollectionReference=(0,_.hJ)(this.Firestore,"administradores")}agregarProfesional(Pe){let ce=(0,E.iH)(this.storage,Pe.foto.name);(0,E.KV)(ce,Pe.foto).then(fe=>{(0,E.Jt)((0,E.iH)(this.storage,Pe.foto.name)).then(ke=>{Pe.foto=ke,this.as.register(Pe.mail,Pe.clave).then(()=>((0,_.ET)(this.profesionalCollectionReference,Pe),(0,_.ET)(this.usuariosCollectionReference,Pe)))}).catch(ke=>{console.log(ke)})})}agregarUsuario(Pe){let ce=(0,E.iH)(this.storage,Pe.foto.name);(0,E.KV)(ce,Pe.foto).then(fe=>{(0,E.Jt)((0,E.iH)(this.storage,Pe.foto.name)).then(ke=>{Pe.foto=ke,this.as.register(Pe.mail,Pe.clave).then(()=>((0,_.ET)(this.pacientesCollectionReference,Pe),(0,_.ET)(this.usuariosCollectionReference,Pe)))}).catch(ke=>{console.log(ke)})})}agregarAdmin(Pe){let ce=(0,E.iH)(this.storage,Pe.foto.name);(0,E.KV)(ce,Pe.foto).then(fe=>{(0,E.Jt)((0,E.iH)(this.storage,Pe.foto.name)).then(ke=>{Pe.foto=ke,this.as.register(Pe.mail,Pe.clave).then(()=>((0,_.ET)(this.adminCollectionReference,Pe),(0,_.ET)(this.usuariosCollectionReference,Pe)))}).catch(ke=>{console.log(ke)})})}ListaUsuarios(){return(0,_.BS)(this.usuariosCollectionReference,{idField:"id"})}ModificarUsuario(Pe,ce){const fe=(0,J.JU)(this.Firestore,`usuarios/${ce}`);return(0,J.r7)(fe,Pe)}}return Ve.\u0275fac=function(Pe){return new(Pe||Ve)(ye.LFG(_.gg),ye.LFG(Te.e))},Ve.\u0275prov=ye.Yz7({token:Ve,factory:Ve.\u0275fac,providedIn:"root"}),Ve})()},7730:(Yt,Je,j)=>{var _=j(2313),E=j(5e3),J=j(1009),ye=j(2382),Te=j(7556),Le=j(7293),Ve=j(2290),he=j(9808);function Pe(u,i){1&u&&(E.TgZ(0,"small",21),E._uU(1,"El correo es requerido "),E.qZA())}function ce(u,i){1&u&&(E.TgZ(0,"small",21),E._uU(1,"La clave es requerida "),E.qZA())}const fe=function(){return["/registro"]};let ke=(()=>{class u{constructor(s,c,p,C,D){this.fb=s,this.as=c,this.router=p,this.fs=C,this.toastr=D,this.grupoControles=this.fb.group({email:["",[ye.kI.required]],clave:["",[ye.kI.required]]}),this.fs.ListaUsuarios().subscribe(L=>{this.usuarios=L})}iniciarSesion(){var s,c;let p={email:null===(s=this.grupoControles.get("email"))||void 0===s?void 0:s.value,clave:null===(c=this.grupoControles.get("clave"))||void 0===c?void 0:c.value},C=this.usuarios.filter(D=>D.mail==p.email);1==C.length?(this.as.user=C[0],console.log(this.as.user),this.as.login(p.email,p.clave).then(()=>{1==this.as.userDateFirebase.user.emailVerified?"profesional"==this.as.user.perfil?this.as.user.habilitado?(this.toastr.success("disfrute del sistema!","Bienvenido!"),this.router.navigateByUrl("/principal")):this.toastr.error("Espere la habilitacion del administrador!","profesional NO HABILITADO!"):(this.toastr.success("disfrute del sistema!","Bienvenido!"),this.router.navigateByUrl("/principal")):this.toastr.error("Verifique su casilla de correo!","Correo NO CONFIRMADO!")})):this.toastr.error("Verifique si los datos son correctos!","ERROR EN LOS DATOS!")}inicioRapido(s){var c,p,C,D,L,Y,ae,Ae,He,st,kt,Lt;switch(s){case 1:null===(c=this.grupoControles.get("email"))||void 0===c||c.setValue("nahuelcisa17@gmail.com"),null===(p=this.grupoControles.get("clave"))||void 0===p||p.setValue("123456789");break;case 2:null===(C=this.grupoControles.get("email"))||void 0===C||C.setValue("nahuelcisa17@gmail.com"),null===(D=this.grupoControles.get("clave"))||void 0===D||D.setValue("123456789");break;case 3:null===(L=this.grupoControles.get("email"))||void 0===L||L.setValue("nahuelcisa17@gmail.com"),null===(Y=this.grupoControles.get("clave"))||void 0===Y||Y.setValue("123456789");break;case 4:null===(ae=this.grupoControles.get("email"))||void 0===ae||ae.setValue("lehiy44418@3mkz.com"),null===(Ae=this.grupoControles.get("clave"))||void 0===Ae||Ae.setValue("123456789");break;case 5:null===(He=this.grupoControles.get("email"))||void 0===He||He.setValue("nahuelcisa17@gmail.com"),null===(st=this.grupoControles.get("clave"))||void 0===st||st.setValue("123456789");break;case 6:null===(kt=this.grupoControles.get("email"))||void 0===kt||kt.setValue("jeyesis426@adroh.com"),null===(Lt=this.grupoControles.get("clave"))||void 0===Lt||Lt.setValue("123456789")}}ngOnInit(){}}return u.\u0275fac=function(s){return new(s||u)(E.Y36(ye.qu),E.Y36(Te.e),E.Y36(J.F0),E.Y36(Le.C),E.Y36(Ve._W))},u.\u0275cmp=E.Xpm({type:u,selectors:[["app-login"]],decls:35,vars:6,consts:[[1,"wrapper"],[1,"logo"],["src","../../../assets/3140366.png","alt",""],[1,"text-center","mt-4","name"],[1,"p-3","mt-3",3,"formGroup","ngSubmit"],[1,"form-field","d-flex","align-items-center"],["type","text","name","userName","placeholder","Correo","formControlName","email"],["class","invalid",4,"ngIf"],["type","password","name","password","placeholder","Clave","formControlName","clave"],[1,"btn","mt-3",3,"disabled"],[1,"text-center","fs-6"],[3,"routerLink"],[2,"border","3px solid rgb(153, 145, 145)","margin-top","20px"],[1,"text-center","fs-6",2,"margin-top","10px"],[2,"text-decoration","underline"],[1,"text-center","fs-6",2,"margin-top","20px"],[1,"row","align-items-start"],[1,"col","logo",2,"margin-bottom","20px"],["src","../../../assets/paciente.png","alt","...",1,"card-img-top",2,"height","80px","width","80px",3,"click"],["src","../../../assets/doctor.png","alt","...",1,"card-img-top",2,"height","80px","width","80px",3,"click"],["src","../../../assets/admin.png","alt","...",1,"card-img-top",2,"height","80px","width","80px",3,"click"],[1,"invalid"]],template:function(s,c){if(1&s&&(E.TgZ(0,"div",0),E.TgZ(1,"div",1),E._UZ(2,"img",2),E.qZA(),E.TgZ(3,"div",3),E._uU(4," Clinica OnLine "),E.qZA(),E.TgZ(5,"form",4),E.NdJ("ngSubmit",function(){return c.iniciarSesion()}),E.TgZ(6,"div",5),E._UZ(7,"input",6),E.YNc(8,Pe,2,0,"small",7),E.qZA(),E.TgZ(9,"div",5),E._UZ(10,"input",8),E.YNc(11,ce,2,0,"small",7),E.qZA(),E.TgZ(12,"button",9),E._uU(13,"Ingresar"),E.qZA(),E.qZA(),E.TgZ(14,"div",10),E.TgZ(15,"a",11),E._uU(16,"Registarse"),E.qZA(),E.qZA(),E.TgZ(17,"div",12),E.TgZ(18,"div",13),E.TgZ(19,"h2",14),E._uU(20,"Inicio Rapido"),E.qZA(),E.qZA(),E.TgZ(21,"div",15),E.TgZ(22,"div",16),E.TgZ(23,"div",17),E.TgZ(24,"img",18),E.NdJ("click",function(){return c.inicioRapido(1)}),E.qZA(),E.qZA(),E.TgZ(25,"div",17),E.TgZ(26,"img",18),E.NdJ("click",function(){return c.inicioRapido(2)}),E.qZA(),E.qZA(),E.TgZ(27,"div",17),E.TgZ(28,"img",18),E.NdJ("click",function(){return c.inicioRapido(3)}),E.qZA(),E.qZA(),E.TgZ(29,"div",17),E.TgZ(30,"img",19),E.NdJ("click",function(){return c.inicioRapido(4)}),E.qZA(),E.qZA(),E.TgZ(31,"div",17),E.TgZ(32,"img",19),E.NdJ("click",function(){return c.inicioRapido(5)}),E.qZA(),E.qZA(),E.TgZ(33,"div",17),E.TgZ(34,"img",20),E.NdJ("click",function(){return c.inicioRapido(6)}),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA()),2&s){let p,C;E.xp6(5),E.Q6J("formGroup",c.grupoControles),E.xp6(3),E.Q6J("ngIf",(null==(p=c.grupoControles.get("email"))||null==p.errors?null:p.errors.required)&&(null==(p=c.grupoControles.get("email"))?null:p.touched)),E.xp6(3),E.Q6J("ngIf",(null==(C=c.grupoControles.get("clave"))||null==C.errors?null:C.errors.required)&&(null==(C=c.grupoControles.get("clave"))?null:C.touched)),E.xp6(1),E.Q6J("disabled",c.grupoControles.invalid),E.xp6(3),E.Q6J("routerLink",E.DdM(5,fe))}},directives:[ye._Y,ye.JL,ye.sg,ye.Fj,ye.JJ,ye.u,he.O5,J.yS],styles:['@import"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}body[_ngcontent-%COMP%]{background:#67aadd}.wrapper[_ngcontent-%COMP%]{max-width:350px;min-height:500px;margin:80px auto;padding:40px 30px 30px;background-color:#ecf0f3;border-radius:15px;box-shadow:13px 13px 20px #cbced1,-13px -13px 20px #fff}.logo[_ngcontent-%COMP%]{width:80px;margin:auto}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:80px;object-fit:cover;border-radius:50%;box-shadow:0 0 3px #5f5f5f,0 0 0 5px #ecf0f3,8px 8px 15px #a7aaa7,-8px -8px 15px #fff}.wrapper[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:600;font-size:1.4rem;letter-spacing:1.3px;padding-left:10px;color:#555}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;display:block;border:none;outline:none;background:none;font-size:1.2rem;color:#666;padding:10px 15px 10px 10px}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{padding-left:10px;margin-bottom:20px;border-radius:20px;box-shadow:inset 8px 8px 8px #cbced1,inset -8px -8px 8px #fff}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{color:#555}.wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{box-shadow:none;width:100%;height:40px;background-color:#03a9f4;color:#fff;border-radius:25px;box-shadow:3px 3px 3px #b1b1b1,-3px -3px 3px #fff;letter-spacing:1.3px}.wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#039be5}.wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:.8rem;color:#03a9f4}.wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#039be5}@media (max-width: 380px){.wrapper[_ngcontent-%COMP%]{margin:30px 20px;padding:40px 15px 15px}}']}),u})();const yt=function(){return["/usuarios"]};function ut(u,i){1&u&&(E.TgZ(0,"li",4),E.TgZ(1,"a",5),E._uU(2,"Usuarios"),E.qZA(),E.qZA()),2&u&&(E.xp6(1),E.Q6J("routerLink",E.DdM(1,yt)))}const Ye=function(){return["/principal"]};let Ct=(()=>{class u{constructor(s){this.as=s}ngOnInit(){}}return u.\u0275fac=function(s){return new(s||u)(E.Y36(Te.e))},u.\u0275cmp=E.Xpm({type:u,selectors:[["app-nav"]],decls:18,vars:5,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container-fluid"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],[1,"nav-link",3,"routerLink"],["class","nav-item",4,"ngIf"],[1,"navbar-nav","my-2","my-lg-0"],[1,"nav-link"],[1,"btn","btn-outline-success",3,"click"]],template:function(s,c){1&s&&(E.TgZ(0,"nav",0),E.TgZ(1,"div",1),E.TgZ(2,"div",2),E.TgZ(3,"ul",3),E.TgZ(4,"li",4),E.TgZ(5,"a",5),E._uU(6,"Inicio"),E.qZA(),E.qZA(),E.YNc(7,ut,3,2,"li",6),E.qZA(),E.TgZ(8,"ul",7),E.TgZ(9,"li",4),E.TgZ(10,"a",8),E._uU(11),E.qZA(),E.qZA(),E.TgZ(12,"li",4),E.TgZ(13,"a",8),E._uU(14),E.qZA(),E.qZA(),E.TgZ(15,"li",4),E.TgZ(16,"button",9),E.NdJ("click",function(){return c.as.logout()}),E._uU(17,"Cerrar Sesion"),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA()),2&s&&(E.xp6(5),E.Q6J("routerLink",E.DdM(4,Ye)),E.xp6(2),E.Q6J("ngIf","administrador"==c.as.user.perfil),E.xp6(4),E.Oqu(c.as.user.perfil),E.xp6(3),E.Oqu(c.as.user.mail))},directives:[J.yS,he.O5],styles:[""]}),u})(),Ke=(()=>{class u{constructor(){}ngOnInit(){}}return u.\u0275fac=function(s){return new(s||u)},u.\u0275cmp=E.Xpm({type:u,selectors:[["app-principal"]],decls:3,vars:0,template:function(s,c){1&s&&(E._UZ(0,"app-nav"),E.TgZ(1,"p"),E._uU(2,"principal works!"),E.qZA())},directives:[Ct],styles:[""]}),u})();function $e(u,i){if(1&u){const s=E.EpF();E.TgZ(0,"button",9),E.NdJ("click",function(){E.CHM(s);const p=E.oxw().$implicit;return E.oxw().habilitarProfesional(p,!0)}),E._uU(1,"Habilitar"),E.qZA()}}function it(u,i){if(1&u){const s=E.EpF();E.TgZ(0,"button",10),E.NdJ("click",function(){E.CHM(s);const p=E.oxw().$implicit;return E.oxw().habilitarProfesional(p,!1)}),E._uU(1,"Inhabilitar"),E.qZA()}}function _t(u,i){if(1&u&&(E.TgZ(0,"tr"),E.TgZ(1,"td"),E._uU(2),E.qZA(),E.TgZ(3,"td"),E._uU(4),E.qZA(),E.TgZ(5,"td"),E._uU(6),E.qZA(),E.TgZ(7,"td"),E._uU(8),E.qZA(),E.TgZ(9,"td"),E._uU(10),E.qZA(),E.TgZ(11,"td"),E._UZ(12,"img",6),E.qZA(),E.TgZ(13,"td"),E.YNc(14,$e,2,0,"button",7),E.YNc(15,it,2,0,"button",8),E.qZA(),E.qZA()),2&u){const s=i.$implicit;E.xp6(2),E.Oqu(s.nombre),E.xp6(2),E.Oqu(s.apellido),E.xp6(2),E.Oqu(s.dni),E.xp6(2),E.Oqu(s.especialidad),E.xp6(2),E.Oqu(s.mail),E.xp6(2),E.s9C("src",s.foto,E.LSH),E.xp6(2),E.Q6J("ngIf",!s.habilitado),E.xp6(1),E.Q6J("ngIf",s.habilitado)}}let We=(()=>{class u{constructor(s){this.fs=s,this.fs.ListaUsuarios().subscribe(c=>{this.usuarios=c,this.usuarios=this.usuarios.filter(p=>"profesional"==p.perfil)})}habilitarProfesional(s,c){s.habilitado=!c,this.fs.ModificarUsuario(s,s.id)}ngOnInit(){}}return u.\u0275fac=function(s){return new(s||u)(E.Y36(Le.C))},u.\u0275cmp=E.Xpm({type:u,selectors:[["app-tabla-usuarios"]],decls:21,vars:1,consts:[["data-section","about","id","section-about",1,"pb_section","pb_section_v1"],[1,"container"],[1,"row","justify-content-center","mt-5"],[1,"rounded","p-1","text-center","fs-5",2,"color","white","background-color","rgb(53, 51, 51)"],[2,"width","100%"],[4,"ngFor","ngForOf"],["alt","","width","60px","height","60px",3,"src"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(s,c){1&s&&(E.TgZ(0,"section",0),E.TgZ(1,"div",1),E.TgZ(2,"div",2),E.TgZ(3,"div",3),E.TgZ(4,"table",4),E.TgZ(5,"tr"),E.TgZ(6,"th"),E._uU(7,"Nombre"),E.qZA(),E.TgZ(8,"th"),E._uU(9,"Apellido"),E.qZA(),E.TgZ(10,"th"),E._uU(11,"DNI"),E.qZA(),E.TgZ(12,"th"),E._uU(13,"Especialidad"),E.qZA(),E.TgZ(14,"th"),E._uU(15,"Correo"),E.qZA(),E.TgZ(16,"th"),E._uU(17,"Foto"),E.qZA(),E.TgZ(18,"th"),E._uU(19,"Habilitar"),E.qZA(),E.qZA(),E.YNc(20,_t,16,8,"tr",5),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA()),2&s&&(E.xp6(20),E.Q6J("ngForOf",c.usuarios))},directives:[he.sg,he.O5],styles:["table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;border-collapse:collapse;border:3px solid purple}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:30%}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:20%}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:15%}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:35%}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:20px}"]}),u})();var be=j(4203),Xe=j(5108);function At(u,i){1&u&&(E.TgZ(0,"small",15),E._uU(1,"El nombre es requerido "),E.qZA())}function bt(u,i){1&u&&(E.TgZ(0,"small",15),E._uU(1,"El apellido es requeridos"),E.qZA())}function lt(u,i){1&u&&(E.TgZ(0,"small",15),E._uU(1,"La edad es requerida"),E.qZA())}function Ce(u,i){1&u&&(E.TgZ(0,"small",15),E._uU(1,"El dni es requerido"),E.qZA())}function je(u,i){1&u&&(E.TgZ(0,"small",15),E._uU(1,"El mail es requerido"),E.qZA())}function tt(u,i){1&u&&(E.TgZ(0,"small",15),E._uU(1,"La clave es requerida"),E.qZA())}let ct=(()=>{class u{constructor(s,c,p,C){this.fb=s,this.fs=c,this.toastr=p,this.router=C,this.grupoControles=this.fb.group({nombre:["",[ye.kI.required]],apellido:["",[ye.kI.required]],edad:["",[ye.kI.required]],dni:["",[ye.kI.required]],mail:["",[ye.kI.required]],clave:["",[ye.kI.required]],foto:[]})}agregarAdministrador(){var s,c,p,C,D,L;let Y={nombre:null===(s=this.grupoControles.get("nombre"))||void 0===s?void 0:s.value,apellido:null===(c=this.grupoControles.get("apellido"))||void 0===c?void 0:c.value,edad:null===(p=this.grupoControles.get("edad"))||void 0===p?void 0:p.value,dni:null===(C=this.grupoControles.get("dni"))||void 0===C?void 0:C.value,mail:null===(D=this.grupoControles.get("mail"))||void 0===D?void 0:D.value,clave:null===(L=this.grupoControles.get("clave"))||void 0===L?void 0:L.value,foto:this.foto,perfil:"administrador"};this.fs.agregarAdmin(Y),this.toastr.success("Confirme mail y el administrador deber\xe1 habilitarlo ahora!","Profesional registrado!"),this.grupoControles.reset()}upload(s){this.foto=s.target.files[0]}ngOnInit(){}}return u.\u0275fac=function(s){return new(s||u)(E.Y36(ye.qu),E.Y36(Le.C),E.Y36(Ve._W),E.Y36(J.F0))},u.\u0275cmp=E.Xpm({type:u,selectors:[["app-alta-admin"]],decls:28,vars:8,consts:[[1,"wrapper"],[1,"logo"],["src","../../../assets/admin.png","alt",""],[1,"text-center","mt-4","name"],[1,"p-3","mt-3",3,"formGroup","ngSubmit"],[1,"form-field","d-flex","align-items-center"],["type","text","name","nombre","formControlName","nombre","placeholder","Nombre"],["class","invalid",4,"ngIf"],["type","text","name","apellido","formControlName","apellido","placeholder","Apellido"],["type","number","name","edad","formControlName","edad","placeholder","Edad"],["type","number","name","dni","formControlName","dni","placeholder","DNI"],["type","text","name","mail","formControlName","mail","placeholder","Mail"],["type","password","name","clave","formControlName","clave","placeholder","Password"],["type","file","name","foro","formControlName","foto","placeholder","Foto",3,"change"],["type","submit",1,"btn","mt-3",3,"disabled"],[1,"invalid"]],template:function(s,c){if(1&s&&(E.TgZ(0,"div",0),E.TgZ(1,"div",1),E._UZ(2,"img",2),E.qZA(),E.TgZ(3,"div",3),E._uU(4," Registro Admin "),E.qZA(),E.TgZ(5,"form",4),E.NdJ("ngSubmit",function(){return c.agregarAdministrador()}),E.TgZ(6,"div",5),E._UZ(7,"input",6),E.YNc(8,At,2,0,"small",7),E.qZA(),E.TgZ(9,"div",5),E._UZ(10,"input",8),E.YNc(11,bt,2,0,"small",7),E.qZA(),E.TgZ(12,"div",5),E._UZ(13,"input",9),E.YNc(14,lt,2,0,"small",7),E.qZA(),E.TgZ(15,"div",5),E._UZ(16,"input",10),E.YNc(17,Ce,2,0,"small",7),E.qZA(),E.TgZ(18,"div",5),E._UZ(19,"input",11),E.YNc(20,je,2,0,"small",7),E.qZA(),E.TgZ(21,"div",5),E._UZ(22,"input",12),E.YNc(23,tt,2,0,"small",7),E.qZA(),E.TgZ(24,"div",5),E.TgZ(25,"input",13),E.NdJ("change",function(C){return c.upload(C)}),E.qZA(),E.qZA(),E.TgZ(26,"button",14),E._uU(27,"Registrar"),E.qZA(),E.qZA(),E.qZA()),2&s){let p,C,D,L,Y,ae;E.xp6(5),E.Q6J("formGroup",c.grupoControles),E.xp6(3),E.Q6J("ngIf",(null==(p=c.grupoControles.get("nombre"))||null==p.errors?null:p.errors.required)&&(null==(p=c.grupoControles.get("nombre"))?null:p.touched)),E.xp6(3),E.Q6J("ngIf",(null==(C=c.grupoControles.get("apellido"))||null==C.errors?null:C.errors.required)&&(null==(C=c.grupoControles.get("apellido"))?null:C.touched)),E.xp6(3),E.Q6J("ngIf",(null==(D=c.grupoControles.get("edad"))||null==D.errors?null:D.errors.required)&&(null==(D=c.grupoControles.get("edad"))?null:D.touched)),E.xp6(3),E.Q6J("ngIf",(null==(L=c.grupoControles.get("dni"))||null==L.errors?null:L.errors.required)&&(null==(L=c.grupoControles.get("dni"))?null:L.touched)),E.xp6(3),E.Q6J("ngIf",(null==(Y=c.grupoControles.get("mail"))||null==Y.errors?null:Y.errors.required)&&(null==(Y=c.grupoControles.get("mail"))?null:Y.touched)),E.xp6(3),E.Q6J("ngIf",(null==(ae=c.grupoControles.get("clave"))||null==ae.errors?null:ae.errors.required)&&(null==(ae=c.grupoControles.get("clave"))?null:ae.touched)),E.xp6(3),E.Q6J("disabled",c.grupoControles.invalid)}},directives:[ye._Y,ye.JL,ye.sg,ye.Fj,ye.JJ,ye.u,he.O5,ye.wV],styles:['@import"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}body[_ngcontent-%COMP%]{background:#67aadd}.wrapper[_ngcontent-%COMP%]{max-width:350px;min-height:500px;margin:30px auto;padding:40px 30px 30px;background-color:#ecf0f3;border-radius:15px;box-shadow:13px 13px 20px #cbced1,-13px -13px 20px #fff}.logo[_ngcontent-%COMP%]{width:80px;margin:auto}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:80px;object-fit:cover;border-radius:50%;box-shadow:0 0 3px #5f5f5f,0 0 0 5px #ecf0f3,8px 8px 15px #a7aaa7,-8px -8px 15px #fff}.wrapper[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:600;font-size:1.4rem;letter-spacing:1.3px;padding-left:10px;color:#555}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;display:block;border:none;outline:none;background:none;font-size:1.2rem;color:#666;padding:10px 15px 10px 10px}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{padding-left:10px;margin-bottom:20px;border-radius:20px;box-shadow:inset 8px 8px 8px #cbced1,inset -8px -8px 8px #fff}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{color:#555}.wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{box-shadow:none;width:100%;height:40px;background-color:#03a9f4;color:#fff;border-radius:25px;box-shadow:3px 3px 3px #b1b1b1,-3px -3px 3px #fff;letter-spacing:1.3px}.wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#039be5}.wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:.8rem;color:#03a9f4}.wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#039be5}@media (max-width: 380px){.wrapper[_ngcontent-%COMP%]{margin:30px 20px;padding:40px 15px 15px}}']}),u})();const et=[{path:"login",component:ke},{path:"",component:ke},{path:"registro",loadChildren:()=>j.e(226).then(j.bind(j,6226)).then(u=>u.RegistroModule)},{path:"principal",component:Ke},{path:"usuarios",component:(()=>{class u{constructor(){}ngOnInit(){}}return u.\u0275fac=function(s){return new(s||u)},u.\u0275cmp=E.Xpm({type:u,selectors:[["app-usuarios"]],decls:10,vars:0,consts:[[1,"container"],[1,"row"],[1,"col"]],template:function(s,c){1&s&&(E._UZ(0,"app-nav"),E._UZ(1,"app-tabla-usuarios"),E.TgZ(2,"div",0),E.TgZ(3,"div",1),E.TgZ(4,"div",2),E._UZ(5,"app-alta-profesional"),E.qZA(),E.TgZ(6,"div",2),E._UZ(7,"app-alta-usuario"),E.qZA(),E.TgZ(8,"div",2),E._UZ(9,"app-alta-admin"),E.qZA(),E.qZA(),E.qZA())},directives:[Ct,We,be.w,Xe.U,ct],styles:[""]}),u})()},{path:"*",component:ke}];let Tn=(()=>{class u{}return u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=E.oAB({type:u}),u.\u0275inj=E.cJS({imports:[[J.Bz.forRoot(et)],J.Bz]}),u})(),Jt=(()=>{class u{constructor(){this.title="TpClinicaOnLine"}}return u.\u0275fac=function(s){return new(s||u)},u.\u0275cmp=E.Xpm({type:u,selectors:[["app-root"]],decls:1,vars:0,template:function(s,c){1&s&&E._UZ(0,"router-outlet")},directives:[J.lC],styles:[""]}),u})();var On=j(3692);const St_firebase={projectId:"clinicaonline-1e39f",appId:"1:410219080369:web:b479e4d1e1602369561090",storageBucket:"clinicaonline-1e39f.appspot.com",apiKey:"AIzaSyDaI9frBLDptpBZyv2q8wdZa467e-khuoo",authDomain:"clinicaonline-1e39f.firebaseapp.com",messagingSenderId:"410219080369"};var Zt=j(7667),an=j(5813),wn=j(5867),gt=j(7128),Dt=j(5861),Me=j(9681),ot=j(4859),_e=j(2090),yn=j(1877);const Wn="@firebase/database";let qr="";class yr{constructor(i){this.domStorage_=i,this.prefix_="firebase:"}set(i,s){null==s?this.domStorage_.removeItem(this.prefixedName_(i)):this.domStorage_.setItem(this.prefixedName_(i),(0,_e.Wl)(s))}get(i){const s=this.domStorage_.getItem(this.prefixedName_(i));return null==s?null:(0,_e.cI)(s)}remove(i){this.domStorage_.removeItem(this.prefixedName_(i))}prefixedName_(i){return this.prefix_+i}toString(){return this.domStorage_.toString()}}class Rt{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(i,s){null==s?delete this.cache_[i]:this.cache_[i]=s}get(i){return(0,_e.r3)(this.cache_,i)?this.cache_[i]:null}remove(i){delete this.cache_[i]}}const xr=function(u){try{if("undefined"!=typeof window&&void 0!==window[u]){const i=window[u];return i.setItem("firebase:sentinel","cache"),i.removeItem("firebase:sentinel"),new yr(i)}}catch(i){}return new Rt},tn=xr("localStorage"),ir=xr("sessionStorage"),vn=new yn.Yd("@firebase/database"),Nn=function(){let u=1;return function(){return u++}}(),Or=function(u){const i=(0,_e.dS)(u),s=new _e.gQ;s.update(i);const c=s.digest();return _e.US.encodeByteArray(c)},Gr=function(...u){let i="";for(let s=0;s<u.length;s++){const c=u[s];Array.isArray(c)||c&&"object"==typeof c&&"number"==typeof c.length?i+=Gr.apply(null,c):i+="object"==typeof c?(0,_e.Wl)(c):c,i+=" "}return i};let jr=null,Mr=!0;const sn=function(...u){if(!0===Mr&&(Mr=!1,null===jr&&!0===ir.get("logging_enabled")&&function(u,i){(0,_e.hu)(!i||!0===u||!1===u,"Can't turn on custom loggers persistently."),!0===u?(vn.logLevel=yn.in.VERBOSE,jr=vn.log.bind(vn),i&&ir.set("logging_enabled",!0)):"function"==typeof u?jr=u:(jr=null,ir.remove("logging_enabled"))}(!0)),jr){const i=Gr.apply(null,u);jr(i)}},Vn=function(u){return function(...i){sn(u,...i)}},un=function(...u){const i="FIREBASE INTERNAL ERROR: "+Gr(...u);vn.error(i)},nn=function(...u){const i=`FIREBASE FATAL ERROR: ${Gr(...u)}`;throw vn.error(i),new Error(i)},Dr=function(...u){const i="FIREBASE WARNING: "+Gr(...u);vn.warn(i)},Dn=function(u){return"number"==typeof u&&(u!=u||u===Number.POSITIVE_INFINITY||u===Number.NEGATIVE_INFINITY)},dr="[MIN_NAME]",ar="[MAX_NAME]",En=function(u,i){if(u===i)return 0;if(u===dr||i===ar)return-1;if(i===dr||u===ar)return 1;{const s=me(u),c=me(i);return null!==s?null!==c?s-c==0?u.length-i.length:s-c:-1:null!==c?1:u<i?-1:1}},hr=function(u,i){return u===i?0:u<i?-1:1},Gn=function(u,i){if(i&&u in i)return i[u];throw new Error("Missing required key ("+u+") in object: "+(0,_e.Wl)(i))},cr=function(u){if("object"!=typeof u||null===u)return(0,_e.Wl)(u);const i=[];for(const c in u)i.push(c);i.sort();let s="{";for(let c=0;c<i.length;c++)0!==c&&(s+=","),s+=(0,_e.Wl)(i[c]),s+=":",s+=cr(u[i[c]]);return s+="}",s},Ot=function(u,i){const s=u.length;if(s<=i)return[u];const c=[];for(let p=0;p<s;p+=i)c.push(u.substring(p,p+i>s?s:p+i));return c};function dt(u,i){for(const s in u)u.hasOwnProperty(s)&&i(s,u[s])}const Kt=function(u){(0,_e.hu)(!Dn(u),"Invalid JSON number");const c=1023;let p,C,D,L,Y;0===u?(C=0,D=0,p=1/u==-1/0?1:0):(p=u<0,(u=Math.abs(u))>=Math.pow(2,1-c)?(L=Math.min(Math.floor(Math.log(u)/Math.LN2),c),C=L+c,D=Math.round(u*Math.pow(2,52-L)-Math.pow(2,52))):(C=0,D=Math.round(u/Math.pow(2,-1074))));const ae=[];for(Y=52;Y;Y-=1)ae.push(D%2?1:0),D=Math.floor(D/2);for(Y=11;Y;Y-=1)ae.push(C%2?1:0),C=Math.floor(C/2);ae.push(p?1:0),ae.reverse();const Ae=ae.join("");let He="";for(Y=0;Y<64;Y+=8){let st=parseInt(Ae.substr(Y,8),2).toString(16);1===st.length&&(st="0"+st),He+=st}return He.toLowerCase()},Se=new RegExp("^-?(0*)\\d{1,10}$"),me=function(u){if(Se.test(u)){const i=Number(u);if(i>=-2147483648&&i<=2147483647)return i}return null},le=function(u){try{u()}catch(i){setTimeout(()=>{throw Dr("Exception was thrown by user callback.",i.stack||""),i},Math.floor(0))}},ee=function(u,i){const s=setTimeout(u,i);return"number"==typeof s&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(s):"object"==typeof s&&s.unref&&s.unref(),s};class ue{constructor(i,s){this.appName_=i,this.appCheckProvider=s,this.appCheck=null==s?void 0:s.getImmediate({optional:!0}),this.appCheck||null==s||s.get().then(c=>this.appCheck=c)}getToken(i){return this.appCheck?this.appCheck.getToken(i):new Promise((s,c)=>{setTimeout(()=>{this.appCheck?this.getToken(i).then(s,c):s(null)},0)})}addTokenChangeListener(i){var s;null===(s=this.appCheckProvider)||void 0===s||s.get().then(c=>c.addTokenListener(i))}notifyForInvalidToken(){Dr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class De{constructor(i,s,c){this.appName_=i,this.firebaseOptions_=s,this.authProvider_=c,this.auth_=null,this.auth_=c.getImmediate({optional:!0}),this.auth_||c.onInit(p=>this.auth_=p)}getToken(i){return this.auth_?this.auth_.getToken(i).catch(s=>s&&"auth/token-not-initialized"===s.code?(sn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(s)):new Promise((s,c)=>{setTimeout(()=>{this.auth_?this.getToken(i).then(s,c):s(null)},0)})}addTokenChangeListener(i){this.auth_?this.auth_.addAuthTokenListener(i):this.authProvider_.get().then(s=>s.addAuthTokenListener(i))}removeTokenChangeListener(i){this.authProvider_.get().then(s=>s.removeAuthTokenListener(i))}notifyForInvalidToken(){let i='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';i+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Dr(i)}}let Ge=(()=>{class u{constructor(s){this.accessToken=s}getToken(s){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(s){s(this.accessToken)}removeTokenChangeListener(s){}notifyForInvalidToken(){}}return u.OWNER="owner",u})();const jt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,$r="websocket",zt="long_polling";class Ln{constructor(i,s,c,p,C=!1,D="",L=!1){this.secure=s,this.namespace=c,this.webSocketOnly=p,this.nodeAdmin=C,this.persistenceKey=D,this.includeNamespaceInQueryParams=L,this._host=i.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=tn.get("host:"+i)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(i){i!==this.internalHost&&(this.internalHost=i,this.isCacheableHost()&&tn.set("host:"+this._host,this.internalHost))}toString(){let i=this.toURLString();return this.persistenceKey&&(i+="<"+this.persistenceKey+">"),i}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Kr(u,i,s){let c;if((0,_e.hu)("string"==typeof i,"typeof type must == string"),(0,_e.hu)("object"==typeof s,"typeof params must == object"),i===$r)c=(u.secure?"wss://":"ws://")+u.internalHost+"/.ws?";else{if(i!==zt)throw new Error("Unknown connection type: "+i);c=(u.secure?"https://":"http://")+u.internalHost+"/.lp?"}(function Rr(u){return u.host!==u.internalHost||u.isCustomHost()||u.includeNamespaceInQueryParams})(u)&&(s.ns=u.namespace);const p=[];return dt(s,(C,D)=>{p.push(C+"="+D)}),c+p.join("&")}class ni{constructor(){this.counters_={}}incrementCounter(i,s=1){(0,_e.r3)(this.counters_,i)||(this.counters_[i]=0),this.counters_[i]+=s}get(){return(0,_e.p$)(this.counters_)}}const fi={},Fi={};function Bn(u){const i=u.toString();return fi[i]||(fi[i]=new ni),fi[i]}class ri{constructor(i){this.onMessage_=i,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(i,s){this.closeAfterResponse=i,this.onClose=s,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(i,s){for(this.pendingResponses[i]=s;this.pendingResponses[this.currentResponseNum];){const c=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let p=0;p<c.length;++p)c[p]&&le(()=>{this.onMessage_(c[p])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Qr{constructor(i,s,c,p,C,D,L){this.connId=i,this.repoInfo=s,this.applicationId=c,this.appCheckToken=p,this.authToken=C,this.transportSessionId=D,this.lastSessionId=L,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Vn(i),this.stats_=Bn(s),this.urlFn=Y=>(this.appCheckToken&&(Y.ac=this.appCheckToken),Kr(s,zt,Y))}open(i,s){this.curSegmentNum=0,this.onDisconnect_=s,this.myPacketOrderer=new ri(i),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(u){if((0,_e.Yr)()||"complete"===document.readyState)u();else{let i=!1;const s=function(){document.body?i||(i=!0,u()):setTimeout(s,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",s,!1),window.addEventListener("load",s,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&s()}),window.attachEvent("onload",s))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ss((...C)=>{const[D,L,Y,ae,Ae]=C;if(this.incrementIncomingBytes_(C),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===D)this.id=L,this.password=Y;else{if("close"!==D)throw new Error("Unrecognized command received: "+D);L?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(L,()=>{this.onClosed_()})):this.onClosed_()}},(...C)=>{const[D,L]=C;this.incrementIncomingBytes_(C),this.myPacketOrderer.handleResponse(D,L)},()=>{this.onClosed_()},this.urlFn);const c={start:"t"};c.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(c.cb=this.scriptTagHolder.uniqueCallbackIdentifier),c.v="5",this.transportSessionId&&(c.s=this.transportSessionId),this.lastSessionId&&(c.ls=this.lastSessionId),this.applicationId&&(c.p=this.applicationId),this.appCheckToken&&(c.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&jt.test(location.hostname)&&(c.r="f");const p=this.urlFn(c);this.log_("Connecting via long-poll to "+p),this.scriptTagHolder.addTag(p,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Qr.forceAllow_=!0}static forceDisallow(){Qr.forceDisallow_=!0}static isAvailable(){return!((0,_e.Yr)()||!Qr.forceAllow_&&(Qr.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(i){const s=(0,_e.Wl)(i);this.bytesSent+=s.length,this.stats_.incrementCounter("bytes_sent",s.length);const c=(0,_e.h$)(s),p=Ot(c,1840);for(let C=0;C<p.length;C++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,p.length,p[C]),this.curSegmentNum++}addDisconnectPingFrame(i,s){if((0,_e.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const c={dframe:"t"};c.id=i,c.pw=s,this.myDisconnFrame.src=this.urlFn(c),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(i){const s=(0,_e.Wl)(i).length;this.bytesReceived+=s,this.stats_.incrementCounter("bytes_received",s)}}class Ss{constructor(i,s,c,p){if(this.onDisconnect=c,this.urlFn=p,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,_e.Yr)())this.commandCB=i,this.onMessageCB=s;else{this.uniqueCallbackIdentifier=Nn(),window["pLPCommand"+this.uniqueCallbackIdentifier]=i,window["pRTLPCB"+this.uniqueCallbackIdentifier]=s,this.myIFrame=Ss.createIFrame_();let C="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(C='<script>document.domain="'+document.domain+'";<\/script>');const D="<html><body>"+C+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(D),this.myIFrame.doc.close()}catch(L){sn("frame writing exception"),L.stack&&sn(L.stack),sn(L)}}}static createIFrame_(){const i=document.createElement("iframe");if(i.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(i);try{i.contentWindow.document||sn("No IE domain setting required")}catch(s){const c=document.domain;i.src="javascript:void((function(){document.open();document.domain='"+c+"';document.close();})())"}return i.contentDocument?i.doc=i.contentDocument:i.contentWindow?i.doc=i.contentWindow.document:i.document&&(i.doc=i.document),i}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const i=this.onDisconnect;i&&(this.onDisconnect=null,i())}startLongPoll(i,s){for(this.myID=i,this.myPW=s,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const i={};i.id=this.myID,i.pw=this.myPW,i.ser=this.currentSerial;let s=this.urlFn(i),c="",p=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+c.length<=1870;){const D=this.pendingSegs.shift();c=c+"&seg"+p+"="+D.seg+"&ts"+p+"="+D.ts+"&d"+p+"="+D.d,p++}return s+=c,this.addLongPollTag_(s,this.currentSerial),!0}return!1}enqueueSegment(i,s,c){this.pendingSegs.push({seg:i,ts:s,d:c}),this.alive&&this.newRequest_()}addLongPollTag_(i,s){this.outstandingRequests.add(s);const c=()=>{this.outstandingRequests.delete(s),this.newRequest_()},p=setTimeout(c,Math.floor(25e3));this.addTag(i,()=>{clearTimeout(p),c()})}addTag(i,s){(0,_e.Yr)()?this.doNodeLongPoll(i,s):setTimeout(()=>{try{if(!this.sendNewPolls)return;const c=this.myIFrame.doc.createElement("script");c.type="text/javascript",c.async=!0,c.src=i,c.onload=c.onreadystatechange=function(){const p=c.readyState;(!p||"loaded"===p||"complete"===p)&&(c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),s())},c.onerror=()=>{sn("Long-poll script failed to load: "+i),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(c)}catch(c){}},Math.floor(1))}}let Ui=null;"undefined"!=typeof MozWebSocket?Ui=MozWebSocket:"undefined"!=typeof WebSocket&&(Ui=WebSocket);let lo=(()=>{class u{constructor(s,c,p,C,D,L,Y){this.connId=s,this.applicationId=p,this.appCheckToken=C,this.authToken=D,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Vn(this.connId),this.stats_=Bn(c),this.connURL=u.connectionURL_(c,L,Y,C,p),this.nodeAdmin=c.nodeAdmin}static connectionURL_(s,c,p,C,D){const L={v:"5"};return!(0,_e.Yr)()&&"undefined"!=typeof location&&location.hostname&&jt.test(location.hostname)&&(L.r="f"),c&&(L.s=c),p&&(L.ls=p),C&&(L.ac=C),D&&(L.p=D),Kr(s,$r,L)}open(s,c){this.onDisconnect=c,this.onMessage=s,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,tn.set("previous_websocket_failure",!0);try{let p;if((0,_e.Yr)()){p={headers:{"User-Agent":`Firebase/5/${qr}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(p.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(p.headers["X-Firebase-AppCheck"]=this.appCheckToken);const D=process.env,L=0===this.connURL.indexOf("wss://")?D.HTTPS_PROXY||D.https_proxy:D.HTTP_PROXY||D.http_proxy;L&&(p.proxy={origin:L})}this.mySock=new Ui(this.connURL,[],p)}catch(p){this.log_("Error instantiating WebSocket.");const C=p.message||p.data;return C&&this.log_(C),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=p=>{this.handleIncomingFrame(p)},this.mySock.onerror=p=>{this.log_("WebSocket error.  Closing connection.");const C=p.message||p.data;C&&this.log_(C),this.onClosed_()}}start(){}static forceDisallow(){u.forceDisallow_=!0}static isAvailable(){let s=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const p=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);p&&p.length>1&&parseFloat(p[1])<4.4&&(s=!0)}return!s&&null!==Ui&&!u.forceDisallow_}static previouslyFailed(){return tn.isInMemoryStorage||!0===tn.get("previous_websocket_failure")}markConnectionHealthy(){tn.remove("previous_websocket_failure")}appendFrame_(s){if(this.frames.push(s),this.frames.length===this.totalFrames){const c=this.frames.join("");this.frames=null;const p=(0,_e.cI)(c);this.onMessage(p)}}handleNewFrameCount_(s){this.totalFrames=s,this.frames=[]}extractFrameCount_(s){if((0,_e.hu)(null===this.frames,"We already have a frame buffer"),s.length<=6){const c=Number(s);if(!isNaN(c))return this.handleNewFrameCount_(c),null}return this.handleNewFrameCount_(1),s}handleIncomingFrame(s){if(null===this.mySock)return;const c=s.data;if(this.bytesReceived+=c.length,this.stats_.incrementCounter("bytes_received",c.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(c);else{const p=this.extractFrameCount_(c);null!==p&&this.appendFrame_(p)}}send(s){this.resetKeepAlive();const c=(0,_e.Wl)(s);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const p=Ot(c,16384);p.length>1&&this.sendString_(String(p.length));for(let C=0;C<p.length;C++)this.sendString_(p[C])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(s){try{this.mySock.send(s)}catch(c){this.log_("Exception thrown from WebSocket.send():",c.message||c.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return u.responsesRequiredToBeHealthy=2,u.healthyTimeout=3e4,u})(),Ns=(()=>{class u{constructor(s){this.initTransports_(s)}static get ALL_TRANSPORTS(){return[Qr,lo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(s){const c=lo&&lo.isAvailable();let p=c&&!lo.previouslyFailed();if(s.webSocketOnly&&(c||Dr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),p=!0),p)this.transports_=[lo];else{const C=this.transports_=[];for(const D of u.ALL_TRANSPORTS)D&&D.isAvailable()&&C.push(D);u.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return u.globalTransportInitialized_=!1,u})();class Ls{constructor(i,s,c,p,C,D,L,Y,ae,Ae){this.id=i,this.repoInfo_=s,this.applicationId_=c,this.appCheckToken_=p,this.authToken_=C,this.onMessage_=D,this.onReady_=L,this.onDisconnect_=Y,this.onKill_=ae,this.lastSessionId=Ae,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Vn("c:"+this.id+":"),this.transportManager_=new Ns(s),this.log_("Connection created"),this.start_()}start_(){const i=this.transportManager_.initialTransport();this.conn_=new i(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=i.responsesRequiredToBeHealthy||0;const s=this.connReceiver_(this.conn_),c=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(s,c)},Math.floor(0));const p=i.healthyTimeout||0;p>0&&(this.healthyTimeout_=ee(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(p)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(i){return s=>{i===this.conn_?this.onConnectionLost_(s):i===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(i){return s=>{2!==this.state_&&(i===this.rx_?this.onPrimaryMessageReceived_(s):i===this.secondaryConn_?this.onSecondaryMessageReceived_(s):this.log_("message on old connection"))}}sendRequest(i){this.sendData_({t:"d",d:i})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(i){if("t"in i){const s=i.t;"a"===s?this.upgradeIfSecondaryHealthy_():"r"===s?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===s&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(i){const s=Gn("t",i),c=Gn("d",i);if("c"===s)this.onSecondaryControl_(c);else{if("d"!==s)throw new Error("Unknown protocol layer: "+s);this.pendingDataMessages.push(c)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(i){const s=Gn("t",i),c=Gn("d",i);"c"===s?this.onControl_(c):"d"===s&&this.onDataMessage_(c)}onDataMessage_(i){this.onPrimaryResponse_(),this.onMessage_(i)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(i){const s=Gn("t",i);if("d"in i){const c=i.d;if("h"===s)this.onHandshake_(c);else if("n"===s){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let p=0;p<this.pendingDataMessages.length;++p)this.onDataMessage_(this.pendingDataMessages[p]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===s?this.onConnectionShutdown_(c):"r"===s?this.onReset_(c):"e"===s?un("Server Error: "+c):"o"===s?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):un("Unknown control packet command: "+s)}}onHandshake_(i){const s=i.ts,c=i.v,p=i.h;this.sessionId=i.s,this.repoInfo_.host=p,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,s),"5"!==c&&Dr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const i=this.transportManager_.upgradeTransport();i&&this.startUpgrade_(i)}startUpgrade_(i){this.secondaryConn_=new i(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=i.responsesRequiredToBeHealthy||0;const s=this.connReceiver_(this.secondaryConn_),c=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(s,c),ee(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(i){this.log_("Reset packet received.  New host: "+i),this.repoInfo_.host=i,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(i,s){this.log_("Realtime connection established."),this.conn_=i,this.state_=1,this.onReady_&&(this.onReady_(s,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ee(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const i=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===i||this.rx_===i)&&this.close()}onConnectionLost_(i){this.conn_=null,i||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(tn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(i){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(i),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(i){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(i)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ps{put(i,s,c,p){}merge(i,s,c,p){}refreshAuthToken(i){}refreshAppCheckToken(i){}onDisconnectPut(i,s,c){}onDisconnectMerge(i,s,c){}onDisconnectCancel(i,s){}reportStats(i){}}class co{constructor(i){this.allowedEvents_=i,this.listeners_={},(0,_e.hu)(Array.isArray(i)&&i.length>0,"Requires a non-empty array")}trigger(i,...s){if(Array.isArray(this.listeners_[i])){const c=[...this.listeners_[i]];for(let p=0;p<c.length;p++)c[p].callback.apply(c[p].context,s)}}on(i,s,c){this.validateEventType_(i),this.listeners_[i]=this.listeners_[i]||[],this.listeners_[i].push({callback:s,context:c});const p=this.getInitialEvent(i);p&&s.apply(c,p)}off(i,s,c){this.validateEventType_(i);const p=this.listeners_[i]||[];for(let C=0;C<p.length;C++)if(p[C].callback===s&&(!c||c===p[C].context))return void p.splice(C,1)}validateEventType_(i){(0,_e.hu)(this.allowedEvents_.find(s=>s===i),"Unknown event: "+i)}}class us extends co{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,_e.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new us}getInitialEvent(i){return(0,_e.hu)("online"===i,"Unknown event type: "+i),[this.online_]}currentlyOnline(){return this.online_}}class fr{constructor(i,s){if(void 0===s){this.pieces_=i.split("/");let c=0;for(let p=0;p<this.pieces_.length;p++)this.pieces_[p].length>0&&(this.pieces_[c]=this.pieces_[p],c++);this.pieces_.length=c,this.pieceNum_=0}else this.pieces_=i,this.pieceNum_=s}toString(){let i="";for(let s=this.pieceNum_;s<this.pieces_.length;s++)""!==this.pieces_[s]&&(i+="/"+this.pieces_[s]);return i||"/"}}function or(){return new fr("")}function lr(u){return u.pieceNum_>=u.pieces_.length?null:u.pieces_[u.pieceNum_]}function pi(u){return u.pieces_.length-u.pieceNum_}function zr(u){let i=u.pieceNum_;return i<u.pieces_.length&&i++,new fr(u.pieces_,i)}function Hs(u){return u.pieceNum_<u.pieces_.length?u.pieces_[u.pieces_.length-1]:null}function ko(u,i=0){return u.pieces_.slice(u.pieceNum_+i)}function ai(u){if(u.pieceNum_>=u.pieces_.length)return null;const i=[];for(let s=u.pieceNum_;s<u.pieces_.length-1;s++)i.push(u.pieces_[s]);return new fr(i,0)}function X(u,i){const s=[];for(let c=u.pieceNum_;c<u.pieces_.length;c++)s.push(u.pieces_[c]);if(i instanceof fr)for(let c=i.pieceNum_;c<i.pieces_.length;c++)s.push(i.pieces_[c]);else{const c=i.split("/");for(let p=0;p<c.length;p++)c[p].length>0&&s.push(c[p])}return new fr(s,0)}function G(u){return u.pieceNum_>=u.pieces_.length}function pe(u,i){const s=lr(u),c=lr(i);if(null===s)return i;if(s===c)return pe(zr(u),zr(i));throw new Error("INTERNAL ERROR: innerPath ("+i+") is not within outerPath ("+u+")")}function qe(u,i){if(pi(u)!==pi(i))return!1;for(let s=u.pieceNum_,c=i.pieceNum_;s<=u.pieces_.length;s++,c++)if(u.pieces_[s]!==i.pieces_[c])return!1;return!0}function vt(u,i){let s=u.pieceNum_,c=i.pieceNum_;if(pi(u)>pi(i))return!1;for(;s<u.pieces_.length;){if(u.pieces_[s]!==i.pieces_[c])return!1;++s,++c}return!0}class Ft{constructor(i,s){this.errorPrefix_=s,this.parts_=ko(i,0),this.byteLength_=Math.max(1,this.parts_.length);for(let c=0;c<this.parts_.length;c++)this.byteLength_+=(0,_e.ug)(this.parts_[c]);An(this)}}function An(u){if(u.byteLength_>768)throw new Error(u.errorPrefix_+"has a key path longer than 768 bytes ("+u.byteLength_+").");if(u.parts_.length>32)throw new Error(u.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+F(u))}function F(u){return 0===u.parts_.length?"":"in property '"+u.parts_.join(".")+"'"}class te extends co{constructor(){let i,s;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(s="visibilitychange",i="hidden"):void 0!==document.mozHidden?(s="mozvisibilitychange",i="mozHidden"):void 0!==document.msHidden?(s="msvisibilitychange",i="msHidden"):void 0!==document.webkitHidden&&(s="webkitvisibilitychange",i="webkitHidden")),this.visible_=!0,s&&document.addEventListener(s,()=>{const c=!document[i];c!==this.visible_&&(this.visible_=c,this.trigger("visible",c))},!1)}static getInstance(){return new te}getInitialEvent(i){return(0,_e.hu)("visible"===i,"Unknown event type: "+i),[this.visible_]}}const V=1e3;let Pr,$n=(()=>{class u extends ps{constructor(s,c,p,C,D,L,Y,ae){if(super(),this.repoInfo_=s,this.applicationId_=c,this.onDataUpdate_=p,this.onConnectStatus_=C,this.onServerInfoUpdate_=D,this.authTokenProvider_=L,this.appCheckTokenProvider_=Y,this.authOverride_=ae,this.id=u.nextPersistentConnectionId_++,this.log_=Vn("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=V,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,ae&&!(0,_e.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");te.getInstance().on("visible",this.onVisible_,this),-1===s.host.indexOf("fblocal")&&us.getInstance().on("online",this.onOnline_,this)}sendRequest(s,c,p){const C=++this.requestNumber_,D={r:C,a:s,b:c};this.log_((0,_e.Wl)(D)),(0,_e.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(D),p&&(this.requestCBHash_[C]=p)}get(s){this.initConnection_();const c=new _e.BH,p={p:s._path.toString(),q:s._queryObject};return this.outstandingGets_.push({action:"g",request:p,onComplete:L=>{const Y=L.d;"ok"===L.s?c.resolve(Y):c.reject(Y)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),c.promise}listen(s,c,p,C){this.initConnection_();const D=s._queryIdentifier,L=s._path.toString();this.log_("Listen called for "+L+" "+D),this.listens.has(L)||this.listens.set(L,new Map),(0,_e.hu)(s._queryParams.isDefault()||!s._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,_e.hu)(!this.listens.get(L).has(D),"listen() called twice for same path/queryId.");const Y={onComplete:C,hashFn:c,query:s,tag:p};this.listens.get(L).set(D,Y),this.connected_&&this.sendListen_(Y)}sendGet_(s){const c=this.outstandingGets_[s];this.sendRequest("g",c.request,p=>{delete this.outstandingGets_[s],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),c.onComplete&&c.onComplete(p)})}sendListen_(s){const c=s.query,p=c._path.toString(),C=c._queryIdentifier;this.log_("Listen on "+p+" for "+C);const D={p};s.tag&&(D.q=c._queryObject,D.t=s.tag),D.h=s.hashFn(),this.sendRequest("q",D,Y=>{const ae=Y.d,Ae=Y.s;u.warnOnListenWarnings_(ae,c),(this.listens.get(p)&&this.listens.get(p).get(C))===s&&(this.log_("listen response",Y),"ok"!==Ae&&this.removeListen_(p,C),s.onComplete&&s.onComplete(Ae,ae))})}static warnOnListenWarnings_(s,c){if(s&&"object"==typeof s&&(0,_e.r3)(s,"w")){const p=(0,_e.DV)(s,"w");if(Array.isArray(p)&&~p.indexOf("no_index")){const C='".indexOn": "'+c._queryParams.getIndex().toString()+'"',D=c._path.toString();Dr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${C} at ${D} to your security rules for better performance.`)}}}refreshAuthToken(s){this.authToken_=s,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(s)}reduceReconnectDelayIfAdminCredential_(s){(s&&40===s.length||(0,_e.GJ)(s))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(s){this.appCheckToken_=s,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const s=this.authToken_,c=(0,_e.w9)(s)?"auth":"gauth",p={cred:s};null===this.authOverride_?p.noauth=!0:"object"==typeof this.authOverride_&&(p.authvar=this.authOverride_),this.sendRequest(c,p,C=>{const D=C.s,L=C.d||"error";this.authToken_===s&&("ok"===D?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(D,L))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},s=>{const c=s.s,p=s.d||"error";"ok"===c?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(c,p)})}unlisten(s,c){const p=s._path.toString(),C=s._queryIdentifier;this.log_("Unlisten called for "+p+" "+C),(0,_e.hu)(s._queryParams.isDefault()||!s._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(p,C)&&this.connected_&&this.sendUnlisten_(p,C,s._queryObject,c)}sendUnlisten_(s,c,p,C){this.log_("Unlisten on "+s+" for "+c);const D={p:s};C&&(D.q=p,D.t=C),this.sendRequest("n",D)}onDisconnectPut(s,c,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",s,c,p):this.onDisconnectRequestQueue_.push({pathString:s,action:"o",data:c,onComplete:p})}onDisconnectMerge(s,c,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",s,c,p):this.onDisconnectRequestQueue_.push({pathString:s,action:"om",data:c,onComplete:p})}onDisconnectCancel(s,c){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",s,null,c):this.onDisconnectRequestQueue_.push({pathString:s,action:"oc",data:null,onComplete:c})}sendOnDisconnect_(s,c,p,C){const D={p:c,d:p};this.log_("onDisconnect "+s,D),this.sendRequest(s,D,L=>{C&&setTimeout(()=>{C(L.s,L.d)},Math.floor(0))})}put(s,c,p,C){this.putInternal("p",s,c,p,C)}merge(s,c,p,C){this.putInternal("m",s,c,p,C)}putInternal(s,c,p,C,D){this.initConnection_();const L={p:c,d:p};void 0!==D&&(L.h=D),this.outstandingPuts_.push({action:s,request:L,onComplete:C}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+c)}sendPut_(s){const c=this.outstandingPuts_[s].action,p=this.outstandingPuts_[s].request,C=this.outstandingPuts_[s].onComplete;this.outstandingPuts_[s].queued=this.connected_,this.sendRequest(c,p,D=>{this.log_(c+" response",D),delete this.outstandingPuts_[s],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),C&&C(D.s,D.d)})}reportStats(s){if(this.connected_){const c={c:s};this.log_("reportStats",c),this.sendRequest("s",c,p=>{"ok"!==p.s&&this.log_("reportStats","Error sending stats: "+p.d)})}}onDataMessage_(s){if("r"in s){this.log_("from server: "+(0,_e.Wl)(s));const c=s.r,p=this.requestCBHash_[c];p&&(delete this.requestCBHash_[c],p(s.b))}else{if("error"in s)throw"A server-side error has occurred: "+s.error;"a"in s&&this.onDataPush_(s.a,s.b)}}onDataPush_(s,c){this.log_("handleServerMessage",s,c),"d"===s?this.onDataUpdate_(c.p,c.d,!1,c.t):"m"===s?this.onDataUpdate_(c.p,c.d,!0,c.t):"c"===s?this.onListenRevoked_(c.p,c.q):"ac"===s?this.onAuthRevoked_(c.s,c.d):"apc"===s?this.onAppCheckRevoked_(c.s,c.d):"sd"===s?this.onSecurityDebugPacket_(c):un("Unrecognized action received from server: "+(0,_e.Wl)(s)+"\nAre you using the latest client?")}onReady_(s,c){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(s),this.lastSessionId=c,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(s){(0,_e.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(s))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(s){s&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=V,this.realtime_||this.scheduleConnect_(0)),this.visible_=s}onOnline_(s){s?(this.log_("Browser went online."),this.reconnectDelay_=V,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=V),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const s=(new Date).getTime()-this.lastConnectionAttemptTime_;let c=Math.max(0,this.reconnectDelay_-s);c=Math.random()*c,this.log_("Trying to reconnect in "+c+"ms"),this.scheduleConnect_(c),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var s=this;return(0,Dt.Z)(function*(){if(s.shouldReconnect_()){s.log_("Making a connection attempt"),s.lastConnectionAttemptTime_=(new Date).getTime(),s.lastConnectionEstablishedTime_=null;const c=s.onDataMessage_.bind(s),p=s.onReady_.bind(s),C=s.onRealtimeDisconnect_.bind(s),D=s.id+":"+u.nextConnectionId_++,L=s.lastSessionId;let Y=!1,ae=null;const Ae=function(){ae?ae.close():(Y=!0,C())};s.realtime_={close:Ae,sendRequest:function(kt){(0,_e.hu)(ae,"sendRequest call when we're not connected not allowed."),ae.sendRequest(kt)}};const st=s.forceTokenRefresh_;s.forceTokenRefresh_=!1;try{const[kt,Lt]=yield Promise.all([s.authTokenProvider_.getToken(st),s.appCheckTokenProvider_.getToken(st)]);Y?sn("getToken() completed but was canceled"):(sn("getToken() completed. Creating connection."),s.authToken_=kt&&kt.accessToken,s.appCheckToken_=Lt&&Lt.token,ae=new Ls(D,s.repoInfo_,s.applicationId_,s.appCheckToken_,s.authToken_,c,p,C,Cn=>{Dr(Cn+" ("+s.repoInfo_.toString()+")"),s.interrupt("server_kill")},L))}catch(kt){s.log_("Failed to get token: "+kt),Y||(s.repoInfo_.nodeAdmin&&Dr(kt),Ae())}}})()}interrupt(s){sn("Interrupting connection for reason: "+s),this.interruptReasons_[s]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(s){sn("Resuming connection for reason: "+s),delete this.interruptReasons_[s],(0,_e.xb)(this.interruptReasons_)&&(this.reconnectDelay_=V,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(s){const c=s-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:c})}cancelSentTransactions_(){for(let s=0;s<this.outstandingPuts_.length;s++){const c=this.outstandingPuts_[s];c&&"h"in c.request&&c.queued&&(c.onComplete&&c.onComplete("disconnect"),delete this.outstandingPuts_[s],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(s,c){let p;p=c?c.map(D=>cr(D)).join("$"):"default";const C=this.removeListen_(s,p);C&&C.onComplete&&C.onComplete("permission_denied")}removeListen_(s,c){const p=new fr(s).toString();let C;if(this.listens.has(p)){const D=this.listens.get(p);C=D.get(c),D.delete(c),0===D.size&&this.listens.delete(p)}else C=void 0;return C}onAuthRevoked_(s,c){sn("Auth token revoked: "+s+"/"+c),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===s||"permission_denied"===s)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(s,c){sn("App check token revoked: "+s+"/"+c),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===s||"permission_denied"===s)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(s){this.securityDebugCallback_?this.securityDebugCallback_(s):"msg"in s&&console.log("FIREBASE: "+s.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const s of this.listens.values())for(const c of s.values())this.sendListen_(c);for(let s=0;s<this.outstandingPuts_.length;s++)this.outstandingPuts_[s]&&this.sendPut_(s);for(;this.onDisconnectRequestQueue_.length;){const s=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(s.action,s.pathString,s.data,s.onComplete)}for(let s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}sendConnectStats_(){const s={};let c="js";(0,_e.Yr)()&&(c=this.repoInfo_.nodeAdmin?"admin_node":"node"),s["sdk."+c+"."+qr.replace(/\./g,"-")]=1,(0,_e.uI)()?s["framework.cordova"]=1:(0,_e.b$)()&&(s["framework.reactnative"]=1),this.reportStats(s)}shouldReconnect_(){const s=us.getInstance().currentlyOnline();return(0,_e.xb)(this.interruptReasons_)&&s}}return u.nextPersistentConnectionId_=0,u.nextConnectionId_=0,u})();class Qt{constructor(i,s){this.name=i,this.node=s}static Wrap(i,s){return new Qt(i,s)}}class Jn{getCompare(){return this.compare.bind(this)}indexedValueChanged(i,s){const c=new Qt(dr,i),p=new Qt(dr,s);return 0!==this.compare(c,p)}minPost(){return Qt.MIN}}class Hr extends Jn{static get __EMPTY_NODE(){return Pr}static set __EMPTY_NODE(i){Pr=i}compare(i,s){return En(i.name,s.name)}isDefinedOn(i){throw(0,_e.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(i,s){return!1}minPost(){return Qt.MIN}maxPost(){return new Qt(ar,Pr)}makePost(i,s){return(0,_e.hu)("string"==typeof i,"KeyIndex indexValue must always be a string."),new Qt(i,Pr)}toString(){return".key"}}const rn=new Hr;class Pi{constructor(i,s,c,p,C=null){this.isReverse_=p,this.resultGenerator_=C,this.nodeStack_=[];let D=1;for(;!i.isEmpty();)if(i=i,D=s?c(i.key,s):1,p&&(D*=-1),D<0)i=this.isReverse_?i.left:i.right;else{if(0===D){this.nodeStack_.push(i);break}this.nodeStack_.push(i),i=this.isReverse_?i.right:i.left}}getNext(){if(0===this.nodeStack_.length)return null;let s,i=this.nodeStack_.pop();if(s=this.resultGenerator_?this.resultGenerator_(i.key,i.value):{key:i.key,value:i.value},this.isReverse_)for(i=i.left;!i.isEmpty();)this.nodeStack_.push(i),i=i.right;else for(i=i.right;!i.isEmpty();)this.nodeStack_.push(i),i=i.left;return s}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const i=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(i.key,i.value):{key:i.key,value:i.value}}}let N,Xr=(()=>{class u{constructor(s,c,p,C,D){this.key=s,this.value=c,this.color=null!=p?p:u.RED,this.left=null!=C?C:Vi.EMPTY_NODE,this.right=null!=D?D:Vi.EMPTY_NODE}copy(s,c,p,C,D){return new u(null!=s?s:this.key,null!=c?c:this.value,null!=p?p:this.color,null!=C?C:this.left,null!=D?D:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(s){return this.left.inorderTraversal(s)||!!s(this.key,this.value)||this.right.inorderTraversal(s)}reverseTraversal(s){return this.right.reverseTraversal(s)||s(this.key,this.value)||this.left.reverseTraversal(s)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(s,c,p){let C=this;const D=p(s,C.key);return C=D<0?C.copy(null,null,null,C.left.insert(s,c,p),null):0===D?C.copy(null,c,null,null,null):C.copy(null,null,null,null,C.right.insert(s,c,p)),C.fixUp_()}removeMin_(){if(this.left.isEmpty())return Vi.EMPTY_NODE;let s=this;return!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.removeMin_(),null),s.fixUp_()}remove(s,c){let p,C;if(p=this,c(s,p.key)<0)!p.left.isEmpty()&&!p.left.isRed_()&&!p.left.left.isRed_()&&(p=p.moveRedLeft_()),p=p.copy(null,null,null,p.left.remove(s,c),null);else{if(p.left.isRed_()&&(p=p.rotateRight_()),!p.right.isEmpty()&&!p.right.isRed_()&&!p.right.left.isRed_()&&(p=p.moveRedRight_()),0===c(s,p.key)){if(p.right.isEmpty())return Vi.EMPTY_NODE;C=p.right.min_(),p=p.copy(C.key,C.value,null,null,p.right.removeMin_())}p=p.copy(null,null,null,null,p.right.remove(s,c))}return p.fixUp_()}isRed_(){return this.color}fixUp_(){let s=this;return s.right.isRed_()&&!s.left.isRed_()&&(s=s.rotateLeft_()),s.left.isRed_()&&s.left.left.isRed_()&&(s=s.rotateRight_()),s.left.isRed_()&&s.right.isRed_()&&(s=s.colorFlip_()),s}moveRedLeft_(){let s=this.colorFlip_();return s.right.left.isRed_()&&(s=s.copy(null,null,null,null,s.right.rotateRight_()),s=s.rotateLeft_(),s=s.colorFlip_()),s}moveRedRight_(){let s=this.colorFlip_();return s.left.left.isRed_()&&(s=s.rotateRight_(),s=s.colorFlip_()),s}rotateLeft_(){const s=this.copy(null,null,u.RED,null,this.right.left);return this.right.copy(null,null,this.color,s,null)}rotateRight_(){const s=this.copy(null,null,u.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,s)}colorFlip_(){const s=this.left.copy(null,null,!this.left.color,null,null),c=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,s,c)}checkMaxDepth_(){const s=this.check_();return Math.pow(2,s)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const s=this.left.check_();if(s!==this.right.check_())throw new Error("Black depths differ");return s+(this.isRed_()?0:1)}}return u.RED=!0,u.BLACK=!1,u})();class Vi{constructor(i,s=Vi.EMPTY_NODE){this.comparator_=i,this.root_=s}insert(i,s){return new Vi(this.comparator_,this.root_.insert(i,s,this.comparator_).copy(null,null,Xr.BLACK,null,null))}remove(i){return new Vi(this.comparator_,this.root_.remove(i,this.comparator_).copy(null,null,Xr.BLACK,null,null))}get(i){let s,c=this.root_;for(;!c.isEmpty();){if(s=this.comparator_(i,c.key),0===s)return c.value;s<0?c=c.left:s>0&&(c=c.right)}return null}getPredecessorKey(i){let s,c=this.root_,p=null;for(;!c.isEmpty();){if(s=this.comparator_(i,c.key),0===s){if(c.left.isEmpty())return p?p.key:null;for(c=c.left;!c.right.isEmpty();)c=c.right;return c.key}s<0?c=c.left:s>0&&(p=c,c=c.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(i){return this.root_.inorderTraversal(i)}reverseTraversal(i){return this.root_.reverseTraversal(i)}getIterator(i){return new Pi(this.root_,null,this.comparator_,!1,i)}getIteratorFrom(i,s){return new Pi(this.root_,i,this.comparator_,!1,s)}getReverseIteratorFrom(i,s){return new Pi(this.root_,i,this.comparator_,!0,s)}getReverseIterator(i){return new Pi(this.root_,null,this.comparator_,!0,i)}}function $(u,i){return En(u.name,i.name)}function U(u,i){return En(u,i)}Vi.EMPTY_NODE=new class li{copy(i,s,c,p,C){return this}insert(i,s,c){return new Xr(i,s,null)}remove(i,s){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const rt=function(u){return"number"==typeof u?"number:"+Kt(u):"string:"+u},In=function(u){if(u.isLeafNode()){const i=u.val();(0,_e.hu)("string"==typeof i||"number"==typeof i||"object"==typeof i&&(0,_e.r3)(i,".sv"),"Priority must be a string or number.")}else(0,_e.hu)(u===N||u.isEmpty(),"priority of unexpected type.");(0,_e.hu)(u===N||u.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let sr,gi,Qi,Ti=(()=>{class u{constructor(s,c=u.__childrenNodeConstructor.EMPTY_NODE){this.value_=s,this.priorityNode_=c,this.lazyHash_=null,(0,_e.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),In(this.priorityNode_)}static set __childrenNodeConstructor(s){sr=s}static get __childrenNodeConstructor(){return sr}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(s){return new u(this.value_,s)}getImmediateChild(s){return".priority"===s?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}getChild(s){return G(s)?this:".priority"===lr(s)?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(s,c){return null}updateImmediateChild(s,c){return".priority"===s?this.updatePriority(c):c.isEmpty()&&".priority"!==s?this:u.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(s,c).updatePriority(this.priorityNode_)}updateChild(s,c){const p=lr(s);return null===p?c:c.isEmpty()&&".priority"!==p?this:((0,_e.hu)(".priority"!==p||1===pi(s),".priority must be the last token in a path"),this.updateImmediateChild(p,u.__childrenNodeConstructor.EMPTY_NODE.updateChild(zr(s),c)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(s,c){return!1}val(s){return s&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let s="";this.priorityNode_.isEmpty()||(s+="priority:"+rt(this.priorityNode_.val())+":");const c=typeof this.value_;s+=c+":",s+="number"===c?Kt(this.value_):this.value_,this.lazyHash_=Or(s)}return this.lazyHash_}getValue(){return this.value_}compareTo(s){return s===u.__childrenNodeConstructor.EMPTY_NODE?1:s instanceof u.__childrenNodeConstructor?-1:((0,_e.hu)(s.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(s))}compareToLeafNode_(s){const c=typeof s.value_,p=typeof this.value_,C=u.VALUE_TYPE_ORDER.indexOf(c),D=u.VALUE_TYPE_ORDER.indexOf(p);return(0,_e.hu)(C>=0,"Unknown leaf type: "+c),(0,_e.hu)(D>=0,"Unknown leaf type: "+p),C===D?"object"===p?0:this.value_<s.value_?-1:this.value_===s.value_?0:1:D-C}withIndex(){return this}isIndexed(){return!0}equals(s){if(s===this)return!0;if(s.isLeafNode()){const c=s;return this.value_===c.value_&&this.priorityNode_.equals(c.priorityNode_)}return!1}}return u.VALUE_TYPE_ORDER=["object","boolean","number","string"],u})();const ii=new class da extends Jn{compare(i,s){const c=i.node.getPriority(),p=s.node.getPriority(),C=c.compareTo(p);return 0===C?En(i.name,s.name):C}isDefinedOn(i){return!i.getPriority().isEmpty()}indexedValueChanged(i,s){return!i.getPriority().equals(s.getPriority())}minPost(){return Qt.MIN}maxPost(){return new Qt(ar,new Ti("[PRIORITY-POST]",Qi))}makePost(i,s){const c=gi(i);return new Qt(s,new Ti("[PRIORITY-POST]",c))}toString(){return".priority"}},Ko=Math.log(2);class Yo{constructor(i){this.count=parseInt(Math.log(i+1)/Ko,10),this.current_=this.count-1;const p=(C=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=i+1&p}nextBitIsOne(){const i=!(this.bits_&1<<this.current_);return this.current_--,i}}const ts=function(u,i,s,c){u.sort(i);const p=function(Y,ae){const Ae=ae-Y;let He,st;if(0===Ae)return null;if(1===Ae)return He=u[Y],st=s?s(He):He,new Xr(st,He.node,Xr.BLACK,null,null);{const kt=parseInt(Ae/2,10)+Y,Lt=p(Y,kt),Cn=p(kt+1,ae);return He=u[kt],st=s?s(He):He,new Xr(st,He.node,Xr.BLACK,Lt,Cn)}},L=function(Y){let ae=null,Ae=null,He=u.length;const st=function(Lt,Cn){const ur=He-Lt,Ei=He;He-=Lt;const Ji=p(ur+1,Ei),hs=u[ur],Es=s?s(hs):hs;kt(new Xr(Es,hs.node,Cn,null,Ji))},kt=function(Lt){ae?(ae.left=Lt,ae=Lt):(Ae=Lt,ae=Lt)};for(let Lt=0;Lt<Y.count;++Lt){const Cn=Y.nextBitIsOne(),ur=Math.pow(2,Y.count-(Lt+1));Cn?st(ur,Xr.BLACK):(st(ur,Xr.BLACK),st(ur,Xr.RED))}return Ae}(new Yo(u.length));return new Vi(c||i,L)};let bs;const ha={};class cs{constructor(i,s){this.indexes_=i,this.indexSet_=s}static get Default(){return(0,_e.hu)(ha&&ii,"ChildrenNode.ts has not been loaded"),bs=bs||new cs({".priority":ha},{".priority":ii}),bs}get(i){const s=(0,_e.DV)(this.indexes_,i);if(!s)throw new Error("No index defined for "+i);return s instanceof Vi?s:null}hasIndex(i){return(0,_e.r3)(this.indexSet_,i.toString())}addIndex(i,s){(0,_e.hu)(i!==rn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const c=[];let p=!1;const C=s.getIterator(Qt.Wrap);let L,D=C.getNext();for(;D;)p=p||i.isDefinedOn(D.node),c.push(D),D=C.getNext();L=p?ts(c,i.getCompare()):ha;const Y=i.toString(),ae=Object.assign({},this.indexSet_);ae[Y]=i;const Ae=Object.assign({},this.indexes_);return Ae[Y]=L,new cs(Ae,ae)}addToIndexes(i,s){const c=(0,_e.UI)(this.indexes_,(p,C)=>{const D=(0,_e.DV)(this.indexSet_,C);if((0,_e.hu)(D,"Missing index implementation for "+C),p===ha){if(D.isDefinedOn(i.node)){const L=[],Y=s.getIterator(Qt.Wrap);let ae=Y.getNext();for(;ae;)ae.name!==i.name&&L.push(ae),ae=Y.getNext();return L.push(i),ts(L,D.getCompare())}return ha}{const L=s.get(i.name);let Y=p;return L&&(Y=Y.remove(new Qt(i.name,L))),Y.insert(i,i.node)}});return new cs(c,this.indexSet_)}removeFromIndexes(i,s){const c=(0,_e.UI)(this.indexes_,p=>{if(p===ha)return p;{const C=s.get(i.name);return C?p.remove(new Qt(i.name,C)):p}});return new cs(c,this.indexSet_)}}let Is,pr=(()=>{class u{constructor(s,c,p){this.children_=s,this.priorityNode_=c,this.indexMap_=p,this.lazyHash_=null,this.priorityNode_&&In(this.priorityNode_),this.children_.isEmpty()&&(0,_e.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Is||(Is=new u(new Vi(U),null,cs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Is}updatePriority(s){return this.children_.isEmpty()?this:new u(this.children_,s,this.indexMap_)}getImmediateChild(s){if(".priority"===s)return this.getPriority();{const c=this.children_.get(s);return null===c?Is:c}}getChild(s){const c=lr(s);return null===c?this:this.getImmediateChild(c).getChild(zr(s))}hasChild(s){return null!==this.children_.get(s)}updateImmediateChild(s,c){if((0,_e.hu)(c,"We should always be passing snapshot nodes"),".priority"===s)return this.updatePriority(c);{const p=new Qt(s,c);let C,D;c.isEmpty()?(C=this.children_.remove(s),D=this.indexMap_.removeFromIndexes(p,this.children_)):(C=this.children_.insert(s,c),D=this.indexMap_.addToIndexes(p,this.children_));const L=C.isEmpty()?Is:this.priorityNode_;return new u(C,L,D)}}updateChild(s,c){const p=lr(s);if(null===p)return c;{(0,_e.hu)(".priority"!==lr(s)||1===pi(s),".priority must be the last token in a path");const C=this.getImmediateChild(p).updateChild(zr(s),c);return this.updateImmediateChild(p,C)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(s){if(this.isEmpty())return null;const c={};let p=0,C=0,D=!0;if(this.forEachChild(ii,(L,Y)=>{c[L]=Y.val(s),p++,D&&u.INTEGER_REGEXP_.test(L)?C=Math.max(C,Number(L)):D=!1}),!s&&D&&C<2*p){const L=[];for(const Y in c)L[Y]=c[Y];return L}return s&&!this.getPriority().isEmpty()&&(c[".priority"]=this.getPriority().val()),c}hash(){if(null===this.lazyHash_){let s="";this.getPriority().isEmpty()||(s+="priority:"+rt(this.getPriority().val())+":"),this.forEachChild(ii,(c,p)=>{const C=p.hash();""!==C&&(s+=":"+c+":"+C)}),this.lazyHash_=""===s?"":Or(s)}return this.lazyHash_}getPredecessorChildName(s,c,p){const C=this.resolveIndex_(p);if(C){const D=C.getPredecessorKey(new Qt(s,c));return D?D.name:null}return this.children_.getPredecessorKey(s)}getFirstChildName(s){const c=this.resolveIndex_(s);if(c){const p=c.minKey();return p&&p.name}return this.children_.minKey()}getFirstChild(s){const c=this.getFirstChildName(s);return c?new Qt(c,this.children_.get(c)):null}getLastChildName(s){const c=this.resolveIndex_(s);if(c){const p=c.maxKey();return p&&p.name}return this.children_.maxKey()}getLastChild(s){const c=this.getLastChildName(s);return c?new Qt(c,this.children_.get(c)):null}forEachChild(s,c){const p=this.resolveIndex_(s);return p?p.inorderTraversal(C=>c(C.name,C.node)):this.children_.inorderTraversal(c)}getIterator(s){return this.getIteratorFrom(s.minPost(),s)}getIteratorFrom(s,c){const p=this.resolveIndex_(c);if(p)return p.getIteratorFrom(s,C=>C);{const C=this.children_.getIteratorFrom(s.name,Qt.Wrap);let D=C.peek();for(;null!=D&&c.compare(D,s)<0;)C.getNext(),D=C.peek();return C}}getReverseIterator(s){return this.getReverseIteratorFrom(s.maxPost(),s)}getReverseIteratorFrom(s,c){const p=this.resolveIndex_(c);if(p)return p.getReverseIteratorFrom(s,C=>C);{const C=this.children_.getReverseIteratorFrom(s.name,Qt.Wrap);let D=C.peek();for(;null!=D&&c.compare(D,s)>0;)C.getNext(),D=C.peek();return C}}compareTo(s){return this.isEmpty()?s.isEmpty()?0:-1:s.isLeafNode()||s.isEmpty()?1:s===Fo?-1:0}withIndex(s){if(s===rn||this.indexMap_.hasIndex(s))return this;{const c=this.indexMap_.addIndex(s,this.children_);return new u(this.children_,this.priorityNode_,c)}}isIndexed(s){return s===rn||this.indexMap_.hasIndex(s)}equals(s){if(s===this)return!0;if(s.isLeafNode())return!1;{const c=s;if(this.getPriority().equals(c.getPriority())){if(this.children_.count()===c.children_.count()){const p=this.getIterator(ii),C=c.getIterator(ii);let D=p.getNext(),L=C.getNext();for(;D&&L;){if(D.name!==L.name||!D.node.equals(L.node))return!1;D=p.getNext(),L=C.getNext()}return null===D&&null===L}return!1}return!1}}resolveIndex_(s){return s===rn?null:this.indexMap_.get(s.toString())}}return u.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,u})();const Fo=new class yl extends pr{constructor(){super(new Vi(U),pr.EMPTY_NODE,cs.Default)}compareTo(i){return i===this?0:1}equals(i){return i===this}getPriority(){return this}getImmediateChild(i){return pr.EMPTY_NODE}isEmpty(){return!1}};function _i(u,i=null){if(null===u)return pr.EMPTY_NODE;if("object"==typeof u&&".priority"in u&&(i=u[".priority"]),(0,_e.hu)(null===i||"string"==typeof i||"number"==typeof i||"object"==typeof i&&".sv"in i,"Invalid priority type found: "+typeof i),"object"==typeof u&&".value"in u&&null!==u[".value"]&&(u=u[".value"]),"object"!=typeof u||".sv"in u)return new Ti(u,_i(i));if(u instanceof Array){let s=pr.EMPTY_NODE;return dt(u,(c,p)=>{if((0,_e.r3)(u,c)&&"."!==c.substring(0,1)){const C=_i(p);(C.isLeafNode()||!C.isEmpty())&&(s=s.updateImmediateChild(c,C))}}),s.updatePriority(_i(i))}{const s=[];let c=!1;if(dt(u,(D,L)=>{if("."!==D.substring(0,1)){const Y=_i(L);Y.isEmpty()||(c=c||!Y.getPriority().isEmpty(),s.push(new Qt(D,Y)))}}),0===s.length)return pr.EMPTY_NODE;const C=ts(s,$,D=>D.name,U);if(c){const D=ts(s,ii.getCompare());return new pr(C,_i(i),new cs({".priority":D},{".priority":ii}))}return new pr(C,_i(i),cs.Default)}}Object.defineProperties(Qt,{MIN:{value:new Qt(dr,pr.EMPTY_NODE)},MAX:{value:new Qt(ar,Fo)}}),Hr.__EMPTY_NODE=pr.EMPTY_NODE,Ti.__childrenNodeConstructor=pr,function q(u){N=u}(Fo),function Io(u){Qi=u}(Fo),function Ms(u){gi=u}(_i);class Js extends Jn{constructor(i){super(),this.indexPath_=i,(0,_e.hu)(!G(i)&&".priority"!==lr(i),"Can't create PathIndex with empty path or .priority key")}extractChild(i){return i.getChild(this.indexPath_)}isDefinedOn(i){return!i.getChild(this.indexPath_).isEmpty()}compare(i,s){const c=this.extractChild(i.node),p=this.extractChild(s.node),C=c.compareTo(p);return 0===C?En(i.name,s.name):C}makePost(i,s){const c=_i(i),p=pr.EMPTY_NODE.updateChild(this.indexPath_,c);return new Qt(s,p)}maxPost(){const i=pr.EMPTY_NODE.updateChild(this.indexPath_,Fo);return new Qt(ar,i)}toString(){return ko(this.indexPath_,0).join("/")}}const Lo=new class Gl extends Jn{compare(i,s){const c=i.node.compareTo(s.node);return 0===c?En(i.name,s.name):c}isDefinedOn(i){return!0}indexedValueChanged(i,s){return!i.equals(s)}minPost(){return Qt.MIN}maxPost(){return Qt.MAX}makePost(i,s){const c=_i(i);return new Qt(s,c)}toString(){return".value"}};function ns(u,i,s){return{type:"child_changed",snapshotNode:i,childName:u,oldSnap:s}}class La{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ii}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,_e.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,_e.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:dr}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,_e.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,_e.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ar}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,_e.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ii}copy(){const i=new La;return i.limitSet_=this.limitSet_,i.limit_=this.limit_,i.startSet_=this.startSet_,i.indexStartValue_=this.indexStartValue_,i.startNameSet_=this.startNameSet_,i.indexStartName_=this.indexStartName_,i.endSet_=this.endSet_,i.indexEndValue_=this.indexEndValue_,i.endNameSet_=this.endNameSet_,i.indexEndName_=this.indexEndName_,i.index_=this.index_,i.viewFrom_=this.viewFrom_,i}}function Us(u){const i={};if(u.isDefault())return i;let s;return u.index_===ii?s="$priority":u.index_===Lo?s="$value":u.index_===rn?s="$key":((0,_e.hu)(u.index_ instanceof Js,"Unrecognized index type!"),s=u.index_.toString()),i.orderBy=(0,_e.Wl)(s),u.startSet_&&(i.startAt=(0,_e.Wl)(u.indexStartValue_),u.startNameSet_&&(i.startAt+=","+(0,_e.Wl)(u.indexStartName_))),u.endSet_&&(i.endAt=(0,_e.Wl)(u.indexEndValue_),u.endNameSet_&&(i.endAt+=","+(0,_e.Wl)(u.indexEndName_))),u.limitSet_&&(u.isViewFromLeft()?i.limitToFirst=u.limit_:i.limitToLast=u.limit_),i}function $t(u){const i={};if(u.startSet_&&(i.sp=u.indexStartValue_,u.startNameSet_&&(i.sn=u.indexStartName_)),u.endSet_&&(i.ep=u.indexEndValue_,u.endNameSet_&&(i.en=u.indexEndName_)),u.limitSet_){i.l=u.limit_;let s=u.viewFrom_;""===s&&(s=u.isViewFromLeft()?"l":"r"),i.vf=s}return u.index_!==ii&&(i.i=u.index_.toString()),i}class gr extends ps{constructor(i,s,c,p){super(),this.repoInfo_=i,this.onDataUpdate_=s,this.authTokenProvider_=c,this.appCheckTokenProvider_=p,this.log_=Vn("p:rest:"),this.listens_={}}reportStats(i){throw new Error("Method not implemented.")}static getListenId_(i,s){return void 0!==s?"tag$"+s:((0,_e.hu)(i._queryParams.isDefault(),"should have a tag if it's not a default query."),i._path.toString())}listen(i,s,c,p){const C=i._path.toString();this.log_("Listen called for "+C+" "+i._queryIdentifier);const D=gr.getListenId_(i,c),L={};this.listens_[D]=L;const Y=Us(i._queryParams);this.restRequest_(C+".json",Y,(ae,Ae)=>{let He=Ae;if(404===ae&&(He=null,ae=null),null===ae&&this.onDataUpdate_(C,He,!1,c),(0,_e.DV)(this.listens_,D)===L){let st;st=ae?401===ae?"permission_denied":"rest_error:"+ae:"ok",p(st,null)}})}unlisten(i,s){const c=gr.getListenId_(i,s);delete this.listens_[c]}get(i){const s=Us(i._queryParams),c=i._path.toString(),p=new _e.BH;return this.restRequest_(c+".json",s,(C,D)=>{let L=D;404===C&&(L=null,C=null),null===C?(this.onDataUpdate_(c,L,!1,null),p.resolve(L)):p.reject(new Error(L))}),p.promise}refreshAuthToken(i){}restRequest_(i,s={},c){return s.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([p,C])=>{p&&p.accessToken&&(s.auth=p.accessToken),C&&C.token&&(s.ac=C.token);const D=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+i+"?ns="+this.repoInfo_.namespace+(0,_e.xO)(s);this.log_("Sending REST request for "+D);const L=new XMLHttpRequest;L.onreadystatechange=()=>{if(c&&4===L.readyState){this.log_("REST Response for "+D+" received. status:",L.status,"response:",L.responseText);let Y=null;if(L.status>=200&&L.status<300){try{Y=(0,_e.cI)(L.responseText)}catch(ae){Dr("Failed to parse JSON response for "+D+": "+L.responseText)}c(null,Y)}else 401!==L.status&&404!==L.status&&Dr("Got unsuccessful REST response for "+D+" Status: "+L.status),c(L.status);c=null}},L.open("GET",D,!0),L.send()})}}class eo{constructor(){this.rootNode_=pr.EMPTY_NODE}getNode(i){return this.rootNode_.getChild(i)}updateSnapshot(i,s){this.rootNode_=this.rootNode_.updateChild(i,s)}}function Jo(){return{value:null,children:new Map}}function pn(u,i,s){if(G(i))u.value=s,u.children.clear();else if(null!==u.value)u.value=u.value.updateChild(i,s);else{const c=lr(i);u.children.has(c)||u.children.set(c,Jo()),pn(u.children.get(c),i=zr(i),s)}}function Ua(u,i,s){null!==u.value?s(i,u.value):function mn(u,i){u.children.forEach((s,c)=>{i(c,s)})}(u,(c,p)=>{Ua(p,new fr(i.toString()+"/"+c),s)})}class mt{constructor(i){this.collection_=i,this.last_=null}get(){const i=this.collection_.get(),s=Object.assign({},i);return this.last_&&dt(this.last_,(c,p)=>{s[c]=s[c]-p}),this.last_=i,s}}class ju{constructor(i,s){this.server_=s,this.statsToReport_={},this.statsListener_=new mt(i);const c=1e4+2e4*Math.random();ee(this.reportStats_.bind(this),Math.floor(c))}reportStats_(){const i=this.statsListener_.get(),s={};let c=!1;dt(i,(p,C)=>{C>0&&(0,_e.r3)(this.statsToReport_,p)&&(s[p]=C,c=!0)}),c&&this.server_.reportStats(s),ee(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var si=(()=>{return(u=si||(si={}))[u.OVERWRITE=0]="OVERWRITE",u[u.MERGE=1]="MERGE",u[u.ACK_USER_WRITE=2]="ACK_USER_WRITE",u[u.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",si;var u})();function ya(u){return{fromUser:!1,fromServer:!0,queryId:u,tagged:!0}}class tl{constructor(i,s,c){this.path=i,this.affectedTree=s,this.revert=c,this.type=si.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(i){if(G(this.path)){if(null!=this.affectedTree.value)return(0,_e.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const s=this.affectedTree.subtree(new fr(i));return new tl(or(),s,this.revert)}}return(0,_e.hu)(lr(this.path)===i,"operationForChild called for unrelated child."),new tl(zr(this.path),this.affectedTree,this.revert)}}class Va{constructor(i,s,c){this.source=i,this.path=s,this.snap=c,this.type=si.OVERWRITE}operationForChild(i){return G(this.path)?new Va(this.source,or(),this.snap.getImmediateChild(i)):new Va(this.source,zr(this.path),this.snap)}}class Bo{constructor(i,s,c){this.source=i,this.path=s,this.children=c,this.type=si.MERGE}operationForChild(i){if(G(this.path)){const s=this.children.subtree(new fr(i));return s.isEmpty()?null:s.value?new Va(this.source,or(),s.value):new Bo(this.source,or(),s)}return(0,_e.hu)(lr(this.path)===i,"Can't get a merge for a child not on the path of the operation"),new Bo(this.source,zr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class va{constructor(i,s,c){this.node_=i,this.fullyInitialized_=s,this.filtered_=c}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(i){if(G(i))return this.isFullyInitialized()&&!this.filtered_;const s=lr(i);return this.isCompleteForChild(s)}isCompleteForChild(i){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(i)}getNode(){return this.node_}}function Gs(u,i,s,c,p,C){const D=c.filter(L=>L.type===s);D.sort((L,Y)=>function nr(u,i,s){if(null==i.childName||null==s.childName)throw(0,_e.g5)("Should only compare child_ events.");const c=new Qt(i.childName,i.snapshotNode),p=new Qt(s.childName,s.snapshotNode);return u.index_.compare(c,p)}(u,L,Y)),D.forEach(L=>{const Y=function vi(u,i,s){return"value"===i.type||"child_removed"===i.type||(i.prevName=s.getPredecessorChildName(i.childName,i.snapshotNode,u.index_)),i}(u,L,C);p.forEach(ae=>{ae.respondsTo(L.type)&&i.push(ae.createEvent(Y,u.query_))})})}function $o(u,i){return{eventCache:u,serverCache:i}}function Tr(u,i,s,c){return $o(new va(i,s,c),u.serverCache)}function wl(u,i,s,c){return $o(u.eventCache,new va(i,s,c))}function hi(u){return u.eventCache.isFullyInitialized()?u.eventCache.getNode():null}function x(u){return u.serverCache.isFullyInitialized()?u.serverCache.getNode():null}let A;class k{constructor(i,s=(()=>(A||(A=new Vi(hr)),A))()){this.value=i,this.children=s}static fromObject(i){let s=new k(null);return dt(i,(c,p)=>{s=s.set(new fr(c),p)}),s}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(i,s){if(null!=this.value&&s(this.value))return{path:or(),value:this.value};if(G(i))return null;{const c=lr(i),p=this.children.get(c);if(null!==p){const C=p.findRootMostMatchingPathAndValue(zr(i),s);return null!=C?{path:X(new fr(c),C.path),value:C.value}:null}return null}}findRootMostValueAndPath(i){return this.findRootMostMatchingPathAndValue(i,()=>!0)}subtree(i){if(G(i))return this;{const s=lr(i),c=this.children.get(s);return null!==c?c.subtree(zr(i)):new k(null)}}set(i,s){if(G(i))return new k(s,this.children);{const c=lr(i),C=(this.children.get(c)||new k(null)).set(zr(i),s),D=this.children.insert(c,C);return new k(this.value,D)}}remove(i){if(G(i))return this.children.isEmpty()?new k(null):new k(null,this.children);{const s=lr(i),c=this.children.get(s);if(c){const p=c.remove(zr(i));let C;return C=p.isEmpty()?this.children.remove(s):this.children.insert(s,p),null===this.value&&C.isEmpty()?new k(null):new k(this.value,C)}return this}}get(i){if(G(i))return this.value;{const s=lr(i),c=this.children.get(s);return c?c.get(zr(i)):null}}setTree(i,s){if(G(i))return s;{const c=lr(i),C=(this.children.get(c)||new k(null)).setTree(zr(i),s);let D;return D=C.isEmpty()?this.children.remove(c):this.children.insert(c,C),new k(this.value,D)}}fold(i){return this.fold_(or(),i)}fold_(i,s){const c={};return this.children.inorderTraversal((p,C)=>{c[p]=C.fold_(X(i,p),s)}),s(i,this.value,c)}findOnPath(i,s){return this.findOnPath_(i,or(),s)}findOnPath_(i,s,c){const p=!!this.value&&c(s,this.value);if(p)return p;if(G(i))return null;{const C=lr(i),D=this.children.get(C);return D?D.findOnPath_(zr(i),X(s,C),c):null}}foreachOnPath(i,s){return this.foreachOnPath_(i,or(),s)}foreachOnPath_(i,s,c){if(G(i))return this;{this.value&&c(s,this.value);const p=lr(i),C=this.children.get(p);return C?C.foreachOnPath_(zr(i),X(s,p),c):new k(null)}}foreach(i){this.foreach_(or(),i)}foreach_(i,s){this.children.inorderTraversal((c,p)=>{p.foreach_(X(i,c),s)}),this.value&&s(i,this.value)}foreachChild(i){this.children.inorderTraversal((s,c)=>{c.value&&i(s,c.value)})}}class W{constructor(i){this.writeTree_=i}static empty(){return new W(new k(null))}}function oe(u,i,s){if(G(i))return new W(new k(s));{const c=u.writeTree_.findRootMostValueAndPath(i);if(null!=c){const p=c.path;let C=c.value;const D=pe(p,i);return C=C.updateChild(D,s),new W(u.writeTree_.set(p,C))}{const p=new k(s),C=u.writeTree_.setTree(i,p);return new W(C)}}}function Ee(u,i,s){let c=u;return dt(s,(p,C)=>{c=oe(c,X(i,p),C)}),c}function Ne(u,i){if(G(i))return W.empty();{const s=u.writeTree_.setTree(i,new k(null));return new W(s)}}function Et(u,i){return null!=bn(u,i)}function bn(u,i){const s=u.writeTree_.findRootMostValueAndPath(i);return null!=s?u.writeTree_.get(s.path).getChild(pe(s.path,i)):null}function rr(u){const i=[],s=u.writeTree_.value;return null!=s?s.isLeafNode()||s.forEachChild(ii,(c,p)=>{i.push(new Qt(c,p))}):u.writeTree_.children.inorderTraversal((c,p)=>{null!=p.value&&i.push(new Qt(c,p.value))}),i}function Fn(u,i){if(G(i))return u;{const s=bn(u,i);return new W(null!=s?new k(s):u.writeTree_.subtree(i))}}function Vr(u){return u.writeTree_.isEmpty()}function Br(u,i){return Ts(or(),u.writeTree_,i)}function Ts(u,i,s){if(null!=i.value)return s.updateChild(u,i.value);{let c=null;return i.children.inorderTraversal((p,C)=>{".priority"===p?((0,_e.hu)(null!==C.value,"Priority writes must always be leaf nodes"),c=C.value):s=Ts(X(u,p),C,s)}),!s.getChild(u).isEmpty()&&null!==c&&(s=s.updateChild(X(u,".priority"),c)),s}}function ei(u,i){return qs(i,u)}function to(u,i){if(u.snap)return vt(u.path,i);for(const s in u.children)if(u.children.hasOwnProperty(s)&&vt(X(u.path,s),i))return!0;return!1}function Ba(u){return u.visible}function Ea(u,i,s){let c=W.empty();for(let p=0;p<u.length;++p){const C=u[p];if(i(C)){const D=C.path;let L;if(C.snap)vt(s,D)?(L=pe(s,D),c=oe(c,L,C.snap)):vt(D,s)&&(L=pe(D,s),c=oe(c,or(),C.snap.getChild(L)));else{if(!C.children)throw(0,_e.g5)("WriteRecord should have .snap or .children");if(vt(s,D))L=pe(s,D),c=Ee(c,L,C.children);else if(vt(D,s))if(L=pe(D,s),G(L))c=Ee(c,or(),C.children);else{const Y=(0,_e.DV)(C.children,lr(L));if(Y){const ae=Y.getChild(zr(L));c=oe(c,or(),ae)}}}}}return c}function ji(u,i,s,c,p){if(c||p){const C=Fn(u.visibleWrites,i);return!p&&Vr(C)?s:p||null!=s||Et(C,or())?Br(Ea(u.allWrites,function(ae){return(ae.visible||p)&&(!c||!~c.indexOf(ae.writeId))&&(vt(ae.path,i)||vt(i,ae.path))},i),s||pr.EMPTY_NODE):null}{const C=bn(u.visibleWrites,i);if(null!=C)return C;{const D=Fn(u.visibleWrites,i);return Vr(D)?s:null!=s||Et(D,or())?Br(D,s||pr.EMPTY_NODE):null}}}function _u(u,i,s,c){return ji(u.writeTree,u.treePath,i,s,c)}function Ni(u,i){return function $u(u,i,s){let c=pr.EMPTY_NODE;const p=bn(u.visibleWrites,i);if(p)return p.isLeafNode()||p.forEachChild(ii,(C,D)=>{c=c.updateImmediateChild(C,D)}),c;if(s){const C=Fn(u.visibleWrites,i);return s.forEachChild(ii,(D,L)=>{const Y=Br(Fn(C,new fr(D)),L);c=c.updateImmediateChild(D,Y)}),rr(C).forEach(D=>{c=c.updateImmediateChild(D.name,D.node)}),c}return rr(Fn(u.visibleWrites,i)).forEach(D=>{c=c.updateImmediateChild(D.name,D.node)}),c}(u.writeTree,u.treePath,i)}function yu(u,i,s,c){return function Hu(u,i,s,c,p){(0,_e.hu)(c||p,"Either existingEventSnap or existingServerSnap must exist");const C=X(i,s);if(Et(u.visibleWrites,C))return null;{const D=Fn(u.visibleWrites,C);return Vr(D)?p.getChild(s):Br(D,p.getChild(s))}}(u.writeTree,u.treePath,i,s,c)}function Yr(u,i){return function To(u,i){return bn(u.visibleWrites,i)}(u.writeTree,X(u.treePath,i))}function nl(u,i,s){return function sd(u,i,s,c){const p=X(i,s),C=bn(u.visibleWrites,p);return null!=C?C:c.isCompleteForChild(s)?Br(Fn(u.visibleWrites,p),c.getNode().getImmediateChild(s)):null}(u.writeTree,u.treePath,i,s)}function Wu(u,i){return qs(X(u.treePath,i),u.writeTree)}function qs(u,i){return{treePath:u,writeTree:i}}class Do{constructor(){this.changeMap=new Map}trackChildChange(i){const s=i.type,c=i.childName;(0,_e.hu)("child_added"===s||"child_changed"===s||"child_removed"===s,"Only child changes supported for tracking"),(0,_e.hu)(".priority"!==c,"Only non-priority child changes can be tracked.");const p=this.changeMap.get(c);if(p){const C=p.type;if("child_added"===s&&"child_removed"===C)this.changeMap.set(c,ns(c,i.snapshotNode,p.snapshotNode));else if("child_removed"===s&&"child_added"===C)this.changeMap.delete(c);else if("child_removed"===s&&"child_changed"===C)this.changeMap.set(c,function ho(u,i){return{type:"child_removed",snapshotNode:i,childName:u}}(c,p.oldSnap));else if("child_changed"===s&&"child_added"===C)this.changeMap.set(c,function ka(u,i){return{type:"child_added",snapshotNode:i,childName:u}}(c,i.snapshotNode));else{if("child_changed"!==s||"child_changed"!==C)throw(0,_e.g5)("Illegal combination of changes: "+i+" occurred after "+p);this.changeMap.set(c,ns(c,i.snapshotNode,p.oldSnap))}}else this.changeMap.set(c,i)}getChanges(){return Array.from(this.changeMap.values())}}const bc=new class Di{getCompleteChild(i){return null}getChildAfterChild(i,s,c){return null}};class no{constructor(i,s,c=null){this.writes_=i,this.viewCache_=s,this.optCompleteServerCache_=c}getCompleteChild(i){const s=this.viewCache_.eventCache;if(s.isCompleteForChild(i))return s.getNode().getImmediateChild(i);{const c=null!=this.optCompleteServerCache_?new va(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return nl(this.writes_,i,c)}}getChildAfterChild(i,s,c){const p=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:x(this.viewCache_),C=function Ci(u,i,s,c,p,C){return function Cc(u,i,s,c,p,C,D){let L;const Y=Fn(u.visibleWrites,i),ae=bn(Y,or());if(null!=ae)L=ae;else{if(null==s)return[];L=Br(Y,s)}if(L=L.withIndex(D),L.isEmpty()||L.isLeafNode())return[];{const Ae=[],He=D.getCompare(),st=C?L.getReverseIteratorFrom(c,D):L.getIteratorFrom(c,D);let kt=st.getNext();for(;kt&&Ae.length<p;)0!==He(kt,c)&&Ae.push(kt),kt=st.getNext();return Ae}}(u.writeTree,u.treePath,i,s,c,p,C)}(this.writes_,p,s,1,c,i);return 0===C.length?null:C[0]}}function vu(u,i,s,c,p,C){const D=i.eventCache;if(null!=Yr(c,s))return i;{let L,Y;if(G(s))if((0,_e.hu)(i.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),i.serverCache.isFiltered()){const ae=x(i),He=Ni(c,ae instanceof pr?ae:pr.EMPTY_NODE);L=u.filter.updateFullNode(i.eventCache.getNode(),He,C)}else{const ae=_u(c,x(i));L=u.filter.updateFullNode(i.eventCache.getNode(),ae,C)}else{const ae=lr(s);if(".priority"===ae){(0,_e.hu)(1===pi(s),"Can't have a priority with additional path components");const Ae=D.getNode();Y=i.serverCache.getNode();const He=yu(c,s,Ae,Y);L=null!=He?u.filter.updatePriority(Ae,He):D.getNode()}else{const Ae=zr(s);let He;if(D.isCompleteForChild(ae)){Y=i.serverCache.getNode();const st=yu(c,s,D.getNode(),Y);He=null!=st?D.getNode().getImmediateChild(ae).updateChild(Ae,st):D.getNode().getImmediateChild(ae)}else He=nl(c,ae,i.serverCache);L=null!=He?u.filter.updateChild(D.getNode(),ae,He,Ae,p,C):D.getNode()}}return Tr(i,L,D.isFullyInitialized()||G(s),u.filter.filtersNodes())}}function Cl(u,i,s,c,p,C,D,L){const Y=i.serverCache;let ae;const Ae=D?u.filter:u.filter.getIndexedFilter();if(G(s))ae=Ae.updateFullNode(Y.getNode(),c,null);else if(Ae.filtersNodes()&&!Y.isFiltered()){const kt=Y.getNode().updateChild(s,c);ae=Ae.updateFullNode(Y.getNode(),kt,null)}else{const kt=lr(s);if(!Y.isCompleteForPath(s)&&pi(s)>1)return i;const Lt=zr(s),ur=Y.getNode().getImmediateChild(kt).updateChild(Lt,c);ae=".priority"===kt?Ae.updatePriority(Y.getNode(),ur):Ae.updateChild(Y.getNode(),kt,ur,Lt,bc,null)}const He=wl(i,ae,Y.isFullyInitialized()||G(s),Ae.filtersNodes());return vu(u,He,s,p,new no(p,He,C),L)}function ea(u,i,s,c,p,C,D){const L=i.eventCache;let Y,ae;const Ae=new no(p,i,C);if(G(s))ae=u.filter.updateFullNode(i.eventCache.getNode(),c,D),Y=Tr(i,ae,!0,u.filter.filtersNodes());else{const He=lr(s);if(".priority"===He)ae=u.filter.updatePriority(i.eventCache.getNode(),c),Y=Tr(i,ae,L.isFullyInitialized(),L.isFiltered());else{const st=zr(s),kt=L.getNode().getImmediateChild(He);let Lt;if(G(st))Lt=c;else{const Cn=Ae.getCompleteChild(He);Lt=null!=Cn?".priority"===Hs(st)&&Cn.getChild(ai(st)).isEmpty()?Cn:Cn.updateChild(st,c):pr.EMPTY_NODE}Y=kt.equals(Lt)?i:Tr(i,u.filter.updateChild(L.getNode(),He,Lt,st,Ae,D),L.isFullyInitialized(),u.filter.filtersNodes())}}return Y}function gs(u,i){return u.eventCache.isCompleteForChild(i)}function wa(u,i,s){return s.foreach((c,p)=>{i=i.updateChild(c,p)}),i}function ta(u,i,s,c,p,C,D,L){if(i.serverCache.getNode().isEmpty()&&!i.serverCache.isFullyInitialized())return i;let ae,Y=i;ae=G(s)?c:new k(null).setTree(s,c);const Ae=i.serverCache.getNode();return ae.children.inorderTraversal((He,st)=>{if(Ae.hasChild(He)){const Lt=wa(0,i.serverCache.getNode().getImmediateChild(He),st);Y=Cl(u,Y,new fr(He),Lt,p,C,D,L)}}),ae.children.inorderTraversal((He,st)=>{const kt=!i.serverCache.isCompleteForChild(He)&&null===st.value;if(!Ae.hasChild(He)&&!kt){const Cn=wa(0,i.serverCache.getNode().getImmediateChild(He),st);Y=Cl(u,Y,new fr(He),Cn,p,C,D,L)}}),Y}function zl(u,i){const s=x(u.viewCache_);return s&&(u.query._queryParams.loadsAllData()||!G(i)&&!s.getImmediateChild(lr(i)).isEmpty())?s.getChild(i):null}function Wo(u,i,s,c){i.type===si.MERGE&&null!==i.source.queryId&&((0,_e.hu)(x(u.viewCache_),"We should always have a full cache before handling merges"),(0,_e.hu)(hi(u.viewCache_),"Missing event cache, even though we have a server cache"));const p=u.viewCache_,C=function Gu(u,i,s,c,p){const C=new Do;let D,L;if(s.type===si.OVERWRITE){const ae=s;ae.source.fromUser?D=ea(u,i,ae.path,ae.snap,c,p,C):((0,_e.hu)(ae.source.fromServer,"Unknown source."),L=ae.source.tagged||i.serverCache.isFiltered()&&!G(ae.path),D=Cl(u,i,ae.path,ae.snap,c,p,L,C))}else if(s.type===si.MERGE){const ae=s;ae.source.fromUser?D=function rl(u,i,s,c,p,C,D){let L=i;return c.foreach((Y,ae)=>{const Ae=X(s,Y);gs(i,lr(Ae))&&(L=ea(u,L,Ae,ae,p,C,D))}),c.foreach((Y,ae)=>{const Ae=X(s,Y);gs(i,lr(Ae))||(L=ea(u,L,Ae,ae,p,C,D))}),L}(u,i,ae.path,ae.children,c,p,C):((0,_e.hu)(ae.source.fromServer,"Unknown source."),L=ae.source.tagged||i.serverCache.isFiltered(),D=ta(u,i,ae.path,ae.children,c,p,L,C))}else if(s.type===si.ACK_USER_WRITE){const ae=s;D=ae.revert?function Ho(u,i,s,c,p,C){let D;if(null!=Yr(c,s))return i;{const L=new no(c,i,p),Y=i.eventCache.getNode();let ae;if(G(s)||".priority"===lr(s)){let Ae;if(i.serverCache.isFullyInitialized())Ae=_u(c,x(i));else{const He=i.serverCache.getNode();(0,_e.hu)(He instanceof pr,"serverChildren would be complete if leaf node"),Ae=Ni(c,He)}Ae=Ae,ae=u.filter.updateFullNode(Y,Ae,C)}else{const Ae=lr(s);let He=nl(c,Ae,i.serverCache);null==He&&i.serverCache.isCompleteForChild(Ae)&&(He=Y.getImmediateChild(Ae)),ae=null!=He?u.filter.updateChild(Y,Ae,He,zr(s),L,C):i.eventCache.getNode().hasChild(Ae)?u.filter.updateChild(Y,Ae,pr.EMPTY_NODE,zr(s),L,C):Y,ae.isEmpty()&&i.serverCache.isFullyInitialized()&&(D=_u(c,x(i)),D.isLeafNode()&&(ae=u.filter.updateFullNode(ae,D,C)))}return D=i.serverCache.isFullyInitialized()||null!=Yr(c,or()),Tr(i,ae,D,u.filter.filtersNodes())}}(u,i,ae.path,c,p,C):function bl(u,i,s,c,p,C,D){if(null!=Yr(p,s))return i;const L=i.serverCache.isFiltered(),Y=i.serverCache;if(null!=c.value){if(G(s)&&Y.isFullyInitialized()||Y.isCompleteForPath(s))return Cl(u,i,s,Y.getNode().getChild(s),p,C,L,D);if(G(s)){let ae=new k(null);return Y.getNode().forEachChild(rn,(Ae,He)=>{ae=ae.set(new fr(Ae),He)}),ta(u,i,s,ae,p,C,L,D)}return i}{let ae=new k(null);return c.foreach((Ae,He)=>{const st=X(s,Ae);Y.isCompleteForPath(st)&&(ae=ae.set(Ae,Y.getNode().getChild(st)))}),ta(u,i,s,ae,p,C,L,D)}}(u,i,ae.path,ae.affectedTree,c,p,C)}else{if(s.type!==si.LISTEN_COMPLETE)throw(0,_e.g5)("Unknown operation type: "+s.type);D=function Ha(u,i,s,c,p){const C=i.serverCache;return vu(u,wl(i,C.getNode(),C.isFullyInitialized()||G(s),C.isFiltered()),s,c,bc,p)}(u,i,s.path,c,C)}const Y=C.getChanges();return function Wd(u,i,s){const c=i.eventCache;if(c.isFullyInitialized()){const p=c.getNode().isLeafNode()||c.getNode().isEmpty(),C=hi(u);(s.length>0||!u.eventCache.isFullyInitialized()||p&&!c.getNode().equals(C)||!c.getNode().getPriority().equals(C.getPriority()))&&s.push(function ga(u){return{type:"value",snapshotNode:u}}(hi(i)))}}(i,D,Y),{viewCache:D,changes:Y}}(u.processor_,p,i,s,c);return function $a(u,i){(0,_e.hu)(i.eventCache.getNode().isIndexed(u.filter.getIndex()),"Event snap not indexed"),(0,_e.hu)(i.serverCache.getNode().isIndexed(u.filter.getIndex()),"Server snap not indexed")}(u.processor_,C.viewCache),(0,_e.hu)(C.viewCache.serverCache.isFullyInitialized()||!p.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),u.viewCache_=C.viewCache,function Ga(u,i,s,c){return function jo(u,i,s,c){const p=[],C=[];return i.forEach(D=>{"child_changed"===D.type&&u.index_.indexedValueChanged(D.oldSnap,D.snapshotNode)&&C.push(function fo(u,i){return{type:"child_moved",snapshotNode:i,childName:u}}(D.childName,D.snapshotNode))}),Gs(u,p,"child_removed",i,c,s),Gs(u,p,"child_added",i,c,s),Gs(u,p,"child_moved",C,c,s),Gs(u,p,"child_changed",i,c,s),Gs(u,p,"value",i,c,s),p}(u.eventGenerator_,i,s,c?[c]:u.eventRegistrations_)}(u,C.changes,C.viewCache.eventCache.getNode(),null)}let Tl,Ze;function Ca(u,i,s,c){const p=i.source.queryId;if(null!==p){const C=u.views.get(p);return(0,_e.hu)(null!=C,"SyncTree gave us an op for an invalid query."),Wo(C,i,s,c)}{let C=[];for(const D of u.views.values())C=C.concat(Wo(D,i,s,c));return C}}function Al(u,i){let s=null;for(const c of u.views.values())s=s||zl(c,i);return s}class Sn{constructor(i){this.listenProvider_=i,this.syncPointTree_=new k(null),this.pendingWriteTree_=function ja(){return{visibleWrites:W.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function wr(u,i,s,c,p){return function nt(u,i,s,c,p){(0,_e.hu)(c>u.lastWriteId,"Stacking an older write on top of newer ones"),void 0===p&&(p=!0),u.allWrites.push({path:i,snap:s,writeId:c,visible:p}),p&&(u.visibleWrites=oe(u.visibleWrites,i,s)),u.lastWriteId=c}(u.pendingWriteTree_,i,s,c,p),p?go(u,new Va({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},i,s)):[]}function zn(u,i,s=!1){const c=function rs(u,i){for(let s=0;s<u.allWrites.length;s++){const c=u.allWrites[s];if(c.writeId===i)return c}return null}(u.pendingWriteTree_,i);if(function Vs(u,i){const s=u.allWrites.findIndex(L=>L.writeId===i);(0,_e.hu)(s>=0,"removeWrite called with nonexistent writeId.");const c=u.allWrites[s];u.allWrites.splice(s,1);let p=c.visible,C=!1,D=u.allWrites.length-1;for(;p&&D>=0;){const L=u.allWrites[D];L.visible&&(D>=s&&to(L,c.path)?p=!1:vt(c.path,L.path)&&(C=!0)),D--}return!!p&&(C?(function zs(u){u.visibleWrites=Ea(u.allWrites,Ba,or()),u.lastWriteId=u.allWrites.length>0?u.allWrites[u.allWrites.length-1].writeId:-1}(u),!0):(c.snap?u.visibleWrites=Ne(u.visibleWrites,c.path):dt(c.children,Y=>{u.visibleWrites=Ne(u.visibleWrites,X(c.path,Y))}),!0))}(u.pendingWriteTree_,i)){let C=new k(null);return null!=c.snap?C=C.set(or(),!0):dt(c.children,D=>{C=C.set(new fr(D),!0)}),go(u,new tl(c.path,C,s))}return[]}function Si(u,i,s){return go(u,new Va({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i,s))}function Ao(u,i,s){const p=u.pendingWriteTree_,C=u.syncPointTree_.findOnPath(i,(D,L)=>{const ae=Al(L,pe(D,i));if(ae)return ae});return ji(p,i,C,s,!0)}function go(u,i){return Gd(i,u.syncPointTree_,null,ei(u.pendingWriteTree_,or()))}function Gd(u,i,s,c){if(G(u.path))return Ml(u,i,s,c);{const p=i.get(or());null==s&&null!=p&&(s=Al(p,or()));let C=[];const D=lr(u.path),L=u.operationForChild(D),Y=i.children.get(D);if(Y&&L){const ae=s?s.getImmediateChild(D):null,Ae=Wu(c,D);C=C.concat(Gd(L,Y,ae,Ae))}return p&&(C=C.concat(Ca(p,u,c,s))),C}}function Ml(u,i,s,c){const p=i.get(or());null==s&&null!=p&&(s=Al(p,or()));let C=[];return i.children.inorderTraversal((D,L)=>{const Y=s?s.getImmediateChild(D):null,ae=Wu(c,D),Ae=u.operationForChild(D);Ae&&(C=C.concat(Ml(Ae,L,Y,ae)))}),p&&(C=C.concat(Ca(p,u,c,s))),C}function ul(u,i){return u.tagToQueryMap.get(i)}function ql(u){const i=u.indexOf("$");return(0,_e.hu)(-1!==i&&i<u.length-1,"Bad queryKey."),{queryId:u.substr(i+1),path:new fr(u.substr(0,i))}}function Bs(u,i,s){const c=u.syncPointTree_.get(i);return(0,_e.hu)(c,"Missing sync point for query tag that we're tracking"),Ca(c,s,ei(u.pendingWriteTree_,i),null)}class wu{constructor(i){this.node_=i}getImmediateChild(i){const s=this.node_.getImmediateChild(i);return new wu(s)}node(){return this.node_}}class cl{constructor(i,s){this.syncTree_=i,this.path_=s}getImmediateChild(i){const s=X(this.path_,i);return new cl(this.syncTree_,s)}node(){return Ao(this.syncTree_,this.path_)}}const od=function(u,i,s){return u&&"object"==typeof u?((0,_e.hu)(".sv"in u,"Unexpected leaf node or priority contents"),"string"==typeof u[".sv"]?Zd(u[".sv"],i,s):"object"==typeof u[".sv"]?Zh(u[".sv"],i):void(0,_e.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2))):u},Zd=function(u,i,s){if("timestamp"===u)return s.timestamp;(0,_e.hu)(!1,"Unexpected server value: "+u)},Zh=function(u,i,s){u.hasOwnProperty("increment")||(0,_e.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2));const c=u.increment;"number"!=typeof c&&(0,_e.hu)(!1,"Unexpected increment value: "+c);const p=i.node();if((0,_e.hu)(null!=p,"Expected ChildrenNode.EMPTY_NODE for nulls"),!p.isLeafNode())return c;const D=p.getValue();return"number"!=typeof D?c:D+c},sa=function(u,i,s){return Zl(u,new wu(i),s)};function Zl(u,i,s){const c=u.getPriority().val(),p=od(c,i.getImmediateChild(".priority"),s);let C;if(u.isLeafNode()){const D=u,L=od(D.getValue(),i,s);return L!==D.getValue()||p!==D.getPriority().val()?new Ti(L,_i(p)):u}{const D=u;return C=D,p!==D.getPriority().val()&&(C=C.updatePriority(new Ti(p))),D.forEachChild(ii,(L,Y)=>{const ae=Zl(Y,i.getImmediateChild(L),s);ae!==Y&&(C=C.updateImmediateChild(L,ae))}),C}}class Ac{constructor(i="",s=null,c={children:{},childCount:0}){this.name=i,this.parent=s,this.node=c}}function Rl(u,i){let s=i instanceof fr?i:new fr(i),c=u,p=lr(s);for(;null!==p;){const C=(0,_e.DV)(c.node.children,p)||{children:{},childCount:0};c=new Ac(p,c,C),s=zr(s),p=lr(s)}return c}function So(u){return u.node.value}function ad(u,i){u.node.value=i,Yd(u)}function Kl(u){return u.node.childCount>0}function dl(u,i){dt(u.node.children,(s,c)=>{i(new Ac(s,u,c))})}function Ju(u,i,s,c){s&&!c&&i(u),dl(u,p=>{Ju(p,i,!0,c)}),s&&c&&i(u)}function Pl(u){return new fr(null===u.parent?u.name:Pl(u.parent)+"/"+u.name)}function Yd(u){null!==u.parent&&function bg(u,i,s){const c=function Kd(u){return void 0===So(u)&&!Kl(u)}(s),p=(0,_e.r3)(u.node.children,i);c&&p?(delete u.node.children[i],u.node.childCount--,Yd(u)):!c&&!p&&(u.node.children[i]=s.node,u.node.childCount++,Yd(u))}(u.parent,u.name,u)}const is=/[\[\].#$\/\u0000-\u001F\u007F]/,Yl=/[\[\].#$\u0000-\u001F\u007F]/,Cu=10485760,zo=function(u){return"string"==typeof u&&0!==u.length&&!is.test(u)},Nl=function(u,i,s){const c=s instanceof fr?new Ft(s,u):s;if(void 0===i)throw new Error(u+"contains undefined "+F(c));if("function"==typeof i)throw new Error(u+"contains a function "+F(c)+" with contents = "+i.toString());if(Dn(i))throw new Error(u+"contains "+i.toString()+" "+F(c));if("string"==typeof i&&i.length>Cu/3&&(0,_e.ug)(i)>Cu)throw new Error(u+"contains a string greater than "+Cu+" utf8 bytes "+F(c)+" ('"+i.substring(0,50)+"...')");if(i&&"object"==typeof i){let p=!1,C=!1;if(dt(i,(D,L)=>{if(".value"===D)p=!0;else if(".priority"!==D&&".sv"!==D&&(C=!0,!zo(D)))throw new Error(u+" contains an invalid key ("+D+") "+F(c)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function fn(u,i){u.parts_.length>0&&(u.byteLength_+=1),u.parts_.push(i),u.byteLength_+=(0,_e.ug)(i),An(u)})(c,D),Nl(u,L,c),function Mn(u){const i=u.parts_.pop();u.byteLength_-=(0,_e.ug)(i),u.parts_.length>0&&(u.byteLength_-=1)}(c)}),p&&C)throw new Error(u+' contains ".value" child '+F(c)+" in addition to actual children.")}},_s=function(u,i){const s=i.path.toString();if("string"!=typeof i.repoInfo.host||0===i.repoInfo.host.length||!zo(i.repoInfo.namespace)&&"localhost"!==i.repoInfo.host.split(":")[0]||0!==s.length&&!function(u){return u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),function(u){return"string"==typeof u&&0!==u.length&&!Yl.test(u)}(u)}(s))throw new Error((0,_e.gK)(u,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class ui{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ps(u,i,s){(function Sc(u,i){let s=null;for(let c=0;c<i.length;c++){const p=i[c],C=p.getPath();null!==s&&!qe(C,s.path)&&(u.eventLists_.push(s),s=null),null===s&&(s={events:[],path:C}),s.events.push(p)}s&&u.eventLists_.push(s)})(u,s),function xc(u,i){u.recursionDepth_++;let s=!0;for(let c=0;c<u.eventLists_.length;c++){const p=u.eventLists_[c];p&&(i(p.path)?(io(u.eventLists_[c]),u.eventLists_[c]=null):s=!1)}s&&(u.eventLists_=[]),u.recursionDepth_--}(u,c=>vt(c,i)||vt(i,c))}function io(u){for(let i=0;i<u.events.length;i++){const s=u.events[i];if(null!==s){u.events[i]=null;const c=s.getEventRunner();jr&&sn("event: "+s.toString()),le(c)}}}class Qh{constructor(i,s,c,p){this.repoInfo_=i,this.forceRestClient_=s,this.authTokenProvider_=c,this.appCheckProvider_=p,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ui,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Jo(),this.transactionQueueTree_=new Ac,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ud(u){const s=u.infoData_.getNode(new fr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+s}function Ol(u){return function(u){return(u=u||{}).timestamp=u.timestamp||(new Date).getTime(),u}({timestamp:ud(u)})}function cd(u,i,s,c,p){u.dataUpdateCount++;const C=new fr(i);s=u.interceptServerDataCallback_?u.interceptServerDataCallback_(i,s):s;let D=[];if(p)if(c){const Y=(0,_e.UI)(s,ae=>_i(ae));D=function sl(u,i,s,c){const p=ul(u,c);if(p){const C=ql(p),D=C.path,L=C.queryId,Y=pe(D,i),ae=k.fromObject(s);return Bs(u,D,new Bo(ya(L),Y,ae))}return[]}(u.serverSyncTree_,C,Y,p)}else{const Y=_i(s);D=function ro(u,i,s,c){const p=ul(u,c);if(null!=p){const C=ql(p),D=C.path,L=C.queryId,Y=pe(D,i);return Bs(u,D,new Va(ya(L),Y,s))}return[]}(u.serverSyncTree_,C,Y,p)}else if(c){const Y=(0,_e.UI)(s,ae=>_i(ae));D=function po(u,i,s){const c=k.fromObject(s);return go(u,new Bo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i,c))}(u.serverSyncTree_,C,Y)}else{const Y=_i(s);D=Si(u.serverSyncTree_,C,Y)}let L=C;D.length>0&&(L=oa(u,C)),Ps(u.eventQueue_,L,D)}function dd(u,i){Jd(u,"connected",i),!1===i&&function z(u){ss(u,"onDisconnectEvents");const i=Ol(u),s=Jo();Ua(u.onDisconnect_,or(),(p,C)=>{const D=function(u,i,s,c){return Zl(i,new cl(s,u),c)}(p,C,u.serverSyncTree_,i);pn(s,p,D)});let c=[];Ua(s,or(),(p,C)=>{c=c.concat(Si(u.serverSyncTree_,p,C));const D=function nu(u,i){const s=Pl(Pc(u,i)),c=Rl(u.transactionQueueTree_,i);return function Kh(u,i,s){let c=s?u:u.parent;for(;null!==c;){if(i(c))return!0;c=c.parent}}(c,p=>{hd(u,p)}),hd(u,c),Ju(c,p=>{hd(u,p)}),s}(u,p);oa(u,D)}),u.onDisconnect_=Jo(),Ps(u.eventQueue_,or(),c)}(u)}function Jd(u,i,s){const c=new fr("/.info/"+i),p=_i(s);u.infoData_.updateSnapshot(c,p);const C=Si(u.infoSyncTree_,c,p);Ps(u.eventQueue_,c,C)}function b(u){return u.nextWriteId_++}function ss(u,...i){let s="";u.persistentConnection_&&(s=u.persistentConnection_.id+":"),sn(s,...i)}function ys(u,i,s){return Ao(u.serverSyncTree_,i,s)||pr.EMPTY_NODE}function tu(u,i=u.transactionQueueTree_){if(i||Nc(u,i),So(i)){const s=bu(u,i);(0,_e.hu)(s.length>0,"Sending zero length transaction queue"),s.every(p=>0===p.status)&&function Xd(u,i,s){const c=s.map(ae=>ae.currentWriteId),p=ys(u,i,c);let C=p;const D=p.hash();for(let ae=0;ae<s.length;ae++){const Ae=s[ae];(0,_e.hu)(0===Ae.status,"tryToSendTransactionQueue_: items in queue should all be run."),Ae.status=1,Ae.retryCount++;const He=pe(i,Ae.path);C=C.updateChild(He,Ae.currentOutputSnapshotRaw)}const L=C.val(!0),Y=i;u.server_.put(Y.toString(),L,ae=>{ss(u,"transaction put response",{path:Y.toString(),status:ae});let Ae=[];if("ok"===ae){const He=[];for(let st=0;st<s.length;st++)s[st].status=2,Ae=Ae.concat(zn(u.serverSyncTree_,s[st].currentWriteId)),s[st].onComplete&&He.push(()=>s[st].onComplete(null,!0,s[st].currentOutputSnapshotResolved)),s[st].unwatcher();Nc(u,Rl(u.transactionQueueTree_,i)),tu(u,u.transactionQueueTree_),Ps(u.eventQueue_,i,Ae);for(let st=0;st<He.length;st++)le(He[st])}else{if("datastale"===ae)for(let He=0;He<s.length;He++)s[He].status=3===s[He].status?4:0;else{Dr("transaction at "+Y.toString()+" failed: "+ae);for(let He=0;He<s.length;He++)s[He].status=4,s[He].abortReason=ae}oa(u,i)}},D)}(u,Pl(i),s)}else Kl(i)&&dl(i,s=>{tu(u,s)})}function oa(u,i){const s=Pc(u,i),c=Pl(s);return function qa(u,i,s){if(0===i.length)return;const c=[];let p=[];const D=i.filter(L=>0===L.status).map(L=>L.currentWriteId);for(let L=0;L<i.length;L++){const Y=i[L],ae=pe(s,Y.path);let He,Ae=!1;if((0,_e.hu)(null!==ae,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Y.status)Ae=!0,He=Y.abortReason,p=p.concat(zn(u.serverSyncTree_,Y.currentWriteId,!0));else if(0===Y.status)if(Y.retryCount>=25)Ae=!0,He="maxretry",p=p.concat(zn(u.serverSyncTree_,Y.currentWriteId,!0));else{const st=ys(u,Y.path,D);Y.currentInputSnapshot=st;const kt=i[L].update(st.val());if(void 0!==kt){Nl("transaction failed: Data returned ",kt,Y.path);let Lt=_i(kt);"object"==typeof kt&&null!=kt&&(0,_e.r3)(kt,".priority")||(Lt=Lt.updatePriority(st.getPriority()));const ur=Y.currentWriteId,Ei=Ol(u),Ji=sa(Lt,st,Ei);Y.currentOutputSnapshotRaw=Lt,Y.currentOutputSnapshotResolved=Ji,Y.currentWriteId=b(u),D.splice(D.indexOf(ur),1),p=p.concat(wr(u.serverSyncTree_,Y.path,Ji,Y.currentWriteId,Y.applyLocally)),p=p.concat(zn(u.serverSyncTree_,ur,!0))}else Ae=!0,He="nodata",p=p.concat(zn(u.serverSyncTree_,Y.currentWriteId,!0))}Ps(u.eventQueue_,s,p),p=[],Ae&&(i[L].status=2,setTimeout(i[L].unwatcher,Math.floor(0)),i[L].onComplete&&c.push("nodata"===He?()=>i[L].onComplete(null,!1,i[L].currentInputSnapshot):()=>i[L].onComplete(new Error(He),!1,null)))}Nc(u,u.transactionQueueTree_);for(let L=0;L<c.length;L++)le(c[L]);tu(u,u.transactionQueueTree_)}(u,bu(u,s),c),c}function Pc(u,i){let s,c=u.transactionQueueTree_;for(s=lr(i);null!==s&&void 0===So(c);)c=Rl(c,s),s=lr(i=zr(i));return c}function bu(u,i){const s=[];return Iu(u,i,s),s.sort((c,p)=>c.order-p.order),s}function Iu(u,i,s){const c=So(i);if(c)for(let p=0;p<c.length;p++)s.push(c[p]);dl(i,p=>{Iu(u,p,s)})}function Nc(u,i){const s=So(i);if(s){let c=0;for(let p=0;p<s.length;p++)2!==s[p].status&&(s[c]=s[p],c++);s.length=c,ad(i,s.length>0?s:void 0)}dl(i,c=>{Nc(u,c)})}function hd(u,i){const s=So(i);if(s){const c=[];let p=[],C=-1;for(let D=0;D<s.length;D++)3===s[D].status||(1===s[D].status?((0,_e.hu)(C===D-1,"All SENT items should be at beginning of queue."),C=D,s[D].status=3,s[D].abortReason="set"):((0,_e.hu)(0===s[D].status,"Unexpected transaction status in abort"),s[D].unwatcher(),p=p.concat(zn(u.serverSyncTree_,s[D].currentWriteId,!0)),s[D].onComplete&&c.push(s[D].onComplete.bind(null,new Error("set"),!1,null))));-1===C?ad(i,void 0):s.length=C+1,Ps(u.eventQueue_,Pl(i),p);for(let D=0;D<c.length;D++)le(c[D])}}const Oc=function(u,i){const s=op(u),c=s.namespace;return"firebase.com"===s.domain&&nn(s.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!c||"undefined"===c)&&"localhost"!==s.domain&&nn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),s.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Dr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Ln(s.host,s.secure,c,"ws"===s.scheme||"wss"===s.scheme,i,"",c!==s.subdomain),path:new fr(s.pathString)}},op=function(u){let i="",s="",c="",p="",C="",D=!0,L="https",Y=443;if("string"==typeof u){let ae=u.indexOf("//");ae>=0&&(L=u.substring(0,ae-1),u=u.substring(ae+2));let Ae=u.indexOf("/");-1===Ae&&(Ae=u.length);let He=u.indexOf("?");-1===He&&(He=u.length),i=u.substring(0,Math.min(Ae,He)),Ae<He&&(p=function Rm(u){let i="";const s=u.split("/");for(let c=0;c<s.length;c++)if(s[c].length>0){let p=s[c];try{p=decodeURIComponent(p.replace(/\+/g," "))}catch(C){}i+="/"+p}return i}(u.substring(Ae,He)));const st=function eh(u){const i={};"?"===u.charAt(0)&&(u=u.substring(1));for(const s of u.split("&")){if(0===s.length)continue;const c=s.split("=");2===c.length?i[decodeURIComponent(c[0])]=decodeURIComponent(c[1]):Dr(`Invalid query segment '${s}' in query '${u}'`)}return i}(u.substring(Math.min(u.length,He)));ae=i.indexOf(":"),ae>=0?(D="https"===L||"wss"===L,Y=parseInt(i.substring(ae+1),10)):ae=i.length;const kt=i.slice(0,ae);if("localhost"===kt.toLowerCase())s="localhost";else if(kt.split(".").length<=2)s=kt;else{const Lt=i.indexOf(".");c=i.substring(0,Lt).toLowerCase(),s=i.substring(Lt+1),C=c}"ns"in st&&(C=st.ns)}return{host:i,port:Y,domain:s,subdomain:c,secure:D,scheme:L,pathString:p,namespace:C}};class Za{constructor(i,s,c,p){this._repo=i,this._path=s,this._queryParams=c,this._orderByCalled=p}get key(){return G(this._path)?null:Hs(this._path)}get ref(){return new xo(this._repo,this._path)}get _queryIdentifier(){const i=$t(this._queryParams),s=cr(i);return"{}"===s?"default":s}get _queryObject(){return $t(this._queryParams)}isEqual(i){if(!((i=(0,_e.m9)(i))instanceof Za))return!1;const s=this._repo===i._repo,c=qe(this._path,i._path);return s&&c&&this._queryIdentifier===i._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Ri(u){let i="";for(let s=u.pieceNum_;s<u.pieces_.length;s++)""!==u.pieces_[s]&&(i+="/"+encodeURIComponent(String(u.pieces_[s])));return i||"/"}(this._path)}}class xo extends Za{constructor(i,s){super(i,s,new La,!1)}get parent(){const i=ai(this._path);return null===i?null:new xo(this._repo,i)}get root(){let i=this;for(;null!==i.parent;)i=i.parent;return i}}(function ia(u){(0,_e.hu)(!Tl,"__referenceConstructor has already been defined"),Tl=u})(xo),function pt(u){(0,_e.hu)(!Ze,"__referenceConstructor has already been defined"),Ze=u}(xo);const lh={};class fp{constructor(i,s){this._repoInternal=i,this.app=s,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function xi(u,i,s){if(u.stats_=Bn(u.repoInfo_),u.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)u.server_=new gr(u.repoInfo_,(c,p,C,D)=>{cd(u,c,p,C,D)},u.authTokenProvider_,u.appCheckProvider_),setTimeout(()=>dd(u,!0),0);else{if(null!=s){if("object"!=typeof s)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,_e.Wl)(s)}catch(c){throw new Error("Invalid authOverride provided: "+c)}}u.persistentConnection_=new $n(u.repoInfo_,i,(c,p,C,D)=>{cd(u,c,p,C,D)},c=>{dd(u,c)},c=>{!function Wr(u,i){dt(i,(s,c)=>{Jd(u,s,c)})}(u,c)},u.authTokenProvider_,u.appCheckProvider_,s),u.server_=u.persistentConnection_}u.authTokenProvider_.addTokenChangeListener(c=>{u.server_.refreshAuthToken(c)}),u.appCheckProvider_.addTokenChangeListener(c=>{u.server_.refreshAppCheckToken(c.token)}),u.statsReporter_=function Li(u,i){const s=u.toString();return Fi[s]||(Fi[s]=i()),Fi[s]}(u.repoInfo_,()=>new ju(u.stats_,u.server_)),u.infoData_=new eo,u.infoSyncTree_=new Sn({startListening:(c,p,C,D)=>{let L=[];const Y=u.infoData_.getNode(c._path);return Y.isEmpty()||(L=Si(u.infoSyncTree_,c._path,Y),setTimeout(()=>{D("ok")},0)),L},stopListening:()=>{}}),Jd(u,"connected",!1),u.serverSyncTree_=new Sn({startListening:(c,p,C,D)=>(u.server_.listen(c,C,p,(L,Y)=>{const ae=D(L,Y);Ps(u.eventQueue_,c._path,ae)}),[]),stopListening:(c,p)=>{u.server_.unlisten(c,p)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new xo(this._repo,or())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function hp(u,i){const s=lh[i];(!s||s[u.key]!==u)&&nn(`Database ${i}(${u.repoInfo_}) has already been deleted.`),function ci(u){u.persistentConnection_&&u.persistentConnection_.interrupt("repo_interrupt")}(u),delete s[u.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(i){null===this._rootInternal&&nn("Cannot call "+i+" on a deleted database.")}}function hh(u=(0,Me.getApp)(),i){const s=(0,Me._getProvider)(u,"database").getImmediate({identifier:i}),c=(0,_e.P0)("database");return c&&function Rg(u,i,s,c={}){(u=(0,_e.m9)(u))._checkNotDeleted("useEmulator"),u._instanceStarted&&nn("Cannot call useEmulator() after instance has already been initialized.");const p=u._repoInternal;let C;if(p.repoInfo_.nodeAdmin)c.mockUserToken&&nn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),C=new Ge(Ge.OWNER);else if(c.mockUserToken){const D="string"==typeof c.mockUserToken?c.mockUserToken:(0,_e.Sg)(c.mockUserToken,u.app.options.projectId);C=new Ge(D)}!function af(u,i,s,c){u.repoInfo_=new Ln(`${i}:${s}`,!1,u.repoInfo_.namespace,u.repoInfo_.webSocketOnly,u.repoInfo_.nodeAdmin,u.repoInfo_.persistenceKey,u.repoInfo_.includeNamespaceInQueryParams),c&&(u.authTokenProvider_=c)}(p,i,s,C)}(s,...c),s}$n.prototype.simpleListen=function(u,i){this.sendRequest("q",{p:u},i)},$n.prototype.echo=function(u,i){this.sendRequest("echo",{d:u},i)},function pd(u){(function Ur(u){qr=u})(Me.SDK_VERSION),(0,Me._registerComponent)(new ot.wA("database",(i,{instanceIdentifier:s})=>function lf(u,i,s,c,p){let C=c||u.options.databaseURL;void 0===C&&(u.options.projectId||nn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),sn("Using default host for project ",u.options.projectId),C=`${u.options.projectId}-default-rtdb.firebaseio.com`);let Y,ae,D=Oc(C,p),L=D.repoInfo;"undefined"!=typeof process&&process.env&&(ae=process.env.FIREBASE_DATABASE_EMULATOR_HOST),ae?(Y=!0,C=`http://${ae}?ns=${L.namespace}`,D=Oc(C,p),L=D.repoInfo):Y=!D.repoInfo.secure;const Ae=p&&Y?new Ge(Ge.OWNER):new De(u.name,u.options,i);_s("Invalid Firebase Database URL",D),G(D.path)||nn("Database URL must point to the root of a Firebase Database (not including a child path).");const He=function uf(u,i,s,c){let p=lh[i.name];p||(p={},lh[i.name]=p);let C=p[u.toURLString()];return C&&nn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),C=new Qh(u,!1,s,c),p[u.toURLString()]=C,C}(L,u,Ae,new ue(u.name,s));return new fp(He,u)}(i.getProvider("app").getImmediate(),i.getProvider("auth-internal"),i.getProvider("app-check-internal"),s),"PUBLIC").setMultipleInstances(!0)),(0,Me.registerVersion)(Wn,"0.13.9",u),(0,Me.registerVersion)(Wn,"0.13.9","esm2017")}();class mp{constructor(i){return i}}const Ya="database",Uc=new E.OlP("angularfire2.database-instances");function Og(u){return(i,s)=>{const c=i.runOutsideAngular(()=>u(s));return new mp(c)}}const Ia={provide:class fh{constructor(){return(0,an.vb)(Ya)}},deps:[[new E.FiY,Uc]]},_p={provide:mp,useFactory:function Ng(u,i){const s=(0,an.JM)(Ya,u,i);return s&&new mp(s)},deps:[[new E.FiY,Uc],On.Ot]};let df=(()=>{class u{constructor(){(0,wn.KN)("angularfire",an.q4.full,"rtdb")}}return u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=E.oAB({type:u}),u.\u0275inj=E.cJS({providers:[_p,Ia]}),u})();function hf(u,...i){return{ngModule:df,providers:[{provide:Uc,useFactory:Og(u),multi:!0,deps:[E.R0b,E.zs3,an.HU,On.z6,[new E.FiY,Zt.dh],[new E.FiY,gt.nm],...i]}]}}const ph=(0,an.u3)(hh,!0);var Ip=j(3562),Fl=j(2011),_d=j(4986),Tp=j(8306),Ll=j(8996),ff=j(9646),Ul=j(8675),pf=j(4482),cc=j(5403);function su(){return(0,pf.e)((u,i)=>{let s,c=!1;u.subscribe(new cc.Q(i,p=>{const C=s;s=p,c&&i.next([C,p]),c=!0}))})}var Qa=j(4004),jc=j(5026),Wg=j(4671);function yd(u,i){return u===i}var $c=j(9300),Hc=(j(5881),j(3942)),Xt=j(5525);function vd(u,i){if(void 0===i)return{merge:!1};if(void 0!==i.mergeFields&&void 0!==i.merge)throw new Xt.WA("invalid-argument",`Invalid options passed to function ${u}(): You cannot specify both "merge" and "mergeFields".`);return i}function Ed(){if("undefined"==typeof Uint8Array)throw new Xt.WA("unimplemented","Uint8Arrays are not available in this environment.")}function dc(){if(!(0,Xt.Me)())throw new Xt.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class ou{constructor(i){this._delegate=i}static fromBase64String(i){return dc(),new ou(Xt.Jj.fromBase64String(i))}static fromUint8Array(i){return Ed(),new ou(Xt.Jj.fromUint8Array(i))}toBase64(){return dc(),this._delegate.toBase64()}toUint8Array(){return Ed(),this._delegate.toUint8Array()}isEqual(i){return this._delegate.isEqual(i._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function wd(u){return function Cd(u,i){if("object"!=typeof u||null===u)return!1;const s=u;for(const c of i)if(c in s&&"function"==typeof s[c])return!0;return!1}(u,["next","error","complete"])}class Dp{enableIndexedDbPersistence(i,s){return(0,Xt.ST)(i._delegate,{forceOwnership:s})}enableMultiTabIndexedDbPersistence(i){return(0,Xt.fH)(i._delegate)}clearIndexedDbPersistence(i){return(0,Xt.Fc)(i._delegate)}}class mf{constructor(i,s,c){this._delegate=s,this._persistenceProvider=c,this.INTERNAL={delete:()=>this.terminate()},i instanceof Xt.l7||(this._appCompat=i)}get _databaseId(){return this._delegate._databaseId}settings(i){const s=this._delegate._getSettings();!i.merge&&s.host!==i.host&&(0,Xt.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),i.merge&&delete(i=Object.assign(Object.assign({},s),i)).merge,this._delegate._setSettings(i)}useEmulator(i,s,c={}){(0,Xt.at)(this._delegate,i,s,c)}enableNetwork(){return(0,Xt.Ix)(this._delegate)}disableNetwork(){return(0,Xt.TF)(this._delegate)}enablePersistence(i){let s=!1,c=!1;return i&&(s=!!i.synchronizeTabs,c=!!i.experimentalForceOwningTab,(0,Xt.Wi)("synchronizeTabs",s,"experimentalForceOwningTab",c)),s?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,c)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,Xt.Mx)(this._delegate)}onSnapshotsInSync(i){return(0,Xt.sc)(this._delegate,i)}get app(){if(!this._appCompat)throw new Xt.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(i){try{return new fc(this,(0,Xt.hJ)(this._delegate,i))}catch(s){throw _o(s,"collection()","Firestore.collection()")}}doc(i){try{return new Ja(this,(0,Xt.JU)(this._delegate,i))}catch(s){throw _o(s,"doc()","Firestore.doc()")}}collectionGroup(i){try{return new Ta(this,(0,Xt.B$)(this._delegate,i))}catch(s){throw _o(s,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(i){return(0,Xt.i3)(this._delegate,s=>i(new xp(this,s)))}batch(){return(0,Xt.qY)(this._delegate),new qg(new Xt.PU(this._delegate,i=>(0,Xt.GL)(this._delegate,i)))}loadBundle(i){return(0,Xt.Pb)(this._delegate,i)}namedQuery(i){return(0,Xt.L$)(this._delegate,i).then(s=>s?new Ta(this,s):null)}}class Ap extends Xt.u7{constructor(i){super(),this.firestore=i}convertBytes(i){return new ou(new Xt.Jj(i))}convertReference(i){const s=this.convertDocumentKey(i,this.firestore._databaseId);return Ja.forKey(s,this.firestore,null)}}class xp{constructor(i,s){this._firestore=i,this._delegate=s,this._userDataWriter=new Ap(i)}get(i){const s=Su(i);return this._delegate.get(s).then(c=>new bd(this._firestore,new Xt.xU(this._firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,s.converter)))}set(i,s,c){const p=Su(i);return c?(vd("Transaction.set",c),this._delegate.set(p,s,c)):this._delegate.set(p,s),this}update(i,s,c,...p){const C=Su(i);return 2===arguments.length?this._delegate.update(C,s):this._delegate.update(C,s,c,...p),this}delete(i){const s=Su(i);return this._delegate.delete(s),this}}class qg{constructor(i){this._delegate=i}set(i,s,c){const p=Su(i);return c?(vd("WriteBatch.set",c),this._delegate.set(p,s,c)):this._delegate.set(p,s),this}update(i,s,c,...p){const C=Su(i);return 2===arguments.length?this._delegate.update(C,s):this._delegate.update(C,s,c,...p),this}delete(i){const s=Su(i);return this._delegate.delete(s),this}commit(){return this._delegate.commit()}}class hc{constructor(i,s,c){this._firestore=i,this._userDataWriter=s,this._delegate=c}fromFirestore(i,s){const c=new Xt.$q(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,null);return this._delegate.fromFirestore(new yf(this._firestore,c),null!=s?s:{})}toFirestore(i,s){return s?this._delegate.toFirestore(i,s):this._delegate.toFirestore(i)}static getInstance(i,s){const c=hc.INSTANCES;let p=c.get(i);p||(p=new WeakMap,c.set(i,p));let C=p.get(s);return C||(C=new hc(i,new Ap(i),s),p.set(s,C)),C}}hc.INSTANCES=new WeakMap;class Ja{constructor(i,s){this.firestore=i,this._delegate=s,this._userDataWriter=new Ap(i)}static forPath(i,s,c){if(i.length%2!=0)throw new Xt.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${i.canonicalString()} has ${i.length}`);return new Ja(s,new Xt.my(s._delegate,c,new Xt.Ky(i)))}static forKey(i,s,c){return new Ja(s,new Xt.my(s._delegate,c,i))}get id(){return this._delegate.id}get parent(){return new fc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(i){try{return new fc(this.firestore,(0,Xt.hJ)(this._delegate,i))}catch(s){throw _o(s,"collection()","DocumentReference.collection()")}}isEqual(i){return(i=(0,_e.m9)(i))instanceof Xt.my&&(0,Xt.Eo)(this._delegate,i)}set(i,s){s=vd("DocumentReference.set",s);try{return s?(0,Xt.pl)(this._delegate,i,s):(0,Xt.pl)(this._delegate,i)}catch(c){throw _o(c,"setDoc()","DocumentReference.set()")}}update(i,s,...c){try{return 1===arguments.length?(0,Xt.r7)(this._delegate,i):(0,Xt.r7)(this._delegate,i,s,...c)}catch(p){throw _o(p,"updateDoc()","DocumentReference.update()")}}delete(){return(0,Xt.oe)(this._delegate)}onSnapshot(...i){const s=yo(i),c=_f(i,p=>new bd(this.firestore,new Xt.xU(this.firestore._delegate,this._userDataWriter,p._key,p._document,p.metadata,this._delegate.converter)));return(0,Xt.cf)(this._delegate,s,c)}get(i){let s;return s="cache"===(null==i?void 0:i.source)?(0,Xt.kl)(this._delegate):"server"===(null==i?void 0:i.source)?(0,Xt.Xk)(this._delegate):(0,Xt.QT)(this._delegate),s.then(c=>new bd(this.firestore,new Xt.xU(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)))}withConverter(i){return new Ja(this.firestore,this._delegate.withConverter(i?hc.getInstance(this.firestore,i):null))}}function _o(u,i,s){return u.message=u.message.replace(i,s),u}function yo(u){for(const i of u)if("object"==typeof i&&!wd(i))return i;return{}}function _f(u,i){var s,c;let p;return p=wd(u[0])?u[0]:wd(u[1])?u[1]:"function"==typeof u[0]?{next:u[0],error:u[1],complete:u[2]}:{next:u[1],error:u[2],complete:u[3]},{next:C=>{p.next&&p.next(i(C))},error:null===(s=p.error)||void 0===s?void 0:s.bind(p),complete:null===(c=p.complete)||void 0===c?void 0:c.bind(p)}}class bd{constructor(i,s){this._firestore=i,this._delegate=s}get ref(){return new Ja(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(i){return this._delegate.data(i)}get(i,s){return this._delegate.get(i,s)}isEqual(i){return(0,Xt.qK)(this._delegate,i._delegate)}}class yf extends bd{data(i){const s=this._delegate.data(i);return(0,Xt.K9)(void 0!==s,"Document in a QueryDocumentSnapshot should exist"),s}}class Ta{constructor(i,s){this.firestore=i,this._delegate=s,this._userDataWriter=new Ap(i)}where(i,s,c){try{return new Ta(this.firestore,(0,Xt.IO)(this._delegate,(0,Xt.ar)(i,s,c)))}catch(p){throw _o(p,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(i,s){try{return new Ta(this.firestore,(0,Xt.IO)(this._delegate,(0,Xt.Xo)(i,s)))}catch(c){throw _o(c,/(orderBy|where)\(\)/,"Query.$1()")}}limit(i){try{return new Ta(this.firestore,(0,Xt.IO)(this._delegate,(0,Xt.b9)(i)))}catch(s){throw _o(s,"limit()","Query.limit()")}}limitToLast(i){try{return new Ta(this.firestore,(0,Xt.IO)(this._delegate,(0,Xt.vh)(i)))}catch(s){throw _o(s,"limitToLast()","Query.limitToLast()")}}startAt(...i){try{return new Ta(this.firestore,(0,Xt.IO)(this._delegate,(0,Xt.e0)(...i)))}catch(s){throw _o(s,"startAt()","Query.startAt()")}}startAfter(...i){try{return new Ta(this.firestore,(0,Xt.IO)(this._delegate,(0,Xt.TQ)(...i)))}catch(s){throw _o(s,"startAfter()","Query.startAfter()")}}endBefore(...i){try{return new Ta(this.firestore,(0,Xt.IO)(this._delegate,(0,Xt.Lx)(...i)))}catch(s){throw _o(s,"endBefore()","Query.endBefore()")}}endAt(...i){try{return new Ta(this.firestore,(0,Xt.IO)(this._delegate,(0,Xt.Wu)(...i)))}catch(s){throw _o(s,"endAt()","Query.endAt()")}}isEqual(i){return(0,Xt.iE)(this._delegate,i._delegate)}get(i){let s;return s="cache"===(null==i?void 0:i.source)?(0,Xt.UQ)(this._delegate):"server"===(null==i?void 0:i.source)?(0,Xt.zN)(this._delegate):(0,Xt.PL)(this._delegate),s.then(c=>new Kg(this.firestore,new Xt.W(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)))}onSnapshot(...i){const s=yo(i),c=_f(i,p=>new Kg(this.firestore,new Xt.W(this.firestore._delegate,this._userDataWriter,this._delegate,p._snapshot)));return(0,Xt.cf)(this._delegate,s,c)}withConverter(i){return new Ta(this.firestore,this._delegate.withConverter(i?hc.getInstance(this.firestore,i):null))}}class Zg{constructor(i,s){this._firestore=i,this._delegate=s}get type(){return this._delegate.type}get doc(){return new yf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Kg{constructor(i,s){this._firestore=i,this._delegate=s}get query(){return new Ta(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(i=>new yf(this._firestore,i))}docChanges(i){return this._delegate.docChanges(i).map(s=>new Zg(this._firestore,s))}forEach(i,s){this._delegate.forEach(c=>{i.call(s,new yf(this._firestore,c))})}isEqual(i){return(0,Xt.qK)(this._delegate,i._delegate)}}class fc extends Ta{constructor(i,s){super(i,s),this.firestore=i,this._delegate=s}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const i=this._delegate.parent;return i?new Ja(this.firestore,i):null}doc(i){try{return new Ja(this.firestore,void 0===i?(0,Xt.JU)(this._delegate):(0,Xt.JU)(this._delegate,i))}catch(s){throw _o(s,"doc()","CollectionReference.doc()")}}add(i){return(0,Xt.ET)(this._delegate,i).then(s=>new Ja(this.firestore,s))}isEqual(i){return(0,Xt.Eo)(this._delegate,i._delegate)}withConverter(i){return new fc(this.firestore,this._delegate.withConverter(i?hc.getInstance(this.firestore,i):null))}}function Su(u){return(0,Xt.Cf)(u,Xt.my)}class vf{constructor(...i){this._delegate=new Xt.Lz(...i)}static documentId(){return new vf(Xt.Xb.keyField().canonicalString())}isEqual(i){return(i=(0,_e.m9)(i))instanceof Xt.Lz&&this._delegate._internalPath.isEqual(i._internalPath)}}class Vl{constructor(i){this._delegate=i}static serverTimestamp(){const i=(0,Xt.Bt)();return i._methodName="FieldValue.serverTimestamp",new Vl(i)}static delete(){const i=(0,Xt.AK)();return i._methodName="FieldValue.delete",new Vl(i)}static arrayUnion(...i){const s=(0,Xt.vr)(...i);return s._methodName="FieldValue.arrayUnion",new Vl(s)}static arrayRemove(...i){const s=(0,Xt.Ab)(...i);return s._methodName="FieldValue.arrayRemove",new Vl(s)}static increment(i){const s=(0,Xt.nP)(i);return s._methodName="FieldValue.increment",new Vl(s)}isEqual(i){return this._delegate.isEqual(i._delegate)}}const Mp={Firestore:mf,GeoPoint:Xt.F8,Timestamp:Xt.EK,Blob:ou,Transaction:xp,WriteBatch:qg,DocumentReference:Ja,DocumentSnapshot:bd,Query:Ta,QueryDocumentSnapshot:yf,QuerySnapshot:Kg,CollectionReference:fc,FieldPath:vf,FieldValue:Vl,setLogLevel:function Sp(u){(0,Xt.Ub)(u)},CACHE_SIZE_UNLIMITED:Xt.IX};!function Ef(u){(function Id(u,i){u.INTERNAL.registerComponent(new ot.wA("firestore-compat",s=>{const c=s.getProvider("app-compat").getImmediate(),p=s.getProvider("firestore").getImmediate();return i(c,p)},"PUBLIC").setServiceProps(Object.assign({},Mp)))})(u,(i,s)=>new mf(i,s,new Dp)),u.registerVersion("@firebase/firestore-compat","0.2.1")}(Hc.Z);var Bl=j(1205),Gc=j(127);function Pp(u,i){return function Rp(u,i=_d.z){return new Tp.y(s=>{let c;return null!=i?i.schedule(()=>{c=u.onSnapshot({includeMetadataChanges:!0},s)}):c=u.onSnapshot({includeMetadataChanges:!0},s),()=>{null!=c&&c()}})}(u,i)}function Td(u,i){return Pp(u,i).pipe((0,Qa.U)(s=>({payload:s,type:"query"})))}function pl(u,i){return Td(u,i).pipe((0,Ul.O)(void 0),su(),(0,Qa.U)(([s,c])=>{const p=c.payload.docChanges(),C=p.map(D=>({type:D.type,payload:D}));return s&&JSON.stringify(s.payload.metadata)!==JSON.stringify(c.payload.metadata)&&c.payload.docs.forEach((D,L)=>{const Y=p.find(Ae=>Ae.doc.ref.isEqual(D.ref)),ae=null==s?void 0:s.payload.docs.find(Ae=>Ae.ref.isEqual(D.ref));Y&&JSON.stringify(Y.doc.metadata)===JSON.stringify(D.metadata)||!Y&&ae&&JSON.stringify(ae.metadata)===JSON.stringify(D.metadata)||C.push({type:"modified",payload:{oldIndex:L,newIndex:L,type:"modified",doc:D}})}),C}))}function gl(u,i,s){return pl(u,s).pipe((0,jc.R)((c,p)=>function Np(u,i,s){return i.forEach(c=>{s.indexOf(c.type)>-1&&(u=function e_(u,i){switch(i.type){case"added":if(!u[i.newIndex]||!u[i.newIndex].doc.ref.isEqual(i.doc.ref))return gh(u,i.newIndex,0,i);break;case"modified":if(null==u[i.oldIndex]||u[i.oldIndex].doc.ref.isEqual(i.doc.ref)){if(i.oldIndex!==i.newIndex){const s=u.slice();return s.splice(i.oldIndex,1),s.splice(i.newIndex,0,i),s}return gh(u,i.newIndex,1,i)}break;case"removed":if(u[i.oldIndex]&&u[i.oldIndex].doc.ref.isEqual(i.doc.ref))return gh(u,i.oldIndex,1)}return u}(u,c))}),u}(c,p.map(C=>C.payload),i),[]),function Gg(u,i=Wg.y){return u=null!=u?u:yd,(0,pf.e)((s,c)=>{let p,C=!0;s.subscribe(new cc.Q(c,D=>{const L=i(D);(C||!u(p,L))&&(C=!1,p=L,c.next(D))}))})}(),(0,Qa.U)(c=>c.map(p=>({type:p.type,payload:p}))))}function gh(u,i,s,...c){const p=u.slice();return p.splice(i,s,...c),p}function Op(u){return(!u||0===u.length)&&(u=["added","removed","modified"]),u}class kp{constructor(i,s,c){this.ref=i,this.query=s,this.afs=c}stateChanges(i){let s=pl(this.query,this.afs.schedulers.outsideAngular);return i&&i.length>0&&(s=s.pipe((0,Qa.U)(c=>c.filter(p=>i.indexOf(p.type)>-1)))),s.pipe((0,Ul.O)(void 0),su(),(0,$c.h)(([c,p])=>p.length>0||!c),(0,Qa.U)(([c,p])=>p),an.iC)}auditTrail(i){return this.stateChanges(i).pipe((0,jc.R)((s,c)=>[...s,...c],[]))}snapshotChanges(i){const s=Op(i);return gl(this.query,s,this.afs.schedulers.outsideAngular).pipe(an.iC)}valueChanges(i={}){return Td(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qa.U)(s=>s.payload.docs.map(c=>i.idField?Object.assign(Object.assign({},c.data()),{[i.idField]:c.id}):c.data())),an.iC)}get(i){return(0,Ll.D)(this.query.get(i)).pipe(an.iC)}add(i){return this.ref.add(i)}doc(i){return new Cf(this.ref.doc(i),this.afs)}}class Cf{constructor(i,s){this.ref=i,this.afs=s}set(i,s){return this.ref.set(i,s)}update(i){return this.ref.update(i)}delete(){return this.ref.delete()}collection(i,s){const c=this.ref.collection(i),{ref:p,query:C}=_h(c,s);return new kp(p,C,this.afs)}snapshotChanges(){return function wf(u,i){return Pp(u,i).pipe((0,Ul.O)(void 0),su(),(0,Qa.U)(([s,c])=>c.exists?(null==s?void 0:s.exists)?{payload:c,type:"modified"}:{payload:c,type:"added"}:{payload:c,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(an.iC)}valueChanges(i={}){return this.snapshotChanges().pipe((0,Qa.U)(({payload:s})=>i.idField?Object.assign(Object.assign({},s.data()),{[i.idField]:s.id}):s.data()))}get(i){return(0,Ll.D)(this.ref.get(i)).pipe(an.iC)}}class bf{constructor(i,s){this.query=i,this.afs=s}stateChanges(i){return i&&0!==i.length?pl(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qa.U)(s=>s.filter(c=>i.indexOf(c.type)>-1)),(0,$c.h)(s=>s.length>0),an.iC):pl(this.query,this.afs.schedulers.outsideAngular).pipe(an.iC)}auditTrail(i){return this.stateChanges(i).pipe((0,jc.R)((s,c)=>[...s,...c],[]))}snapshotChanges(i){const s=Op(i);return gl(this.query,s,this.afs.schedulers.outsideAngular).pipe(an.iC)}valueChanges(i={}){return Td(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qa.U)(c=>c.payload.docs.map(p=>i.idField?Object.assign({[i.idField]:p.id},p.data()):p.data())),an.iC)}get(i){return(0,Ll.D)(this.query.get(i)).pipe(an.iC)}}const If=new E.OlP("angularfire2.enableFirestorePersistence"),mh=new E.OlP("angularfire2.firestore.persistenceSettings"),Dd=new E.OlP("angularfire2.firestore.settings"),Fp=new E.OlP("angularfire2.firestore.use-emulator");function _h(u,i=(s=>s)){return{query:i(u),ref:u}}let Lp=(()=>{class u{constructor(s,c,p,C,D,L,Y,ae,Ae,He,st,kt,Lt,Cn,ur,Ei,Ji){this.schedulers=Y;const hs=(0,Fl.on)(s,L,c),Es=Ae;He&&(0,Bl.nw)(hs,L,st,Lt,Cn,ur,kt,Ei),[this.firestore,this.persistenceEnabled$]=(0,Fl.cc)(`${hs.name}.firestore`,"AngularFirestore",hs.name,()=>{const Ma=L.runOutsideAngular(()=>hs.firestore());if(C&&Ma.settings(C),Es&&Ma.useEmulator(...Es),p&&!(0,he.PM)(D)){const Ys=()=>{try{return(0,Ll.D)(Ma.enablePersistence(ae||void 0).then(()=>!0,()=>!1))}catch(Qs){return"undefined"!=typeof console&&console.warn(Qs),(0,ff.of)(!1)}};return[Ma,L.runOutsideAngular(Ys)]}return[Ma,(0,ff.of)(!1)]},[C,Es,p])}collection(s,c){let p;p="string"==typeof s?this.firestore.collection(s):s;const{ref:C,query:D}=_h(p,c),L=this.schedulers.ngZone.run(()=>C);return new kp(L,D,this)}collectionGroup(s,c){const p=c||(D=>D),C=this.firestore.collectionGroup(s);return new bf(p(C),this)}doc(s){let c;c="string"==typeof s?this.firestore.doc(s):s;const p=this.schedulers.ngZone.run(()=>c);return new Cf(p,this)}createId(){return this.firestore.collection("_").doc().id}}return u.\u0275fac=function(s){return new(s||u)(E.LFG(Fl.Dh),E.LFG(Fl.xv,8),E.LFG(If,8),E.LFG(Dd,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(an.HU),E.LFG(mh,8),E.LFG(Fp,8),E.LFG(Bl.zQ,8),E.LFG(Bl.Qv,8),E.LFG(Bl.L6,8),E.LFG(Bl._Q,8),E.LFG(Bl.rT,8),E.LFG(Bl.lh,8),E.LFG(Bl.f7,8),E.LFG(gt.nm,8))},u.\u0275prov=E.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),Yg=(()=>{class u{constructor(){Gc.Z.registerVersion("angularfire",an.q4.full,"fst-compat")}static enablePersistence(s){return{ngModule:u,providers:[{provide:If,useValue:!0},{provide:mh,useValue:s}]}}}return u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=E.oAB({type:u}),u.\u0275inj=E.cJS({providers:[Lp]}),u})();var Df=j(3900),os=j(6961);class Af{constructor(i,s,c){this._delegate=i,this.task=s,this.ref=c}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Sf{constructor(i,s){this._delegate=i,this._ref=s,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Af(this._delegate.snapshot,this,this._ref)}then(i,s){return this._delegate.then(c=>{if(i)return i(new Af(c,this,this._ref))},s)}on(i,s,c,p){let C;return s&&(C="function"==typeof s?D=>s(new Af(D,this,this._ref)):{next:s.next?D=>s.next(new Af(D,this,this._ref)):void 0,complete:s.complete||void 0,error:s.error||void 0}),this._delegate.on(i,C,c||void 0,p||void 0)}}class xf{constructor(i,s){this._delegate=i,this._service=s}get prefixes(){return this._delegate.prefixes.map(i=>new au(i,this._service))}get items(){return this._delegate.items.map(i=>new au(i,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class au{constructor(i,s){this._delegate=i,this.storage=s}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(i){const s=(0,os.g6)(this._delegate,i);return new au(s,this.storage)}get root(){return new au(this._delegate.root,this.storage)}get parent(){const i=this._delegate.parent;return null==i?null:new au(i,this.storage)}put(i,s){return this._throwIfRoot("put"),new Sf((0,os.B0)(this._delegate,i,s),this)}putString(i,s=os.bm.RAW,c){this._throwIfRoot("putString");const p=(0,os.qm)(s,i),C=Object.assign({},c);return null==C.contentType&&null!=p.contentType&&(C.contentType=p.contentType),new Sf(new os.IX(this._delegate,new os.UJ(p.data,!0),C),this)}listAll(){return(0,os.aF)(this._delegate).then(i=>new xf(i,this.storage))}list(i){return(0,os.pb)(this._delegate,i||void 0).then(s=>new xf(s,this.storage))}getMetadata(){return(0,os.sd)(this._delegate)}updateMetadata(i){return(0,os.Ym)(this._delegate,i)}getDownloadURL(){return(0,os.Jt)(this._delegate)}delete(){return this._throwIfRoot("delete"),(0,os.oq)(this._delegate)}_throwIfRoot(i){if(""===this._delegate._location.path)throw(0,os.y4)(i)}}class Qg{constructor(i,s){this.app=i,this._delegate=s}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(i){if(yh(i))throw(0,os.gH)("ref() expected a child path but got a URL, use refFromURL instead.");return new au((0,os.iH)(this._delegate,i),this)}refFromURL(i){if(!yh(i))throw(0,os.gH)("refFromURL() expected a full URL but got a child path, use ref() instead.");try{os.gE.makeFromUrl(i,this._delegate.host)}catch(s){throw(0,os.gH)("refFromUrl() expected a valid full URL but got an invalid one.")}return new au((0,os.iH)(this._delegate,i),this)}setMaxUploadRetryTime(i){this._delegate.maxUploadRetryTime=i}setMaxOperationRetryTime(i){this._delegate.maxOperationRetryTime=i}useEmulator(i,s,c={}){(0,os.a1)(this._delegate,i,s,c)}}function yh(u){return/^[A-Za-z]+:\/\//.test(u)}function Pf(u,{instanceIdentifier:i}){const s=u.getProvider("app-compat").getImmediate(),c=u.getProvider("storage").getImmediate({identifier:i});return new Qg(s,c)}function Nf(u){const i=function jl(u){return new Tp.y(i=>{const s=D=>i.next(D);s(u.snapshot);const C=u.on("state_changed",s);return u.then(D=>{s(D),i.complete()},D=>{s(u.snapshot),(D=>{i.error(D)})(D)}),function(){C()}}).pipe(function Tf(u,i=_d.z){return(0,pf.e)((s,c)=>{let p=null,C=null,D=null;const L=()=>{if(p){p.unsubscribe(),p=null;const ae=C;C=null,c.next(ae)}};function Y(){const ae=D+u,Ae=i.now();if(Ae<ae)return p=this.schedule(void 0,ae-Ae),void c.add(p);L()}s.subscribe(new cc.Q(c,ae=>{C=ae,D=i.now(),p||(p=i.schedule(Y,u),c.add(p))},()=>{L(),c.complete()},void 0,()=>{C=p=null}))})}(0))}(u);return{task:u,then:u.then.bind(u),catch:u.catch.bind(u),pause:u.pause.bind(u),cancel:u.cancel.bind(u),resume:u.resume.bind(u),snapshotChanges:()=>i,percentageChanges:()=>i.pipe((0,Qa.U)(s=>s.bytesTransferred/s.totalBytes*100))}}function xu(u){return{getDownloadURL:()=>(0,ff.of)(void 0).pipe(an.fc,(0,Df.w)(()=>u.getDownloadURL()),an.iC),getMetadata:()=>(0,ff.of)(void 0).pipe(an.fc,(0,Df.w)(()=>u.getMetadata()),an.iC),delete:()=>(0,Ll.D)(u.delete()),child:i=>xu(u.child(i)),updateMetadata:i=>(0,Ll.D)(u.updateMetadata(i)),put:(i,s)=>Nf(u.put(i,s)),putString:(i,s,c)=>Nf(u.putString(i,s,c)),list:i=>(0,Ll.D)(u.list(i)),listAll:()=>(0,Ll.D)(u.listAll())}}!function Da(u){const i={TaskState:os.$Y,TaskEvent:os.FN,StringFormat:os.bm,Storage:Qg,Reference:au};u.INTERNAL.registerComponent(new ot.wA("storage-compat",Pf,"PUBLIC").setServiceProps(i).setMultipleInstances(!0)),u.registerVersion("@firebase/storage-compat","0.1.20")}(Hc.Z);const vh=new E.OlP("angularfire2.storageBucket"),Of=new E.OlP("angularfire2.storage.maxUploadRetryTime"),zc=new E.OlP("angularfire2.storage.maxOperationRetryTime"),Vp=new E.OlP("angularfire2.storage.use-emulator");let Eh=(()=>{class u{constructor(s,c,p,C,D,L,Y,ae,Ae,He){const st=(0,Fl.on)(s,D,c);this.storage=(0,Fl.cc)(`${st.name}.storage.${p}`,"AngularFireStorage",st.name,()=>{const kt=D.runOutsideAngular(()=>st.storage(p||void 0)),Lt=Ae;return Lt&&kt.useEmulator(...Lt),Y&&kt.setMaxUploadRetryTime(Y),ae&&kt.setMaxOperationRetryTime(ae),kt},[Y,ae])}ref(s){return xu(this.storage.ref(s))}refFromURL(s){return xu(this.storage.refFromURL(s))}upload(s,c,p){return xu(this.storage.ref(s)).put(c,p)}}return u.\u0275fac=function(s){return new(s||u)(E.LFG(Fl.Dh),E.LFG(Fl.xv,8),E.LFG(vh,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(an.HU),E.LFG(Of,8),E.LFG(zc,8),E.LFG(Vp,8),E.LFG(gt.nm,8))},u.\u0275prov=E.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),wh=(()=>{class u{}return u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=E.oAB({type:u}),u.\u0275inj=E.cJS({}),u})(),kf=(()=>{class u{constructor(){Gc.Z.registerVersion("angularfire",an.q4.full,"gcs-compat")}}return u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=E.oAB({type:u}),u.\u0275inj=E.cJS({providers:[Eh],imports:[wh]}),u})();var Hi=j(1777);function Bp(){return"undefined"!=typeof window&&void 0!==window.document}function jp(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ml(u){switch(u.length){case 0:return new Hi.ZN;case 1:return u[0];default:return new Hi.ZE(u)}}function Ff(u,i,s,c,p={},C={}){const D=[],L=[];let Y=-1,ae=null;if(c.forEach(Ae=>{const He=Ae.offset,st=He==Y,kt=st&&ae||{};Object.keys(Ae).forEach(Lt=>{let Cn=Lt,ur=Ae[Lt];if("offset"!==Lt)switch(Cn=i.normalizePropertyName(Cn,D),ur){case Hi.k1:ur=p[Lt];break;case Hi.l3:ur=C[Lt];break;default:ur=i.normalizeStyleValue(Lt,Cn,ur,D)}kt[Cn]=ur}),st||L.push(kt),ae=kt,Y=He}),D.length){const Ae="\n - ";throw new Error(`Unable to animate due to the following errors:${Ae}${D.join(Ae)}`)}return L}function $p(u,i,s,c){switch(i){case"start":u.onStart(()=>c(s&&Ch(s,"start",u)));break;case"done":u.onDone(()=>c(s&&Ch(s,"done",u)));break;case"destroy":u.onDestroy(()=>c(s&&Ch(s,"destroy",u)))}}function Ch(u,i,s){const c=s.totalTime,C=pc(u.element,u.triggerName,u.fromState,u.toState,i||u.phaseName,null==c?u.totalTime:c,!!s.disabled),D=u._data;return null!=D&&(C._data=D),C}function pc(u,i,s,c,p="",C=0,D){return{element:u,triggerName:i,fromState:s,toState:c,phaseName:p,totalTime:C,disabled:!!D}}function la(u,i,s){let c;return u instanceof Map?(c=u.get(i),c||u.set(i,c=s)):(c=u[i],c||(c=u[i]=s)),c}function Hp(u){const i=u.indexOf(":");return[u.substring(1,i),u.substr(i+1)]}let Lf=(u,i)=>!1,gc=(u,i,s)=>[];(jp()||"undefined"!=typeof Element)&&(Lf=Bp()?(u,i)=>{for(;i&&i!==document.documentElement;){if(i===u)return!0;i=i.parentNode||i.host}return!1}:(u,i)=>u.contains(i),gc=(u,i,s)=>{if(s)return Array.from(u.querySelectorAll(i));const c=u.querySelector(i);return c?[c]:[]});let qc=null,Xg=!1;function qo(u){qc||(qc=function bh(){return"undefined"!=typeof document?document.body:null}()||{},Xg=!!qc.style&&"WebkitAppearance"in qc.style);let i=!0;return qc.style&&!function t_(u){return"ebkit"==u.substring(1,6)}(u)&&(i=u in qc.style,!i&&Xg&&(i="Webkit"+u.charAt(0).toUpperCase()+u.substr(1)in qc.style)),i}const Ad=Lf,Uf=gc;function Ih(u){const i={};return Object.keys(u).forEach(s=>{const c=s.replace(/([a-z])([A-Z])/g,"$1-$2");i[c]=u[s]}),i}let Wp=(()=>{class u{validateStyleProperty(s){return qo(s)}matchesElement(s,c){return!1}containsElement(s,c){return Ad(s,c)}query(s,c,p){return Uf(s,c,p)}computeStyle(s,c,p){return p||""}animate(s,c,p,C,D,L=[],Y){return new Hi.ZN(p,C)}}return u.\u0275fac=function(s){return new(s||u)},u.\u0275prov=E.Yz7({token:u,factory:u.\u0275fac}),u})(),Th=(()=>{class u{}return u.NOOP=new Wp,u})();const Bf="ng-enter",Dh="ng-leave",Ah="ng-trigger",Sd=".ng-trigger",nm="ng-animating",jf=".ng-animating";function xd(u){if("number"==typeof u)return u;const i=u.match(/^(-?[\.\d]+)(m?s)/);return!i||i.length<2?0:Zc(parseFloat(i[1]),i[2])}function Zc(u,i){return"s"===i?1e3*u:u}function Md(u,i,s){return u.hasOwnProperty("duration")?u:function $f(u,i,s){let p,C=0,D="";if("string"==typeof u){const L=u.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===L)return i.push(`The provided timing value "${u}" is invalid.`),{duration:0,delay:0,easing:""};p=Zc(parseFloat(L[1]),L[2]);const Y=L[3];null!=Y&&(C=Zc(parseFloat(Y),L[4]));const ae=L[5];ae&&(D=ae)}else p=u;if(!s){let L=!1,Y=i.length;p<0&&(i.push("Duration values below 0 are not allowed for this animation step."),L=!0),C<0&&(i.push("Delay values below 0 are not allowed for this animation step."),L=!0),L&&i.splice(Y,0,`The provided timing value "${u}" is invalid.`)}return{duration:p,delay:C,easing:D}}(u,i,s)}function _l(u,i={}){return Object.keys(u).forEach(s=>{i[s]=u[s]}),i}function Ks(u,i,s={}){if(i)for(let c in u)s[c]=u[c];else _l(u,s);return s}function n_(u,i,s){return s?i+":"+s+";":""}function Gp(u){let i="";for(let s=0;s<u.style.length;s++){const c=u.style.item(s);i+=n_(0,c,u.style.getPropertyValue(c))}for(const s in u.style)u.style.hasOwnProperty(s)&&!s.startsWith("_")&&(i+=n_(0,Kp(s),u.style[s]));u.setAttribute("style",i)}function oo(u,i,s){u.style&&(Object.keys(i).forEach(c=>{const p=Zp(c);s&&!s.hasOwnProperty(c)&&(s[c]=u.style[p]),u.style[p]=i[c]}),jp()&&Gp(u))}function lu(u,i){u.style&&(Object.keys(i).forEach(s=>{const c=Zp(s);u.style[c]=""}),jp()&&Gp(u))}function Rd(u){return Array.isArray(u)?1==u.length?u[0]:(0,Hi.vP)(u):u}const im=new RegExp("{{\\s*(.+?)\\s*}}","g");function qp(u){let i=[];if("string"==typeof u){let s;for(;s=im.exec(u);)i.push(s[1]);im.lastIndex=0}return i}function mc(u,i,s){const c=u.toString(),p=c.replace(im,(C,D)=>{let L=i[D];return i.hasOwnProperty(D)||(s.push(`Please provide a value for the animation param ${D}`),L=""),L.toString()});return p==c?u:p}function Hf(u){const i=[];let s=u.next();for(;!s.done;)i.push(s.value),s=u.next();return i}const Sh=/-+([a-z0-9])/g;function Zp(u){return u.replace(Sh,(...i)=>i[1].toUpperCase())}function Kp(u){return u.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function sm(u,i){return 0===u||0===i}function Wf(u,i,s){const c=Object.keys(s);if(c.length&&i.length){let C=i[0],D=[];if(c.forEach(L=>{C.hasOwnProperty(L)||D.push(L),C[L]=s[L]}),D.length)for(var p=1;p<i.length;p++){let L=i[p];D.forEach(function(Y){L[Y]=xh(u,Y)})}}return i}function Aa(u,i,s){switch(i.type){case 7:return u.visitTrigger(i,s);case 0:return u.visitState(i,s);case 1:return u.visitTransition(i,s);case 2:return u.visitSequence(i,s);case 3:return u.visitGroup(i,s);case 4:return u.visitAnimate(i,s);case 5:return u.visitKeyframes(i,s);case 6:return u.visitStyle(i,s);case 8:return u.visitReference(i,s);case 9:return u.visitAnimateChild(i,s);case 10:return u.visitAnimateRef(i,s);case 11:return u.visitQuery(i,s);case 12:return u.visitStagger(i,s);default:throw new Error(`Unable to resolve animation metadata node #${i.type}`)}}function xh(u,i){return window.getComputedStyle(u)[i]}function Pd(u,i){const s=[];return"string"==typeof u?u.split(/\s*,\s*/).forEach(c=>function r_(u,i,s){if(":"==u[0]){const Y=function Kc(u,i){switch(u){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(s,c)=>parseFloat(c)>parseFloat(s);case":decrement":return(s,c)=>parseFloat(c)<parseFloat(s);default:return i.push(`The transition alias value "${u}" is not supported`),"* => *"}}(u,s);if("function"==typeof Y)return void i.push(Y);u=Y}const c=u.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==c||c.length<4)return s.push(`The provided transition expression "${u}" is not supported`),i;const p=c[1],C=c[2],D=c[3];i.push(Od(p,D));"<"==C[0]&&!("*"==p&&"*"==D)&&i.push(Od(D,p))}(c,s,i)):s.push(u),s}const Gf=new Set(["true","1"]),Nd=new Set(["false","0"]);function Od(u,i){const s=Gf.has(u)||Nd.has(u),c=Gf.has(i)||Nd.has(i);return(p,C)=>{let D="*"==u||u==p,L="*"==i||i==C;return!D&&s&&"boolean"==typeof p&&(D=p?Gf.has(u):Nd.has(u)),!L&&c&&"boolean"==typeof C&&(L=C?Gf.has(i):Nd.has(i)),D&&L}}const Mh=new RegExp("s*:selfs*,?","g");function ao(u,i,s){return new zf(u).build(i,s)}class zf{constructor(i){this._driver=i}build(i,s){const c=new Yc(s);return this._resetContextStyleTimingState(c),Aa(this,Rd(i),c)}_resetContextStyleTimingState(i){i.currentQuerySelector="",i.collectedStyles={},i.collectedStyles[""]={},i.currentTime=0}visitTrigger(i,s){let c=s.queryCount=0,p=s.depCount=0;const C=[],D=[];return"@"==i.name.charAt(0)&&s.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),i.definitions.forEach(L=>{if(this._resetContextStyleTimingState(s),0==L.type){const Y=L,ae=Y.name;ae.toString().split(/\s*,\s*/).forEach(Ae=>{Y.name=Ae,C.push(this.visitState(Y,s))}),Y.name=ae}else if(1==L.type){const Y=this.visitTransition(L,s);c+=Y.queryCount,p+=Y.depCount,D.push(Y)}else s.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:i.name,states:C,transitions:D,queryCount:c,depCount:p,options:null}}visitState(i,s){const c=this.visitStyle(i.styles,s),p=i.options&&i.options.params||null;if(c.containsDynamicStyles){const C=new Set,D=p||{};if(c.styles.forEach(L=>{if(uu(L)){const Y=L;Object.keys(Y).forEach(ae=>{qp(Y[ae]).forEach(Ae=>{D.hasOwnProperty(Ae)||C.add(Ae)})})}}),C.size){const L=Hf(C.values());s.errors.push(`state("${i.name}", ...) must define default values for all the following style substitutions: ${L.join(", ")}`)}}return{type:0,name:i.name,style:c,options:p?{params:p}:null}}visitTransition(i,s){s.queryCount=0,s.depCount=0;const c=Aa(this,Rd(i.animation),s);return{type:1,matchers:Pd(i.expr,s.errors),animation:c,queryCount:s.queryCount,depCount:s.depCount,options:Nr(i.options)}}visitSequence(i,s){return{type:2,steps:i.steps.map(c=>Aa(this,c,s)),options:Nr(i.options)}}visitGroup(i,s){const c=s.currentTime;let p=0;const C=i.steps.map(D=>{s.currentTime=c;const L=Aa(this,D,s);return p=Math.max(p,s.currentTime),L});return s.currentTime=p,{type:3,steps:C,options:Nr(i.options)}}visitAnimate(i,s){const c=function Ru(u,i){let s=null;if(u.hasOwnProperty("duration"))s=u;else if("number"==typeof u)return Pu(Md(u,i).duration,0,"");const c=u;if(c.split(/\s+/).some(C=>"{"==C.charAt(0)&&"{"==C.charAt(1))){const C=Pu(0,0,"");return C.dynamic=!0,C.strValue=c,C}return s=s||Md(c,i),Pu(s.duration,s.delay,s.easing)}(i.timings,s.errors);s.currentAnimateTimings=c;let p,C=i.styles?i.styles:(0,Hi.oB)({});if(5==C.type)p=this.visitKeyframes(C,s);else{let D=i.styles,L=!1;if(!D){L=!0;const ae={};c.easing&&(ae.easing=c.easing),D=(0,Hi.oB)(ae)}s.currentTime+=c.duration+c.delay;const Y=this.visitStyle(D,s);Y.isEmptyStep=L,p=Y}return s.currentAnimateTimings=null,{type:4,timings:c,style:p,options:null}}visitStyle(i,s){const c=this._makeStyleAst(i,s);return this._validateStyleAst(c,s),c}_makeStyleAst(i,s){const c=[];Array.isArray(i.styles)?i.styles.forEach(D=>{"string"==typeof D?D==Hi.l3?c.push(D):s.errors.push(`The provided style string value ${D} is not allowed.`):c.push(D)}):c.push(i.styles);let p=!1,C=null;return c.forEach(D=>{if(uu(D)){const L=D,Y=L.easing;if(Y&&(C=Y,delete L.easing),!p)for(let ae in L)if(L[ae].toString().indexOf("{{")>=0){p=!0;break}}}),{type:6,styles:c,easing:C,offset:i.offset,containsDynamicStyles:p,options:null}}_validateStyleAst(i,s){const c=s.currentAnimateTimings;let p=s.currentTime,C=s.currentTime;c&&C>0&&(C-=c.duration+c.delay),i.styles.forEach(D=>{"string"!=typeof D&&Object.keys(D).forEach(L=>{if(!this._driver.validateStyleProperty(L))return void s.errors.push(`The provided animation property "${L}" is not a supported CSS property for animations`);const Y=s.collectedStyles[s.currentQuerySelector],ae=Y[L];let Ae=!0;ae&&(C!=p&&C>=ae.startTime&&p<=ae.endTime&&(s.errors.push(`The CSS property "${L}" that exists between the times of "${ae.startTime}ms" and "${ae.endTime}ms" is also being animated in a parallel animation between the times of "${C}ms" and "${p}ms"`),Ae=!1),C=ae.startTime),Ae&&(Y[L]={startTime:C,endTime:p}),s.options&&function zp(u,i,s){const c=i.params||{},p=qp(u);p.length&&p.forEach(C=>{c.hasOwnProperty(C)||s.push(`Unable to resolve the local animation param ${C} in the given list of values`)})}(D[L],s.options,s.errors)})})}visitKeyframes(i,s){const c={type:5,styles:[],options:null};if(!s.currentAnimateTimings)return s.errors.push("keyframes() must be placed inside of a call to animate()"),c;let C=0;const D=[];let L=!1,Y=!1,ae=0;const Ae=i.steps.map(Ei=>{const Ji=this._makeStyleAst(Ei,s);let hs=null!=Ji.offset?Ji.offset:function Qc(u){if("string"==typeof u)return null;let i=null;if(Array.isArray(u))u.forEach(s=>{if(uu(s)&&s.hasOwnProperty("offset")){const c=s;i=parseFloat(c.offset),delete c.offset}});else if(uu(u)&&u.hasOwnProperty("offset")){const s=u;i=parseFloat(s.offset),delete s.offset}return i}(Ji.styles),Es=0;return null!=hs&&(C++,Es=Ji.offset=hs),Y=Y||Es<0||Es>1,L=L||Es<ae,ae=Es,D.push(Es),Ji});Y&&s.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),L&&s.errors.push("Please ensure that all keyframe offsets are in order");const He=i.steps.length;let st=0;C>0&&C<He?s.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==C&&(st=1/(He-1));const kt=He-1,Lt=s.currentTime,Cn=s.currentAnimateTimings,ur=Cn.duration;return Ae.forEach((Ei,Ji)=>{const hs=st>0?Ji==kt?1:st*Ji:D[Ji],Es=hs*ur;s.currentTime=Lt+Cn.delay+Es,Cn.duration=Es,this._validateStyleAst(Ei,s),Ei.offset=hs,c.styles.push(Ei)}),c}visitReference(i,s){return{type:8,animation:Aa(this,Rd(i.animation),s),options:Nr(i.options)}}visitAnimateChild(i,s){return s.depCount++,{type:9,options:Nr(i.options)}}visitAnimateRef(i,s){return{type:10,animation:this.visitReference(i.animation,s),options:Nr(i.options)}}visitQuery(i,s){const c=s.currentQuerySelector,p=i.options||{};s.queryCount++,s.currentQuery=i;const[C,D]=function Sa(u){const i=!!u.split(/\s*,\s*/).find(s=>":self"==s);return i&&(u=u.replace(Mh,"")),u=u.replace(/@\*/g,Sd).replace(/@\w+/g,s=>Sd+"-"+s.substr(1)).replace(/:animating/g,jf),[u,i]}(i.selector);s.currentQuerySelector=c.length?c+" "+C:C,la(s.collectedStyles,s.currentQuerySelector,{});const L=Aa(this,Rd(i.animation),s);return s.currentQuery=null,s.currentQuerySelector=c,{type:11,selector:C,limit:p.limit||0,optional:!!p.optional,includeSelf:D,animation:L,originalSelector:i.selector,options:Nr(i.options)}}visitStagger(i,s){s.currentQuery||s.errors.push("stagger() can only be used inside of query()");const c="full"===i.timings?{duration:0,delay:0,easing:"full"}:Md(i.timings,s.errors,!0);return{type:12,animation:Aa(this,Rd(i.animation),s),timings:c,options:null}}}class Yc{constructor(i){this.errors=i,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function uu(u){return!Array.isArray(u)&&"object"==typeof u}function Nr(u){return u?(u=_l(u)).params&&(u.params=function Rh(u){return u?_l(u):null}(u.params)):u={},u}function Pu(u,i,s){return{duration:u,delay:i,easing:s}}function Nu(u,i,s,c,p,C,D=null,L=!1){return{type:1,element:u,keyframes:i,preStyleProps:s,postStyleProps:c,duration:p,delay:C,totalTime:p+C,easing:D,subTimeline:L}}class cu{constructor(){this._map=new Map}get(i){return this._map.get(i)||[]}append(i,s){let c=this._map.get(i);c||this._map.set(i,c=[]),c.push(...s)}has(i){return this._map.has(i)}clear(){this._map.clear()}}const Ds=new RegExp(":enter","g"),$l=new RegExp(":leave","g");function qf(u,i,s,c,p,C={},D={},L,Y,ae=[]){return(new om).buildKeyframes(u,i,s,c,p,C,D,L,Y,ae)}class om{buildKeyframes(i,s,c,p,C,D,L,Y,ae,Ae=[]){ae=ae||new cu;const He=new Zf(i,s,ae,p,C,Ae,[]);He.options=Y,He.currentTimeline.setStyles([D],null,He.errors,Y),Aa(this,c,He);const st=He.timelines.filter(kt=>kt.containsAnimation());if(Object.keys(L).length){let kt;for(let Lt=st.length-1;Lt>=0;Lt--){const Cn=st[Lt];if(Cn.element===s){kt=Cn;break}}kt&&!kt.allowOnlyTimelineStyles()&&kt.setStyles([L],null,He.errors,Y)}return st.length?st.map(kt=>kt.buildKeyframes()):[Nu(s,[],[],[],0,0,"",!1)]}visitTrigger(i,s){}visitState(i,s){}visitTransition(i,s){}visitAnimateChild(i,s){const c=s.subInstructions.get(s.element);if(c){const p=s.createSubContext(i.options),C=s.currentTimeline.currentTime,D=this._visitSubInstructions(c,p,p.options);C!=D&&s.transformIntoNewTimeline(D)}s.previousNode=i}visitAnimateRef(i,s){const c=s.createSubContext(i.options);c.transformIntoNewTimeline(),this.visitReference(i.animation,c),s.transformIntoNewTimeline(c.currentTimeline.currentTime),s.previousNode=i}_visitSubInstructions(i,s,c){let C=s.currentTimeline.currentTime;const D=null!=c.duration?xd(c.duration):null,L=null!=c.delay?xd(c.delay):null;return 0!==D&&i.forEach(Y=>{const ae=s.appendInstructionToTimeline(Y,D,L);C=Math.max(C,ae.duration+ae.delay)}),C}visitReference(i,s){s.updateOptions(i.options,!0),Aa(this,i.animation,s),s.previousNode=i}visitSequence(i,s){const c=s.subContextCount;let p=s;const C=i.options;if(C&&(C.params||C.delay)&&(p=s.createSubContext(C),p.transformIntoNewTimeline(),null!=C.delay)){6==p.previousNode.type&&(p.currentTimeline.snapshotCurrentStyles(),p.previousNode=kd);const D=xd(C.delay);p.delayNextStep(D)}i.steps.length&&(i.steps.forEach(D=>Aa(this,D,p)),p.currentTimeline.applyStylesToKeyframe(),p.subContextCount>c&&p.transformIntoNewTimeline()),s.previousNode=i}visitGroup(i,s){const c=[];let p=s.currentTimeline.currentTime;const C=i.options&&i.options.delay?xd(i.options.delay):0;i.steps.forEach(D=>{const L=s.createSubContext(i.options);C&&L.delayNextStep(C),Aa(this,D,L),p=Math.max(p,L.currentTimeline.currentTime),c.push(L.currentTimeline)}),c.forEach(D=>s.currentTimeline.mergeTimelineCollectedStyles(D)),s.transformIntoNewTimeline(p),s.previousNode=i}_visitTiming(i,s){if(i.dynamic){const c=i.strValue;return Md(s.params?mc(c,s.params,s.errors):c,s.errors)}return{duration:i.duration,delay:i.delay,easing:i.easing}}visitAnimate(i,s){const c=s.currentAnimateTimings=this._visitTiming(i.timings,s),p=s.currentTimeline;c.delay&&(s.incrementTime(c.delay),p.snapshotCurrentStyles());const C=i.style;5==C.type?this.visitKeyframes(C,s):(s.incrementTime(c.duration),this.visitStyle(C,s),p.applyStylesToKeyframe()),s.currentAnimateTimings=null,s.previousNode=i}visitStyle(i,s){const c=s.currentTimeline,p=s.currentAnimateTimings;!p&&c.getCurrentStyleProperties().length&&c.forwardFrame();const C=p&&p.easing||i.easing;i.isEmptyStep?c.applyEmptyStep(C):c.setStyles(i.styles,C,s.errors,s.options),s.previousNode=i}visitKeyframes(i,s){const c=s.currentAnimateTimings,p=s.currentTimeline.duration,C=c.duration,L=s.createSubContext().currentTimeline;L.easing=c.easing,i.styles.forEach(Y=>{L.forwardTime((Y.offset||0)*C),L.setStyles(Y.styles,Y.easing,s.errors,s.options),L.applyStylesToKeyframe()}),s.currentTimeline.mergeTimelineCollectedStyles(L),s.transformIntoNewTimeline(p+C),s.previousNode=i}visitQuery(i,s){const c=s.currentTimeline.currentTime,p=i.options||{},C=p.delay?xd(p.delay):0;C&&(6===s.previousNode.type||0==c&&s.currentTimeline.getCurrentStyleProperties().length)&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=kd);let D=c;const L=s.invokeQuery(i.selector,i.originalSelector,i.limit,i.includeSelf,!!p.optional,s.errors);s.currentQueryTotal=L.length;let Y=null;L.forEach((ae,Ae)=>{s.currentQueryIndex=Ae;const He=s.createSubContext(i.options,ae);C&&He.delayNextStep(C),ae===s.element&&(Y=He.currentTimeline),Aa(this,i.animation,He),He.currentTimeline.applyStylesToKeyframe(),D=Math.max(D,He.currentTimeline.currentTime)}),s.currentQueryIndex=0,s.currentQueryTotal=0,s.transformIntoNewTimeline(D),Y&&(s.currentTimeline.mergeTimelineCollectedStyles(Y),s.currentTimeline.snapshotCurrentStyles()),s.previousNode=i}visitStagger(i,s){const c=s.parentContext,p=s.currentTimeline,C=i.timings,D=Math.abs(C.duration),L=D*(s.currentQueryTotal-1);let Y=D*s.currentQueryIndex;switch(C.duration<0?"reverse":C.easing){case"reverse":Y=L-Y;break;case"full":Y=c.currentStaggerTime}const Ae=s.currentTimeline;Y&&Ae.delayNextStep(Y);const He=Ae.currentTime;Aa(this,i.animation,s),s.previousNode=i,c.currentStaggerTime=p.currentTime-He+(p.startTime-c.currentTimeline.startTime)}}const kd={};class Zf{constructor(i,s,c,p,C,D,L,Y){this._driver=i,this.element=s,this.subInstructions=c,this._enterClassName=p,this._leaveClassName=C,this.errors=D,this.timelines=L,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=kd,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Y||new Jc(this._driver,s,0),L.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(i,s){if(!i)return;const c=i;let p=this.options;null!=c.duration&&(p.duration=xd(c.duration)),null!=c.delay&&(p.delay=xd(c.delay));const C=c.params;if(C){let D=p.params;D||(D=this.options.params={}),Object.keys(C).forEach(L=>{(!s||!D.hasOwnProperty(L))&&(D[L]=mc(C[L],D,this.errors))})}}_copyOptions(){const i={};if(this.options){const s=this.options.params;if(s){const c=i.params={};Object.keys(s).forEach(p=>{c[p]=s[p]})}}return i}createSubContext(i=null,s,c){const p=s||this.element,C=new Zf(this._driver,p,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(p,c||0));return C.previousNode=this.previousNode,C.currentAnimateTimings=this.currentAnimateTimings,C.options=this._copyOptions(),C.updateOptions(i),C.currentQueryIndex=this.currentQueryIndex,C.currentQueryTotal=this.currentQueryTotal,C.parentContext=this,this.subContextCount++,C}transformIntoNewTimeline(i){return this.previousNode=kd,this.currentTimeline=this.currentTimeline.fork(this.element,i),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(i,s,c){const p={duration:null!=s?s:i.duration,delay:this.currentTimeline.currentTime+(null!=c?c:0)+i.delay,easing:""},C=new am(this._driver,i.element,i.keyframes,i.preStyleProps,i.postStyleProps,p,i.stretchStartingKeyframe);return this.timelines.push(C),p}incrementTime(i){this.currentTimeline.forwardTime(this.currentTimeline.duration+i)}delayNextStep(i){i>0&&this.currentTimeline.delayNextStep(i)}invokeQuery(i,s,c,p,C,D){let L=[];if(p&&L.push(this.element),i.length>0){i=(i=i.replace(Ds,"."+this._enterClassName)).replace($l,"."+this._leaveClassName);let ae=this._driver.query(this.element,i,1!=c);0!==c&&(ae=c<0?ae.slice(ae.length+c,ae.length):ae.slice(0,c)),L.push(...ae)}return!C&&0==L.length&&D.push(`\`query("${s}")\` returned zero elements. (Use \`query("${s}", { optional: true })\` if you wish to allow this.)`),L}}class Jc{constructor(i,s,c,p){this._driver=i,this.element=s,this.startTime=c,this._elementTimelineStylesLookup=p,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(s),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(s,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(i){const s=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||s?(this.forwardTime(this.currentTime+i),s&&this.snapshotCurrentStyles()):this.startTime+=i}fork(i,s){return this.applyStylesToKeyframe(),new Jc(this._driver,i,s||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(i){this.applyStylesToKeyframe(),this.duration=i,this._loadKeyframe()}_updateStyle(i,s){this._localTimelineStyles[i]=s,this._globalTimelineStyles[i]=s,this._styleSummary[i]={time:this.currentTime,value:s}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(i){i&&(this._previousKeyframe.easing=i),Object.keys(this._globalTimelineStyles).forEach(s=>{this._backFill[s]=this._globalTimelineStyles[s]||Hi.l3,this._currentKeyframe[s]=Hi.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(i,s,c,p){s&&(this._previousKeyframe.easing=s);const C=p&&p.params||{},D=function i_(u,i){const s={};let c;return u.forEach(p=>{"*"===p?(c=c||Object.keys(i),c.forEach(C=>{s[C]=Hi.l3})):Ks(p,!1,s)}),s}(i,this._globalTimelineStyles);Object.keys(D).forEach(L=>{const Y=mc(D[L],C,c);this._pendingStyles[L]=Y,this._localTimelineStyles.hasOwnProperty(L)||(this._backFill[L]=this._globalTimelineStyles.hasOwnProperty(L)?this._globalTimelineStyles[L]:Hi.l3),this._updateStyle(L,Y)})}applyStylesToKeyframe(){const i=this._pendingStyles,s=Object.keys(i);0!=s.length&&(this._pendingStyles={},s.forEach(c=>{this._currentKeyframe[c]=i[c]}),Object.keys(this._localTimelineStyles).forEach(c=>{this._currentKeyframe.hasOwnProperty(c)||(this._currentKeyframe[c]=this._localTimelineStyles[c])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(i=>{const s=this._localTimelineStyles[i];this._pendingStyles[i]=s,this._updateStyle(i,s)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const i=[];for(let s in this._currentKeyframe)i.push(s);return i}mergeTimelineCollectedStyles(i){Object.keys(i._styleSummary).forEach(s=>{const c=this._styleSummary[s],p=i._styleSummary[s];(!c||p.time>c.time)&&this._updateStyle(s,p.value)})}buildKeyframes(){this.applyStylesToKeyframe();const i=new Set,s=new Set,c=1===this._keyframes.size&&0===this.duration;let p=[];this._keyframes.forEach((L,Y)=>{const ae=Ks(L,!0);Object.keys(ae).forEach(Ae=>{const He=ae[Ae];He==Hi.k1?i.add(Ae):He==Hi.l3&&s.add(Ae)}),c||(ae.offset=Y/this.duration),p.push(ae)});const C=i.size?Hf(i.values()):[],D=s.size?Hf(s.values()):[];if(c){const L=p[0],Y=_l(L);L.offset=0,Y.offset=1,p=[L,Y]}return Nu(this.element,p,C,D,this.duration,this.startTime,this.easing,!1)}}class am extends Jc{constructor(i,s,c,p,C,D,L=!1){super(i,s,D.delay),this.keyframes=c,this.preStyleProps=p,this.postStyleProps=C,this._stretchStartingKeyframe=L,this.timings={duration:D.duration,delay:D.delay,easing:D.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let i=this.keyframes,{delay:s,duration:c,easing:p}=this.timings;if(this._stretchStartingKeyframe&&s){const C=[],D=c+s,L=s/D,Y=Ks(i[0],!1);Y.offset=0,C.push(Y);const ae=Ks(i[0],!1);ae.offset=Fd(L),C.push(ae);const Ae=i.length-1;for(let He=1;He<=Ae;He++){let st=Ks(i[He],!1);st.offset=Fd((s+st.offset*c)/D),C.push(st)}c=D,s=0,p="",i=C}return Nu(this.element,i,this.preStyleProps,this.postStyleProps,c,s,p,!0)}}function Fd(u,i=3){const s=Math.pow(10,i-1);return Math.round(u*s)/s}class Kf{}class s_ extends Kf{normalizePropertyName(i,s){return Zp(i)}normalizeStyleValue(i,s,c,p){let C="";const D=c.toString().trim();if(lm[s]&&0!==c&&"0"!==c)if("number"==typeof c)C="px";else{const L=c.match(/^[+-]?[\d\.]+([a-z]*)$/);L&&0==L[1].length&&p.push(`Please provide a CSS unit value for ${i}:${c}`)}return D+C}}const lm=(()=>function o_(u){const i={};return u.forEach(s=>i[s]=!0),i}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Yf(u,i,s,c,p,C,D,L,Y,ae,Ae,He,st){return{type:0,element:u,triggerName:i,isRemovalTransition:p,fromState:s,fromStyles:C,toState:c,toStyles:D,timelines:L,queriedElements:Y,preStyleProps:ae,postStyleProps:Ae,totalTime:He,errors:st}}const Ph={};class Qp{constructor(i,s,c){this._triggerName=i,this.ast=s,this._stateStyles=c}match(i,s,c,p){return function um(u,i,s,c,p){return u.some(C=>C(i,s,c,p))}(this.ast.matchers,i,s,c,p)}buildStyles(i,s,c){const p=this._stateStyles["*"],C=this._stateStyles[i],D=p?p.buildStyles(s,c):{};return C?C.buildStyles(s,c):D}build(i,s,c,p,C,D,L,Y,ae,Ae){const He=[],st=this.ast.options&&this.ast.options.params||Ph,Lt=this.buildStyles(c,L&&L.params||Ph,He),Cn=Y&&Y.params||Ph,ur=this.buildStyles(p,Cn,He),Ei=new Set,Ji=new Map,hs=new Map,Es="void"===p,Ma={params:Object.assign(Object.assign({},st),Cn)},Ys=Ae?[]:qf(i,s,this.ast.animation,C,D,Lt,ur,Ma,ae,He);let Qs=0;if(Ys.forEach(Lu=>{Qs=Math.max(Lu.duration+Lu.delay,Qs)}),He.length)return Yf(s,this._triggerName,c,p,Es,Lt,ur,[],[],Ji,hs,Qs,He);Ys.forEach(Lu=>{const gu=Lu.element,sp=la(Ji,gu,{});Lu.preStyleProps.forEach(yc=>sp[yc]=!0);const el=la(hs,gu,{});Lu.postStyleProps.forEach(yc=>el[yc]=!0),gu!==s&&Ei.add(gu)});const Fu=Hf(Ei.values());return Yf(s,this._triggerName,c,p,Es,Lt,ur,Ys,Fu,Ji,hs,Qs)}}class Jp{constructor(i,s,c){this.styles=i,this.defaultParams=s,this.normalizer=c}buildStyles(i,s){const c={},p=_l(this.defaultParams);return Object.keys(i).forEach(C=>{const D=i[C];null!=D&&(p[C]=D)}),this.styles.styles.forEach(C=>{if("string"!=typeof C){const D=C;Object.keys(D).forEach(L=>{let Y=D[L];Y.length>1&&(Y=mc(Y,p,s));const ae=this.normalizer.normalizePropertyName(L,s);Y=this.normalizer.normalizeStyleValue(L,ae,Y,s),c[ae]=Y})}}),c}}class Ld{constructor(i,s,c){this.name=i,this.ast=s,this._normalizer=c,this.transitionFactories=[],this.states={},s.states.forEach(p=>{this.states[p.name]=new Jp(p.style,p.options&&p.options.params||{},c)}),cm(this.states,"true","1"),cm(this.states,"false","0"),s.transitions.forEach(p=>{this.transitionFactories.push(new Qp(i,p,this.states))}),this.fallbackTransition=function Xp(u,i,s){return new Qp(u,{type:1,animation:{type:2,steps:[],options:null},matchers:[(D,L)=>!0],options:null,queryCount:0,depCount:0},i)}(i,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(i,s,c,p){return this.transitionFactories.find(D=>D.match(i,s,c,p))||null}matchStyles(i,s,c){return this.fallbackTransition.buildStyles(i,s,c)}}function cm(u,i,s){u.hasOwnProperty(i)?u.hasOwnProperty(s)||(u[s]=u[i]):u.hasOwnProperty(s)&&(u[i]=u[s])}const eg=new cu;class dm{constructor(i,s,c){this.bodyNode=i,this._driver=s,this._normalizer=c,this._animations={},this._playersById={},this.players=[]}register(i,s){const c=[],p=ao(this._driver,s,c);if(c.length)throw new Error(`Unable to build the animation due to the following errors: ${c.join("\n")}`);this._animations[i]=p}_buildPlayer(i,s,c){const p=i.element,C=Ff(0,this._normalizer,0,i.keyframes,s,c);return this._driver.animate(p,C,i.duration,i.delay,i.easing,[],!0)}create(i,s,c={}){const p=[],C=this._animations[i];let D;const L=new Map;if(C?(D=qf(this._driver,s,C,Bf,Dh,{},{},c,eg,p),D.forEach(Ae=>{const He=la(L,Ae.element,{});Ae.postStyleProps.forEach(st=>He[st]=null)})):(p.push("The requested animation doesn't exist or has already been destroyed"),D=[]),p.length)throw new Error(`Unable to create the animation due to the following errors: ${p.join("\n")}`);L.forEach((Ae,He)=>{Object.keys(Ae).forEach(st=>{Ae[st]=this._driver.computeStyle(He,st,Hi.l3)})});const ae=ml(D.map(Ae=>{const He=L.get(Ae.element);return this._buildPlayer(Ae,{},He)}));return this._playersById[i]=ae,ae.onDestroy(()=>this.destroy(i)),this.players.push(ae),ae}destroy(i){const s=this._getPlayer(i);s.destroy(),delete this._playersById[i];const c=this.players.indexOf(s);c>=0&&this.players.splice(c,1)}_getPlayer(i){const s=this._playersById[i];if(!s)throw new Error(`Unable to find the timeline player referenced by ${i}`);return s}listen(i,s,c,p){const C=pc(s,"","","");return $p(this._getPlayer(i),c,C,p),()=>{}}command(i,s,c,p){if("register"==c)return void this.register(i,p[0]);if("create"==c)return void this.create(i,s,p[0]||{});const C=this._getPlayer(i);switch(c){case"play":C.play();break;case"pause":C.pause();break;case"reset":C.reset();break;case"restart":C.restart();break;case"finish":C.finish();break;case"init":C.init();break;case"setPosition":C.setPosition(parseFloat(p[0]));break;case"destroy":this.destroy(i)}}}const Qf="ng-animate-queued",Xc="ng-animate-disabled",hm=[],rg={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},fm={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Zo="__ng_removed";class ig{constructor(i,s=""){this.namespaceId=s;const c=i&&i.hasOwnProperty("value");if(this.value=function as(u){return null!=u?u:null}(c?i.value:i),c){const C=_l(i);delete C.value,this.options=C}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(i){const s=i.params;if(s){const c=this.options.params;Object.keys(s).forEach(p=>{null==c[p]&&(c[p]=s[p])})}}}const Vd="void",sg=new ig(Vd);class l_{constructor(i,s,c){this.id=i,this.hostElement=s,this._engine=c,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+i,xa(s,this._hostClassName)}listen(i,s,c,p){if(!this._triggers.hasOwnProperty(s))throw new Error(`Unable to listen on the animation trigger event "${c}" because the animation trigger "${s}" doesn't exist!`);if(null==c||0==c.length)throw new Error(`Unable to listen on the animation trigger "${s}" because the provided event is undefined!`);if(!function pm(u){return"start"==u||"done"==u}(c))throw new Error(`The provided animation trigger event "${c}" for the animation trigger "${s}" is not supported!`);const C=la(this._elementListeners,i,[]),D={name:s,phase:c,callback:p};C.push(D);const L=la(this._engine.statesByElement,i,{});return L.hasOwnProperty(s)||(xa(i,Ah),xa(i,Ah+"-"+s),L[s]=sg),()=>{this._engine.afterFlush(()=>{const Y=C.indexOf(D);Y>=0&&C.splice(Y,1),this._triggers[s]||delete L[s]})}}register(i,s){return!this._triggers[i]&&(this._triggers[i]=s,!0)}_getTrigger(i){const s=this._triggers[i];if(!s)throw new Error(`The provided animation trigger "${i}" has not been registered!`);return s}trigger(i,s,c,p=!0){const C=this._getTrigger(s),D=new ag(this.id,s,i);let L=this._engine.statesByElement.get(i);L||(xa(i,Ah),xa(i,Ah+"-"+s),this._engine.statesByElement.set(i,L={}));let Y=L[s];const ae=new ig(c,this.id);if(!(c&&c.hasOwnProperty("value"))&&Y&&ae.absorbOptions(Y.options),L[s]=ae,Y||(Y=sg),ae.value!==Vd&&Y.value===ae.value){if(!function cg(u,i){const s=Object.keys(u),c=Object.keys(i);if(s.length!=c.length)return!1;for(let p=0;p<s.length;p++){const C=s[p];if(!i.hasOwnProperty(C)||u[C]!==i[C])return!1}return!0}(Y.params,ae.params)){const Cn=[],ur=C.matchStyles(Y.value,Y.params,Cn),Ei=C.matchStyles(ae.value,ae.params,Cn);Cn.length?this._engine.reportError(Cn):this._engine.afterFlush(()=>{lu(i,ur),oo(i,Ei)})}return}const st=la(this._engine.playersByElement,i,[]);st.forEach(Cn=>{Cn.namespaceId==this.id&&Cn.triggerName==s&&Cn.queued&&Cn.destroy()});let kt=C.matchTransition(Y.value,ae.value,i,ae.params),Lt=!1;if(!kt){if(!p)return;kt=C.fallbackTransition,Lt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:s,transition:kt,fromState:Y,toState:ae,player:D,isFallbackTransition:Lt}),Lt||(xa(i,Qf),D.onStart(()=>{ed(i,Qf)})),D.onDone(()=>{let Cn=this.players.indexOf(D);Cn>=0&&this.players.splice(Cn,1);const ur=this._engine.playersByElement.get(i);if(ur){let Ei=ur.indexOf(D);Ei>=0&&ur.splice(Ei,1)}}),this.players.push(D),st.push(D),D}deregister(i){delete this._triggers[i],this._engine.statesByElement.forEach((s,c)=>{delete s[i]}),this._elementListeners.forEach((s,c)=>{this._elementListeners.set(c,s.filter(p=>p.name!=i))})}clearElementCache(i){this._engine.statesByElement.delete(i),this._elementListeners.delete(i);const s=this._engine.playersByElement.get(i);s&&(s.forEach(c=>c.destroy()),this._engine.playersByElement.delete(i))}_signalRemovalForInnerTriggers(i,s){const c=this._engine.driver.query(i,Sd,!0);c.forEach(p=>{if(p[Zo])return;const C=this._engine.fetchNamespacesByElement(p);C.size?C.forEach(D=>D.triggerLeaveAnimation(p,s,!1,!0)):this.clearElementCache(p)}),this._engine.afterFlushAnimationsDone(()=>c.forEach(p=>this.clearElementCache(p)))}triggerLeaveAnimation(i,s,c,p){const C=this._engine.statesByElement.get(i),D=new Map;if(C){const L=[];if(Object.keys(C).forEach(Y=>{if(D.set(Y,C[Y].value),this._triggers[Y]){const ae=this.trigger(i,Y,Vd,p);ae&&L.push(ae)}}),L.length)return this._engine.markElementAsRemoved(this.id,i,!0,s,D),c&&ml(L).onDone(()=>this._engine.processLeaveNode(i)),!0}return!1}prepareLeaveAnimationListeners(i){const s=this._elementListeners.get(i),c=this._engine.statesByElement.get(i);if(s&&c){const p=new Set;s.forEach(C=>{const D=C.name;if(p.has(D))return;p.add(D);const Y=this._triggers[D].fallbackTransition,ae=c[D]||sg,Ae=new ig(Vd),He=new ag(this.id,D,i);this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:D,transition:Y,fromState:ae,toState:Ae,player:He,isFallbackTransition:!0})})}}removeNode(i,s){const c=this._engine;if(i.childElementCount&&this._signalRemovalForInnerTriggers(i,s),this.triggerLeaveAnimation(i,s,!0))return;let p=!1;if(c.totalAnimations){const C=c.players.length?c.playersByQueriedElement.get(i):[];if(C&&C.length)p=!0;else{let D=i;for(;D=D.parentNode;)if(c.statesByElement.get(D)){p=!0;break}}}if(this.prepareLeaveAnimationListeners(i),p)c.markElementAsRemoved(this.id,i,!1,s);else{const C=i[Zo];(!C||C===rg)&&(c.afterFlush(()=>this.clearElementCache(i)),c.destroyInnerAnimations(i),c._onRemovalComplete(i,s))}}insertNode(i,s){xa(i,this._hostClassName)}drainQueuedTransitions(i){const s=[];return this._queue.forEach(c=>{const p=c.player;if(p.destroyed)return;const C=c.element,D=this._elementListeners.get(C);D&&D.forEach(L=>{if(L.name==c.triggerName){const Y=pc(C,c.triggerName,c.fromState.value,c.toState.value);Y._data=i,$p(c.player,L.phase,Y,L.callback)}}),p.markedForDestroy?this._engine.afterFlush(()=>{p.destroy()}):s.push(c)}),this._queue=[],s.sort((c,p)=>{const C=c.transition.ast.depCount,D=p.transition.ast.depCount;return 0==C||0==D?C-D:this._engine.driver.containsElement(c.element,p.element)?1:-1})}destroy(i){this.players.forEach(s=>s.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,i)}elementContainsData(i){let s=!1;return this._elementListeners.has(i)&&(s=!0),s=!!this._queue.find(c=>c.element===i)||s,s}}class og{constructor(i,s,c){this.bodyNode=i,this.driver=s,this._normalizer=c,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(p,C)=>{}}_onRemovalComplete(i,s){this.onRemovalComplete(i,s)}get queuedPlayers(){const i=[];return this._namespaceList.forEach(s=>{s.players.forEach(c=>{c.queued&&i.push(c)})}),i}createNamespace(i,s){const c=new l_(i,s,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,s)?this._balanceNamespaceList(c,s):(this.newHostElements.set(s,c),this.collectEnterElement(s)),this._namespaceLookup[i]=c}_balanceNamespaceList(i,s){const c=this._namespaceList.length-1;if(c>=0){let p=!1;for(let C=c;C>=0;C--)if(this.driver.containsElement(this._namespaceList[C].hostElement,s)){this._namespaceList.splice(C+1,0,i),p=!0;break}p||this._namespaceList.splice(0,0,i)}else this._namespaceList.push(i);return this.namespacesByHostElement.set(s,i),i}register(i,s){let c=this._namespaceLookup[i];return c||(c=this.createNamespace(i,s)),c}registerTrigger(i,s,c){let p=this._namespaceLookup[i];p&&p.register(s,c)&&this.totalAnimations++}destroy(i,s){if(!i)return;const c=this._fetchNamespace(i);this.afterFlush(()=>{this.namespacesByHostElement.delete(c.hostElement),delete this._namespaceLookup[i];const p=this._namespaceList.indexOf(c);p>=0&&this._namespaceList.splice(p,1)}),this.afterFlushAnimationsDone(()=>c.destroy(s))}_fetchNamespace(i){return this._namespaceLookup[i]}fetchNamespacesByElement(i){const s=new Set,c=this.statesByElement.get(i);if(c){const p=Object.keys(c);for(let C=0;C<p.length;C++){const D=c[p[C]].namespaceId;if(D){const L=this._fetchNamespace(D);L&&s.add(L)}}}return s}trigger(i,s,c,p){if(lg(s)){const C=this._fetchNamespace(i);if(C)return C.trigger(s,c,p),!0}return!1}insertNode(i,s,c,p){if(!lg(s))return;const C=s[Zo];if(C&&C.setForRemoval){C.setForRemoval=!1,C.setForMove=!0;const D=this.collectedLeaveElements.indexOf(s);D>=0&&this.collectedLeaveElements.splice(D,1)}if(i){const D=this._fetchNamespace(i);D&&D.insertNode(s,c)}p&&this.collectEnterElement(s)}collectEnterElement(i){this.collectedEnterElements.push(i)}markElementAsDisabled(i,s){s?this.disabledNodes.has(i)||(this.disabledNodes.add(i),xa(i,Xc)):this.disabledNodes.has(i)&&(this.disabledNodes.delete(i),ed(i,Xc))}removeNode(i,s,c,p){if(lg(s)){const C=i?this._fetchNamespace(i):null;if(C?C.removeNode(s,p):this.markElementAsRemoved(i,s,!1,p),c){const D=this.namespacesByHostElement.get(s);D&&D.id!==i&&D.removeNode(s,p)}}else this._onRemovalComplete(s,p)}markElementAsRemoved(i,s,c,p,C){this.collectedLeaveElements.push(s),s[Zo]={namespaceId:i,setForRemoval:p,hasAnimation:c,removedBeforeQueried:!1,previousTriggersValues:C}}listen(i,s,c,p,C){return lg(s)?this._fetchNamespace(i).listen(s,c,p,C):()=>{}}_buildInstruction(i,s,c,p,C){return i.transition.build(this.driver,i.element,i.fromState.value,i.toState.value,c,p,i.fromState.options,i.toState.options,s,C)}destroyInnerAnimations(i){let s=this.driver.query(i,Sd,!0);s.forEach(c=>this.destroyActiveAnimationsForElement(c)),0!=this.playersByQueriedElement.size&&(s=this.driver.query(i,jf,!0),s.forEach(c=>this.finishActiveQueriedAnimationOnElement(c)))}destroyActiveAnimationsForElement(i){const s=this.playersByElement.get(i);s&&s.forEach(c=>{c.queued?c.markedForDestroy=!0:c.destroy()})}finishActiveQueriedAnimationOnElement(i){const s=this.playersByQueriedElement.get(i);s&&s.forEach(c=>c.finish())}whenRenderingDone(){return new Promise(i=>{if(this.players.length)return ml(this.players).onDone(()=>i());i()})}processLeaveNode(i){var s;const c=i[Zo];if(c&&c.setForRemoval){if(i[Zo]=rg,c.namespaceId){this.destroyInnerAnimations(i);const p=this._fetchNamespace(c.namespaceId);p&&p.clearElementCache(i)}this._onRemovalComplete(i,c.setForRemoval)}(null===(s=i.classList)||void 0===s?void 0:s.contains(Xc))&&this.markElementAsDisabled(i,!1),this.driver.query(i,".ng-animate-disabled",!0).forEach(p=>{this.markElementAsDisabled(p,!1)})}flush(i=-1){let s=[];if(this.newHostElements.size&&(this.newHostElements.forEach((c,p)=>this._balanceNamespaceList(c,p)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let c=0;c<this.collectedEnterElements.length;c++)xa(this.collectedEnterElements[c],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const c=[];try{s=this._flushAnimations(c,i)}finally{for(let p=0;p<c.length;p++)c[p]()}}else for(let c=0;c<this.collectedLeaveElements.length;c++)this.processLeaveNode(this.collectedLeaveElements[c]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(c=>c()),this._flushFns=[],this._whenQuietFns.length){const c=this._whenQuietFns;this._whenQuietFns=[],s.length?ml(s).onDone(()=>{c.forEach(p=>p())}):c.forEach(p=>p())}}reportError(i){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${i.join("\n")}`)}_flushAnimations(i,s){const c=new cu,p=[],C=new Map,D=[],L=new Map,Y=new Map,ae=new Map,Ae=new Set;this.disabledNodes.forEach(Kn=>{Ae.add(Kn);const _r=this.driver.query(Kn,".ng-animate-queued",!0);for(let br=0;br<_r.length;br++)Ae.add(_r[br])});const He=this.bodyNode,st=Array.from(this.statesByElement.keys()),kt=c_(st,this.collectedEnterElements),Lt=new Map;let Cn=0;kt.forEach((Kn,_r)=>{const br=Bf+Cn++;Lt.set(_r,br),Kn.forEach(bi=>xa(bi,br))});const ur=[],Ei=new Set,Ji=new Set;for(let Kn=0;Kn<this.collectedLeaveElements.length;Kn++){const _r=this.collectedLeaveElements[Kn],br=_r[Zo];br&&br.setForRemoval&&(ur.push(_r),Ei.add(_r),br.hasAnimation?this.driver.query(_r,".ng-star-inserted",!0).forEach(bi=>Ei.add(bi)):Ji.add(_r))}const hs=new Map,Es=c_(st,Array.from(Ei));Es.forEach((Kn,_r)=>{const br=Dh+Cn++;hs.set(_r,br),Kn.forEach(bi=>xa(bi,br))}),i.push(()=>{kt.forEach((Kn,_r)=>{const br=Lt.get(_r);Kn.forEach(bi=>ed(bi,br))}),Es.forEach((Kn,_r)=>{const br=hs.get(_r);Kn.forEach(bi=>ed(bi,br))}),ur.forEach(Kn=>{this.processLeaveNode(Kn)})});const Ma=[],Ys=[];for(let Kn=this._namespaceList.length-1;Kn>=0;Kn--)this._namespaceList[Kn].drainQueuedTransitions(s).forEach(br=>{const bi=br.player,Po=br.element;if(Ma.push(bi),this.collectedEnterElements.length){const h=Po[Zo];if(h&&h.setForMove){if(h.previousTriggersValues&&h.previousTriggersValues.has(br.triggerName)){const g=h.previousTriggersValues.get(br.triggerName),w=this.statesByElement.get(br.element);w&&w[br.triggerName]&&(w[br.triggerName].value=g)}return void bi.destroy()}}const Uu=!He||!this.driver.containsElement(He,Po),Ra=hs.get(Po),o=Lt.get(Po),e=this._buildInstruction(br,c,o,Ra,Uu);if(e.errors&&e.errors.length)return void Ys.push(e);if(Uu)return bi.onStart(()=>lu(Po,e.fromStyles)),bi.onDestroy(()=>oo(Po,e.toStyles)),void p.push(bi);if(br.isFallbackTransition)return bi.onStart(()=>lu(Po,e.fromStyles)),bi.onDestroy(()=>oo(Po,e.toStyles)),void p.push(bi);const t=[];e.timelines.forEach(h=>{h.stretchStartingKeyframe=!0,this.disabledNodes.has(h.element)||t.push(h)}),e.timelines=t,c.append(Po,e.timelines),D.push({instruction:e,player:bi,element:Po}),e.queriedElements.forEach(h=>la(L,h,[]).push(bi)),e.preStyleProps.forEach((h,g)=>{const w=Object.keys(h);if(w.length){let R=Y.get(g);R||Y.set(g,R=new Set),w.forEach(H=>R.add(H))}}),e.postStyleProps.forEach((h,g)=>{const w=Object.keys(h);let R=ae.get(g);R||ae.set(g,R=new Set),w.forEach(H=>R.add(H))})});if(Ys.length){const Kn=[];Ys.forEach(_r=>{Kn.push(`@${_r.triggerName} has failed due to:\n`),_r.errors.forEach(br=>Kn.push(`- ${br}\n`))}),Ma.forEach(_r=>_r.destroy()),this.reportError(Kn)}const Qs=new Map,Fu=new Map;D.forEach(Kn=>{const _r=Kn.element;c.has(_r)&&(Fu.set(_r,_r),this._beforeAnimationBuild(Kn.player.namespaceId,Kn.instruction,Qs))}),p.forEach(Kn=>{const _r=Kn.element;this._getPreviousPlayers(_r,!1,Kn.namespaceId,Kn.triggerName,null).forEach(bi=>{la(Qs,_r,[]).push(bi),bi.destroy()})});const Lu=ur.filter(Kn=>dg(Kn,Y,ae)),gu=new Map;Oh(gu,this.driver,Ji,ae,Hi.l3).forEach(Kn=>{dg(Kn,Y,ae)&&Lu.push(Kn)});const el=new Map;kt.forEach((Kn,_r)=>{Oh(el,this.driver,new Set(Kn),Y,Hi.k1)}),Lu.forEach(Kn=>{const _r=gu.get(Kn),br=el.get(Kn);gu.set(Kn,Object.assign(Object.assign({},_r),br))});const yc=[],Eg=[],Im={};D.forEach(Kn=>{const{element:_r,player:br,instruction:bi}=Kn;if(c.has(_r)){if(Ae.has(_r))return br.onDestroy(()=>oo(_r,bi.toStyles)),br.disabled=!0,br.overrideTotalTime(bi.totalTime),void p.push(br);let Po=Im;if(Fu.size>1){let Ra=_r;const o=[];for(;Ra=Ra.parentNode;){const e=Fu.get(Ra);if(e){Po=e;break}o.push(Ra)}o.forEach(e=>Fu.set(e,Po))}const Uu=this._buildAnimation(br.namespaceId,bi,Qs,C,el,gu);if(br.setRealPlayer(Uu),Po===Im)yc.push(br);else{const Ra=this.playersByElement.get(Po);Ra&&Ra.length&&(br.parentPlayer=ml(Ra)),p.push(br)}}else lu(_r,bi.fromStyles),br.onDestroy(()=>oo(_r,bi.toStyles)),Eg.push(br),Ae.has(_r)&&p.push(br)}),Eg.forEach(Kn=>{const _r=C.get(Kn.element);if(_r&&_r.length){const br=ml(_r);Kn.setRealPlayer(br)}}),p.forEach(Kn=>{Kn.parentPlayer?Kn.syncPlayerEvents(Kn.parentPlayer):Kn.destroy()});for(let Kn=0;Kn<ur.length;Kn++){const _r=ur[Kn],br=_r[Zo];if(ed(_r,Dh),br&&br.hasAnimation)continue;let bi=[];if(L.size){let Uu=L.get(_r);Uu&&Uu.length&&bi.push(...Uu);let Ra=this.driver.query(_r,jf,!0);for(let o=0;o<Ra.length;o++){let e=L.get(Ra[o]);e&&e.length&&bi.push(...e)}}const Po=bi.filter(Uu=>!Uu.destroyed);Po.length?G_(this,_r,Po):this.processLeaveNode(_r)}return ur.length=0,yc.forEach(Kn=>{this.players.push(Kn),Kn.onDone(()=>{Kn.destroy();const _r=this.players.indexOf(Kn);this.players.splice(_r,1)}),Kn.play()}),yc}elementContainsData(i,s){let c=!1;const p=s[Zo];return p&&p.setForRemoval&&(c=!0),this.playersByElement.has(s)&&(c=!0),this.playersByQueriedElement.has(s)&&(c=!0),this.statesByElement.has(s)&&(c=!0),this._fetchNamespace(i).elementContainsData(s)||c}afterFlush(i){this._flushFns.push(i)}afterFlushAnimationsDone(i){this._whenQuietFns.push(i)}_getPreviousPlayers(i,s,c,p,C){let D=[];if(s){const L=this.playersByQueriedElement.get(i);L&&(D=L)}else{const L=this.playersByElement.get(i);if(L){const Y=!C||C==Vd;L.forEach(ae=>{ae.queued||!Y&&ae.triggerName!=p||D.push(ae)})}}return(c||p)&&(D=D.filter(L=>!(c&&c!=L.namespaceId||p&&p!=L.triggerName))),D}_beforeAnimationBuild(i,s,c){const C=s.element,D=s.isRemovalTransition?void 0:i,L=s.isRemovalTransition?void 0:s.triggerName;for(const Y of s.timelines){const ae=Y.element,Ae=ae!==C,He=la(c,ae,[]);this._getPreviousPlayers(ae,Ae,D,L,s.toState).forEach(kt=>{const Lt=kt.getRealPlayer();Lt.beforeDestroy&&Lt.beforeDestroy(),kt.destroy(),He.push(kt)})}lu(C,s.fromStyles)}_buildAnimation(i,s,c,p,C,D){const L=s.triggerName,Y=s.element,ae=[],Ae=new Set,He=new Set,st=s.timelines.map(Lt=>{const Cn=Lt.element;Ae.add(Cn);const ur=Cn[Zo];if(ur&&ur.removedBeforeQueried)return new Hi.ZN(Lt.duration,Lt.delay);const Ei=Cn!==Y,Ji=function kh(u){const i=[];return ug(u,i),i}((c.get(Cn)||hm).map(Qs=>Qs.getRealPlayer())).filter(Qs=>!!Qs.element&&Qs.element===Cn),hs=C.get(Cn),Es=D.get(Cn),Ma=Ff(0,this._normalizer,0,Lt.keyframes,hs,Es),Ys=this._buildPlayer(Lt,Ma,Ji);if(Lt.subTimeline&&p&&He.add(Cn),Ei){const Qs=new ag(i,L,Cn);Qs.setRealPlayer(Ys),ae.push(Qs)}return Ys});ae.forEach(Lt=>{la(this.playersByQueriedElement,Lt.element,[]).push(Lt),Lt.onDone(()=>function u_(u,i,s){let c;if(u instanceof Map){if(c=u.get(i),c){if(c.length){const p=c.indexOf(s);c.splice(p,1)}0==c.length&&u.delete(i)}}else if(c=u[i],c){if(c.length){const p=c.indexOf(s);c.splice(p,1)}0==c.length&&delete u[i]}return c}(this.playersByQueriedElement,Lt.element,Lt))}),Ae.forEach(Lt=>xa(Lt,nm));const kt=ml(st);return kt.onDestroy(()=>{Ae.forEach(Lt=>ed(Lt,nm)),oo(Y,s.toStyles)}),He.forEach(Lt=>{la(p,Lt,[]).push(kt)}),kt}_buildPlayer(i,s,c){return s.length>0?this.driver.animate(i.element,s,i.duration,i.delay,i.easing,c):new Hi.ZN(i.duration,i.delay)}}class ag{constructor(i,s,c){this.namespaceId=i,this.triggerName=s,this.element=c,this._player=new Hi.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(i){this._containsRealPlayer||(this._player=i,Object.keys(this._queuedCallbacks).forEach(s=>{this._queuedCallbacks[s].forEach(c=>$p(i,s,void 0,c))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(i.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(i){this.totalTime=i}syncPlayerEvents(i){const s=this._player;s.triggerCallback&&i.onStart(()=>s.triggerCallback("start")),i.onDone(()=>this.finish()),i.onDestroy(()=>this.destroy())}_queueEvent(i,s){la(this._queuedCallbacks,i,[]).push(s)}onDone(i){this.queued&&this._queueEvent("done",i),this._player.onDone(i)}onStart(i){this.queued&&this._queueEvent("start",i),this._player.onStart(i)}onDestroy(i){this.queued&&this._queueEvent("destroy",i),this._player.onDestroy(i)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(i){this.queued||this._player.setPosition(i)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(i){const s=this._player;s.triggerCallback&&s.triggerCallback(i)}}function lg(u){return u&&1===u.nodeType}function As(u,i){const s=u.style.display;return u.style.display=null!=i?i:"none",s}function Oh(u,i,s,c,p){const C=[];s.forEach(Y=>C.push(As(Y)));const D=[];c.forEach((Y,ae)=>{const Ae={};Y.forEach(He=>{const st=Ae[He]=i.computeStyle(ae,He,p);(!st||0==st.length)&&(ae[Zo]=fm,D.push(ae))}),u.set(ae,Ae)});let L=0;return s.forEach(Y=>As(Y,C[L++])),D}function c_(u,i){const s=new Map;if(u.forEach(L=>s.set(L,[])),0==i.length)return s;const p=new Set(i),C=new Map;function D(L){if(!L)return 1;let Y=C.get(L);if(Y)return Y;const ae=L.parentNode;return Y=s.has(ae)?ae:p.has(ae)?1:D(ae),C.set(L,Y),Y}return i.forEach(L=>{const Y=D(L);1!==Y&&s.get(Y).push(L)}),s}function xa(u,i){var s;null===(s=u.classList)||void 0===s||s.add(i)}function ed(u,i){var s;null===(s=u.classList)||void 0===s||s.remove(i)}function G_(u,i,s){ml(s).onDone(()=>u.processLeaveNode(i))}function ug(u,i){for(let s=0;s<u.length;s++){const c=u[s];c instanceof Hi.ZE?ug(c.players,i):i.push(c)}}function dg(u,i,s){const c=s.get(u);if(!c)return!1;let p=i.get(u);return p?c.forEach(C=>p.add(C)):i.set(u,c),s.delete(u),!0}class Jf{constructor(i,s,c){this.bodyNode=i,this._driver=s,this._normalizer=c,this._triggerCache={},this.onRemovalComplete=(p,C)=>{},this._transitionEngine=new og(i,s,c),this._timelineEngine=new dm(i,s,c),this._transitionEngine.onRemovalComplete=(p,C)=>this.onRemovalComplete(p,C)}registerTrigger(i,s,c,p,C){const D=i+"-"+p;let L=this._triggerCache[D];if(!L){const Y=[],ae=ao(this._driver,C,Y);if(Y.length)throw new Error(`The animation trigger "${p}" has failed to build due to the following errors:\n - ${Y.join("\n - ")}`);L=function Nh(u,i,s){return new Ld(u,i,s)}(p,ae,this._normalizer),this._triggerCache[D]=L}this._transitionEngine.registerTrigger(s,p,L)}register(i,s){this._transitionEngine.register(i,s)}destroy(i,s){this._transitionEngine.destroy(i,s)}onInsert(i,s,c,p){this._transitionEngine.insertNode(i,s,c,p)}onRemove(i,s,c,p){this._transitionEngine.removeNode(i,s,p||!1,c)}disableAnimations(i,s){this._transitionEngine.markElementAsDisabled(i,s)}process(i,s,c,p){if("@"==c.charAt(0)){const[C,D]=Hp(c);this._timelineEngine.command(C,s,D,p)}else this._transitionEngine.trigger(i,s,c,p)}listen(i,s,c,p,C){if("@"==c.charAt(0)){const[D,L]=Hp(c);return this._timelineEngine.listen(D,s,L,C)}return this._transitionEngine.listen(i,s,c,p,C)}flush(i=-1){this._transitionEngine.flush(i)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Xf(u,i){let s=null,c=null;return Array.isArray(i)&&i.length?(s=Hl(i[0]),i.length>1&&(c=Hl(i[i.length-1]))):i&&(s=Hl(i)),s||c?new ep(u,s,c):null}let ep=(()=>{class u{constructor(s,c,p){this._element=s,this._startStyles=c,this._endStyles=p,this._state=0;let C=u.initialStylesByElement.get(s);C||u.initialStylesByElement.set(s,C={}),this._initialStyles=C}start(){this._state<1&&(this._startStyles&&oo(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(oo(this._element,this._initialStyles),this._endStyles&&(oo(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(u.initialStylesByElement.delete(this._element),this._startStyles&&(lu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(lu(this._element,this._endStyles),this._endStyles=null),oo(this._element,this._initialStyles),this._state=3)}}return u.initialStylesByElement=new WeakMap,u})();function Hl(u){let i=null;const s=Object.keys(u);for(let c=0;c<s.length;c++){const p=s[c];td(p)&&(i=i||{},i[p]=u[p])}return i}function td(u){return"display"===u||"position"===u}const hu="animation",nd="animationend";class gm{constructor(i,s,c,p,C,D,L){this._element=i,this._name=s,this._duration=c,this._delay=p,this._easing=C,this._fillMode=D,this._onDoneFn=L,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=Y=>this._handleCallback(Y)}apply(){(function hg(u,i){const s=Vh(u,"").trim();let c=0;s.length&&(c=function Bh(u,i){let s=0;for(let c=0;c<u.length;c++)u.charAt(c)===i&&s++;return s}(s,",")+1,i=`${s}, ${i}`),Ou(u,"",i)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Uh(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Fh(this._element,this._name,"paused")}resume(){Fh(this._element,this._name,"running")}setPosition(i){const s=tp(this._element,this._name);this._position=i*this._duration,Ou(this._element,"Delay",`-${this._position}ms`,s)}getPosition(){return this._position}_handleCallback(i){const s=i._ngTestManualTimestamp||Date.now(),c=1e3*parseFloat(i.elapsedTime.toFixed(3));i.animationName==this._name&&Math.max(s-this._startTime,0)>=this._delay&&c>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Uh(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function Lh(u,i){const c=Vh(u,"").split(","),p=fu(c,i);p>=0&&(c.splice(p,1),Ou(u,"",c.join(",")))}(this._element,this._name))}}function Fh(u,i,s){Ou(u,"PlayState",s,tp(u,i))}function tp(u,i){const s=Vh(u,"");return s.indexOf(",")>0?fu(s.split(","),i):fu([s],i)}function fu(u,i){for(let s=0;s<u.length;s++)if(u[s].indexOf(i)>=0)return s;return-1}function Uh(u,i,s){s?u.removeEventListener(nd,i):u.addEventListener(nd,i)}function Ou(u,i,s,c){const p=hu+i;if(null!=c){const C=u.style[p];if(C.length){const D=C.split(",");D[c]=s,s=D.join(",")}}u.style[p]=s}function Vh(u,i){return u.style[hu+i]||""}class _m{constructor(i,s,c,p,C,D,L,Y){this.element=i,this.keyframes=s,this.animationName=c,this._duration=p,this._delay=C,this._finalStyles=L,this._specialStyles=Y,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=D||"linear",this.totalTime=p+C,this._buildStyler()}onStart(i){this._onStartFns.push(i)}onDone(i){this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(i=>i()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(i=>i()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(i){this._styler.setPosition(i)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new gm(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(i){const s="start"==i?this._onStartFns:this._onDoneFns;s.forEach(c=>c()),s.length=0}beforeDestroy(){this.init();const i={};if(this.hasStarted()){const s=this._state>=3;Object.keys(this._finalStyles).forEach(c=>{"offset"!=c&&(i[c]=s?this._finalStyles[c]:xh(this.element,c))})}this.currentSnapshot=i}}class fg extends Hi.ZN{constructor(i,s){super(),this.element=i,this._startingStyles={},this.__initialized=!1,this._styles=Ih(s)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(i=>{this._startingStyles[i]=this.element.style[i]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(i=>this.element.style.setProperty(i,this._styles[i])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(i=>{const s=this._startingStyles[i];s?this.element.style.setProperty(i,s):this.element.style.removeProperty(i)}),this._startingStyles=null,super.destroy())}}class ku{constructor(){this._count=0}validateStyleProperty(i){return qo(i)}matchesElement(i,s){return!1}containsElement(i,s){return Ad(i,s)}query(i,s,c){return Uf(i,s,c)}computeStyle(i,s,c){return window.getComputedStyle(i)[s]}buildKeyframeElement(i,s,c){c=c.map(L=>Ih(L));let p=`@keyframes ${s} {\n`,C="";c.forEach(L=>{C=" ";const Y=parseFloat(L.offset);p+=`${C}${100*Y}% {\n`,C+=" ",Object.keys(L).forEach(ae=>{const Ae=L[ae];switch(ae){case"offset":return;case"easing":return void(Ae&&(p+=`${C}animation-timing-function: ${Ae};\n`));default:return void(p+=`${C}${ae}: ${Ae};\n`)}}),p+=`${C}}\n`}),p+="}\n";const D=document.createElement("style");return D.textContent=p,D}animate(i,s,c,p,C,D=[],L){const Y=D.filter(ur=>ur instanceof _m),ae={};sm(c,p)&&Y.forEach(ur=>{let Ei=ur.currentSnapshot;Object.keys(Ei).forEach(Ji=>ae[Ji]=Ei[Ji])});const Ae=function gg(u){let i={};return u&&(Array.isArray(u)?u:[u]).forEach(c=>{Object.keys(c).forEach(p=>{"offset"==p||"easing"==p||(i[p]=c[p])})}),i}(s=Wf(i,s,ae));if(0==c)return new fg(i,Ae);const He="gen_css_kf_"+this._count++,st=this.buildKeyframeElement(i,He,s);(function pg(u){var i;const s=null===(i=u.getRootNode)||void 0===i?void 0:i.call(u);return"undefined"!=typeof ShadowRoot&&s instanceof ShadowRoot?s:document.head})(i).appendChild(st);const Lt=Xf(i,s),Cn=new _m(i,s,He,c,p,C,Ae,Lt);return Cn.onDestroy(()=>function np(u){u.parentNode.removeChild(u)}(st)),Cn}}class Bd{constructor(i,s,c,p){this.element=i,this.keyframes=s,this.options=c,this._specialStyles=p,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=c.duration,this._delay=c.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const i=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,i,this.options),this._finalKeyframe=i.length?i[i.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(i,s,c){return i.animate(s,c)}onStart(i){this._onStartFns.push(i)}onDone(i){this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(i=>i()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}setPosition(i){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=i*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const i={};if(this.hasStarted()){const s=this._finalKeyframe;Object.keys(s).forEach(c=>{"offset"!=c&&(i[c]=this._finished?s[c]:xh(this.element,c))})}this.currentSnapshot=i}triggerCallback(i){const s="start"==i?this._onStartFns:this._onDoneFns;s.forEach(c=>c()),s.length=0}}class Wh{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(jd().toString()),this._cssKeyframesDriver=new ku}validateStyleProperty(i){return qo(i)}matchesElement(i,s){return!1}containsElement(i,s){return Ad(i,s)}query(i,s,c){return Uf(i,s,c)}computeStyle(i,s,c){return window.getComputedStyle(i)[s]}overrideWebAnimationsSupport(i){this._isNativeImpl=i}animate(i,s,c,p,C,D=[],L){if(!L&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(i,s,c,p,C,D);const Ae={duration:c,delay:p,fill:0==p?"both":"forwards"};C&&(Ae.easing=C);const He={},st=D.filter(Lt=>Lt instanceof Bd);sm(c,p)&&st.forEach(Lt=>{let Cn=Lt.currentSnapshot;Object.keys(Cn).forEach(ur=>He[ur]=Cn[ur])});const kt=Xf(i,s=Wf(i,s=s.map(Lt=>Ks(Lt,!1)),He));return new Bd(i,s,Ae,kt)}}function jd(){return Bp()&&Element.prototype.animate||{}}let g_=(()=>{class u extends Hi._j{constructor(s,c){super(),this._nextAnimationId=0,this._renderer=s.createRenderer(c.body,{id:"0",encapsulation:E.ifc.None,styles:[],data:{animation:[]}})}build(s){const c=this._nextAnimationId.toString();this._nextAnimationId++;const p=Array.isArray(s)?(0,Hi.vP)(s):s;return vs(this._renderer,null,c,"register",[p]),new Gh(c,this._renderer)}}return u.\u0275fac=function(s){return new(s||u)(E.LFG(E.FYo),E.LFG(he.K0))},u.\u0275prov=E.Yz7({token:u,factory:u.\u0275fac}),u})();class Gh extends Hi.LC{constructor(i,s){super(),this._id=i,this._renderer=s}create(i,s){return new ym(this._id,i,s||{},this._renderer)}}class ym{constructor(i,s,c,p){this.id=i,this.element=s,this._renderer=p,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",c)}_listen(i,s){return this._renderer.listen(this.element,`@@${this.id}:${i}`,s)}_command(i,...s){return vs(this._renderer,this.element,this.id,i,s)}onDone(i){this._listen("done",i)}onStart(i){this._listen("start",i)}onDestroy(i){this._listen("destroy",i)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(i){this._command("setPosition",i)}getPosition(){var i,s;return null!==(s=null===(i=this._renderer.engine.players[+this.id])||void 0===i?void 0:i.getPosition())&&void 0!==s?s:0}}function vs(u,i,s,c,p){return u.setProperty(i,`@@${s}:${c}`,p)}const vm="@.disabled";let m_=(()=>{class u{constructor(s,c,p){this.delegate=s,this.engine=c,this._zone=p,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),c.onRemovalComplete=(C,D)=>{const L=null==D?void 0:D.parentNode(C);L&&D.removeChild(L,C)}}createRenderer(s,c){const C=this.delegate.createRenderer(s,c);if(!(s&&c&&c.data&&c.data.animation)){let Ae=this._rendererCache.get(C);return Ae||(Ae=new mg("",C,this.engine),this._rendererCache.set(C,Ae)),Ae}const D=c.id,L=c.id+"-"+this._currentId;this._currentId++,this.engine.register(L,s);const Y=Ae=>{Array.isArray(Ae)?Ae.forEach(Y):this.engine.registerTrigger(D,L,s,Ae.name,Ae)};return c.data.animation.forEach(Y),new __(this,L,C,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(s,c,p){s>=0&&s<this._microtaskId?this._zone.run(()=>c(p)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(C=>{const[D,L]=C;D(L)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([c,p]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return u.\u0275fac=function(s){return new(s||u)(E.LFG(E.FYo),E.LFG(Jf),E.LFG(E.R0b))},u.\u0275prov=E.Yz7({token:u,factory:u.\u0275fac}),u})();class mg{constructor(i,s,c){this.namespaceId=i,this.delegate=s,this.engine=c,this.destroyNode=this.delegate.destroyNode?p=>s.destroyNode(p):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(i,s){return this.delegate.createElement(i,s)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}appendChild(i,s){this.delegate.appendChild(i,s),this.engine.onInsert(this.namespaceId,s,i,!1)}insertBefore(i,s,c,p=!0){this.delegate.insertBefore(i,s,c),this.engine.onInsert(this.namespaceId,s,i,p)}removeChild(i,s,c){this.engine.onRemove(this.namespaceId,s,this.delegate,c)}selectRootElement(i,s){return this.delegate.selectRootElement(i,s)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,s,c,p){this.delegate.setAttribute(i,s,c,p)}removeAttribute(i,s,c){this.delegate.removeAttribute(i,s,c)}addClass(i,s){this.delegate.addClass(i,s)}removeClass(i,s){this.delegate.removeClass(i,s)}setStyle(i,s,c,p){this.delegate.setStyle(i,s,c,p)}removeStyle(i,s,c){this.delegate.removeStyle(i,s,c)}setProperty(i,s,c){"@"==s.charAt(0)&&s==vm?this.disableAnimations(i,!!c):this.delegate.setProperty(i,s,c)}setValue(i,s){this.delegate.setValue(i,s)}listen(i,s,c){return this.delegate.listen(i,s,c)}disableAnimations(i,s){this.engine.disableAnimations(i,s)}}class __ extends mg{constructor(i,s,c,p){super(s,c,p),this.factory=i,this.namespaceId=s}setProperty(i,s,c){"@"==s.charAt(0)?"."==s.charAt(1)&&s==vm?this.disableAnimations(i,c=void 0===c||!!c):this.engine.process(this.namespaceId,i,s.substr(1),c):this.delegate.setProperty(i,s,c)}listen(i,s,c){if("@"==s.charAt(0)){const p=function _g(u){switch(u){case"body":return document.body;case"document":return document;case"window":return window;default:return u}}(i);let C=s.substr(1),D="";return"@"!=C.charAt(0)&&([C,D]=function Em(u){const i=u.indexOf(".");return[u.substring(0,i),u.substr(i+1)]}(C)),this.engine.listen(this.namespaceId,p,C,D,L=>{this.factory.scheduleListenerCallback(L._data||-1,c,L)})}return this.delegate.listen(i,s,c)}}let $d=(()=>{class u extends Jf{constructor(s,c,p){super(s.body,c,p)}ngOnDestroy(){this.flush()}}return u.\u0275fac=function(s){return new(s||u)(E.LFG(he.K0),E.LFG(Th),E.LFG(Kf))},u.\u0275prov=E.Yz7({token:u,factory:u.\u0275fac}),u})();const yg=new E.OlP("AnimationModuleType"),vg=[{provide:Hi._j,useClass:g_},{provide:Kf,useFactory:function y_(){return new s_}},{provide:Jf,useClass:$d},{provide:E.FYo,useFactory:function Cm(u,i,s){return new m_(u,i,s)},deps:[_.se,Jf,E.R0b]}],v_=[{provide:Th,useFactory:function wm(){return function p_(){return"function"==typeof jd()}()?new Wh:new ku}},{provide:yg,useValue:"BrowserAnimations"},...vg],rp=[{provide:Th,useClass:Wp},{provide:yg,useValue:"NoopAnimations"},...vg];let ip=(()=>{class u{static withConfig(s){return{ngModule:u,providers:s.disableAnimations?rp:v_}}}return u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=E.oAB({type:u}),u.\u0275inj=E.cJS({providers:v_,imports:[_.b2]}),u})(),bm=(()=>{class u{}return u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=E.oAB({type:u,bootstrap:[Jt]}),u.\u0275inj=E.cJS({providers:[],imports:[[_.b2,Tn,ye.u5,ye.UX,Fl.hO.initializeApp(St_firebase),Yg.enablePersistence(),kf,(0,On.hX)(()=>(0,On.ZF)(St_firebase)),(0,Zt.AR)(()=>(0,Zt.v0)()),hf(()=>ph()),(0,Ip.Cm)(()=>(0,Ip.ad)()),ip,Ve.Rh.forRoot()]]}),u})();(0,E.G48)(),_.q6().bootstrapModule(bm).catch(u=>console.error(u))},5867:(Yt,Je,j)=>{j.d(Je,{Mq:()=>_.getApp,C6:()=>_.getApps,ZF:()=>_.initializeApp,KN:()=>_.registerVersion});var _=j(9681);(0,_.registerVersion)("firebase","9.12.1","app")},127:(Yt,Je,j)=>{j.d(Je,{Z:()=>_.Z});var _=j(3942);_.Z.registerVersion("firebase","9.12.1","app-compat")},5881:(Yt,Je,j)=>{j.r(Je);var _=j(5861),E=j(3942),J=j(1279),ye=j(2090),Ve=(j(9681),j(1877),j(4859));function he(){return window}function fe(){return(fe=(0,_.Z)(function*(me,le,K){var ee;const{BuildInfo:ue}=he();(0,J.aq)(le.sessionId,"AuthEvent did not contain a session ID");const De=yield $e(le.sessionId),Ge={};return(0,J.ar)()?Ge.ibi=ue.packageName:(0,J.as)()?Ge.apn=ue.packageName:(0,J.at)(me,"operation-not-supported-in-this-environment"),ue.displayName&&(Ge.appDisplayName=ue.displayName),Ge.sessionId=De,(0,J.au)(me,K,le.type,void 0,null!==(ee=le.eventId)&&void 0!==ee?ee:void 0,Ge)})).apply(this,arguments)}function yt(){return(yt=(0,_.Z)(function*(me){const{BuildInfo:le}=he(),K={};(0,J.ar)()?K.iosBundleId=le.packageName:(0,J.as)()?K.androidPackageName=le.packageName:(0,J.at)(me,"operation-not-supported-in-this-environment"),yield(0,J.av)(me,K)})).apply(this,arguments)}function Ct(){return(Ct=(0,_.Z)(function*(me,le,K){const{cordova:ee}=he();let ue=()=>{};try{yield new Promise((De,Ge)=>{let Vt=null;function Bt(){var xt;De();const jt=null===(xt=ee.plugins.browsertab)||void 0===xt?void 0:xt.close;"function"==typeof jt&&jt(),"function"==typeof(null==K?void 0:K.close)&&K.close()}function qn(){Vt||(Vt=window.setTimeout(()=>{Ge((0,J.aw)(me,"redirect-cancelled-by-user"))},2e3))}function Er(){"visible"===(null==document?void 0:document.visibilityState)&&qn()}le.addPassiveListener(Bt),document.addEventListener("resume",qn,!1),(0,J.as)()&&document.addEventListener("visibilitychange",Er,!1),ue=()=>{le.removePassiveListener(Bt),document.removeEventListener("resume",qn,!1),document.removeEventListener("visibilitychange",Er,!1),Vt&&window.clearTimeout(Vt)}})}finally{ue()}})).apply(this,arguments)}function $e(me){return it.apply(this,arguments)}function it(){return(it=(0,_.Z)(function*(me){const le=_t(me),K=yield crypto.subtle.digest("SHA-256",le);return Array.from(new Uint8Array(K)).map(ue=>ue.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function _t(me){if((0,J.aq)(/[0-9a-zA-Z]+/.test(me),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(me);const le=new ArrayBuffer(me.length),K=new Uint8Array(le);for(let ee=0;ee<me.length;ee++)K[ee]=me.charCodeAt(ee);return K}class be extends J.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(le=>{this.resolveInialized=le})}addPassiveListener(le){this.passiveListeners.add(le)}removePassiveListener(le){this.passiveListeners.delete(le)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(le){return this.resolveInialized(),this.passiveListeners.forEach(K=>K(le)),super.onEvent(le)}initialized(){var le=this;return(0,_.Z)(function*(){yield le.initPromise})()}}function bt(me){return lt.apply(this,arguments)}function lt(){return(lt=(0,_.Z)(function*(me){const le=yield tt()._get(ct(me));return le&&(yield tt()._remove(ct(me))),le})).apply(this,arguments)}function je(){const me=[],le="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let K=0;K<20;K++){const ee=Math.floor(Math.random()*le.length);me.push(le.charAt(ee))}return me.join("")}function tt(){return(0,J.ay)(J.b)}function ct(me){return(0,J.az)("authEvent",me.config.apiKey,me.name)}function Tn(me){if(!(null==me?void 0:me.includes("?")))return{};const[le,...K]=me.split("?");return(0,ye.zd)(K.join("?"))}function Zt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,J.aw)("no-auth-event")}}function Me(){var me;return(null===(me=null==self?void 0:self.location)||void 0===me?void 0:me.protocol)||null}function _e(me=(0,ye.z$)()){return!("file:"!==Me()&&"ionic:"!==Me()&&"capacitor:"!==Me()||!me.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ur(){try{const me=self.localStorage,le=J.aI();if(me)return me.setItem(le,"1"),me.removeItem(le),!function qr(me=(0,ye.z$)()){return function Wn(){return(0,ye.w1)()&&11===(null==document?void 0:document.documentMode)}()||function jn(me=(0,ye.z$)()){return/Edge\/\d+/.test(me)}(me)}()||(0,ye.hl)()}catch(me){return yr()&&(0,ye.hl)()}return!1}function yr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Rt(){return(function ot(){return"http:"===Me()||"https:"===Me()}()||(0,ye.ru)()||_e())&&!function yn(){return(0,ye.b$)()||(0,ye.UG)()}()&&Ur()&&!yr()}function xr(){return _e()&&"undefined"!=typeof document}function ir(){return(ir=(0,_.Z)(function*(){return!!xr()&&new Promise(me=>{const le=setTimeout(()=>{me(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(le),me(!0)})})})).apply(this,arguments)}const Nn={LOCAL:"local",NONE:"none",SESSION:"session"},Or=J.ax,Gr="persistence";function Mr(me){return ti.apply(this,arguments)}function ti(){return(ti=(0,_.Z)(function*(me){yield me._initializationPromise;const le=Vn(),K=J.az(Gr,me.config.apiKey,me.name);le&&le.setItem(K,me._getPersistence())})).apply(this,arguments)}function Vn(){var me;try{return(null===(me=function vn(){return"undefined"!=typeof window?window:null}())||void 0===me?void 0:me.sessionStorage)||null}catch(le){return null}}const un=J.ax;class nn{constructor(){this.browserResolver=J.ay(J.k),this.cordovaResolver=J.ay(class On{constructor(){this._redirectPersistence=J.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=J.aB,this._overrideRedirectResult=J.aC}_initialize(le){var K=this;return(0,_.Z)(function*(){const ee=le._key();let ue=K.eventManagers.get(ee);return ue||(ue=new be(le),K.eventManagers.set(ee,ue),K.attachCallbackListeners(le,ue)),ue})()}_openPopup(le){(0,J.at)(le,"operation-not-supported-in-this-environment")}_openRedirect(le,K,ee,ue){var De=this;return(0,_.Z)(function*(){!function Ke(me){var le,K,ee,ue,De,Ge,Vt,Bt,qn,Er;const xt=he();(0,J.ax)("function"==typeof(null===(le=null==xt?void 0:xt.universalLinks)||void 0===le?void 0:le.subscribe),me,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,J.ax)(void 0!==(null===(K=null==xt?void 0:xt.BuildInfo)||void 0===K?void 0:K.packageName),me,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,J.ax)("function"==typeof(null===(De=null===(ue=null===(ee=null==xt?void 0:xt.cordova)||void 0===ee?void 0:ee.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===De?void 0:De.openUrl),me,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,J.ax)("function"==typeof(null===(Bt=null===(Vt=null===(Ge=null==xt?void 0:xt.cordova)||void 0===Ge?void 0:Ge.plugins)||void 0===Vt?void 0:Vt.browsertab)||void 0===Bt?void 0:Bt.isAvailable),me,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,J.ax)("function"==typeof(null===(Er=null===(qn=null==xt?void 0:xt.cordova)||void 0===qn?void 0:qn.InAppBrowser)||void 0===Er?void 0:Er.open),me,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(le);const Ge=yield De._initialize(le);yield Ge.initialized(),Ge.resetRedirect(),(0,J.aD)(),yield De._originValidation(le);const Vt=function Xe(me,le,K=null){return{type:le,eventId:K,urlResponse:null,sessionId:je(),postBody:null,tenantId:me.tenantId,error:(0,J.aw)(me,"no-auth-event")}}(le,ee,ue);yield function At(me,le){return tt()._set(ct(me),le)}(le,Vt);const Bt=yield function ce(me,le,K){return fe.apply(this,arguments)}(le,Vt,K),qn=yield function ut(me){const{cordova:le}=he();return new Promise(K=>{le.plugins.browsertab.isAvailable(ee=>{let ue=null;ee?le.plugins.browsertab.openUrl(me):ue=le.InAppBrowser.open(me,(0,J.ap)()?"_blank":"_system","location=yes"),K(ue)})})}(Bt);return function Ye(me,le,K){return Ct.apply(this,arguments)}(le,Ge,qn)})()}_isIframeWebStorageSupported(le,K){throw new Error("Method not implemented.")}_originValidation(le){const K=le._key();return this.originValidationPromises[K]||(this.originValidationPromises[K]=function ke(me){return yt.apply(this,arguments)}(le)),this.originValidationPromises[K]}attachCallbackListeners(le,K){const{universalLinks:ee,handleOpenURL:ue,BuildInfo:De}=he(),Ge=setTimeout((0,_.Z)(function*(){yield bt(le),K.onEvent(Zt())}),500),Vt=function(){var Er=(0,_.Z)(function*(xt){clearTimeout(Ge);const jt=yield bt(le);let kn=null;jt&&(null==xt?void 0:xt.url)&&(kn=function Ce(me,le){var K,ee;const ue=function et(me){const le=Tn(me),K=le.link?decodeURIComponent(le.link):void 0,ee=Tn(K).link,ue=le.deep_link_id?decodeURIComponent(le.deep_link_id):void 0;return Tn(ue).link||ue||ee||K||me}(le);if(ue.includes("/__/auth/callback")){const De=Tn(ue),Ge=De.firebaseError?function wt(me){try{return JSON.parse(me)}catch(le){return null}}(decodeURIComponent(De.firebaseError)):null,Vt=null===(ee=null===(K=null==Ge?void 0:Ge.code)||void 0===K?void 0:K.split("auth/"))||void 0===ee?void 0:ee[1],Bt=Vt?(0,J.aw)(Vt):null;return Bt?{type:me.type,eventId:me.eventId,tenantId:me.tenantId,error:Bt,urlResponse:null,sessionId:null,postBody:null}:{type:me.type,eventId:me.eventId,tenantId:me.tenantId,sessionId:me.sessionId,urlResponse:ue,postBody:null}}return null}(jt,xt.url)),K.onEvent(kn||Zt())});return function(jt){return Er.apply(this,arguments)}}();void 0!==ee&&"function"==typeof ee.subscribe&&ee.subscribe(null,Vt);const Bt=ue,qn=`${De.packageName.toLowerCase()}://`;he().handleOpenURL=function(){var Er=(0,_.Z)(function*(xt){if(xt.toLowerCase().startsWith(qn)&&Vt({url:xt}),"function"==typeof Bt)try{Bt(xt)}catch(jt){console.error(jt)}});return function(xt){return Er.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=J.a,this._completeRedirectFn=J.aB,this._overrideRedirectResult=J.aC}_initialize(le){var K=this;return(0,_.Z)(function*(){return yield K.selectUnderlyingResolver(),K.assertedUnderlyingResolver._initialize(le)})()}_openPopup(le,K,ee,ue){var De=this;return(0,_.Z)(function*(){return yield De.selectUnderlyingResolver(),De.assertedUnderlyingResolver._openPopup(le,K,ee,ue)})()}_openRedirect(le,K,ee,ue){var De=this;return(0,_.Z)(function*(){return yield De.selectUnderlyingResolver(),De.assertedUnderlyingResolver._openRedirect(le,K,ee,ue)})()}_isIframeWebStorageSupported(le,K){this.assertedUnderlyingResolver._isIframeWebStorageSupported(le,K)}_originValidation(le){return this.assertedUnderlyingResolver._originValidation(le)}get _shouldInitProactively(){return xr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return un(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var le=this;return(0,_.Z)(function*(){if(le.underlyingResolver)return;const K=yield function tn(){return ir.apply(this,arguments)}();le.underlyingResolver=K?le.cordovaResolver:le.browserResolver})()}}function Dr(me){return me.unwrap()}function Dn(me){return dr(me)}function dr(me){const{_tokenResponse:le}=me instanceof ye.ZR?me.customData:me;if(!le)return null;if(!(me instanceof ye.ZR)&&"temporaryProof"in le&&"phoneNumber"in le)return J.P.credentialFromResult(me);const K=le.providerId;if(!K||K===J.o.PASSWORD)return null;let ee;switch(K){case J.o.GOOGLE:ee=J.Q;break;case J.o.FACEBOOK:ee=J.N;break;case J.o.GITHUB:ee=J.T;break;case J.o.TWITTER:ee=J.W;break;default:const{oauthIdToken:ue,oauthAccessToken:De,oauthTokenSecret:Ge,pendingToken:Vt,nonce:Bt}=le;return De||Ge||ue||Vt?Vt?K.startsWith("saml.")?J.aL._create(K,Vt):J.J._fromParams({providerId:K,signInMethod:K,pendingToken:Vt,idToken:ue,accessToken:De}):new J.U(K).credential({idToken:ue,accessToken:De,rawNonce:Bt}):null}return me instanceof ye.ZR?ee.credentialFromError(me):ee.credentialFromResult(me)}function ar(me,le){return le.catch(K=>{throw K instanceof ye.ZR&&function Ar(me,le){var K,ee;const ue=null===(K=le.customData)||void 0===K?void 0:K._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ee=le)||void 0===ee?void 0:ee.code))le.resolver=new Gn(me,J.an(me,le));else if(ue){const De=dr(le),Ge=le;De&&(Ge.credential=De,Ge.tenantId=ue.tenantId||void 0,Ge.email=ue.email||void 0,Ge.phoneNumber=ue.phoneNumber||void 0)}}(me,K),K}).then(K=>{const ue=K.user;return{operationType:K.operationType,credential:Dn(K),additionalUserInfo:J.al(K),user:cr.getOrCreate(ue)}})}function En(me,le){return hr.apply(this,arguments)}function hr(){return(hr=(0,_.Z)(function*(me,le){const K=yield le;return{verificationId:K.verificationId,confirm:ee=>ar(me,K.confirm(ee))}})).apply(this,arguments)}class Gn{constructor(le,K){this.resolver=K,this.auth=function Zr(me){return me.wrapped()}(le)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(le){return ar(Dr(this.auth),this.resolver.resolveSignIn(le))}}class cr{constructor(le){this._delegate=le,this.multiFactor=J.ao(le)}static getOrCreate(le){return cr.USER_MAP.has(le)||cr.USER_MAP.set(le,new cr(le)),cr.USER_MAP.get(le)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(le){return this._delegate.getIdTokenResult(le)}getIdToken(le){return this._delegate.getIdToken(le)}linkAndRetrieveDataWithCredential(le){return this.linkWithCredential(le)}linkWithCredential(le){var K=this;return(0,_.Z)(function*(){return ar(K.auth,J.Z(K._delegate,le))})()}linkWithPhoneNumber(le,K){var ee=this;return(0,_.Z)(function*(){return En(ee.auth,J.l(ee._delegate,le,K))})()}linkWithPopup(le){var K=this;return(0,_.Z)(function*(){return ar(K.auth,J.d(K._delegate,le,nn))})()}linkWithRedirect(le){var K=this;return(0,_.Z)(function*(){return yield Mr(J.aE(K.auth)),J.g(K._delegate,le,nn)})()}reauthenticateAndRetrieveDataWithCredential(le){return this.reauthenticateWithCredential(le)}reauthenticateWithCredential(le){var K=this;return(0,_.Z)(function*(){return ar(K.auth,J._(K._delegate,le))})()}reauthenticateWithPhoneNumber(le,K){return En(this.auth,J.r(this._delegate,le,K))}reauthenticateWithPopup(le){return ar(this.auth,J.e(this._delegate,le,nn))}reauthenticateWithRedirect(le){var K=this;return(0,_.Z)(function*(){return yield Mr(J.aE(K.auth)),J.h(K._delegate,le,nn)})()}sendEmailVerification(le){return J.ab(this._delegate,le)}unlink(le){var K=this;return(0,_.Z)(function*(){return yield J.ak(K._delegate,le),K})()}updateEmail(le){return J.ag(this._delegate,le)}updatePassword(le){return J.ah(this._delegate,le)}updatePhoneNumber(le){return J.u(this._delegate,le)}updateProfile(le){return J.af(this._delegate,le)}verifyBeforeUpdateEmail(le,K){return J.ac(this._delegate,le,K)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}cr.USER_MAP=new WeakMap;const Ot=J.ax;let dt=(()=>{class me{constructor(K,ee){if(this.app=K,ee.isInitialized())return this._delegate=ee.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ue}=K.options;Ot(ue,"invalid-api-key",{appName:K.name}),Ot(ue,"invalid-api-key",{appName:K.name});const De="undefined"!=typeof window?nn:void 0;this._delegate=ee.initialize({options:{persistence:cn(ue,K.name),popupRedirectResolver:De}}),this._delegate._updateErrorMap(J.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?cr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(K){this._delegate.languageCode=K}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(K){this._delegate.tenantId=K}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(K,ee){J.G(this._delegate,K,ee)}applyActionCode(K){return J.a2(this._delegate,K)}checkActionCode(K){return J.a3(this._delegate,K)}confirmPasswordReset(K,ee){return J.a1(this._delegate,K,ee)}createUserWithEmailAndPassword(K,ee){var ue=this;return(0,_.Z)(function*(){return ar(ue._delegate,J.a5(ue._delegate,K,ee))})()}fetchProvidersForEmail(K){return this.fetchSignInMethodsForEmail(K)}fetchSignInMethodsForEmail(K){return J.aa(this._delegate,K)}isSignInWithEmailLink(K){return J.a8(this._delegate,K)}getRedirectResult(){var K=this;return(0,_.Z)(function*(){Ot(Rt(),K._delegate,"operation-not-supported-in-this-environment");const ee=yield J.j(K._delegate,nn);return ee?ar(K._delegate,Promise.resolve(ee)):{credential:null,user:null}})()}addFrameworkForLogging(K){!function an(me,le){(0,J.aE)(me)._logFramework(le)}(this._delegate,K)}onAuthStateChanged(K,ee,ue){const{next:De,error:Ge,complete:Vt}=Kt(K,ee,ue);return this._delegate.onAuthStateChanged(De,Ge,Vt)}onIdTokenChanged(K,ee,ue){const{next:De,error:Ge,complete:Vt}=Kt(K,ee,ue);return this._delegate.onIdTokenChanged(De,Ge,Vt)}sendSignInLinkToEmail(K,ee){return J.a7(this._delegate,K,ee)}sendPasswordResetEmail(K,ee){return J.a0(this._delegate,K,ee||void 0)}setPersistence(K){var ee=this;return(0,_.Z)(function*(){let ue;switch(function jr(me,le){Or(Object.values(Nn).includes(le),me,"invalid-persistence-type"),(0,ye.b$)()?Or(le!==Nn.SESSION,me,"unsupported-persistence-type"):(0,ye.UG)()?Or(le===Nn.NONE,me,"unsupported-persistence-type"):yr()?Or(le===Nn.NONE||le===Nn.LOCAL&&(0,ye.hl)(),me,"unsupported-persistence-type"):Or(le===Nn.NONE||Ur(),me,"unsupported-persistence-type")}(ee._delegate,K),K){case Nn.SESSION:ue=J.a;break;case Nn.LOCAL:ue=(yield J.ay(J.i)._isAvailable())?J.i:J.b;break;case Nn.NONE:ue=J.L;break;default:return J.at("argument-error",{appName:ee._delegate.name})}return ee._delegate.setPersistence(ue)})()}signInAndRetrieveDataWithCredential(K){return this.signInWithCredential(K)}signInAnonymously(){return ar(this._delegate,J.X(this._delegate))}signInWithCredential(K){return ar(this._delegate,J.Y(this._delegate,K))}signInWithCustomToken(K){return ar(this._delegate,J.$(this._delegate,K))}signInWithEmailAndPassword(K,ee){return ar(this._delegate,J.a6(this._delegate,K,ee))}signInWithEmailLink(K,ee){return ar(this._delegate,J.a9(this._delegate,K,ee))}signInWithPhoneNumber(K,ee){return En(this._delegate,J.s(this._delegate,K,ee))}signInWithPopup(K){var ee=this;return(0,_.Z)(function*(){return Ot(Rt(),ee._delegate,"operation-not-supported-in-this-environment"),ar(ee._delegate,J.c(ee._delegate,K,nn))})()}signInWithRedirect(K){var ee=this;return(0,_.Z)(function*(){return Ot(Rt(),ee._delegate,"operation-not-supported-in-this-environment"),yield Mr(ee._delegate),J.f(ee._delegate,K,nn)})()}updateCurrentUser(K){return this._delegate.updateCurrentUser(K)}verifyPasswordResetCode(K){return J.a4(this._delegate,K)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return me.Persistence=Nn,me})();function Kt(me,le,K){let ee=me;"function"!=typeof me&&({next:ee,error:le,complete:K}=me);const ue=ee;return{next:Ge=>ue(Ge&&cr.getOrCreate(Ge)),error:le,complete:K}}function cn(me,le){const K=function sn(me,le){const K=Vn();if(!K)return[];const ee=J.az(Gr,me,le);switch(K.getItem(ee)){case Nn.NONE:return[J.L];case Nn.LOCAL:return[J.i,J.a];case Nn.SESSION:return[J.a];default:return[]}}(me,le);if("undefined"!=typeof self&&!K.includes(J.i)&&K.push(J.i),"undefined"!=typeof window)for(const ee of[J.b,J.a])K.includes(ee)||K.push(ee);return K.includes(J.L)||K.push(J.L),K}class hn{constructor(){this.providerId="phone",this._delegate=new J.P(Dr(E.Z.auth()))}static credential(le,K){return J.P.credential(le,K)}verifyPhoneNumber(le,K){return this._delegate.verifyPhoneNumber(le,K)}unwrap(){return this._delegate}}hn.PHONE_SIGN_IN_METHOD=J.P.PHONE_SIGN_IN_METHOD,hn.PROVIDER_ID=J.P.PROVIDER_ID;const tr=J.ax;class Se{constructor(le,K,ee=E.Z.app()){var ue;tr(null===(ue=ee.options)||void 0===ue?void 0:ue.apiKey,"invalid-api-key",{appName:ee.name}),this._delegate=new J.R(le,K,ee.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Fe(me){me.INTERNAL.registerComponent(new Ve.wA("auth-compat",le=>{const K=le.getProvider("app-compat").getImmediate(),ee=le.getProvider("auth");return new dt(K,ee)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:J.A.EMAIL_SIGNIN,PASSWORD_RESET:J.A.PASSWORD_RESET,RECOVER_EMAIL:J.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:J.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:J.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:J.A.VERIFY_EMAIL}},EmailAuthProvider:J.M,FacebookAuthProvider:J.N,GithubAuthProvider:J.T,GoogleAuthProvider:J.Q,OAuthProvider:J.U,SAMLAuthProvider:J.V,PhoneAuthProvider:hn,PhoneMultiFactorGenerator:J.m,RecaptchaVerifier:Se,TwitterAuthProvider:J.W,Auth:dt,AuthCredential:J.H,Error:ye.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),me.registerVersion("@firebase/auth-compat","0.2.23")}(E.Z)},2731:(Yt,Je,j)=>{j.d(Je,{ET:()=>_.ET,hJ:()=>_.hJ,JU:()=>_.JU,ad:()=>_.ad,cf:()=>_.cf,r7:()=>_.r7});var _=j(5525)},8306:(Yt,Je,j)=>{j.d(Je,{y:()=>ce});var _=j(2961),E=j(727),J=j(8822),ye=j(4671);var Ve=j(2416),he=j(576),Pe=j(2806);let ce=(()=>{class ut{constructor(Ct){Ct&&(this._subscribe=Ct)}lift(Ct){const Ke=new ut;return Ke.source=this,Ke.operator=Ct,Ke}subscribe(Ct,Ke,$e){const it=function yt(ut){return ut&&ut instanceof _.Lv||function ke(ut){return ut&&(0,he.m)(ut.next)&&(0,he.m)(ut.error)&&(0,he.m)(ut.complete)}(ut)&&(0,E.Nn)(ut)}(Ct)?Ct:new _.Hp(Ct,Ke,$e);return(0,Pe.x)(()=>{const{operator:_t,source:We}=this;it.add(_t?_t.call(it,We):We?this._subscribe(it):this._trySubscribe(it))}),it}_trySubscribe(Ct){try{return this._subscribe(Ct)}catch(Ke){Ct.error(Ke)}}forEach(Ct,Ke){return new(Ke=fe(Ke))(($e,it)=>{let _t;_t=this.subscribe(We=>{try{Ct(We)}catch(be){it(be),null==_t||_t.unsubscribe()}},it,$e)})}_subscribe(Ct){var Ke;return null===(Ke=this.source)||void 0===Ke?void 0:Ke.subscribe(Ct)}[J.L](){return this}pipe(...Ct){return function Le(ut){return 0===ut.length?ye.y:1===ut.length?ut[0]:function(Ct){return ut.reduce((Ke,$e)=>$e(Ke),Ct)}}(Ct)(this)}toPromise(Ct){return new(Ct=fe(Ct))((Ke,$e)=>{let it;this.subscribe(_t=>it=_t,_t=>$e(_t),()=>Ke(it))})}}return ut.create=Ye=>new ut(Ye),ut})();function fe(ut){var Ye;return null!==(Ye=null!=ut?ut:Ve.v.Promise)&&void 0!==Ye?Ye:Promise}},7579:(Yt,Je,j)=>{j.d(Je,{x:()=>Ve});var _=j(8306),E=j(727);const ye=(0,j(3888).d)(Pe=>function(){Pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Te=j(8737),Le=j(2806);let Ve=(()=>{class Pe extends _.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(fe){const ke=new he(this,this);return ke.operator=fe,ke}_throwIfClosed(){if(this.closed)throw new ye}next(fe){(0,Le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const ke=this.observers.slice();for(const yt of ke)yt.next(fe)}})}error(fe){(0,Le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=fe;const{observers:ke}=this;for(;ke.length;)ke.shift().error(fe)}})}complete(){(0,Le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:fe}=this;for(;fe.length;)fe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var fe;return(null===(fe=this.observers)||void 0===fe?void 0:fe.length)>0}_trySubscribe(fe){return this._throwIfClosed(),super._trySubscribe(fe)}_subscribe(fe){return this._throwIfClosed(),this._checkFinalizedStatuses(fe),this._innerSubscribe(fe)}_innerSubscribe(fe){const{hasError:ke,isStopped:yt,observers:ut}=this;return ke||yt?E.Lc:(ut.push(fe),new E.w0(()=>(0,Te.P)(ut,fe)))}_checkFinalizedStatuses(fe){const{hasError:ke,thrownError:yt,isStopped:ut}=this;ke?fe.error(yt):ut&&fe.complete()}asObservable(){const fe=new _.y;return fe.source=this,fe}}return Pe.create=(ce,fe)=>new he(ce,fe),Pe})();class he extends Ve{constructor(ce,fe){super(),this.destination=ce,this.source=fe}next(ce){var fe,ke;null===(ke=null===(fe=this.destination)||void 0===fe?void 0:fe.next)||void 0===ke||ke.call(fe,ce)}error(ce){var fe,ke;null===(ke=null===(fe=this.destination)||void 0===fe?void 0:fe.error)||void 0===ke||ke.call(fe,ce)}complete(){var ce,fe;null===(fe=null===(ce=this.destination)||void 0===ce?void 0:ce.complete)||void 0===fe||fe.call(ce)}_subscribe(ce){var fe,ke;return null!==(ke=null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(ce))&&void 0!==ke?ke:E.Lc}}},2961:(Yt,Je,j)=>{j.d(Je,{Hp:()=>yt,Lv:()=>ke});var _=j(576),E=j(727),J=j(2416),ye=j(7849);function Te(){}const Le=Pe("C",void 0,void 0);function Pe($e,it,_t){return{kind:$e,value:it,error:_t}}var ce=j(3410),fe=j(2806);class ke extends E.w0{constructor(it){super(),this.isStopped=!1,it?(this.destination=it,(0,E.Nn)(it)&&it.add(this)):this.destination=Ke}static create(it,_t,We){return new yt(it,_t,We)}next(it){this.isStopped?Ct(function he($e){return Pe("N",$e,void 0)}(it),this):this._next(it)}error(it){this.isStopped?Ct(function Ve($e){return Pe("E",void 0,$e)}(it),this):(this.isStopped=!0,this._error(it))}complete(){this.isStopped?Ct(Le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(it){this.destination.next(it)}_error(it){try{this.destination.error(it)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class yt extends ke{constructor(it,_t,We){let be;if(super(),(0,_.m)(it))be=it;else if(it){let Xe;({next:be,error:_t,complete:We}=it),this&&J.v.useDeprecatedNextContext?(Xe=Object.create(it),Xe.unsubscribe=()=>this.unsubscribe()):Xe=it,be=null==be?void 0:be.bind(Xe),_t=null==_t?void 0:_t.bind(Xe),We=null==We?void 0:We.bind(Xe)}this.destination={next:be?ut(be):Te,error:ut(null!=_t?_t:Ye),complete:We?ut(We):Te}}}function ut($e,it){return(..._t)=>{try{$e(..._t)}catch(We){J.v.useDeprecatedSynchronousErrorHandling?(0,fe.O)(We):(0,ye.h)(We)}}}function Ye($e){throw $e}function Ct($e,it){const{onStoppedNotification:_t}=J.v;_t&&ce.z.setTimeout(()=>_t($e,it))}const Ke={closed:!0,next:Te,error:Ye,complete:Te}},727:(Yt,Je,j)=>{j.d(Je,{Lc:()=>Le,w0:()=>Te,Nn:()=>Ve});var _=j(576);const J=(0,j(3888).d)(Pe=>function(fe){Pe(this),this.message=fe?`${fe.length} errors occurred during unsubscription:\n${fe.map((ke,yt)=>`${yt+1}) ${ke.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=fe});var ye=j(8737);class Te{constructor(ce){this.initialTeardown=ce,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let ce;if(!this.closed){this.closed=!0;const{_parentage:fe}=this;if(fe)if(this._parentage=null,Array.isArray(fe))for(const ut of fe)ut.remove(this);else fe.remove(this);const{initialTeardown:ke}=this;if((0,_.m)(ke))try{ke()}catch(ut){ce=ut instanceof J?ut.errors:[ut]}const{_teardowns:yt}=this;if(yt){this._teardowns=null;for(const ut of yt)try{he(ut)}catch(Ye){ce=null!=ce?ce:[],Ye instanceof J?ce=[...ce,...Ye.errors]:ce.push(Ye)}}if(ce)throw new J(ce)}}add(ce){var fe;if(ce&&ce!==this)if(this.closed)he(ce);else{if(ce instanceof Te){if(ce.closed||ce._hasParent(this))return;ce._addParent(this)}(this._teardowns=null!==(fe=this._teardowns)&&void 0!==fe?fe:[]).push(ce)}}_hasParent(ce){const{_parentage:fe}=this;return fe===ce||Array.isArray(fe)&&fe.includes(ce)}_addParent(ce){const{_parentage:fe}=this;this._parentage=Array.isArray(fe)?(fe.push(ce),fe):fe?[fe,ce]:ce}_removeParent(ce){const{_parentage:fe}=this;fe===ce?this._parentage=null:Array.isArray(fe)&&(0,ye.P)(fe,ce)}remove(ce){const{_teardowns:fe}=this;fe&&(0,ye.P)(fe,ce),ce instanceof Te&&ce._removeParent(this)}}Te.EMPTY=(()=>{const Pe=new Te;return Pe.closed=!0,Pe})();const Le=Te.EMPTY;function Ve(Pe){return Pe instanceof Te||Pe&&"closed"in Pe&&(0,_.m)(Pe.remove)&&(0,_.m)(Pe.add)&&(0,_.m)(Pe.unsubscribe)}function he(Pe){(0,_.m)(Pe)?Pe():Pe.unsubscribe()}},2416:(Yt,Je,j)=>{j.d(Je,{v:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Yt,Je,j)=>{j.d(Je,{z:()=>Te});var _=j(8189),J=j(7669),ye=j(8996);function Te(...Le){return function E(){return(0,_.J)(1)}()((0,ye.D)(Le,(0,J.yG)(Le)))}},515:(Yt,Je,j)=>{j.d(Je,{E:()=>E});const E=new(j(8306).y)(Te=>Te.complete())},8996:(Yt,Je,j)=>{j.d(Je,{D:()=>be});var _=j(8421),E=j(5363),J=j(9468),Le=j(8306),he=j(2202),Pe=j(576),ce=j(9672);function ke(Xe,At){if(!Xe)throw new Error("Iterable cannot be null");return new Le.y(bt=>{(0,ce.f)(bt,At,()=>{const lt=Xe[Symbol.asyncIterator]();(0,ce.f)(bt,At,()=>{lt.next().then(Ce=>{Ce.done?bt.complete():bt.next(Ce.value)})},0,!0)})})}var yt=j(3670),ut=j(8239),Ye=j(1144),Ct=j(6495),Ke=j(2206),$e=j(4532),it=j(3260);function be(Xe,At){return At?function We(Xe,At){if(null!=Xe){if((0,yt.c)(Xe))return function ye(Xe,At){return(0,_.Xf)(Xe).pipe((0,J.R)(At),(0,E.Q)(At))}(Xe,At);if((0,Ye.z)(Xe))return function Ve(Xe,At){return new Le.y(bt=>{let lt=0;return At.schedule(function(){lt===Xe.length?bt.complete():(bt.next(Xe[lt++]),bt.closed||this.schedule())})})}(Xe,At);if((0,ut.t)(Xe))return function Te(Xe,At){return(0,_.Xf)(Xe).pipe((0,J.R)(At),(0,E.Q)(At))}(Xe,At);if((0,Ke.D)(Xe))return ke(Xe,At);if((0,Ct.T)(Xe))return function fe(Xe,At){return new Le.y(bt=>{let lt;return(0,ce.f)(bt,At,()=>{lt=Xe[he.h](),(0,ce.f)(bt,At,()=>{let Ce,je;try{({value:Ce,done:je}=lt.next())}catch(tt){return void bt.error(tt)}je?bt.complete():bt.next(Ce)},0,!0)}),()=>(0,Pe.m)(null==lt?void 0:lt.return)&&lt.return()})}(Xe,At);if((0,it.L)(Xe))return function _t(Xe,At){return ke((0,it.Q)(Xe),At)}(Xe,At)}throw(0,$e.z)(Xe)}(Xe,At):(0,_.Xf)(Xe)}},8421:(Yt,Je,j)=>{j.d(Je,{Xf:()=>yt});var _=j(5987),E=j(1144),J=j(8239),ye=j(8306),Te=j(3670),Le=j(2206),Ve=j(4532),he=j(6495),Pe=j(3260),ce=j(576),fe=j(7849),ke=j(8822);function yt(We){if(We instanceof ye.y)return We;if(null!=We){if((0,Te.c)(We))return function ut(We){return new ye.y(be=>{const Xe=We[ke.L]();if((0,ce.m)(Xe.subscribe))return Xe.subscribe(be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(We);if((0,E.z)(We))return function Ye(We){return new ye.y(be=>{for(let Xe=0;Xe<We.length&&!be.closed;Xe++)be.next(We[Xe]);be.complete()})}(We);if((0,J.t)(We))return function Ct(We){return new ye.y(be=>{We.then(Xe=>{be.closed||(be.next(Xe),be.complete())},Xe=>be.error(Xe)).then(null,fe.h)})}(We);if((0,Le.D)(We))return $e(We);if((0,he.T)(We))return function Ke(We){return new ye.y(be=>{for(const Xe of We)if(be.next(Xe),be.closed)return;be.complete()})}(We);if((0,Pe.L)(We))return function it(We){return $e((0,Pe.Q)(We))}(We)}throw(0,Ve.z)(We)}function $e(We){return new ye.y(be=>{(function _t(We,be){var Xe,At,bt,lt;return(0,_.mG)(this,void 0,void 0,function*(){try{for(Xe=(0,_.KL)(We);!(At=yield Xe.next()).done;)if(be.next(At.value),be.closed)return}catch(Ce){bt={error:Ce}}finally{try{At&&!At.done&&(lt=Xe.return)&&(yield lt.call(Xe))}finally{if(bt)throw bt.error}}be.complete()})})(We,be).catch(Xe=>be.error(Xe))})}},6451:(Yt,Je,j)=>{j.d(Je,{T:()=>Le});var _=j(8189),E=j(8421),J=j(515),ye=j(7669),Te=j(8996);function Le(...Ve){const he=(0,ye.yG)(Ve),Pe=(0,ye._6)(Ve,1/0),ce=Ve;return ce.length?1===ce.length?(0,E.Xf)(ce[0]):(0,_.J)(Pe)((0,Te.D)(ce,he)):J.E}},9646:(Yt,Je,j)=>{j.d(Je,{of:()=>J});var _=j(7669),E=j(8996);function J(...ye){const Te=(0,_.yG)(ye);return(0,E.D)(ye,Te)}},5403:(Yt,Je,j)=>{j.d(Je,{Q:()=>E});var _=j(2961);class E extends _.Lv{constructor(ye,Te,Le,Ve,he){super(ye),this.onFinalize=he,this._next=Te?function(Pe){try{Te(Pe)}catch(ce){ye.error(ce)}}:super._next,this._error=Ve?function(Pe){try{Ve(Pe)}catch(ce){ye.error(ce)}finally{this.unsubscribe()}}:super._error,this._complete=Le?function(){try{Le()}catch(Pe){ye.error(Pe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ye;const{closed:Te}=this;super.unsubscribe(),!Te&&(null===(ye=this.onFinalize)||void 0===ye||ye.call(this))}}},6590:(Yt,Je,j)=>{j.d(Je,{d:()=>J});var _=j(4482),E=j(5403);function J(ye){return(0,_.e)((Te,Le)=>{let Ve=!1;Te.subscribe(new E.Q(Le,he=>{Ve=!0,Le.next(he)},()=>{Ve||Le.next(ye),Le.complete()}))})}},9300:(Yt,Je,j)=>{j.d(Je,{h:()=>J});var _=j(4482),E=j(5403);function J(ye,Te){return(0,_.e)((Le,Ve)=>{let he=0;Le.subscribe(new E.Q(Ve,Pe=>ye.call(Te,Pe,he++)&&Ve.next(Pe)))})}},590:(Yt,Je,j)=>{j.d(Je,{P:()=>Ve});var _=j(6805),E=j(9300),J=j(5698),ye=j(6590),Te=j(8068),Le=j(4671);function Ve(he,Pe){const ce=arguments.length>=2;return fe=>fe.pipe(he?(0,E.h)((ke,yt)=>he(ke,yt,fe)):Le.y,(0,J.q)(1),ce?(0,ye.d)(Pe):(0,Te.T)(()=>new _.K))}},4004:(Yt,Je,j)=>{j.d(Je,{U:()=>J});var _=j(4482),E=j(5403);function J(ye,Te){return(0,_.e)((Le,Ve)=>{let he=0;Le.subscribe(new E.Q(Ve,Pe=>{Ve.next(ye.call(Te,Pe,he++))}))})}},8189:(Yt,Je,j)=>{j.d(Je,{J:()=>J});var _=j(5577),E=j(4671);function J(ye=1/0){return(0,_.z)(E.y,ye)}},5577:(Yt,Je,j)=>{j.d(Je,{z:()=>he});var _=j(4004),E=j(8421),J=j(4482),ye=j(9672),Te=j(5403),Ve=j(576);function he(Pe,ce,fe=1/0){return(0,Ve.m)(ce)?he((ke,yt)=>(0,_.U)((ut,Ye)=>ce(ke,ut,yt,Ye))((0,E.Xf)(Pe(ke,yt))),fe):("number"==typeof ce&&(fe=ce),(0,J.e)((ke,yt)=>function Le(Pe,ce,fe,ke,yt,ut,Ye,Ct){const Ke=[];let $e=0,it=0,_t=!1;const We=()=>{_t&&!Ke.length&&!$e&&ce.complete()},be=At=>$e<ke?Xe(At):Ke.push(At),Xe=At=>{ut&&ce.next(At),$e++;let bt=!1;(0,E.Xf)(fe(At,it++)).subscribe(new Te.Q(ce,lt=>{null==yt||yt(lt),ut?be(lt):ce.next(lt)},()=>{bt=!0},void 0,()=>{if(bt)try{for($e--;Ke.length&&$e<ke;){const lt=Ke.shift();Ye?(0,ye.f)(ce,Ye,()=>Xe(lt)):Xe(lt)}We()}catch(lt){ce.error(lt)}}))};return Pe.subscribe(new Te.Q(ce,be,()=>{_t=!0,We()})),()=>{null==Ct||Ct()}}(ke,yt,Pe,fe)))}},5363:(Yt,Je,j)=>{j.d(Je,{Q:()=>ye});var _=j(9672),E=j(4482),J=j(5403);function ye(Te,Le=0){return(0,E.e)((Ve,he)=>{Ve.subscribe(new J.Q(he,Pe=>(0,_.f)(he,Te,()=>he.next(Pe),Le),()=>(0,_.f)(he,Te,()=>he.complete(),Le),Pe=>(0,_.f)(he,Te,()=>he.error(Pe),Le)))})}},5026:(Yt,Je,j)=>{j.d(Je,{R:()=>ye});var _=j(4482),E=j(5403);function J(Te,Le,Ve,he,Pe){return(ce,fe)=>{let ke=Ve,yt=Le,ut=0;ce.subscribe(new E.Q(fe,Ye=>{const Ct=ut++;yt=ke?Te(yt,Ye,Ct):(ke=!0,Ye),he&&fe.next(yt)},Pe&&(()=>{ke&&fe.next(yt),fe.complete()})))}}function ye(Te,Le){return(0,_.e)(J(Te,Le,arguments.length>=2,!0))}},3099:(Yt,Je,j)=>{j.d(Je,{B:()=>Le});var _=j(8996),E=j(5698),J=j(7579),ye=j(2961),Te=j(4482);function Le(he={}){const{connector:Pe=(()=>new J.x),resetOnError:ce=!0,resetOnComplete:fe=!0,resetOnRefCountZero:ke=!0}=he;return yt=>{let ut=null,Ye=null,Ct=null,Ke=0,$e=!1,it=!1;const _t=()=>{null==Ye||Ye.unsubscribe(),Ye=null},We=()=>{_t(),ut=Ct=null,$e=it=!1},be=()=>{const Xe=ut;We(),null==Xe||Xe.unsubscribe()};return(0,Te.e)((Xe,At)=>{Ke++,!it&&!$e&&_t();const bt=Ct=null!=Ct?Ct:Pe();At.add(()=>{Ke--,0===Ke&&!it&&!$e&&(Ye=Ve(be,ke))}),bt.subscribe(At),ut||(ut=new ye.Hp({next:lt=>bt.next(lt),error:lt=>{it=!0,_t(),Ye=Ve(We,ce,lt),bt.error(lt)},complete:()=>{$e=!0,_t(),Ye=Ve(We,fe),bt.complete()}}),(0,_.D)(Xe).subscribe(ut))})(yt)}}function Ve(he,Pe,...ce){return!0===Pe?(he(),null):!1===Pe?null:Pe(...ce).pipe((0,E.q)(1)).subscribe(()=>he())}},8675:(Yt,Je,j)=>{j.d(Je,{O:()=>ye});var _=j(7272),E=j(7669),J=j(4482);function ye(...Te){const Le=(0,E.yG)(Te);return(0,J.e)((Ve,he)=>{(Le?(0,_.z)(Te,Ve,Le):(0,_.z)(Te,Ve)).subscribe(he)})}},9468:(Yt,Je,j)=>{j.d(Je,{R:()=>E});var _=j(4482);function E(J,ye=0){return(0,_.e)((Te,Le)=>{Le.add(J.schedule(()=>Te.subscribe(Le),ye))})}},3900:(Yt,Je,j)=>{j.d(Je,{w:()=>ye});var _=j(8421),E=j(4482),J=j(5403);function ye(Te,Le){return(0,E.e)((Ve,he)=>{let Pe=null,ce=0,fe=!1;const ke=()=>fe&&!Pe&&he.complete();Ve.subscribe(new J.Q(he,yt=>{null==Pe||Pe.unsubscribe();let ut=0;const Ye=ce++;(0,_.Xf)(Te(yt,Ye)).subscribe(Pe=new J.Q(he,Ct=>he.next(Le?Le(yt,Ct,Ye,ut++):Ct),()=>{Pe=null,ke()}))},()=>{fe=!0,ke()}))})}},5698:(Yt,Je,j)=>{j.d(Je,{q:()=>ye});var _=j(515),E=j(4482),J=j(5403);function ye(Te){return Te<=0?()=>_.E:(0,E.e)((Le,Ve)=>{let he=0;Le.subscribe(new J.Q(Ve,Pe=>{++he<=Te&&(Ve.next(Pe),Te<=he&&Ve.complete())}))})}},8505:(Yt,Je,j)=>{j.d(Je,{b:()=>Te});var _=j(576),E=j(4482),J=j(5403),ye=j(4671);function Te(Le,Ve,he){const Pe=(0,_.m)(Le)||Ve||he?{next:Le,error:Ve,complete:he}:Le;return Pe?(0,E.e)((ce,fe)=>{var ke;null===(ke=Pe.subscribe)||void 0===ke||ke.call(Pe);let yt=!0;ce.subscribe(new J.Q(fe,ut=>{var Ye;null===(Ye=Pe.next)||void 0===Ye||Ye.call(Pe,ut),fe.next(ut)},()=>{var ut;yt=!1,null===(ut=Pe.complete)||void 0===ut||ut.call(Pe),fe.complete()},ut=>{var Ye;yt=!1,null===(Ye=Pe.error)||void 0===Ye||Ye.call(Pe,ut),fe.error(ut)},()=>{var ut,Ye;yt&&(null===(ut=Pe.unsubscribe)||void 0===ut||ut.call(Pe)),null===(Ye=Pe.finalize)||void 0===Ye||Ye.call(Pe)}))}):ye.y}},8068:(Yt,Je,j)=>{j.d(Je,{T:()=>ye});var _=j(6805),E=j(4482),J=j(5403);function ye(Le=Te){return(0,E.e)((Ve,he)=>{let Pe=!1;Ve.subscribe(new J.Q(he,ce=>{Pe=!0,he.next(ce)},()=>Pe?he.complete():he.error(Le())))})}function Te(){return new _.K}},4408:(Yt,Je,j)=>{j.d(Je,{o:()=>Te});var _=j(727);class E extends _.w0{constructor(Ve,he){super()}schedule(Ve,he=0){return this}}const J={setInterval(...Le){const{delegate:Ve}=J;return((null==Ve?void 0:Ve.setInterval)||setInterval)(...Le)},clearInterval(Le){const{delegate:Ve}=J;return((null==Ve?void 0:Ve.clearInterval)||clearInterval)(Le)},delegate:void 0};var ye=j(8737);class Te extends E{constructor(Ve,he){super(Ve,he),this.scheduler=Ve,this.work=he,this.pending=!1}schedule(Ve,he=0){if(this.closed)return this;this.state=Ve;const Pe=this.id,ce=this.scheduler;return null!=Pe&&(this.id=this.recycleAsyncId(ce,Pe,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(ce,this.id,he),this}requestAsyncId(Ve,he,Pe=0){return J.setInterval(Ve.flush.bind(Ve,this),Pe)}recycleAsyncId(Ve,he,Pe=0){if(null!=Pe&&this.delay===Pe&&!1===this.pending)return he;J.clearInterval(he)}execute(Ve,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Pe=this._execute(Ve,he);if(Pe)return Pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ve,he){let ce,Pe=!1;try{this.work(Ve)}catch(fe){Pe=!0,ce=fe||new Error("Scheduled action threw falsy error")}if(Pe)return this.unsubscribe(),ce}unsubscribe(){if(!this.closed){const{id:Ve,scheduler:he}=this,{actions:Pe}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ye.P)(Pe,this),null!=Ve&&(this.id=this.recycleAsyncId(he,Ve,null)),this.delay=null,super.unsubscribe()}}}},7565:(Yt,Je,j)=>{j.d(Je,{v:()=>J});var _=j(6063);class E{constructor(Te,Le=E.now){this.schedulerActionCtor=Te,this.now=Le}schedule(Te,Le=0,Ve){return new this.schedulerActionCtor(this,Te).schedule(Ve,Le)}}E.now=_.l.now;class J extends E{constructor(Te,Le=E.now){super(Te,Le),this.actions=[],this._active=!1,this._scheduled=void 0}flush(Te){const{actions:Le}=this;if(this._active)return void Le.push(Te);let Ve;this._active=!0;do{if(Ve=Te.execute(Te.state,Te.delay))break}while(Te=Le.shift());if(this._active=!1,Ve){for(;Te=Le.shift();)Te.unsubscribe();throw Ve}}}},4986:(Yt,Je,j)=>{j.d(Je,{z:()=>J});var _=j(4408);const J=new(j(7565).v)(_.o)},6063:(Yt,Je,j)=>{j.d(Je,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3410:(Yt,Je,j)=>{j.d(Je,{z:()=>_});const _={setTimeout(...E){const{delegate:J}=_;return((null==J?void 0:J.setTimeout)||setTimeout)(...E)},clearTimeout(E){const{delegate:J}=_;return((null==J?void 0:J.clearTimeout)||clearTimeout)(E)},delegate:void 0}},2202:(Yt,Je,j)=>{j.d(Je,{h:()=>E});const E=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Yt,Je,j)=>{j.d(Je,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Yt,Je,j)=>{j.d(Je,{K:()=>E});const E=(0,j(3888).d)(J=>function(){J(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Yt,Je,j)=>{j.d(Je,{_6:()=>Le,jO:()=>ye,yG:()=>Te});var _=j(576);function J(Ve){return Ve[Ve.length-1]}function ye(Ve){return(0,_.m)(J(Ve))?Ve.pop():void 0}function Te(Ve){return function E(Ve){return Ve&&(0,_.m)(Ve.schedule)}(J(Ve))?Ve.pop():void 0}function Le(Ve,he){return"number"==typeof J(Ve)?Ve.pop():he}},4742:(Yt,Je,j)=>{j.d(Je,{D:()=>Te});const{isArray:_}=Array,{getPrototypeOf:E,prototype:J,keys:ye}=Object;function Te(Ve){if(1===Ve.length){const he=Ve[0];if(_(he))return{args:he,keys:null};if(function Le(Ve){return Ve&&"object"==typeof Ve&&E(Ve)===J}(he)){const Pe=ye(he);return{args:Pe.map(ce=>he[ce]),keys:Pe}}}return{args:Ve,keys:null}}},8737:(Yt,Je,j)=>{function _(E,J){if(E){const ye=E.indexOf(J);0<=ye&&E.splice(ye,1)}}j.d(Je,{P:()=>_})},3888:(Yt,Je,j)=>{function _(E){const ye=E(Te=>{Error.call(Te),Te.stack=(new Error).stack});return ye.prototype=Object.create(Error.prototype),ye.prototype.constructor=ye,ye}j.d(Je,{d:()=>_})},1810:(Yt,Je,j)=>{function _(E,J){return E.reduce((ye,Te,Le)=>(ye[Te]=J[Le],ye),{})}j.d(Je,{n:()=>_})},2806:(Yt,Je,j)=>{j.d(Je,{x:()=>J,O:()=>ye});var _=j(2416);let E=null;function J(Te){if(_.v.useDeprecatedSynchronousErrorHandling){const Le=!E;if(Le&&(E={errorThrown:!1,error:null}),Te(),Le){const{errorThrown:Ve,error:he}=E;if(E=null,Ve)throw he}}else Te()}function ye(Te){_.v.useDeprecatedSynchronousErrorHandling&&E&&(E.errorThrown=!0,E.error=Te)}},9672:(Yt,Je,j)=>{function _(E,J,ye,Te=0,Le=!1){const Ve=J.schedule(function(){ye(),Le?E.add(this.schedule(null,Te)):this.unsubscribe()},Te);if(E.add(Ve),!Le)return Ve}j.d(Je,{f:()=>_})},4671:(Yt,Je,j)=>{function _(E){return E}j.d(Je,{y:()=>_})},1144:(Yt,Je,j)=>{j.d(Je,{z:()=>_});const _=E=>E&&"number"==typeof E.length&&"function"!=typeof E},2206:(Yt,Je,j)=>{j.d(Je,{D:()=>E});var _=j(576);function E(J){return Symbol.asyncIterator&&(0,_.m)(null==J?void 0:J[Symbol.asyncIterator])}},576:(Yt,Je,j)=>{function _(E){return"function"==typeof E}j.d(Je,{m:()=>_})},3670:(Yt,Je,j)=>{j.d(Je,{c:()=>J});var _=j(8822),E=j(576);function J(ye){return(0,E.m)(ye[_.L])}},6495:(Yt,Je,j)=>{j.d(Je,{T:()=>J});var _=j(2202),E=j(576);function J(ye){return(0,E.m)(null==ye?void 0:ye[_.h])}},8239:(Yt,Je,j)=>{j.d(Je,{t:()=>E});var _=j(576);function E(J){return(0,_.m)(null==J?void 0:J.then)}},3260:(Yt,Je,j)=>{j.d(Je,{Q:()=>J,L:()=>ye});var _=j(5987),E=j(576);function J(Te){return(0,_.FC)(this,arguments,function*(){const Ve=Te.getReader();try{for(;;){const{value:he,done:Pe}=yield(0,_.qq)(Ve.read());if(Pe)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(he)}}finally{Ve.releaseLock()}})}function ye(Te){return(0,E.m)(null==Te?void 0:Te.getReader)}},4482:(Yt,Je,j)=>{j.d(Je,{A:()=>E,e:()=>J});var _=j(576);function E(ye){return(0,_.m)(null==ye?void 0:ye.lift)}function J(ye){return Te=>{if(E(Te))return Te.lift(function(Le){try{return ye(Le,this)}catch(Ve){this.error(Ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Yt,Je,j)=>{j.d(Je,{Z:()=>ye});var _=j(4004);const{isArray:E}=Array;function ye(Te){return(0,_.U)(Le=>function J(Te,Le){return E(Le)?Te(...Le):Te(Le)}(Te,Le))}},7849:(Yt,Je,j)=>{j.d(Je,{h:()=>J});var _=j(2416),E=j(3410);function J(ye){E.z.setTimeout(()=>{const{onUnhandledError:Te}=_.v;if(!Te)throw ye;Te(ye)})}},4532:(Yt,Je,j)=>{function _(E){return new TypeError(`You provided ${null!==E&&"object"==typeof E?"an invalid object":`'${E}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(Je,{z:()=>_})},5987:(Yt,Je,j)=>{function he(Ce,je,tt,ct){return new(tt||(tt=Promise))(function(et,Tn){function Jt(Zt){try{St(ct.next(Zt))}catch(an){Tn(an)}}function On(Zt){try{St(ct.throw(Zt))}catch(an){Tn(an)}}function St(Zt){Zt.done?et(Zt.value):function wt(et){return et instanceof tt?et:new tt(function(Tn){Tn(et)})}(Zt.value).then(Jt,On)}St((ct=ct.apply(Ce,je||[])).next())})}function Ke(Ce){return this instanceof Ke?(this.v=Ce,this):new Ke(Ce)}function $e(Ce,je,tt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var wt,ct=tt.apply(Ce,je||[]),et=[];return wt={},Tn("next"),Tn("throw"),Tn("return"),wt[Symbol.asyncIterator]=function(){return this},wt;function Tn(wn){ct[wn]&&(wt[wn]=function(gt){return new Promise(function(Dt,Me){et.push([wn,gt,Dt,Me])>1||Jt(wn,gt)})})}function Jt(wn,gt){try{!function On(wn){wn.value instanceof Ke?Promise.resolve(wn.value.v).then(St,Zt):an(et[0][2],wn)}(ct[wn](gt))}catch(Dt){an(et[0][3],Dt)}}function St(wn){Jt("next",wn)}function Zt(wn){Jt("throw",wn)}function an(wn,gt){wn(gt),et.shift(),et.length&&Jt(et[0][0],et[0][1])}}function _t(Ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var tt,je=Ce[Symbol.asyncIterator];return je?je.call(Ce):(Ce=function ke(Ce){var je="function"==typeof Symbol&&Symbol.iterator,tt=je&&Ce[je],ct=0;if(tt)return tt.call(Ce);if(Ce&&"number"==typeof Ce.length)return{next:function(){return Ce&&ct>=Ce.length&&(Ce=void 0),{value:Ce&&Ce[ct++],done:!Ce}}};throw new TypeError(je?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ce),tt={},ct("next"),ct("throw"),ct("return"),tt[Symbol.asyncIterator]=function(){return this},tt);function ct(et){tt[et]=Ce[et]&&function(Tn){return new Promise(function(Jt,On){!function wt(et,Tn,Jt,On){Promise.resolve(On).then(function(St){et({value:St,done:Jt})},Tn)}(Jt,On,(Tn=Ce[et](Tn)).done,Tn.value)})}}}j.d(Je,{mG:()=>he,qq:()=>Ke,FC:()=>$e,KL:()=>_t})},1777:(Yt,Je,j)=>{j.d(Je,{l3:()=>J,_j:()=>_,LC:()=>E,ZN:()=>$e,jt:()=>Te,vP:()=>Ve,SB:()=>Pe,oB:()=>he,eR:()=>fe,X$:()=>ye,ZE:()=>it,k1:()=>_t});class _{}class E{}const J="*";function ye(We,be){return{type:7,name:We,definitions:be,options:{}}}function Te(We,be=null){return{type:4,styles:be,timings:We}}function Ve(We,be=null){return{type:2,steps:We,options:be}}function he(We){return{type:6,styles:We,offset:null}}function Pe(We,be,Xe){return{type:0,name:We,styles:be,options:Xe}}function fe(We,be,Xe=null){return{type:1,expr:We,animation:be,options:Xe}}function Ke(We){Promise.resolve(null).then(We)}class $e{constructor(be=0,Xe=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=be+Xe}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(be=>be()),this._onDoneFns=[])}onStart(be){this._onStartFns.push(be)}onDone(be){this._onDoneFns.push(be)}onDestroy(be){this._onDestroyFns.push(be)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Ke(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(be=>be()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(be=>be()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(be){this._position=this.totalTime?be*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(be){const Xe="start"==be?this._onStartFns:this._onDoneFns;Xe.forEach(At=>At()),Xe.length=0}}class it{constructor(be){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=be;let Xe=0,At=0,bt=0;const lt=this.players.length;0==lt?Ke(()=>this._onFinish()):this.players.forEach(Ce=>{Ce.onDone(()=>{++Xe==lt&&this._onFinish()}),Ce.onDestroy(()=>{++At==lt&&this._onDestroy()}),Ce.onStart(()=>{++bt==lt&&this._onStart()})}),this.totalTime=this.players.reduce((Ce,je)=>Math.max(Ce,je.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(be=>be()),this._onDoneFns=[])}init(){this.players.forEach(be=>be.init())}onStart(be){this._onStartFns.push(be)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(be=>be()),this._onStartFns=[])}onDone(be){this._onDoneFns.push(be)}onDestroy(be){this._onDestroyFns.push(be)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(be=>be.play())}pause(){this.players.forEach(be=>be.pause())}restart(){this.players.forEach(be=>be.restart())}finish(){this._onFinish(),this.players.forEach(be=>be.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(be=>be.destroy()),this._onDestroyFns.forEach(be=>be()),this._onDestroyFns=[])}reset(){this.players.forEach(be=>be.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(be){const Xe=be*this.totalTime;this.players.forEach(At=>{const bt=At.totalTime?Math.min(1,Xe/At.totalTime):1;At.setPosition(bt)})}getPosition(){const be=this.players.reduce((Xe,At)=>null===Xe||At.totalTime>Xe.totalTime?At:Xe,null);return null!=be?be.getPosition():0}beforeDestroy(){this.players.forEach(be=>{be.beforeDestroy&&be.beforeDestroy()})}triggerCallback(be){const Xe="start"==be?this._onStartFns:this._onDoneFns;Xe.forEach(At=>At()),Xe.length=0}}const _t="!"},9808:(Yt,Je,j)=>{j.d(Je,{mr:()=>it,ez:()=>pi,K0:()=>Ve,Do:()=>We,V_:()=>ce,Ye:()=>be,S$:()=>Ke,sg:()=>kr,O5:()=>Ue,b0:()=>_t,lw:()=>he,EM:()=>qe,JF:()=>An,PM:()=>X,w_:()=>Le,bD:()=>zr,q:()=>J,Mx:()=>Xi,HT:()=>Te});var _=j(5e3);let E=null;function J(){return E}function Te(F){E||(E=F)}class Le{}const Ve=new _.OlP("DocumentToken");let he=(()=>{class F{historyGo(V){throw new Error("Not implemented")}}return F.\u0275fac=function(V){return new(V||F)},F.\u0275prov=_.Yz7({token:F,factory:function(){return function Pe(){return(0,_.LFG)(fe)}()},providedIn:"platform"}),F})();const ce=new _.OlP("Location Initialized");let fe=(()=>{class F extends he{constructor(V){super(),this._doc=V,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return J().getBaseHref(this._doc)}onPopState(V){const se=J().getGlobalEventTarget(this._doc,"window");return se.addEventListener("popstate",V,!1),()=>se.removeEventListener("popstate",V)}onHashChange(V){const se=J().getGlobalEventTarget(this._doc,"window");return se.addEventListener("hashchange",V,!1),()=>se.removeEventListener("hashchange",V)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(V){this.location.pathname=V}pushState(V,se,Ie){ke()?this._history.pushState(V,se,Ie):this.location.hash=Ie}replaceState(V,se,Ie){ke()?this._history.replaceState(V,se,Ie):this.location.hash=Ie}forward(){this._history.forward()}back(){this._history.back()}historyGo(V=0){this._history.go(V)}getState(){return this._history.state}}return F.\u0275fac=function(V){return new(V||F)(_.LFG(Ve))},F.\u0275prov=_.Yz7({token:F,factory:function(){return function yt(){return new fe((0,_.LFG)(Ve))}()},providedIn:"platform"}),F})();function ke(){return!!window.history.pushState}function ut(F,te){if(0==F.length)return te;if(0==te.length)return F;let V=0;return F.endsWith("/")&&V++,te.startsWith("/")&&V++,2==V?F+te.substring(1):1==V?F+te:F+"/"+te}function Ye(F){const te=F.match(/#|\?|$/),V=te&&te.index||F.length;return F.slice(0,V-("/"===F[V-1]?1:0))+F.slice(V)}function Ct(F){return F&&"?"!==F[0]?"?"+F:F}let Ke=(()=>{class F{historyGo(V){throw new Error("Not implemented")}}return F.\u0275fac=function(V){return new(V||F)},F.\u0275prov=_.Yz7({token:F,factory:function(){return function $e(F){const te=(0,_.LFG)(Ve).location;return new _t((0,_.LFG)(he),te&&te.origin||"")}()},providedIn:"root"}),F})();const it=new _.OlP("appBaseHref");let _t=(()=>{class F extends Ke{constructor(V,se){if(super(),this._platformLocation=V,this._removeListenerFns=[],null==se&&(se=this._platformLocation.getBaseHrefFromDOM()),null==se)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=se}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}prepareExternalUrl(V){return ut(this._baseHref,V)}path(V=!1){const se=this._platformLocation.pathname+Ct(this._platformLocation.search),Ie=this._platformLocation.hash;return Ie&&V?`${se}${Ie}`:se}pushState(V,se,Ie,ht){const Mt=this.prepareExternalUrl(Ie+Ct(ht));this._platformLocation.pushState(V,se,Mt)}replaceState(V,se,Ie,ht){const Mt=this.prepareExternalUrl(Ie+Ct(ht));this._platformLocation.replaceState(V,se,Mt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(V=0){var se,Ie;null===(Ie=(se=this._platformLocation).historyGo)||void 0===Ie||Ie.call(se,V)}}return F.\u0275fac=function(V){return new(V||F)(_.LFG(he),_.LFG(it,8))},F.\u0275prov=_.Yz7({token:F,factory:F.\u0275fac}),F})(),We=(()=>{class F extends Ke{constructor(V,se){super(),this._platformLocation=V,this._baseHref="",this._removeListenerFns=[],null!=se&&(this._baseHref=se)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}path(V=!1){let se=this._platformLocation.hash;return null==se&&(se="#"),se.length>0?se.substring(1):se}prepareExternalUrl(V){const se=ut(this._baseHref,V);return se.length>0?"#"+se:se}pushState(V,se,Ie,ht){let Mt=this.prepareExternalUrl(Ie+Ct(ht));0==Mt.length&&(Mt=this._platformLocation.pathname),this._platformLocation.pushState(V,se,Mt)}replaceState(V,se,Ie,ht){let Mt=this.prepareExternalUrl(Ie+Ct(ht));0==Mt.length&&(Mt=this._platformLocation.pathname),this._platformLocation.replaceState(V,se,Mt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(V=0){var se,Ie;null===(Ie=(se=this._platformLocation).historyGo)||void 0===Ie||Ie.call(se,V)}}return F.\u0275fac=function(V){return new(V||F)(_.LFG(he),_.LFG(it,8))},F.\u0275prov=_.Yz7({token:F,factory:F.\u0275fac}),F})(),be=(()=>{class F{constructor(V,se){this._subject=new _.vpe,this._urlChangeListeners=[],this._platformStrategy=V;const Ie=this._platformStrategy.getBaseHref();this._platformLocation=se,this._baseHref=Ye(bt(Ie)),this._platformStrategy.onPopState(ht=>{this._subject.emit({url:this.path(!0),pop:!0,state:ht.state,type:ht.type})})}path(V=!1){return this.normalize(this._platformStrategy.path(V))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(V,se=""){return this.path()==this.normalize(V+Ct(se))}normalize(V){return F.stripTrailingSlash(function At(F,te){return F&&te.startsWith(F)?te.substring(F.length):te}(this._baseHref,bt(V)))}prepareExternalUrl(V){return V&&"/"!==V[0]&&(V="/"+V),this._platformStrategy.prepareExternalUrl(V)}go(V,se="",Ie=null){this._platformStrategy.pushState(Ie,"",V,se),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Ct(se)),Ie)}replaceState(V,se="",Ie=null){this._platformStrategy.replaceState(Ie,"",V,se),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Ct(se)),Ie)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(V=0){var se,Ie;null===(Ie=(se=this._platformStrategy).historyGo)||void 0===Ie||Ie.call(se,V)}onUrlChange(V){this._urlChangeListeners.push(V),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(se=>{this._notifyUrlChangeListeners(se.url,se.state)}))}_notifyUrlChangeListeners(V="",se){this._urlChangeListeners.forEach(Ie=>Ie(V,se))}subscribe(V,se,Ie){return this._subject.subscribe({next:V,error:se,complete:Ie})}}return F.normalizeQueryParams=Ct,F.joinWithSlash=ut,F.stripTrailingSlash=Ye,F.\u0275fac=function(V){return new(V||F)(_.LFG(Ke),_.LFG(he))},F.\u0275prov=_.Yz7({token:F,factory:function(){return function Xe(){return new be((0,_.LFG)(Ke),(0,_.LFG)(he))}()},providedIn:"root"}),F})();function bt(F){return F.replace(/\/index.html$/,"")}var je=(()=>((je=je||{})[je.Zero=0]="Zero",je[je.One=1]="One",je[je.Two=2]="Two",je[je.Few=3]="Few",je[je.Many=4]="Many",je[je.Other=5]="Other",je))();const yr=_.kL8;class Bn{}let ri=(()=>{class F extends Bn{constructor(V){super(),this.locale=V}getPluralCategory(V,se){switch(yr(se||this.locale)(V)){case je.Zero:return"zero";case je.One:return"one";case je.Two:return"two";case je.Few:return"few";case je.Many:return"many";default:return"other"}}}return F.\u0275fac=function(V){return new(V||F)(_.LFG(_.soG))},F.\u0275prov=_.Yz7({token:F,factory:F.\u0275fac}),F})();function Xi(F,te){te=encodeURIComponent(te);for(const V of F.split(";")){const se=V.indexOf("="),[Ie,ht]=-1==se?[V,""]:[V.slice(0,se),V.slice(se+1)];if(Ie.trim()===te)return decodeURIComponent(ht)}return null}class di{constructor(te,V,se,Ie){this.$implicit=te,this.ngForOf=V,this.index=se,this.count=Ie}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let kr=(()=>{class F{constructor(V,se,Ie){this._viewContainer=V,this._template=se,this._differs=Ie,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(V){this._ngForOf=V,this._ngForOfDirty=!0}set ngForTrackBy(V){this._trackByFn=V}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(V){V&&(this._template=V)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const V=this._ngForOf;!this._differ&&V&&(this._differ=this._differs.find(V).create(this.ngForTrackBy))}if(this._differ){const V=this._differ.diff(this._ngForOf);V&&this._applyChanges(V)}}_applyChanges(V){const se=this._viewContainer;V.forEachOperation((Ie,ht,Mt)=>{if(null==Ie.previousIndex)se.createEmbeddedView(this._template,new di(Ie.item,this._ngForOf,-1,-1),null===Mt?void 0:Mt);else if(null==Mt)se.remove(null===ht?void 0:ht);else if(null!==ht){const on=se.get(ht);se.move(on,Mt),Mi(on,Ie)}});for(let Ie=0,ht=se.length;Ie<ht;Ie++){const on=se.get(Ie).context;on.index=Ie,on.count=ht,on.ngForOf=this._ngForOf}V.forEachIdentityChange(Ie=>{Mi(se.get(Ie.currentIndex),Ie)})}static ngTemplateContextGuard(V,se){return!0}}return F.\u0275fac=function(V){return new(V||F)(_.Y36(_.s_b),_.Y36(_.Rgc),_.Y36(_.ZZ4))},F.\u0275dir=_.lG2({type:F,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),F})();function Mi(F,te){F.context.$implicit=te.item}let Ue=(()=>{class F{constructor(V,se){this._viewContainer=V,this._context=new Qe,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=se}set ngIf(V){this._context.$implicit=this._context.ngIf=V,this._updateView()}set ngIfThen(V){It("ngIfThen",V),this._thenTemplateRef=V,this._thenViewRef=null,this._updateView()}set ngIfElse(V){It("ngIfElse",V),this._elseTemplateRef=V,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(V,se){return!0}}return F.\u0275fac=function(V){return new(V||F)(_.Y36(_.s_b),_.Y36(_.Rgc))},F.\u0275dir=_.lG2({type:F,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),F})();class Qe{constructor(){this.$implicit=null,this.ngIf=null}}function It(F,te){if(te&&!te.createEmbeddedView)throw new Error(`${F} must be a TemplateRef, but received '${(0,_.AaK)(te)}'.`)}let pi=(()=>{class F{}return F.\u0275fac=function(V){return new(V||F)},F.\u0275mod=_.oAB({type:F}),F.\u0275inj=_.cJS({providers:[{provide:Bn,useClass:ri}]}),F})();const zr="browser";function X(F){return"server"===F}let qe=(()=>{class F{}return F.\u0275prov=(0,_.Yz7)({token:F,providedIn:"root",factory:()=>new vt((0,_.LFG)(Ve),window)}),F})();class vt{constructor(te,V){this.document=te,this.window=V,this.offset=()=>[0,0]}setOffset(te){this.offset=Array.isArray(te)?()=>te:te}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(te){this.supportsScrolling()&&this.window.scrollTo(te[0],te[1])}scrollToAnchor(te){if(!this.supportsScrolling())return;const V=function fn(F,te){const V=F.getElementById(te)||F.getElementsByName(te)[0];if(V)return V;if("function"==typeof F.createTreeWalker&&F.body&&(F.body.createShadowRoot||F.body.attachShadow)){const se=F.createTreeWalker(F.body,NodeFilter.SHOW_ELEMENT);let Ie=se.currentNode;for(;Ie;){const ht=Ie.shadowRoot;if(ht){const Mt=ht.getElementById(te)||ht.querySelector(`[name="${te}"]`);if(Mt)return Mt}Ie=se.nextNode()}}return null}(this.document,te);V&&(this.scrollToElement(V),this.attemptFocus(V))}setHistoryScrollRestoration(te){if(this.supportScrollRestoration()){const V=this.window.history;V&&V.scrollRestoration&&(V.scrollRestoration=te)}}scrollToElement(te){const V=te.getBoundingClientRect(),se=V.left+this.window.pageXOffset,Ie=V.top+this.window.pageYOffset,ht=this.offset();this.window.scrollTo(se-ht[0],Ie-ht[1])}attemptFocus(te){return te.focus(),this.document.activeElement===te}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const te=Ft(this.window.history)||Ft(Object.getPrototypeOf(this.window.history));return!(!te||!te.writable&&!te.set)}catch(te){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(te){return!1}}}function Ft(F){return Object.getOwnPropertyDescriptor(F,"scrollRestoration")}class An{}},5e3:(Yt,Je,j)=>{j.d(Je,{deG:()=>$u,tb:()=>A0,AFp:()=>I0,ip1:()=>Uy,CZH:()=>Mm,hGG:()=>ob,z2F:()=>R_,sBO:()=>FC,Sil:()=>By,_Vd:()=>I_,EJc:()=>x0,SBq:()=>T_,qLn:()=>eh,vpe:()=>Hd,tBr:()=>pt,XFs:()=>tn,OlP:()=>ji,zs3:()=>qo,ZZ4:()=>oy,aQg:()=>ay,soG:()=>iy,YKP:()=>Bv,h0i:()=>Am,PXZ:()=>SC,R0b:()=>Vu,FiY:()=>Ut,Lbi:()=>D0,g9A:()=>T0,Qsj:()=>aw,FYo:()=>kv,JOm:()=>iu,q3G:()=>xi,tp0:()=>Sn,Rgc:()=>x_,dDg:()=>P0,q4F:()=>Lv,GfV:()=>Fv,s_b:()=>ey,ifc:()=>Vn,eFA:()=>k0,G48:()=>kC,Gpc:()=>fe,X6Q:()=>OC,_c5:()=>XC,VLi:()=>TC,c2e:()=>S0,zSh:()=>Vp,wAp:()=>Sr,vHH:()=>Ye,EiD:()=>Mc,mCW:()=>Yl,qzn:()=>Zl,JVY:()=>Rl,pB0:()=>Kd,eBb:()=>ad,L6k:()=>So,LAX:()=>Kl,cg1:()=>gy,kL8:()=>sv,yhl:()=>Ac,dqk:()=>Dn,sIi:()=>Kc,CqO:()=>Lh,QGY:()=>Fh,F4k:()=>hg,RDi:()=>xe,AaK:()=>he,z3N:()=>sa,qOj:()=>mc,TTD:()=>Cs,_Bn:()=>Pv,xp6:()=>gd,uIk:()=>Rh,Tol:()=>u,ekj:()=>ip,Suo:()=>n0,Xpm:()=>hn,lG2:()=>ee,Yz7:()=>Dt,cJS:()=>ot,oAB:()=>me,Yjl:()=>ue,Y36:()=>kh,_UZ:()=>Hl,BQk:()=>nd,ynx:()=>hu,qZA:()=>ep,TgZ:()=>Xf,EpF:()=>gm,n5z:()=>Br,LFG:()=>ms,$8M:()=>ei,$Z:()=>ug,NdJ:()=>tp,CRH:()=>r0,oxw:()=>mm,Q6J:()=>cg,s9C:()=>jh,DdM:()=>Wv,iGM:()=>t0,CHM:()=>In,oJD:()=>ud,LSH:()=>cd,Udp:()=>rp,d8E:()=>vo,YNc:()=>Fd,_uU:()=>Es,Oqu:()=>Ma,hij:()=>Ys});var _=j(7579),E=j(727),J=j(8306),ye=j(6451),Te=j(3099);function Le(n){for(let r in n)if(n[r]===Le)return r;throw Error("Could not find renamed property on target object.")}function Ve(n,r){for(const a in r)r.hasOwnProperty(a)&&!n.hasOwnProperty(a)&&(n[a]=r[a])}function he(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(he).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const a=r.indexOf("\n");return-1===a?r:r.substring(0,a)}function Pe(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const ce=Le({__forward_ref__:Le});function fe(n){return n.__forward_ref__=fe,n.toString=function(){return he(this())},n}function ke(n){return yt(n)?n():n}function yt(n){return"function"==typeof n&&n.hasOwnProperty(ce)&&n.__forward_ref__===fe}class Ye extends Error{constructor(r,a){super(function Ct(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,a)),this.code=r}}function Ke(n){return"string"==typeof n?n:null==n?"":String(n)}function $e(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ke(n)}function be(n,r){const a=r?` in ${r}`:"";throw new Ye(-201,`No provider for ${$e(n)} found${a}`)}function St(n,r){null==n&&function Zt(n,r,a,d){throw new Error(`ASSERTION ERROR: ${n}`+(null==d?"":` [Expected=> ${a} ${d} ${r} <=Actual]`))}(r,n,null,"!=")}function Dt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ot(n){return{providers:n.providers||[],imports:n.imports||[]}}function _e(n){return yn(n,Ur)||yn(n,Rt)}function yn(n,r){return n.hasOwnProperty(r)?n[r]:null}function qr(n){return n&&(n.hasOwnProperty(yr)||n.hasOwnProperty(xr))?n[yr]:null}const Ur=Le({\u0275prov:Le}),yr=Le({\u0275inj:Le}),Rt=Le({ngInjectableDef:Le}),xr=Le({ngInjectorDef:Le});var tn=(()=>((tn=tn||{})[tn.Default=0]="Default",tn[tn.Host=1]="Host",tn[tn.Self=2]="Self",tn[tn.SkipSelf=4]="SkipSelf",tn[tn.Optional=8]="Optional",tn))();let ir;function Nn(n){const r=ir;return ir=n,r}function Or(n,r,a){const d=_e(n);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:a&tn.Optional?null:void 0!==r?r:void be(he(n),"Injector")}function jr(n){return{toString:n}.toString()}var Mr=(()=>((Mr=Mr||{})[Mr.OnPush=0]="OnPush",Mr[Mr.Default=1]="Default",Mr))(),Vn=(()=>{return(n=Vn||(Vn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Vn;var n})();const un="undefined"!=typeof globalThis&&globalThis,nn="undefined"!=typeof window&&window,Dr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Dn=un||"undefined"!=typeof global&&global||nn||Dr,ar={},En=[],hr=Le({\u0275cmp:Le}),Gn=Le({\u0275dir:Le}),cr=Le({\u0275pipe:Le}),Ot=Le({\u0275mod:Le}),dt=Le({\u0275fac:Le}),Kt=Le({__NG_ELEMENT_ID__:Le});let cn=0;function hn(n){return jr(()=>{const a={},d={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Mr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||En,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Vn.Emulated,id:"c",styles:n.styles||En,_:null,setInput:null,schemas:n.schemas||null,tView:null},f=n.directives,y=n.features,I=n.pipes;return d.id+=cn++,d.inputs=K(n.inputs,a),d.outputs=K(n.outputs),y&&y.forEach(M=>M(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(Se):null,d.pipeDefs=I?()=>("function"==typeof I?I():I).map(we):null,d})}function Se(n){return De(n)||function Ge(n){return n[Gn]||null}(n)}function we(n){return function Vt(n){return n[cr]||null}(n)}const Fe={};function me(n){return jr(()=>{const r={type:n.type,bootstrap:n.bootstrap||En,declarations:n.declarations||En,imports:n.imports||En,exports:n.exports||En,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Fe[n.id]=n.type),r})}function K(n,r){if(null==n)return ar;const a={};for(const d in n)if(n.hasOwnProperty(d)){let f=n[d],y=f;Array.isArray(f)&&(y=f[1],f=f[0]),a[f]=d,r&&(r[f]=y)}return a}const ee=hn;function ue(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function De(n){return n[hr]||null}function Bt(n,r){const a=n[Ot]||null;if(!a&&!0===r)throw new Error(`Type ${he(n)} does not have '\u0275mod' property.`);return a}function ln(n){return Array.isArray(n)&&"object"==typeof n[1]}function Zn(n){return Array.isArray(n)&&!0===n[1]}function wi(n){return 0!=(8&n.flags)}function Fr(n){return 2==(2&n.flags)}function Ir(n){return 1==(1&n.flags)}function Qr(n){return null!==n.template}function Ss(n){return 0!=(512&n[2])}function us(n,r){return n.hasOwnProperty(dt)?n[dt]:null}class Jr{constructor(r,a,d){this.previousValue=r,this.currentValue=a,this.firstChange=d}isFirstChange(){return this.firstChange}}function Cs(){return fr}function fr(n){return n.type.prototype.ngOnChanges&&(n.setInput=lr),or}function or(){const n=zr(this),r=null==n?void 0:n.current;if(r){const a=n.previous;if(a===ar)n.previous=r;else for(let d in r)a[d]=r[d];n.current=null,this.ngOnChanges(r)}}function lr(n,r,a,d){const f=zr(n)||function Hs(n,r){return n[pi]=r}(n,{previous:ar,current:null}),y=f.current||(f.current={}),I=f.previous,M=this.declaredInputs[a],P=I[M];y[M]=new Jr(P&&P.currentValue,r,I===ar),n[d]=r}Cs.ngInherit=!0;const pi="__ngSimpleChanges__";function zr(n){return n[pi]||null}let pe;function xe(n){pe=n}function qe(){return void 0!==pe?pe:"undefined"!=typeof document?document:void 0}function Ft(n){return!!n.listen}const fn={createRenderer:(n,r)=>qe()};function An(n){for(;Array.isArray(n);)n=n[0];return n}function V(n,r){return An(r[n])}function se(n,r){return An(r[n.index])}function ht(n,r){return n.data[r]}function on(n,r){const a=r[n];return ln(a)?a:a[0]}function Qn(n){return 4==(4&n[2])}function $n(n){return 128==(128&n[2])}function Jn(n,r){return null==r?null:n[r]}function Pr(n){n[18]=0}function Hr(n,r){n[5]+=r;let a=n,d=n[3];for(;null!==d&&(1===r&&1===a[5]||-1===r&&0===a[5]);)d[5]+=r,a=d,d=d[3]}const rn={lFrame:Oa(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function $(){return rn.bindingsEnabled}function q(){return rn.lFrame.lView}function rt(){return rn.lFrame.tView}function In(n){return rn.lFrame.contextLView=n,n[8]}function sr(){let n=Ti();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ti(){return rn.lFrame.currentTNode}function Qi(n,r){const a=rn.lFrame;a.currentTNode=n,a.isParent=r}function Ms(){return rn.lFrame.isParent}function Io(){rn.lFrame.isParent=!1}function Ko(){return rn.isInCheckNoChangesMode}function Yo(n){rn.isInCheckNoChangesMode=n}function cs(){return rn.lFrame.bindingIndex++}function Is(n){const r=rn.lFrame,a=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,a}function Fo(n,r){const a=rn.lFrame;a.bindingIndex=a.bindingRootIndex=n,_i(r)}function _i(n){rn.lFrame.currentDirectiveIndex=n}function Js(n){const r=rn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}function Gl(){return rn.lFrame.currentQueryIndex}function Lo(n){rn.lFrame.currentQueryIndex=n}function Xs(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function pa(n,r,a){if(a&tn.SkipSelf){let f=r,y=n;for(;!(f=f.parent,null!==f||a&tn.Host||(f=Xs(y),null===f||(y=y[15],10&f.type))););if(null===f)return!1;r=f,n=y}const d=rn.lFrame=Na();return d.currentTNode=r,d.lView=n,!0}function Pa(n){const r=Na(),a=n[1];rn.lFrame=r,r.currentTNode=a.firstChild,r.lView=n,r.tView=a,r.contextLView=n,r.bindingIndex=a.bindingStartIndex,r.inI18n=!1}function Na(){const n=rn.lFrame,r=null===n?null:n.child;return null===r?Oa(n):r}function Oa(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Uo(){const n=rn.lFrame;return rn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Rs=Uo;function ga(){const n=Uo();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ns(){return rn.lFrame.selectedIndex}function fo(n){rn.lFrame.selectedIndex=n}function yi(){const n=rn.lFrame;return ht(n.tView,n.selectedIndex)}function _a(n,r){for(let a=r.directiveStart,d=r.directiveEnd;a<d;a++){const y=n.data[a].type.prototype,{ngAfterContentInit:I,ngAfterContentChecked:M,ngAfterViewInit:P,ngAfterViewChecked:Z,ngOnDestroy:ie}=y;I&&(n.contentHooks||(n.contentHooks=[])).push(-a,I),M&&((n.contentHooks||(n.contentHooks=[])).push(a,M),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(a,M)),P&&(n.viewHooks||(n.viewHooks=[])).push(-a,P),Z&&((n.viewHooks||(n.viewHooks=[])).push(a,Z),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(a,Z)),null!=ie&&(n.destroyHooks||(n.destroyHooks=[])).push(a,ie)}}function Bi(n,r,a){Qo(n,r,3,a)}function Ws(n,r,a,d){(3&n[2])===a&&Qo(n,r,a,d)}function Vo(n,r){let a=n[2];(3&a)===r&&(a&=2047,a+=1,n[2]=a)}function Qo(n,r,a,d){const y=null!=d?d:-1,I=r.length-1;let M=0;for(let P=void 0!==d?65535&n[18]:0;P<I;P++)if("number"==typeof r[P+1]){if(M=r[P],null!=d&&M>=d)break}else r[P]<0&&(n[18]+=65536),(M<y||-1==y)&&(Us(n,a,r,P),n[18]=(4294901760&n[18])+P+2),P++}function Us(n,r,a,d){const f=a[d]<0,y=a[d+1],M=n[f?-a[d]:a[d]];if(f){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{y.call(M)}finally{}}}else try{y.call(M)}finally{}}class gr{constructor(r,a,d){this.factory=r,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=d}}function Gi(n,r,a){const d=Ft(n);let f=0;for(;f<a.length;){const y=a[f];if("number"==typeof y){if(0!==y)break;f++;const I=a[f++],M=a[f++],P=a[f++];d?n.setAttribute(r,M,P,I):r.setAttributeNS(I,M,P)}else{const I=y,M=a[++f];ju(I)?d&&n.setProperty(r,I,M):d?n.setAttribute(r,I,M):r.setAttribute(I,M),f++}}return f}function vl(n){return 3===n||4===n||6===n}function ju(n){return 64===n.charCodeAt(0)}function si(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let a=-1;for(let d=0;d<r.length;d++){const f=r[d];"number"==typeof f?a=f:0===a||El(n,a,f,null,-1===a||2===a?r[++d]:null)}}return n}function El(n,r,a,d,f){let y=0,I=n.length;if(-1===r)I=-1;else for(;y<n.length;){const M=n[y++];if("number"==typeof M){if(M===r){I=-1;break}if(M>r){I=y-1;break}}}for(;y<n.length;){const M=n[y];if("number"==typeof M)break;if(M===a){if(null===d)return void(null!==f&&(n[y+1]=f));if(d===n[y+1])return void(n[y+2]=f)}y++,null!==d&&y++,null!==f&&y++}-1!==I&&(n.splice(I,0,r),y=I+1),n.splice(y++,0,a),null!==d&&n.splice(y++,0,d),null!==f&&n.splice(y++,0,f)}function mu(n){return-1!==n}function ya(n){return 32767&n}function Xo(n,r){let a=function tl(n){return n>>16}(n),d=r;for(;a>0;)d=d[15],a--;return d}let Va=!0;function Bo(n){const r=Va;return Va=n,r}let Gs=0;function nr(n,r){const a=Tr(n,r);if(-1!==a)return a;const d=r[1];d.firstCreatePass&&(n.injectorIndex=r.length,$o(d.data,n),$o(r,null),$o(d.blueprint,null));const f=wl(n,r),y=n.injectorIndex;if(mu(f)){const I=ya(f),M=Xo(f,r),P=M[1].data;for(let Z=0;Z<8;Z++)r[y+Z]=M[I+Z]|P[I+Z]}return r[y+8]=f,y}function $o(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Tr(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function wl(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let a=0,d=null,f=r;for(;null!==f;){const y=f[1],I=y.type;if(d=2===I?y.declTNode:1===I?f[6]:null,null===d)return-1;if(a++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|a<<16}return-1}function hi(n,r,a){!function vi(n,r,a){let d;"string"==typeof a?d=a.charCodeAt(0)||0:a.hasOwnProperty(Kt)&&(d=a[Kt]),null==d&&(d=a[Kt]=Gs++);const f=255&d;r.data[n+(f>>5)]|=1<<f}(n,r,a)}function A(n,r,a){if(a&tn.Optional)return n;be(r,"NodeInjector")}function T(n,r,a,d){if(a&tn.Optional&&void 0===d&&(d=null),0==(a&(tn.Self|tn.Host))){const f=n[9],y=Nn(void 0);try{return f?f.get(r,d,a&tn.Optional):Or(r,d,a&tn.Optional)}finally{Nn(y)}}return A(d,r,a)}function k(n,r,a,d=tn.Default,f){if(null!==n){const y=function bn(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Kt)?n[Kt]:void 0;return"number"==typeof r?r>=0?255&r:oe:r}(a);if("function"==typeof y){if(!pa(r,n,d))return d&tn.Host?A(f,a,d):T(r,a,d,f);try{const I=y(d);if(null!=I||d&tn.Optional)return I;be(a)}finally{Rs()}}else if("number"==typeof y){let I=null,M=Tr(n,r),P=-1,Z=d&tn.Host?r[16][6]:null;for((-1===M||d&tn.SkipSelf)&&(P=-1===M?wl(n,r):r[M+8],-1!==P&&Fn(d,!1)?(I=r[1],M=ya(P),r=Xo(P,r)):M=-1);-1!==M;){const ie=r[1];if(rr(y,M,ie.data)){const ge=Ee(M,r,a,I,d,Z);if(ge!==W)return ge}P=r[M+8],-1!==P&&Fn(d,r[1].data[M+8]===Z)&&rr(y,M,r)?(I=ie,M=ya(P),r=Xo(P,r)):M=-1}}}return T(r,a,d,f)}const W={};function oe(){return new Vr(sr(),q())}function Ee(n,r,a,d,f,y){const I=r[1],M=I.data[n+8],ie=Ne(M,I,a,null==d?Fr(M)&&Va:d!=I&&0!=(3&M.type),f&tn.Host&&y===M);return null!==ie?Et(r,I,ie,M):W}function Ne(n,r,a,d,f){const y=n.providerIndexes,I=r.data,M=1048575&y,P=n.directiveStart,ie=y>>20,Be=f?M+ie:n.directiveEnd;for(let at=d?M:M+ie;at<Be;at++){const Nt=I[at];if(at<P&&a===Nt||at>=P&&Nt.type===a)return at}if(f){const at=I[P];if(at&&Qr(at)&&at.type===a)return P}return null}function Et(n,r,a,d){let f=n[a];const y=r.data;if(function eo(n){return n instanceof gr}(f)){const I=f;I.resolving&&function it(n,r){const a=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Ye(-200,`Circular dependency in DI detected for ${n}${a}`)}($e(y[a]));const M=Bo(I.canSeeViewProviders);I.resolving=!0;const P=I.injectImpl?Nn(I.injectImpl):null;pa(n,d,tn.Default);try{f=n[a]=I.factory(void 0,y,n,d),r.firstCreatePass&&a>=d.directiveStart&&function id(n,r,a){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:y}=r.type.prototype;if(d){const I=fr(r);(a.preOrderHooks||(a.preOrderHooks=[])).push(n,I),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(n,I)}f&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-n,f),y&&((a.preOrderHooks||(a.preOrderHooks=[])).push(n,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(n,y))}(a,y[a],r)}finally{null!==P&&Nn(P),Bo(M),I.resolving=!1,Rs()}}return f}function rr(n,r,a){return!!(a[r+(n>>5)]&1<<n)}function Fn(n,r){return!(n&tn.Self||n&tn.Host&&r)}class Vr{constructor(r,a){this._tNode=r,this._lView=a}get(r,a,d){return k(this._tNode,this._lView,r,d,a)}}function Br(n){return jr(()=>{const r=n.prototype.constructor,a=r[dt]||Ts(r),d=Object.prototype;let f=Object.getPrototypeOf(n.prototype).constructor;for(;f&&f!==d;){const y=f[dt]||Ts(f);if(y&&y!==a)return y;f=Object.getPrototypeOf(f)}return y=>new y})}function Ts(n){return yt(n)?()=>{const r=Ts(ke(n));return r&&r()}:us(n)}function ei(n){return function x(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const a=n.attrs;if(a){const d=a.length;let f=0;for(;f<d;){const y=a[f];if(vl(y))break;if(0===y)f+=2;else if("number"==typeof y)for(f++;f<d&&"string"==typeof a[f];)f++;else{if(y===r)return a[f+1];f+=2}}}return null}(sr(),n)}const ds="__parameters__";function zs(n,r,a){return jr(()=>{const d=function to(n){return function(...a){if(n){const d=n(...a);for(const f in d)this[f]=d[f]}}}(r);function f(...y){if(this instanceof f)return d.apply(this,y),this;const I=new f(...y);return M.annotation=I,M;function M(P,Z,ie){const ge=P.hasOwnProperty(ds)?P[ds]:Object.defineProperty(P,ds,{value:[]})[ds];for(;ge.length<=ie;)ge.push(null);return(ge[ie]=ge[ie]||[]).push(I),P}}return a&&(f.prototype=Object.create(a.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}class ji{constructor(r,a){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Dt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const $u=new ji("AnalyzeForEntryComponents");function Do(n,r){void 0===r&&(r=n);for(let a=0;a<n.length;a++){let d=n[a];Array.isArray(d)?(r===n&&(r=n.slice(0,a)),Do(d,r)):r!==n&&r.push(d)}return r}function Di(n,r){n.forEach(a=>Array.isArray(a)?Di(a,r):r(a))}function bc(n,r,a){r>=n.length?n.push(a):n.splice(r,0,a)}function no(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function gs(n,r,a){let d=wa(n,r);return d>=0?n[1|d]=a:(d=~d,function Wd(n,r,a,d){let f=n.length;if(f==r)n.push(a,d);else if(1===f)n.push(d,n[0]),n[0]=a;else{for(f--,n.push(n[f-1],n[f]);f>r;)n[f]=n[f-2],f--;n[r]=a,n[r+1]=d}}(n,d,r,a)),d}function rl(n,r){const a=wa(n,r);if(a>=0)return n[1|a]}function wa(n,r){return function bl(n,r,a){let d=0,f=n.length>>a;for(;f!==d;){const y=d+(f-d>>1),I=n[y<<a];if(r===I)return y<<a;I>r?f=y:d=y+1}return~(f<<a)}(n,r,1)}const Wo={},Wa="__NG_DI_FLAG__",Ga="ngTempTokenPath",il=/\n/gm,qu="__source",Dl=Le({provide:String,useValue:Le});let Ca;function Tc(n){const r=Ca;return Ca=n,r}function qi(n,r=tn.Default){if(void 0===Ca)throw new Ye(203,"");return null===Ca?Or(n,void 0,r):Ca.get(n,r&tn.Optional?null:void 0,r)}function ms(n,r=tn.Default){return(function vn(){return ir}()||qi)(ke(n),r)}function O(n){const r=[];for(let a=0;a<n.length;a++){const d=ke(n[a]);if(Array.isArray(d)){if(0===d.length)throw new Ye(900,"");let f,y=tn.Default;for(let I=0;I<d.length;I++){const M=d[I],P=re(M);"number"==typeof P?-1===P?f=M.token:y|=P:f=M}r.push(ms(f,y))}else r.push(ms(d))}return r}function B(n,r){return n[Wa]=r,n.prototype[Wa]=r,n}function re(n){return n[Wa]}const pt=B(zs("Inject",n=>({token:n})),-1),Ut=B(zs("Optional"),8),Sn=B(zs("SkipSelf"),4);let al,Go;function ul(n){var r;return(null===(r=function ll(){if(void 0===al&&(al=null,Dn.trustedTypes))try{al=Dn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return al}())||void 0===r?void 0:r.createHTML(n))||n}function Yu(n){var r;return(null===(r=function Ku(){if(void 0===Go&&(Go=null,Dn.trustedTypes))try{Go=Dn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Go}())||void 0===r?void 0:r.createHTML(n))||n}class cl{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class qh extends cl{getTypeName(){return"HTML"}}class od extends cl{getTypeName(){return"Style"}}class Zd extends cl{getTypeName(){return"Script"}}class Zh extends cl{getTypeName(){return"URL"}}class Qu extends cl{getTypeName(){return"ResourceURL"}}function sa(n){return n instanceof cl?n.changingThisBreaksApplicationSecurity:n}function Zl(n,r){const a=Ac(n);if(null!=a&&a!==r){if("ResourceURL"===a&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===r}function Ac(n){return n instanceof cl&&n.getTypeName()||null}function Rl(n){return new qh(n)}function So(n){return new od(n)}function ad(n){return new Zd(n)}function Kl(n){return new Zh(n)}function Kd(n){return new Qu(n)}class Ju{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const a=(new window.DOMParser).parseFromString(ul(r),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(r):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class Kh{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const d=this.inertDocument.createElement("body");a.appendChild(d)}}getInertBodyElement(r){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=ul(r),a;const d=this.inertDocument.createElement("body");return d.innerHTML=ul(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(r){const a=r.attributes;for(let f=a.length-1;0<f;f--){const I=a.item(f).name;("xmlns:ns1"===I||0===I.indexOf("ns1:"))&&r.removeAttribute(I)}let d=r.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const Yd=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,is=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Yl(n){return(n=String(n)).match(Yd)||n.match(is)?n:"unsafe:"+n}function zo(n){const r={};for(const a of n.split(","))r[a]=!0;return r}function Ql(...n){const r={};for(const a of n)for(const d in a)a.hasOwnProperty(d)&&(r[d]=!0);return r}const Xu=zo("area,br,col,hr,img,wbr"),ec=zo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ba=zo("rp,rt"),tc=Ql(Xu,Ql(ec,zo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ql(ba,zo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ql(ba,ec)),Xl=zo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),hl=zo("srcset"),_s=Ql(Xl,hl,zo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),zo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ui=zo("script,style,template");class Sc{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let a=r.firstChild,d=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?d=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,d&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let f=this.checkClobberedElement(a,a.nextSibling);if(f){a=f;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(r){const a=r.nodeName.toLowerCase();if(!tc.hasOwnProperty(a))return this.sanitizedSomething=!0,!ui.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const d=r.attributes;for(let f=0;f<d.length;f++){const y=d.item(f),I=y.name,M=I.toLowerCase();if(!_s.hasOwnProperty(M)){this.sanitizedSomething=!0;continue}let P=y.value;Xl[M]&&(P=Yl(P)),hl[M]&&(n=P,P=(n=String(n)).split(",").map(r=>Yl(r.trim())).join(", ")),this.buf.push(" ",I,'="',xc(P),'"')}var n;return this.buf.push(">"),!0}endElement(r){const a=r.nodeName.toLowerCase();tc.hasOwnProperty(a)&&!Xu.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(r){this.buf.push(xc(r))}checkClobberedElement(r,a){if(a&&(r.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return a}}const ld=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ps=/([^\#-~ |!])/g;function xc(n){return n.replace(/&/g,"&amp;").replace(ld,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(Ps,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let io;function Mc(n,r){let a=null;try{io=io||function dl(n){const r=new Kh(n);return function Pl(){try{return!!(new window.DOMParser).parseFromString(ul(""),"text/html")}catch(n){return!1}}()?new Ju(r):r}(n);let d=r?String(r):"";a=io.getInertBodyElement(d);let f=5,y=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=y,y=a.innerHTML,a=io.getInertBodyElement(d)}while(d!==y);return ul((new Sc).sanitizeChildren(eu(a)||a))}finally{if(a){const d=eu(a)||a;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function eu(n){return"content"in n&&function Qh(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var xi=(()=>((xi=xi||{})[xi.NONE=0]="NONE",xi[xi.HTML=1]="HTML",xi[xi.STYLE=2]="STYLE",xi[xi.SCRIPT=3]="SCRIPT",xi[xi.URL=4]="URL",xi[xi.RESOURCE_URL=5]="RESOURCE_URL",xi))();function ud(n){const r=ne();return r?Yu(r.sanitize(xi.HTML,n)||""):Zl(n,"HTML")?Yu(sa(n)):Mc(qe(),Ke(n))}function cd(n){const r=ne();return r?r.sanitize(xi.URL,n)||"":Zl(n,"URL")?sa(n):Yl(Ke(n))}function ne(){const n=q();return n&&n[12]}const en="__ngContext__";function Rn(n,r){n[en]=r}function Oi(n){const r=function ci(n){return n[en]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function nu(n){return n.ngOriginalError}function Rm(n,...r){n.error(...r)}class eh{constructor(){this._console=console}handleError(r){const a=this._findOriginalError(r),d=function hd(n){return n&&n.ngErrorLogger||Rm}(r);d(this._console,"ERROR",r),a&&d(this._console,"ORIGINAL ERROR",a)}_findOriginalError(r){let a=r&&nu(r);for(;a&&nu(a);)a=nu(a);return a||null}}const xo=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Dn))();function ru(n){return n instanceof Function?n():n}var iu=(()=>((iu=iu||{})[iu.Important=1]="Important",iu[iu.DashCase=2]="DashCase",iu))();function up(n,r){return undefined(n,r)}function Tu(n){const r=n[3];return Zn(r)?r[3]:r}function Dg(n){return Om(n[13])}function Ag(n){return Om(n[4])}function Om(n){for(;null!==n&&!Zn(n);)n=n[4];return n}function oh(n,r,a,d,f){if(null!=d){let y,I=!1;Zn(d)?y=d:ln(d)&&(I=!0,d=d[0]);const M=An(d);0===n&&null!==a?null==f?sf(r,a,M):ic(r,a,M,f||null,!0):1===n&&null!==a?ic(r,a,M,f||null,!0):2===n?function dh(n,r,a){const d=Du(n,r);d&&function fd(n,r,a,d){Ft(n)?n.removeChild(r,a,d):r.removeChild(a)}(n,d,r,a)}(r,M,I):3===n&&r.destroyNode(M),null!=y&&function O_(n,r,a,d,f){const y=a[7];y!==An(a)&&oh(r,n,d,y,f);for(let M=10;M<a.length;M++){const P=a[M];hh(P[1],P,n,r,d,y)}}(r,n,y,a,f)}}function Sg(n,r,a){return Ft(n)?n.createElement(r,a):null===a?n.createElement(r):n.createElementNS(a,r)}function tf(n,r){const a=n[9],d=a.indexOf(r),f=r[3];1024&r[2]&&(r[2]&=-1025,Hr(f,-1)),a.splice(d,1)}function so(n,r){if(n.length<=10)return;const a=10+r,d=n[a];if(d){const f=d[17];null!==f&&f!==n&&tf(f,d),r>0&&(n[a-1][4]=d[4]);const y=no(n,10+r);!function xg(n,r){hh(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(d[1],d);const I=y[19];null!==I&&I.detachView(y[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function nf(n,r){if(!(256&r[2])){const a=r[11];Ft(a)&&a.destroyNode&&hh(n,r,a,3,null,null),function Vm(n){let r=n[13];if(!r)return rf(n[1],n);for(;r;){let a=null;if(ln(r))a=r[13];else{const d=r[10];d&&(a=d)}if(!a){for(;r&&!r[4]&&r!==n;)ln(r)&&rf(r[1],r),r=r[3];null===r&&(r=n),ln(r)&&rf(r[1],r),a=r&&r[4]}r=a}}(r)}}function rf(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function kc(n,r){let a;if(null!=n&&null!=(a=n.destroyHooks))for(let d=0;d<a.length;d+=2){const f=r[a[d]];if(!(f instanceof gr)){const y=a[d+1];if(Array.isArray(y))for(let I=0;I<y.length;I+=2){const M=f[y[I]],P=y[I+1];try{P.call(M)}finally{}}else try{y.call(f)}finally{}}}}(n,r),function cp(n,r){const a=n.cleanup,d=r[7];let f=-1;if(null!==a)for(let y=0;y<a.length-1;y+=2)if("string"==typeof a[y]){const I=a[y+1],M="function"==typeof I?I(r):An(r[I]),P=d[f=a[y+2]],Z=a[y+3];"boolean"==typeof Z?M.removeEventListener(a[y],P,Z):Z>=0?d[f=Z]():d[f=-Z].unsubscribe(),y+=2}else{const I=d[f=a[y+1]];a[y].call(I)}if(null!==d){for(let y=f+1;y<d.length;y++)d[y]();r[7]=null}}(n,r),1===r[1].type&&Ft(r[11])&&r[11].destroy();const a=r[17];if(null!==a&&Zn(r[3])){a!==r[3]&&tf(a,r);const d=r[19];null!==d&&d.detachView(n)}}}function dp(n,r,a){return function Bm(n,r,a){let d=r;for(;null!==d&&40&d.type;)d=(r=d).parent;if(null===d)return a[0];if(2&d.flags){const f=n.data[d.directiveStart].encapsulation;if(f===Vn.None||f===Vn.Emulated)return null}return se(d,a)}(n,r.parent,a)}function ic(n,r,a,d,f){Ft(n)?n.insertBefore(r,a,d,f):r.insertBefore(a,d,f)}function sf(n,r,a){Ft(n)?n.appendChild(r,a):r.appendChild(a)}function sc(n,r,a,d,f){null!==d?ic(n,r,a,d,f):sf(n,r,a)}function Du(n,r){return Ft(n)?n.parentNode(r):r.parentNode}let af=function uh(n,r,a){return 40&n.type?se(n,a):null};function uf(n,r,a,d){const f=dp(n,d,r),y=r[11],M=function lh(n,r,a){return af(n,r,a)}(d.parent||r[6],d,r);if(null!=f)if(Array.isArray(a))for(let P=0;P<a.length;P++)sc(y,f,a[P],M,!1);else sc(y,f,a,M,!1)}function ch(n,r){if(null!==r){const a=r.type;if(3&a)return se(r,n);if(4&a)return Fc(-1,n[r.index]);if(8&a){const d=r.child;if(null!==d)return ch(n,d);{const f=n[r.index];return Zn(f)?Fc(-1,f):An(f)}}if(32&a)return up(r,n)()||An(n[r.index]);{const d=fp(n,r);return null!==d?Array.isArray(d)?d[0]:ch(Tu(n[16]),d):ch(n,r.next)}}return null}function fp(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Fc(n,r){const a=10+n+1;if(a<r.length){const d=r[a],f=d[1].firstChild;if(null!==f)return ch(d,f)}return r[7]}function oc(n,r,a,d,f,y,I){for(;null!=a;){const M=d[a.index],P=a.type;if(I&&0===r&&(M&&Rn(An(M),d),a.flags|=4),64!=(64&a.flags))if(8&P)oc(n,r,a.child,d,f,y,!1),oh(r,n,f,M,y);else if(32&P){const Z=up(a,d);let ie;for(;ie=Z();)oh(r,n,f,ie,y);oh(r,n,f,M,y)}else 16&P?jm(n,r,d,a,f,y):oh(r,n,f,M,y);a=I?a.projectionNext:a.next}}function hh(n,r,a,d,f,y){oc(a,d,n.firstChild,r,f,y,!1)}function jm(n,r,a,d,f,y){const I=a[16],P=I[6].projection[d.projection];if(Array.isArray(P))for(let Z=0;Z<P.length;Z++)oh(r,n,f,P[Z],y);else oc(n,r,P,I[3],f,y,!0)}function pd(n,r,a){Ft(n)?n.setAttribute(r,"style",a):r.style.cssText=a}function Au(n,r,a){Ft(n)?""===a?n.removeAttribute(r,"class"):n.setAttribute(r,"class",a):r.className=a}function Lc(n,r,a){let d=n.length;for(;;){const f=n.indexOf(r,a);if(-1===f)return f;if(0===f||n.charCodeAt(f-1)<=32){const y=r.length;if(f+y===d||n.charCodeAt(f+y)<=32)return f}a=f+1}}const Pg="ng-template";function L_(n,r,a){let d=0;for(;d<n.length;){let f=n[d++];if(a&&"class"===f){if(f=n[d],-1!==Lc(f.toLowerCase(),r,0))return!0}else if(1===f){for(;d<n.length&&"string"==typeof(f=n[d++]);)if(f.toLowerCase()===r)return!0;return!1}}return!1}function pp(n){return 4===n.type&&n.value!==Pg}function gp(n,r,a){return r===(4!==n.type||a?n.value:Pg)}function mp(n,r,a){let d=4;const f=n.attrs||[],y=function Ng(n){for(let r=0;r<n.length;r++)if(vl(n[r]))return r;return n.length}(f);let I=!1;for(let M=0;M<r.length;M++){const P=r[M];if("number"!=typeof P){if(!I)if(4&d){if(d=2|1&d,""!==P&&!gp(n,P,a)||""===P&&1===r.length){if(Ya(d))return!1;I=!0}}else{const Z=8&d?P:r[++M];if(8&d&&null!==n.attrs){if(!L_(n.attrs,Z,a)){if(Ya(d))return!1;I=!0}continue}const ge=fh(8&d?"class":P,f,pp(n),a);if(-1===ge){if(Ya(d))return!1;I=!0;continue}if(""!==Z){let Be;Be=ge>y?"":f[ge+1].toLowerCase();const at=8&d?Be:null;if(at&&-1!==Lc(at,Z,0)||2&d&&Z!==Be){if(Ya(d))return!1;I=!0}}}}else{if(!I&&!Ya(d)&&!Ya(P))return!1;if(I&&Ya(P))continue;I=!1,d=P|1&d}}return Ya(d)||I}function Ya(n){return 0==(1&n)}function fh(n,r,a,d){if(null===r)return-1;let f=0;if(d||!a){let y=!1;for(;f<r.length;){const I=r[f];if(I===n)return f;if(3===I||6===I)y=!0;else{if(1===I||2===I){let M=r[++f];for(;"string"==typeof M;)M=r[++f];continue}if(4===I)break;if(0===I){f+=4;continue}}f+=y?1:2}return-1}return function Og(n,r){let a=n.indexOf(4);if(a>-1)for(a++;a<n.length;){const d=n[a];if("number"==typeof d)return-1;if(d===r)return a;a++}return-1}(r,n)}function cf(n,r,a=!1){for(let d=0;d<r.length;d++)if(mp(n,r[d],a))return!0;return!1}function _p(n,r){return n?":not("+r.trim()+")":r}function df(n){let r=n[0],a=1,d=2,f="",y=!1;for(;a<n.length;){let I=n[a];if("string"==typeof I)if(2&d){const M=n[++a];f+="["+I+(M.length>0?'="'+M+'"':"")+"]"}else 8&d?f+="."+I:4&d&&(f+=" "+I);else""!==f&&!Ya(I)&&(r+=_p(y,f),f=""),d=I,y=y||!Ya(d);a++}return""!==f&&(r+=_p(y,f)),r}const Cr={};function gd(n){kg(rt(),q(),ns()+n,Ko())}function kg(n,r,a,d){if(!d)if(3==(3&r[2])){const y=n.preOrderCheckHooks;null!==y&&Bi(r,y,a)}else{const y=n.preOrderHooks;null!==y&&Ws(r,y,0,a)}fo(a)}function yp(n,r){return n<<17|r<<2}function aa(n){return n>>17&32767}function vp(n){return 2|n}function ac(n){return(131068&n)>>2}function Lg(n,r){return-131069&n|r<<2}function Ug(n){return 1|n}function jc(n,r){const a=n.contentQueries;if(null!==a)for(let d=0;d<a.length;d+=2){const f=a[d],y=a[d+1];if(-1!==y){const I=n.data[y];Lo(f),I.contentQueries(2,r[y],y)}}}function yd(n,r,a,d,f,y,I,M,P,Z){const ie=r.blueprint.slice();return ie[0]=f,ie[2]=140|d,Pr(ie),ie[3]=ie[15]=n,ie[8]=a,ie[10]=I||n&&n[10],ie[11]=M||n&&n[11],ie[12]=P||n&&n[12]||null,ie[9]=Z||n&&n[9]||null,ie[6]=y,ie[16]=2==r.type?n[16]:ie,ie}function $c(n,r,a,d,f){let y=n.data[r];if(null===y)y=function gf(n,r,a,d,f){const y=Ti(),I=Ms(),P=n.data[r]=function qg(n,r,a,d,f,y){return{type:a,index:d,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?y:y&&y.parent,a,r,d,f);return null===n.firstChild&&(n.firstChild=P),null!==y&&(I?null==y.child&&null!==P.parent&&(y.child=P):null===y.next&&(y.next=P)),P}(n,r,a,d,f),function pr(){return rn.lFrame.inI18n}()&&(y.flags|=64);else if(64&y.type){y.type=a,y.value=d,y.attrs=f;const I=function gi(){const n=rn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();y.injectorIndex=null===I?-1:I.injectorIndex}return Qi(y,!0),y}function Hc(n,r,a,d){if(0===a)return-1;const f=r.length;for(let y=0;y<a;y++)r.push(d),n.blueprint.push(d),n.data.push(null);return f}function Xt(n,r,a){Pa(r);try{const d=n.viewQuery;null!==d&&xf(1,d,a);const f=n.template;null!==f&&vd(n,r,f,1,a),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&jc(n,r),n.staticViewQueries&&xf(2,n.viewQuery,a);const y=n.components;null!==y&&function Gg(n,r){for(let a=0;a<r.length;a++)Dd(n,r[a])}(r,y)}catch(d){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),d}finally{r[2]&=-5,ga()}}function Wc(n,r,a,d){const f=r[2];if(256==(256&f))return;Pa(r);const y=Ko();try{Pr(r),function ha(n){return rn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==a&&vd(n,r,a,2,d);const I=3==(3&f);if(!y)if(I){const Z=n.preOrderCheckHooks;null!==Z&&Bi(r,Z,null)}else{const Z=n.preOrderHooks;null!==Z&&Ws(r,Z,0,null),Vo(r,0)}if(function bf(n){for(let r=Dg(n);null!==r;r=Ag(r)){if(!r[2])continue;const a=r[9];for(let d=0;d<a.length;d++){const f=a[d],y=f[3];0==(1024&f[2])&&Hr(y,1),f[2]|=1024}}}(r),function Cf(n){for(let r=Dg(n);null!==r;r=Ag(r))for(let a=10;a<r.length;a++){const d=r[a],f=d[1];$n(d)&&Wc(f,d,f.template,d[8])}}(r),null!==n.contentQueries&&jc(n,r),!y)if(I){const Z=n.contentCheckHooks;null!==Z&&Bi(r,Z)}else{const Z=n.contentHooks;null!==Z&&Ws(r,Z,1),Vo(r,1)}!function Qa(n,r){const a=n.hostBindingOpCodes;if(null!==a)try{for(let d=0;d<a.length;d++){const f=a[d];if(f<0)fo(~f);else{const y=f,I=a[++d],M=a[++d];Fo(I,y),M(2,r[y])}}}finally{fo(-1)}}(n,r);const M=n.components;null!==M&&function Wg(n,r){for(let a=0;a<r.length;a++)If(n,r[a])}(r,M);const P=n.viewQuery;if(null!==P&&xf(2,P,d),!y)if(I){const Z=n.viewCheckHooks;null!==Z&&Bi(r,Z)}else{const Z=n.viewHooks;null!==Z&&Ws(r,Z,2),Vo(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),y||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,Hr(r[3],-1))}finally{ga()}}function zg(n,r,a,d){const f=r[10],y=!Ko(),I=Qn(r);try{y&&!I&&f.begin&&f.begin(),I&&Xt(n,r,d),Wc(n,r,a,d)}finally{y&&!I&&f.end&&f.end()}}function vd(n,r,a,d,f){const y=ns(),I=2&d;try{fo(-1),I&&r.length>20&&kg(n,r,20,Ko()),a(d,f)}finally{fo(y)}}function Ed(n,r,a){if(wi(r)){const f=r.directiveEnd;for(let y=r.directiveStart;y<f;y++){const I=n.data[y];I.contentQueries&&I.contentQueries(1,a[y],y)}}}function dc(n,r,a){!$()||(function Mp(n,r,a,d){const f=a.directiveStart,y=a.directiveEnd;n.firstCreatePass||nr(a,r),Rn(d,r);const I=a.initialInputs;for(let M=f;M<y;M++){const P=n.data[M],Z=Qr(P);Z&&pl(r,a,P);const ie=Et(r,n,M,a);Rn(ie,r),null!==I&&gh(0,M-f,ie,P,0,I),Z&&(on(a.index,r)[8]=ie)}}(n,r,a,se(a,r)),128==(128&a.flags)&&function Id(n,r,a){const d=a.directiveStart,f=a.directiveEnd,I=a.index,M=function fa(){return rn.lFrame.currentDirectiveIndex}();try{fo(I);for(let P=d;P<f;P++){const Z=n.data[P],ie=r[P];_i(P),(null!==Z.hostBindings||0!==Z.hostVars||null!==Z.hostAttrs)&&Ef(Z,ie)}}finally{fo(-1),_i(M)}}(n,r,a))}function ou(n,r,a=se){const d=r.localNames;if(null!==d){let f=r.index+1;for(let y=0;y<d.length;y+=2){const I=d[y+1],M=-1===I?a(r,n):n[I];n[f++]=M}}}function wd(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Cd(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Cd(n,r,a,d,f,y,I,M,P,Z){const ie=20+d,ge=ie+f,Be=function Dp(n,r){const a=[];for(let d=0;d<r;d++)a.push(d<n?null:Cr);return a}(ie,ge),at="function"==typeof Z?Z():Z;return Be[1]={type:n,blueprint:Be,template:a,queries:null,viewQuery:M,declTNode:r,data:Be.slice().fill(null,ie),bindingStartIndex:ie,expandoStartIndex:ge,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:P,consts:at,incompleteFirstPass:!1}}function xp(n,r,a,d){const f=yh(r);null===a?f.push(d):(f.push(a),n.firstCreatePass&&Up(n).push(d,f.length-1))}function hc(n,r,a){for(let d in n)if(n.hasOwnProperty(d)){const f=n[d];(a=null===a?{}:a).hasOwnProperty(d)?a[d].push(r,f):a[d]=[r,f]}return a}function yo(n,r,a,d,f,y,I,M){const P=se(r,a);let ie,Z=r.inputs;!M&&null!=Z&&(ie=Z[d])?(Pf(n,a,ie,d,f),Fr(r)&&function _f(n,r){const a=on(r,n);16&a[2]||(a[2]|=64)}(a,r.index)):3&r.type&&(d=function _o(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(d),f=null!=I?I(f,r.value||"",d):f,Ft(y)?y.setProperty(P,d,f):ju(d)||(P.setProperty?P.setProperty(d,f):P[d]=f))}function Su(n,r,a,d){let f=!1;if($()){const y=function Bl(n,r,a){const d=n.directiveRegistry;let f=null;if(d)for(let y=0;y<d.length;y++){const I=d[y];cf(a,I.selectors,!1)&&(f||(f=[]),hi(nr(a,r),n,I.type),Qr(I)?(Gc(n,a),f.unshift(I)):f.push(I))}return f}(n,r,a),I=null===d?null:{"":-1};if(null!==y){f=!0,wf(a,n.data.length,y.length);for(let ie=0;ie<y.length;ie++){const ge=y[ie];ge.providersResolver&&ge.providersResolver(ge)}let M=!1,P=!1,Z=Hc(n,r,y.length,null);for(let ie=0;ie<y.length;ie++){const ge=y[ie];a.mergedAttrs=si(a.mergedAttrs,ge.hostAttrs),Td(n,a,r,Z,ge),Pp(Z,ge,I),null!==ge.contentQueries&&(a.flags|=8),(null!==ge.hostBindings||null!==ge.hostAttrs||0!==ge.hostVars)&&(a.flags|=128);const Be=ge.type.prototype;!M&&(Be.ngOnChanges||Be.ngOnInit||Be.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(a.index),M=!0),!P&&(Be.ngOnChanges||Be.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(a.index),P=!0),Z++}!function Ja(n,r){const d=r.directiveEnd,f=n.data,y=r.attrs,I=[];let M=null,P=null;for(let Z=r.directiveStart;Z<d;Z++){const ie=f[Z],ge=ie.inputs,Be=null===y||pp(r)?null:e_(ge,y);I.push(Be),M=hc(ge,Z,M),P=hc(ie.outputs,Z,P)}null!==M&&(M.hasOwnProperty("class")&&(r.flags|=16),M.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=I,r.inputs=M,r.outputs=P}(n,a)}I&&function Rp(n,r,a){if(r){const d=n.localNames=[];for(let f=0;f<r.length;f+=2){const y=a[r[f+1]];if(null==y)throw new Ye(-301,`Export of name '${r[f+1]}' not found!`);d.push(r[f],y)}}}(a,d,I)}return a.mergedAttrs=si(a.mergedAttrs,a.attrs),f}function vf(n,r,a,d,f,y){const I=y.hostBindings;if(I){let M=n.hostBindingOpCodes;null===M&&(M=n.hostBindingOpCodes=[]);const P=~r.index;(function Vl(n){let r=n.length;for(;r>0;){const a=n[--r];if("number"==typeof a&&a<0)return a}return 0})(M)!=P&&M.push(P),M.push(d,f,I)}}function Ef(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Gc(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function Pp(n,r,a){if(a){if(r.exportAs)for(let d=0;d<r.exportAs.length;d++)a[r.exportAs[d]]=n;Qr(r)&&(a[""]=n)}}function wf(n,r,a){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+a,n.providerIndexes=r}function Td(n,r,a,d,f){n.data[d]=f;const y=f.factory||(f.factory=us(f.type)),I=new gr(y,Qr(f),null);n.blueprint[d]=I,a[d]=I,vf(n,r,0,d,Hc(n,a,f.hostVars,Cr),f)}function pl(n,r,a){const d=se(r,n),f=wd(a),y=n[10],I=_h(n,yd(n,f,null,a.onPush?64:16,d,r,y,y.createRenderer(d,a),null,null));n[r.index]=I}function gl(n,r,a,d,f,y){const I=se(n,r);!function Np(n,r,a,d,f,y,I){if(null==y)Ft(n)?n.removeAttribute(r,f,a):r.removeAttribute(f);else{const M=null==I?Ke(y):I(y,d||"",f);Ft(n)?n.setAttribute(r,f,M,a):a?r.setAttributeNS(a,f,M):r.setAttribute(f,M)}}(r[11],I,y,n.value,a,d,f)}function gh(n,r,a,d,f,y){const I=y[r];if(null!==I){const M=d.setInput;for(let P=0;P<I.length;){const Z=I[P++],ie=I[P++],ge=I[P++];null!==M?d.setInput(a,ge,Z,ie):a[ie]=ge}}}function e_(n,r){let a=null,d=0;for(;d<r.length;){const f=r[d];if(0!==f)if(5!==f){if("number"==typeof f)break;n.hasOwnProperty(f)&&(null===a&&(a=[]),a.push(f,n[f],r[d+1])),d+=2}else d+=2;else d+=4}return a}function kp(n,r,a,d){return new Array(n,!0,!1,r,null,0,d,a,null,null)}function If(n,r){const a=on(r,n);if($n(a)){const d=a[1];80&a[2]?Wc(d,a,d.template,a[8]):a[5]>0&&mh(a)}}function mh(n){for(let d=Dg(n);null!==d;d=Ag(d))for(let f=10;f<d.length;f++){const y=d[f];if(1024&y[2]){const I=y[1];Wc(I,y,I.template,y[8])}else y[5]>0&&mh(y)}const a=n[1].components;if(null!==a)for(let d=0;d<a.length;d++){const f=on(a[d],n);$n(f)&&f[5]>0&&mh(f)}}function Dd(n,r){const a=on(r,n),d=a[1];(function Fp(n,r){for(let a=r.length;a<n.blueprint.length;a++)r.push(n.blueprint[a])})(d,a),Xt(d,a,a[8])}function _h(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Lp(n){for(;n;){n[2]|=64;const r=Tu(n);if(Ss(n)&&!r)return n;n=r}return null}function Df(n,r,a){const d=r[10];d.begin&&d.begin();try{Wc(n,r,n.template,a)}catch(f){throw Rf(r,f),f}finally{d.end&&d.end()}}function os(n){!function Tf(n){for(let r=0;r<n.components.length;r++){const a=n.components[r],d=Oi(a),f=d[1];zg(f,d,f.template,a)}}(n[8])}function xf(n,r,a){Lo(0),r(n,a)}const Qg=(()=>Promise.resolve(null))();function yh(n){return n[7]||(n[7]=[])}function Up(n){return n.cleanup||(n.cleanup=[])}function Rf(n,r){const a=n[9],d=a?a.get(eh,null):null;d&&d.handleError(r)}function Pf(n,r,a,d,f){for(let y=0;y<a.length;){const I=a[y++],M=a[y++],P=r[I],Z=n.data[I];null!==Z.setInput?Z.setInput(P,f,d,M):P[M]=f}}function Da(n,r,a){const d=V(r,n);!function km(n,r,a){Ft(n)?n.setValue(r,a):r.textContent=a}(n[11],d,a)}function jl(n,r,a){let d=a?n.styles:null,f=a?n.classes:null,y=0;if(null!==r)for(let I=0;I<r.length;I++){const M=r[I];"number"==typeof M?y=M:1==y?f=Pe(f,M):2==y&&(d=Pe(d,M+": "+r[++I]+";"))}a?n.styles=d:n.stylesWithoutHost=d,a?n.classes=f:n.classesWithoutHost=f}const Of=new ji("INJECTOR",-1);class zc{get(r,a=Wo){if(a===Wo){const d=new Error(`NullInjectorError: No provider for ${he(r)}!`);throw d.name="NullInjectorError",d}return a}}const Vp=new ji("Set Injector scope."),Eh={},Jg={};let wh;function kf(){return void 0===wh&&(wh=new zc),wh}function Hi(n,r=null,a=null,d){const f=Bp(n,r,a,d);return f._resolveInjectorDefTypes(),f}function Bp(n,r=null,a=null,d){return new jp(n,a,r||kf(),d)}class jp{constructor(r,a,d,f=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const y=[];a&&Di(a,M=>this.processProvider(M,r,a)),Di([r],M=>this.processInjectorType(M,[],y)),this.records.set(Of,pc(void 0,this));const I=this.records.get(Vp);this.scope=null!=I?I.value:null,this.source=f||("object"==typeof r?null:he(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,a=Wo,d=tn.Default){this.assertNotDestroyed();const f=Tc(this),y=Nn(void 0);try{if(!(d&tn.SkipSelf)){let M=this.records.get(r);if(void 0===M){const P=function Xg(n){return"function"==typeof n||"object"==typeof n&&n instanceof ji}(r)&&_e(r);M=P&&this.injectableDefInScope(P)?pc(ml(r),Eh):null,this.records.set(r,M)}if(null!=M)return this.hydrate(r,M)}return(d&tn.Self?kf():this.parent).get(r,a=d&tn.Optional&&a===Wo?null:a)}catch(I){if("NullInjectorError"===I.name){if((I[Ga]=I[Ga]||[]).unshift(he(r)),f)throw I;return function ve(n,r,a,d){const f=n[Ga];throw r[qu]&&f.unshift(r[qu]),n.message=function Ze(n,r,a,d=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let f=he(r);if(Array.isArray(r))f=r.map(he).join(" -> ");else if("object"==typeof r){let y=[];for(let I in r)if(r.hasOwnProperty(I)){let M=r[I];y.push(I+":"+("string"==typeof M?JSON.stringify(M):he(M)))}f=`{${y.join(", ")}}`}return`${a}${d?"("+d+")":""}[${f}]: ${n.replace(il,"\n  ")}`}("\n"+n.message,f,a,d),n.ngTokenPath=f,n[Ga]=null,n}(I,r,"R3InjectorError",this.source)}throw I}finally{Nn(y),Tc(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((d,f)=>r.push(he(f))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ye(205,"")}processInjectorType(r,a,d){if(!(r=ke(r)))return!1;let f=qr(r);const y=null==f&&r.ngModule||void 0,I=void 0===y?r:y,M=-1!==d.indexOf(I);if(void 0!==y&&(f=qr(y)),null==f)return!1;if(null!=f.imports&&!M){let ie;d.push(I);try{Di(f.imports,ge=>{this.processInjectorType(ge,a,d)&&(void 0===ie&&(ie=[]),ie.push(ge))})}finally{}if(void 0!==ie)for(let ge=0;ge<ie.length;ge++){const{ngModule:Be,providers:at}=ie[ge];Di(at,Nt=>this.processProvider(Nt,Be,at||En))}}this.injectorDefTypes.add(I);const P=us(I)||(()=>new I);this.records.set(I,pc(P,Eh));const Z=f.providers;if(null!=Z&&!M){const ie=r;Di(Z,ge=>this.processProvider(ge,ie,Z))}return void 0!==y&&void 0!==r.providers}processProvider(r,a,d){let f=gc(r=ke(r))?r:ke(r&&r.provide);const y=function $p(n,r,a){return la(n)?pc(void 0,n.useValue):pc(Ch(n),Eh)}(r);if(gc(r)||!0!==r.multi)this.records.get(f);else{let I=this.records.get(f);I||(I=pc(void 0,Eh,!0),I.factory=()=>O(I.multi),this.records.set(f,I)),f=r,I.multi.push(r)}this.records.set(f,y)}hydrate(r,a){return a.value===Eh&&(a.value=Jg,a.value=a.factory()),"object"==typeof a.value&&a.value&&function qc(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(r){if(!r.providedIn)return!1;const a=ke(r.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function ml(n){const r=_e(n),a=null!==r?r.factory:us(n);if(null!==a)return a;if(n instanceof ji)throw new Ye(204,"");if(n instanceof Function)return function Ff(n){const r=n.length;if(r>0)throw function $i(n,r){const a=[];for(let d=0;d<n;d++)a.push(r);return a}(r,"?"),new Ye(204,"");const a=function Wn(n){const r=n&&(n[Ur]||n[Rt]);if(r){const a=function jn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),r}return null}(n);return null!==a?()=>a.factory(n):()=>new n}(n);throw new Ye(204,"")}function Ch(n,r,a){let d;if(gc(n)){const f=ke(n);return us(f)||ml(f)}if(la(n))d=()=>ke(n.useValue);else if(function Lf(n){return!(!n||!n.useFactory)}(n))d=()=>n.useFactory(...O(n.deps||[]));else if(function Hp(n){return!(!n||!n.useExisting)}(n))d=()=>ms(ke(n.useExisting));else{const f=ke(n&&(n.useClass||n.provide));if(!function t_(n){return!!n.deps}(n))return us(f)||ml(f);d=()=>new f(...O(n.deps))}return d}function pc(n,r,a=!1){return{factory:n,value:r,multi:a?[]:void 0}}function la(n){return null!==n&&"object"==typeof n&&Dl in n}function gc(n){return"function"==typeof n}let qo=(()=>{class n{static create(a,d){var f;if(Array.isArray(a))return Hi({name:""},d,a,"");{const y=null!==(f=a.name)&&void 0!==f?f:"";return Hi({name:y},a.parent,a.providers,y)}}}return n.THROW_IF_NOT_FOUND=Wo,n.NULL=new zc,n.\u0275prov=Dt({token:n,providedIn:"any",factory:()=>ms(Of)}),n.__NG_ELEMENT_ID__=-1,n})();function zp(n,r){_a(Oi(n)[1],sr())}function mc(n){let r=function qp(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),a=!0;const d=[n];for(;r;){let f;if(Qr(n))f=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Ye(903,"");f=r.\u0275dir}if(f){if(a){d.push(f);const I=n;I.inputs=Sh(n.inputs),I.declaredInputs=Sh(n.declaredInputs),I.outputs=Sh(n.outputs);const M=f.hostBindings;M&&sm(n,M);const P=f.viewQuery,Z=f.contentQueries;if(P&&Zp(n,P),Z&&Kp(n,Z),Ve(n.inputs,f.inputs),Ve(n.declaredInputs,f.declaredInputs),Ve(n.outputs,f.outputs),Qr(f)&&f.data.animation){const ie=n.data;ie.animation=(ie.animation||[]).concat(f.data.animation)}}const y=f.features;if(y)for(let I=0;I<y.length;I++){const M=y[I];M&&M.ngInherit&&M(n),M===mc&&(a=!1)}}r=Object.getPrototypeOf(r)}!function Hf(n){let r=0,a=null;for(let d=n.length-1;d>=0;d--){const f=n[d];f.hostVars=r+=f.hostVars,f.hostAttrs=si(f.hostAttrs,a=si(a,f.hostAttrs))}}(d)}function Sh(n){return n===ar?{}:n===En?[]:n}function Zp(n,r){const a=n.viewQuery;n.viewQuery=a?(d,f)=>{r(d,f),a(d,f)}:r}function Kp(n,r){const a=n.contentQueries;n.contentQueries=a?(d,f,y)=>{r(d,f,y),a(d,f,y)}:r}function sm(n,r){const a=n.hostBindings;n.hostBindings=a?(d,f)=>{r(d,f),a(d,f)}:r}let _c=null;function Pd(){if(!_c){const n=Dn.Symbol;if(n&&n.iterator)_c=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<r.length;++a){const d=r[a];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(_c=d)}}}return _c}function Kc(n){return!!Od(n)&&(Array.isArray(n)||!(n instanceof Map)&&Pd()in n)}function Od(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ao(n,r,a){return!Object.is(n[r],a)&&(n[r]=a,!0)}function Rh(n,r,a,d){const f=q();return ao(f,cs(),r)&&(rt(),gl(yi(),f,n,r,a,d)),Rh}function Qc(n,r,a,d){return ao(n,cs(),a)?r+Ke(a)+d:Cr}function Fd(n,r,a,d,f,y,I,M){const P=q(),Z=rt(),ie=n+20,ge=Z.firstCreatePass?function am(n,r,a,d,f,y,I,M,P){const Z=r.consts,ie=$c(r,n,4,I||null,Jn(Z,M));Su(r,a,ie,Jn(Z,P)),_a(r,ie);const ge=ie.tViews=Cd(2,ie,d,f,y,r.directiveRegistry,r.pipeRegistry,null,r.schemas,Z);return null!==r.queries&&(r.queries.template(r,ie),ge.queries=r.queries.embeddedTView(ie)),ie}(ie,Z,P,r,a,d,f,y,I):Z.data[ie];Qi(ge,!1);const Be=P[11].createComment("");uf(Z,P,Be,ge),Rn(Be,P),_h(P,P[ie]=kp(Be,P,Be,ge)),Ir(ge)&&dc(Z,P,ge),null!=I&&ou(P,ge,M)}function kh(n,r=tn.Default){const a=q();return null===a?ms(n,r):k(sr(),a,ke(n),r)}function ug(){throw new Error("invalid")}function cg(n,r,a){const d=q();return ao(d,cs(),r)&&yo(rt(),yi(),d,n,r,d[11],a,!1),cg}function dg(n,r,a,d,f){const I=f?"class":"style";Pf(n,a,r.inputs[I],I,d)}function Xf(n,r,a,d){const f=q(),y=rt(),I=20+n,M=f[11],P=f[I]=Sg(M,r,function ma(){return rn.lFrame.currentNamespace}()),Z=y.firstCreatePass?function Jf(n,r,a,d,f,y,I){const M=r.consts,Z=$c(r,n,2,f,Jn(M,y));return Su(r,a,Z,Jn(M,I)),null!==Z.attrs&&jl(Z,Z.attrs,!1),null!==Z.mergedAttrs&&jl(Z,Z.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,Z),Z}(I,y,f,0,r,a,d):y.data[I];Qi(Z,!0);const ie=Z.mergedAttrs;null!==ie&&Gi(M,P,ie);const ge=Z.classes;null!==ge&&Au(M,P,ge);const Be=Z.styles;null!==Be&&pd(M,P,Be),64!=(64&Z.flags)&&uf(y,f,P,Z),0===function Xr(){return rn.lFrame.elementDepthCount}()&&Rn(P,f),function li(){rn.lFrame.elementDepthCount++}(),Ir(Z)&&(dc(y,f,Z),Ed(y,Z,f)),null!==d&&ou(f,Z)}function ep(){let n=sr();Ms()?Io():(n=n.parent,Qi(n,!1));const r=n;!function Vi(){rn.lFrame.elementDepthCount--}();const a=rt();a.firstCreatePass&&(_a(a,n),wi(n)&&a.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Ua(n){return 0!=(16&n.flags)}(r)&&dg(a,r,q(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function mn(n){return 0!=(32&n.flags)}(r)&&dg(a,r,q(),r.stylesWithoutHost,!1)}function Hl(n,r,a,d){Xf(n,r,a,d),ep()}function hu(n,r,a){const d=q(),f=rt(),y=n+20,I=f.firstCreatePass?function z_(n,r,a,d,f){const y=r.consts,I=Jn(y,d),M=$c(r,n,8,"ng-container",I);return null!==I&&jl(M,I,!0),Su(r,a,M,Jn(y,f)),null!==r.queries&&r.queries.elementStart(r,M),M}(y,f,d,r,a):f.data[y];Qi(I,!0);const M=d[y]=d[11].createComment("");uf(f,d,M,I),Rn(M,d),Ir(I)&&(dc(f,d,I),Ed(f,I,d)),null!=a&&ou(d,I)}function nd(){let n=sr();const r=rt();Ms()?Io():(n=n.parent,Qi(n,!1)),r.firstCreatePass&&(_a(r,n),wi(n)&&r.queries.elementEnd(n))}function gm(){return q()}function Fh(n){return!!n&&"function"==typeof n.then}function hg(n){return!!n&&"function"==typeof n.subscribe}const Lh=hg;function tp(n,r,a,d){const f=q(),y=rt(),I=sr();return function Ou(n,r,a,d,f,y,I,M){const P=Ir(d),ie=n.firstCreatePass&&Up(n),ge=r[8],Be=yh(r);let at=!0;if(3&d.type||M){const xn=se(d,r),Xn=M?M(xn):xn,qt=Be.length,vr=M?Ii=>M(An(Ii[d.index])):d.index;if(Ft(a)){let Ii=null;if(!M&&P&&(Ii=function Uh(n,r,a,d){const f=n.cleanup;if(null!=f)for(let y=0;y<f.length-1;y+=2){const I=f[y];if(I===a&&f[y+1]===d){const M=r[7],P=f[y+2];return M.length>P?M[P]:null}"string"==typeof I&&(y+=2)}return null}(n,r,f,d.index)),null!==Ii)(Ii.__ngLastListenerFn__||Ii).__ngNextListenerFn__=y,Ii.__ngLastListenerFn__=y,at=!1;else{y=Bh(d,r,ge,y,!1);const ls=a.listen(Xn,f,y);Be.push(y,ls),ie&&ie.push(f,vr,qt,qt+1)}}else y=Bh(d,r,ge,y,!0),Xn.addEventListener(f,y,I),Be.push(y),ie&&ie.push(f,vr,qt,I)}else y=Bh(d,r,ge,y,!1);const Nt=d.outputs;let dn;if(at&&null!==Nt&&(dn=Nt[f])){const xn=dn.length;if(xn)for(let Xn=0;Xn<xn;Xn+=2){const Bu=r[dn[Xn]][dn[Xn+1]].subscribe(y),Cg=Be.length;Be.push(y,Bu),ie&&ie.push(f,d.index,Cg,-(Cg+1))}}}(y,f,f[11],I,n,r,!!a,d),tp}function Vh(n,r,a,d){try{return!1!==a(d)}catch(f){return Rf(n,f),!1}}function Bh(n,r,a,d,f){return function y(I){if(I===Function)return d;const M=2&n.flags?on(n.index,r):r;0==(32&r[2])&&Lp(M);let P=Vh(r,0,d,I),Z=y.__ngNextListenerFn__;for(;Z;)P=Vh(r,0,Z,I)&&P,Z=Z.__ngNextListenerFn__;return f&&!1===P&&(I.preventDefault(),I.returnValue=!1),P}}function mm(n=1){return function ka(n){return(rn.lFrame.contextLView=function ho(n,r){for(;n>0;)r=r[15],n--;return r}(n,rn.lFrame.contextLView))[8]}(n)}function jh(n,r,a){return $h(n,"",r,"",a),jh}function $h(n,r,a,d,f){const y=q(),I=Qc(y,r,a,d);return I!==Cr&&yo(rt(),yi(),y,n,I,y[11],f,!1),$h}function Gh(n,r,a,d,f){const y=n[a+1],I=null===r;let M=d?aa(y):ac(y),P=!1;for(;0!==M&&(!1===P||I);){const ie=n[M+1];ym(n[M],r)&&(P=!0,n[M+1]=d?Ug(ie):vp(ie)),M=d?aa(ie):ac(ie)}P&&(n[a+1]=d?vp(y):Ug(y))}function ym(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&wa(n,r)>=0}const vs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function zh(n){return n.substring(vs.key,vs.keyEnd)}function mg(n,r){const a=vs.textEnd;return a===r?-1:(r=vs.keyEnd=function wm(n,r,a){for(;r<a&&n.charCodeAt(r)>32;)r++;return r}(n,vs.key=r,a),$d(n,r,a))}function $d(n,r,a){for(;r<a&&n.charCodeAt(r)<=32;)r++;return r}function rp(n,r,a){return s(n,r,a,!1),rp}function ip(n,r){return s(n,r,null,!0),ip}function u(n){!function c(n,r,a,d){const f=rt(),y=Is(2);f.firstUpdatePass&&C(f,null,y,d);const I=q();if(a!==Cr&&ao(I,y,a)){const M=f.data[ns()];if(hs(M,d)&&!p(f,y)){let P=d?M.classesWithoutHost:M.stylesWithoutHost;null!==P&&(a=Pe(P,a||"")),dg(f,M,I,a,d)}else!function Lt(n,r,a,d,f,y,I,M){f===Cr&&(f=En);let P=0,Z=0,ie=0<f.length?f[0]:null,ge=0<y.length?y[0]:null;for(;null!==ie||null!==ge;){const Be=P<f.length?f[P+1]:void 0,at=Z<y.length?y[Z+1]:void 0;let dn,Nt=null;ie===ge?(P+=2,Z+=2,Be!==at&&(Nt=ge,dn=at)):null===ge||null!==ie&&ie<ge?(P+=2,Nt=ie):(Z+=2,Nt=ge,dn=at),null!==Nt&&Cn(n,r,a,d,Nt,dn,I,M),ie=P<f.length?f[P]:null,ge=Z<y.length?y[Z]:null}}(f,M,I,I[11],I[y+1],I[y+1]=function st(n,r,a){if(null==a||""===a)return En;const d=[],f=sa(a);if(Array.isArray(f))for(let y=0;y<f.length;y++)n(d,f[y],!0);else if("object"==typeof f)for(const y in f)f.hasOwnProperty(y)&&n(d,y,f[y]);else"string"==typeof f&&r(d,f);return d}(n,r,a),d,y)}}(gs,i,n,!0)}function i(n,r){for(let a=function m_(n){return function Em(n){vs.key=0,vs.keyEnd=0,vs.value=0,vs.valueEnd=0,vs.textEnd=n.length}(n),mg(n,$d(n,0,vs.textEnd))}(r);a>=0;a=mg(r,a))gs(n,zh(r),!0)}function s(n,r,a,d){const f=q(),y=rt(),I=Is(2);y.firstUpdatePass&&C(y,n,I,d),r!==Cr&&ao(f,I,r)&&Cn(y,y.data[ns()],f,f[11],n,f[I+1]=function Ji(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=he(sa(n)))),n}(r,a),d,I)}function p(n,r){return r>=n.expandoStartIndex}function C(n,r,a,d){const f=n.data;if(null===f[a+1]){const y=f[ns()],I=p(n,a);hs(y,d)&&null===r&&!I&&(r=!1),r=function D(n,r,a,d){const f=Js(n);let y=d?r.residualClasses:r.residualStyles;if(null===f)0===(d?r.classBindings:r.styleBindings)&&(a=He(a=Ae(null,n,r,a,d),r.attrs,d),y=null);else{const I=r.directiveStylingLast;if(-1===I||n[I]!==f)if(a=Ae(f,n,r,a,d),null===y){let P=function L(n,r,a){const d=a?r.classBindings:r.styleBindings;if(0!==ac(d))return n[aa(d)]}(n,r,d);void 0!==P&&Array.isArray(P)&&(P=Ae(null,n,r,P[1],d),P=He(P,r.attrs,d),function Y(n,r,a,d){n[aa(a?r.classBindings:r.styleBindings)]=d}(n,r,d,P))}else y=function ae(n,r,a){let d;const f=r.directiveEnd;for(let y=1+r.directiveStylingLast;y<f;y++)d=He(d,n[y].hostAttrs,a);return He(d,r.attrs,a)}(n,r,d)}return void 0!==y&&(d?r.residualClasses=y:r.residualStyles=y),a}(f,y,r,d),function jd(n,r,a,d,f,y){let I=y?r.classBindings:r.styleBindings,M=aa(I),P=ac(I);n[d]=a;let ie,Z=!1;if(Array.isArray(a)){const ge=a;ie=ge[1],(null===ie||wa(ge,ie)>0)&&(Z=!0)}else ie=a;if(f)if(0!==P){const Be=aa(n[M+1]);n[d+1]=yp(Be,M),0!==Be&&(n[Be+1]=Lg(n[Be+1],d)),n[M+1]=function Bc(n,r){return 131071&n|r<<17}(n[M+1],d)}else n[d+1]=yp(M,0),0!==M&&(n[M+1]=Lg(n[M+1],d)),M=d;else n[d+1]=yp(P,0),0===M?M=d:n[P+1]=Lg(n[P+1],d),P=d;Z&&(n[d+1]=vp(n[d+1])),Gh(n,ie,d,!0),Gh(n,ie,d,!1),function g_(n,r,a,d,f){const y=f?n.residualClasses:n.residualStyles;null!=y&&"string"==typeof r&&wa(y,r)>=0&&(a[d+1]=Ug(a[d+1]))}(r,ie,n,d,y),I=yp(M,P),y?r.classBindings=I:r.styleBindings=I}(f,y,r,a,I,d)}}function Ae(n,r,a,d,f){let y=null;const I=a.directiveEnd;let M=a.directiveStylingLast;for(-1===M?M=a.directiveStart:M++;M<I&&(y=r[M],d=He(d,y.hostAttrs,f),y!==n);)M++;return null!==n&&(a.directiveStylingLast=M),d}function He(n,r,a){const d=a?1:2;let f=-1;if(null!==r)for(let y=0;y<r.length;y++){const I=r[y];"number"==typeof I?f=I:f===d&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),gs(n,I,!!a||r[++y]))}return void 0===n?null:n}function Cn(n,r,a,d,f,y,I,M){if(!(3&r.type))return;const P=n.data,Z=P[M+1];Ei(function Hm(n){return 1==(1&n)}(Z)?ur(P,r,a,f,ac(Z),I):void 0)||(Ei(y)||function Fg(n){return 2==(2&n)}(Z)&&(y=ur(P,null,a,f,M,I)),function k_(n,r,a,d,f){const y=Ft(n);if(r)f?y?n.addClass(a,d):a.classList.add(d):y?n.removeClass(a,d):a.classList.remove(d);else{let I=-1===d.indexOf("-")?void 0:iu.DashCase;if(null==f)y?n.removeStyle(a,d,I):a.style.removeProperty(d);else{const M="string"==typeof f&&f.endsWith("!important");M&&(f=f.slice(0,-10),I|=iu.Important),y?n.setStyle(a,d,f,I):a.style.setProperty(d,f,M?"important":"")}}}(d,I,V(ns(),a),f,y))}function ur(n,r,a,d,f,y){const I=null===r;let M;for(;f>0;){const P=n[f],Z=Array.isArray(P),ie=Z?P[1]:P,ge=null===ie;let Be=a[f+1];Be===Cr&&(Be=ge?En:void 0);let at=ge?rl(Be,d):ie===d?Be:void 0;if(Z&&!Ei(at)&&(at=rl(P,d)),Ei(at)&&(M=at,I))return M;const Nt=n[f+1];f=I?aa(Nt):ac(Nt)}if(null!==r){let P=y?r.residualClasses:r.residualStyles;null!=P&&(M=rl(P,d))}return M}function Ei(n){return void 0!==n}function hs(n,r){return 0!=(n.flags&(r?16:32))}function Es(n,r=""){const a=q(),d=rt(),f=n+20,y=d.firstCreatePass?$c(d,f,1,r,null):d.data[f],I=a[f]=function ef(n,r){return Ft(n)?n.createText(r):n.createTextNode(r)}(a[11],r);uf(d,a,I,y),Qi(y,!1)}function Ma(n){return Ys("",n,""),Ma}function Ys(n,r,a){const d=q(),f=Qc(d,n,r,a);return f!==Cr&&Da(d,ns(),f),Ys}function vo(n,r,a){const d=q();if(ao(d,cs(),r)){const y=rt(),I=yi();yo(y,I,d,n,r,function Mf(n,r,a){return(null===n||Qr(n))&&(a=function F(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(a[r.index])),a[11]}(Js(y.data),I,d),a,!0)}return vo}const ki=void 0;var ua=["en",[["a","p"],["AM","PM"],ki],[["AM","PM"],ki,ki],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ki,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ki,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ki,"{1} 'at' {0}",ki],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Ki(n){const a=Math.floor(Math.abs(n)),d=n.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===d?1:5}];let vc={};function gy(n){const r=function rE(n){return n.toLowerCase().replace(/_/g,"-")}(n);let a=ov(r);if(a)return a;const d=r.split("-")[0];if(a=ov(d),a)return a;if("en"===d)return ua;throw new Error(`Missing locale data for the locale "${n}".`)}function sv(n){return gy(n)[Sr.PluralCase]}function ov(n){return n in vc||(vc[n]=Dn.ng&&Dn.ng.common&&Dn.ng.common.locales&&Dn.ng.common.locales[n]),vc[n]}var Sr=(()=>((Sr=Sr||{})[Sr.LocaleId=0]="LocaleId",Sr[Sr.DayPeriodsFormat=1]="DayPeriodsFormat",Sr[Sr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Sr[Sr.DaysFormat=3]="DaysFormat",Sr[Sr.DaysStandalone=4]="DaysStandalone",Sr[Sr.MonthsFormat=5]="MonthsFormat",Sr[Sr.MonthsStandalone=6]="MonthsStandalone",Sr[Sr.Eras=7]="Eras",Sr[Sr.FirstDayOfWeek=8]="FirstDayOfWeek",Sr[Sr.WeekendRange=9]="WeekendRange",Sr[Sr.DateFormat=10]="DateFormat",Sr[Sr.TimeFormat=11]="TimeFormat",Sr[Sr.DateTimeFormat=12]="DateTimeFormat",Sr[Sr.NumberSymbols=13]="NumberSymbols",Sr[Sr.NumberFormats=14]="NumberFormats",Sr[Sr.CurrencyCode=15]="CurrencyCode",Sr[Sr.CurrencySymbol=16]="CurrencySymbol",Sr[Sr.CurrencyName=17]="CurrencyName",Sr[Sr.Currencies=18]="Currencies",Sr[Sr.Directionality=19]="Directionality",Sr[Sr.PluralCase=20]="PluralCase",Sr[Sr.ExtraData=21]="ExtraData",Sr))();const q_="en-US";let av=q_;function yy(n,r,a,d,f){if(n=ke(n),Array.isArray(n))for(let y=0;y<n.length;y++)yy(n[y],r,a,d,f);else{const y=rt(),I=q();let M=gc(n)?n:ke(n.provide),P=Ch(n);const Z=sr(),ie=1048575&Z.providerIndexes,ge=Z.directiveStart,Be=Z.providerIndexes>>20;if(gc(n)||!n.multi){const at=new gr(P,f,kh),Nt=Ey(M,r,f?ie:ie+Be,ge);-1===Nt?(hi(nr(Z,I),y,M),vy(y,n,r.length),r.push(M),Z.directiveStart++,Z.directiveEnd++,f&&(Z.providerIndexes+=1048576),a.push(at),I.push(at)):(a[Nt]=at,I[Nt]=at)}else{const at=Ey(M,r,ie+Be,ge),Nt=Ey(M,r,ie,ie+Be),dn=at>=0&&a[at],xn=Nt>=0&&a[Nt];if(f&&!xn||!f&&!dn){hi(nr(Z,I),y,M);const Xn=function tw(n,r,a,d,f){const y=new gr(n,a,kh);return y.multi=[],y.index=r,y.componentProviders=0,Rv(y,f,d&&!a),y}(f?ew:XE,a.length,f,d,P);!f&&xn&&(a[Nt].providerFactory=Xn),vy(y,n,r.length,0),r.push(M),Z.directiveStart++,Z.directiveEnd++,f&&(Z.providerIndexes+=1048576),a.push(Xn),I.push(Xn)}else vy(y,n,at>-1?at:Nt,Rv(a[f?Nt:at],P,!f&&d));!f&&d&&xn&&a[Nt].componentProviders++}}}function vy(n,r,a,d){const f=gc(r),y=function H_(n){return!!n.useClass}(r);if(f||y){const P=(y?ke(r.useClass):r).prototype.ngOnDestroy;if(P){const Z=n.destroyHooks||(n.destroyHooks=[]);if(!f&&r.multi){const ie=Z.indexOf(a);-1===ie?Z.push(a,[d,P]):Z[ie+1].push(d,P)}else Z.push(a,P)}}}function Rv(n,r,a){return a&&n.componentProviders++,n.multi.push(r)-1}function Ey(n,r,a,d){for(let f=a;f<d;f++)if(r[f]===n)return f;return-1}function XE(n,r,a,d){return wy(this.multi,[])}function ew(n,r,a,d){const f=this.multi;let y;if(this.providerFactory){const I=this.providerFactory.componentProviders,M=Et(a,a[1],this.providerFactory.index,d);y=M.slice(0,I),wy(f,y);for(let P=I;P<M.length;P++)y.push(M[P])}else y=[],wy(f,y);return y}function wy(n,r){for(let a=0;a<n.length;a++)r.push((0,n[a])());return r}function Pv(n,r=[]){return a=>{a.providersResolver=(d,f)=>function JE(n,r,a){const d=rt();if(d.firstCreatePass){const f=Qr(n);yy(a,d.data,d.blueprint,f,!0),yy(r,d.data,d.blueprint,f,!1)}}(d,f?f(n):n,r)}}class Nv{}class iw{resolveComponentFactory(r){throw function rw(n){const r=Error(`No component factory found for ${he(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let I_=(()=>{class n{}return n.NULL=new iw,n})();function sw(){return Dm(sr(),q())}function Dm(n,r){return new T_(se(n,r))}let T_=(()=>{class n{constructor(a){this.nativeElement=a}}return n.__NG_ELEMENT_ID__=sw,n})();function ow(n){return n instanceof T_?n.nativeElement:n}class kv{}let aw=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function uw(){const n=q(),a=on(sr().index,n);return function lw(n){return n[11]}(ln(a)?a:n)}(),n})(),cw=(()=>{class n{}return n.\u0275prov=Dt({token:n,providedIn:"root",factory:()=>null}),n})();class Fv{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Lv=new Fv("13.1.3"),Cy={};function J_(n,r,a,d,f=!1){for(;null!==a;){const y=r[a.index];if(null!==y&&d.push(An(y)),Zn(y))for(let M=10;M<y.length;M++){const P=y[M],Z=P[1].firstChild;null!==Z&&J_(P[1],P,Z,d)}const I=a.type;if(8&I)J_(n,r,a.child,d);else if(32&I){const M=up(a,r);let P;for(;P=M();)d.push(P)}else if(16&I){const M=fp(r,a);if(Array.isArray(M))d.push(...M);else{const P=Tu(r[16]);J_(P[1],P,M,d,!0)}}a=f?a.projectionNext:a.next}return d}class D_{constructor(r,a){this._lView=r,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,a=r[1];return J_(a,r,a.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Zn(r)){const a=r[8],d=a?a.indexOf(this):-1;d>-1&&(so(r,d),no(a,d))}this._attachedToViewContainer=!1}nf(this._lView[1],this._lView)}onDestroy(r){xp(this._lView[1],this._lView,null,r)}markForCheck(){Lp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Df(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Af(n,r,a){Yo(!0);try{Df(n,r,a)}finally{Yo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ye(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Um(n,r){hh(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Ye(902,"");this._appRef=r}}class dw extends D_{constructor(r){super(r),this._view=r}detectChanges(){os(this._view)}checkNoChanges(){!function Sf(n){Yo(!0);try{os(n)}finally{Yo(!1)}}(this._view)}get context(){return null}}class Uv extends I_{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const a=De(r);return new by(a,this.ngModule)}}function Vv(n){const r=[];for(let a in n)n.hasOwnProperty(a)&&r.push({propName:n[a],templateName:a});return r}const fw=new ji("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>xo});class by extends Nv{constructor(r,a){super(),this.componentDef=r,this.ngModule=a,this.componentType=r.type,this.selector=function hf(n){return n.map(df).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Vv(this.componentDef.inputs)}get outputs(){return Vv(this.componentDef.outputs)}create(r,a,d,f){const y=(f=f||this.ngModule)?function pw(n,r){return{get:(a,d,f)=>{const y=n.get(a,Cy,f);return y!==Cy||d===Cy?y:r.get(a,d,f)}}}(r,f.injector):r,I=y.get(kv,fn),M=y.get(cw,null),P=I.createRenderer(null,this.componentDef),Z=this.componentDef.selectors[0][0]||"div",ie=d?function Sp(n,r,a){if(Ft(n))return n.selectRootElement(r,a===Vn.ShadowDom);let d="string"==typeof r?n.querySelector(r):r;return d.textContent="",d}(P,d,this.componentDef.encapsulation):Sg(I.createRenderer(null,this.componentDef),Z,function hw(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(Z)),ge=this.componentDef.onPush?576:528,Be=function Rd(n,r){return{components:[],scheduler:n||xo,clean:Qg,playerHandler:r||null,flags:0}}(),at=Cd(0,null,null,1,0,null,null,null,null,null),Nt=yd(null,at,Be,ge,null,null,I,P,M,y);let dn,xn;Pa(Nt);try{const Xn=function oo(n,r,a,d,f,y){const I=a[1];a[20]=n;const P=$c(I,20,2,"#host",null),Z=P.mergedAttrs=r.hostAttrs;null!==Z&&(jl(P,Z,!0),null!==n&&(Gi(f,n,Z),null!==P.classes&&Au(f,n,P.classes),null!==P.styles&&pd(f,n,P.styles)));const ie=d.createRenderer(n,r),ge=yd(a,wd(r),null,r.onPush?64:16,a[20],P,d,ie,y||null,null);return I.firstCreatePass&&(hi(nr(P,a),I,r.type),Gc(I,P),wf(P,a.length,1)),_h(a,ge),a[20]=ge}(ie,this.componentDef,Nt,I,P);if(ie)if(d)Gi(P,ie,["ng-version",Lv.full]);else{const{attrs:qt,classes:vr}=function $m(n){const r=[],a=[];let d=1,f=2;for(;d<n.length;){let y=n[d];if("string"==typeof y)2===f?""!==y&&r.push(y,n[++d]):8===f&&a.push(y);else{if(!Ya(f))break;f=y}d++}return{attrs:r,classes:a}}(this.componentDef.selectors[0]);qt&&Gi(P,ie,qt),vr&&vr.length>0&&Au(P,ie,vr.join(" "))}if(xn=ht(at,20),void 0!==a){const qt=xn.projection=[];for(let vr=0;vr<this.ngContentSelectors.length;vr++){const Ii=a[vr];qt.push(null!=Ii?Array.from(Ii):null)}}dn=function lu(n,r,a,d,f){const y=a[1],I=function fc(n,r,a){const d=sr();n.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Td(n,d,r,Hc(n,r,1,null),a));const f=Et(r,n,d.directiveStart,d);Rn(f,r);const y=se(d,r);return y&&Rn(y,r),f}(y,a,r);if(d.components.push(I),n[8]=I,f&&f.forEach(P=>P(I,r)),r.contentQueries){const P=sr();r.contentQueries(1,I,P.directiveStart)}const M=sr();return!y.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(fo(M.index),vf(a[1],M,0,M.directiveStart,M.directiveEnd,r),Ef(r,I)),I}(Xn,this.componentDef,Nt,Be,[zp]),Xt(at,Nt,null)}finally{ga()}return new mw(this.componentType,dn,Dm(xn,Nt),Nt,xn)}}class mw extends class nw{}{constructor(r,a,d,f,y){super(),this.location=d,this._rootLView=f,this._tNode=y,this.instance=a,this.hostView=this.changeDetectorRef=new dw(f),this.componentType=r}get injector(){return new Vr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class Am{}class Bv{}const Sm=new Map;class Hv extends Am{constructor(r,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Uv(this);const d=Bt(r);this._bootstrapComponents=ru(d.bootstrap),this._r3Injector=Bp(r,a,[{provide:Am,useValue:this},{provide:I_,useValue:this.componentFactoryResolver}],he(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,a=qo.THROW_IF_NOT_FOUND,d=tn.Default){return r===qo||r===Am||r===Of?this:this._r3Injector.get(r,a,d)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Iy extends Bv{constructor(r){super(),this.moduleType=r,null!==Bt(r)&&function yw(n){const r=new Set;!function a(d){const f=Bt(d,!0),y=f.id;null!==y&&(function jv(n,r,a){if(r&&r!==a)throw new Error(`Duplicate module registered for ${n} - ${he(r)} vs ${he(r.name)}`)}(y,Sm.get(y),d),Sm.set(y,d));const I=ru(f.imports);for(const M of I)r.has(M)||(r.add(M),a(M))}(n)}(r)}create(r){return new Hv(this.moduleType,r)}}function Wv(n,r,a){const d=function ts(){const n=rn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}()+n,f=q();return f[d]===Cr?function Xa(n,r,a){return n[r]=a}(f,d,a?r.call(a):r()):function Mh(n,r){return n[r]}(f,d)}function Ty(n){return r=>{setTimeout(n,void 0,r)}}const Hd=class kw extends _.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,a,d){var f,y,I;let M=r,P=a||(()=>null),Z=d;if(r&&"object"==typeof r){const ge=r;M=null===(f=ge.next)||void 0===f?void 0:f.bind(ge),P=null===(y=ge.error)||void 0===y?void 0:y.bind(ge),Z=null===(I=ge.complete)||void 0===I?void 0:I.bind(ge)}this.__isAsync&&(P=Ty(P),M&&(M=Ty(M)),Z&&(Z=Ty(Z)));const ie=super.subscribe({next:M,error:P,complete:Z});return r instanceof E.w0&&r.add(ie),ie}};function Fw(){return this._results[Pd()]()}class Dy{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Pd(),d=Dy.prototype;d[a]||(d[a]=Fw)}get changes(){return this._changes||(this._changes=new Hd)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,a){return this._results.reduce(r,a)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,a){const d=this;d.dirty=!1;const f=Do(r);(this._changesDetected=!function qs(n,r,a){if(n.length!==r.length)return!1;for(let d=0;d<n.length;d++){let f=n[d],y=r[d];if(a&&(f=a(f),y=a(y)),y!==f)return!1}return!0}(d._results,f,a))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let x_=(()=>{class n{}return n.__NG_ELEMENT_ID__=Vw,n})();const Lw=x_,Uw=class extends Lw{constructor(r,a,d){super(),this._declarationLView=r,this._declarationTContainer=a,this.elementRef=d}createEmbeddedView(r){const a=this._declarationTContainer.tViews,d=yd(this._declarationLView,a,r,16,null,a.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(d[19]=y.createEmbeddedView(a)),Xt(a,d,r),new D_(d)}};function Vw(){return X_(sr(),q())}function X_(n,r){return 4&n.type?new Uw(r,n,Dm(n,r)):null}let ey=(()=>{class n{}return n.__NG_ELEMENT_ID__=Bw,n})();function Bw(){return Jv(sr(),q())}const jw=ey,Yv=class extends jw{constructor(r,a,d){super(),this._lContainer=r,this._hostTNode=a,this._hostLView=d}get element(){return Dm(this._hostTNode,this._hostLView)}get injector(){return new Vr(this._hostTNode,this._hostLView)}get parentInjector(){const r=wl(this._hostTNode,this._hostLView);if(mu(r)){const a=Xo(r,this._hostLView),d=ya(r);return new Vr(a[1].data[d+8],a)}return new Vr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const a=Qv(this._lContainer);return null!==a&&a[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,a,d){const f=r.createEmbeddedView(a||{});return this.insert(f,d),f}createComponent(r,a,d,f,y){const I=r&&!function nl(n){return"function"==typeof n}(r);let M;if(I)M=a;else{const ge=a||{};M=ge.index,d=ge.injector,f=ge.projectableNodes,y=ge.ngModuleRef}const P=I?r:new by(De(r)),Z=d||this.parentInjector;if(!y&&null==P.ngModule&&Z){const ge=Z.get(Am,null);ge&&(y=ge)}const ie=P.create(Z,f,void 0,y);return this.insert(ie.hostView,M),ie}insert(r,a){const d=r._lView,f=d[1];if(function Qt(n){return Zn(n[3])}(d)){const ie=this.indexOf(r);if(-1!==ie)this.detach(ie);else{const ge=d[3],Be=new Yv(ge,ge[6],ge[3]);Be.detach(Be.indexOf(r))}}const y=this._adjustIndex(a),I=this._lContainer;!function Mg(n,r,a,d){const f=10+d,y=a.length;d>0&&(a[f-1][4]=r),d<y-10?(r[4]=a[f],bc(a,10+d,r)):(a.push(r),r[4]=null),r[3]=a;const I=r[17];null!==I&&a!==I&&function N_(n,r){const a=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===a?n[9]=[r]:a.push(r)}(I,r);const M=r[19];null!==M&&M.insertView(n),r[2]|=128}(f,d,I,y);const M=Fc(y,I),P=d[11],Z=Du(P,I[7]);return null!==Z&&function Lm(n,r,a,d,f,y){d[0]=f,d[6]=r,hh(n,d,a,1,f,y)}(f,I[6],P,d,Z,M),r.attachToViewContainerRef(),bc(Ay(I),y,r),r}move(r,a){return this.insert(r,a)}indexOf(r){const a=Qv(this._lContainer);return null!==a?a.indexOf(r):-1}remove(r){const a=this._adjustIndex(r,-1),d=so(this._lContainer,a);d&&(no(Ay(this._lContainer),a),nf(d[1],d))}detach(r){const a=this._adjustIndex(r,-1),d=so(this._lContainer,a);return d&&null!=no(Ay(this._lContainer),a)?new D_(d):null}_adjustIndex(r,a=0){return null==r?this.length+a:r}};function Qv(n){return n[8]}function Ay(n){return n[8]||(n[8]=[])}function Jv(n,r){let a;const d=r[n.index];if(Zn(d))a=d;else{let f;if(8&n.type)f=An(d);else{const y=r[11];f=y.createComment("");const I=se(n,r);ic(y,Du(y,I),f,function ah(n,r){return Ft(n)?n.nextSibling(r):r.nextSibling}(y,I),!1)}r[n.index]=a=kp(d,r,f,n),_h(r,a)}return new Yv(a,n,r)}class Sy{constructor(r){this.queryList=r,this.matches=null}clone(){return new Sy(this.queryList)}setDirty(){this.queryList.setDirty()}}class xy{constructor(r=[]){this.queries=r}createEmbeddedView(r){const a=r.queries;if(null!==a){const d=null!==r.contentQueries?r.contentQueries[0]:a.length,f=[];for(let y=0;y<d;y++){const I=a.getByIndex(y);f.push(this.queries[I.indexInDeclarationView].clone())}return new xy(f)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let a=0;a<this.queries.length;a++)null!==a0(r,a).matches&&this.queries[a].setDirty()}}class Xv{constructor(r,a,d=null){this.predicate=r,this.flags=a,this.read=d}}class My{constructor(r=[]){this.queries=r}elementStart(r,a){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(r,a)}elementEnd(r){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(r)}embeddedTView(r){let a=null;for(let d=0;d<this.length;d++){const f=null!==a?a.length:0,y=this.getByIndex(d).embeddedTView(r,f);y&&(y.indexInDeclarationView=d,null!==a?a.push(y):a=[y])}return null!==a?new My(a):null}template(r,a){for(let d=0;d<this.queries.length;d++)this.queries[d].template(r,a)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class Ry{constructor(r,a=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(r,a){this.isApplyingToNode(a)&&this.matchTNode(r,a)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,a){this.elementStart(r,a)}embeddedTView(r,a){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,a),new Ry(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let d=r.parent;for(;null!==d&&8&d.type&&d.index!==a;)d=d.parent;return a===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(r,a){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const y=d[f];this.matchTNodeWithReadOption(r,a,Ww(a,y)),this.matchTNodeWithReadOption(r,a,Ne(a,r,y,!1,!1))}else d===x_?4&a.type&&this.matchTNodeWithReadOption(r,a,-1):this.matchTNodeWithReadOption(r,a,Ne(a,r,d,!1,!1))}matchTNodeWithReadOption(r,a,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===T_||f===ey||f===x_&&4&a.type)this.addMatch(a.index,-2);else{const y=Ne(a,r,f,!1,!1);null!==y&&this.addMatch(a.index,y)}else this.addMatch(a.index,d)}}addMatch(r,a){null===this.matches?this.matches=[r,a]:this.matches.push(r,a)}}function Ww(n,r){const a=n.localNames;if(null!==a)for(let d=0;d<a.length;d+=2)if(a[d]===r)return a[d+1];return null}function zw(n,r,a,d){return-1===a?function Gw(n,r){return 11&n.type?Dm(n,r):4&n.type?X_(n,r):null}(r,n):-2===a?function qw(n,r,a){return a===T_?Dm(r,n):a===x_?X_(r,n):a===ey?Jv(r,n):void 0}(n,r,d):Et(n,n[1],a,r)}function e0(n,r,a,d){const f=r[19].queries[d];if(null===f.matches){const y=n.data,I=a.matches,M=[];for(let P=0;P<I.length;P+=2){const Z=I[P];M.push(Z<0?null:zw(r,y[Z],I[P+1],a.metadata.read))}f.matches=M}return f.matches}function Py(n,r,a,d){const f=n.queries.getByIndex(a),y=f.matches;if(null!==y){const I=e0(n,r,f,a);for(let M=0;M<y.length;M+=2){const P=y[M];if(P>0)d.push(I[M/2]);else{const Z=y[M+1],ie=r[-P];for(let ge=10;ge<ie.length;ge++){const Be=ie[ge];Be[17]===Be[3]&&Py(Be[1],Be,Z,d)}if(null!==ie[9]){const ge=ie[9];for(let Be=0;Be<ge.length;Be++){const at=ge[Be];Py(at[1],at,Z,d)}}}}}return d}function t0(n){const r=q(),a=rt(),d=Gl();Lo(d+1);const f=a0(a,d);if(n.dirty&&Qn(r)===(2==(2&f.metadata.flags))){if(null===f.matches)n.reset([]);else{const y=f.crossesNgTemplate?Py(a,r,d,[]):e0(a,r,f,d);n.reset(y,ow),n.notifyOnChanges()}return!0}return!1}function n0(n,r,a,d){const f=rt();if(f.firstCreatePass){const y=sr();(function o0(n,r,a){null===n.queries&&(n.queries=new My),n.queries.track(new Ry(r,a))})(f,new Xv(r,a,d),y.index),function Yw(n,r){const a=n.contentQueries||(n.contentQueries=[]);r!==(a.length?a[a.length-1]:-1)&&a.push(n.queries.length-1,r)}(f,n),2==(2&a)&&(f.staticContentQueries=!0)}!function s0(n,r,a){const d=new Dy(4==(4&a));xp(n,r,d,d.destroy),null===r[19]&&(r[19]=new xy),r[19].queries.push(new Sy(d))}(f,q(),a)}function r0(){return function Kw(n,r){return n[19].queries[r].queryList}(q(),Gl())}function a0(n,r){return n.queries.getByIndex(r)}function ry(...n){}const Uy=new ji("Application Initializer");let Mm=(()=>{class n{constructor(a){this.appInits=a,this.resolve=ry,this.reject=ry,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const a=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const y=this.appInits[f]();if(Fh(y))a.push(y);else if(Lh(y)){const I=new Promise((M,P)=>{y.subscribe({complete:M,error:P})});a.push(I)}}Promise.all(a).then(()=>{d()}).catch(f=>{this.reject(f)}),0===a.length&&d(),this.initialized=!0}}return n.\u0275fac=function(a){return new(a||n)(ms(Uy,8))},n.\u0275prov=Dt({token:n,factory:n.\u0275fac}),n})();const I0=new ji("AppId"),gC={provide:I0,useFactory:function pC(){return`${Vy()}${Vy()}${Vy()}`},deps:[]};function Vy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const T0=new ji("Platform Initializer"),D0=new ji("Platform ID"),A0=new ji("appBootstrapListener");let S0=(()=>{class n{log(a){console.log(a)}warn(a){console.warn(a)}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=Dt({token:n,factory:n.\u0275fac}),n})();const iy=new ji("LocaleId"),x0=new ji("DefaultCurrencyCode");class mC{constructor(r,a){this.ngModuleFactory=r,this.componentFactories=a}}let By=(()=>{class n{compileModuleSync(a){return new Iy(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const d=this.compileModuleSync(a),y=ru(Bt(a).declarations).reduce((I,M)=>{const P=De(M);return P&&I.push(new by(P)),I},[]);return new mC(d,y)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=Dt({token:n,factory:n.\u0275fac}),n})();const yC=(()=>Promise.resolve(0))();function jy(n){"undefined"==typeof Zone?yC.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Vu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Hd(!1),this.onMicrotaskEmpty=new Hd(!1),this.onStable=new Hd(!1),this.onError=new Hd(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&a,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function vC(){let n=Dn.requestAnimationFrame,r=Dn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const a=n[Zone.__symbol__("OriginalDelegate")];a&&(n=a);const d=r[Zone.__symbol__("OriginalDelegate")];d&&(r=d)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function CC(n){const r=()=>{!function wC(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Dn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Hy(n),n.isCheckStableRunning=!0,$y(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Hy(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,d,f,y,I,M)=>{try{return M0(n),a.invokeTask(f,y,I,M)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||n.shouldCoalesceRunChangeDetection)&&r(),R0(n)}},onInvoke:(a,d,f,y,I,M,P)=>{try{return M0(n),a.invoke(f,y,I,M,P)}finally{n.shouldCoalesceRunChangeDetection&&r(),R0(n)}},onHasTask:(a,d,f,y)=>{a.hasTask(f,y),d===f&&("microTask"==y.change?(n._hasPendingMicrotasks=y.microTask,Hy(n),$y(n)):"macroTask"==y.change&&(n.hasPendingMacrotasks=y.macroTask))},onHandleError:(a,d,f,y)=>(a.handleError(f,y),n.runOutsideAngular(()=>n.onError.emit(y)),!1)})}(f)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Vu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,a,d){return this._inner.run(r,a,d)}runTask(r,a,d,f){const y=this._inner,I=y.scheduleEventTask("NgZoneEvent: "+f,r,EC,ry,ry);try{return y.runTask(I,a,d)}finally{y.cancelTask(I)}}runGuarded(r,a,d){return this._inner.runGuarded(r,a,d)}runOutsideAngular(r){return this._outer.run(r)}}const EC={};function $y(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Hy(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function M0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function R0(n){n._nesting--,$y(n)}class bC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Hd,this.onMicrotaskEmpty=new Hd,this.onStable=new Hd,this.onError=new Hd}run(r,a,d){return r.apply(a,d)}runGuarded(r,a,d){return r.apply(a,d)}runOutsideAngular(r){return r()}runTask(r,a,d,f){return r.apply(a,d)}}let P0=(()=>{class n{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vu.assertNotInAngularZone(),jy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())jy(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(a)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,d,f){let y=-1;d&&d>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==y),a(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:a,timeoutId:y,updateCb:f})}whenStable(a,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,d,f){return[]}}return n.\u0275fac=function(a){return new(a||n)(ms(Vu))},n.\u0275prov=Dt({token:n,factory:n.\u0275fac}),n})(),N0=(()=>{class n{constructor(){this._applications=new Map,Wy.addToWindow(this)}registerApplication(a,d){this._applications.set(a,d)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,d=!0){return Wy.findTestabilityInTree(this,a,d)}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=Dt({token:n,factory:n.\u0275fac}),n})();class IC{addToWindow(r){}findTestabilityInTree(r,a,d){return null}}function TC(n){Wy=n}let rd,Wy=new IC;const O0=new ji("AllowMultipleToken");class SC{constructor(r,a){this.name=r,this.token=a}}function k0(n,r,a=[]){const d=`Platform: ${r}`,f=new ji(d);return(y=[])=>{let I=F0();if(!I||I.injector.get(O0,!1))if(n)n(a.concat(y).concat({provide:f,useValue:!0}));else{const M=a.concat(y).concat({provide:f,useValue:!0},{provide:Vp,useValue:"platform"});!function xC(n){if(rd&&!rd.destroyed&&!rd.injector.get(O0,!1))throw new Ye(400,"");rd=n.get(L0);const r=n.get(T0,null);r&&r.forEach(a=>a())}(qo.create({providers:M,name:d}))}return function MC(n){const r=F0();if(!r)throw new Ye(401,"");return r}()}}function F0(){return rd&&!rd.destroyed?rd:null}let L0=(()=>{class n{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,d){const M=function RC(n,r){let a;return a="noop"===n?new bC:("zone.js"===n?void 0:n)||new Vu({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),a}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),P=[{provide:Vu,useValue:M}];return M.run(()=>{const Z=qo.create({providers:P,parent:this.injector,name:a.moduleType.name}),ie=a.create(Z),ge=ie.injector.get(eh,null);if(!ge)throw new Ye(402,"");return M.runOutsideAngular(()=>{const Be=M.onError.subscribe({next:at=>{ge.handleError(at)}});ie.onDestroy(()=>{Gy(this._modules,ie),Be.unsubscribe()})}),function PC(n,r,a){try{const d=a();return Fh(d)?d.catch(f=>{throw r.runOutsideAngular(()=>n.handleError(f)),f}):d}catch(d){throw r.runOutsideAngular(()=>n.handleError(d)),d}}(ge,M,()=>{const Be=ie.injector.get(Mm);return Be.runInitializers(),Be.donePromise.then(()=>(function aE(n){St(n,"Expected localeId to be defined"),"string"==typeof n&&(av=n.toLowerCase().replace(/_/g,"-"))}(ie.injector.get(iy,q_)||q_),this._moduleDoBootstrap(ie),ie))})})}bootstrapModule(a,d=[]){const f=U0({},d);return function DC(n,r,a){const d=new Iy(a);return Promise.resolve(d)}(0,0,a).then(y=>this.bootstrapModuleFactory(y,f))}_moduleDoBootstrap(a){const d=a.injector.get(R_);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!a.instance.ngDoBootstrap)throw new Ye(403,"");a.instance.ngDoBootstrap(d)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ye(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(a){return new(a||n)(ms(qo))},n.\u0275prov=Dt({token:n,factory:n.\u0275fac}),n})();function U0(n,r){return Array.isArray(r)?r.reduce(U0,n):Object.assign(Object.assign({},n),r)}let R_=(()=>{class n{constructor(a,d,f,y,I){this._zone=a,this._injector=d,this._exceptionHandler=f,this._componentFactoryResolver=y,this._initStatus=I,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const M=new J.y(Z=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{Z.next(this._stable),Z.complete()})}),P=new J.y(Z=>{let ie;this._zone.runOutsideAngular(()=>{ie=this._zone.onStable.subscribe(()=>{Vu.assertNotInAngularZone(),jy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,Z.next(!0))})})});const ge=this._zone.onUnstable.subscribe(()=>{Vu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{Z.next(!1)}))});return()=>{ie.unsubscribe(),ge.unsubscribe()}});this.isStable=(0,ye.T)(M,P.pipe((0,Te.B)()))}bootstrap(a,d){if(!this._initStatus.done)throw new Ye(405,"");let f;f=a instanceof Nv?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(f.componentType);const y=function AC(n){return n.isBoundToModule}(f)?void 0:this._injector.get(Am),M=f.create(qo.NULL,[],d||f.selector,y),P=M.location.nativeElement,Z=M.injector.get(P0,null),ie=Z&&M.injector.get(N0);return Z&&ie&&ie.registerApplication(P,Z),M.onDestroy(()=>{this.detachView(M.hostView),Gy(this.components,M),ie&&ie.unregisterApplication(P)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new Ye(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const d=a;this._views.push(d),d.attachToAppRef(this)}detachView(a){const d=a;Gy(this._views,d),d.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(A0,[]).concat(this._bootstrapListeners).forEach(f=>f(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(a){return new(a||n)(ms(Vu),ms(qo),ms(eh),ms(I_),ms(Mm))},n.\u0275prov=Dt({token:n,factory:n.\u0275fac}),n})();function Gy(n,r){const a=n.indexOf(r);a>-1&&n.splice(a,1)}let B0=!0,j0=!1;function OC(){return j0=!0,B0}function kC(){if(j0)throw new Error("Cannot enable prod mode after platform setup.");B0=!1}let FC=(()=>{class n{}return n.__NG_ELEMENT_ID__=LC,n})();function LC(n){return function UC(n,r,a){if(Fr(n)&&!a){const d=on(n.index,r);return new D_(d,d)}return 47&n.type?new D_(r[16],r):null}(sr(),q(),16==(16&n))}class q0{constructor(){}supports(r){return Kc(r)}create(r){return new WC(r)}}const HC=(n,r)=>r;class WC{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||HC}forEachItem(r){let a;for(a=this._itHead;null!==a;a=a._next)r(a)}forEachOperation(r){let a=this._itHead,d=this._removalsHead,f=0,y=null;for(;a||d;){const I=!d||a&&a.currentIndex<K0(d,f,y)?a:d,M=K0(I,f,y),P=I.currentIndex;if(I===d)f--,d=d._nextRemoved;else if(a=a._next,null==I.previousIndex)f++;else{y||(y=[]);const Z=M-f,ie=P-f;if(Z!=ie){for(let Be=0;Be<Z;Be++){const at=Be<y.length?y[Be]:y[Be]=0,Nt=at+Be;ie<=Nt&&Nt<Z&&(y[Be]=at+1)}y[I.previousIndex]=ie-Z}}M!==P&&r(I,M,P)}}forEachPreviousItem(r){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)r(a)}forEachAddedItem(r){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)r(a)}forEachMovedItem(r){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)r(a)}forEachRemovedItem(r){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)r(a)}forEachIdentityChange(r){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)r(a)}diff(r){if(null==r&&(r=[]),!Kc(r))throw new Ye(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let f,y,I,a=this._itHead,d=!1;if(Array.isArray(r)){this.length=r.length;for(let M=0;M<this.length;M++)y=r[M],I=this._trackByFn(M,y),null!==a&&Object.is(a.trackById,I)?(d&&(a=this._verifyReinsertion(a,y,I,M)),Object.is(a.item,y)||this._addIdentityChange(a,y)):(a=this._mismatch(a,y,I,M),d=!0),a=a._next}else f=0,function Nd(n,r){if(Array.isArray(n))for(let a=0;a<n.length;a++)r(n[a]);else{const a=n[Pd()]();let d;for(;!(d=a.next()).done;)r(d.value)}}(r,M=>{I=this._trackByFn(f,M),null!==a&&Object.is(a.trackById,I)?(d&&(a=this._verifyReinsertion(a,M,I,f)),Object.is(a.item,M)||this._addIdentityChange(a,M)):(a=this._mismatch(a,M,I,f),d=!0),a=a._next,f++}),this.length=f;return this._truncate(a),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,a,d,f){let y;return null===r?y=this._itTail:(y=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(r.item,a)||this._addIdentityChange(r,a),this._reinsertAfter(r,y,f)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(r.item,a)||this._addIdentityChange(r,a),this._moveAfter(r,y,f)):r=this._addAfter(new GC(a,d),y,f),r}_verifyReinsertion(r,a,d,f){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==y?r=this._reinsertAfter(y,r._prev,f):r.currentIndex!=f&&(r.currentIndex=f,this._addToMoves(r,f)),r}_truncate(r){for(;null!==r;){const a=r._next;this._addToRemovals(this._unlink(r)),r=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,a,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const f=r._prevRemoved,y=r._nextRemoved;return null===f?this._removalsHead=y:f._nextRemoved=y,null===y?this._removalsTail=f:y._prevRemoved=f,this._insertAfter(r,a,d),this._addToMoves(r,d),r}_moveAfter(r,a,d){return this._unlink(r),this._insertAfter(r,a,d),this._addToMoves(r,d),r}_addAfter(r,a,d){return this._insertAfter(r,a,d),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,a,d){const f=null===a?this._itHead:a._next;return r._next=f,r._prev=a,null===f?this._itTail=r:f._prev=r,null===a?this._itHead=r:a._next=r,null===this._linkedRecords&&(this._linkedRecords=new Z0),this._linkedRecords.put(r),r.currentIndex=d,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const a=r._prev,d=r._next;return null===a?this._itHead=d:a._next=d,null===d?this._itTail=a:d._prev=a,r}_addToMoves(r,a){return r.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Z0),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,a){return r.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class GC{constructor(r,a){this.item=r,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class zC{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,a){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===a||a<=d.currentIndex)&&Object.is(d.trackById,r))return d;return null}remove(r){const a=r._prevDup,d=r._nextDup;return null===a?this._head=d:a._nextDup=d,null===d?this._tail=a:d._prevDup=a,null===this._head}}class Z0{constructor(){this.map=new Map}put(r){const a=r.trackById;let d=this.map.get(a);d||(d=new zC,this.map.set(a,d)),d.add(r)}get(r,a){const f=this.map.get(r);return f?f.get(r,a):null}remove(r){const a=r.trackById;return this.map.get(a).remove(r)&&this.map.delete(a),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function K0(n,r,a){const d=n.previousIndex;if(null===d)return d;let f=0;return a&&d<a.length&&(f=a[d]),d+r+f}class Y0{constructor(){}supports(r){return r instanceof Map||Od(r)}create(){return new qC}}class qC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let a;for(a=this._mapHead;null!==a;a=a._next)r(a)}forEachPreviousItem(r){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)r(a)}forEachChangedItem(r){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)r(a)}forEachAddedItem(r){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)r(a)}forEachRemovedItem(r){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)r(a)}diff(r){if(r){if(!(r instanceof Map||Od(r)))throw new Ye(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(r,(d,f)=>{if(a&&a.key===f)this._maybeAddToChanges(a,d),this._appendAfter=a,a=a._next;else{const y=this._getOrCreateRecordForKey(f,d);a=this._insertBeforeOrAppend(a,y)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let d=a;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,a){if(r){const d=r._prev;return a._next=r,a._prev=d,r._prev=a,d&&(d._next=a),r===this._mapHead&&(this._mapHead=a),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(r,a){if(this._records.has(r)){const f=this._records.get(r);this._maybeAddToChanges(f,a);const y=f._prev,I=f._next;return y&&(y._next=I),I&&(I._prev=y),f._next=null,f._prev=null,f}const d=new ZC(r);return this._records.set(r,d),d.currentValue=a,this._addToAdditions(d),d}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,a){Object.is(a,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=a,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,a){r instanceof Map?r.forEach(a):Object.keys(r).forEach(d=>a(r[d],d))}}class ZC{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Q0(){return new oy([new q0])}let oy=(()=>{class n{constructor(a){this.factories=a}static create(a,d){if(null!=d){const f=d.factories.slice();a=a.concat(f)}return new n(a)}static extend(a){return{provide:n,useFactory:d=>n.create(a,d||Q0()),deps:[[n,new Sn,new Ut]]}}find(a){const d=this.factories.find(f=>f.supports(a));if(null!=d)return d;throw new Ye(901,"")}}return n.\u0275prov=Dt({token:n,providedIn:"root",factory:Q0}),n})();function J0(){return new ay([new Y0])}let ay=(()=>{class n{constructor(a){this.factories=a}static create(a,d){if(d){const f=d.factories.slice();a=a.concat(f)}return new n(a)}static extend(a){return{provide:n,useFactory:d=>n.create(a,d||J0()),deps:[[n,new Sn,new Ut]]}}find(a){const d=this.factories.find(y=>y.supports(a));if(d)return d;throw new Ye(901,"")}}return n.\u0275prov=Dt({token:n,providedIn:"root",factory:J0}),n})();const KC=[new Y0],QC=new oy([new q0]),JC=new ay(KC),XC=k0(null,"core",[{provide:D0,useValue:"unknown"},{provide:L0,deps:[qo]},{provide:N0,deps:[]},{provide:S0,deps:[]}]),ib=[{provide:R_,useClass:R_,deps:[Vu,qo,eh,I_,Mm]},{provide:fw,deps:[Vu],useFactory:function sb(n){let r=[];return n.onStable.subscribe(()=>{for(;r.length;)r.pop()()}),function(a){r.push(a)}}},{provide:Mm,useClass:Mm,deps:[[new Ut,Uy]]},{provide:By,useClass:By,deps:[]},gC,{provide:oy,useFactory:function eb(){return QC},deps:[]},{provide:ay,useFactory:function tb(){return JC},deps:[]},{provide:iy,useFactory:function nb(n){return n||function rb(){return"undefined"!=typeof $localize&&$localize.locale||q_}()},deps:[[new pt(iy),new Ut,new Sn]]},{provide:x0,useValue:"USD"}];let ob=(()=>{class n{constructor(a){}}return n.\u0275fac=function(a){return new(a||n)(ms(R_))},n.\u0275mod=me({type:n}),n.\u0275inj=ot({providers:ib}),n})()},2382:(Yt,Je,j)=>{j.d(Je,{Fj:()=>We,qu:()=>li,u:()=>Jr,sg:()=>Fs,u5:()=>rn,JJ:()=>Mr,JL:()=>ti,wV:()=>Ns,UX:()=>Pi,kI:()=>Ce,_Y:()=>Ui});var _=j(5e3),E=j(9808),J=j(8306),ye=j(4742),Te=j(8421),Le=j(7669),Ve=j(5403),he=j(3268),Pe=j(1810),fe=j(8996),ke=j(4004);let yt=(()=>{class ${constructor(N,q){this._renderer=N,this._elementRef=q,this.onChange=rt=>{},this.onTouched=()=>{}}setProperty(N,q){this._renderer.setProperty(this._elementRef.nativeElement,N,q)}registerOnTouched(N){this.onTouched=N}registerOnChange(N){this.onChange=N}setDisabledState(N){this.setProperty("disabled",N)}}return $.\u0275fac=function(N){return new(N||$)(_.Y36(_.Qsj),_.Y36(_.SBq))},$.\u0275dir=_.lG2({type:$}),$})(),ut=(()=>{class $ extends yt{}return $.\u0275fac=function(){let U;return function(q){return(U||(U=_.n5z($)))(q||$)}}(),$.\u0275dir=_.lG2({type:$,features:[_.qOj]}),$})();const Ye=new _.OlP("NgValueAccessor"),$e={provide:Ye,useExisting:(0,_.Gpc)(()=>We),multi:!0},_t=new _.OlP("CompositionEventMode");let We=(()=>{class $ extends yt{constructor(N,q,rt){super(N,q),this._compositionMode=rt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function it(){const $=(0,E.q)()?(0,E.q)().getUserAgent():"";return/android (\d+)/.test($.toLowerCase())}())}writeValue(N){this.setProperty("value",null==N?"":N)}_handleInput(N){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(N)}_compositionStart(){this._composing=!0}_compositionEnd(N){this._composing=!1,this._compositionMode&&this.onChange(N)}}return $.\u0275fac=function(N){return new(N||$)(_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(_t,8))},$.\u0275dir=_.lG2({type:$,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(N,q){1&N&&_.NdJ("input",function(In){return q._handleInput(In.target.value)})("blur",function(){return q.onTouched()})("compositionstart",function(){return q._compositionStart()})("compositionend",function(In){return q._compositionEnd(In.target.value)})},features:[_._Bn([$e]),_.qOj]}),$})();function be($){return null==$||0===$.length}function Xe($){return null!=$&&"number"==typeof $.length}const At=new _.OlP("NgValidators"),bt=new _.OlP("NgAsyncValidators"),lt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ce{static min(U){return function je($){return U=>{if(be(U.value)||be($))return null;const N=parseFloat(U.value);return!isNaN(N)&&N<$?{min:{min:$,actual:U.value}}:null}}(U)}static max(U){return function tt($){return U=>{if(be(U.value)||be($))return null;const N=parseFloat(U.value);return!isNaN(N)&&N>$?{max:{max:$,actual:U.value}}:null}}(U)}static required(U){return function ct($){return be($.value)?{required:!0}:null}(U)}static requiredTrue(U){return function wt($){return!0===$.value?null:{required:!0}}(U)}static email(U){return function et($){return be($.value)||lt.test($.value)?null:{email:!0}}(U)}static minLength(U){return function Tn($){return U=>be(U.value)||!Xe(U.value)?null:U.value.length<$?{minlength:{requiredLength:$,actualLength:U.value.length}}:null}(U)}static maxLength(U){return function Jt($){return U=>Xe(U.value)&&U.value.length>$?{maxlength:{requiredLength:$,actualLength:U.value.length}}:null}(U)}static pattern(U){return function On($){if(!$)return St;let U,N;return"string"==typeof $?(N="","^"!==$.charAt(0)&&(N+="^"),N+=$,"$"!==$.charAt($.length-1)&&(N+="$"),U=new RegExp(N)):(N=$.toString(),U=$),q=>{if(be(q.value))return null;const rt=q.value;return U.test(rt)?null:{pattern:{requiredPattern:N,actualValue:rt}}}}(U)}static nullValidator(U){return null}static compose(U){return ot(U)}static composeAsync(U){return yn(U)}}function St($){return null}function Zt($){return null!=$}function an($){const U=(0,_.QGY)($)?(0,fe.D)($):$;return(0,_.CqO)(U),U}function wn($){let U={};return $.forEach(N=>{U=null!=N?Object.assign(Object.assign({},U),N):U}),0===Object.keys(U).length?null:U}function gt($,U){return U.map(N=>N($))}function Me($){return $.map(U=>function Dt($){return!$.validate}(U)?U:N=>U.validate(N))}function ot($){if(!$)return null;const U=$.filter(Zt);return 0==U.length?null:function(N){return wn(gt(N,U))}}function _e($){return null!=$?ot(Me($)):null}function yn($){if(!$)return null;const U=$.filter(Zt);return 0==U.length?null:function(N){return function ce(...$){const U=(0,Le.jO)($),{args:N,keys:q}=(0,ye.D)($),rt=new J.y(In=>{const{length:sr}=N;if(!sr)return void In.complete();const Ti=new Array(sr);let gi=sr,Qi=sr;for(let Ms=0;Ms<sr;Ms++){let Io=!1;(0,Te.Xf)(N[Ms]).subscribe(new Ve.Q(In,da=>{Io||(Io=!0,Qi--),Ti[Ms]=da},()=>gi--,void 0,()=>{(!gi||!Io)&&(Qi||In.next(q?(0,Pe.n)(q,Ti):Ti),In.complete())}))}});return U?rt.pipe((0,he.Z)(U)):rt}(gt(N,U).map(an)).pipe((0,ke.U)(wn))}}function Wn($){return null!=$?yn(Me($)):null}function jn($,U){return null===$?[U]:Array.isArray($)?[...$,U]:[$,U]}function qr($){return $._rawValidators}function Ur($){return $._rawAsyncValidators}function yr($){return $?Array.isArray($)?$:[$]:[]}function Rt($,U){return Array.isArray($)?$.includes(U):$===U}function xr($,U){const N=yr(U);return yr($).forEach(rt=>{Rt(N,rt)||N.push(rt)}),N}function tn($,U){return yr(U).filter(N=>!Rt($,N))}class ir{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(U){this._rawValidators=U||[],this._composedValidatorFn=_e(this._rawValidators)}_setAsyncValidators(U){this._rawAsyncValidators=U||[],this._composedAsyncValidatorFn=Wn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(U){this._onDestroyCallbacks.push(U)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(U=>U()),this._onDestroyCallbacks=[]}reset(U){this.control&&this.control.reset(U)}hasError(U,N){return!!this.control&&this.control.hasError(U,N)}getError(U,N){return this.control?this.control.getError(U,N):null}}class vn extends ir{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Nn extends ir{get formDirective(){return null}get path(){return null}}class Or{constructor(U){this._cd=U}is(U){var N,q,rt;return"submitted"===U?!!(null===(N=this._cd)||void 0===N?void 0:N.submitted):!!(null===(rt=null===(q=this._cd)||void 0===q?void 0:q.control)||void 0===rt?void 0:rt[U])}}let Mr=(()=>{class $ extends Or{constructor(N){super(N)}}return $.\u0275fac=function(N){return new(N||$)(_.Y36(vn,2))},$.\u0275dir=_.lG2({type:$,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(N,q){2&N&&_.ekj("ng-untouched",q.is("untouched"))("ng-touched",q.is("touched"))("ng-pristine",q.is("pristine"))("ng-dirty",q.is("dirty"))("ng-valid",q.is("valid"))("ng-invalid",q.is("invalid"))("ng-pending",q.is("pending"))},features:[_.qOj]}),$})(),ti=(()=>{class $ extends Or{constructor(N){super(N)}}return $.\u0275fac=function(N){return new(N||$)(_.Y36(Nn,10))},$.\u0275dir=_.lG2({type:$,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(N,q){2&N&&_.ekj("ng-untouched",q.is("untouched"))("ng-touched",q.is("touched"))("ng-pristine",q.is("pristine"))("ng-dirty",q.is("dirty"))("ng-valid",q.is("valid"))("ng-invalid",q.is("invalid"))("ng-pending",q.is("pending"))("ng-submitted",q.is("submitted"))},features:[_.qOj]}),$})();function cn($,U){we($,U),U.valueAccessor.writeValue($.value),function me($,U){U.valueAccessor.registerOnChange(N=>{$._pendingValue=N,$._pendingChange=!0,$._pendingDirty=!0,"change"===$.updateOn&&K($,U)})}($,U),function ee($,U){const N=(q,rt)=>{U.valueAccessor.writeValue(q),rt&&U.viewToModelUpdate(q)};$.registerOnChange(N),U._registerOnDestroy(()=>{$._unregisterOnChange(N)})}($,U),function le($,U){U.valueAccessor.registerOnTouched(()=>{$._pendingTouched=!0,"blur"===$.updateOn&&$._pendingChange&&K($,U),"submit"!==$.updateOn&&$.markAsTouched()})}($,U),function Se($,U){if(U.valueAccessor.setDisabledState){const N=q=>{U.valueAccessor.setDisabledState(q)};$.registerOnDisabledChange(N),U._registerOnDestroy(()=>{$._unregisterOnDisabledChange(N)})}}($,U)}function hn($,U,N=!0){const q=()=>{};U.valueAccessor&&(U.valueAccessor.registerOnChange(q),U.valueAccessor.registerOnTouched(q)),Fe($,U),$&&(U._invokeOnDestroyCallbacks(),$._registerOnCollectionChange(()=>{}))}function tr($,U){$.forEach(N=>{N.registerOnValidatorChange&&N.registerOnValidatorChange(U)})}function we($,U){const N=qr($);null!==U.validator?$.setValidators(jn(N,U.validator)):"function"==typeof N&&$.setValidators([N]);const q=Ur($);null!==U.asyncValidator?$.setAsyncValidators(jn(q,U.asyncValidator)):"function"==typeof q&&$.setAsyncValidators([q]);const rt=()=>$.updateValueAndValidity();tr(U._rawValidators,rt),tr(U._rawAsyncValidators,rt)}function Fe($,U){let N=!1;if(null!==$){if(null!==U.validator){const rt=qr($);if(Array.isArray(rt)&&rt.length>0){const In=rt.filter(sr=>sr!==U.validator);In.length!==rt.length&&(N=!0,$.setValidators(In))}}if(null!==U.asyncValidator){const rt=Ur($);if(Array.isArray(rt)&&rt.length>0){const In=rt.filter(sr=>sr!==U.asyncValidator);In.length!==rt.length&&(N=!0,$.setAsyncValidators(In))}}}const q=()=>{};return tr(U._rawValidators,q),tr(U._rawAsyncValidators,q),N}function K($,U){$._pendingDirty&&$.markAsDirty(),$.setValue($._pendingValue,{emitModelToViewChange:!1}),U.viewToModelUpdate($._pendingValue),$._pendingChange=!1}function jt($,U){const N=$.indexOf(U);N>-1&&$.splice(N,1)}const oi="VALID",$r="INVALID",zt="PENDING",Ln="DISABLED";function Kr($){return(Bn($)?$.validators:$)||null}function ni($){return Array.isArray($)?_e($):$||null}function fi($,U){return(Bn(U)?U.asyncValidators:$)||null}function Fi($){return Array.isArray($)?Wn($):$||null}function Bn($){return null!=$&&!Array.isArray($)&&"object"==typeof $}const Li=$=>$ instanceof kr,ri=$=>$ instanceof Mi,Yn=$=>$ instanceof ze;function Xi($){return Li($)?$.value:$.getRawValue()}function ws($,U){const N=ri($),q=$.controls;if(!(N?Object.keys(q):q).length)throw new _.vHH(1e3,"");if(!q[U])throw new _.vHH(1001,"")}function mi($,U){ri($),$._forEachChild((q,rt)=>{if(void 0===U[rt])throw new _.vHH(1002,"")})}class di{constructor(U,N){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=U,this._rawAsyncValidators=N,this._composedValidatorFn=ni(this._rawValidators),this._composedAsyncValidatorFn=Fi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(U){this._rawValidators=this._composedValidatorFn=U}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(U){this._rawAsyncValidators=this._composedAsyncValidatorFn=U}get parent(){return this._parent}get valid(){return this.status===oi}get invalid(){return this.status===$r}get pending(){return this.status==zt}get disabled(){return this.status===Ln}get enabled(){return this.status!==Ln}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(U){this._rawValidators=U,this._composedValidatorFn=ni(U)}setAsyncValidators(U){this._rawAsyncValidators=U,this._composedAsyncValidatorFn=Fi(U)}addValidators(U){this.setValidators(xr(U,this._rawValidators))}addAsyncValidators(U){this.setAsyncValidators(xr(U,this._rawAsyncValidators))}removeValidators(U){this.setValidators(tn(U,this._rawValidators))}removeAsyncValidators(U){this.setAsyncValidators(tn(U,this._rawAsyncValidators))}hasValidator(U){return Rt(this._rawValidators,U)}hasAsyncValidator(U){return Rt(this._rawAsyncValidators,U)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(U={}){this.touched=!0,this._parent&&!U.onlySelf&&this._parent.markAsTouched(U)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(U=>U.markAllAsTouched())}markAsUntouched(U={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(N=>{N.markAsUntouched({onlySelf:!0})}),this._parent&&!U.onlySelf&&this._parent._updateTouched(U)}markAsDirty(U={}){this.pristine=!1,this._parent&&!U.onlySelf&&this._parent.markAsDirty(U)}markAsPristine(U={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(N=>{N.markAsPristine({onlySelf:!0})}),this._parent&&!U.onlySelf&&this._parent._updatePristine(U)}markAsPending(U={}){this.status=zt,!1!==U.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!U.onlySelf&&this._parent.markAsPending(U)}disable(U={}){const N=this._parentMarkedDirty(U.onlySelf);this.status=Ln,this.errors=null,this._forEachChild(q=>{q.disable(Object.assign(Object.assign({},U),{onlySelf:!0}))}),this._updateValue(),!1!==U.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},U),{skipPristineCheck:N})),this._onDisabledChange.forEach(q=>q(!0))}enable(U={}){const N=this._parentMarkedDirty(U.onlySelf);this.status=oi,this._forEachChild(q=>{q.enable(Object.assign(Object.assign({},U),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:U.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},U),{skipPristineCheck:N})),this._onDisabledChange.forEach(q=>q(!1))}_updateAncestors(U){this._parent&&!U.onlySelf&&(this._parent.updateValueAndValidity(U),U.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(U){this._parent=U}updateValueAndValidity(U={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===oi||this.status===zt)&&this._runAsyncValidator(U.emitEvent)),!1!==U.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!U.onlySelf&&this._parent.updateValueAndValidity(U)}_updateTreeValidity(U={emitEvent:!0}){this._forEachChild(N=>N._updateTreeValidity(U)),this.updateValueAndValidity({onlySelf:!0,emitEvent:U.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ln:oi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(U){if(this.asyncValidator){this.status=zt,this._hasOwnPendingAsyncValidator=!0;const N=an(this.asyncValidator(this));this._asyncValidationSubscription=N.subscribe(q=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(q,{emitEvent:U})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(U,N={}){this.errors=U,this._updateControlsErrors(!1!==N.emitEvent)}get(U){return function Rr($,U,N){if(null==U||(Array.isArray(U)||(U=U.split(N)),Array.isArray(U)&&0===U.length))return null;let q=$;return U.forEach(rt=>{q=ri(q)?q.controls.hasOwnProperty(rt)?q.controls[rt]:null:Yn(q)&&q.at(rt)||null}),q}(this,U,".")}getError(U,N){const q=N?this.get(N):this;return q&&q.errors?q.errors[U]:null}hasError(U,N){return!!this.getError(U,N)}get root(){let U=this;for(;U._parent;)U=U._parent;return U}_updateControlsErrors(U){this.status=this._calculateStatus(),U&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(U)}_initObservables(){this.valueChanges=new _.vpe,this.statusChanges=new _.vpe}_calculateStatus(){return this._allControlsDisabled()?Ln:this.errors?$r:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(zt)?zt:this._anyControlsHaveStatus($r)?$r:oi}_anyControlsHaveStatus(U){return this._anyControls(N=>N.status===U)}_anyControlsDirty(){return this._anyControls(U=>U.dirty)}_anyControlsTouched(){return this._anyControls(U=>U.touched)}_updatePristine(U={}){this.pristine=!this._anyControlsDirty(),this._parent&&!U.onlySelf&&this._parent._updatePristine(U)}_updateTouched(U={}){this.touched=this._anyControlsTouched(),this._parent&&!U.onlySelf&&this._parent._updateTouched(U)}_isBoxedValue(U){return"object"==typeof U&&null!==U&&2===Object.keys(U).length&&"value"in U&&"disabled"in U}_registerOnCollectionChange(U){this._onCollectionChange=U}_setUpdateStrategy(U){Bn(U)&&null!=U.updateOn&&(this._updateOn=U.updateOn)}_parentMarkedDirty(U){return!U&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class kr extends di{constructor(U=null,N,q){super(Kr(N),fi(q,N)),this._onChange=[],this._pendingChange=!1,this._applyFormState(U),this._setUpdateStrategy(N),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(U,N={}){this.value=this._pendingValue=U,this._onChange.length&&!1!==N.emitModelToViewChange&&this._onChange.forEach(q=>q(this.value,!1!==N.emitViewToModelChange)),this.updateValueAndValidity(N)}patchValue(U,N={}){this.setValue(U,N)}reset(U=null,N={}){this._applyFormState(U),this.markAsPristine(N),this.markAsUntouched(N),this.setValue(this.value,N),this._pendingChange=!1}_updateValue(){}_anyControls(U){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(U){this._onChange.push(U)}_unregisterOnChange(U){jt(this._onChange,U)}registerOnDisabledChange(U){this._onDisabledChange.push(U)}_unregisterOnDisabledChange(U){jt(this._onDisabledChange,U)}_forEachChild(U){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(U){this._isBoxedValue(U)?(this.value=this._pendingValue=U.value,U.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=U}}class Mi extends di{constructor(U,N,q){super(Kr(N),fi(q,N)),this.controls=U,this._initObservables(),this._setUpdateStrategy(N),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(U,N){return this.controls[U]?this.controls[U]:(this.controls[U]=N,N.setParent(this),N._registerOnCollectionChange(this._onCollectionChange),N)}addControl(U,N,q={}){this.registerControl(U,N),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}removeControl(U,N={}){this.controls[U]&&this.controls[U]._registerOnCollectionChange(()=>{}),delete this.controls[U],this.updateValueAndValidity({emitEvent:N.emitEvent}),this._onCollectionChange()}setControl(U,N,q={}){this.controls[U]&&this.controls[U]._registerOnCollectionChange(()=>{}),delete this.controls[U],N&&this.registerControl(U,N),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}contains(U){return this.controls.hasOwnProperty(U)&&this.controls[U].enabled}setValue(U,N={}){mi(this,U),Object.keys(U).forEach(q=>{ws(this,q),this.controls[q].setValue(U[q],{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N)}patchValue(U,N={}){null!=U&&(Object.keys(U).forEach(q=>{this.controls[q]&&this.controls[q].patchValue(U[q],{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N))}reset(U={},N={}){this._forEachChild((q,rt)=>{q.reset(U[rt],{onlySelf:!0,emitEvent:N.emitEvent})}),this._updatePristine(N),this._updateTouched(N),this.updateValueAndValidity(N)}getRawValue(){return this._reduceChildren({},(U,N,q)=>(U[q]=Xi(N),U))}_syncPendingControls(){let U=this._reduceChildren(!1,(N,q)=>!!q._syncPendingControls()||N);return U&&this.updateValueAndValidity({onlySelf:!0}),U}_forEachChild(U){Object.keys(this.controls).forEach(N=>{const q=this.controls[N];q&&U(q,N)})}_setUpControls(){this._forEachChild(U=>{U.setParent(this),U._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(U){for(const N of Object.keys(this.controls)){const q=this.controls[N];if(this.contains(N)&&U(q))return!0}return!1}_reduceValue(){return this._reduceChildren({},(U,N,q)=>((N.enabled||this.disabled)&&(U[q]=N.value),U))}_reduceChildren(U,N){let q=U;return this._forEachChild((rt,In)=>{q=N(q,rt,In)}),q}_allControlsDisabled(){for(const U of Object.keys(this.controls))if(this.controls[U].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class ze extends di{constructor(U,N,q){super(Kr(N),fi(q,N)),this.controls=U,this._initObservables(),this._setUpdateStrategy(N),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(U){return this.controls[U]}push(U,N={}){this.controls.push(U),this._registerControl(U),this.updateValueAndValidity({emitEvent:N.emitEvent}),this._onCollectionChange()}insert(U,N,q={}){this.controls.splice(U,0,N),this._registerControl(N),this.updateValueAndValidity({emitEvent:q.emitEvent})}removeAt(U,N={}){this.controls[U]&&this.controls[U]._registerOnCollectionChange(()=>{}),this.controls.splice(U,1),this.updateValueAndValidity({emitEvent:N.emitEvent})}setControl(U,N,q={}){this.controls[U]&&this.controls[U]._registerOnCollectionChange(()=>{}),this.controls.splice(U,1),N&&(this.controls.splice(U,0,N),this._registerControl(N)),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(U,N={}){mi(this,U),U.forEach((q,rt)=>{ws(this,rt),this.at(rt).setValue(q,{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N)}patchValue(U,N={}){null!=U&&(U.forEach((q,rt)=>{this.at(rt)&&this.at(rt).patchValue(q,{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N))}reset(U=[],N={}){this._forEachChild((q,rt)=>{q.reset(U[rt],{onlySelf:!0,emitEvent:N.emitEvent})}),this._updatePristine(N),this._updateTouched(N),this.updateValueAndValidity(N)}getRawValue(){return this.controls.map(U=>Xi(U))}clear(U={}){this.controls.length<1||(this._forEachChild(N=>N._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:U.emitEvent}))}_syncPendingControls(){let U=this.controls.reduce((N,q)=>!!q._syncPendingControls()||N,!1);return U&&this.updateValueAndValidity({onlySelf:!0}),U}_forEachChild(U){this.controls.forEach((N,q)=>{U(N,q)})}_updateValue(){this.value=this.controls.filter(U=>U.enabled||this.disabled).map(U=>U.value)}_anyControls(U){return this.controls.some(N=>N.enabled&&U(N))}_setUpControls(){this._forEachChild(U=>this._registerControl(U))}_allControlsDisabled(){for(const U of this.controls)if(U.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(U){U.setParent(this),U._registerOnCollectionChange(this._onCollectionChange)}}let Ui=(()=>{class ${}return $.\u0275fac=function(N){return new(N||$)},$.\u0275dir=_.lG2({type:$,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),$})();const lo={provide:Ye,useExisting:(0,_.Gpc)(()=>Ns),multi:!0};let Ns=(()=>{class $ extends ut{writeValue(N){this.setProperty("value",null==N?"":N)}registerOnChange(N){this.onChange=q=>{N(""==q?null:parseFloat(q))}}}return $.\u0275fac=function(){let U;return function(q){return(U||(U=_.n5z($)))(q||$)}}(),$.\u0275dir=_.lG2({type:$,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(N,q){1&N&&_.NdJ("input",function(In){return q.onChange(In.target.value)})("blur",function(){return q.onTouched()})},features:[_._Bn([lo]),_.qOj]}),$})(),$s=(()=>{class ${}return $.\u0275fac=function(N){return new(N||$)},$.\u0275mod=_.oAB({type:$}),$.\u0275inj=_.cJS({}),$})();const ks=new _.OlP("NgModelWithFormControlWarning"),Oo={provide:Nn,useExisting:(0,_.Gpc)(()=>Fs)};let Fs=(()=>{class $ extends Nn{constructor(N,q){super(),this.validators=N,this.asyncValidators=q,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _.vpe,this._setValidators(N),this._setAsyncValidators(q)}ngOnChanges(N){this._checkFormPresent(),N.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Fe(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(N){const q=this.form.get(N.path);return cn(q,N),q.updateValueAndValidity({emitEvent:!1}),this.directives.push(N),q}getControl(N){return this.form.get(N.path)}removeControl(N){hn(N.control||null,N,!1),jt(this.directives,N)}addFormGroup(N){this._setUpFormContainer(N)}removeFormGroup(N){this._cleanUpFormContainer(N)}getFormGroup(N){return this.form.get(N.path)}addFormArray(N){this._setUpFormContainer(N)}removeFormArray(N){this._cleanUpFormContainer(N)}getFormArray(N){return this.form.get(N.path)}updateModel(N,q){this.form.get(N.path).setValue(q)}onSubmit(N){return this.submitted=!0,function Er($,U){$._syncPendingControls(),U.forEach(N=>{const q=N.control;"submit"===q.updateOn&&q._pendingChange&&(N.viewToModelUpdate(q._pendingValue),q._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(N),!1}onReset(){this.resetForm()}resetForm(N){this.form.reset(N),this.submitted=!1}_updateDomValue(){this.directives.forEach(N=>{const q=N.control,rt=this.form.get(N.path);q!==rt&&(hn(q||null,N),Li(rt)&&(cn(rt,N),N.control=rt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(N){const q=this.form.get(N.path);(function ue($,U){we($,U)})(q,N),q.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(N){if(this.form){const q=this.form.get(N.path);q&&function De($,U){return Fe($,U)}(q,N)&&q.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){we(this.form,this),this._oldForm&&Fe(this._oldForm,this)}_checkFormPresent(){}}return $.\u0275fac=function(N){return new(N||$)(_.Y36(At,10),_.Y36(bt,10))},$.\u0275dir=_.lG2({type:$,selectors:[["","formGroup",""]],hostBindings:function(N,q){1&N&&_.NdJ("submit",function(In){return q.onSubmit(In)})("reset",function(){return q.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_._Bn([Oo]),_.qOj,_.TTD]}),$})();const us={provide:vn,useExisting:(0,_.Gpc)(()=>Jr)};let Jr=(()=>{class $ extends vn{constructor(N,q,rt,In,sr){super(),this._ngModelWarningConfig=sr,this._added=!1,this.update=new _.vpe,this._ngModelWarningSent=!1,this._parent=N,this._setValidators(q),this._setAsyncValidators(rt),this.valueAccessor=function xt($,U){if(!U)return null;let N,q,rt;return Array.isArray(U),U.forEach(In=>{In.constructor===We?N=In:function qn($){return Object.getPrototypeOf($.constructor)===ut}(In)?q=In:rt=In}),rt||q||N||null}(0,In)}set isDisabled(N){}ngOnChanges(N){this._added||this._setUpControl(),function Bt($,U){if(!$.hasOwnProperty("model"))return!1;const N=$.model;return!!N.isFirstChange()||!Object.is(U,N.currentValue)}(N,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(N){this.viewModel=N,this.update.emit(N)}get path(){return function Kt($,U){return[...U.path,$]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return $._ngModelWarningSentOnce=!1,$.\u0275fac=function(N){return new(N||$)(_.Y36(Nn,13),_.Y36(At,10),_.Y36(bt,10),_.Y36(Ye,10),_.Y36(ks,8))},$.\u0275dir=_.lG2({type:$,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[_._Bn([us]),_.qOj,_.TTD]}),$})(),Hr=(()=>{class ${}return $.\u0275fac=function(N){return new(N||$)},$.\u0275mod=_.oAB({type:$}),$.\u0275inj=_.cJS({imports:[[$s]]}),$})(),rn=(()=>{class ${}return $.\u0275fac=function(N){return new(N||$)},$.\u0275mod=_.oAB({type:$}),$.\u0275inj=_.cJS({imports:[Hr]}),$})(),Pi=(()=>{class ${static withConfig(N){return{ngModule:$,providers:[{provide:ks,useValue:N.warnOnNgModelWithFormControl}]}}}return $.\u0275fac=function(N){return new(N||$)},$.\u0275mod=_.oAB({type:$}),$.\u0275inj=_.cJS({imports:[Hr]}),$})(),li=(()=>{class ${group(N,q=null){const rt=this._reduceControls(N);let Ti,In=null,sr=null;return null!=q&&(function Xr($){return void 0!==$.asyncValidators||void 0!==$.validators||void 0!==$.updateOn}(q)?(In=null!=q.validators?q.validators:null,sr=null!=q.asyncValidators?q.asyncValidators:null,Ti=null!=q.updateOn?q.updateOn:void 0):(In=null!=q.validator?q.validator:null,sr=null!=q.asyncValidator?q.asyncValidator:null)),new Mi(rt,{asyncValidators:sr,updateOn:Ti,validators:In})}control(N,q,rt){return new kr(N,q,rt)}array(N,q,rt){const In=N.map(sr=>this._createControl(sr));return new ze(In,q,rt)}_reduceControls(N){const q={};return Object.keys(N).forEach(rt=>{q[rt]=this._createControl(N[rt])}),q}_createControl(N){return Li(N)||ri(N)||Yn(N)?N:Array.isArray(N)?this.control(N[0],N.length>1?N[1]:null,N.length>2?N[2]:null):this.control(N)}}return $.\u0275fac=function(N){return new(N||$)},$.\u0275prov=_.Yz7({token:$,factory:$.\u0275fac,providedIn:Pi}),$})()},2313:(Yt,Je,j)=>{j.d(Je,{b2:()=>Rt,H7:()=>we,q6:()=>Ur,se:()=>wt});var _=j(9808),E=j(5e3);class J extends _.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ye extends J{static makeCurrent(){(0,_.HT)(new ye)}onAndCancel(ee,ue,De){return ee.addEventListener(ue,De,!1),()=>{ee.removeEventListener(ue,De,!1)}}dispatchEvent(ee,ue){ee.dispatchEvent(ue)}remove(ee){ee.parentNode&&ee.parentNode.removeChild(ee)}createElement(ee,ue){return(ue=ue||this.getDefaultDocument()).createElement(ee)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ee){return ee.nodeType===Node.ELEMENT_NODE}isShadowRoot(ee){return ee instanceof DocumentFragment}getGlobalEventTarget(ee,ue){return"window"===ue?window:"document"===ue?ee:"body"===ue?ee.body:null}getBaseHref(ee){const ue=function Le(){return Te=Te||document.querySelector("base"),Te?Te.getAttribute("href"):null}();return null==ue?null:function he(K){Ve=Ve||document.createElement("a"),Ve.setAttribute("href",K);const ee=Ve.pathname;return"/"===ee.charAt(0)?ee:`/${ee}`}(ue)}resetBaseElement(){Te=null}getUserAgent(){return window.navigator.userAgent}getCookie(ee){return(0,_.Mx)(document.cookie,ee)}}let Ve,Te=null;const Pe=new E.OlP("TRANSITION_ID"),fe=[{provide:E.ip1,useFactory:function ce(K,ee,ue){return()=>{ue.get(E.CZH).donePromise.then(()=>{const De=(0,_.q)(),Ge=ee.querySelectorAll(`style[ng-transition="${K}"]`);for(let Vt=0;Vt<Ge.length;Vt++)De.remove(Ge[Vt])})}},deps:[Pe,_.K0,E.zs3],multi:!0}];class ke{static init(){(0,E.VLi)(new ke)}addToWindow(ee){E.dqk.getAngularTestability=(De,Ge=!0)=>{const Vt=ee.findTestabilityInTree(De,Ge);if(null==Vt)throw new Error("Could not find testability for element.");return Vt},E.dqk.getAllAngularTestabilities=()=>ee.getAllTestabilities(),E.dqk.getAllAngularRootElements=()=>ee.getAllRootElements(),E.dqk.frameworkStabilizers||(E.dqk.frameworkStabilizers=[]),E.dqk.frameworkStabilizers.push(De=>{const Ge=E.dqk.getAllAngularTestabilities();let Vt=Ge.length,Bt=!1;const qn=function(Er){Bt=Bt||Er,Vt--,0==Vt&&De(Bt)};Ge.forEach(function(Er){Er.whenStable(qn)})})}findTestabilityInTree(ee,ue,De){if(null==ue)return null;const Ge=ee.getTestability(ue);return null!=Ge?Ge:De?(0,_.q)().isShadowRoot(ue)?this.findTestabilityInTree(ee,ue.host,!0):this.findTestabilityInTree(ee,ue.parentElement,!0):null}}let yt=(()=>{class K{build(){return new XMLHttpRequest}}return K.\u0275fac=function(ue){return new(ue||K)},K.\u0275prov=E.Yz7({token:K,factory:K.\u0275fac}),K})();const ut=new E.OlP("EventManagerPlugins");let Ye=(()=>{class K{constructor(ue,De){this._zone=De,this._eventNameToPlugin=new Map,ue.forEach(Ge=>Ge.manager=this),this._plugins=ue.slice().reverse()}addEventListener(ue,De,Ge){return this._findPluginFor(De).addEventListener(ue,De,Ge)}addGlobalEventListener(ue,De,Ge){return this._findPluginFor(De).addGlobalEventListener(ue,De,Ge)}getZone(){return this._zone}_findPluginFor(ue){const De=this._eventNameToPlugin.get(ue);if(De)return De;const Ge=this._plugins;for(let Vt=0;Vt<Ge.length;Vt++){const Bt=Ge[Vt];if(Bt.supports(ue))return this._eventNameToPlugin.set(ue,Bt),Bt}throw new Error(`No event manager plugin found for event ${ue}`)}}return K.\u0275fac=function(ue){return new(ue||K)(E.LFG(ut),E.LFG(E.R0b))},K.\u0275prov=E.Yz7({token:K,factory:K.\u0275fac}),K})();class Ct{constructor(ee){this._doc=ee}addGlobalEventListener(ee,ue,De){const Ge=(0,_.q)().getGlobalEventTarget(this._doc,ee);if(!Ge)throw new Error(`Unsupported event target ${Ge} for event ${ue}`);return this.addEventListener(Ge,ue,De)}}let Ke=(()=>{class K{constructor(){this._stylesSet=new Set}addStyles(ue){const De=new Set;ue.forEach(Ge=>{this._stylesSet.has(Ge)||(this._stylesSet.add(Ge),De.add(Ge))}),this.onStylesAdded(De)}onStylesAdded(ue){}getAllStyles(){return Array.from(this._stylesSet)}}return K.\u0275fac=function(ue){return new(ue||K)},K.\u0275prov=E.Yz7({token:K,factory:K.\u0275fac}),K})(),$e=(()=>{class K extends Ke{constructor(ue){super(),this._doc=ue,this._hostNodes=new Map,this._hostNodes.set(ue.head,[])}_addStylesToHost(ue,De,Ge){ue.forEach(Vt=>{const Bt=this._doc.createElement("style");Bt.textContent=Vt,Ge.push(De.appendChild(Bt))})}addHost(ue){const De=[];this._addStylesToHost(this._stylesSet,ue,De),this._hostNodes.set(ue,De)}removeHost(ue){const De=this._hostNodes.get(ue);De&&De.forEach(it),this._hostNodes.delete(ue)}onStylesAdded(ue){this._hostNodes.forEach((De,Ge)=>{this._addStylesToHost(ue,Ge,De)})}ngOnDestroy(){this._hostNodes.forEach(ue=>ue.forEach(it))}}return K.\u0275fac=function(ue){return new(ue||K)(E.LFG(_.K0))},K.\u0275prov=E.Yz7({token:K,factory:K.\u0275fac}),K})();function it(K){(0,_.q)().remove(K)}const _t={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},We=/%COMP%/g;function je(K,ee,ue){for(let De=0;De<ee.length;De++){let Ge=ee[De];Array.isArray(Ge)?je(K,Ge,ue):(Ge=Ge.replace(We,K),ue.push(Ge))}return ue}function tt(K){return ee=>{if("__ngUnwrap__"===ee)return K;!1===K(ee)&&(ee.preventDefault(),ee.returnValue=!1)}}let wt=(()=>{class K{constructor(ue,De,Ge){this.eventManager=ue,this.sharedStylesHost=De,this.appId=Ge,this.rendererByCompId=new Map,this.defaultRenderer=new et(ue)}createRenderer(ue,De){if(!ue||!De)return this.defaultRenderer;switch(De.encapsulation){case E.ifc.Emulated:{let Ge=this.rendererByCompId.get(De.id);return Ge||(Ge=new On(this.eventManager,this.sharedStylesHost,De,this.appId),this.rendererByCompId.set(De.id,Ge)),Ge.applyToHost(ue),Ge}case 1:case E.ifc.ShadowDom:return new St(this.eventManager,this.sharedStylesHost,ue,De);default:if(!this.rendererByCompId.has(De.id)){const Ge=je(De.id,De.styles,[]);this.sharedStylesHost.addStyles(Ge),this.rendererByCompId.set(De.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return K.\u0275fac=function(ue){return new(ue||K)(E.LFG(Ye),E.LFG($e),E.LFG(E.AFp))},K.\u0275prov=E.Yz7({token:K,factory:K.\u0275fac}),K})();class et{constructor(ee){this.eventManager=ee,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ee,ue){return ue?document.createElementNS(_t[ue]||ue,ee):document.createElement(ee)}createComment(ee){return document.createComment(ee)}createText(ee){return document.createTextNode(ee)}appendChild(ee,ue){ee.appendChild(ue)}insertBefore(ee,ue,De){ee&&ee.insertBefore(ue,De)}removeChild(ee,ue){ee&&ee.removeChild(ue)}selectRootElement(ee,ue){let De="string"==typeof ee?document.querySelector(ee):ee;if(!De)throw new Error(`The selector "${ee}" did not match any elements`);return ue||(De.textContent=""),De}parentNode(ee){return ee.parentNode}nextSibling(ee){return ee.nextSibling}setAttribute(ee,ue,De,Ge){if(Ge){ue=Ge+":"+ue;const Vt=_t[Ge];Vt?ee.setAttributeNS(Vt,ue,De):ee.setAttribute(ue,De)}else ee.setAttribute(ue,De)}removeAttribute(ee,ue,De){if(De){const Ge=_t[De];Ge?ee.removeAttributeNS(Ge,ue):ee.removeAttribute(`${De}:${ue}`)}else ee.removeAttribute(ue)}addClass(ee,ue){ee.classList.add(ue)}removeClass(ee,ue){ee.classList.remove(ue)}setStyle(ee,ue,De,Ge){Ge&(E.JOm.DashCase|E.JOm.Important)?ee.style.setProperty(ue,De,Ge&E.JOm.Important?"important":""):ee.style[ue]=De}removeStyle(ee,ue,De){De&E.JOm.DashCase?ee.style.removeProperty(ue):ee.style[ue]=""}setProperty(ee,ue,De){ee[ue]=De}setValue(ee,ue){ee.nodeValue=ue}listen(ee,ue,De){return"string"==typeof ee?this.eventManager.addGlobalEventListener(ee,ue,tt(De)):this.eventManager.addEventListener(ee,ue,tt(De))}}class On extends et{constructor(ee,ue,De,Ge){super(ee),this.component=De;const Vt=je(Ge+"-"+De.id,De.styles,[]);ue.addStyles(Vt),this.contentAttr=function lt(K){return"_ngcontent-%COMP%".replace(We,K)}(Ge+"-"+De.id),this.hostAttr=function Ce(K){return"_nghost-%COMP%".replace(We,K)}(Ge+"-"+De.id)}applyToHost(ee){super.setAttribute(ee,this.hostAttr,"")}createElement(ee,ue){const De=super.createElement(ee,ue);return super.setAttribute(De,this.contentAttr,""),De}}class St extends et{constructor(ee,ue,De,Ge){super(ee),this.sharedStylesHost=ue,this.hostEl=De,this.shadowRoot=De.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Vt=je(Ge.id,Ge.styles,[]);for(let Bt=0;Bt<Vt.length;Bt++){const qn=document.createElement("style");qn.textContent=Vt[Bt],this.shadowRoot.appendChild(qn)}}nodeOrShadowRoot(ee){return ee===this.hostEl?this.shadowRoot:ee}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ee,ue){return super.appendChild(this.nodeOrShadowRoot(ee),ue)}insertBefore(ee,ue,De){return super.insertBefore(this.nodeOrShadowRoot(ee),ue,De)}removeChild(ee,ue){return super.removeChild(this.nodeOrShadowRoot(ee),ue)}parentNode(ee){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ee)))}}let Zt=(()=>{class K extends Ct{constructor(ue){super(ue)}supports(ue){return!0}addEventListener(ue,De,Ge){return ue.addEventListener(De,Ge,!1),()=>this.removeEventListener(ue,De,Ge)}removeEventListener(ue,De,Ge){return ue.removeEventListener(De,Ge)}}return K.\u0275fac=function(ue){return new(ue||K)(E.LFG(_.K0))},K.\u0275prov=E.Yz7({token:K,factory:K.\u0275fac}),K})();const an=["alt","control","meta","shift"],gt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Dt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Me={alt:K=>K.altKey,control:K=>K.ctrlKey,meta:K=>K.metaKey,shift:K=>K.shiftKey};let ot=(()=>{class K extends Ct{constructor(ue){super(ue)}supports(ue){return null!=K.parseEventName(ue)}addEventListener(ue,De,Ge){const Vt=K.parseEventName(De),Bt=K.eventCallback(Vt.fullKey,Ge,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,_.q)().onAndCancel(ue,Vt.domEventName,Bt))}static parseEventName(ue){const De=ue.toLowerCase().split("."),Ge=De.shift();if(0===De.length||"keydown"!==Ge&&"keyup"!==Ge)return null;const Vt=K._normalizeKey(De.pop());let Bt="";if(an.forEach(Er=>{const xt=De.indexOf(Er);xt>-1&&(De.splice(xt,1),Bt+=Er+".")}),Bt+=Vt,0!=De.length||0===Vt.length)return null;const qn={};return qn.domEventName=Ge,qn.fullKey=Bt,qn}static getEventFullKey(ue){let De="",Ge=function _e(K){let ee=K.key;if(null==ee){if(ee=K.keyIdentifier,null==ee)return"Unidentified";ee.startsWith("U+")&&(ee=String.fromCharCode(parseInt(ee.substring(2),16)),3===K.location&&Dt.hasOwnProperty(ee)&&(ee=Dt[ee]))}return gt[ee]||ee}(ue);return Ge=Ge.toLowerCase()," "===Ge?Ge="space":"."===Ge&&(Ge="dot"),an.forEach(Vt=>{Vt!=Ge&&Me[Vt](ue)&&(De+=Vt+".")}),De+=Ge,De}static eventCallback(ue,De,Ge){return Vt=>{K.getEventFullKey(Vt)===ue&&Ge.runGuarded(()=>De(Vt))}}static _normalizeKey(ue){return"esc"===ue?"escape":ue}}return K.\u0275fac=function(ue){return new(ue||K)(E.LFG(_.K0))},K.\u0275prov=E.Yz7({token:K,factory:K.\u0275fac}),K})();const Ur=(0,E.eFA)(E._c5,"browser",[{provide:E.Lbi,useValue:_.bD},{provide:E.g9A,useValue:function yn(){ye.makeCurrent(),ke.init()},multi:!0},{provide:_.K0,useFactory:function jn(){return(0,E.RDi)(document),document},deps:[]}]),yr=[{provide:E.zSh,useValue:"root"},{provide:E.qLn,useFactory:function Wn(){return new E.qLn},deps:[]},{provide:ut,useClass:Zt,multi:!0,deps:[_.K0,E.R0b,E.Lbi]},{provide:ut,useClass:ot,multi:!0,deps:[_.K0]},{provide:wt,useClass:wt,deps:[Ye,$e,E.AFp]},{provide:E.FYo,useExisting:wt},{provide:Ke,useExisting:$e},{provide:$e,useClass:$e,deps:[_.K0]},{provide:E.dDg,useClass:E.dDg,deps:[E.R0b]},{provide:Ye,useClass:Ye,deps:[ut,E.R0b]},{provide:_.JF,useClass:yt,deps:[]}];let Rt=(()=>{class K{constructor(ue){if(ue)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(ue){return{ngModule:K,providers:[{provide:E.AFp,useValue:ue.appId},{provide:Pe,useExisting:E.AFp},fe]}}}return K.\u0275fac=function(ue){return new(ue||K)(E.LFG(K,12))},K.\u0275mod=E.oAB({type:K}),K.\u0275inj=E.cJS({providers:yr,imports:[_.ez,E.hGG]}),K})();"undefined"!=typeof window&&window;let we=(()=>{class K{}return K.\u0275fac=function(ue){return new(ue||K)},K.\u0275prov=E.Yz7({token:K,factory:function(ue){let De=null;return De=ue?new(ue||K):E.LFG(me),De},providedIn:"root"}),K})(),me=(()=>{class K extends we{constructor(ue){super(),this._doc=ue}sanitize(ue,De){if(null==De)return null;switch(ue){case E.q3G.NONE:return De;case E.q3G.HTML:return(0,E.qzn)(De,"HTML")?(0,E.z3N)(De):(0,E.EiD)(this._doc,String(De)).toString();case E.q3G.STYLE:return(0,E.qzn)(De,"Style")?(0,E.z3N)(De):De;case E.q3G.SCRIPT:if((0,E.qzn)(De,"Script"))return(0,E.z3N)(De);throw new Error("unsafe value used in a script context");case E.q3G.URL:return(0,E.yhl)(De),(0,E.qzn)(De,"URL")?(0,E.z3N)(De):(0,E.mCW)(String(De));case E.q3G.RESOURCE_URL:if((0,E.qzn)(De,"ResourceURL"))return(0,E.z3N)(De);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${ue} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(ue){return(0,E.JVY)(ue)}bypassSecurityTrustStyle(ue){return(0,E.L6k)(ue)}bypassSecurityTrustScript(ue){return(0,E.eBb)(ue)}bypassSecurityTrustUrl(ue){return(0,E.LAX)(ue)}bypassSecurityTrustResourceUrl(ue){return(0,E.pB0)(ue)}}return K.\u0275fac=function(ue){return new(ue||K)(E.LFG(_.K0))},K.\u0275prov=E.Yz7({token:K,factory:function(ue){let De=null;return De=ue?new ue:function Fe(K){return new me(K.get(_.K0))}(E.LFG(E.zs3)),De},providedIn:"root"}),K})()},1009:(Yt,Je,j)=>{j.d(Je,{F0:()=>Us,rH:()=>eo,yS:()=>Jo,Bz:()=>tl,lC:()=>xe});var _=j(5e3),E=j(7579);class J extends E.x{constructor(A){super(),this._value=A}get value(){return this.getValue()}_subscribe(A){const T=super._subscribe(A);return!T.closed&&A.next(this._value),T}getValue(){const{hasError:A,thrownError:T,_value:k}=this;if(A)throw T;return this._throwIfClosed(),k}next(A){super.next(this._value=A)}}var ye=j(8306),Te=j(4742),Le=j(8996),Ve=j(4671),he=j(3268),Pe=j(7669),ce=j(1810),fe=j(5403),ke=j(9672);function Ye(x,A,T){x?(0,ke.f)(T,x,A):A()}var Ct=j(8421);function Ke(x){return new ye.y(A=>{(0,Ct.Xf)(x()).subscribe(A)})}var $e=j(727),it=j(4482);function _t(){return(0,it.e)((x,A)=>{let T=null;x._refCount++;const k=new fe.Q(A,void 0,void 0,void 0,()=>{if(!x||x._refCount<=0||0<--x._refCount)return void(T=null);const W=x._connection,oe=T;T=null,W&&(!oe||W===oe)&&W.unsubscribe(),A.unsubscribe()});x.subscribe(k),k.closed||(T=x.connect())})}class We extends ye.y{constructor(A,T){super(),this.source=A,this.subjectFactory=T,this._subject=null,this._refCount=0,this._connection=null,(0,it.A)(A)&&(this.lift=A.lift)}_subscribe(A){return this.getSubject().subscribe(A)}getSubject(){const A=this._subject;return(!A||A.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:A}=this;this._subject=this._connection=null,null==A||A.unsubscribe()}connect(){let A=this._connection;if(!A){A=this._connection=new $e.w0;const T=this.getSubject();A.add(this.source.subscribe(new fe.Q(T,void 0,()=>{this._teardown(),T.complete()},k=>{this._teardown(),T.error(k)},()=>this._teardown()))),A.closed&&(this._connection=null,A=$e.w0.EMPTY)}return A}refCount(){return _t()(this)}}var be=j(9646),Xe=j(6805),At=j(7272),bt=j(515);function lt(x){return(0,it.e)((A,T)=>{let oe,k=null,W=!1;k=A.subscribe(new fe.Q(T,void 0,void 0,Ee=>{oe=(0,Ct.Xf)(x(Ee,lt(x)(A))),k?(k.unsubscribe(),k=null,oe.subscribe(T)):W=!0})),W&&(k.unsubscribe(),k=null,oe.subscribe(T))})}var Ce=j(5577),je=j(576);function tt(x,A){return(0,je.m)(A)?(0,Ce.z)(x,A,1):(0,Ce.z)(x,1)}var ct=j(9300);function wt(x){return x<=0?()=>bt.E:(0,it.e)((A,T)=>{let k=[];A.subscribe(new fe.Q(T,W=>{k.push(W),x<k.length&&k.shift()},()=>{for(const W of k)T.next(W);T.complete()},void 0,()=>{k=null}))})}var et=j(8068),Tn=j(6590),St=j(4004),Zt=j(3900),an=j(5698),wn=j(8675),gt=j(5026),Dt=j(590),Me=j(8505),ot=j(8189),_e=j(9808);class yn{constructor(A,T){this.id=A,this.url=T}}class Wn extends yn{constructor(A,T,k="imperative",W=null){super(A,T),this.navigationTrigger=k,this.restoredState=W}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class jn extends yn{constructor(A,T,k){super(A,T),this.urlAfterRedirects=k}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qr extends yn{constructor(A,T,k){super(A,T),this.reason=k}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ur extends yn{constructor(A,T,k){super(A,T),this.error=k}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class yr extends yn{constructor(A,T,k,W){super(A,T),this.urlAfterRedirects=k,this.state=W}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rt extends yn{constructor(A,T,k,W){super(A,T),this.urlAfterRedirects=k,this.state=W}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xr extends yn{constructor(A,T,k,W,oe){super(A,T),this.urlAfterRedirects=k,this.state=W,this.shouldActivate=oe}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class tn extends yn{constructor(A,T,k,W){super(A,T),this.urlAfterRedirects=k,this.state=W}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ir extends yn{constructor(A,T,k,W){super(A,T),this.urlAfterRedirects=k,this.state=W}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vn{constructor(A){this.route=A}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Nn{constructor(A){this.route=A}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Or{constructor(A){this.snapshot=A}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gr{constructor(A){this.snapshot=A}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jr{constructor(A){this.snapshot=A}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mr{constructor(A){this.snapshot=A}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ti{constructor(A,T,k){this.routerEvent=A,this.position=T,this.anchor=k}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const sn="primary";class Vn{constructor(A){this.params=A||{}}has(A){return Object.prototype.hasOwnProperty.call(this.params,A)}get(A){if(this.has(A)){const T=this.params[A];return Array.isArray(T)?T[0]:T}return null}getAll(A){if(this.has(A)){const T=this.params[A];return Array.isArray(T)?T:[T]}return[]}get keys(){return Object.keys(this.params)}}function un(x){return new Vn(x)}const nn="ngNavigationCancelingError";function Dr(x){const A=Error("NavigationCancelingError: "+x);return A[nn]=!0,A}function Dn(x,A,T){const k=T.path.split("/");if(k.length>x.length||"full"===T.pathMatch&&(A.hasChildren()||k.length<x.length))return null;const W={};for(let oe=0;oe<k.length;oe++){const Ee=k[oe],Ne=x[oe];if(Ee.startsWith(":"))W[Ee.substring(1)]=Ne;else if(Ee!==Ne.path)return null}return{consumed:x.slice(0,k.length),posParams:W}}function dr(x,A){const T=x?Object.keys(x):void 0,k=A?Object.keys(A):void 0;if(!T||!k||T.length!=k.length)return!1;let W;for(let oe=0;oe<T.length;oe++)if(W=T[oe],!ar(x[W],A[W]))return!1;return!0}function ar(x,A){if(Array.isArray(x)&&Array.isArray(A)){if(x.length!==A.length)return!1;const T=[...x].sort(),k=[...A].sort();return T.every((W,oe)=>k[oe]===W)}return x===A}function En(x){return Array.prototype.concat.apply([],x)}function hr(x){return x.length>0?x[x.length-1]:null}function cr(x,A){for(const T in x)x.hasOwnProperty(T)&&A(x[T],T)}function Ot(x){return(0,_.CqO)(x)?x:(0,_.QGY)(x)?(0,Le.D)(Promise.resolve(x)):(0,be.of)(x)}const Kt={exact:function Se(x,A,T){if(!Ge(x.segments,A.segments)||!le(x.segments,A.segments,T)||x.numberOfChildren!==A.numberOfChildren)return!1;for(const k in A.children)if(!x.children[k]||!Se(x.children[k],A.children[k],T))return!1;return!0},subset:Fe},cn={exact:function tr(x,A){return dr(x,A)},subset:function we(x,A){return Object.keys(A).length<=Object.keys(x).length&&Object.keys(A).every(T=>ar(x[T],A[T]))},ignored:()=>!0};function hn(x,A,T){return Kt[T.paths](x.root,A.root,T.matrixParams)&&cn[T.queryParams](x.queryParams,A.queryParams)&&!("exact"===T.fragment&&x.fragment!==A.fragment)}function Fe(x,A,T){return me(x,A,A.segments,T)}function me(x,A,T,k){if(x.segments.length>T.length){const W=x.segments.slice(0,T.length);return!(!Ge(W,T)||A.hasChildren()||!le(W,T,k))}if(x.segments.length===T.length){if(!Ge(x.segments,T)||!le(x.segments,T,k))return!1;for(const W in A.children)if(!x.children[W]||!Fe(x.children[W],A.children[W],k))return!1;return!0}{const W=T.slice(0,x.segments.length),oe=T.slice(x.segments.length);return!!(Ge(x.segments,W)&&le(x.segments,W,k)&&x.children[sn])&&me(x.children[sn],A,oe,k)}}function le(x,A,T){return A.every((k,W)=>cn[T](x[W].parameters,k.parameters))}class K{constructor(A,T,k){this.root=A,this.queryParams=T,this.fragment=k}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=un(this.queryParams)),this._queryParamMap}toString(){return Er.serialize(this)}}class ee{constructor(A,T){this.segments=A,this.children=T,this.parent=null,cr(T,(k,W)=>k.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xt(this)}}class ue{constructor(A,T){this.path=A,this.parameters=T}get parameterMap(){return this._parameterMap||(this._parameterMap=un(this.parameters)),this._parameterMap}toString(){return Rr(this)}}function Ge(x,A){return x.length===A.length&&x.every((T,k)=>T.path===A[k].path)}class Bt{}class qn{parse(A){const T=new Xi(A);return new K(T.parseRootSegment(),T.parseQueryParams(),T.parseFragment())}serialize(A){const T=`/${jt(A.root,!0)}`,k=function ni(x){const A=Object.keys(x).map(T=>{const k=x[T];return Array.isArray(k)?k.map(W=>`${Un(T)}=${Un(W)}`).join("&"):`${Un(T)}=${Un(k)}`}).filter(T=>!!T);return A.length?`?${A.join("&")}`:""}(A.queryParams);return`${T}${k}${"string"==typeof A.fragment?`#${function oi(x){return encodeURI(x)}(A.fragment)}`:""}`}}const Er=new qn;function xt(x){return x.segments.map(A=>Rr(A)).join("/")}function jt(x,A){if(!x.hasChildren())return xt(x);if(A){const T=x.children[sn]?jt(x.children[sn],!1):"",k=[];return cr(x.children,(W,oe)=>{oe!==sn&&k.push(`${oe}:${jt(W,!1)}`)}),k.length>0?`${T}(${k.join("//")})`:T}{const T=function Vt(x,A){let T=[];return cr(x.children,(k,W)=>{W===sn&&(T=T.concat(A(k,W)))}),cr(x.children,(k,W)=>{W!==sn&&(T=T.concat(A(k,W)))}),T}(x,(k,W)=>W===sn?[jt(x.children[sn],!1)]:[`${W}:${jt(k,!1)}`]);return 1===Object.keys(x.children).length&&null!=x.children[sn]?`${xt(x)}/${T[0]}`:`${xt(x)}/(${T.join("//")})`}}function kn(x){return encodeURIComponent(x).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Un(x){return kn(x).replace(/%3B/gi,";")}function $r(x){return kn(x).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zt(x){return decodeURIComponent(x)}function Ln(x){return zt(x.replace(/\+/g,"%20"))}function Rr(x){return`${$r(x.path)}${function Kr(x){return Object.keys(x).map(A=>`;${$r(A)}=${$r(x[A])}`).join("")}(x.parameters)}`}const fi=/^[^\/()?;=#]+/;function Fi(x){const A=x.match(fi);return A?A[0]:""}const Bn=/^[^=?&#]+/,ri=/^[^&#]+/;class Xi{constructor(A){this.url=A,this.remaining=A}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ee([],{}):new ee([],this.parseChildren())}parseQueryParams(){const A={};if(this.consumeOptional("?"))do{this.parseQueryParam(A)}while(this.consumeOptional("&"));return A}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const A=[];for(this.peekStartsWith("(")||A.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),A.push(this.parseSegment());let T={};this.peekStartsWith("/(")&&(this.capture("/"),T=this.parseParens(!0));let k={};return this.peekStartsWith("(")&&(k=this.parseParens(!1)),(A.length>0||Object.keys(T).length>0)&&(k[sn]=new ee(A,T)),k}parseSegment(){const A=Fi(this.remaining);if(""===A&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(A),new ue(zt(A),this.parseMatrixParams())}parseMatrixParams(){const A={};for(;this.consumeOptional(";");)this.parseParam(A);return A}parseParam(A){const T=Fi(this.remaining);if(!T)return;this.capture(T);let k="";if(this.consumeOptional("=")){const W=Fi(this.remaining);W&&(k=W,this.capture(k))}A[zt(T)]=zt(k)}parseQueryParam(A){const T=function Li(x){const A=x.match(Bn);return A?A[0]:""}(this.remaining);if(!T)return;this.capture(T);let k="";if(this.consumeOptional("=")){const Ee=function Yn(x){const A=x.match(ri);return A?A[0]:""}(this.remaining);Ee&&(k=Ee,this.capture(k))}const W=Ln(T),oe=Ln(k);if(A.hasOwnProperty(W)){let Ee=A[W];Array.isArray(Ee)||(Ee=[Ee],A[W]=Ee),Ee.push(oe)}else A[W]=oe}parseParens(A){const T={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const k=Fi(this.remaining),W=this.remaining[k.length];if("/"!==W&&")"!==W&&";"!==W)throw new Error(`Cannot parse url '${this.url}'`);let oe;k.indexOf(":")>-1?(oe=k.substr(0,k.indexOf(":")),this.capture(oe),this.capture(":")):A&&(oe=sn);const Ee=this.parseChildren();T[oe]=1===Object.keys(Ee).length?Ee[sn]:new ee([],Ee),this.consumeOptional("//")}return T}peekStartsWith(A){return this.remaining.startsWith(A)}consumeOptional(A){return!!this.peekStartsWith(A)&&(this.remaining=this.remaining.substring(A.length),!0)}capture(A){if(!this.consumeOptional(A))throw new Error(`Expected "${A}".`)}}class ws{constructor(A){this._root=A}get root(){return this._root.value}parent(A){const T=this.pathFromRoot(A);return T.length>1?T[T.length-2]:null}children(A){const T=mi(A,this._root);return T?T.children.map(k=>k.value):[]}firstChild(A){const T=mi(A,this._root);return T&&T.children.length>0?T.children[0].value:null}siblings(A){const T=di(A,this._root);return T.length<2?[]:T[T.length-2].children.map(W=>W.value).filter(W=>W!==A)}pathFromRoot(A){return di(A,this._root).map(T=>T.value)}}function mi(x,A){if(x===A.value)return A;for(const T of A.children){const k=mi(x,T);if(k)return k}return null}function di(x,A){if(x===A.value)return[A];for(const T of A.children){const k=di(x,T);if(k.length)return k.unshift(A),k}return[]}class kr{constructor(A,T){this.value=A,this.children=T}toString(){return`TreeNode(${this.value})`}}function Mi(x){const A={};return x&&x.children.forEach(T=>A[T.value.outlet]=T),A}class ze extends ws{constructor(A,T){super(A),this.snapshot=T,Fr(this,A)}toString(){return this.snapshot.toString()}}function Ue(x,A){const T=function Qe(x,A){const Ee=new Zn([],{},{},"",{},sn,A,null,x.root,-1,{});return new wi("",new kr(Ee,[]))}(x,A),k=new J([new ue("",{})]),W=new J({}),oe=new J({}),Ee=new J({}),Ne=new J(""),Et=new It(k,W,Ee,Ne,oe,sn,A,T.root);return Et.snapshot=T.root,new ze(new kr(Et,[]),T)}class It{constructor(A,T,k,W,oe,Ee,Ne,Et){this.url=A,this.params=T,this.queryParams=k,this.fragment=W,this.data=oe,this.outlet=Ee,this.component=Ne,this._futureSnapshot=Et}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,St.U)(A=>un(A)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,St.U)(A=>un(A)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Wt(x,A="emptyOnly"){const T=x.pathFromRoot;let k=0;if("always"!==A)for(k=T.length-1;k>=1;){const W=T[k],oe=T[k-1];if(W.routeConfig&&""===W.routeConfig.path)k--;else{if(oe.component)break;k--}}return function ln(x){return x.reduce((A,T)=>({params:Object.assign(Object.assign({},A.params),T.params),data:Object.assign(Object.assign({},A.data),T.data),resolve:Object.assign(Object.assign({},A.resolve),T._resolvedData)}),{params:{},data:{},resolve:{}})}(T.slice(k))}class Zn{constructor(A,T,k,W,oe,Ee,Ne,Et,bn,rr,Fn){this.url=A,this.params=T,this.queryParams=k,this.fragment=W,this.data=oe,this.outlet=Ee,this.component=Ne,this.routeConfig=Et,this._urlSegment=bn,this._lastPathIndex=rr,this._resolve=Fn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=un(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=un(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(k=>k.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class wi extends ws{constructor(A,T){super(T),this.url=A,Fr(this,T)}toString(){return Ir(this._root)}}function Fr(x,A){A.value._routerState=x,A.children.forEach(T=>Fr(x,T))}function Ir(x){const A=x.children.length>0?` { ${x.children.map(Ir).join(", ")} } `:"";return`${x.value}${A}`}function Qr(x){if(x.snapshot){const A=x.snapshot,T=x._futureSnapshot;x.snapshot=T,dr(A.queryParams,T.queryParams)||x.queryParams.next(T.queryParams),A.fragment!==T.fragment&&x.fragment.next(T.fragment),dr(A.params,T.params)||x.params.next(T.params),function Ar(x,A){if(x.length!==A.length)return!1;for(let T=0;T<x.length;++T)if(!dr(x[T],A[T]))return!1;return!0}(A.url,T.url)||x.url.next(T.url),dr(A.data,T.data)||x.data.next(T.data)}else x.snapshot=x._futureSnapshot,x.data.next(x._futureSnapshot.data)}function Ss(x,A){const T=dr(x.params,A.params)&&function De(x,A){return Ge(x,A)&&x.every((T,k)=>dr(T.parameters,A[k].parameters))}(x.url,A.url);return T&&!(!x.parent!=!A.parent)&&(!x.parent||Ss(x.parent,A.parent))}function Yi(x,A,T){if(T&&x.shouldReuseRoute(A.value,T.value.snapshot)){const k=T.value;k._futureSnapshot=A.value;const W=function Ui(x,A,T){return A.children.map(k=>{for(const W of T.children)if(x.shouldReuseRoute(k.value,W.value.snapshot))return Yi(x,k,W);return Yi(x,k)})}(x,A,T);return new kr(k,W)}{if(x.shouldAttach(A.value)){const oe=x.retrieve(A.value);if(null!==oe){const Ee=oe.route;return Ee.value._futureSnapshot=A.value,Ee.children=A.children.map(Ne=>Yi(x,Ne)),Ee}}const k=function lo(x){return new It(new J(x.url),new J(x.params),new J(x.queryParams),new J(x.fragment),new J(x.data),x.outlet,x.component,x)}(A.value),W=A.children.map(oe=>Yi(x,oe));return new kr(k,W)}}function uo(x){return"object"==typeof x&&null!=x&&!x.outlets&&!x.segmentPath}function wo(x){return"object"==typeof x&&null!=x&&x.outlets}function $s(x,A,T,k,W){let oe={};return k&&cr(k,(Ee,Ne)=>{oe[Ne]=Array.isArray(Ee)?Ee.map(Et=>`${Et}`):`${Ee}`}),new K(T.root===x?A:Co(T.root,x,A),oe,W)}function Co(x,A,T){const k={};return cr(x.children,(W,oe)=>{k[oe]=W===A?T:Co(W,A,T)}),new ee(x.segments,k)}class xs{constructor(A,T,k){if(this.isAbsolute=A,this.numberOfDoubleDots=T,this.commands=k,A&&k.length>0&&uo(k[0]))throw new Error("Root segment cannot have matrix parameters");const W=k.find(wo);if(W&&W!==hr(k))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Os{constructor(A,T,k){this.segmentGroup=A,this.processChildren=T,this.index=k}}function Oo(x,A,T){if(x||(x=new ee([],{})),0===x.segments.length&&x.hasChildren())return Fs(x,A,T);const k=function ca(x,A,T){let k=0,W=A;const oe={match:!1,pathIndex:0,commandIndex:0};for(;W<x.segments.length;){if(k>=T.length)return oe;const Ee=x.segments[W],Ne=T[k];if(wo(Ne))break;const Et=`${Ne}`,bn=k<T.length-1?T[k+1]:null;if(W>0&&void 0===Et)break;if(Et&&bn&&"object"==typeof bn&&void 0===bn.outlets){if(!co(Et,bn,Ee))return oe;k+=2}else{if(!co(Et,{},Ee))return oe;k++}W++}return{match:!0,pathIndex:W,commandIndex:k}}(x,A,T),W=T.slice(k.commandIndex);if(k.match&&k.pathIndex<x.segments.length){const oe=new ee(x.segments.slice(0,k.pathIndex),{});return oe.children[sn]=new ee(x.segments.slice(k.pathIndex),x.children),Fs(oe,0,W)}return k.match&&0===W.length?new ee(x.segments,{}):k.match&&!x.hasChildren()?zi(x,A,T):k.match?Fs(x,0,W):zi(x,A,T)}function Fs(x,A,T){if(0===T.length)return new ee(x.segments,{});{const k=function bo(x){return wo(x[0])?x[0].outlets:{[sn]:x}}(T),W={};return cr(k,(oe,Ee)=>{"string"==typeof oe&&(oe=[oe]),null!==oe&&(W[Ee]=Oo(x.children[Ee],A,oe))}),cr(x.children,(oe,Ee)=>{void 0===k[Ee]&&(W[Ee]=oe)}),new ee(x.segments,W)}}function zi(x,A,T){const k=x.segments.slice(0,A);let W=0;for(;W<T.length;){const oe=T[W];if(wo(oe)){const Et=Ls(oe.outlets);return new ee(k,Et)}if(0===W&&uo(T[0])){k.push(new ue(x.segments[A].path,ps(T[0]))),W++;continue}const Ee=wo(oe)?oe.outlets[sn]:`${oe}`,Ne=W<T.length-1?T[W+1]:null;Ee&&Ne&&uo(Ne)?(k.push(new ue(Ee,ps(Ne))),W+=2):(k.push(new ue(Ee,{})),W++)}return new ee(k,{})}function Ls(x){const A={};return cr(x,(T,k)=>{"string"==typeof T&&(T=[T]),null!==T&&(A[k]=zi(new ee([],{}),0,T))}),A}function ps(x){const A={};return cr(x,(T,k)=>A[k]=`${T}`),A}function co(x,A,T){return x==T.path&&dr(A,T.parameters)}class Jr{constructor(A,T,k,W){this.routeReuseStrategy=A,this.futureState=T,this.currState=k,this.forwardEvent=W}activate(A){const T=this.futureState._root,k=this.currState?this.currState._root:null;this.deactivateChildRoutes(T,k,A),Qr(this.futureState.root),this.activateChildRoutes(T,k,A)}deactivateChildRoutes(A,T,k){const W=Mi(T);A.children.forEach(oe=>{const Ee=oe.value.outlet;this.deactivateRoutes(oe,W[Ee],k),delete W[Ee]}),cr(W,(oe,Ee)=>{this.deactivateRouteAndItsChildren(oe,k)})}deactivateRoutes(A,T,k){const W=A.value,oe=T?T.value:null;if(W===oe)if(W.component){const Ee=k.getContext(W.outlet);Ee&&this.deactivateChildRoutes(A,T,Ee.children)}else this.deactivateChildRoutes(A,T,k);else oe&&this.deactivateRouteAndItsChildren(T,k)}deactivateRouteAndItsChildren(A,T){A.value.component&&this.routeReuseStrategy.shouldDetach(A.value.snapshot)?this.detachAndStoreRouteSubtree(A,T):this.deactivateRouteAndOutlet(A,T)}detachAndStoreRouteSubtree(A,T){const k=T.getContext(A.value.outlet),W=k&&A.value.component?k.children:T,oe=Mi(A);for(const Ee of Object.keys(oe))this.deactivateRouteAndItsChildren(oe[Ee],W);if(k&&k.outlet){const Ee=k.outlet.detach(),Ne=k.children.onOutletDeactivated();this.routeReuseStrategy.store(A.value.snapshot,{componentRef:Ee,route:A,contexts:Ne})}}deactivateRouteAndOutlet(A,T){const k=T.getContext(A.value.outlet),W=k&&A.value.component?k.children:T,oe=Mi(A);for(const Ee of Object.keys(oe))this.deactivateRouteAndItsChildren(oe[Ee],W);k&&k.outlet&&(k.outlet.deactivate(),k.children.onOutletDeactivated(),k.attachRef=null,k.resolver=null,k.route=null)}activateChildRoutes(A,T,k){const W=Mi(T);A.children.forEach(oe=>{this.activateRoutes(oe,W[oe.value.outlet],k),this.forwardEvent(new Mr(oe.value.snapshot))}),A.children.length&&this.forwardEvent(new Gr(A.value.snapshot))}activateRoutes(A,T,k){const W=A.value,oe=T?T.value:null;if(Qr(W),W===oe)if(W.component){const Ee=k.getOrCreateContext(W.outlet);this.activateChildRoutes(A,T,Ee.children)}else this.activateChildRoutes(A,T,k);else if(W.component){const Ee=k.getOrCreateContext(W.outlet);if(this.routeReuseStrategy.shouldAttach(W.snapshot)){const Ne=this.routeReuseStrategy.retrieve(W.snapshot);this.routeReuseStrategy.store(W.snapshot,null),Ee.children.onOutletReAttached(Ne.contexts),Ee.attachRef=Ne.componentRef,Ee.route=Ne.route.value,Ee.outlet&&Ee.outlet.attach(Ne.componentRef,Ne.route.value),Qr(Ne.route.value),this.activateChildRoutes(A,null,Ee.children)}else{const Ne=function Cs(x){for(let A=x.parent;A;A=A.parent){const T=A.routeConfig;if(T&&T._loadedConfig)return T._loadedConfig;if(T&&T.component)return null}return null}(W.snapshot),Et=Ne?Ne.module.componentFactoryResolver:null;Ee.attachRef=null,Ee.route=W,Ee.resolver=Et,Ee.outlet&&Ee.outlet.activateWith(W,Et),this.activateChildRoutes(A,null,Ee.children)}}else this.activateChildRoutes(A,null,k)}}class fr{constructor(A,T){this.routes=A,this.module=T}}function or(x){return"function"==typeof x}function pi(x){return x instanceof K}const ai=Symbol("INITIAL_VALUE");function X(){return(0,Zt.w)(x=>function yt(...x){const A=(0,Pe.yG)(x),T=(0,Pe.jO)(x),{args:k,keys:W}=(0,Te.D)(x);if(0===k.length)return(0,Le.D)([],A);const oe=new ye.y(function ut(x,A,T=Ve.y){return k=>{Ye(A,()=>{const{length:W}=x,oe=new Array(W);let Ee=W,Ne=W;for(let Et=0;Et<W;Et++)Ye(A,()=>{const bn=(0,Le.D)(x[Et],A);let rr=!1;bn.subscribe(new fe.Q(k,Fn=>{oe[Et]=Fn,rr||(rr=!0,Ne--),Ne||k.next(T(oe.slice()))},()=>{--Ee||k.complete()}))},k)},k)}}(k,A,W?Ee=>(0,ce.n)(W,Ee):Ve.y));return T?oe.pipe((0,he.Z)(T)):oe}(x.map(A=>A.pipe((0,an.q)(1),(0,wn.O)(ai)))).pipe((0,gt.R)((A,T)=>{let k=!1;return T.reduce((W,oe,Ee)=>W!==ai?W:(oe===ai&&(k=!0),k||!1!==oe&&Ee!==T.length-1&&!pi(oe)?W:oe),A)},ai),(0,ct.h)(A=>A!==ai),(0,St.U)(A=>pi(A)?A:!0===A),(0,an.q)(1)))}class G{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new pe,this.attachRef=null}}class pe{constructor(){this.contexts=new Map}onChildOutletCreated(A,T){const k=this.getOrCreateContext(A);k.outlet=T,this.contexts.set(A,k)}onChildOutletDestroyed(A){const T=this.getContext(A);T&&(T.outlet=null,T.attachRef=null)}onOutletDeactivated(){const A=this.contexts;return this.contexts=new Map,A}onOutletReAttached(A){this.contexts=A}getOrCreateContext(A){let T=this.getContext(A);return T||(T=new G,this.contexts.set(A,T)),T}getContext(A){return this.contexts.get(A)||null}}let xe=(()=>{class x{constructor(T,k,W,oe,Ee){this.parentContexts=T,this.location=k,this.resolver=W,this.changeDetector=Ee,this.activated=null,this._activatedRoute=null,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.attachEvents=new _.vpe,this.detachEvents=new _.vpe,this.name=oe||sn,T.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const T=this.parentContexts.getContext(this.name);T&&T.route&&(T.attachRef?this.attach(T.attachRef,T.route):this.activateWith(T.route,T.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const T=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(T.instance),T}attach(T,k){this.activated=T,this._activatedRoute=k,this.location.insert(T.hostView),this.attachEvents.emit(T.instance)}deactivate(){if(this.activated){const T=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,k){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=T;const Ee=(k=k||this.resolver).resolveComponentFactory(T._futureSnapshot.routeConfig.component),Ne=this.parentContexts.getOrCreateContext(this.name).children,Et=new qe(T,Ne,this.location.injector);this.activated=this.location.createComponent(Ee,this.location.length,Et),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return x.\u0275fac=function(T){return new(T||x)(_.Y36(pe),_.Y36(_.s_b),_.Y36(_._Vd),_.$8M("name"),_.Y36(_.sBO))},x.\u0275dir=_.lG2({type:x,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),x})();class qe{constructor(A,T,k){this.route=A,this.childContexts=T,this.parent=k}get(A,T){return A===It?this.route:A===pe?this.childContexts:this.parent.get(A,T)}}let vt=(()=>{class x{}return x.\u0275fac=function(T){return new(T||x)},x.\u0275cmp=_.Xpm({type:x,selectors:[["ng-component"]],decls:1,vars:0,template:function(T,k){1&T&&_._UZ(0,"router-outlet")},directives:[xe],encapsulation:2}),x})();function Ft(x,A=""){for(let T=0;T<x.length;T++){const k=x[T];fn(k,Mn(A,k))}}function fn(x,A){x.children&&Ft(x.children,A)}function Mn(x,A){return A?x||A.path?x&&!A.path?`${x}/`:!x&&A.path?A.path:`${x}/${A.path}`:"":x}function An(x){const A=x.children&&x.children.map(An),T=A?Object.assign(Object.assign({},x),{children:A}):Object.assign({},x);return!T.component&&(A||T.loadChildren)&&T.outlet&&T.outlet!==sn&&(T.component=vt),T}function F(x){return x.outlet||sn}function te(x,A){const T=x.filter(k=>F(k)===A);return T.push(...x.filter(k=>F(k)!==A)),T}const V={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function se(x,A,T){var k;if(""===A.path)return"full"===A.pathMatch&&(x.hasChildren()||T.length>0)?Object.assign({},V):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const oe=(A.matcher||Dn)(T,x,A);if(!oe)return Object.assign({},V);const Ee={};cr(oe.posParams,(Et,bn)=>{Ee[bn]=Et.path});const Ne=oe.consumed.length>0?Object.assign(Object.assign({},Ee),oe.consumed[oe.consumed.length-1].parameters):Ee;return{matched:!0,consumedSegments:oe.consumed,lastChild:oe.consumed.length,parameters:Ne,positionalParamSegments:null!==(k=oe.posParams)&&void 0!==k?k:{}}}function Ie(x,A,T,k,W="corrected"){if(T.length>0&&function on(x,A,T){return T.some(k=>$n(x,A,k)&&F(k)!==sn)}(x,T,k)){const Ee=new ee(A,function Mt(x,A,T,k){const W={};W[sn]=k,k._sourceSegment=x,k._segmentIndexShift=A.length;for(const oe of T)if(""===oe.path&&F(oe)!==sn){const Ee=new ee([],{});Ee._sourceSegment=x,Ee._segmentIndexShift=A.length,W[F(oe)]=Ee}return W}(x,A,k,new ee(T,x.children)));return Ee._sourceSegment=x,Ee._segmentIndexShift=A.length,{segmentGroup:Ee,slicedSegments:[]}}if(0===T.length&&function Qn(x,A,T){return T.some(k=>$n(x,A,k))}(x,T,k)){const Ee=new ee(x.segments,function ht(x,A,T,k,W,oe){const Ee={};for(const Ne of k)if($n(x,T,Ne)&&!W[F(Ne)]){const Et=new ee([],{});Et._sourceSegment=x,Et._segmentIndexShift="legacy"===oe?x.segments.length:A.length,Ee[F(Ne)]=Et}return Object.assign(Object.assign({},W),Ee)}(x,A,T,k,x.children,W));return Ee._sourceSegment=x,Ee._segmentIndexShift=A.length,{segmentGroup:Ee,slicedSegments:T}}const oe=new ee(x.segments,x.children);return oe._sourceSegment=x,oe._segmentIndexShift=A.length,{segmentGroup:oe,slicedSegments:T}}function $n(x,A,T){return(!(x.hasChildren()||A.length>0)||"full"!==T.pathMatch)&&""===T.path}function Qt(x,A,T,k){return!!(F(x)===k||k!==sn&&$n(A,T,x))&&("**"===x.path||se(A,x,T).matched)}function Jn(x,A,T){return 0===A.length&&!x.children[T]}class Pr{constructor(A){this.segmentGroup=A||null}}class Hr{constructor(A){this.urlTree=A}}function rn(x){return new ye.y(A=>A.error(new Pr(x)))}function Pi(x){return new ye.y(A=>A.error(new Hr(x)))}function Xr(x){return new ye.y(A=>A.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${x}'`)))}class ${constructor(A,T,k,W,oe){this.configLoader=T,this.urlSerializer=k,this.urlTree=W,this.config=oe,this.allowRedirects=!0,this.ngModule=A.get(_.h0i)}apply(){const A=Ie(this.urlTree.root,[],[],this.config).segmentGroup,T=new ee(A.segments,A.children);return this.expandSegmentGroup(this.ngModule,this.config,T,sn).pipe((0,St.U)(oe=>this.createUrlTree(N(oe),this.urlTree.queryParams,this.urlTree.fragment))).pipe(lt(oe=>{if(oe instanceof Hr)return this.allowRedirects=!1,this.match(oe.urlTree);throw oe instanceof Pr?this.noMatchError(oe):oe}))}match(A){return this.expandSegmentGroup(this.ngModule,this.config,A.root,sn).pipe((0,St.U)(W=>this.createUrlTree(N(W),A.queryParams,A.fragment))).pipe(lt(W=>{throw W instanceof Pr?this.noMatchError(W):W}))}noMatchError(A){return new Error(`Cannot match any routes. URL Segment: '${A.segmentGroup}'`)}createUrlTree(A,T,k){const W=A.segments.length>0?new ee([],{[sn]:A}):A;return new K(W,T,k)}expandSegmentGroup(A,T,k,W){return 0===k.segments.length&&k.hasChildren()?this.expandChildren(A,T,k).pipe((0,St.U)(oe=>new ee([],oe))):this.expandSegment(A,k,T,k.segments,W,!0)}expandChildren(A,T,k){const W=[];for(const oe of Object.keys(k.children))"primary"===oe?W.unshift(oe):W.push(oe);return(0,Le.D)(W).pipe(tt(oe=>{const Ee=k.children[oe],Ne=te(T,oe);return this.expandSegmentGroup(A,Ne,Ee,oe).pipe((0,St.U)(Et=>({segment:Et,outlet:oe})))}),(0,gt.R)((oe,Ee)=>(oe[Ee.outlet]=Ee.segment,oe),{}),function Jt(x,A){const T=arguments.length>=2;return k=>k.pipe(x?(0,ct.h)((W,oe)=>x(W,oe,k)):Ve.y,wt(1),T?(0,Tn.d)(A):(0,et.T)(()=>new Xe.K))}())}expandSegment(A,T,k,W,oe,Ee){return(0,Le.D)(k).pipe(tt(Ne=>this.expandSegmentAgainstRoute(A,T,k,Ne,W,oe,Ee).pipe(lt(bn=>{if(bn instanceof Pr)return(0,be.of)(null);throw bn}))),(0,Dt.P)(Ne=>!!Ne),lt((Ne,Et)=>{if(Ne instanceof Xe.K||"EmptyError"===Ne.name){if(Jn(T,W,oe))return(0,be.of)(new ee([],{}));throw new Pr(T)}throw Ne}))}expandSegmentAgainstRoute(A,T,k,W,oe,Ee,Ne){return Qt(W,T,oe,Ee)?void 0===W.redirectTo?this.matchSegmentAgainstRoute(A,T,W,oe,Ee):Ne&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(A,T,k,W,oe,Ee):rn(T):rn(T)}expandSegmentAgainstRouteUsingRedirect(A,T,k,W,oe,Ee){return"**"===W.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(A,k,W,Ee):this.expandRegularSegmentAgainstRouteUsingRedirect(A,T,k,W,oe,Ee)}expandWildCardWithParamsAgainstRouteUsingRedirect(A,T,k,W){const oe=this.applyRedirectCommands([],k.redirectTo,{});return k.redirectTo.startsWith("/")?Pi(oe):this.lineralizeSegments(k,oe).pipe((0,Ce.z)(Ee=>{const Ne=new ee(Ee,{});return this.expandSegment(A,Ne,T,Ee,W,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(A,T,k,W,oe,Ee){const{matched:Ne,consumedSegments:Et,lastChild:bn,positionalParamSegments:rr}=se(T,W,oe);if(!Ne)return rn(T);const Fn=this.applyRedirectCommands(Et,W.redirectTo,rr);return W.redirectTo.startsWith("/")?Pi(Fn):this.lineralizeSegments(W,Fn).pipe((0,Ce.z)(Vr=>this.expandSegment(A,T,k,Vr.concat(oe.slice(bn)),Ee,!1)))}matchSegmentAgainstRoute(A,T,k,W,oe){if("**"===k.path)return k.loadChildren?(k._loadedConfig?(0,be.of)(k._loadedConfig):this.configLoader.load(A.injector,k)).pipe((0,St.U)(Vr=>(k._loadedConfig=Vr,new ee(W,{})))):(0,be.of)(new ee(W,{}));const{matched:Ee,consumedSegments:Ne,lastChild:Et}=se(T,k,W);if(!Ee)return rn(T);const bn=W.slice(Et);return this.getChildConfig(A,k,W).pipe((0,Ce.z)(Fn=>{const Vr=Fn.module,Br=Fn.routes,{segmentGroup:Ts,slicedSegments:ei}=Ie(T,Ne,bn,Br),nt=new ee(Ts.segments,Ts.children);if(0===ei.length&&nt.hasChildren())return this.expandChildren(Vr,Br,nt).pipe((0,St.U)(to=>new ee(Ne,to)));if(0===Br.length&&0===ei.length)return(0,be.of)(new ee(Ne,{}));const ds=F(k)===oe;return this.expandSegment(Vr,nt,Br,ei,ds?sn:oe,!0).pipe((0,St.U)(Vs=>new ee(Ne.concat(Vs.segments),Vs.children)))}))}getChildConfig(A,T,k){return T.children?(0,be.of)(new fr(T.children,A)):T.loadChildren?void 0!==T._loadedConfig?(0,be.of)(T._loadedConfig):this.runCanLoadGuards(A.injector,T,k).pipe((0,Ce.z)(W=>W?this.configLoader.load(A.injector,T).pipe((0,St.U)(oe=>(T._loadedConfig=oe,oe))):function li(x){return new ye.y(A=>A.error(Dr(`Cannot load children because the guard of the route "path: '${x.path}'" returned false`)))}(T))):(0,be.of)(new fr([],A))}runCanLoadGuards(A,T,k){const W=T.canLoad;if(!W||0===W.length)return(0,be.of)(!0);const oe=W.map(Ee=>{const Ne=A.get(Ee);let Et;if(function zr(x){return x&&or(x.canLoad)}(Ne))Et=Ne.canLoad(T,k);else{if(!or(Ne))throw new Error("Invalid CanLoad guard");Et=Ne(T,k)}return Ot(Et)});return(0,be.of)(oe).pipe(X(),(0,Me.b)(Ee=>{if(!pi(Ee))return;const Ne=Dr(`Redirecting to "${this.urlSerializer.serialize(Ee)}"`);throw Ne.url=Ee,Ne}),(0,St.U)(Ee=>!0===Ee))}lineralizeSegments(A,T){let k=[],W=T.root;for(;;){if(k=k.concat(W.segments),0===W.numberOfChildren)return(0,be.of)(k);if(W.numberOfChildren>1||!W.children[sn])return Xr(A.redirectTo);W=W.children[sn]}}applyRedirectCommands(A,T,k){return this.applyRedirectCreatreUrlTree(T,this.urlSerializer.parse(T),A,k)}applyRedirectCreatreUrlTree(A,T,k,W){const oe=this.createSegmentGroup(A,T.root,k,W);return new K(oe,this.createQueryParams(T.queryParams,this.urlTree.queryParams),T.fragment)}createQueryParams(A,T){const k={};return cr(A,(W,oe)=>{if("string"==typeof W&&W.startsWith(":")){const Ne=W.substring(1);k[oe]=T[Ne]}else k[oe]=W}),k}createSegmentGroup(A,T,k,W){const oe=this.createSegments(A,T.segments,k,W);let Ee={};return cr(T.children,(Ne,Et)=>{Ee[Et]=this.createSegmentGroup(A,Ne,k,W)}),new ee(oe,Ee)}createSegments(A,T,k,W){return T.map(oe=>oe.path.startsWith(":")?this.findPosParam(A,oe,W):this.findOrReturn(oe,k))}findPosParam(A,T,k){const W=k[T.path.substring(1)];if(!W)throw new Error(`Cannot redirect to '${A}'. Cannot find '${T.path}'.`);return W}findOrReturn(A,T){let k=0;for(const W of T){if(W.path===A.path)return T.splice(k),W;k++}return A}}function N(x){const A={};for(const k of Object.keys(x.children)){const oe=N(x.children[k]);(oe.segments.length>0||oe.hasChildren())&&(A[k]=oe)}return function U(x){if(1===x.numberOfChildren&&x.children[sn]){const A=x.children[sn];return new ee(x.segments.concat(A.segments),A.children)}return x}(new ee(x.segments,A))}class rt{constructor(A){this.path=A,this.route=this.path[this.path.length-1]}}class In{constructor(A,T){this.component=A,this.route=T}}function sr(x,A,T){const k=x._root;return Ms(k,A?A._root:null,T,[k.value])}function gi(x,A,T){const k=function Qi(x){if(!x)return null;for(let A=x.parent;A;A=A.parent){const T=A.routeConfig;if(T&&T._loadedConfig)return T._loadedConfig}return null}(A);return(k?k.module.injector:T).get(x)}function Ms(x,A,T,k,W={canDeactivateChecks:[],canActivateChecks:[]}){const oe=Mi(A);return x.children.forEach(Ee=>{(function Io(x,A,T,k,W={canDeactivateChecks:[],canActivateChecks:[]}){const oe=x.value,Ee=A?A.value:null,Ne=T?T.getContext(x.value.outlet):null;if(Ee&&oe.routeConfig===Ee.routeConfig){const Et=function da(x,A,T){if("function"==typeof T)return T(x,A);switch(T){case"pathParamsChange":return!Ge(x.url,A.url);case"pathParamsOrQueryParamsChange":return!Ge(x.url,A.url)||!dr(x.queryParams,A.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ss(x,A)||!dr(x.queryParams,A.queryParams);default:return!Ss(x,A)}}(Ee,oe,oe.routeConfig.runGuardsAndResolvers);Et?W.canActivateChecks.push(new rt(k)):(oe.data=Ee.data,oe._resolvedData=Ee._resolvedData),Ms(x,A,oe.component?Ne?Ne.children:null:T,k,W),Et&&Ne&&Ne.outlet&&Ne.outlet.isActivated&&W.canDeactivateChecks.push(new In(Ne.outlet.component,Ee))}else Ee&&ii(A,Ne,W),W.canActivateChecks.push(new rt(k)),Ms(x,null,oe.component?Ne?Ne.children:null:T,k,W)})(Ee,oe[Ee.value.outlet],T,k.concat([Ee.value]),W),delete oe[Ee.value.outlet]}),cr(oe,(Ee,Ne)=>ii(Ee,T.getContext(Ne),W)),W}function ii(x,A,T){const k=Mi(x),W=x.value;cr(k,(oe,Ee)=>{ii(oe,W.component?A?A.children.getContext(Ee):null:A,T)}),T.canDeactivateChecks.push(new In(W.component&&A&&A.outlet&&A.outlet.isActivated?A.outlet.component:null,W))}class yl{}function Fo(x){return new ye.y(A=>A.error(x))}class _i{constructor(A,T,k,W,oe,Ee){this.rootComponentType=A,this.config=T,this.urlTree=k,this.url=W,this.paramsInheritanceStrategy=oe,this.relativeLinkResolution=Ee}recognize(){const A=Ie(this.urlTree.root,[],[],this.config.filter(Ee=>void 0===Ee.redirectTo),this.relativeLinkResolution).segmentGroup,T=this.processSegmentGroup(this.config,A,sn);if(null===T)return null;const k=new Zn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},sn,this.rootComponentType,null,this.urlTree.root,-1,{}),W=new kr(k,T),oe=new wi(this.url,W);return this.inheritParamsAndData(oe._root),oe}inheritParamsAndData(A){const T=A.value,k=Wt(T,this.paramsInheritanceStrategy);T.params=Object.freeze(k.params),T.data=Object.freeze(k.data),A.children.forEach(W=>this.inheritParamsAndData(W))}processSegmentGroup(A,T,k){return 0===T.segments.length&&T.hasChildren()?this.processChildren(A,T):this.processSegment(A,T,T.segments,k)}processChildren(A,T){const k=[];for(const oe of Object.keys(T.children)){const Ee=T.children[oe],Ne=te(A,oe),Et=this.processSegmentGroup(Ne,Ee,oe);if(null===Et)return null;k.push(...Et)}const W=Xs(k);return function Js(x){x.sort((A,T)=>A.value.outlet===sn?-1:T.value.outlet===sn?1:A.value.outlet.localeCompare(T.value.outlet))}(W),W}processSegment(A,T,k,W){for(const oe of A){const Ee=this.processSegmentAgainstRoute(oe,T,k,W);if(null!==Ee)return Ee}return Jn(T,k,W)?[]:null}processSegmentAgainstRoute(A,T,k,W){if(A.redirectTo||!Qt(A,T,k,W))return null;let oe,Ee=[],Ne=[];if("**"===A.path){const Br=k.length>0?hr(k).parameters:{};oe=new Zn(k,Br,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Oa(A),F(A),A.component,A,Pa(T),Na(T)+k.length,Uo(A))}else{const Br=se(T,A,k);if(!Br.matched)return null;Ee=Br.consumedSegments,Ne=k.slice(Br.lastChild),oe=new Zn(Ee,Br.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Oa(A),F(A),A.component,A,Pa(T),Na(T)+Ee.length,Uo(A))}const Et=function Gl(x){return x.children?x.children:x.loadChildren?x._loadedConfig.routes:[]}(A),{segmentGroup:bn,slicedSegments:rr}=Ie(T,Ee,Ne,Et.filter(Br=>void 0===Br.redirectTo),this.relativeLinkResolution);if(0===rr.length&&bn.hasChildren()){const Br=this.processChildren(Et,bn);return null===Br?null:[new kr(oe,Br)]}if(0===Et.length&&0===rr.length)return[new kr(oe,[])];const Fn=F(A)===W,Vr=this.processSegment(Et,bn,rr,Fn?sn:W);return null===Vr?null:[new kr(oe,Vr)]}}function Lo(x){const A=x.value.routeConfig;return A&&""===A.path&&void 0===A.redirectTo}function Xs(x){const A=[],T=new Set;for(const k of x){if(!Lo(k)){A.push(k);continue}const W=A.find(oe=>k.value.routeConfig===oe.value.routeConfig);void 0!==W?(W.children.push(...k.children),T.add(W)):A.push(k)}for(const k of T){const W=Xs(k.children);A.push(new kr(k.value,W))}return A.filter(k=>!T.has(k))}function Pa(x){let A=x;for(;A._sourceSegment;)A=A._sourceSegment;return A}function Na(x){let A=x,T=A._segmentIndexShift?A._segmentIndexShift:0;for(;A._sourceSegment;)A=A._sourceSegment,T+=A._segmentIndexShift?A._segmentIndexShift:0;return T-1}function Oa(x){return x.data||{}}function Uo(x){return x.resolve||{}}function fo(x){return(0,Zt.w)(A=>{const T=x(A);return T?(0,Le.D)(T).pipe((0,St.U)(()=>A)):(0,be.of)(A)})}class Ec extends class Fa{shouldDetach(A){return!1}store(A,T){}shouldAttach(A){return!1}retrieve(A){return null}shouldReuseRoute(A,T){return A.routeConfig===T.routeConfig}}{}const La=new _.OlP("ROUTES");class wc{constructor(A,T,k,W){this.injector=A,this.compiler=T,this.onLoadStartListener=k,this.onLoadEndListener=W}load(A,T){if(T._loader$)return T._loader$;this.onLoadStartListener&&this.onLoadStartListener(T);const W=this.loadModuleFactory(T.loadChildren).pipe((0,St.U)(oe=>{this.onLoadEndListener&&this.onLoadEndListener(T);const Ee=oe.create(A);return new fr(En(Ee.injector.get(La,void 0,_.XFs.Self|_.XFs.Optional)).map(An),Ee)}),lt(oe=>{throw T._loader$=void 0,oe}));return T._loader$=new We(W,()=>new E.x).pipe(_t()),T._loader$}loadModuleFactory(A){return Ot(A()).pipe((0,Ce.z)(T=>T instanceof _.YKP?(0,be.of)(T):(0,Le.D)(this.compiler.compileModuleAsync(T))))}}class id{shouldProcessUrl(A){return!0}extract(A){return A}merge(A,T){return A}}function _a(x){throw x}function Bi(x,A,T){return A.parse("/")}function Ws(x,A){return(0,be.of)(null)}const Vo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Qo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Us=(()=>{class x{constructor(T,k,W,oe,Ee,Ne,Et){this.rootComponentType=T,this.urlSerializer=k,this.rootContexts=W,this.location=oe,this.config=Et,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new E.x,this.errorHandler=_a,this.malformedUriErrorHandler=Bi,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ws,afterPreactivation:Ws},this.urlHandlingStrategy=new id,this.routeReuseStrategy=new Ec,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Ee.get(_.h0i),this.console=Ee.get(_.c2e);const Fn=Ee.get(_.R0b);this.isNgZoneEnabled=Fn instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(Et),this.currentUrlTree=function dt(){return new K(new ee([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new wc(Ee,Ne,Vr=>this.triggerEvent(new vn(Vr)),Vr=>this.triggerEvent(new Nn(Vr))),this.routerState=Ue(this.currentUrlTree,this.rootComponentType),this.transitions=new J({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var T;return null===(T=this.location.getState())||void 0===T?void 0:T.\u0275routerPageId}setupNavigations(T){const k=this.events;return T.pipe((0,ct.h)(W=>0!==W.id),(0,St.U)(W=>Object.assign(Object.assign({},W),{extractedUrl:this.urlHandlingStrategy.extract(W.rawUrl)})),(0,Zt.w)(W=>{let oe=!1,Ee=!1;return(0,be.of)(W).pipe((0,Me.b)(Ne=>{this.currentNavigation={id:Ne.id,initialUrl:Ne.currentRawUrl,extractedUrl:Ne.extractedUrl,trigger:Ne.source,extras:Ne.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Zt.w)(Ne=>{const Et=this.browserUrlTree.toString(),bn=!this.navigated||Ne.extractedUrl.toString()!==Et||Et!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||bn)&&this.urlHandlingStrategy.shouldProcessUrl(Ne.rawUrl))return gr(Ne.source)&&(this.browserUrlTree=Ne.extractedUrl),(0,be.of)(Ne).pipe((0,Zt.w)(Fn=>{const Vr=this.transitions.getValue();return k.next(new Wn(Fn.id,this.serializeUrl(Fn.extractedUrl),Fn.source,Fn.restoredState)),Vr!==this.transitions.getValue()?bt.E:Promise.resolve(Fn)}),function q(x,A,T,k){return(0,Zt.w)(W=>function Vi(x,A,T,k,W){return new $(x,A,T,k,W).apply()}(x,A,T,W.extractedUrl,k).pipe((0,St.U)(oe=>Object.assign(Object.assign({},W),{urlAfterRedirects:oe}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Me.b)(Fn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Fn.urlAfterRedirects})}),function Rs(x,A,T,k,W){return(0,Ce.z)(oe=>function fa(x,A,T,k,W="emptyOnly",oe="legacy"){try{const Ee=new _i(x,A,T,k,W,oe).recognize();return null===Ee?Fo(new yl):(0,be.of)(Ee)}catch(Ee){return Fo(Ee)}}(x,A,oe.urlAfterRedirects,T(oe.urlAfterRedirects),k,W).pipe((0,St.U)(Ee=>Object.assign(Object.assign({},oe),{targetSnapshot:Ee}))))}(this.rootComponentType,this.config,Fn=>this.serializeUrl(Fn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Me.b)(Fn=>{if("eager"===this.urlUpdateStrategy){if(!Fn.extras.skipLocationChange){const Br=this.urlHandlingStrategy.merge(Fn.urlAfterRedirects,Fn.rawUrl);this.setBrowserUrl(Br,Fn)}this.browserUrlTree=Fn.urlAfterRedirects}const Vr=new yr(Fn.id,this.serializeUrl(Fn.extractedUrl),this.serializeUrl(Fn.urlAfterRedirects),Fn.targetSnapshot);k.next(Vr)}));if(bn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Vr,extractedUrl:Br,source:Ts,restoredState:ei,extras:nt}=Ne,ds=new Wn(Vr,this.serializeUrl(Br),Ts,ei);k.next(ds);const rs=Ue(Br,this.rootComponentType).snapshot;return(0,be.of)(Object.assign(Object.assign({},Ne),{targetSnapshot:rs,urlAfterRedirects:Br,extras:Object.assign(Object.assign({},nt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Ne.rawUrl,Ne.resolve(null),bt.E}),fo(Ne=>{const{targetSnapshot:Et,id:bn,extractedUrl:rr,rawUrl:Fn,extras:{skipLocationChange:Vr,replaceUrl:Br}}=Ne;return this.hooks.beforePreactivation(Et,{navigationId:bn,appliedUrlTree:rr,rawUrlTree:Fn,skipLocationChange:!!Vr,replaceUrl:!!Br})}),(0,Me.b)(Ne=>{const Et=new Rt(Ne.id,this.serializeUrl(Ne.extractedUrl),this.serializeUrl(Ne.urlAfterRedirects),Ne.targetSnapshot);this.triggerEvent(Et)}),(0,St.U)(Ne=>Object.assign(Object.assign({},Ne),{guards:sr(Ne.targetSnapshot,Ne.currentSnapshot,this.rootContexts)})),function Ko(x,A){return(0,Ce.z)(T=>{const{targetSnapshot:k,currentSnapshot:W,guards:{canActivateChecks:oe,canDeactivateChecks:Ee}}=T;return 0===Ee.length&&0===oe.length?(0,be.of)(Object.assign(Object.assign({},T),{guardsResult:!0})):function Yo(x,A,T,k){return(0,Le.D)(x).pipe((0,Ce.z)(W=>function pr(x,A,T,k,W){const oe=A&&A.routeConfig?A.routeConfig.canDeactivate:null;if(!oe||0===oe.length)return(0,be.of)(!0);const Ee=oe.map(Ne=>{const Et=gi(Ne,A,W);let bn;if(function ko(x){return x&&or(x.canDeactivate)}(Et))bn=Ot(Et.canDeactivate(x,A,T,k));else{if(!or(Et))throw new Error("Invalid CanDeactivate guard");bn=Ot(Et(x,A,T,k))}return bn.pipe((0,Dt.P)())});return(0,be.of)(Ee).pipe(X())}(W.component,W.route,T,A,k)),(0,Dt.P)(W=>!0!==W,!0))}(Ee,k,W,x).pipe((0,Ce.z)(Ne=>Ne&&function lr(x){return"boolean"==typeof x}(Ne)?function ts(x,A,T,k){return(0,Le.D)(A).pipe(tt(W=>(0,At.z)(function ha(x,A){return null!==x&&A&&A(new Or(x)),(0,be.of)(!0)}(W.route.parent,k),function bs(x,A){return null!==x&&A&&A(new jr(x)),(0,be.of)(!0)}(W.route,k),function Is(x,A,T){const k=A[A.length-1],oe=A.slice(0,A.length-1).reverse().map(Ee=>function Ti(x){const A=x.routeConfig?x.routeConfig.canActivateChild:null;return A&&0!==A.length?{node:x,guards:A}:null}(Ee)).filter(Ee=>null!==Ee).map(Ee=>Ke(()=>{const Ne=Ee.guards.map(Et=>{const bn=gi(Et,Ee.node,T);let rr;if(function Ri(x){return x&&or(x.canActivateChild)}(bn))rr=Ot(bn.canActivateChild(k,x));else{if(!or(bn))throw new Error("Invalid CanActivateChild guard");rr=Ot(bn(k,x))}return rr.pipe((0,Dt.P)())});return(0,be.of)(Ne).pipe(X())}));return(0,be.of)(oe).pipe(X())}(x,W.path,T),function cs(x,A,T){const k=A.routeConfig?A.routeConfig.canActivate:null;if(!k||0===k.length)return(0,be.of)(!0);const W=k.map(oe=>Ke(()=>{const Ee=gi(oe,A,T);let Ne;if(function Hs(x){return x&&or(x.canActivate)}(Ee))Ne=Ot(Ee.canActivate(A,x));else{if(!or(Ee))throw new Error("Invalid CanActivate guard");Ne=Ot(Ee(A,x))}return Ne.pipe((0,Dt.P)())}));return(0,be.of)(W).pipe(X())}(x,W.route,T))),(0,Dt.P)(W=>!0!==W,!0))}(k,oe,x,A):(0,be.of)(Ne)),(0,St.U)(Ne=>Object.assign(Object.assign({},T),{guardsResult:Ne})))})}(this.ngModule.injector,Ne=>this.triggerEvent(Ne)),(0,Me.b)(Ne=>{if(pi(Ne.guardsResult)){const bn=Dr(`Redirecting to "${this.serializeUrl(Ne.guardsResult)}"`);throw bn.url=Ne.guardsResult,bn}const Et=new xr(Ne.id,this.serializeUrl(Ne.extractedUrl),this.serializeUrl(Ne.urlAfterRedirects),Ne.targetSnapshot,!!Ne.guardsResult);this.triggerEvent(Et)}),(0,ct.h)(Ne=>!!Ne.guardsResult||(this.restoreHistory(Ne),this.cancelNavigationTransition(Ne,""),!1)),fo(Ne=>{if(Ne.guards.canActivateChecks.length)return(0,be.of)(Ne).pipe((0,Me.b)(Et=>{const bn=new tn(Et.id,this.serializeUrl(Et.extractedUrl),this.serializeUrl(Et.urlAfterRedirects),Et.targetSnapshot);this.triggerEvent(bn)}),(0,Zt.w)(Et=>{let bn=!1;return(0,be.of)(Et).pipe(function ga(x,A){return(0,Ce.z)(T=>{const{targetSnapshot:k,guards:{canActivateChecks:W}}=T;if(!W.length)return(0,be.of)(T);let oe=0;return(0,Le.D)(W).pipe(tt(Ee=>function ka(x,A,T,k){return function ho(x,A,T,k){const W=Object.keys(x);if(0===W.length)return(0,be.of)({});const oe={};return(0,Le.D)(W).pipe((0,Ce.z)(Ee=>function ns(x,A,T,k){const W=gi(x,A,k);return Ot(W.resolve?W.resolve(A,T):W(A,T))}(x[Ee],A,T,k).pipe((0,Me.b)(Ne=>{oe[Ee]=Ne}))),wt(1),(0,Ce.z)(()=>Object.keys(oe).length===W.length?(0,be.of)(oe):bt.E))}(x._resolve,x,A,k).pipe((0,St.U)(oe=>(x._resolvedData=oe,x.data=Object.assign(Object.assign({},x.data),Wt(x,T).resolve),null)))}(Ee.route,k,x,A)),(0,Me.b)(()=>oe++),wt(1),(0,Ce.z)(Ee=>oe===W.length?(0,be.of)(T):bt.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Me.b)({next:()=>bn=!0,complete:()=>{bn||(this.restoreHistory(Et),this.cancelNavigationTransition(Et,"At least one route resolver didn't emit any value."))}}))}),(0,Me.b)(Et=>{const bn=new ir(Et.id,this.serializeUrl(Et.extractedUrl),this.serializeUrl(Et.urlAfterRedirects),Et.targetSnapshot);this.triggerEvent(bn)}))}),fo(Ne=>{const{targetSnapshot:Et,id:bn,extractedUrl:rr,rawUrl:Fn,extras:{skipLocationChange:Vr,replaceUrl:Br}}=Ne;return this.hooks.afterPreactivation(Et,{navigationId:bn,appliedUrlTree:rr,rawUrlTree:Fn,skipLocationChange:!!Vr,replaceUrl:!!Br})}),(0,St.U)(Ne=>{const Et=function js(x,A,T){const k=Yi(x,A._root,T?T._root:void 0);return new ze(k,A)}(this.routeReuseStrategy,Ne.targetSnapshot,Ne.currentRouterState);return Object.assign(Object.assign({},Ne),{targetRouterState:Et})}),(0,Me.b)(Ne=>{this.currentUrlTree=Ne.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Ne.urlAfterRedirects,Ne.rawUrl),this.routerState=Ne.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ne.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ne),this.browserUrlTree=Ne.urlAfterRedirects)}),((x,A,T)=>(0,St.U)(k=>(new Jr(A,k.targetRouterState,k.currentRouterState,T).activate(x),k)))(this.rootContexts,this.routeReuseStrategy,Ne=>this.triggerEvent(Ne)),(0,Me.b)({next(){oe=!0},complete(){oe=!0}}),function On(x){return(0,it.e)((A,T)=>{try{A.subscribe(T)}finally{T.add(x)}})}(()=>{var Ne;oe||Ee||this.cancelNavigationTransition(W,`Navigation ID ${W.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Ne=this.currentNavigation)||void 0===Ne?void 0:Ne.id)===W.id&&(this.currentNavigation=null)}),lt(Ne=>{if(Ee=!0,function Zr(x){return x&&x[nn]}(Ne)){const Et=pi(Ne.url);Et||(this.navigated=!0,this.restoreHistory(W,!0));const bn=new qr(W.id,this.serializeUrl(W.extractedUrl),Ne.message);k.next(bn),Et?setTimeout(()=>{const rr=this.urlHandlingStrategy.merge(Ne.url,this.rawUrlTree),Fn={skipLocationChange:W.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||gr(W.source)};this.scheduleNavigation(rr,"imperative",null,Fn,{resolve:W.resolve,reject:W.reject,promise:W.promise})},0):W.resolve(!1)}else{this.restoreHistory(W,!0);const Et=new Ur(W.id,this.serializeUrl(W.extractedUrl),Ne);k.next(Et);try{W.resolve(this.errorHandler(Ne))}catch(bn){W.reject(bn)}}return bt.E}))}))}resetRootComponentType(T){this.rootComponentType=T,this.routerState.root.component=this.rootComponentType}setTransition(T){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),T))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(T=>{const k="popstate"===T.type?"popstate":"hashchange";"popstate"===k&&setTimeout(()=>{var W;const oe={replaceUrl:!0},Ee=(null===(W=T.state)||void 0===W?void 0:W.navigationId)?T.state:null;if(Ee){const Et=Object.assign({},Ee);delete Et.navigationId,delete Et.\u0275routerPageId,0!==Object.keys(Et).length&&(oe.state=Et)}const Ne=this.parseUrl(T.url);this.scheduleNavigation(Ne,k,Ee,oe)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(T){this.events.next(T)}resetConfig(T){Ft(T),this.config=T.map(An),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(T,k={}){const{relativeTo:W,queryParams:oe,fragment:Ee,queryParamsHandling:Ne,preserveFragment:Et}=k,bn=W||this.routerState.root,rr=Et?this.currentUrlTree.fragment:Ee;let Fn=null;switch(Ne){case"merge":Fn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),oe);break;case"preserve":Fn=this.currentUrlTree.queryParams;break;default:Fn=oe||null}return null!==Fn&&(Fn=this.removeEmptyProps(Fn)),function Ns(x,A,T,k,W){if(0===T.length)return $s(A.root,A.root,A,k,W);const oe=function es(x){if("string"==typeof x[0]&&1===x.length&&"/"===x[0])return new xs(!0,0,x);let A=0,T=!1;const k=x.reduce((W,oe,Ee)=>{if("object"==typeof oe&&null!=oe){if(oe.outlets){const Ne={};return cr(oe.outlets,(Et,bn)=>{Ne[bn]="string"==typeof Et?Et.split("/"):Et}),[...W,{outlets:Ne}]}if(oe.segmentPath)return[...W,oe.segmentPath]}return"string"!=typeof oe?[...W,oe]:0===Ee?(oe.split("/").forEach((Ne,Et)=>{0==Et&&"."===Ne||(0==Et&&""===Ne?T=!0:".."===Ne?A++:""!=Ne&&W.push(Ne))}),W):[...W,oe]},[]);return new xs(T,A,k)}(T);if(oe.toRoot())return $s(A.root,new ee([],{}),A,k,W);const Ee=function ks(x,A,T){if(x.isAbsolute)return new Os(A.root,!0,0);if(-1===T.snapshot._lastPathIndex){const oe=T.snapshot._urlSegment;return new Os(oe,oe===A.root,0)}const k=uo(x.commands[0])?0:1;return function No(x,A,T){let k=x,W=A,oe=T;for(;oe>W;){if(oe-=W,k=k.parent,!k)throw new Error("Invalid number of '../'");W=k.segments.length}return new Os(k,!1,W-oe)}(T.snapshot._urlSegment,T.snapshot._lastPathIndex+k,x.numberOfDoubleDots)}(oe,A,x),Ne=Ee.processChildren?Fs(Ee.segmentGroup,Ee.index,oe.commands):Oo(Ee.segmentGroup,Ee.index,oe.commands);return $s(Ee.segmentGroup,Ne,A,k,W)}(bn,this.currentUrlTree,T,Fn,null!=rr?rr:null)}navigateByUrl(T,k={skipLocationChange:!1}){const W=pi(T)?T:this.parseUrl(T),oe=this.urlHandlingStrategy.merge(W,this.rawUrlTree);return this.scheduleNavigation(oe,"imperative",null,k)}navigate(T,k={skipLocationChange:!1}){return function $t(x){for(let A=0;A<x.length;A++){const T=x[A];if(null==T)throw new Error(`The requested path contains ${T} segment at index ${A}`)}}(T),this.navigateByUrl(this.createUrlTree(T,k),k)}serializeUrl(T){return this.urlSerializer.serialize(T)}parseUrl(T){let k;try{k=this.urlSerializer.parse(T)}catch(W){k=this.malformedUriErrorHandler(W,this.urlSerializer,T)}return k}isActive(T,k){let W;if(W=!0===k?Object.assign({},Vo):!1===k?Object.assign({},Qo):k,pi(T))return hn(this.currentUrlTree,T,W);const oe=this.parseUrl(T);return hn(this.currentUrlTree,oe,W)}removeEmptyProps(T){return Object.keys(T).reduce((k,W)=>{const oe=T[W];return null!=oe&&(k[W]=oe),k},{})}processNavigations(){this.navigations.subscribe(T=>{this.navigated=!0,this.lastSuccessfulId=T.id,this.currentPageId=T.targetPageId,this.events.next(new jn(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,T.resolve(!0)},T=>{this.console.warn(`Unhandled Navigation Error: ${T}`)})}scheduleNavigation(T,k,W,oe,Ee){var Ne,Et,bn;if(this.disposed)return Promise.resolve(!1);const rr=this.transitions.value,Fn=gr(k)&&rr&&!gr(rr.source),Vr=rr.rawUrl.toString()===T.toString(),Br=rr.id===(null===(Ne=this.currentNavigation)||void 0===Ne?void 0:Ne.id);if(Fn&&Vr&&Br)return Promise.resolve(!0);let ei,nt,ds;Ee?(ei=Ee.resolve,nt=Ee.reject,ds=Ee.promise):ds=new Promise((to,zs)=>{ei=to,nt=zs});const rs=++this.navigationId;let Vs;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(W=this.location.getState()),Vs=W&&W.\u0275routerPageId?W.\u0275routerPageId:oe.replaceUrl||oe.skipLocationChange?null!==(Et=this.browserPageId)&&void 0!==Et?Et:0:(null!==(bn=this.browserPageId)&&void 0!==bn?bn:0)+1):Vs=0,this.setTransition({id:rs,targetPageId:Vs,source:k,restoredState:W,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:T,extras:oe,resolve:ei,reject:nt,promise:ds,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ds.catch(to=>Promise.reject(to))}setBrowserUrl(T,k){const W=this.urlSerializer.serialize(T),oe=Object.assign(Object.assign({},k.extras.state),this.generateNgRouterState(k.id,k.targetPageId));this.location.isCurrentPathEqualTo(W)||k.extras.replaceUrl?this.location.replaceState(W,"",oe):this.location.go(W,"",oe)}restoreHistory(T,k=!1){var W,oe;if("computed"===this.canceledNavigationResolution){const Ee=this.currentPageId-T.targetPageId;"popstate"!==T.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(W=this.currentNavigation)||void 0===W?void 0:W.finalUrl)||0===Ee?this.currentUrlTree===(null===(oe=this.currentNavigation)||void 0===oe?void 0:oe.finalUrl)&&0===Ee&&(this.resetState(T),this.browserUrlTree=T.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Ee)}else"replace"===this.canceledNavigationResolution&&(k&&this.resetState(T),this.resetUrlToCurrentUrlTree())}resetState(T){this.routerState=T.currentRouterState,this.currentUrlTree=T.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,T.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(T,k){const W=new qr(T.id,this.serializeUrl(T.extractedUrl),k);this.triggerEvent(W),T.resolve(!1)}generateNgRouterState(T,k){return"computed"===this.canceledNavigationResolution?{navigationId:T,\u0275routerPageId:k}:{navigationId:T}}}return x.\u0275fac=function(T){_.$Z()},x.\u0275prov=_.Yz7({token:x,factory:x.\u0275fac}),x})();function gr(x){return"imperative"!==x}let eo=(()=>{class x{constructor(T,k,W,oe,Ee){this.router=T,this.route=k,this.tabIndexAttribute=W,this.renderer=oe,this.el=Ee,this.commands=null,this.onChanges=new E.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(T){if(null!=this.tabIndexAttribute)return;const k=this.renderer,W=this.el.nativeElement;null!==T?k.setAttribute(W,"tabindex",T):k.removeAttribute(W,"tabindex")}ngOnChanges(T){this.onChanges.next(this)}set routerLink(T){null!=T?(this.commands=Array.isArray(T)?T:[T],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const T={skipLocationChange:pn(this.skipLocationChange),replaceUrl:pn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,T),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:pn(this.preserveFragment)})}}return x.\u0275fac=function(T){return new(T||x)(_.Y36(Us),_.Y36(It),_.$8M("tabindex"),_.Y36(_.Qsj),_.Y36(_.SBq))},x.\u0275dir=_.lG2({type:x,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(T,k){1&T&&_.NdJ("click",function(){return k.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[_.TTD]}),x})(),Jo=(()=>{class x{constructor(T,k,W){this.router=T,this.route=k,this.locationStrategy=W,this.commands=null,this.href=null,this.onChanges=new E.x,this.subscription=T.events.subscribe(oe=>{oe instanceof jn&&this.updateTargetUrlAndHref()})}set routerLink(T){this.commands=null!=T?Array.isArray(T)?T:[T]:null}ngOnChanges(T){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(T,k,W,oe,Ee){if(0!==T||k||W||oe||Ee||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const Ne={skipLocationChange:pn(this.skipLocationChange),replaceUrl:pn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Ne),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:pn(this.preserveFragment)})}}return x.\u0275fac=function(T){return new(T||x)(_.Y36(Us),_.Y36(It),_.Y36(_e.S$))},x.\u0275dir=_.lG2({type:x,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(T,k){1&T&&_.NdJ("click",function(oe){return k.onClick(oe.button,oe.ctrlKey,oe.shiftKey,oe.altKey,oe.metaKey)}),2&T&&_.uIk("target",k.target)("href",k.href,_.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[_.TTD]}),x})();function pn(x){return""===x||!!x}class mn{}class Gt{preload(A,T){return(0,be.of)(null)}}let Gi=(()=>{class x{constructor(T,k,W,oe){this.router=T,this.injector=W,this.preloadingStrategy=oe,this.loader=new wc(W,k,Et=>T.triggerEvent(new vn(Et)),Et=>T.triggerEvent(new Nn(Et)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,ct.h)(T=>T instanceof jn),tt(()=>this.preload())).subscribe(()=>{})}preload(){const T=this.injector.get(_.h0i);return this.processRoutes(T,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(T,k){const W=[];for(const oe of k)if(oe.loadChildren&&!oe.canLoad&&oe._loadedConfig){const Ee=oe._loadedConfig;W.push(this.processRoutes(Ee.module,Ee.routes))}else oe.loadChildren&&!oe.canLoad?W.push(this.preloadConfig(T,oe)):oe.children&&W.push(this.processRoutes(T,oe.children));return(0,Le.D)(W).pipe((0,ot.J)(),(0,St.U)(oe=>{}))}preloadConfig(T,k){return this.preloadingStrategy.preload(k,()=>(k._loadedConfig?(0,be.of)(k._loadedConfig):this.loader.load(T.injector,k)).pipe((0,Ce.z)(oe=>(k._loadedConfig=oe,this.processRoutes(oe.module,oe.routes)))))}}return x.\u0275fac=function(T){return new(T||x)(_.LFG(Us),_.LFG(_.Sil),_.LFG(_.zs3),_.LFG(mn))},x.\u0275prov=_.Yz7({token:x,factory:x.\u0275fac}),x})(),vl=(()=>{class x{constructor(T,k,W={}){this.router=T,this.viewportScroller=k,this.options=W,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},W.scrollPositionRestoration=W.scrollPositionRestoration||"disabled",W.anchorScrolling=W.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(T=>{T instanceof Wn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=T.navigationTrigger,this.restoredId=T.restoredState?T.restoredState.navigationId:0):T instanceof jn&&(this.lastId=T.id,this.scheduleScrollEvent(T,this.router.parseUrl(T.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(T=>{T instanceof ti&&(T.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(T.position):T.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(T.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(T,k){this.router.triggerEvent(new ti(T,"popstate"===this.lastSource?this.store[this.restoredId]:null,k))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return x.\u0275fac=function(T){_.$Z()},x.\u0275prov=_.Yz7({token:x,factory:x.\u0275fac}),x})();const si=new _.OlP("ROUTER_CONFIGURATION"),El=new _.OlP("ROUTER_FORROOT_GUARD"),mu=[_e.Ye,{provide:Bt,useClass:qn},{provide:Us,useFactory:function mr(x,A,T,k,W,oe,Ee={},Ne,Et){const bn=new Us(null,x,A,T,k,W,En(oe));return Ne&&(bn.urlHandlingStrategy=Ne),Et&&(bn.routeReuseStrategy=Et),function jo(x,A){x.errorHandler&&(A.errorHandler=x.errorHandler),x.malformedUriErrorHandler&&(A.malformedUriErrorHandler=x.malformedUriErrorHandler),x.onSameUrlNavigation&&(A.onSameUrlNavigation=x.onSameUrlNavigation),x.paramsInheritanceStrategy&&(A.paramsInheritanceStrategy=x.paramsInheritanceStrategy),x.relativeLinkResolution&&(A.relativeLinkResolution=x.relativeLinkResolution),x.urlUpdateStrategy&&(A.urlUpdateStrategy=x.urlUpdateStrategy),x.canceledNavigationResolution&&(A.canceledNavigationResolution=x.canceledNavigationResolution)}(Ee,bn),Ee.enableTracing&&bn.events.subscribe(rr=>{var Fn,Vr;null===(Fn=console.group)||void 0===Fn||Fn.call(console,`Router Event: ${rr.constructor.name}`),console.log(rr.toString()),console.log(rr),null===(Vr=console.groupEnd)||void 0===Vr||Vr.call(console)}),bn},deps:[Bt,pe,_e.Ye,_.zs3,_.Sil,La,si,[class ma{},new _.FiY],[class yi{},new _.FiY]]},pe,{provide:It,useFactory:function Gs(x){return x.routerState.root},deps:[Us]},Gi,Gt,class mt{preload(A,T){return T().pipe(lt(()=>(0,be.of)(null)))}},{provide:si,useValue:{enableTracing:!1}}];function ya(){return new _.PXZ("Router",Us)}let tl=(()=>{class x{constructor(T,k){}static forRoot(T,k){return{ngModule:x,providers:[mu,va(T),{provide:El,useFactory:Bo,deps:[[Us,new _.FiY,new _.tp0]]},{provide:si,useValue:k||{}},{provide:_e.S$,useFactory:Va,deps:[_e.lw,[new _.tBr(_e.mr),new _.FiY],si]},{provide:vl,useFactory:Xo,deps:[Us,_e.EM,si]},{provide:mn,useExisting:k&&k.preloadingStrategy?k.preloadingStrategy:Gt},{provide:_.PXZ,multi:!0,useFactory:ya},[vi,{provide:_.ip1,multi:!0,useFactory:nr,deps:[vi]},{provide:Tr,useFactory:$o,deps:[vi]},{provide:_.tb,multi:!0,useExisting:Tr}]]}}static forChild(T){return{ngModule:x,providers:[va(T)]}}}return x.\u0275fac=function(T){return new(T||x)(_.LFG(El,8),_.LFG(Us,8))},x.\u0275mod=_.oAB({type:x}),x.\u0275inj=_.cJS({}),x})();function Xo(x,A,T){return T.scrollOffset&&A.setOffset(T.scrollOffset),new vl(x,A,T)}function Va(x,A,T={}){return T.useHash?new _e.Do(x,A):new _e.b0(x,A)}function Bo(x){return"guarded"}function va(x){return[{provide:_.deG,multi:!0,useValue:x},{provide:La,multi:!0,useValue:x}]}let vi=(()=>{class x{constructor(T){this.injector=T,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new E.x}appInitializer(){return this.injector.get(_e.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let k=null;const W=new Promise(Ne=>k=Ne),oe=this.injector.get(Us),Ee=this.injector.get(si);return"disabled"===Ee.initialNavigation?(oe.setUpLocationChangeListener(),k(!0)):"enabled"===Ee.initialNavigation||"enabledBlocking"===Ee.initialNavigation?(oe.hooks.afterPreactivation=()=>this.initNavigation?(0,be.of)(null):(this.initNavigation=!0,k(!0),this.resultOfPreactivationDone),oe.initialNavigation()):k(!0),W})}bootstrapListener(T){const k=this.injector.get(si),W=this.injector.get(Gi),oe=this.injector.get(vl),Ee=this.injector.get(Us),Ne=this.injector.get(_.z2F);T===Ne.components[0]&&(("enabledNonBlocking"===k.initialNavigation||void 0===k.initialNavigation)&&Ee.initialNavigation(),W.setUpPreloading(),oe.init(),Ee.resetRootComponentType(Ne.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return x.\u0275fac=function(T){return new(T||x)(_.LFG(_.zs3))},x.\u0275prov=_.Yz7({token:x,factory:x.\u0275fac}),x})();function nr(x){return x.appInitializer.bind(x)}function $o(x){return x.bootstrapListener.bind(x)}const Tr=new _.OlP("Router Initializer")},3942:(Yt,Je,j)=>{j.d(Je,{Z:()=>Ye});var _=j(2090),E=j(4859),J=j(9681),ye=j(1877);class Te{constructor(Ke,$e){this._delegate=Ke,this.firebase=$e,(0,J._addComponent)(Ke,new E.wA("app-compat",()=>this,"PUBLIC")),this.container=Ke.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ke){this._delegate.automaticDataCollectionEnabled=Ke}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ke=>{this._delegate.checkDestroyed(),Ke()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,J.deleteApp)(this._delegate)))}_getService(Ke,$e=J._DEFAULT_ENTRY_NAME){var it;this._delegate.checkDestroyed();const _t=this._delegate.container.getProvider(Ke);return!_t.isInitialized()&&"EXPLICIT"===(null===(it=_t.getComponent())||void 0===it?void 0:it.instantiationMode)&&_t.initialize(),_t.getImmediate({identifier:$e})}_removeServiceInstance(Ke,$e=J._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ke).clearInstance($e)}_addComponent(Ke){(0,J._addComponent)(this._delegate,Ke)}_addOrOverwriteComponent(Ke){(0,J._addOrOverwriteComponent)(this._delegate,Ke)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ve=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ce=function Pe(){const Ct=function he(Ct){const Ke={},$e={__esModule:!0,initializeApp:function We(bt,lt={}){const Ce=J.initializeApp(bt,lt);if((0,_.r3)(Ke,Ce.name))return Ke[Ce.name];const je=new Ct(Ce,$e);return Ke[Ce.name]=je,je},app:_t,registerVersion:J.registerVersion,setLogLevel:J.setLogLevel,onLog:J.onLog,apps:null,SDK_VERSION:J.SDK_VERSION,INTERNAL:{registerComponent:function Xe(bt){const lt=bt.name,Ce=lt.replace("-compat","");if(J._registerComponent(bt)&&"PUBLIC"===bt.type){const je=(tt=_t())=>{if("function"!=typeof tt[Ce])throw Ve.create("invalid-app-argument",{appName:lt});return tt[Ce]()};void 0!==bt.serviceProps&&(0,_.ZB)(je,bt.serviceProps),$e[Ce]=je,Ct.prototype[Ce]=function(...tt){return this._getService.bind(this,lt).apply(this,bt.multipleInstances?tt:[])}}return"PUBLIC"===bt.type?$e[Ce]:null},removeApp:function it(bt){delete Ke[bt]},useAsService:function At(bt,lt){return"serverAuth"===lt?null:lt},modularAPIs:J}};function _t(bt){if(!(0,_.r3)(Ke,bt=bt||J._DEFAULT_ENTRY_NAME))throw Ve.create("no-app",{appName:bt});return Ke[bt]}return $e.default=$e,Object.defineProperty($e,"apps",{get:function be(){return Object.keys(Ke).map(bt=>Ke[bt])}}),_t.App=Ct,$e}(Te);return Ct.INTERNAL=Object.assign(Object.assign({},Ct.INTERNAL),{createFirebaseNamespace:Pe,extendNamespace:function Ke($e){(0,_.ZB)(Ct,$e)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),Ct}(),fe=new ye.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){fe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ct=self.firebase.SDK_VERSION;Ct&&Ct.indexOf("LITE")>=0&&fe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ye=ce;!function ut(Ct){(0,J.registerVersion)("@firebase/app-compat","0.1.37",Ct)}()},9681:(Yt,Je,j)=>{j.r(Je),j.d(Je,{FirebaseError:()=>ye.ZR,SDK_VERSION:()=>Ur,_DEFAULT_ENTRY_NAME:()=>St,_addComponent:()=>gt,_addOrOverwriteComponent:()=>Dt,_apps:()=>an,_clearComponents:()=>yn,_components:()=>wn,_getProvider:()=>ot,_registerComponent:()=>Me,_removeServiceInstance:()=>_e,deleteApp:()=>tn,getApp:()=>Rt,getApps:()=>xr,initializeApp:()=>yr,onLog:()=>Nn,registerVersion:()=>vn,setLogLevel:()=>Or});var _=j(5861),E=j(4859),J=j(1877),ye=j(2090),Te=j(8766);class Le{constructor(dt){this.container=dt}getPlatformInfoString(){return this.container.getProviders().map(Kt=>{if(function Ve(Ot){const dt=Ot.getComponent();return"VERSION"===(null==dt?void 0:dt.type)}(Kt)){const cn=Kt.getImmediate();return`${cn.library}/${cn.version}`}return null}).filter(Kt=>Kt).join(" ")}}const he="@firebase/app",ce=new J.Yd("@firebase/app"),St="[DEFAULT]",Zt={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},an=new Map,wn=new Map;function gt(Ot,dt){try{Ot.container.addComponent(dt)}catch(Kt){ce.debug(`Component ${dt.name} failed to register with FirebaseApp ${Ot.name}`,Kt)}}function Dt(Ot,dt){Ot.container.addOrOverwriteComponent(dt)}function Me(Ot){const dt=Ot.name;if(wn.has(dt))return ce.debug(`There were multiple attempts to register component ${dt}.`),!1;wn.set(dt,Ot);for(const Kt of an.values())gt(Kt,Ot);return!0}function ot(Ot,dt){const Kt=Ot.container.getProvider("heartbeat").getImmediate({optional:!0});return Kt&&Kt.triggerHeartbeat(),Ot.container.getProvider(dt)}function _e(Ot,dt,Kt=St){ot(Ot,dt).clearInstance(Kt)}function yn(){wn.clear()}const jn=new ye.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class qr{constructor(dt,Kt,cn){this._isDeleted=!1,this._options=Object.assign({},dt),this._config=Object.assign({},Kt),this._name=Kt.name,this._automaticDataCollectionEnabled=Kt.automaticDataCollectionEnabled,this._container=cn,this.container.addComponent(new E.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(dt){this.checkDestroyed(),this._automaticDataCollectionEnabled=dt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(dt){this._isDeleted=dt}checkDestroyed(){if(this.isDeleted)throw jn.create("app-deleted",{appName:this._name})}}const Ur="9.12.1";function yr(Ot,dt={}){let Kt=Ot;"object"!=typeof dt&&(dt={name:dt});const cn=Object.assign({name:St,automaticDataCollectionEnabled:!1},dt),hn=cn.name;if("string"!=typeof hn||!hn)throw jn.create("bad-app-name",{appName:String(hn)});if(Kt||(Kt=(0,ye.aH)()),!Kt)throw jn.create("no-options");const tr=an.get(hn);if(tr){if((0,ye.vZ)(Kt,tr.options)&&(0,ye.vZ)(cn,tr.config))return tr;throw jn.create("duplicate-app",{appName:hn})}const Se=new E.H0(hn);for(const Fe of wn.values())Se.addComponent(Fe);const we=new qr(Kt,cn,Se);return an.set(hn,we),we}function Rt(Ot=St){const dt=an.get(Ot);if(!dt&&Ot===St)return yr();if(!dt)throw jn.create("no-app",{appName:Ot});return dt}function xr(){return Array.from(an.values())}function tn(Ot){return ir.apply(this,arguments)}function ir(){return(ir=(0,_.Z)(function*(Ot){const dt=Ot.name;an.has(dt)&&(an.delete(dt),yield Promise.all(Ot.container.getProviders().map(Kt=>Kt.delete())),Ot.isDeleted=!0)})).apply(this,arguments)}function vn(Ot,dt,Kt){var cn;let hn=null!==(cn=Zt[Ot])&&void 0!==cn?cn:Ot;Kt&&(hn+=`-${Kt}`);const tr=hn.match(/\s|\//),Se=dt.match(/\s|\//);if(tr||Se){const we=[`Unable to register library "${hn}" with version "${dt}":`];return tr&&we.push(`library name "${hn}" contains illegal characters (whitespace or "/")`),tr&&Se&&we.push("and"),Se&&we.push(`version name "${dt}" contains illegal characters (whitespace or "/")`),void ce.warn(we.join(" "))}Me(new E.wA(`${hn}-version`,()=>({library:hn,version:dt}),"VERSION"))}function Nn(Ot,dt){if(null!==Ot&&"function"!=typeof Ot)throw jn.create("invalid-log-argument");(0,J.Am)(Ot,dt)}function Or(Ot){(0,J.Ub)(Ot)}const Mr="firebase-heartbeat-store";let ti=null;function sn(){return ti||(ti=(0,Te.X3)("firebase-heartbeat-database",1,{upgrade:(Ot,dt)=>{0===dt&&Ot.createObjectStore(Mr)}}).catch(Ot=>{throw jn.create("idb-open",{originalErrorMessage:Ot.message})})),ti}function un(){return(un=(0,_.Z)(function*(Ot){var dt;try{return(yield sn()).transaction(Mr).objectStore(Mr).get(Zr(Ot))}catch(Kt){if(Kt instanceof ye.ZR)ce.warn(Kt.message);else{const cn=jn.create("idb-get",{originalErrorMessage:null===(dt=Kt)||void 0===dt?void 0:dt.message});ce.warn(cn.message)}}})).apply(this,arguments)}function nn(Ot,dt){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,_.Z)(function*(Ot,dt){var Kt;try{const hn=(yield sn()).transaction(Mr,"readwrite");return yield hn.objectStore(Mr).put(dt,Zr(Ot)),hn.done}catch(cn){if(cn instanceof ye.ZR)ce.warn(cn.message);else{const hn=jn.create("idb-set",{originalErrorMessage:null===(Kt=cn)||void 0===Kt?void 0:Kt.message});ce.warn(hn.message)}}})).apply(this,arguments)}function Zr(Ot){return`${Ot.name}!${Ot.options.appId}`}class dr{constructor(dt){this.container=dt,this._heartbeatsCache=null;const Kt=this.container.getProvider("app").getImmediate();this._storage=new hr(Kt),this._heartbeatsCachePromise=this._storage.read().then(cn=>(this._heartbeatsCache=cn,cn))}triggerHeartbeat(){var dt=this;return(0,_.Z)(function*(){const cn=dt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),hn=ar();if(null===dt._heartbeatsCache&&(dt._heartbeatsCache=yield dt._heartbeatsCachePromise),dt._heartbeatsCache.lastSentHeartbeatDate!==hn&&!dt._heartbeatsCache.heartbeats.some(tr=>tr.date===hn))return dt._heartbeatsCache.heartbeats.push({date:hn,agent:cn}),dt._heartbeatsCache.heartbeats=dt._heartbeatsCache.heartbeats.filter(tr=>{const Se=new Date(tr.date).valueOf();return Date.now()-Se<=2592e6}),dt._storage.overwrite(dt._heartbeatsCache)})()}getHeartbeatsHeader(){var dt=this;return(0,_.Z)(function*(){if(null===dt._heartbeatsCache&&(yield dt._heartbeatsCachePromise),null===dt._heartbeatsCache||0===dt._heartbeatsCache.heartbeats.length)return"";const Kt=ar(),{heartbeatsToSend:cn,unsentEntries:hn}=function En(Ot,dt=1024){const Kt=[];let cn=Ot.slice();for(const hn of Ot){const tr=Kt.find(Se=>Se.agent===hn.agent);if(tr){if(tr.dates.push(hn.date),Gn(Kt)>dt){tr.dates.pop();break}}else if(Kt.push({agent:hn.agent,dates:[hn.date]}),Gn(Kt)>dt){Kt.pop();break}cn=cn.slice(1)}return{heartbeatsToSend:Kt,unsentEntries:cn}}(dt._heartbeatsCache.heartbeats),tr=(0,ye.L)(JSON.stringify({version:2,heartbeats:cn}));return dt._heartbeatsCache.lastSentHeartbeatDate=Kt,hn.length>0?(dt._heartbeatsCache.heartbeats=hn,yield dt._storage.overwrite(dt._heartbeatsCache)):(dt._heartbeatsCache.heartbeats=[],dt._storage.overwrite(dt._heartbeatsCache)),tr})()}}function ar(){return(new Date).toISOString().substring(0,10)}class hr{constructor(dt){this.app=dt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,ye.hl)()&&(0,ye.eu)().then(()=>!0).catch(()=>!1)})()}read(){var dt=this;return(0,_.Z)(function*(){return(yield dt._canUseIndexedDBPromise)&&(yield function Vn(Ot){return un.apply(this,arguments)}(dt.app))||{heartbeats:[]}})()}overwrite(dt){var Kt=this;return(0,_.Z)(function*(){var cn;if(yield Kt._canUseIndexedDBPromise){const tr=yield Kt.read();return nn(Kt.app,{lastSentHeartbeatDate:null!==(cn=dt.lastSentHeartbeatDate)&&void 0!==cn?cn:tr.lastSentHeartbeatDate,heartbeats:dt.heartbeats})}})()}add(dt){var Kt=this;return(0,_.Z)(function*(){var cn;if(yield Kt._canUseIndexedDBPromise){const tr=yield Kt.read();return nn(Kt.app,{lastSentHeartbeatDate:null!==(cn=dt.lastSentHeartbeatDate)&&void 0!==cn?cn:tr.lastSentHeartbeatDate,heartbeats:[...tr.heartbeats,...dt.heartbeats]})}})()}}function Gn(Ot){return(0,ye.L)(JSON.stringify({version:2,heartbeats:Ot})).length}!function cr(Ot){Me(new E.wA("platform-logger",dt=>new Le(dt),"PRIVATE")),Me(new E.wA("heartbeat",dt=>new dr(dt),"PRIVATE")),vn(he,"0.8.2",Ot),vn(he,"0.8.2","esm2017"),vn("fire-js","")}("")},4859:(Yt,Je,j)=>{j.d(Je,{wA:()=>J,H0:()=>he});var _=j(5861),E=j(2090);class J{constructor(ce,fe,ke){this.name=ce,this.instanceFactory=fe,this.type=ke,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ce){return this.instantiationMode=ce,this}setMultipleInstances(ce){return this.multipleInstances=ce,this}setServiceProps(ce){return this.serviceProps=ce,this}setInstanceCreatedCallback(ce){return this.onInstanceCreated=ce,this}}const ye="[DEFAULT]";class Te{constructor(ce,fe){this.name=ce,this.container=fe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ce){const fe=this.normalizeInstanceIdentifier(ce);if(!this.instancesDeferred.has(fe)){const ke=new E.BH;if(this.instancesDeferred.set(fe,ke),this.isInitialized(fe)||this.shouldAutoInitialize())try{const yt=this.getOrInitializeService({instanceIdentifier:fe});yt&&ke.resolve(yt)}catch(yt){}}return this.instancesDeferred.get(fe).promise}getImmediate(ce){var fe;const ke=this.normalizeInstanceIdentifier(null==ce?void 0:ce.identifier),yt=null!==(fe=null==ce?void 0:ce.optional)&&void 0!==fe&&fe;if(!this.isInitialized(ke)&&!this.shouldAutoInitialize()){if(yt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ke})}catch(ut){if(yt)return null;throw ut}}getComponent(){return this.component}setComponent(ce){if(ce.name!==this.name)throw Error(`Mismatching Component ${ce.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ce,this.shouldAutoInitialize()){if(function Ve(Pe){return"EAGER"===Pe.instantiationMode}(ce))try{this.getOrInitializeService({instanceIdentifier:ye})}catch(fe){}for(const[fe,ke]of this.instancesDeferred.entries()){const yt=this.normalizeInstanceIdentifier(fe);try{const ut=this.getOrInitializeService({instanceIdentifier:yt});ke.resolve(ut)}catch(ut){}}}}clearInstance(ce=ye){this.instancesDeferred.delete(ce),this.instancesOptions.delete(ce),this.instances.delete(ce)}delete(){var ce=this;return(0,_.Z)(function*(){const fe=Array.from(ce.instances.values());yield Promise.all([...fe.filter(ke=>"INTERNAL"in ke).map(ke=>ke.INTERNAL.delete()),...fe.filter(ke=>"_delete"in ke).map(ke=>ke._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ce=ye){return this.instances.has(ce)}getOptions(ce=ye){return this.instancesOptions.get(ce)||{}}initialize(ce={}){const{options:fe={}}=ce,ke=this.normalizeInstanceIdentifier(ce.instanceIdentifier);if(this.isInitialized(ke))throw Error(`${this.name}(${ke}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const yt=this.getOrInitializeService({instanceIdentifier:ke,options:fe});for(const[ut,Ye]of this.instancesDeferred.entries())ke===this.normalizeInstanceIdentifier(ut)&&Ye.resolve(yt);return yt}onInit(ce,fe){var ke;const yt=this.normalizeInstanceIdentifier(fe),ut=null!==(ke=this.onInitCallbacks.get(yt))&&void 0!==ke?ke:new Set;ut.add(ce),this.onInitCallbacks.set(yt,ut);const Ye=this.instances.get(yt);return Ye&&ce(Ye,yt),()=>{ut.delete(ce)}}invokeOnInitCallbacks(ce,fe){const ke=this.onInitCallbacks.get(fe);if(ke)for(const yt of ke)try{yt(ce,fe)}catch(ut){}}getOrInitializeService({instanceIdentifier:ce,options:fe={}}){let ke=this.instances.get(ce);if(!ke&&this.component&&(ke=this.component.instanceFactory(this.container,{instanceIdentifier:(Pe=ce,Pe===ye?void 0:Pe),options:fe}),this.instances.set(ce,ke),this.instancesOptions.set(ce,fe),this.invokeOnInitCallbacks(ke,ce),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ce,ke)}catch(yt){}var Pe;return ke||null}normalizeInstanceIdentifier(ce=ye){return this.component?this.component.multipleInstances?ce:ye:ce}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(ce){this.name=ce,this.providers=new Map}addComponent(ce){const fe=this.getProvider(ce.name);if(fe.isComponentSet())throw new Error(`Component ${ce.name} has already been registered with ${this.name}`);fe.setComponent(ce)}addOrOverwriteComponent(ce){this.getProvider(ce.name).isComponentSet()&&this.providers.delete(ce.name),this.addComponent(ce)}getProvider(ce){if(this.providers.has(ce))return this.providers.get(ce);const fe=new Te(ce,this);return this.providers.set(ce,fe),fe}getProviders(){return Array.from(this.providers.values())}}},1877:(Yt,Je,j)=>{j.d(Je,{in:()=>E,Yd:()=>Ve,Ub:()=>he,Am:()=>Pe});const _=[];var E=(()=>{return(ce=E||(E={}))[ce.DEBUG=0]="DEBUG",ce[ce.VERBOSE=1]="VERBOSE",ce[ce.INFO=2]="INFO",ce[ce.WARN=3]="WARN",ce[ce.ERROR=4]="ERROR",ce[ce.SILENT=5]="SILENT",E;var ce})();const J={debug:E.DEBUG,verbose:E.VERBOSE,info:E.INFO,warn:E.WARN,error:E.ERROR,silent:E.SILENT},ye=E.INFO,Te={[E.DEBUG]:"log",[E.VERBOSE]:"log",[E.INFO]:"info",[E.WARN]:"warn",[E.ERROR]:"error"},Le=(ce,fe,...ke)=>{if(fe<ce.logLevel)return;const yt=(new Date).toISOString(),ut=Te[fe];if(!ut)throw new Error(`Attempted to log a message with an invalid logType (value: ${fe})`);console[ut](`[${yt}]  ${ce.name}:`,...ke)};class Ve{constructor(fe){this.name=fe,this._logLevel=ye,this._logHandler=Le,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(fe){if(!(fe in E))throw new TypeError(`Invalid value "${fe}" assigned to \`logLevel\``);this._logLevel=fe}setLogLevel(fe){this._logLevel="string"==typeof fe?J[fe]:fe}get logHandler(){return this._logHandler}set logHandler(fe){if("function"!=typeof fe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=fe}get userLogHandler(){return this._userLogHandler}set userLogHandler(fe){this._userLogHandler=fe}debug(...fe){this._userLogHandler&&this._userLogHandler(this,E.DEBUG,...fe),this._logHandler(this,E.DEBUG,...fe)}log(...fe){this._userLogHandler&&this._userLogHandler(this,E.VERBOSE,...fe),this._logHandler(this,E.VERBOSE,...fe)}info(...fe){this._userLogHandler&&this._userLogHandler(this,E.INFO,...fe),this._logHandler(this,E.INFO,...fe)}warn(...fe){this._userLogHandler&&this._userLogHandler(this,E.WARN,...fe),this._logHandler(this,E.WARN,...fe)}error(...fe){this._userLogHandler&&this._userLogHandler(this,E.ERROR,...fe),this._logHandler(this,E.ERROR,...fe)}}function he(ce){_.forEach(fe=>{fe.setLogLevel(ce)})}function Pe(ce,fe){for(const ke of _){let yt=null;fe&&fe.level&&(yt=J[fe.level]),ke.userLogHandler=null===ce?null:(ut,Ye,...Ct)=>{const Ke=Ct.map($e=>{if(null==$e)return null;if("string"==typeof $e)return $e;if("number"==typeof $e||"boolean"==typeof $e)return $e.toString();if($e instanceof Error)return $e.message;try{return JSON.stringify($e)}catch(it){return null}}).filter($e=>$e).join(" ");Ye>=(null!=yt?yt:ut.logLevel)&&ce({level:E[Ye].toLowerCase(),message:Ke,args:Ct,type:ut.name})}}}},8766:(Yt,Je,j)=>{j.d(Je,{Lj:()=>We,X3:()=>_t});var _=j(5861);let J,ye;const Ve=new WeakMap,he=new WeakMap,Pe=new WeakMap,ce=new WeakMap,fe=new WeakMap;let ut={get(lt,Ce,je){if(lt instanceof IDBTransaction){if("done"===Ce)return he.get(lt);if("objectStoreNames"===Ce)return lt.objectStoreNames||Pe.get(lt);if("store"===Ce)return je.objectStoreNames[1]?void 0:je.objectStore(je.objectStoreNames[0])}return $e(lt[Ce])},set:(lt,Ce,je)=>(lt[Ce]=je,!0),has:(lt,Ce)=>lt instanceof IDBTransaction&&("done"===Ce||"store"===Ce)||Ce in lt};function Ke(lt){return"function"==typeof lt?function Ct(lt){return lt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Le(){return ye||(ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(lt)?function(...Ce){return lt.apply(it(this),Ce),$e(Ve.get(this))}:function(...Ce){return $e(lt.apply(it(this),Ce))}:function(Ce,...je){const tt=lt.call(it(this),Ce,...je);return Pe.set(tt,Ce.sort?Ce.sort():[Ce]),$e(tt)}}(lt):(lt instanceof IDBTransaction&&function yt(lt){if(he.has(lt))return;const Ce=new Promise((je,tt)=>{const ct=()=>{lt.removeEventListener("complete",wt),lt.removeEventListener("error",et),lt.removeEventListener("abort",et)},wt=()=>{je(),ct()},et=()=>{tt(lt.error||new DOMException("AbortError","AbortError")),ct()};lt.addEventListener("complete",wt),lt.addEventListener("error",et),lt.addEventListener("abort",et)});he.set(lt,Ce)}(lt),((lt,Ce)=>Ce.some(je=>lt instanceof je))(lt,function Te(){return J||(J=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(lt,ut):lt)}function $e(lt){if(lt instanceof IDBRequest)return function ke(lt){const Ce=new Promise((je,tt)=>{const ct=()=>{lt.removeEventListener("success",wt),lt.removeEventListener("error",et)},wt=()=>{je($e(lt.result)),ct()},et=()=>{tt(lt.error),ct()};lt.addEventListener("success",wt),lt.addEventListener("error",et)});return Ce.then(je=>{je instanceof IDBCursor&&Ve.set(je,lt)}).catch(()=>{}),fe.set(Ce,lt),Ce}(lt);if(ce.has(lt))return ce.get(lt);const Ce=Ke(lt);return Ce!==lt&&(ce.set(lt,Ce),fe.set(Ce,lt)),Ce}const it=lt=>fe.get(lt);function _t(lt,Ce,{blocked:je,upgrade:tt,blocking:ct,terminated:wt}={}){const et=indexedDB.open(lt,Ce),Tn=$e(et);return tt&&et.addEventListener("upgradeneeded",Jt=>{tt($e(et.result),Jt.oldVersion,Jt.newVersion,$e(et.transaction))}),je&&et.addEventListener("blocked",()=>je()),Tn.then(Jt=>{wt&&Jt.addEventListener("close",()=>wt()),ct&&Jt.addEventListener("versionchange",()=>ct())}).catch(()=>{}),Tn}function We(lt,{blocked:Ce}={}){const je=indexedDB.deleteDatabase(lt);return Ce&&je.addEventListener("blocked",()=>Ce()),$e(je).then(()=>{})}const be=["get","getKey","getAll","getAllKeys","count"],Xe=["put","add","delete","clear"],At=new Map;function bt(lt,Ce){if(!(lt instanceof IDBDatabase)||Ce in lt||"string"!=typeof Ce)return;if(At.get(Ce))return At.get(Ce);const je=Ce.replace(/FromIndex$/,""),tt=Ce!==je,ct=Xe.includes(je);if(!(je in(tt?IDBIndex:IDBObjectStore).prototype)||!ct&&!be.includes(je))return;const wt=function(){var et=(0,_.Z)(function*(Tn,...Jt){const On=this.transaction(Tn,ct?"readwrite":"readonly");let St=On.store;return tt&&(St=St.index(Jt.shift())),(yield Promise.all([St[je](...Jt),ct&&On.done]))[0]});return function(Jt){return et.apply(this,arguments)}}();return At.set(Ce,wt),wt}!function Ye(lt){ut=lt(ut)}(lt=>nE(tE({},lt),{get:(Ce,je,tt)=>bt(Ce,je)||lt.get(Ce,je,tt),has:(Ce,je)=>!!bt(Ce,je)||lt.has(Ce,je)}))},2290:(Yt,Je,j)=>{j.d(Je,{Rh:()=>On,_W:()=>et});var _=j(5e3),E=j(1777),J=j(7579),ye=j(9808),Te=j(2313);const Le=["toast-component",""];function Ve(gt,Dt){if(1&gt){const Me=_.EpF();_.TgZ(0,"button",5),_.NdJ("click",function(){return _.CHM(Me),_.oxw().remove()}),_.TgZ(1,"span",6),_._uU(2,"\xd7"),_.qZA(),_.qZA()}}function he(gt,Dt){if(1&gt&&(_.ynx(0),_._uU(1),_.BQk()),2&gt){const Me=_.oxw(2);_.xp6(1),_.hij("[",Me.duplicatesCount+1,"]")}}function Pe(gt,Dt){if(1&gt&&(_.TgZ(0,"div"),_._uU(1),_.YNc(2,he,2,1,"ng-container",4),_.qZA()),2&gt){const Me=_.oxw();_.Tol(Me.options.titleClass),_.uIk("aria-label",Me.title),_.xp6(1),_.hij(" ",Me.title," "),_.xp6(1),_.Q6J("ngIf",Me.duplicatesCount)}}function ce(gt,Dt){if(1&gt&&_._UZ(0,"div",7),2&gt){const Me=_.oxw();_.Tol(Me.options.messageClass),_.Q6J("innerHTML",Me.message,_.oJD)}}function fe(gt,Dt){if(1&gt&&(_.TgZ(0,"div",8),_._uU(1),_.qZA()),2&gt){const Me=_.oxw();_.Tol(Me.options.messageClass),_.uIk("aria-label",Me.message),_.xp6(1),_.hij(" ",Me.message," ")}}function ke(gt,Dt){if(1&gt&&(_.TgZ(0,"div"),_._UZ(1,"div",9),_.qZA()),2&gt){const Me=_.oxw();_.xp6(1),_.Udp("width",Me.width+"%")}}function yt(gt,Dt){if(1&gt){const Me=_.EpF();_.TgZ(0,"button",5),_.NdJ("click",function(){return _.CHM(Me),_.oxw().remove()}),_.TgZ(1,"span",6),_._uU(2,"\xd7"),_.qZA(),_.qZA()}}function ut(gt,Dt){if(1&gt&&(_.ynx(0),_._uU(1),_.BQk()),2&gt){const Me=_.oxw(2);_.xp6(1),_.hij("[",Me.duplicatesCount+1,"]")}}function Ye(gt,Dt){if(1&gt&&(_.TgZ(0,"div"),_._uU(1),_.YNc(2,ut,2,1,"ng-container",4),_.qZA()),2&gt){const Me=_.oxw();_.Tol(Me.options.titleClass),_.uIk("aria-label",Me.title),_.xp6(1),_.hij(" ",Me.title," "),_.xp6(1),_.Q6J("ngIf",Me.duplicatesCount)}}function Ct(gt,Dt){if(1&gt&&_._UZ(0,"div",7),2&gt){const Me=_.oxw();_.Tol(Me.options.messageClass),_.Q6J("innerHTML",Me.message,_.oJD)}}function Ke(gt,Dt){if(1&gt&&(_.TgZ(0,"div",8),_._uU(1),_.qZA()),2&gt){const Me=_.oxw();_.Tol(Me.options.messageClass),_.uIk("aria-label",Me.message),_.xp6(1),_.hij(" ",Me.message," ")}}function $e(gt,Dt){if(1&gt&&(_.TgZ(0,"div"),_._UZ(1,"div",9),_.qZA()),2&gt){const Me=_.oxw();_.xp6(1),_.Udp("width",Me.width+"%")}}class We{constructor(Dt,Me){this.component=Dt,this.injector=Me}attach(Dt,Me){return this._attachedHost=Dt,Dt.attach(this,Me)}detach(){const Dt=this._attachedHost;if(Dt)return this._attachedHost=void 0,Dt.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(Dt){this._attachedHost=Dt}}class Xe{constructor(Dt,Me,ot,_e,yn,Wn){this.toastId=Dt,this.config=Me,this.message=ot,this.title=_e,this.toastType=yn,this.toastRef=Wn,this._onTap=new J.x,this._onAction=new J.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(Dt){this._onAction.next(Dt)}onAction(){return this._onAction.asObservable()}}const At={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},bt=new _.OlP("ToastConfig");class lt{constructor(Dt){this._overlayRef=Dt,this.duplicatesCount=0,this._afterClosed=new J.x,this._activate=new J.x,this._manualClose=new J.x,this._resetTimeout=new J.x,this._countDuplicate=new J.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(Dt,Me){Dt&&this._resetTimeout.next(),Me&&this._countDuplicate.next(++this.duplicatesCount)}}class Ce{constructor(Dt,Me){this._toastPackage=Dt,this._parentInjector=Me}get(Dt,Me,ot){return Dt===Xe?this._toastPackage:this._parentInjector.get(Dt,Me,ot)}}class je extends class be{attach(Dt,Me){return this._attachedPortal=Dt,this.attachComponentPortal(Dt,Me)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(Dt){this._disposeFn=Dt}}{constructor(Dt,Me,ot){super(),this._hostDomElement=Dt,this._componentFactoryResolver=Me,this._appRef=ot}attachComponentPortal(Dt,Me){const ot=this._componentFactoryResolver.resolveComponentFactory(Dt.component);let _e;return _e=ot.create(Dt.injector),this._appRef.attachView(_e.hostView),this.setDisposeFn(()=>{this._appRef.detachView(_e.hostView),_e.destroy()}),Me?this._hostDomElement.insertBefore(this._getComponentRootNode(_e),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(_e)),_e}_getComponentRootNode(Dt){return Dt.hostView.rootNodes[0]}}class tt{constructor(Dt){this._portalHost=Dt}attach(Dt,Me=!0){return this._portalHost.attach(Dt,Me)}detach(){return this._portalHost.detach()}}let ct=(()=>{class gt{constructor(Me){this._document=Me}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const Me=this._document.createElement("div");Me.classList.add("overlay-container"),Me.setAttribute("aria-live","polite"),this._document.body.appendChild(Me),this._containerElement=Me}}return gt.\u0275fac=function(Me){return new(Me||gt)(_.LFG(ye.K0))},gt.\u0275prov=_.Yz7({token:gt,factory:gt.\u0275fac,providedIn:"root"}),gt})(),wt=(()=>{class gt{constructor(Me,ot,_e,yn){this._overlayContainer=Me,this._componentFactoryResolver=ot,this._appRef=_e,this._document=yn,this._paneElements=new Map}create(Me,ot){return this._createOverlayRef(this.getPaneElement(Me,ot))}getPaneElement(Me="",ot){return this._paneElements.get(ot)||this._paneElements.set(ot,{}),this._paneElements.get(ot)[Me]||(this._paneElements.get(ot)[Me]=this._createPaneElement(Me,ot)),this._paneElements.get(ot)[Me]}_createPaneElement(Me,ot){const _e=this._document.createElement("div");return _e.id="toast-container",_e.classList.add(Me),_e.classList.add("toast-container"),ot?ot.getContainerElement().appendChild(_e):this._overlayContainer.getContainerElement().appendChild(_e),_e}_createPortalHost(Me){return new je(Me,this._componentFactoryResolver,this._appRef)}_createOverlayRef(Me){return new tt(this._createPortalHost(Me))}}return gt.\u0275fac=function(Me){return new(Me||gt)(_.LFG(ct),_.LFG(_._Vd),_.LFG(_.z2F),_.LFG(ye.K0))},gt.\u0275prov=_.Yz7({token:gt,factory:gt.\u0275fac,providedIn:"root"}),gt})(),et=(()=>{class gt{constructor(Me,ot,_e,yn,Wn){this.overlay=ot,this._injector=_e,this.sanitizer=yn,this.ngZone=Wn,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},Me.default),Me.config),Me.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},Me.default.iconClasses),Me.config.iconClasses))}show(Me,ot,_e={},yn=""){return this._preBuildNotification(yn,Me,ot,this.applyConfig(_e))}success(Me,ot,_e={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",Me,ot,this.applyConfig(_e))}error(Me,ot,_e={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",Me,ot,this.applyConfig(_e))}info(Me,ot,_e={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",Me,ot,this.applyConfig(_e))}warning(Me,ot,_e={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",Me,ot,this.applyConfig(_e))}clear(Me){for(const ot of this.toasts)if(void 0!==Me){if(ot.toastId===Me)return void ot.toastRef.manualClose()}else ot.toastRef.manualClose()}remove(Me){const ot=this._findToast(Me);if(!ot||(ot.activeToast.toastRef.close(),this.toasts.splice(ot.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const _e=this.toasts[this.currentlyActive].toastRef;_e.isInactive()||(this.currentlyActive=this.currentlyActive+1,_e.activate())}return!0}findDuplicate(Me="",ot="",_e,yn){const{includeTitleDuplicates:Wn}=this.toastrConfig;for(const jn of this.toasts){const qr=Wn&&jn.title===Me;if((!Wn||qr)&&jn.message===ot)return jn.toastRef.onDuplicate(_e,yn),jn}return null}applyConfig(Me={}){return Object.assign(Object.assign({},this.toastrConfig),Me)}_findToast(Me){for(let ot=0;ot<this.toasts.length;ot++)if(this.toasts[ot].toastId===Me)return{index:ot,activeToast:this.toasts[ot]};return null}_preBuildNotification(Me,ot,_e,yn){return yn.onActivateTick?this.ngZone.run(()=>this._buildNotification(Me,ot,_e,yn)):this._buildNotification(Me,ot,_e,yn)}_buildNotification(Me,ot,_e,yn){if(!yn.toastComponent)throw new Error("toastComponent required");const Wn=this.findDuplicate(_e,ot,this.toastrConfig.resetTimeoutOnDuplicate&&yn.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&_e||ot)&&this.toastrConfig.preventDuplicates&&null!==Wn)return Wn;this.previousToastMessage=ot;let jn=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(jn=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const qr=this.overlay.create(yn.positionClass,this.overlayContainer);this.index=this.index+1;let Ur=ot;ot&&yn.enableHtml&&(Ur=this.sanitizer.sanitize(_.q3G.HTML,ot));const yr=new lt(qr),Rt=new Xe(this.index,yn,Ur,_e,Me,yr),xr=new Ce(Rt,this._injector),tn=new We(yn.toastComponent,xr),ir=qr.attach(tn,this.toastrConfig.newestOnTop);yr.componentInstance=ir.instance;const vn={toastId:this.index,title:_e||"",message:ot||"",toastRef:yr,onShown:yr.afterActivate(),onHidden:yr.afterClosed(),onTap:Rt.onTap(),onAction:Rt.onAction(),portal:ir};return jn||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{vn.toastRef.activate()})),this.toasts.push(vn),vn}}return gt.\u0275fac=function(Me){return new(Me||gt)(_.LFG(bt),_.LFG(wt),_.LFG(_.zs3),_.LFG(Te.H7),_.LFG(_.R0b))},gt.\u0275prov=_.Yz7({token:gt,factory:gt.\u0275fac,providedIn:"root"}),gt})(),Tn=(()=>{class gt{constructor(Me,ot,_e){this.toastrService=Me,this.toastPackage=ot,this.ngZone=_e,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=ot.message,this.title=ot.title,this.options=ot.config,this.originalTimeout=ot.config.timeOut,this.toastClasses=`${ot.toastType} ${ot.config.toastClass}`,this.sub=ot.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=ot.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=ot.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=ot.toastRef.countDuplicate().subscribe(yn=>{this.duplicatesCount=yn})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const Me=(new Date).getTime();this.width=(this.hideTime-Me)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(Me,ot){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(Me),ot)):this.timeout=setTimeout(()=>Me(),ot)}outsideInterval(Me,ot){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(Me),ot)):this.intervalId=setInterval(()=>Me(),ot)}runInsideAngular(Me){this.ngZone?this.ngZone.run(()=>Me()):Me()}}return gt.\u0275fac=function(Me){return new(Me||gt)(_.Y36(et),_.Y36(Xe),_.Y36(_.R0b))},gt.\u0275cmp=_.Xpm({type:gt,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(Me,ot){1&Me&&_.NdJ("click",function(){return ot.tapToast()})("mouseenter",function(){return ot.stickAround()})("mouseleave",function(){return ot.delayedHideToast()}),2&Me&&(_.d8E("@flyInOut",ot.state),_.Tol(ot.toastClasses),_.Udp("display",ot.displayStyle))},attrs:Le,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(Me,ot){1&Me&&(_.YNc(0,Ve,3,0,"button",0),_.YNc(1,Pe,3,5,"div",1),_.YNc(2,ce,1,3,"div",2),_.YNc(3,fe,2,4,"div",3),_.YNc(4,ke,2,2,"div",4)),2&Me&&(_.Q6J("ngIf",ot.options.closeButton),_.xp6(1),_.Q6J("ngIf",ot.title),_.xp6(1),_.Q6J("ngIf",ot.message&&ot.options.enableHtml),_.xp6(1),_.Q6J("ngIf",ot.message&&!ot.options.enableHtml),_.xp6(1),_.Q6J("ngIf",ot.options.progressBar))},directives:[ye.O5],encapsulation:2,data:{animation:[(0,E.X$)("flyInOut",[(0,E.SB)("inactive",(0,E.oB)({opacity:0})),(0,E.SB)("active",(0,E.oB)({opacity:1})),(0,E.SB)("removed",(0,E.oB)({opacity:0})),(0,E.eR)("inactive => active",(0,E.jt)("{{ easeTime }}ms {{ easing }}")),(0,E.eR)("active => removed",(0,E.jt)("{{ easeTime }}ms {{ easing }}"))])]}}),gt})();const Jt=Object.assign(Object.assign({},At),{toastComponent:Tn});let On=(()=>{class gt{static forRoot(Me={}){return{ngModule:gt,providers:[{provide:bt,useValue:{default:Jt,config:Me}}]}}}return gt.\u0275fac=function(Me){return new(Me||gt)},gt.\u0275mod=_.oAB({type:gt}),gt.\u0275inj=_.cJS({imports:[[ye.ez]]}),gt})(),Zt=(()=>{class gt{constructor(Me,ot,_e){this.toastrService=Me,this.toastPackage=ot,this.appRef=_e,this.width=-1,this.toastClasses="",this.state="inactive",this.message=ot.message,this.title=ot.title,this.options=ot.config,this.originalTimeout=ot.config.timeOut,this.toastClasses=`${ot.toastType} ${ot.config.toastClass}`,this.sub=ot.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=ot.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=ot.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=ot.toastRef.countDuplicate().subscribe(yn=>{this.duplicatesCount=yn})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const Me=(new Date).getTime();this.width=(this.hideTime-Me)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return gt.\u0275fac=function(Me){return new(Me||gt)(_.Y36(et),_.Y36(Xe),_.Y36(_.z2F))},gt.\u0275cmp=_.Xpm({type:gt,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(Me,ot){1&Me&&_.NdJ("click",function(){return ot.tapToast()})("mouseenter",function(){return ot.stickAround()})("mouseleave",function(){return ot.delayedHideToast()}),2&Me&&(_.Tol(ot.toastClasses),_.Udp("display",ot.displayStyle))},attrs:Le,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(Me,ot){1&Me&&(_.YNc(0,yt,3,0,"button",0),_.YNc(1,Ye,3,5,"div",1),_.YNc(2,Ct,1,3,"div",2),_.YNc(3,Ke,2,4,"div",3),_.YNc(4,$e,2,2,"div",4)),2&Me&&(_.Q6J("ngIf",ot.options.closeButton),_.xp6(1),_.Q6J("ngIf",ot.title),_.xp6(1),_.Q6J("ngIf",ot.message&&ot.options.enableHtml),_.xp6(1),_.Q6J("ngIf",ot.message&&!ot.options.enableHtml),_.xp6(1),_.Q6J("ngIf",ot.options.progressBar))},directives:[ye.O5],encapsulation:2}),gt})();Object.assign(Object.assign({},At),{toastComponent:Zt})},5861:(Yt,Je,j)=>{function _(J,ye,Te,Le,Ve,he,Pe){try{var ce=J[he](Pe),fe=ce.value}catch(ke){return void Te(ke)}ce.done?ye(fe):Promise.resolve(fe).then(Le,Ve)}function E(J){return function(){var ye=this,Te=arguments;return new Promise(function(Le,Ve){var he=J.apply(ye,Te);function Pe(fe){_(he,Le,Ve,Pe,ce,"next",fe)}function ce(fe){_(he,Le,Ve,Pe,ce,"throw",fe)}Pe(void 0)})}}j.d(Je,{Z:()=>E})}},Yt=>{Yt(Yt.s=7730)}]);