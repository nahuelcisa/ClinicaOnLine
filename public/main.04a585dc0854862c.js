"use strict";var hM=Object.defineProperty,fM=Object.defineProperties,pM=Object.getOwnPropertyDescriptors,OA=Object.getOwnPropertySymbols,gM=Object.prototype.hasOwnProperty,mM=Object.prototype.propertyIsEnumerable,RA=(rn,Ye,V)=>Ye in rn?hM(rn,Ye,{enumerable:!0,configurable:!0,writable:!0,value:V}):rn[Ye]=V,kA=(rn,Ye)=>{for(var V in Ye||(Ye={}))gM.call(Ye,V)&&RA(rn,V,Ye[V]);if(OA)for(var V of OA(Ye))mM.call(Ye,V)&&RA(rn,V,Ye[V]);return rn},PA=(rn,Ye)=>fM(rn,pM(Ye));(self.webpackChunkTpClinicaOnLine=self.webpackChunkTpClinicaOnLine||[]).push([[179],{7128:(rn,Ye,V)=>{V.d(Ye,{nm:()=>Zn});var _=V(5813),Ie=(V(5e3),V(3692),V(5867),V(5861)),Ze=V(9681),Ge=V(4859),pe=V(2090),ke=V(1877);const fe=new Map,ge={activated:!1,tokenObservers:[]},Fe={initialized:!1,enabled:!1};function _t(Ke){return fe.get(Ke)||ge}function rt(Ke,He){fe.set(Ke,He)}function mt(){return Fe}class je{constructor(He,Xe,St,zt,mn){if(this.operation=He,this.retryPolicy=Xe,this.getWaitDuration=St,this.lowerBound=zt,this.upperBound=mn,this.pending=null,this.nextErrorWaitInterval=zt,zt>mn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(He){var Xe=this;return(0,Ie.Z)(function*(){Xe.stop();try{Xe.pending=new pe.BH,yield function nt(Ke){return new Promise(He=>{setTimeout(He,Ke)})}(Xe.getNextRun(He)),Xe.pending.resolve(),yield Xe.pending.promise,Xe.pending=new pe.BH,yield Xe.operation(),Xe.pending.resolve(),yield Xe.pending.promise,Xe.process(!0).catch(()=>{})}catch(St){Xe.retryPolicy(St)?Xe.process(!1).catch(()=>{}):Xe.stop()}})()}getNextRun(He){if(He)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Xe=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Xe}}}const At=new pe.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ne(Ke){if(!_t(Ke).activated)throw At.create("use-before-activation",{appName:Ke.name})}function dt(Ke,He){return wt.apply(this,arguments)}function wt(){return(wt=(0,Ie.Z)(function*({url:Ke,body:He},Xe){var St,zt;const mn={"Content-Type":"application/json"},ei=Xe.getImmediate({optional:!0});if(ei){const Jr=yield ei.getHeartbeatsHeader();Jr&&(mn["X-Firebase-Client"]=Jr)}const dr={method:"POST",body:JSON.stringify(He),headers:mn};let Ri,Di;try{Ri=yield fetch(Ke,dr)}catch(Jr){throw At.create("fetch-network-error",{originalErrorMessage:null===(St=Jr)||void 0===St?void 0:St.message})}if(200!==Ri.status)throw At.create("fetch-status-error",{httpStatus:Ri.status});try{Di=yield Ri.json()}catch(Jr){throw At.create("fetch-parse-error",{originalErrorMessage:null===(zt=Jr)||void 0===zt?void 0:zt.message})}const yr=Di.ttl.match(/^([\d.]+)(s)$/);if(!yr||!yr[2]||isNaN(Number(yr[1])))throw At.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Di.ttl}`});const _s=1e3*Number(yr[1]),ys=Date.now();return{token:Di.token,expireTimeMillis:ys+_s,issuedAtTimeMillis:ys}})).apply(this,arguments)}function tn(Ke,He){const{projectId:Xe,appId:St,apiKey:zt}=Ke.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Xe}/apps/${St}:exchangeDebugToken?key=${zt}`,body:{debug_token:He}}}const qt="firebase-app-check-store";let bn=null;function pt(){return bn||(bn=new Promise((Ke,He)=>{var Xe;try{const St=indexedDB.open("firebase-app-check-database",1);St.onsuccess=zt=>{Ke(zt.target.result)},St.onerror=zt=>{var mn;He(At.create("storage-open",{originalErrorMessage:null===(mn=zt.target.error)||void 0===mn?void 0:mn.message}))},St.onupgradeneeded=zt=>{0===zt.oldVersion&&zt.target.result.createObjectStore(qt,{keyPath:"compositeKey"})}}catch(St){He(At.create("storage-open",{originalErrorMessage:null===(Xe=St)||void 0===Xe?void 0:Xe.message}))}}),bn)}function Kn(){return(Kn=(0,Ie.Z)(function*(Ke,He){const St=(yield pt()).transaction(qt,"readwrite"),mn=St.objectStore(qt).put({compositeKey:Ke,value:He});return new Promise((ei,dr)=>{mn.onsuccess=Ri=>{ei()},St.onerror=Ri=>{var Di;dr(At.create("storage-set",{originalErrorMessage:null===(Di=Ri.target.error)||void 0===Di?void 0:Di.message}))}})})).apply(this,arguments)}const $n=new ke.Yd("@firebase/app-check");function Jt(Ke,He){return(0,pe.hl)()?function Le(Ke,He){return function Mn(Ke,He){return Kn.apply(this,arguments)}(function Ei(Ke){return`${Ke.options.appId}-${Ke.name}`}(Ke),He)}(Ke,He).catch(Xe=>{$n.warn(`Failed to write token to IndexedDB. Error: ${Xe}`)}):Promise.resolve()}function kn(){return mt().enabled}function Ti(){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,Ie.Z)(function*(){const Ke=mt();if(Ke.enabled&&Ke.token)return Ke.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Ai={error:"UNKNOWN_ERROR"};function lr(Ke){return pe.US.encodeString(JSON.stringify(Ke),!1)}function tr(Ke){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,Ie.Z)(function*(Ke,He=!1){const Xe=Ke.app;Ne(Xe);const St=_t(Xe);let mn,zt=St.token;if(zt&&!fi(zt)&&(rt(Xe,Object.assign(Object.assign({},St),{token:void 0})),zt=void 0),!zt){const Ri=yield St.cachedTokenPromise;Ri&&(fi(Ri)?zt=Ri:yield Jt(Xe,void 0))}if(!He&&zt&&fi(zt))return{token:zt.token};let dr,ei=!1;if(kn()){St.exchangeTokenPromise||(St.exchangeTokenPromise=dt(tn(Xe,yield Ti()),Ke.heartbeatServiceProvider).finally(()=>{St.exchangeTokenPromise=void 0}),ei=!0);const Ri=yield St.exchangeTokenPromise;return yield Jt(Xe,Ri),rt(Xe,Object.assign(Object.assign({},St),{token:Ri})),{token:Ri.token}}try{St.exchangeTokenPromise||(St.exchangeTokenPromise=St.provider.getToken().finally(()=>{St.exchangeTokenPromise=void 0}),ei=!0),zt=yield St.exchangeTokenPromise}catch(Ri){"appCheck/throttled"===Ri.code?$n.warn(Ri.message):$n.error(Ri),mn=Ri}return zt?mn?dr=fi(zt)?{token:zt.token,internalError:mn}:cr(mn):(dr={token:zt.token},rt(Xe,Object.assign(Object.assign({},St),{token:zt})),yield Jt(Xe,zt)):dr=cr(mn),ei&&sn(Xe,dr),dr})).apply(this,arguments)}function gn(Ke,He){const Xe=_t(Ke),St=Xe.tokenObservers.filter(zt=>zt.next!==He);0===St.length&&Xe.tokenRefresher&&Xe.tokenRefresher.isRunning()&&Xe.tokenRefresher.stop(),rt(Ke,Object.assign(Object.assign({},Xe),{tokenObservers:St}))}function Sr(Ke){const{app:He}=Ke,Xe=_t(He);let St=Xe.tokenRefresher;St||(St=function Fi(Ke){const{app:He}=Ke;return new je((0,Ie.Z)(function*(){let St;if(St=_t(He).token?yield tr(Ke,!0):yield tr(Ke),St.error)throw St.error;if(St.internalError)throw St.internalError}),()=>!0,()=>{const Xe=_t(He);if(Xe.token){let St=Xe.token.issuedAtTimeMillis+.5*(Xe.token.expireTimeMillis-Xe.token.issuedAtTimeMillis)+3e5;return St=Math.min(St,Xe.token.expireTimeMillis-3e5),Math.max(0,St-Date.now())}return 0},3e4,96e4)}(Ke),rt(He,Object.assign(Object.assign({},Xe),{tokenRefresher:St}))),!St.isRunning()&&Xe.isTokenAutoRefreshEnabled&&St.start()}function sn(Ke,He){const Xe=_t(Ke).tokenObservers;for(const St of Xe)try{"EXTERNAL"===St.type&&null!=He.error?St.error(He.error):St.next(He)}catch(zt){}}function fi(Ke){return Ke.expireTimeMillis-Date.now()>0}function cr(Ke){return{token:lr(Ai),error:Ke}}class ui{constructor(He,Xe){this.app=He,this.heartbeatServiceProvider=Xe}_delete(){const{tokenObservers:He}=_t(this.app);for(const Xe of He)gn(this.app,Xe.next);return Promise.resolve()}}const jn="app-check-internal";!function ji(){(0,Ze._registerComponent)(new Ge.wA("app-check",Ke=>function yn(Ke,He){return new ui(Ke,He)}(Ke.getProvider("app").getImmediate(),Ke.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ke,He,Xe)=>{Ke.getProvider(jn).initialize()})),(0,Ze._registerComponent)(new Ge.wA(jn,Ke=>function Qn(Ke){return{getToken:He=>tr(Ke,He),addTokenListener:He=>function Tn(Ke,He,Xe,St){const{app:zt}=Ke,mn=_t(zt),ei={next:Xe,error:St,type:He};if(rt(zt,Object.assign(Object.assign({},mn),{tokenObservers:[...mn.tokenObservers,ei]})),mn.token&&fi(mn.token)){const dr=mn.token;Promise.resolve().then(()=>{Xe({token:dr.token}),Sr(Ke)}).catch(()=>{})}mn.cachedTokenPromise.then(()=>Sr(Ke))}(Ke,"INTERNAL",He),removeTokenListener:He=>gn(Ke.app,He)}}(Ke.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ze.registerVersion)("@firebase/app-check","0.5.15")}();class Zn{constructor(){return(0,_.vb)("app-check")}}"undefined"!=typeof window&&window},3692:(rn,Ye,V)=>{V.d(Ye,{Ot:()=>Ee,z6:()=>Ie,ZF:()=>qe,hX:()=>_t});var _=V(5867),c=V(5e3),J=V(5813);class Ee{constructor(je){return je}}class Ie{constructor(){return(0,_.C6)()}}const pe=new c.OlP("angularfire2._apps"),ke={provide:Ee,useFactory:function Ge(Pe){return Pe&&1===Pe.length?Pe[0]:new Ee((0,_.Mq)())},deps:[[new c.FiY,pe]]},fe={provide:Ie,deps:[[new c.FiY,pe]]};function ge(Pe){return(je,nt)=>{const It=je.runOutsideAngular(()=>Pe(nt));return new Ee(It)}}let Fe=(()=>{class Pe{constructor(nt){(0,_.KN)("angularfire",J.q4.full,"core"),(0,_.KN)("angularfire",J.q4.full,"app"),(0,_.KN)("angular",c.q4F.full,nt.toString())}}return Pe.\u0275fac=function(nt){return new(nt||Pe)(c.LFG(c.Lbi))},Pe.\u0275mod=c.oAB({type:Pe}),Pe.\u0275inj=c.cJS({providers:[ke,fe]}),Pe})();function _t(Pe,...je){return{ngModule:Fe,providers:[{provide:pe,useFactory:ge(Pe),multi:!0,deps:[c.R0b,c.zs3,J.HU,...je]}]}}const qe=(0,J.u3)(_.ZF,!0)},7667:(rn,Ye,V)=>{V.d(Ye,{dh:()=>_t,v0:()=>tn,AR:()=>Pe});var _=V(5813),c=V(5e3),J=V(3692),Ee=V(5867),Ie=V(7128),Ze=V(1279);V(2090),V(9681),V(1877),V(4859);class Fe{constructor(bt){return bt}}class _t{constructor(){return(0,_.vb)("auth")}}const mt=new c.OlP("angularfire2.auth-instances");function qe(Ut){return(bt,nn)=>{const fn=bt.runOutsideAngular(()=>Ut(nn));return new Fe(fn)}}const ze={provide:_t,deps:[[new c.FiY,mt]]},Ue={provide:Fe,useFactory:function ot(Ut,bt){const nn=(0,_.JM)("auth",Ut,bt);return nn&&new Fe(nn)},deps:[[new c.FiY,mt],J.Ot]};let vt=(()=>{class Ut{constructor(){(0,Ee.KN)("angularfire",_.q4.full,"auth")}}return Ut.\u0275fac=function(nn){return new(nn||Ut)},Ut.\u0275mod=c.oAB({type:Ut}),Ut.\u0275inj=c.cJS({providers:[Ue,ze]}),Ut})();function Pe(Ut,...bt){return{ngModule:vt,providers:[{provide:mt,useFactory:qe(Ut),multi:!0,deps:[c.R0b,c.zs3,_.HU,J.z6,[new c.FiY,Ie.nm],...bt]}]}}const tn=(0,_.u3)(Ze.n,!0)},1205:(rn,Ye,V)=>{V.d(Ye,{zQ:()=>at,rT:()=>We,f7:()=>dt,L6:()=>it,_Q:()=>Ne,lh:()=>Qe,Qv:()=>At,nw:()=>wt});var _=V(5e3),c=V(7579),J=V(9646),Ee=V(8306),Ie=V(8996),Ze=V(6451),Ge=V(6063);class pe extends c.x{constructor(wn=1/0,$t=1/0,qt=Ge.l){super(),this._bufferSize=wn,this._windowTime=$t,this._timestampProvider=qt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=$t===1/0,this._bufferSize=Math.max(1,wn),this._windowTime=Math.max(1,$t)}next(wn){const{isStopped:$t,_buffer:qt,_infiniteTimeWindow:Nn,_timestampProvider:bn,_windowTime:pt}=this;$t||(qt.push(wn),!Nn&&qt.push(bn.now()+pt)),this._trimBuffer(),super.next(wn)}_subscribe(wn){this._throwIfClosed(),this._trimBuffer();const $t=this._innerSubscribe(wn),{_infiniteTimeWindow:qt,_buffer:Nn}=this,bn=Nn.slice();for(let pt=0;pt<bn.length&&!wn.closed;pt+=qt?1:2)wn.next(bn[pt]);return this._checkFinalizedStatuses(wn),$t}_trimBuffer(){const{_bufferSize:wn,_timestampProvider:$t,_buffer:qt,_infiniteTimeWindow:Nn}=this,bn=(Nn?1:2)*wn;if(wn<1/0&&bn<qt.length&&qt.splice(0,qt.length-bn),!Nn){const pt=$t.now();let Ot=0;for(let Le=1;Le<qt.length&&qt[Le]<=pt;Le+=2)Ot=Le;Ot&&qt.splice(0,Ot+1)}}}var ke=V(3099);function fe(tn,wn,$t){var qt,Nn;let bn,pt=!1;return tn&&"object"==typeof tn?(bn=null!==(qt=tn.bufferSize)&&void 0!==qt?qt:1/0,wn=null!==(Nn=tn.windowTime)&&void 0!==Nn?Nn:1/0,pt=!!tn.refCount,$t=tn.scheduler):bn=null!=tn?tn:1/0,(0,ke.B)({connector:()=>new pe(bn,wn,$t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:pt})}var ge=V(3900),Fe=V(576);function _t(tn,wn){return(0,Fe.m)(wn)?(0,ge.w)(()=>tn,wn):(0,ge.w)(()=>tn)}var rt=V(5363),mt=V(4004),ot=V(590),qe=V(9468),ze=V(9300),Ue=V(5813),vt=V(2011),Pe=V(9808),je=V(7128);V(127);const At=new _.OlP("angularfire2.auth.use-emulator"),it=new _.OlP("angularfire2.auth.settings"),Ne=new _.OlP("angularfire2.auth.tenant-id"),We=new _.OlP("angularfire2.auth.langugage-code"),Qe=new _.OlP("angularfire2.auth.use-device-language"),dt=new _.OlP("angularfire.auth.persistence"),wt=(tn,wn,$t,qt,Nn,bn,pt,Ot)=>(0,vt.cc)(`${tn.name}.auth`,"AngularFireAuth",tn.name,()=>{const Le=wn.runOutsideAngular(()=>tn.auth());if($t&&Le.useEmulator(...$t),qt&&(Le.tenantId=qt),Le.languageCode=Nn,bn&&Le.useDeviceLanguage(),pt)for(const[ht,Kt]of Object.entries(pt))Le.settings[ht]=Kt;return Ot&&Le.setPersistence(Ot),Le},[$t,qt,Nn,bn,pt,Ot]);let at=(()=>{class tn{constructor($t,qt,Nn,bn,pt,Ot,Le,ht,Kt,Mn,Kn,ii){const Ki=new c.x,Ei=(0,J.of)(void 0).pipe((0,rt.Q)(pt.outsideAngular),(0,ge.w)(()=>bn.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,5881)))),(0,mt.U)(()=>(0,vt.on)($t,bn,qt)),(0,mt.U)($n=>wt($n,bn,Ot,ht,Kt,Mn,Le,Kn)),fe({bufferSize:1,refCount:!1}));if((0,Pe.PM)(Nn))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,J.of)(null);else{Ei.pipe((0,ot.P)()).subscribe();const Nt=Ei.pipe((0,ge.w)(Yn=>Yn.getRedirectResult().then(Ht=>Ht,()=>null)),Ue.iC,fe({bufferSize:1,refCount:!1})),hi=Ei.pipe((0,ge.w)(Yn=>new Ee.y(Ht=>({unsubscribe:bn.runOutsideAngular(()=>Yn.onAuthStateChanged(kn=>Ht.next(kn),kn=>Ht.error(kn),()=>Ht.complete()))})))),Jt=Ei.pipe((0,ge.w)(Yn=>new Ee.y(Ht=>({unsubscribe:bn.runOutsideAngular(()=>Yn.onIdTokenChanged(kn=>Ht.next(kn),kn=>Ht.error(kn),()=>Ht.complete()))}))));this.authState=Nt.pipe(_t(hi),(0,qe.R)(pt.outsideAngular),(0,rt.Q)(pt.insideAngular)),this.user=Nt.pipe(_t(Jt),(0,qe.R)(pt.outsideAngular),(0,rt.Q)(pt.insideAngular)),this.idToken=this.user.pipe((0,ge.w)(Yn=>Yn?(0,Ie.D)(Yn.getIdToken()):(0,J.of)(null))),this.idTokenResult=this.user.pipe((0,ge.w)(Yn=>Yn?(0,Ie.D)(Yn.getIdTokenResult()):(0,J.of)(null))),this.credential=(0,Ze.T)(Nt,Ki,this.authState.pipe((0,ze.h)(Yn=>!Yn))).pipe((0,mt.U)(Yn=>(null==Yn?void 0:Yn.user)?Yn:null),(0,qe.R)(pt.outsideAngular),(0,rt.Q)(pt.insideAngular))}return(0,vt.pX)(this,Ei,bn,{spy:{apply:($n,Nt,hi)=>{($n.startsWith("signIn")||$n.startsWith("createUser"))&&hi.then(Jt=>Ki.next(Jt))}}})}}return tn.\u0275fac=function($t){return new($t||tn)(_.LFG(vt.Dh),_.LFG(vt.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Ue.HU),_.LFG(At,8),_.LFG(it,8),_.LFG(Ne,8),_.LFG(We,8),_.LFG(Qe,8),_.LFG(dt,8),_.LFG(je.nm,8))},tn.\u0275prov=_.Yz7({token:tn,factory:tn.\u0275fac,providedIn:"any"}),tn})()},2011:(rn,Ye,V)=>{V.d(Ye,{hO:()=>_t,xv:()=>ke,Dh:()=>pe,GT:()=>Ze,cc:()=>rt,on:()=>fe,pX:()=>Ie});var _=V(5e3),c=V(127),J=V(5813);rn=V.hmd(rn);const Ee=["ngOnDestroy"],Ie=(ze,Ue,vt,Pe={})=>new Proxy(ze,{get:(je,nt)=>vt.runOutsideAngular(()=>{var It;if(ze[nt])return(null===(It=null==Pe?void 0:Pe.spy)||void 0===It?void 0:It.get)&&Pe.spy.get(nt,ze[nt]),ze[nt];if(Ee.indexOf(nt)>-1)return()=>{};const At=Ue.toPromise().then(it=>{const Ne=it&&it[nt];return"function"==typeof Ne?Ne.bind(it):Ne&&Ne.then?Ne.then(We=>vt.run(()=>We)):vt.run(()=>Ne)});return new Proxy(()=>{},{get:(it,Ne)=>At[Ne],apply:(it,Ne,We)=>At.then(Qe=>{var dt;const wt=Qe&&Qe(...We);return(null===(dt=null==Pe?void 0:Pe.spy)||void 0===dt?void 0:dt.apply)&&Pe.spy.apply(nt,We,wt),wt})})})}),Ze=(ze,Ue)=>{Ue.forEach(vt=>{Object.getOwnPropertyNames(vt.prototype||vt).forEach(Pe=>{Object.defineProperty(ze.prototype,Pe,Object.getOwnPropertyDescriptor(vt.prototype||vt,Pe))})})};class Ge{constructor(Ue){return Ue}}const pe=new _.OlP("angularfire2.app.options"),ke=new _.OlP("angularfire2.app.name");function fe(ze,Ue,vt){const je="object"==typeof vt&&vt||{};je.name=je.name||"string"==typeof vt&&vt||"[DEFAULT]";const It=c.Z.apps.filter(At=>At&&At.name===je.name)[0]||Ue.runOutsideAngular(()=>c.Z.initializeApp(ze,je));try{JSON.stringify(ze)!==JSON.stringify(It.options)&&ge("error",`${It.name} Firebase App already initialized with different options${rn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(At){}return new Ge(It)}const ge=(ze,...Ue)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[ze](...Ue)},Fe={provide:Ge,useFactory:fe,deps:[pe,_.R0b,[new _.FiY,ke]]};let _t=(()=>{class ze{constructor(vt){c.Z.registerVersion("angularfire",J.q4.full,"core"),c.Z.registerVersion("angularfire",J.q4.full,"app-compat"),c.Z.registerVersion("angular",_.q4F.full,vt.toString())}static initializeApp(vt,Pe){return{ngModule:ze,providers:[{provide:pe,useValue:vt},{provide:ke,useValue:Pe}]}}}return ze.\u0275fac=function(vt){return new(vt||ze)(_.LFG(_.Lbi))},ze.\u0275mod=_.oAB({type:ze}),ze.\u0275inj=_.cJS({providers:[Fe]}),ze})();function rt(ze,Ue,vt,Pe,je){const[,nt,It]=globalThis.\u0275AngularfireInstanceCache.find(At=>At[0]===ze)||[];if(nt)return function mt(ze,Ue){try{return ze.toString()===Ue.toString()}catch(vt){return ze===Ue}}(je,It)||(qe("error",`${Ue} was already initialized on the ${vt} Firebase App with different settings.${ot?" You may need to reload as Firebase is not HMR aware.":""}`),qe("warn",{is:je,was:It})),nt;{const At=Pe();return globalThis.\u0275AngularfireInstanceCache.push([ze,At,je]),At}}const ot=!!rn.hot,qe=(ze,...Ue)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[ze](...Ue)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},3562:(rn,Ye,V)=>{V.d(Ye,{gg:()=>We,ET:()=>Ki,hJ:()=>hi,BS:()=>ht,ad:()=>ui,Cm:()=>Nn});var _=V(5813),c=V(5e3),J=V(7667),Ee=V(3692),Ie=V(5867),Ze=V(7128),Ge=V(2731),pe=V(8306),ke=V(4004),fe={includeMetadataChanges:!1};function Ne(Mt,Vt){return void 0===Vt&&(Vt={}),function It(Mt){return function ge(Mt,Vt){return void 0===Vt&&(Vt=fe),new pe.y(function(Hn){return{unsubscribe:(0,Ge.cf)(Mt,Vt,{next:Hn.next.bind(Hn),error:Hn.error.bind(Hn),complete:Hn.complete.bind(Hn)})}})}(Mt,{includeMetadataChanges:!0}).pipe((0,ke.U)(function(Vt){return Vt.docs}))}(Mt).pipe((0,ke.U)(function(Hn){return Hn.map(function(jn){return function rt(Mt,Vt){void 0===Vt&&(Vt={});var Hn=Mt.data();return!Mt.exists()||"object"!=typeof Hn||null===Hn||Vt.idField&&(Hn[Vt.idField]=Mt.id),Hn}(jn,Vt)})}))}class We{constructor(Vt){return Vt}}const Qe="firestore",at=new c.OlP("angularfire2.firestore-instances");function tn(Mt){return(Vt,Hn)=>{const jn=Vt.runOutsideAngular(()=>Mt(Hn));return new We(jn)}}const wn={provide:class dt{constructor(){return(0,_.vb)(Qe)}},deps:[[new c.FiY,at]]},$t={provide:We,useFactory:function In(Mt,Vt){const Hn=(0,_.JM)(Qe,Mt,Vt);return Hn&&new We(Hn)},deps:[[new c.FiY,at],Ee.Ot]};let qt=(()=>{class Mt{constructor(){(0,Ie.KN)("angularfire",_.q4.full,"fst")}}return Mt.\u0275fac=function(Hn){return new(Hn||Mt)},Mt.\u0275mod=c.oAB({type:Mt}),Mt.\u0275inj=c.cJS({providers:[$t,wn]}),Mt})();function Nn(Mt,...Vt){return{ngModule:qt,providers:[{provide:at,useFactory:tn(Mt),multi:!0,deps:[c.R0b,c.zs3,_.HU,Ee.z6,[new c.FiY,J.dh],[new c.FiY,Ze.nm],...Vt]}]}}const ht=(0,_.u3)(Ne,!0),Ki=(0,_.u3)(Ge.ET,!0),hi=(0,_.u3)(Ge.hJ,!0),ui=(0,_.u3)(Ge.ad,!0)},5813:(rn,Ye,V)=>{V.d(Ye,{q4:()=>va,iC:()=>ss,fc:()=>_l,HU:()=>Hl,vb:()=>Ta,JM:()=>Fu,u3:()=>Tf});var _=V(5e3),c=V(5867),J=V(5861),Ee=V(9681),Ie=V(2090),Ze=V(4859),Ge=V(1877),pe=V(8766);const ke="@firebase/installations",fe="0.5.15",Fe=`w:${fe}`,_t="FIS_v2",Ue=new Ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function vt(L){return L instanceof Ie.ZR&&L.code.includes("request-failed")}function Pe({projectId:L}){return`https://firebaseinstallations.googleapis.com/v1/projects/${L}/installations`}function je(L){return{token:L.token,requestStatus:2,expiresIn:Qe(L.expiresIn),creationTime:Date.now()}}function nt(L,H){return It.apply(this,arguments)}function It(){return(It=(0,J.Z)(function*(L,H){const De=(yield H.json()).error;return Ue.create("request-failed",{requestName:L,serverCode:De.code,serverMessage:De.message,serverStatus:De.status})})).apply(this,arguments)}function At({apiKey:L}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":L})}function it(L,{refreshToken:H}){const ae=At(L);return ae.append("Authorization",function dt(L){return`${_t} ${L}`}(H)),ae}function Ne(L){return We.apply(this,arguments)}function We(){return(We=(0,J.Z)(function*(L){const H=yield L();return H.status>=500&&H.status<600?L():H})).apply(this,arguments)}function Qe(L){return Number(L.replace("s","000"))}function wt(L,H){return at.apply(this,arguments)}function at(){return(at=(0,J.Z)(function*({appConfig:L,heartbeatServiceProvider:H},{fid:ae}){const De=Pe(L),tt=At(L),yt=H.getImmediate({optional:!0});if(yt){const xi=yield yt.getHeartbeatsHeader();xi&&tt.append("x-firebase-client",xi)}const Cn={method:"POST",headers:tt,body:JSON.stringify({fid:ae,authVersion:_t,appId:L.appId,sdkVersion:Fe})},On=yield Ne(()=>fetch(De,Cn));if(On.ok){const xi=yield On.json();return{fid:xi.fid||ae,registrationStatus:2,refreshToken:xi.refreshToken,authToken:je(xi.authToken)}}throw yield nt("Create Installation",On)})).apply(this,arguments)}function In(L){return new Promise(H=>{setTimeout(H,L)})}const wn=/^[cdef][\w-]{21}$/;function qt(){try{const L=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(L),L[0]=112+L[0]%16;const ae=function Nn(L){return function tn(L){return btoa(String.fromCharCode(...L)).replace(/\+/g,"-").replace(/\//g,"_")}(L).substr(0,22)}(L);return wn.test(ae)?ae:""}catch(L){return""}}function bn(L){return`${L.appName}!${L.appId}`}const pt=new Map;function Ot(L,H){const ae=bn(L);Kt(ae,H),function Mn(L,H){const ae=function ii(){return!Kn&&"BroadcastChannel"in self&&(Kn=new BroadcastChannel("[Firebase] FID Change"),Kn.onmessage=L=>{Kt(L.data.key,L.data.fid)}),Kn}();ae&&ae.postMessage({key:L,fid:H}),function Ki(){0===pt.size&&Kn&&(Kn.close(),Kn=null)}()}(ae,H)}function Kt(L,H){const ae=pt.get(L);if(ae)for(const De of ae)De(H)}let Kn=null;const Nt="firebase-installations-store";let hi=null;function Jt(){return hi||(hi=(0,pe.X3)("firebase-installations-database",1,{upgrade:(L,H)=>{0===H&&L.createObjectStore(Nt)}})),hi}function Yn(L,H){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,J.Z)(function*(L,H){const ae=bn(L),tt=(yield Jt()).transaction(Nt,"readwrite"),yt=tt.objectStore(Nt),Gt=yield yt.get(ae);return yield yt.put(H,ae),yield tt.done,(!Gt||Gt.fid!==H.fid)&&Ot(L,H.fid),H})).apply(this,arguments)}function kn(L){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,J.Z)(function*(L){const H=bn(L),De=(yield Jt()).transaction(Nt,"readwrite");yield De.objectStore(Nt).delete(H),yield De.done})).apply(this,arguments)}function Vi(L,H){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,J.Z)(function*(L,H){const ae=bn(L),tt=(yield Jt()).transaction(Nt,"readwrite"),yt=tt.objectStore(Nt),Gt=yield yt.get(ae),Cn=H(Gt);return void 0===Cn?yield yt.delete(ae):yield yt.put(Cn,ae),yield tt.done,Cn&&(!Gt||Gt.fid!==Cn.fid)&&Ot(L,Cn.fid),Cn})).apply(this,arguments)}function Ai(L){return lr.apply(this,arguments)}function lr(){return(lr=(0,J.Z)(function*(L){let H;const ae=yield Vi(L.appConfig,De=>{const tt=tr(De),yt=Pn(L,tt);return H=yt.registrationPromise,yt.installationEntry});return""===ae.fid?{installationEntry:yield H}:{installationEntry:ae,registrationPromise:H}})).apply(this,arguments)}function tr(L){return fi(L||{fid:qt(),registrationStatus:0})}function Pn(L,H){if(0===H.registrationStatus){if(!navigator.onLine)return{installationEntry:H,registrationPromise:Promise.reject(Ue.create("app-offline"))};const ae={fid:H.fid,registrationStatus:1,registrationTime:Date.now()},De=function Tn(L,H){return gn.apply(this,arguments)}(L,ae);return{installationEntry:ae,registrationPromise:De}}return 1===H.registrationStatus?{installationEntry:H,registrationPromise:Sr(L)}:{installationEntry:H}}function gn(){return(gn=(0,J.Z)(function*(L,H){try{const ae=yield wt(L,H);return Yn(L.appConfig,ae)}catch(ae){throw vt(ae)&&409===ae.customData.serverCode?yield kn(L.appConfig):yield Yn(L.appConfig,{fid:H.fid,registrationStatus:0}),ae}})).apply(this,arguments)}function Sr(L){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,J.Z)(function*(L){let H=yield sn(L.appConfig);for(;1===H.registrationStatus;)yield In(100),H=yield sn(L.appConfig);if(0===H.registrationStatus){const{installationEntry:ae,registrationPromise:De}=yield Ai(L);return De||ae}return H})).apply(this,arguments)}function sn(L){return Vi(L,H=>{if(!H)throw Ue.create("installation-not-found");return fi(H)})}function fi(L){return function cr(L){return 1===L.registrationStatus&&L.registrationTime+1e4<Date.now()}(L)?{fid:L.fid,registrationStatus:0}:L}function ui(L,H){return yn.apply(this,arguments)}function yn(){return(yn=(0,J.Z)(function*({appConfig:L,heartbeatServiceProvider:H},ae){const De=Qn(L,ae),tt=it(L,ae),yt=H.getImmediate({optional:!0});if(yt){const xi=yield yt.getHeartbeatsHeader();xi&&tt.append("x-firebase-client",xi)}const Cn={method:"POST",headers:tt,body:JSON.stringify({installation:{sdkVersion:Fe,appId:L.appId}})},On=yield Ne(()=>fetch(De,Cn));if(On.ok)return je(yield On.json());throw yield nt("Generate Auth Token",On)})).apply(this,arguments)}function Qn(L,{fid:H}){return`${Pe(L)}/${H}/authTokens:generate`}function Bn(L){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,J.Z)(function*(L,H=!1){let ae;const De=yield Vi(L.appConfig,yt=>{if(!on(yt))throw Ue.create("not-registered");const Gt=yt.authToken;if(!H&&xe(Gt))return yt;if(1===Gt.requestStatus)return ae=Ut(L,H),yt;{if(!navigator.onLine)throw Ue.create("app-offline");const Cn=Ve(yt);return ae=fn(L,Cn),Cn}});return ae?yield ae:De.authToken})).apply(this,arguments)}function Ut(L,H){return bt.apply(this,arguments)}function bt(){return(bt=(0,J.Z)(function*(L,H){let ae=yield nn(L.appConfig);for(;1===ae.authToken.requestStatus;)yield In(100),ae=yield nn(L.appConfig);const De=ae.authToken;return 0===De.requestStatus?Bn(L,H):De})).apply(this,arguments)}function nn(L){return Vi(L,H=>{if(!on(H))throw Ue.create("not-registered");return function Ce(L){return 1===L.requestStatus&&L.requestTime+1e4<Date.now()}(H.authToken)?Object.assign(Object.assign({},H),{authToken:{requestStatus:0}}):H})}function fn(L,H){return dn.apply(this,arguments)}function dn(){return(dn=(0,J.Z)(function*(L,H){try{const ae=yield ui(L,H),De=Object.assign(Object.assign({},H),{authToken:ae});return yield Yn(L.appConfig,De),ae}catch(ae){if(!vt(ae)||401!==ae.customData.serverCode&&404!==ae.customData.serverCode){const De=Object.assign(Object.assign({},H),{authToken:{requestStatus:0}});yield Yn(L.appConfig,De)}else yield kn(L.appConfig);throw ae}})).apply(this,arguments)}function on(L){return void 0!==L&&2===L.registrationStatus}function xe(L){return 2===L.requestStatus&&!function we(L){const H=Date.now();return H<L.creationTime||L.creationTime+L.expiresIn<H+36e5}(L)}function Ve(L){const H={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},L),{authToken:H})}function X(){return(X=(0,J.Z)(function*(L){const H=L,{installationEntry:ae,registrationPromise:De}=yield Ai(H);return De?De.catch(console.error):Bn(H).catch(console.error),ae.fid})).apply(this,arguments)}function ce(){return(ce=(0,J.Z)(function*(L,H=!1){const ae=L;return yield Me(ae),(yield Bn(ae,H)).token})).apply(this,arguments)}function Me(L){return et.apply(this,arguments)}function et(){return(et=(0,J.Z)(function*(L){const{registrationPromise:H}=yield Ai(L);H&&(yield H)})).apply(this,arguments)}function ji(L){return Ue.create("missing-app-config-values",{valueName:L})}const Si="installations",Zn=L=>{const H=L.getProvider("app").getImmediate(),ae=function jn(L){if(!L||!L.options)throw ji("App Configuration");if(!L.name)throw ji("App Name");const H=["projectId","apiKey","appId"];for(const ae of H)if(!L.options[ae])throw ji(ae);return{appName:L.name,projectId:L.options.projectId,apiKey:L.options.apiKey,appId:L.options.appId}}(H);return{app:H,appConfig:ae,heartbeatServiceProvider:(0,Ee._getProvider)(H,"heartbeat"),_delete:()=>Promise.resolve()}},Ni=L=>{const H=L.getProvider("app").getImmediate(),ae=(0,Ee._getProvider)(H,Si).getImmediate();return{getId:()=>function de(L){return X.apply(this,arguments)}(ae),getToken:tt=>function ue(L){return ce.apply(this,arguments)}(ae,tt)}};(function Oi(){(0,Ee._registerComponent)(new Ze.wA(Si,Zn,"PUBLIC")),(0,Ee._registerComponent)(new Ze.wA("installations-internal",Ni,"PRIVATE"))})(),(0,Ee.registerVersion)(ke,fe),(0,Ee.registerVersion)(ke,fe,"esm2017");const Wi="@firebase/remote-config",vi=new Ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ys{constructor(H,ae,De,tt){this.client=H,this.storage=ae,this.storageCache=De,this.logger=tt}isCachedDataFresh(H,ae){if(!ae)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const De=Date.now()-ae,tt=De<=H;return this.logger.debug(`Config fetch cache check. Cache age millis: ${De}. Cache max age millis (minimumFetchIntervalMillis setting): ${H}. Is cache hit: ${tt}.`),tt}fetch(H){var ae=this;return(0,J.Z)(function*(){const[De,tt]=yield Promise.all([ae.storage.getLastSuccessfulFetchTimestampMillis(),ae.storage.getLastSuccessfulFetchResponse()]);if(tt&&ae.isCachedDataFresh(H.cacheMaxAgeMillis,De))return tt;H.eTag=tt&&tt.eTag;const yt=yield ae.client.fetch(H),Gt=[ae.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===yt.status&&Gt.push(ae.storage.setLastSuccessfulFetchResponse(yt)),yield Promise.all(Gt),yt})()}}function Jr(L=navigator){return L.languages&&L.languages[0]||L.language}class zr{constructor(H,ae,De,tt,yt,Gt){this.firebaseInstallations=H,this.sdkVersion=ae,this.namespace=De,this.projectId=tt,this.apiKey=yt,this.appId=Gt}fetch(H){var ae=this;return(0,J.Z)(function*(){var De,tt,yt;const[Gt,Cn]=yield Promise.all([ae.firebaseInstallations.getId(),ae.firebaseInstallations.getToken()]),xi=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${ae.projectId}/namespaces/${ae.namespace}:fetch?key=${ae.apiKey}`,ki={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":H.eTag||"*"},mi={sdk_version:ae.sdkVersion,app_instance_id:Gt,app_instance_id_token:Cn,app_id:ae.appId,language_code:Jr()},os={method:"POST",headers:ki,body:JSON.stringify(mi)},Fo=fetch(xi,os),Lu=new Promise((Mr,vl)=>{H.signal.addEventListener(()=>{const tl=new Error("The operation was aborted.");tl.name="AbortError",vl(tl)})});let Zl;try{yield Promise.race([Fo,Lu]),Zl=yield Fo}catch(Mr){let vl="fetch-client-network";throw"AbortError"===(null===(De=Mr)||void 0===De?void 0:De.name)&&(vl="fetch-timeout"),vi.create(vl,{originalErrorMessage:null===(tt=Mr)||void 0===tt?void 0:tt.message})}let Lo=Zl.status;const Bo=Zl.headers.get("ETag")||void 0;let yl,Xc;if(200===Zl.status){let Mr;try{Mr=yield Zl.json()}catch(vl){throw vi.create("fetch-client-parse",{originalErrorMessage:null===(yt=vl)||void 0===yt?void 0:yt.message})}yl=Mr.entries,Xc=Mr.state}if("INSTANCE_STATE_UNSPECIFIED"===Xc?Lo=500:"NO_CHANGE"===Xc?Lo=304:("NO_TEMPLATE"===Xc||"EMPTY_CONFIG"===Xc)&&(yl={}),304!==Lo&&200!==Lo)throw vi.create("fetch-status",{httpStatus:Lo});return{status:Lo,eTag:Bo,config:yl}})()}}class Xo{constructor(H,ae){this.client=H,this.storage=ae}fetch(H){var ae=this;return(0,J.Z)(function*(){const De=(yield ae.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return ae.attemptFetch(H,De)})()}attemptFetch(H,{throttleEndTimeMillis:ae,backoffCount:De}){var tt=this;return(0,J.Z)(function*(){yield function Ia(L,H){return new Promise((ae,De)=>{const tt=Math.max(H-Date.now(),0),yt=setTimeout(ae,tt);L.addEventListener(()=>{clearTimeout(yt),De(vi.create("fetch-throttle",{throttleEndTimeMillis:H}))})})}(H.signal,ae);try{const yt=yield tt.client.fetch(H);return yield tt.storage.deleteThrottleMetadata(),yt}catch(yt){if(!function Os(L){if(!(L instanceof Ie.ZR&&L.customData))return!1;const H=Number(L.customData.httpStatus);return 429===H||500===H||503===H||504===H}(yt))throw yt;const Gt={throttleEndTimeMillis:Date.now()+(0,Ie.$s)(De),backoffCount:De+1};return yield tt.storage.setThrottleMetadata(Gt),tt.attemptFetch(H,Gt)}})()}}class Co{constructor(H,ae,De,tt,yt){this.app=H,this._client=ae,this._storageCache=De,this._storage=tt,this._logger=yt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function vs(L,H){var ae;const De=L.target.error||void 0;return vi.create(H,{originalErrorMessage:De&&(null===(ae=De)||void 0===ae?void 0:ae.message)})}const ds="app_namespace_store";class wo{constructor(H,ae,De,tt=function To(){return new Promise((L,H)=>{var ae;try{const De=indexedDB.open("firebase_remote_config",1);De.onerror=tt=>{H(vs(tt,"storage-open"))},De.onsuccess=tt=>{L(tt.target.result)},De.onupgradeneeded=tt=>{0===tt.oldVersion&&tt.target.result.createObjectStore(ds,{keyPath:"compositeKey"})}}catch(De){H(vi.create("storage-open",{originalErrorMessage:null===(ae=De)||void 0===ae?void 0:ae.message}))}})}()){this.appId=H,this.appName=ae,this.namespace=De,this.openDbPromise=tt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(H){return this.set("last_fetch_status",H)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(H){return this.set("last_successful_fetch_timestamp_millis",H)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(H){return this.set("last_successful_fetch_response",H)}getActiveConfig(){return this.get("active_config")}setActiveConfig(H){return this.set("active_config",H)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(H){return this.set("active_config_etag",H)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(H){return this.set("throttle_metadata",H)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(H){var ae=this;return(0,J.Z)(function*(){const De=yield ae.openDbPromise;return new Promise((tt,yt)=>{var Gt;const On=De.transaction([ds],"readonly").objectStore(ds),xi=ae.createCompositeKey(H);try{const ki=On.get(xi);ki.onerror=mi=>{yt(vs(mi,"storage-get"))},ki.onsuccess=mi=>{const os=mi.target.result;tt(os?os.value:void 0)}}catch(ki){yt(vi.create("storage-get",{originalErrorMessage:null===(Gt=ki)||void 0===Gt?void 0:Gt.message}))}})})()}set(H,ae){var De=this;return(0,J.Z)(function*(){const tt=yield De.openDbPromise;return new Promise((yt,Gt)=>{var Cn;const xi=tt.transaction([ds],"readwrite").objectStore(ds),ki=De.createCompositeKey(H);try{const mi=xi.put({compositeKey:ki,value:ae});mi.onerror=os=>{Gt(vs(os,"storage-set"))},mi.onsuccess=()=>{yt()}}catch(mi){Gt(vi.create("storage-set",{originalErrorMessage:null===(Cn=mi)||void 0===Cn?void 0:Cn.message}))}})})()}delete(H){var ae=this;return(0,J.Z)(function*(){const De=yield ae.openDbPromise;return new Promise((tt,yt)=>{var Gt;const On=De.transaction([ds],"readwrite").objectStore(ds),xi=ae.createCompositeKey(H);try{const ki=On.delete(xi);ki.onerror=mi=>{yt(vs(mi,"storage-delete"))},ki.onsuccess=()=>{tt()}}catch(ki){yt(vi.create("storage-delete",{originalErrorMessage:null===(Gt=ki)||void 0===Gt?void 0:Gt.message}))}})})()}createCompositeKey(H){return[this.appId,this.appName,this.namespace,H].join()}}class da{constructor(H){this.storage=H}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var H=this;return(0,J.Z)(function*(){const ae=H.storage.getLastFetchStatus(),De=H.storage.getLastSuccessfulFetchTimestampMillis(),tt=H.storage.getActiveConfig(),yt=yield ae;yt&&(H.lastFetchStatus=yt);const Gt=yield De;Gt&&(H.lastSuccessfulFetchTimestampMillis=Gt);const Cn=yield tt;Cn&&(H.activeConfig=Cn)})()}setLastFetchStatus(H){return this.lastFetchStatus=H,this.storage.setLastFetchStatus(H)}setLastSuccessfulFetchTimestampMillis(H){return this.lastSuccessfulFetchTimestampMillis=H,this.storage.setLastSuccessfulFetchTimestampMillis(H)}setActiveConfig(H){return this.activeConfig=H,this.storage.setActiveConfig(H)}}function Xr(){return ks.apply(this,arguments)}function ks(){return(ks=(0,J.Z)(function*(){if(!(0,Ie.hl)())return!1;try{return yield(0,Ie.eu)()}catch(L){return!1}})).apply(this,arguments)}!function Do(){(0,Ee._registerComponent)(new Ze.wA("remote-config",function L(H,{instanceIdentifier:ae}){const De=H.getProvider("app").getImmediate(),tt=H.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw vi.create("registration-window");if(!(0,Ie.hl)())throw vi.create("indexed-db-unavailable");const{projectId:yt,apiKey:Gt,appId:Cn}=De.options;if(!yt)throw vi.create("registration-project-id");if(!Gt)throw vi.create("registration-api-key");if(!Cn)throw vi.create("registration-app-id");const On=new wo(Cn,De.name,ae=ae||"firebase"),xi=new da(On),ki=new Ge.Yd(Wi);ki.logLevel=Ge.in.ERROR;const mi=new zr(tt,Ee.SDK_VERSION,ae,yt,Gt,Cn),os=new Xo(mi,On),Fo=new ys(os,On,xi,ki),Lu=new Co(De,Fo,xi,On,ki);return function Xe(L){const H=(0,Ie.m9)(L);H._initializePromise||(H._initializePromise=H._storageCache.loadFromStorage().then(()=>{H._isInitializationComplete=!0}))}(Lu),Lu},"PUBLIC").setMultipleInstances(!0)),(0,Ee.registerVersion)(Wi,"0.3.14"),(0,Ee.registerVersion)(Wi,"0.3.14","esm2017")}();const Ps="/firebase-messaging-sw.js",Fs="/firebase-cloud-messaging-push-scope",nr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Gs="google.c.a.c_id",bs="google.c.a.c_l",Is="google.c.a.ts",As="google.c.a.e";var Ss=(()=>{return(L=Ss||(Ss={})).PUSH_RECEIVED="push-received",L.NOTIFICATION_CLICKED="notification-clicked",Ss;var L})();function Rr(L){const H=new Uint8Array(L);return btoa(String.fromCharCode(...H)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Na(L){const ae=(L+"=".repeat((4-L.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),De=atob(ae),tt=new Uint8Array(De.length);for(let yt=0;yt<De.length;++yt)tt[yt]=De.charCodeAt(yt);return tt}const vr="fcm_token_details_db",te="fcm_token_object_Store";function Te(L){return Se.apply(this,arguments)}function Se(){return Se=(0,J.Z)(function*(L){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(yt=>yt.name).includes(vr))return null;let H=null;return(yield(0,pe.X3)(vr,5,{upgrade:(De=(0,J.Z)(function*(tt,yt,Gt,Cn){var On;if(yt<2||!tt.objectStoreNames.contains(te))return;const xi=Cn.objectStore(te),ki=yield xi.index("fcmSenderId").get(L);if(yield xi.clear(),ki)if(2===yt){const mi=ki;if(!mi.auth||!mi.p256dh||!mi.endpoint)return;H={token:mi.fcmToken,createTime:null!==(On=mi.createTime)&&void 0!==On?On:Date.now(),subscriptionOptions:{auth:mi.auth,p256dh:mi.p256dh,endpoint:mi.endpoint,swScope:mi.swScope,vapidKey:"string"==typeof mi.vapidKey?mi.vapidKey:Rr(mi.vapidKey)}}}else if(3===yt){const mi=ki;H={token:mi.fcmToken,createTime:mi.createTime,subscriptionOptions:{auth:Rr(mi.auth),p256dh:Rr(mi.p256dh),endpoint:mi.endpoint,swScope:mi.swScope,vapidKey:Rr(mi.vapidKey)}}}else if(4===yt){const mi=ki;H={token:mi.fcmToken,createTime:mi.createTime,subscriptionOptions:{auth:Rr(mi.auth),p256dh:Rr(mi.p256dh),endpoint:mi.endpoint,swScope:mi.swScope,vapidKey:Rr(mi.vapidKey)}}}}),function(yt,Gt,Cn,On){return De.apply(this,arguments)})})).close(),yield(0,pe.Lj)(vr),yield(0,pe.Lj)("fcm_vapid_details_db"),yield(0,pe.Lj)("undefined"),Je(H)?H:null;var De}),Se.apply(this,arguments)}function Je(L){if(!L||!L.subscriptionOptions)return!1;const{subscriptionOptions:H}=L;return"number"==typeof L.createTime&&L.createTime>0&&"string"==typeof L.token&&L.token.length>0&&"string"==typeof H.auth&&H.auth.length>0&&"string"==typeof H.p256dh&&H.p256dh.length>0&&"string"==typeof H.endpoint&&H.endpoint.length>0&&"string"==typeof H.swScope&&H.swScope.length>0&&"string"==typeof H.vapidKey&&H.vapidKey.length>0}const _n="firebase-messaging-store";let Vn=null;function Fn(){return Vn||(Vn=(0,pe.X3)("firebase-messaging-database",1,{upgrade:(L,H)=>{0===H&&L.createObjectStore(_n)}})),Vn}function B(L){return se.apply(this,arguments)}function se(){return(se=(0,J.Z)(function*(L){const H=kt(L),De=yield(yield Fn()).transaction(_n).objectStore(_n).get(H);if(De)return De;{const tt=yield Te(L.appConfig.senderId);if(tt)return yield $(L,tt),tt}})).apply(this,arguments)}function $(L,H){return le.apply(this,arguments)}function le(){return(le=(0,J.Z)(function*(L,H){const ae=kt(L),tt=(yield Fn()).transaction(_n,"readwrite");return yield tt.objectStore(_n).put(H,ae),yield tt.done,H})).apply(this,arguments)}function Oe(L){return ft.apply(this,arguments)}function ft(){return(ft=(0,J.Z)(function*(L){const H=kt(L),De=(yield Fn()).transaction(_n,"readwrite");yield De.objectStore(_n).delete(H),yield De.done})).apply(this,arguments)}function kt({appConfig:L}){return L.appId}const ri=new Ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function pi(L,H){return si.apply(this,arguments)}function si(){return(si=(0,J.Z)(function*(L,H){var ae;const De=yield kr(L),tt=Go(H),yt={method:"POST",headers:De,body:JSON.stringify(tt)};let Gt;try{Gt=yield(yield fetch(es(L.appConfig),yt)).json()}catch(Cn){throw ri.create("token-subscribe-failed",{errorInfo:null===(ae=Cn)||void 0===ae?void 0:ae.toString()})}if(Gt.error)throw ri.create("token-subscribe-failed",{errorInfo:Gt.error.message});if(!Gt.token)throw ri.create("token-subscribe-no-token");return Gt.token})).apply(this,arguments)}function gi(L,H){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,J.Z)(function*(L,H){var ae;const De=yield kr(L),tt=Go(H.subscriptionOptions),yt={method:"PATCH",headers:De,body:JSON.stringify(tt)};let Gt;try{Gt=yield(yield fetch(`${es(L.appConfig)}/${H.token}`,yt)).json()}catch(Cn){throw ri.create("token-update-failed",{errorInfo:null===(ae=Cn)||void 0===ae?void 0:ae.toString()})}if(Gt.error)throw ri.create("token-update-failed",{errorInfo:Gt.error.message});if(!Gt.token)throw ri.create("token-update-no-token");return Gt.token})).apply(this,arguments)}function Hi(L,H){return vn.apply(this,arguments)}function vn(){return(vn=(0,J.Z)(function*(L,H){var ae;const tt={method:"DELETE",headers:yield kr(L)};try{const Gt=yield(yield fetch(`${es(L.appConfig)}/${H}`,tt)).json();if(Gt.error)throw ri.create("token-unsubscribe-failed",{errorInfo:Gt.error.message})}catch(yt){throw ri.create("token-unsubscribe-failed",{errorInfo:null===(ae=yt)||void 0===ae?void 0:ae.toString()})}})).apply(this,arguments)}function es({projectId:L}){return`https://fcmregistrations.googleapis.com/v1/projects/${L}/registrations`}function kr(L){return qi.apply(this,arguments)}function qi(){return(qi=(0,J.Z)(function*({appConfig:L,installations:H}){const ae=yield H.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":L.apiKey,"x-goog-firebase-installations-auth":`FIS ${ae}`})})).apply(this,arguments)}function Go({p256dh:L,auth:H,endpoint:ae,vapidKey:De}){const tt={web:{endpoint:ae,auth:H,p256dh:L}};return De!==nr&&(tt.web.applicationPubKey=De),tt}const W=6048e5;function j(L){return F.apply(this,arguments)}function F(){return(F=(0,J.Z)(function*(L){const H=yield hs(L.swRegistration,L.vapidKey),ae={vapidKey:L.vapidKey,swScope:L.swRegistration.scope,endpoint:H.endpoint,auth:Rr(H.getKey("auth")),p256dh:Rr(H.getKey("p256dh"))},De=yield B(L.firebaseDependencies);if(De){if(Zo(De.subscriptionOptions,ae))return Date.now()>=De.createTime+W?Ln(L,{token:De.token,createTime:Date.now(),subscriptionOptions:ae}):De.token;try{yield Hi(L.firebaseDependencies,De.token)}catch(tt){console.warn(tt)}return ts(L.firebaseDependencies,ae)}return ts(L.firebaseDependencies,ae)})).apply(this,arguments)}function Y(L){return ct.apply(this,arguments)}function ct(){return(ct=(0,J.Z)(function*(L){const H=yield B(L.firebaseDependencies);H&&(yield Hi(L.firebaseDependencies,H.token),yield Oe(L.firebaseDependencies));const ae=yield L.swRegistration.pushManager.getSubscription();return!ae||ae.unsubscribe()})).apply(this,arguments)}function Ln(L,H){return oi.apply(this,arguments)}function oi(){return(oi=(0,J.Z)(function*(L,H){try{const ae=yield gi(L.firebaseDependencies,H),De=Object.assign(Object.assign({},H),{token:ae,createTime:Date.now()});return yield $(L.firebaseDependencies,De),ae}catch(ae){throw yield Y(L),ae}})).apply(this,arguments)}function ts(L,H){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,J.Z)(function*(L,H){const De={token:yield pi(L,H),createTime:Date.now(),subscriptionOptions:H};return yield $(L,De),De.token})).apply(this,arguments)}function hs(L,H){return Io.apply(this,arguments)}function Io(){return(Io=(0,J.Z)(function*(L,H){return(yield L.pushManager.getSubscription())||L.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Na(H)})})).apply(this,arguments)}function Zo(L,H){return H.vapidKey===L.vapidKey&&H.endpoint===L.endpoint&&H.auth===L.auth&&H.p256dh===L.p256dh}function ha(L){const H={from:L.from,collapseKey:L.collapse_key,messageId:L.fcmMessageId};return function Ll(L,H){if(!H.notification)return;L.notification={};const ae=H.notification.title;ae&&(L.notification.title=ae);const De=H.notification.body;De&&(L.notification.body=De);const tt=H.notification.image;tt&&(L.notification.image=tt)}(H,L),function fa(L,H){!H.data||(L.data=H.data)}(H,L),function pa(L,H){var ae,De,tt,yt,Gt;if(!H.fcmOptions&&!(null===(ae=H.notification)||void 0===ae?void 0:ae.click_action))return;L.fcmOptions={};const Cn=null!==(tt=null===(De=H.fcmOptions)||void 0===De?void 0:De.link)&&void 0!==tt?tt:null===(yt=H.notification)||void 0===yt?void 0:yt.click_action;Cn&&(L.fcmOptions.link=Cn);const On=null===(Gt=H.fcmOptions)||void 0===Gt?void 0:Gt.analytics_label;On&&(L.fcmOptions.analyticsLabel=On)}(H,L),H}function Ns(L){return"object"==typeof L&&!!L&&Gs in L}function Xs(L,H){const ae=[];for(let De=0;De<L.length;De++)ae.push(L.charAt(De)),De<H.length&&ae.push(H.charAt(De));return ae.join("")}function Ao(L){return ri.create("missing-app-config-values",{valueName:L})}Xs("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Xs("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class mo{constructor(H,ae,De){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const tt=function lc(L){if(!L||!L.options)throw Ao("App Configuration Object");if(!L.name)throw Ao("App Name");const H=["projectId","apiKey","appId","messagingSenderId"],{options:ae}=L;for(const De of H)if(!ae[De])throw Ao(De);return{appName:L.name,projectId:ae.projectId,apiKey:ae.apiKey,appId:ae.appId,senderId:ae.messagingSenderId}}(H);this.firebaseDependencies={app:H,appConfig:tt,installations:ae,analyticsProvider:De}}_delete(){return Promise.resolve()}}function cl(L){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,J.Z)(function*(L){var H;try{L.swRegistration=yield navigator.serviceWorker.register(Ps,{scope:Fs}),L.swRegistration.update().catch(()=>{})}catch(ae){throw ri.create("failed-service-worker-registration",{browserErrorMessage:null===(H=ae)||void 0===H?void 0:H.message})}})).apply(this,arguments)}function Bl(L,H){return ea.apply(this,arguments)}function ea(){return(ea=(0,J.Z)(function*(L,H){if(!H&&!L.swRegistration&&(yield cl(L)),H||!L.swRegistration){if(!(H instanceof ServiceWorkerRegistration))throw ri.create("invalid-sw-registration");L.swRegistration=H}})).apply(this,arguments)}function Ma(L,H){return So.apply(this,arguments)}function So(){return(So=(0,J.Z)(function*(L,H){H?L.vapidKey=H:L.vapidKey||(L.vapidKey=nr)})).apply(this,arguments)}function ga(){return(ga=(0,J.Z)(function*(L,H){if(!navigator)throw ri.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ri.create("permission-blocked");return yield Ma(L,null==H?void 0:H.vapidKey),yield Bl(L,null==H?void 0:H.serviceWorkerRegistration),j(L)})).apply(this,arguments)}function xa(L,H,ae){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,J.Z)(function*(L,H,ae){const De=dl(H);(yield L.firebaseDependencies.analyticsProvider.get()).logEvent(De,{message_id:ae[Gs],message_name:ae[bs],message_time:ae[Is],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function dl(L){switch(L){case Ss.NOTIFICATION_CLICKED:return"notification_open";case Ss.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ma(){return(ma=(0,J.Z)(function*(L,H){const ae=H.data;if(!ae.isFirebaseMessaging)return;L.onMessageHandler&&ae.messageType===Ss.PUSH_RECEIVED&&("function"==typeof L.onMessageHandler?L.onMessageHandler(ha(ae)):L.onMessageHandler.next(ha(ae)));const De=ae.data;Ns(De)&&"1"===De[As]&&(yield xa(L,ae.messageType,De))})).apply(this,arguments)}const _a="@firebase/messaging",Ra=L=>{const H=new mo(L.getProvider("app").getImmediate(),L.getProvider("installations-internal").getImmediate(),L.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",ae=>function hl(L,H){return ma.apply(this,arguments)}(H,ae)),H},Vl=L=>{const H=L.getProvider("messaging").getImmediate();return{getToken:De=>function ul(L,H){return ga.apply(this,arguments)}(H,De)}};function Ls(){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,J.Z)(function*(){try{yield(0,Ie.eu)()}catch(L){return!1}return"undefined"!=typeof window&&(0,Ie.hl)()&&(0,Ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ta(){(0,Ee._registerComponent)(new Ze.wA("messaging",Ra,"PUBLIC")),(0,Ee._registerComponent)(new Ze.wA("messaging-internal",Vl,"PRIVATE")),(0,Ee.registerVersion)(_a,"0.9.19"),(0,Ee.registerVersion)(_a,"0.9.19","esm2017")}();const br="analytics",eo="firebase_id",xu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Wt="https://www.googletagmanager.com/gtag/js",Mi=new Ge.Yd("@firebase/analytics");function No(L){return Promise.all(L.map(H=>H.catch(ae=>ae)))}function Ul(L,H){const ae=document.createElement("script");ae.src=`${Wt}?l=${L}&id=${H}`,ae.async=!0,document.head.appendChild(ae)}function di(L,H,ae,De,tt,yt){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,J.Z)(function*(L,H,ae,De,tt,yt){const Gt=De[tt];try{if(Gt)yield H[Gt];else{const On=(yield No(ae)).find(xi=>xi.measurementId===tt);On&&(yield H[On.appId])}}catch(Cn){Mi.error(Cn)}L("config",tt,yt)})).apply(this,arguments)}function En(L,H,ae,De,tt){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,J.Z)(function*(L,H,ae,De,tt){try{let yt=[];if(tt&&tt.send_to){let Gt=tt.send_to;Array.isArray(Gt)||(Gt=[Gt]);const Cn=yield No(ae);for(const On of Gt){const xi=Cn.find(mi=>mi.measurementId===On),ki=xi&&H[xi.appId];if(!ki){yt=[];break}yt.push(ki)}}0===yt.length&&(yt=Object.values(H)),yield Promise.all(yt),L("event",De,tt||{})}catch(yt){Mi.error(yt)}})).apply(this,arguments)}function dc(L){const H=window.document.getElementsByTagName("script");for(const ae of Object.values(H))if(ae.src&&ae.src.includes(Wt)&&ae.src.includes(L))return ae;return null}const qs=new Ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Wc=new class fl{constructor(H={},ae=1e3){this.throttleMetadata=H,this.intervalMillis=ae}getThrottleMetadata(H){return this.throttleMetadata[H]}setThrottleMetadata(H,ae){this.throttleMetadata[H]=ae}deleteThrottleMetadata(H){delete this.throttleMetadata[H]}};function ka(L){return new Headers({Accept:"application/json","x-goog-api-key":L})}function Ou(L){return jl.apply(this,arguments)}function jl(){return(jl=(0,J.Z)(function*(L){var H;const{appId:ae,apiKey:De}=L,tt={method:"GET",headers:ka(De)},yt=xu.replace("{app-id}",ae),Gt=yield fetch(yt,tt);if(200!==Gt.status&&304!==Gt.status){let Cn="";try{const On=yield Gt.json();(null===(H=On.error)||void 0===H?void 0:H.message)&&(Cn=On.error.message)}catch(On){}throw qs.create("config-fetch-failed",{httpStatus:Gt.status,responseMessage:Cn})}return Gt.json()})).apply(this,arguments)}function yd(L){return bi.apply(this,arguments)}function bi(){return(bi=(0,J.Z)(function*(L,H=Wc,ae){const{appId:De,apiKey:tt,measurementId:yt}=L.options;if(!De)throw qs.create("no-app-id");if(!tt){if(yt)return{measurementId:yt,appId:De};throw qs.create("no-api-key")}const Gt=H.getThrottleMetadata(De)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Cn=new U;return setTimeout((0,J.Z)(function*(){Cn.abort()}),void 0!==ae?ae:6e4),ia({appId:De,apiKey:tt,measurementId:yt},Gt,Cn,H)})).apply(this,arguments)}function ia(L,H,ae){return k.apply(this,arguments)}function k(){return(k=(0,J.Z)(function*(L,{throttleEndTimeMillis:H,backoffCount:ae},De,tt=Wc){var yt,Gt;const{appId:Cn,measurementId:On}=L;try{yield M(De,H)}catch(xi){if(On)return Mi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${On} provided in the "measurementId" field in the local Firebase config. [${null===(yt=xi)||void 0===yt?void 0:yt.message}]`),{appId:Cn,measurementId:On};throw xi}try{const xi=yield Ou(L);return tt.deleteThrottleMetadata(Cn),xi}catch(xi){const ki=xi;if(!I(ki)){if(tt.deleteThrottleMetadata(Cn),On)return Mi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${On} provided in the "measurementId" field in the local Firebase config. [${null==ki?void 0:ki.message}]`),{appId:Cn,measurementId:On};throw xi}const mi=503===Number(null===(Gt=null==ki?void 0:ki.customData)||void 0===Gt?void 0:Gt.httpStatus)?(0,Ie.$s)(ae,tt.intervalMillis,30):(0,Ie.$s)(ae,tt.intervalMillis),os={throttleEndTimeMillis:Date.now()+mi,backoffCount:ae+1};return tt.setThrottleMetadata(Cn,os),Mi.debug(`Calling attemptFetch again in ${mi} millis`),ia(L,os,De,tt)}})).apply(this,arguments)}function M(L,H){return new Promise((ae,De)=>{const tt=Math.max(H-Date.now(),0),yt=setTimeout(ae,tt);L.addEventListener(()=>{clearTimeout(yt),De(qs.create("fetch-throttle",{throttleEndTimeMillis:H}))})})}function I(L){if(!(L instanceof Ie.ZR&&L.customData))return!1;const H=Number(L.customData.httpStatus);return 429===H||500===H||503===H||504===H}class U{constructor(){this.listeners=[]}addEventListener(H){this.listeners.push(H)}abort(){this.listeners.forEach(H=>H())}}let q,Fr;function ye(){return(ye=(0,J.Z)(function*(L,H,ae,De,tt){if(tt&&tt.global)L("event",ae,De);else{const yt=yield H;L("event",ae,Object.assign(Object.assign({},De),{send_to:yt}))}})).apply(this,arguments)}function _o(L){Fr=L}function fr(L){q=L}function ya(){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,J.Z)(function*(){var L;if(!(0,Ie.hl)())return Mi.warn(qs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ie.eu)()}catch(H){return Mi.warn(qs.create("indexeddb-unavailable",{errorInfo:null===(L=H)||void 0===L?void 0:L.toString()}).message),!1}return!0})).apply(this,arguments)}function Oo(){return(Oo=(0,J.Z)(function*(L,H,ae,De,tt,yt,Gt){var Cn;const On=yd(L);On.then(Fo=>{ae[Fo.measurementId]=Fo.appId,L.options.measurementId&&Fo.measurementId!==L.options.measurementId&&Mi.warn(`The measurement ID in the local Firebase config (${L.options.measurementId}) does not match the measurement ID fetched from the server (${Fo.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Fo=>Mi.error(Fo)),H.push(On);const xi=ya().then(Fo=>{if(Fo)return De.getId()}),[ki,mi]=yield Promise.all([On,xi]);dc(yt)||Ul(yt,ki.measurementId),Fr&&(tt("consent","default",Fr),_o(void 0)),tt("js",new Date);const os=null!==(Cn=null==Gt?void 0:Gt.config)&&void 0!==Cn?Cn:{};return os.origin="firebase",os.update=!0,null!=mi&&(os[eo]=mi),tt("config",ki.measurementId,os),q&&(tt("set",q),fr(void 0)),ki.measurementId})).apply(this,arguments)}class rs{constructor(H){this.app=H}_delete(){return delete ut[this.app.options.appId],Promise.resolve()}}let ut={},qo=[];const to={};let yo,Fa,pl="dataLayer",Ro=!1;function zc(L,H,ae){!function qc(){const L=[];if((0,Ie.ru)()&&L.push("This is a browser extension environment."),(0,Ie.zI)()||L.push("Cookies are not available."),L.length>0){const H=L.map((De,tt)=>`(${tt+1}) ${De}`).join(" "),ae=qs.create("invalid-analytics-context",{errorInfo:H});Mi.warn(ae.message)}}();const De=L.options.appId;if(!De)throw qs.create("no-app-id");if(!L.options.apiKey){if(!L.options.measurementId)throw qs.create("no-api-key");Mi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${L.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ut[De])throw qs.create("already-exists",{id:De});if(!Ro){!function An(L){let H=[];Array.isArray(window[L])?H=window[L]:window[L]=H}(pl);const{wrappedGtag:yt,gtagCore:Gt}=function is(L,H,ae,De,tt){let yt=function(...Gt){window[De].push(arguments)};return window[tt]&&"function"==typeof window[tt]&&(yt=window[tt]),window[tt]=function en(L,H,ae,De){function yt(){return(yt=(0,J.Z)(function*(Gt,Cn,On){try{"event"===Gt?yield En(L,H,ae,Cn,On):"config"===Gt?yield di(L,H,ae,De,Cn,On):"consent"===Gt?L("consent","update",On):L("set",Cn)}catch(xi){Mi.error(xi)}})).apply(this,arguments)}return function tt(Gt,Cn,On){return yt.apply(this,arguments)}}(yt,L,H,ae),{gtagCore:yt,wrappedGtag:window[tt]}}(ut,qo,to,pl,"gtag");Fa=yt,yo=Gt,Ro=!0}return ut[De]=function xo(L,H,ae,De,tt,yt,Gt){return Oo.apply(this,arguments)}(L,qo,to,H,yo,pl,ae),new rs(L)}function ku(){return La.apply(this,arguments)}function La(){return(La=(0,J.Z)(function*(){if((0,Ie.ru)()||!(0,Ie.zI)()||!(0,Ie.hl)())return!1;try{return yield(0,Ie.eu)()}catch(L){return!1}})).apply(this,arguments)}const vo="@firebase/analytics";!function Lr(){(0,Ee._registerComponent)(new Ze.wA(br,(H,{options:ae})=>zc(H.getProvider("app").getImmediate(),H.getProvider("installations-internal").getImmediate(),ae),"PUBLIC")),(0,Ee._registerComponent)(new Ze.wA("analytics-internal",function L(H){try{const ae=H.getProvider(br).getImmediate();return{logEvent:(De,tt,yt)=>function gl(L,H,ae,De){L=(0,Ie.m9)(L),function he(L,H,ae,De,tt){return ye.apply(this,arguments)}(Fa,ut[L.app.options.appId],H,ae,De).catch(tt=>Mi.error(tt))}(ae,De,tt,yt)}}catch(ae){throw qs.create("interop-component-reg-failed",{reason:ae})}},"PRIVATE")),(0,Ee.registerVersion)(vo,"0.8.3"),(0,Ee.registerVersion)(vo,"0.8.3","esm2017")}();var ph=V(4408),Br=V(7565);const Qc=new class ra extends Br.v{}(class zo extends ph.o{constructor(H,ae){super(H,ae),this.scheduler=H,this.work=ae}schedule(H,ae=0){return ae>0?super.schedule(H,ae):(this.delay=ae,this.state=H,this.scheduler.flush(this),this)}execute(H,ae){return ae>0||this.closed?super.execute(H,ae):this._execute(H,ae)}requestAsyncId(H,ae,De=0){return null!=De&&De>0||null==De&&this.delay>0?super.requestAsyncId(H,ae,De):H.flush(this)}});var fc=V(4986),Pu=V(8306),Xa=V(8505),Es=V(5363),uo=V(9468);const va=new _.GfV("7.4.1"),ko="__angularfire_symbol__analyticsIsSupportedValue",ba="__angularfire_symbol__analyticsIsSupported",Ba="__angularfire_symbol__remoteConfigIsSupportedValue",Ko="__angularfire_symbol__remoteConfigIsSupported",ml="__angularfire_symbol__messagingIsSupportedValue",sa="__angularfire_symbol__messagingIsSupported";function Fu(L,H,ae){if(H){if(1===H.length)return H[0];const yt=H.filter(Gt=>Gt.app===ae);if(1===yt.length)return yt[0]}return ae.container.getProvider(L).getImmediate({optional:!0})}globalThis[ba]||(globalThis[ba]=ku().then(L=>globalThis[ko]=L).catch(()=>globalThis[ko]=!1)),globalThis[sa]||(globalThis[sa]=Ls().then(L=>globalThis[ml]=L).catch(()=>globalThis[ml]=!1)),globalThis[Ko]||(globalThis[Ko]=Xr().then(L=>globalThis[Ba]=L).catch(()=>globalThis[Ba]=!1));const Ta=(L,H)=>{const ae=H?[H]:(0,c.C6)(),De=[];return ae.forEach(tt=>{tt.container.getProvider(L).instances.forEach(Gt=>{De.includes(Gt)||De.push(Gt)})}),De};function el(){}class Va{constructor(H,ae=Qc){this.zone=H,this.delegate=ae}now(){return this.delegate.now()}schedule(H,ae,De){const tt=this.zone;return this.delegate.schedule(function(Gt){tt.runGuarded(()=>{H.apply(this,[Gt])})},ae,De)}}class Po{constructor(H){this.zone=H,this.task=null}call(H,ae){const De=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",el,{},el,el)),ae.pipe((0,Xa.b)({next:De,complete:De,error:De})).subscribe(H).add(De)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Hl=(()=>{class L{constructor(ae){this.ngZone=ae,this.outsideAngular=ae.runOutsideAngular(()=>new Va(Zone.current)),this.insideAngular=ae.run(()=>new Va(Zone.current,fc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return L.\u0275fac=function(ae){return new(ae||L)(_.LFG(_.R0b))},L.\u0275prov=_.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})();function wa(){const L=globalThis.\u0275AngularFireScheduler;if(!L)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return L}function Jc(L){return wa().ngZone.runOutsideAngular(()=>L())}function Gl(L){return wa().ngZone.run(()=>L())}function _l(L){return L.pipe((0,Es.Q)(wa().outsideAngular))}function ss(L){return wa(),function Cs(L){return function(ae){return(ae=ae.lift(new Po(L.ngZone))).pipe((0,uo.R)(L.outsideAngular),(0,Es.Q)(L.insideAngular))}}(wa())(L)}const Hr=(L,H)=>function(){const De=arguments;return H&&setTimeout(()=>{"scheduled"===H.state&&H.invoke()},10),Gl(()=>L.apply(void 0,De))},Tf=(L,H)=>function(){let ae;const De=arguments;for(let yt=0;yt<arguments.length;yt++)"function"==typeof De[yt]&&(H&&(ae||(ae=Gl(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",el,{},el,el)))),De[yt]=Hr(De[yt],ae));const tt=Jc(()=>L.apply(this,De));if(!H){if(tt instanceof Pu.y){const yt=wa();return tt.pipe((0,uo.R)(yt.outsideAngular),(0,Es.Q)(yt.insideAngular))}return Gl(()=>tt)}return tt instanceof Pu.y?tt.pipe(ss):tt instanceof Promise?Gl(()=>new Promise((yt,Gt)=>tt.then(Cn=>Gl(()=>yt(Cn)),Cn=>Gl(()=>Gt(Cn))))):"function"==typeof tt&&ae?function(){return setTimeout(()=>{ae&&"scheduled"===ae.state&&ae.invoke()},10),tt.apply(this,arguments)}:Gl(()=>tt)}},1279:(rn,Ye,V)=>{V.d(Ye,{$:()=>Qa,A:()=>qt,B:()=>pt,G:()=>_s,H:()=>Os,J:()=>Rr,L:()=>Qr,M:()=>$,N:()=>kt,P:()=>mh,Q:()=>cn,R:()=>$l,T:()=>ri,U:()=>ft,V:()=>Qi,W:()=>Hi,X:()=>Go,Y:()=>fa,Z:()=>Ns,_:()=>lc,a:()=>fr,a0:()=>ul,a1:()=>xa,a2:()=>dl,a3:()=>ma,a4:()=>Zs,a5:()=>Vl,a6:()=>Ls,a7:()=>Wo,a8:()=>cc,a9:()=>Hc,aA:()=>wf,aB:()=>tu,aC:()=>Xc,aD:()=>yl,aE:()=>Di,aI:()=>xo,aL:()=>si,aa:()=>md,ab:()=>br,ac:()=>Ws,af:()=>Mi,ag:()=>Ul,ah:()=>An,ak:()=>ct,al:()=>Zc,an:()=>I,ao:()=>xt,ap:()=>He,aq:()=>Jt,ar:()=>Ke,as:()=>_r,at:()=>Kn,au:()=>ig,av:()=>ju,aw:()=>ii,ax:()=>Nt,ay:()=>Ht,az:()=>xn,b:()=>Fr,c:()=>tt,d:()=>On,e:()=>Gt,f:()=>tl,g:()=>Wl,h:()=>Bu,i:()=>vo,j:()=>vd,k:()=>oa,l:()=>el,m:()=>ro,n:()=>sg,o:()=>tn,r:()=>Po,s:()=>Fu,u:()=>Gl});var _=V(5861),c=V(2090),J=V(9681),Ee=V(1877);function pe(w,y){var C={};for(var N in w)Object.prototype.hasOwnProperty.call(w,N)&&y.indexOf(N)<0&&(C[N]=w[N]);if(null!=w&&"function"==typeof Object.getOwnPropertySymbols){var K=0;for(N=Object.getOwnPropertySymbols(w);K<N.length;K++)y.indexOf(N[K])<0&&Object.prototype.propertyIsEnumerable.call(w,N[K])&&(C[N[K]]=w[N[K]])}return C}var at=V(4859);const tn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},qt={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const pt=function Nn(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ot=function bn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Le=new c.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Kt=new Ee.Yd("@firebase/auth");function Mn(w,...y){Kt.logLevel<=Ee.in.ERROR&&Kt.error(`Auth (${J.SDK_VERSION}): ${w}`,...y)}function Kn(w,...y){throw $n(w,...y)}function ii(w,...y){return $n(w,...y)}function Ki(w,y,C){const N=Object.assign(Object.assign({},Ot()),{[y]:C});return new c.LL("auth","Firebase",N).create(y,{appName:w.name})}function Ei(w,y,C){if(!(y instanceof C))throw C.name!==y.constructor.name&&Kn(w,"argument-error"),Ki(w,"argument-error",`Type of ${y.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $n(w,...y){if("string"!=typeof w){const C=y[0],N=[...y.slice(1)];return N[0]&&(N[0].appName=w.name),w._errorFactory.create(C,...N)}return Le.create(w,...y)}function Nt(w,y,...C){if(!w)throw $n(y,...C)}function hi(w){const y="INTERNAL ASSERTION FAILED: "+w;throw Mn(y),new Error(y)}function Jt(w,y){w||hi(y)}const Yn=new Map;function Ht(w){Jt(w instanceof Function,"Expected a class definition");let y=Yn.get(w);return y?(Jt(y instanceof w,"Instance stored in cache mismatched with class"),y):(y=new w,Yn.set(w,y),y)}function Vi(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Zi(){return"http:"===Ai()||"https:"===Ai()}function Ai(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Pn{constructor(y,C){this.shortDelay=y,this.longDelay=C,Jt(C>y,"Short delay should be less than long delay!"),this.isMobile=(0,c.uI)()||(0,c.b$)()}get(){return function lr(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Zi()||(0,c.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Tn(w,y){Jt(w.emulator,"Emulator should always be set here");const{url:C}=w.emulator;return y?`${C}${y.startsWith("/")?y.slice(1):y}`:C}class gn{static initialize(y,C,N){this.fetchImpl=y,C&&(this.headersImpl=C),N&&(this.responseImpl=N)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Sr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Fi=new Pn(3e4,6e4);function sn(w,y){return w.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:w.tenantId}):y}function fi(w,y,C,N){return cr.apply(this,arguments)}function cr(){return(cr=(0,_.Z)(function*(w,y,C,N,K={}){return ui(w,K,(0,_.Z)(function*(){let ie={},Be={};N&&("GET"===y?Be=N:ie={body:JSON.stringify(N)});const Dt=(0,c.xO)(Object.assign({key:w.config.apiKey},Be)).slice(1),hn=yield w._getAdditionalHeaders();return hn["Content-Type"]="application/json",w.languageCode&&(hn["X-Firebase-Locale"]=w.languageCode),gn.fetch()(Yi(w,w.config.apiHost,C,Dt),Object.assign({method:y,headers:hn,referrerPolicy:"no-referrer"},ie))}))})).apply(this,arguments)}function ui(w,y,C){return yn.apply(this,arguments)}function yn(){return(yn=(0,_.Z)(function*(w,y,C){w._canInitEmulator=!1;const N=Object.assign(Object.assign({},Sr),y);try{const K=new Ut(w),ie=yield Promise.race([C(),K.promise]);K.clearNetworkTimeout();const Be=yield ie.json();if("needConfirmation"in Be)throw bt(w,"account-exists-with-different-credential",Be);if(ie.ok&&!("errorMessage"in Be))return Be;{const Dt=ie.ok?Be.errorMessage:Be.error.message,[hn,an]=Dt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===hn)throw bt(w,"credential-already-in-use",Be);if("EMAIL_EXISTS"===hn)throw bt(w,"email-already-in-use",Be);if("USER_DISABLED"===hn)throw bt(w,"user-disabled",Be);const Gn=N[hn]||hn.toLowerCase().replace(/[_\s]+/g,"-");if(an)throw Ki(w,Gn,an);Kn(w,Gn)}}catch(K){if(K instanceof c.ZR)throw K;Kn(w,"network-request-failed")}})).apply(this,arguments)}function Qn(w,y,C,N){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,_.Z)(function*(w,y,C,N,K={}){const ie=yield fi(w,y,C,N,K);return"mfaPendingCredential"in ie&&Kn(w,"multi-factor-auth-required",{_serverResponse:ie}),ie})).apply(this,arguments)}function Yi(w,y,C,N){const K=`${y}${C}?${N}`;return w.config.emulator?Tn(w.config,K):`${w.config.apiScheme}://${K}`}class Ut{constructor(y){this.auth=y,this.timer=null,this.promise=new Promise((C,N)=>{this.timer=setTimeout(()=>N(ii(this.auth,"network-request-failed")),Fi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bt(w,y,C){const N={appName:w.name};C.email&&(N.email=C.email),C.phoneNumber&&(N.phoneNumber=C.phoneNumber);const K=ii(w,y,N);return K.customData._tokenResponse=C,K}function fn(){return(fn=(0,_.Z)(function*(w,y){return fi(w,"POST","/v1/accounts:delete",y)})).apply(this,arguments)}function dn(w,y){return on.apply(this,arguments)}function on(){return(on=(0,_.Z)(function*(w,y){return fi(w,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function xe(w,y){return we.apply(this,arguments)}function we(){return(we=(0,_.Z)(function*(w,y){return fi(w,"POST","/v1/accounts:lookup",y)})).apply(this,arguments)}function Ve(w){if(w)try{const y=new Date(Number(w));if(!isNaN(y.getTime()))return y.toUTCString()}catch(y){}}function X(){return(X=(0,_.Z)(function*(w,y=!1){const C=(0,c.m9)(w),N=yield C.getIdToken(y),K=ce(N);Nt(K&&K.exp&&K.auth_time&&K.iat,C.auth,"internal-error");const ie="object"==typeof K.firebase?K.firebase:void 0,Be=null==ie?void 0:ie.sign_in_provider;return{claims:K,token:N,authTime:Ve(ue(K.auth_time)),issuedAtTime:Ve(ue(K.iat)),expirationTime:Ve(ue(K.exp)),signInProvider:Be||null,signInSecondFactor:(null==ie?void 0:ie.sign_in_second_factor)||null}})).apply(this,arguments)}function ue(w){return 1e3*Number(w)}function ce(w){var y;const[C,N,K]=w.split(".");if(void 0===C||void 0===N||void 0===K)return Mn("JWT malformed, contained fewer than 3 sections"),null;try{const ie=(0,c.tV)(N);return ie?JSON.parse(ie):(Mn("Failed to decode base64 JWT payload"),null)}catch(ie){return Mn("Caught error parsing JWT payload as JSON",null===(y=ie)||void 0===y?void 0:y.toString()),null}}function et(w,y){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,_.Z)(function*(w,y,C=!1){if(C)return y;try{return yield y}catch(N){throw N instanceof c.ZR&&Yt(N)&&w.auth.currentUser===w&&(yield w.auth.signOut()),N}})).apply(this,arguments)}function Yt({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Jn{constructor(y){this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(y){var C;if(y){const N=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),N}{this.errorBackoff=3e4;const K=(null!==(C=this.user.stsTokenManager.expirationTime)&&void 0!==C?C:0)-Date.now()-3e5;return Math.max(0,K)}}schedule(y=!1){var C=this;if(!this.isRunning)return;const N=this.getInterval(y);this.timerId=setTimeout((0,_.Z)(function*(){yield C.iteration()}),N)}iteration(){var y=this;return(0,_.Z)(function*(){var C;try{yield y.user.getIdToken(!0)}catch(N){return void("auth/network-request-failed"===(null===(C=N)||void 0===C?void 0:C.code)&&y.schedule(!0))}y.schedule()})()}}class Xn{constructor(y,C){this.createdAt=y,this.lastLoginAt=C,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ve(this.lastLoginAt),this.creationTime=Ve(this.createdAt)}_copy(y){this.createdAt=y.createdAt,this.lastLoginAt=y.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Mt(w){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,_.Z)(function*(w){var y;const C=w.auth,N=yield w.getIdToken(),K=yield et(w,xe(C,{idToken:N}));Nt(null==K?void 0:K.users.length,C,"internal-error");const ie=K.users[0];w._notifyReloadListener(ie);const Be=(null===(y=ie.providerUserInfo)||void 0===y?void 0:y.length)?Si(ie.providerUserInfo):[],Dt=ji(w.providerData,Be),Gn=!!w.isAnonymous&&!(w.email&&ie.passwordHash||(null==Dt?void 0:Dt.length)),pr={uid:ie.localId,displayName:ie.displayName||null,photoURL:ie.photoUrl||null,email:ie.email||null,emailVerified:ie.emailVerified||!1,phoneNumber:ie.phoneNumber||null,tenantId:ie.tenantId||null,providerData:Dt,metadata:new Xn(ie.createdAt,ie.lastLoginAt),isAnonymous:Gn};Object.assign(w,pr)})).apply(this,arguments)}function jn(){return(jn=(0,_.Z)(function*(w){const y=(0,c.m9)(w);yield Mt(y),yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)})).apply(this,arguments)}function ji(w,y){return[...w.filter(N=>!y.some(K=>K.providerId===N.providerId)),...y]}function Si(w){return w.map(y=>{var{providerId:C}=y,N=pe(y,["providerId"]);return{providerId:C,uid:N.rawId||"",displayName:N.displayName||null,email:N.email||null,phoneNumber:N.phoneNumber||null,photoURL:N.photoUrl||null}})}function Zn(){return(Zn=(0,_.Z)(function*(w,y){const C=yield ui(w,{},(0,_.Z)(function*(){const N=(0,c.xO)({grant_type:"refresh_token",refresh_token:y}).slice(1),{tokenApiHost:K,apiKey:ie}=w.config,Be=Yi(w,K,"/v1/token",`key=${ie}`),Dt=yield w._getAdditionalHeaders();return Dt["Content-Type"]="application/x-www-form-urlencoded",gn.fetch()(Be,{method:"POST",headers:Dt,body:N})}));return{accessToken:C.access_token,expiresIn:C.expires_in,refreshToken:C.refresh_token}})).apply(this,arguments)}class Ni{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(y){Nt(y.idToken,"internal-error"),Nt(void 0!==y.idToken,"internal-error"),Nt(void 0!==y.refreshToken,"internal-error");const C="expiresIn"in y&&void 0!==y.expiresIn?Number(y.expiresIn):function Me(w){const y=ce(w);return Nt(y,"internal-error"),Nt(void 0!==y.exp,"internal-error"),Nt(void 0!==y.iat,"internal-error"),Number(y.exp)-Number(y.iat)}(y.idToken);this.updateTokensAndExpiration(y.idToken,y.refreshToken,C)}getToken(y,C=!1){var N=this;return(0,_.Z)(function*(){return Nt(!N.accessToken||N.refreshToken,y,"user-token-expired"),C||!N.accessToken||N.isExpired?N.refreshToken?(yield N.refresh(y,N.refreshToken),N.accessToken):null:N.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(y,C){var N=this;return(0,_.Z)(function*(){const{accessToken:K,refreshToken:ie,expiresIn:Be}=yield function Xt(w,y){return Zn.apply(this,arguments)}(y,C);N.updateTokensAndExpiration(K,ie,Number(Be))})()}updateTokensAndExpiration(y,C,N){this.refreshToken=C||null,this.accessToken=y||null,this.expirationTime=Date.now()+1e3*N}static fromJSON(y,C){const{refreshToken:N,accessToken:K,expirationTime:ie}=C,Be=new Ni;return N&&(Nt("string"==typeof N,"internal-error",{appName:y}),Be.refreshToken=N),K&&(Nt("string"==typeof K,"internal-error",{appName:y}),Be.accessToken=K),ie&&(Nt("number"==typeof ie,"internal-error",{appName:y}),Be.expirationTime=ie),Be}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(y){this.accessToken=y.accessToken,this.refreshToken=y.refreshToken,this.expirationTime=y.expirationTime}_clone(){return Object.assign(new Ni,this.toJSON())}_performRefresh(){return hi("not implemented")}}function Oi(w,y){Nt("string"==typeof w||void 0===w,"internal-error",{appName:y})}class Wi{constructor(y){var{uid:C,auth:N,stsTokenManager:K}=y,ie=pe(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=C,this.auth=N,this.stsTokenManager=K,this.accessToken=K.accessToken,this.displayName=ie.displayName||null,this.email=ie.email||null,this.emailVerified=ie.emailVerified||!1,this.phoneNumber=ie.phoneNumber||null,this.photoURL=ie.photoURL||null,this.isAnonymous=ie.isAnonymous||!1,this.tenantId=ie.tenantId||null,this.providerData=ie.providerData?[...ie.providerData]:[],this.metadata=new Xn(ie.createdAt||void 0,ie.lastLoginAt||void 0)}getIdToken(y){var C=this;return(0,_.Z)(function*(){const N=yield et(C,C.stsTokenManager.getToken(C.auth,y));return Nt(N,C.auth,"internal-error"),C.accessToken!==N&&(C.accessToken=N,yield C.auth._persistUserIfCurrent(C),C.auth._notifyListenersIfCurrent(C)),N})()}getIdTokenResult(y){return function de(w){return X.apply(this,arguments)}(this,y)}reload(){return function Hn(w){return jn.apply(this,arguments)}(this)}_assign(y){this!==y&&(Nt(this.uid===y.uid,this.auth,"internal-error"),this.displayName=y.displayName,this.photoURL=y.photoURL,this.email=y.email,this.emailVerified=y.emailVerified,this.phoneNumber=y.phoneNumber,this.isAnonymous=y.isAnonymous,this.tenantId=y.tenantId,this.providerData=y.providerData.map(C=>Object.assign({},C)),this.metadata._copy(y.metadata),this.stsTokenManager._assign(y.stsTokenManager))}_clone(y){return new Wi(Object.assign(Object.assign({},this),{auth:y,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(y){Nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=y,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(y){this.reloadListener?this.reloadListener(y):this.reloadUserInfo=y}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(y,C=!1){var N=this;return(0,_.Z)(function*(){let K=!1;y.idToken&&y.idToken!==N.stsTokenManager.accessToken&&(N.stsTokenManager.updateFromServerResponse(y),K=!0),C&&(yield Mt(N)),yield N.auth._persistUserIfCurrent(N),K&&N.auth._notifyListenersIfCurrent(N)})()}delete(){var y=this;return(0,_.Z)(function*(){const C=yield y.getIdToken();return yield et(y,function nn(w,y){return fn.apply(this,arguments)}(y.auth,{idToken:C})),y.stsTokenManager.clearRefreshToken(),y.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(y=>Object.assign({},y)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(y,C){var N,K,ie,Be,Dt,hn,an,Gn;const pr=null!==(N=C.displayName)&&void 0!==N?N:void 0,Gr=null!==(K=C.email)&&void 0!==K?K:void 0,so=null!==(ie=C.phoneNumber)&&void 0!==ie?ie:void 0,Kl=null!==(Be=C.photoURL)&&void 0!==Be?Be:void 0,Dd=null!==(Dt=C.tenantId)&&void 0!==Dt?Dt:void 0,Ks=null!==(hn=C._redirectEventId)&&void 0!==hn?hn:void 0,Id=null!==(an=C.createdAt)&&void 0!==an?an:void 0,xf=null!==(Gn=C.lastLoginAt)&&void 0!==Gn?Gn:void 0,{uid:Tc,emailVerified:rl,isAnonymous:Eh,providerData:Gu,stsTokenManager:Zu}=C;Nt(Tc&&Zu,y,"internal-error");const og=Ni.fromJSON(this.name,Zu);Nt("string"==typeof Tc,y,"internal-error"),Oi(pr,y.name),Oi(Gr,y.name),Nt("boolean"==typeof rl,y,"internal-error"),Nt("boolean"==typeof Eh,y,"internal-error"),Oi(so,y.name),Oi(Kl,y.name),Oi(Dd,y.name),Oi(Ks,y.name),Oi(Id,y.name),Oi(xf,y.name);const wc=new Wi({uid:Tc,auth:y,email:Gr,emailVerified:rl,displayName:pr,isAnonymous:Eh,photoURL:Kl,phoneNumber:so,tenantId:Dd,stsTokenManager:og,createdAt:Id,lastLoginAt:xf});return Gu&&Array.isArray(Gu)&&(wc.providerData=Gu.map(Of=>Object.assign({},Of))),Ks&&(wc._redirectEventId=Ks),wc}static _fromIdTokenResponse(y,C,N=!1){return(0,_.Z)(function*(){const K=new Ni;K.updateFromServerResponse(C);const ie=new Wi({uid:C.localId,auth:y,stsTokenManager:K,isAnonymous:N});return yield Mt(ie),ie})()}}const Qr=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(C,N){var K=this;return(0,_.Z)(function*(){K.storage[C]=N})()}_get(C){var N=this;return(0,_.Z)(function*(){const K=N.storage[C];return void 0===K?null:K})()}_remove(C){var N=this;return(0,_.Z)(function*(){delete N.storage[C]})()}_addListener(C,N){}_removeListener(C,N){}}return w.type="NONE",w})();function xn(w,y,C){return`firebase:${w}:${y}:${C}`}class or{constructor(y,C,N){this.persistence=y,this.auth=C,this.userKey=N;const{config:K,name:ie}=this.auth;this.fullUserKey=xn(this.userKey,K.apiKey,ie),this.fullPersistenceKey=xn("persistence",K.apiKey,ie),this.boundEventHandler=C._onStorageEvent.bind(C),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(y){return this.persistence._set(this.fullUserKey,y.toJSON())}getCurrentUser(){var y=this;return(0,_.Z)(function*(){const C=yield y.persistence._get(y.fullUserKey);return C?Wi._fromJSON(y.auth,C):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(y){var C=this;return(0,_.Z)(function*(){if(C.persistence===y)return;const N=yield C.getCurrentUser();return yield C.removeCurrentUser(),C.persistence=y,N?C.setCurrentUser(N):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(y,C,N="authUser"){return(0,_.Z)(function*(){if(!C.length)return new or(Ht(Qr),y,N);const K=(yield Promise.all(C.map(function(){var an=(0,_.Z)(function*(Gn){if(yield Gn._isAvailable())return Gn});return function(Gn){return an.apply(this,arguments)}}()))).filter(an=>an);let ie=K[0]||Ht(Qr);const Be=xn(N,y.config.apiKey,y.name);let Dt=null;for(const an of C)try{const Gn=yield an._get(Be);if(Gn){const pr=Wi._fromJSON(y,Gn);an!==ie&&(Dt=pr),ie=an;break}}catch(Gn){}const hn=K.filter(an=>an._shouldAllowMigration);return ie._shouldAllowMigration&&hn.length?(ie=hn[0],Dt&&(yield ie._set(Be,Dt.toJSON())),yield Promise.all(C.map(function(){var an=(0,_.Z)(function*(Gn){if(Gn!==ie)try{yield Gn._remove(Be)}catch(pr){}});return function(Gn){return an.apply(this,arguments)}}())),new or(ie,y,N)):new or(ie,y,N)})()}}function vi(w){const y=w.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if($i(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(zn(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(ar(y))return"Blackberry";if(qr(y))return"Webos";if(Wr(y))return"Safari";if((y.includes("chrome/")||Ds(y))&&!y.includes("edge/"))return"Chrome";if(_r(y))return"Android";{const N=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==N?void 0:N.length))return N[1]}return"Other"}function zn(w=(0,c.z$)()){return/firefox\//i.test(w)}function Wr(w=(0,c.z$)()){const y=w.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}function Ds(w=(0,c.z$)()){return/crios\//i.test(w)}function $i(w=(0,c.z$)()){return/iemobile/i.test(w)}function _r(w=(0,c.z$)()){return/android/i.test(w)}function ar(w=(0,c.z$)()){return/blackberry/i.test(w)}function qr(w=(0,c.z$)()){return/webos/i.test(w)}function Ke(w=(0,c.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function He(w=(0,c.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function zt(w=(0,c.z$)()){return Ke(w)||_r(w)||qr(w)||ar(w)||/windows phone/i.test(w)||$i(w)}function ei(w,y=[]){let C;switch(w){case"Browser":C=vi((0,c.z$)());break;case"Worker":C=`${vi((0,c.z$)())}-${w}`;break;default:C=w}const N=y.length?y.join(","):"FirebaseCore-web";return`${C}/JsCore/${J.SDK_VERSION}/${N}`}class dr{constructor(y){this.auth=y,this.queue=[]}pushCallback(y,C){const N=ie=>new Promise((Be,Dt)=>{try{Be(y(ie))}catch(hn){Dt(hn)}});N.onAbort=C,this.queue.push(N);const K=this.queue.length-1;return()=>{this.queue[K]=()=>Promise.resolve()}}runMiddleware(y){var C=this;return(0,_.Z)(function*(){var N;if(C.auth.currentUser===y)return;const K=[];try{for(const ie of C.queue)yield ie(y),ie.onAbort&&K.push(ie.onAbort)}catch(ie){K.reverse();for(const Be of K)try{Be()}catch(Dt){}throw C.auth._errorFactory.create("login-blocked",{originalMessage:null===(N=ie)||void 0===N?void 0:N.message})}})()}}class Ri{constructor(y,C,N){this.app=y,this.heartbeatServiceProvider=C,this.config=N,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yr(this),this.idTokenSubscription=new yr(this),this.beforeStateQueue=new dr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Le,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=N.sdkClientVersion}_initializeWithPersistence(y,C){var N=this;return C&&(this._popupRedirectResolver=Ht(C)),this._initializationPromise=this.queue((0,_.Z)(function*(){var K,ie;if(!N._deleted&&(N.persistenceManager=yield or.create(N,y),!N._deleted)){if(null===(K=N._popupRedirectResolver)||void 0===K?void 0:K._shouldInitProactively)try{yield N._popupRedirectResolver._initialize(N)}catch(Be){}yield N.initializeCurrentUser(C),N.lastNotifiedUid=(null===(ie=N.currentUser)||void 0===ie?void 0:ie.uid)||null,!N._deleted&&(N._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var y=this;return(0,_.Z)(function*(){if(y._deleted)return;const C=yield y.assertedPersistence.getCurrentUser();if(y.currentUser||C){if(y.currentUser&&C&&y.currentUser.uid===C.uid)return y._currentUser._assign(C),void(yield y.currentUser.getIdToken());yield y._updateCurrentUser(C,!0)}})()}initializeCurrentUser(y){var C=this;return(0,_.Z)(function*(){var N;const K=yield C.assertedPersistence.getCurrentUser();let ie=K,Be=!1;if(y&&C.config.authDomain){yield C.getOrInitRedirectPersistenceManager();const Dt=null===(N=C.redirectUser)||void 0===N?void 0:N._redirectEventId,hn=null==ie?void 0:ie._redirectEventId,an=yield C.tryRedirectSignIn(y);(!Dt||Dt===hn)&&(null==an?void 0:an.user)&&(ie=an.user,Be=!0)}if(!ie)return C.directlySetCurrentUser(null);if(!ie._redirectEventId){if(Be)try{yield C.beforeStateQueue.runMiddleware(ie)}catch(Dt){ie=K,C._popupRedirectResolver._overrideRedirectResult(C,()=>Promise.reject(Dt))}return ie?C.reloadAndSetCurrentUserOrClear(ie):C.directlySetCurrentUser(null)}return Nt(C._popupRedirectResolver,C,"argument-error"),yield C.getOrInitRedirectPersistenceManager(),C.redirectUser&&C.redirectUser._redirectEventId===ie._redirectEventId?C.directlySetCurrentUser(ie):C.reloadAndSetCurrentUserOrClear(ie)})()}tryRedirectSignIn(y){var C=this;return(0,_.Z)(function*(){let N=null;try{N=yield C._popupRedirectResolver._completeRedirectFn(C,y,!0)}catch(K){yield C._setRedirectUser(null)}return N})()}reloadAndSetCurrentUserOrClear(y){var C=this;return(0,_.Z)(function*(){var N;try{yield Mt(y)}catch(K){if("auth/network-request-failed"!==(null===(N=K)||void 0===N?void 0:N.code))return C.directlySetCurrentUser(null)}return C.directlySetCurrentUser(y)})()}useDeviceLanguage(){this.languageCode=function tr(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var y=this;return(0,_.Z)(function*(){y._deleted=!0})()}updateCurrentUser(y){var C=this;return(0,_.Z)(function*(){const N=y?(0,c.m9)(y):null;return N&&Nt(N.auth.config.apiKey===C.config.apiKey,C,"invalid-user-token"),C._updateCurrentUser(N&&N._clone(C))})()}_updateCurrentUser(y,C=!1){var N=this;return(0,_.Z)(function*(){if(!N._deleted)return y&&Nt(N.tenantId===y.tenantId,N,"tenant-id-mismatch"),C||(yield N.beforeStateQueue.runMiddleware(y)),N.queue((0,_.Z)(function*(){yield N.directlySetCurrentUser(y),N.notifyAuthListeners()}))})()}signOut(){var y=this;return(0,_.Z)(function*(){return yield y.beforeStateQueue.runMiddleware(null),(y.redirectPersistenceManager||y._popupRedirectResolver)&&(yield y._setRedirectUser(null)),y._updateCurrentUser(null,!0)})()}setPersistence(y){var C=this;return this.queue((0,_.Z)(function*(){yield C.assertedPersistence.setPersistence(Ht(y))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(y){this._errorFactory=new c.LL("auth","Firebase",y())}onAuthStateChanged(y,C,N){return this.registerStateListener(this.authStateSubscription,y,C,N)}beforeAuthStateChanged(y,C){return this.beforeStateQueue.pushCallback(y,C)}onIdTokenChanged(y,C,N){return this.registerStateListener(this.idTokenSubscription,y,C,N)}toJSON(){var y;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(y=this._currentUser)||void 0===y?void 0:y.toJSON()}}_setRedirectUser(y,C){var N=this;return(0,_.Z)(function*(){const K=yield N.getOrInitRedirectPersistenceManager(C);return null===y?K.removeCurrentUser():K.setCurrentUser(y)})()}getOrInitRedirectPersistenceManager(y){var C=this;return(0,_.Z)(function*(){if(!C.redirectPersistenceManager){const N=y&&Ht(y)||C._popupRedirectResolver;Nt(N,C,"argument-error"),C.redirectPersistenceManager=yield or.create(C,[Ht(N._redirectPersistence)],"redirectUser"),C.redirectUser=yield C.redirectPersistenceManager.getCurrentUser()}return C.redirectPersistenceManager})()}_redirectUserForId(y){var C=this;return(0,_.Z)(function*(){var N,K;return C._isInitialized&&(yield C.queue((0,_.Z)(function*(){}))),(null===(N=C._currentUser)||void 0===N?void 0:N._redirectEventId)===y?C._currentUser:(null===(K=C.redirectUser)||void 0===K?void 0:K._redirectEventId)===y?C.redirectUser:null})()}_persistUserIfCurrent(y){var C=this;return(0,_.Z)(function*(){if(y===C.currentUser)return C.queue((0,_.Z)(function*(){return C.directlySetCurrentUser(y)}))})()}_notifyListenersIfCurrent(y){y===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var y,C;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const N=null!==(C=null===(y=this.currentUser)||void 0===y?void 0:y.uid)&&void 0!==C?C:null;this.lastNotifiedUid!==N&&(this.lastNotifiedUid=N,this.authStateSubscription.next(this.currentUser))}registerStateListener(y,C,N,K){if(this._deleted)return()=>{};const ie="function"==typeof C?C:C.next.bind(C),Be=this._isInitialized?Promise.resolve():this._initializationPromise;return Nt(Be,this,"internal-error"),Be.then(()=>ie(this.currentUser)),"function"==typeof C?y.addObserver(C,N,K):y.addObserver(C)}directlySetCurrentUser(y){var C=this;return(0,_.Z)(function*(){C.currentUser&&C.currentUser!==y&&C._currentUser._stopProactiveRefresh(),y&&C.isProactiveRefreshEnabled&&y._startProactiveRefresh(),C.currentUser=y,y?yield C.assertedPersistence.setCurrentUser(y):yield C.assertedPersistence.removeCurrentUser()})()}queue(y){return this.operations=this.operations.then(y,y),this.operations}get assertedPersistence(){return Nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(y){!y||this.frameworks.includes(y)||(this.frameworks.push(y),this.frameworks.sort(),this.clientVersion=ei(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var y=this;return(0,_.Z)(function*(){var C;const N={"X-Client-Version":y.clientVersion};y.app.options.appId&&(N["X-Firebase-gmpid"]=y.app.options.appId);const K=yield null===(C=y.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===C?void 0:C.getHeartbeatsHeader();return K&&(N["X-Firebase-Client"]=K),N})()}}function Di(w){return(0,c.m9)(w)}class yr{constructor(y){this.auth=y,this.observer=null,this.addObserver=(0,c.ne)(C=>this.observer=C)}get next(){return Nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function _s(w,y,C){const N=Di(w);Nt(N._canInitEmulator,N,"emulator-config-failed"),Nt(/^https?:\/\//.test(y),N,"invalid-emulator-scheme");const K=!!(null==C?void 0:C.disableWarnings),ie=ys(y),{host:Be,port:Dt}=function Jr(w){const y=ys(w),C=/(\/\/)?([^?#/]+)/.exec(w.substr(y.length));if(!C)return{host:"",port:null};const N=C[2].split("@").pop()||"",K=/^(\[[^\]]+\])(:|$)/.exec(N);if(K){const ie=K[1];return{host:ie,port:zr(N.substr(ie.length+1))}}{const[ie,Be]=N.split(":");return{host:ie,port:zr(Be)}}}(y);N.config.emulator={url:`${ie}//${Be}${null===Dt?"":`:${Dt}`}/`},N.settings.appVerificationDisabledForTesting=!0,N.emulatorConfig=Object.freeze({host:Be,port:Dt,protocol:ie.replace(":",""),options:Object.freeze({disableWarnings:K})}),K||function Ia(){function w(){const y=document.createElement("p"),C=y.style;y.innerText="Running in emulator mode. Do not use with production credentials.",C.position="fixed",C.width="100%",C.backgroundColor="#ffffff",C.border=".1em solid #000000",C.color="#b50000",C.bottom="0px",C.left="0px",C.margin="0px",C.zIndex="10000",C.textAlign="center",y.classList.add("firebase-emulator-warning"),document.body.appendChild(y)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function ys(w){const y=w.indexOf(":");return y<0?"":w.substr(0,y+1)}function zr(w){if(!w)return null;const y=Number(w);return isNaN(y)?null:y}class Os{constructor(y,C){this.providerId=y,this.signInMethod=C}toJSON(){return hi("not implemented")}_getIdTokenResponse(y){return hi("not implemented")}_linkToIdToken(y,C){return hi("not implemented")}_getReauthenticationResolver(y){return hi("not implemented")}}function Xo(w,y){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,_.Z)(function*(w,y){return fi(w,"POST","/v1/accounts:resetPassword",sn(w,y))})).apply(this,arguments)}function Rs(w,y){return Co.apply(this,arguments)}function Co(){return(Co=(0,_.Z)(function*(w,y){return fi(w,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function vs(w,y){return ds.apply(this,arguments)}function ds(){return(ds=(0,_.Z)(function*(w,y){return fi(w,"POST","/v1/accounts:update",sn(w,y))})).apply(this,arguments)}function Qs(){return(Qs=(0,_.Z)(function*(w,y){return Qn(w,"POST","/v1/accounts:signInWithPassword",sn(w,y))})).apply(this,arguments)}function To(w,y){return wo.apply(this,arguments)}function wo(){return(wo=(0,_.Z)(function*(w,y){return fi(w,"POST","/v1/accounts:sendOobCode",sn(w,y))})).apply(this,arguments)}function da(w,y){return Do.apply(this,arguments)}function Do(){return(Do=(0,_.Z)(function*(w,y){return To(w,y)})).apply(this,arguments)}function Sa(w,y){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,_.Z)(function*(w,y){return To(w,y)})).apply(this,arguments)}function Xr(w,y){return ks.apply(this,arguments)}function ks(){return(ks=(0,_.Z)(function*(w,y){return To(w,y)})).apply(this,arguments)}function Ps(w,y){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,_.Z)(function*(w,y){return To(w,y)})).apply(this,arguments)}function Hs(){return(Hs=(0,_.Z)(function*(w,y){return Qn(w,"POST","/v1/accounts:signInWithEmailLink",sn(w,y))})).apply(this,arguments)}function bs(){return(bs=(0,_.Z)(function*(w,y){return Qn(w,"POST","/v1/accounts:signInWithEmailLink",sn(w,y))})).apply(this,arguments)}class Is extends Os{constructor(y,C,N,K=null){super("password",N),this._email=y,this._password=C,this._tenantId=K}static _fromEmailAndPassword(y,C){return new Is(y,C,"password")}static _fromEmailAndCode(y,C,N=null){return new Is(y,C,"emailLink",N)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(y){const C="string"==typeof y?JSON.parse(y):y;if((null==C?void 0:C.email)&&(null==C?void 0:C.password)){if("password"===C.signInMethod)return this._fromEmailAndPassword(C.email,C.password);if("emailLink"===C.signInMethod)return this._fromEmailAndCode(C.email,C.password,C.tenantId)}return null}_getIdTokenResponse(y){var C=this;return(0,_.Z)(function*(){switch(C.signInMethod){case"password":return function $s(w,y){return Qs.apply(this,arguments)}(y,{returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function nr(w,y){return Hs.apply(this,arguments)}(y,{email:C._email,oobCode:C._password});default:Kn(y,"internal-error")}})()}_linkToIdToken(y,C){var N=this;return(0,_.Z)(function*(){switch(N.signInMethod){case"password":return Rs(y,{idToken:C,returnSecureToken:!0,email:N._email,password:N._password});case"emailLink":return function Gs(w,y){return bs.apply(this,arguments)}(y,{idToken:C,email:N._email,oobCode:N._password});default:Kn(y,"internal-error")}})()}_getReauthenticationResolver(y){return this._getIdTokenResponse(y)}}function As(w,y){return Js.apply(this,arguments)}function Js(){return(Js=(0,_.Z)(function*(w,y){return Qn(w,"POST","/v1/accounts:signInWithIdp",sn(w,y))})).apply(this,arguments)}class Rr extends Os{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(y){const C=new Rr(y.providerId,y.signInMethod);return y.idToken||y.accessToken?(y.idToken&&(C.idToken=y.idToken),y.accessToken&&(C.accessToken=y.accessToken),y.nonce&&!y.pendingToken&&(C.nonce=y.nonce),y.pendingToken&&(C.pendingToken=y.pendingToken)):y.oauthToken&&y.oauthTokenSecret?(C.accessToken=y.oauthToken,C.secret=y.oauthTokenSecret):Kn("argument-error"),C}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(y){const C="string"==typeof y?JSON.parse(y):y,{providerId:N,signInMethod:K}=C,ie=pe(C,["providerId","signInMethod"]);if(!N||!K)return null;const Be=new Rr(N,K);return Be.idToken=ie.idToken||void 0,Be.accessToken=ie.accessToken||void 0,Be.secret=ie.secret,Be.nonce=ie.nonce,Be.pendingToken=ie.pendingToken||null,Be}_getIdTokenResponse(y){return As(y,this.buildRequest())}_linkToIdToken(y,C){const N=this.buildRequest();return N.idToken=C,As(y,N)}_getReauthenticationResolver(y){const C=this.buildRequest();return C.autoCreate=!1,As(y,C)}buildRequest(){const y={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)y.pendingToken=this.pendingToken;else{const C={};this.idToken&&(C.id_token=this.idToken),this.accessToken&&(C.access_token=this.accessToken),this.secret&&(C.oauth_token_secret=this.secret),C.providerId=this.providerId,this.nonce&&!this.pendingToken&&(C.nonce=this.nonce),y.postBody=(0,c.xO)(C)}return y}}function Na(w,y){return vr.apply(this,arguments)}function vr(){return(vr=(0,_.Z)(function*(w,y){return fi(w,"POST","/v1/accounts:sendVerificationCode",sn(w,y))})).apply(this,arguments)}function te(){return(te=(0,_.Z)(function*(w,y){return Qn(w,"POST","/v1/accounts:signInWithPhoneNumber",sn(w,y))})).apply(this,arguments)}function Se(){return(Se=(0,_.Z)(function*(w,y){const C=yield Qn(w,"POST","/v1/accounts:signInWithPhoneNumber",sn(w,y));if(C.temporaryProof)throw bt(w,"account-exists-with-different-credential",C);return C})).apply(this,arguments)}const Je={USER_NOT_FOUND:"user-not-found"};function Bt(){return(Bt=(0,_.Z)(function*(w,y){return Qn(w,"POST","/v1/accounts:signInWithPhoneNumber",sn(w,Object.assign(Object.assign({},y),{operation:"REAUTH"})),Je)})).apply(this,arguments)}class _n extends Os{constructor(y){super("phone","phone"),this.params=y}static _fromVerification(y,C){return new _n({verificationId:y,verificationCode:C})}static _fromTokenResponse(y,C){return new _n({phoneNumber:y,temporaryProof:C})}_getIdTokenResponse(y){return function ne(w,y){return te.apply(this,arguments)}(y,this._makeVerificationRequest())}_linkToIdToken(y,C){return function Te(w,y){return Se.apply(this,arguments)}(y,Object.assign({idToken:C},this._makeVerificationRequest()))}_getReauthenticationResolver(y){return function Rt(w,y){return Bt.apply(this,arguments)}(y,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:y,phoneNumber:C,verificationId:N,verificationCode:K}=this.params;return y&&C?{temporaryProof:y,phoneNumber:C}:{sessionInfo:N,code:K}}toJSON(){const y={providerId:this.providerId};return this.params.phoneNumber&&(y.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(y.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(y.verificationCode=this.params.verificationCode),this.params.verificationId&&(y.verificationId=this.params.verificationId),y}static fromJSON(y){"string"==typeof y&&(y=JSON.parse(y));const{verificationId:C,verificationCode:N,phoneNumber:K,temporaryProof:ie}=y;return N||C||K||ie?new _n({verificationId:C,verificationCode:N,phoneNumber:K,temporaryProof:ie}):null}}class B{constructor(y){var C,N,K,ie,Be,Dt;const hn=(0,c.zd)((0,c.pd)(y)),an=null!==(C=hn.apiKey)&&void 0!==C?C:null,Gn=null!==(N=hn.oobCode)&&void 0!==N?N:null,pr=function Vn(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(K=hn.mode)&&void 0!==K?K:null);Nt(an&&Gn&&pr,"argument-error"),this.apiKey=an,this.operation=pr,this.code=Gn,this.continueUrl=null!==(ie=hn.continueUrl)&&void 0!==ie?ie:null,this.languageCode=null!==(Be=hn.languageCode)&&void 0!==Be?Be:null,this.tenantId=null!==(Dt=hn.tenantId)&&void 0!==Dt?Dt:null}static parseLink(y){const C=function Fn(w){const y=(0,c.zd)((0,c.pd)(w)).link,C=y?(0,c.zd)((0,c.pd)(y)).deep_link_id:null,N=(0,c.zd)((0,c.pd)(w)).deep_link_id;return(N?(0,c.zd)((0,c.pd)(N)).link:null)||N||C||y||w}(y);try{return new B(C)}catch(N){return null}}}let $=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(C,N){return Is._fromEmailAndPassword(C,N)}static credentialWithLink(C,N){const K=B.parseLink(N);return Nt(K,"argument-error"),Is._fromEmailAndCode(C,K.code,K.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class le{constructor(y){this.providerId=y,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(y){this.defaultLanguageCode=y}setCustomParameters(y){return this.customParameters=y,this}getCustomParameters(){return this.customParameters}}class Oe extends le{constructor(){super(...arguments),this.scopes=[]}addScope(y){return this.scopes.includes(y)||this.scopes.push(y),this}getScopes(){return[...this.scopes]}}class ft extends Oe{static credentialFromJSON(y){const C="string"==typeof y?JSON.parse(y):y;return Nt("providerId"in C&&"signInMethod"in C,"argument-error"),Rr._fromParams(C)}credential(y){return this._credential(Object.assign(Object.assign({},y),{nonce:y.rawNonce}))}_credential(y){return Nt(y.idToken||y.accessToken,"argument-error"),Rr._fromParams(Object.assign(Object.assign({},y),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(y){return ft.oauthCredentialFromTaggedObject(y)}static credentialFromError(y){return ft.oauthCredentialFromTaggedObject(y.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:C,oauthAccessToken:N,oauthTokenSecret:K,pendingToken:ie,nonce:Be,providerId:Dt}=y;if(!N&&!K&&!C&&!ie||!Dt)return null;try{return new ft(Dt)._credential({idToken:C,accessToken:N,nonce:Be,pendingToken:ie})}catch(hn){return null}}}let kt=(()=>{class w extends Oe{constructor(){super("facebook.com")}static credential(C){return Rr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:C})}static credentialFromResult(C){return w.credentialFromTaggedObject(C)}static credentialFromError(C){return w.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C||!("oauthAccessToken"in C)||!C.oauthAccessToken)return null;try{return w.credential(C.oauthAccessToken)}catch(N){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),cn=(()=>{class w extends Oe{constructor(){super("google.com"),this.addScope("profile")}static credential(C,N){return Rr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:C,accessToken:N})}static credentialFromResult(C){return w.credentialFromTaggedObject(C)}static credentialFromError(C){return w.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C)return null;const{oauthIdToken:N,oauthAccessToken:K}=C;if(!N&&!K)return null;try{return w.credential(N,K)}catch(ie){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),ri=(()=>{class w extends Oe{constructor(){super("github.com")}static credential(C){return Rr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:C})}static credentialFromResult(C){return w.credentialFromTaggedObject(C)}static credentialFromError(C){return w.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C||!("oauthAccessToken"in C)||!C.oauthAccessToken)return null;try{return w.credential(C.oauthAccessToken)}catch(N){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class si extends Os{constructor(y,C){super(y,y),this.pendingToken=C}_getIdTokenResponse(y){return As(y,this.buildRequest())}_linkToIdToken(y,C){const N=this.buildRequest();return N.idToken=C,As(y,N)}_getReauthenticationResolver(y){const C=this.buildRequest();return C.autoCreate=!1,As(y,C)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(y){const C="string"==typeof y?JSON.parse(y):y,{providerId:N,signInMethod:K,pendingToken:ie}=C;return N&&K&&ie&&N===K?new si(N,ie):null}static _create(y,C){return new si(y,C)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Qi extends le{constructor(y){Nt(y.startsWith("saml."),"argument-error"),super(y)}static credentialFromResult(y){return Qi.samlCredentialFromTaggedObject(y)}static credentialFromError(y){return Qi.samlCredentialFromTaggedObject(y.customData||{})}static credentialFromJSON(y){const C=si.fromJSON(y);return Nt(C,"argument-error"),C}static samlCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{pendingToken:C,providerId:N}=y;if(!C||!N)return null;try{return si._create(N,C)}catch(K){return null}}}let Hi=(()=>{class w extends Oe{constructor(){super("twitter.com")}static credential(C,N){return Rr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:C,oauthTokenSecret:N})}static credentialFromResult(C){return w.credentialFromTaggedObject(C)}static credentialFromError(C){return w.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C)return null;const{oauthAccessToken:N,oauthTokenSecret:K}=C;if(!N||!K)return null;try{return w.credential(N,K)}catch(ie){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function vn(w,y){return es.apply(this,arguments)}function es(){return(es=(0,_.Z)(function*(w,y){return Qn(w,"POST","/v1/accounts:signUp",sn(w,y))})).apply(this,arguments)}class kr{constructor(y){this.user=y.user,this.providerId=y.providerId,this._tokenResponse=y._tokenResponse,this.operationType=y.operationType}static _fromIdTokenResponse(y,C,N,K=!1){return(0,_.Z)(function*(){const ie=yield Wi._fromIdTokenResponse(y,N,K),Be=qi(N);return new kr({user:ie,providerId:Be,_tokenResponse:N,operationType:C})})()}static _forOperation(y,C,N){return(0,_.Z)(function*(){yield y._updateTokensIfNecessary(N,!0);const K=qi(N);return new kr({user:y,providerId:K,_tokenResponse:N,operationType:C})})()}}function qi(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Go(w){return W.apply(this,arguments)}function W(){return(W=(0,_.Z)(function*(w){var y;const C=Di(w);if(yield C._initializationPromise,null===(y=C.currentUser)||void 0===y?void 0:y.isAnonymous)return new kr({user:C.currentUser,providerId:null,operationType:"signIn"});const N=yield vn(C,{returnSecureToken:!0}),K=yield kr._fromIdTokenResponse(C,"signIn",N,!0);return yield C._updateCurrentUser(K.user),K})).apply(this,arguments)}class j extends c.ZR{constructor(y,C,N,K){var ie;super(C.code,C.message),this.operationType=N,this.user=K,Object.setPrototypeOf(this,j.prototype),this.customData={appName:y.name,tenantId:null!==(ie=y.tenantId)&&void 0!==ie?ie:void 0,_serverResponse:C.customData._serverResponse,operationType:N}}static _fromErrorAndOperation(y,C,N,K){return new j(y,C,N,K)}}function F(w,y,C,N){return("reauthenticate"===y?C._getReauthenticationResolver(w):C._getIdTokenResponse(w)).catch(ie=>{throw"auth/multi-factor-auth-required"===ie.code?j._fromErrorAndOperation(w,ie,y,N):ie})}function Y(w){return new Set(w.map(({providerId:y})=>y).filter(y=>!!y))}function ct(w,y){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,_.Z)(function*(w,y){const C=(0,c.m9)(w);yield Pr(!0,C,y);const{providerUserInfo:N}=yield dn(C.auth,{idToken:yield C.getIdToken(),deleteProvider:[y]}),K=Y(N||[]);return C.providerData=C.providerData.filter(ie=>K.has(ie.providerId)),K.has("phone")||(C.phoneNumber=null),yield C.auth._persistUserIfCurrent(C),C})).apply(this,arguments)}function oi(w,y){return ts.apply(this,arguments)}function ts(){return(ts=(0,_.Z)(function*(w,y,C=!1){const N=yield et(w,y._linkToIdToken(w.auth,yield w.getIdToken()),C);return kr._forOperation(w,"link",N)})).apply(this,arguments)}function Pr(w,y,C){return hs.apply(this,arguments)}function hs(){return(hs=(0,_.Z)(function*(w,y,C){yield Mt(y);const K=!1===w?"provider-already-linked":"no-such-provider";Nt(Y(y.providerData).has(C)===w,y.auth,K)})).apply(this,arguments)}function Io(w,y){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,_.Z)(function*(w,y,C=!1){var N;const{auth:K}=w,ie="reauthenticate";try{const Be=yield et(w,F(K,ie,y,w),C);Nt(Be.idToken,K,"internal-error");const Dt=ce(Be.idToken);Nt(Dt,K,"internal-error");const{sub:hn}=Dt;return Nt(w.uid===hn,K,"user-mismatch"),kr._forOperation(w,ie,Be)}catch(Be){throw"auth/user-not-found"===(null===(N=Be)||void 0===N?void 0:N.code)&&Kn(K,"user-mismatch"),Be}})).apply(this,arguments)}function ha(w,y){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,_.Z)(function*(w,y,C=!1){const N="signIn",K=yield F(w,N,y),ie=yield kr._fromIdTokenResponse(w,N,K);return C||(yield w._updateCurrentUser(ie.user)),ie})).apply(this,arguments)}function fa(w,y){return pa.apply(this,arguments)}function pa(){return(pa=(0,_.Z)(function*(w,y){return ha(Di(w),y)})).apply(this,arguments)}function Ns(w,y){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,_.Z)(function*(w,y){const C=(0,c.m9)(w);return yield Pr(!1,C,y.providerId),oi(C,y)})).apply(this,arguments)}function lc(w,y){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,_.Z)(function*(w,y){return Io((0,c.m9)(w),y)})).apply(this,arguments)}function mo(w,y){return cl.apply(this,arguments)}function cl(){return(cl=(0,_.Z)(function*(w,y){return Qn(w,"POST","/v1/accounts:signInWithCustomToken",sn(w,y))})).apply(this,arguments)}function Qa(w,y){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,_.Z)(function*(w,y){const C=Di(w),N=yield mo(C,{token:y,returnSecureToken:!0}),K=yield kr._fromIdTokenResponse(C,"signIn",N);return yield C._updateCurrentUser(K.user),K})).apply(this,arguments)}class ea{constructor(y,C){this.factorId=y,this.uid=C.mfaEnrollmentId,this.enrollmentTime=new Date(C.enrolledAt).toUTCString(),this.displayName=C.displayName}static _fromServerResponse(y,C){return"phoneInfo"in C?Ma._fromServerResponse(y,C):Kn(y,"internal-error")}}class Ma extends ea{constructor(y){super("phone",y),this.phoneNumber=y.phoneInfo}static _fromServerResponse(y,C){return new Ma(C)}}function So(w,y,C){var N;Nt((null===(N=C.url)||void 0===N?void 0:N.length)>0,w,"invalid-continue-uri"),Nt(void 0===C.dynamicLinkDomain||C.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),y.continueUrl=C.url,y.dynamicLinkDomain=C.dynamicLinkDomain,y.canHandleCodeInApp=C.handleCodeInApp,C.iOS&&(Nt(C.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),y.iOSBundleId=C.iOS.bundleId),C.android&&(Nt(C.android.packageName.length>0,w,"missing-android-pkg-name"),y.androidInstallApp=C.android.installApp,y.androidMinimumVersionCode=C.android.minimumVersion,y.androidPackageName=C.android.packageName)}function ul(w,y,C){return ga.apply(this,arguments)}function ga(){return(ga=(0,_.Z)(function*(w,y,C){const N=(0,c.m9)(w),K={requestType:"PASSWORD_RESET",email:y};C&&So(N,K,C),yield Sa(N,K)})).apply(this,arguments)}function xa(w,y,C){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,_.Z)(function*(w,y,C){yield Xo((0,c.m9)(w),{oobCode:y,newPassword:C})})).apply(this,arguments)}function dl(w,y){return hl.apply(this,arguments)}function hl(){return(hl=(0,_.Z)(function*(w,y){yield vs((0,c.m9)(w),{oobCode:y})})).apply(this,arguments)}function ma(w,y){return _a.apply(this,arguments)}function _a(){return(_a=(0,_.Z)(function*(w,y){const C=(0,c.m9)(w),N=yield Xo(C,{oobCode:y}),K=N.requestType;switch(Nt(K,C,"internal-error"),K){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Nt(N.newEmail,C,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Nt(N.mfaInfo,C,"internal-error");default:Nt(N.email,C,"internal-error")}let ie=null;return N.mfaInfo&&(ie=ea._fromServerResponse(Di(C),N.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===N.requestType?N.newEmail:N.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===N.requestType?N.email:N.newEmail)||null,multiFactorInfo:ie},operation:K}})).apply(this,arguments)}function Zs(w,y){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,_.Z)(function*(w,y){const{data:C}=yield ma((0,c.m9)(w),y);return C.email})).apply(this,arguments)}function Vl(w,y,C){return ta.apply(this,arguments)}function ta(){return(ta=(0,_.Z)(function*(w,y,C){const N=Di(w),K=yield vn(N,{returnSecureToken:!0,email:y,password:C}),ie=yield kr._fromIdTokenResponse(N,"signIn",K);return yield N._updateCurrentUser(ie.user),ie})).apply(this,arguments)}function Ls(w,y,C){return fa((0,c.m9)(w),$.credential(y,C))}function Wo(w,y,C){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,_.Z)(function*(w,y,C){const N=(0,c.m9)(w),K={requestType:"EMAIL_SIGNIN",email:y};Nt(C.handleCodeInApp,N,"argument-error"),C&&So(N,K,C),yield Xr(N,K)})).apply(this,arguments)}function cc(w,y){const C=B.parseLink(y);return"EMAIL_SIGNIN"===(null==C?void 0:C.operation)}function Hc(w,y,C){return uc.apply(this,arguments)}function uc(){return(uc=(0,_.Z)(function*(w,y,C){const N=(0,c.m9)(w),K=$.credentialWithLink(y,C||Vi());return Nt(K._tenantId===(N.tenantId||null),N,"tenant-id-mismatch"),fa(N,K)})).apply(this,arguments)}function gd(w,y){return ns.apply(this,arguments)}function ns(){return(ns=(0,_.Z)(function*(w,y){return fi(w,"POST","/v1/accounts:createAuthUri",sn(w,y))})).apply(this,arguments)}function md(w,y){return na.apply(this,arguments)}function na(){return(na=(0,_.Z)(function*(w,y){const N={identifier:y,continueUri:Zi()?Vi():"http://localhost"},{signinMethods:K}=yield gd((0,c.m9)(w),N);return K||[]})).apply(this,arguments)}function br(w,y){return eo.apply(this,arguments)}function eo(){return(eo=(0,_.Z)(function*(w,y){const C=(0,c.m9)(w),K={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};y&&So(C.auth,K,y);const{email:ie}=yield da(C.auth,K);ie!==w.email&&(yield w.reload())})).apply(this,arguments)}function Ws(w,y,C){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,_.Z)(function*(w,y,C){const N=(0,c.m9)(w),ie={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:y};C&&So(N.auth,ie,C);const{email:Be}=yield Ps(N.auth,ie);Be!==w.email&&(yield w.reload())})).apply(this,arguments)}function xu(w,y){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,_.Z)(function*(w,y){return fi(w,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Mi(w,y){return No.apply(this,arguments)}function No(){return(No=(0,_.Z)(function*(w,{displayName:y,photoURL:C}){if(void 0===y&&void 0===C)return;const N=(0,c.m9)(w),ie={idToken:yield N.getIdToken(),displayName:y,photoUrl:C,returnSecureToken:!0},Be=yield et(N,xu(N.auth,ie));N.displayName=Be.displayName||null,N.photoURL=Be.photoUrl||null;const Dt=N.providerData.find(({providerId:hn})=>"password"===hn);Dt&&(Dt.displayName=N.displayName,Dt.photoURL=N.photoURL),yield N._updateTokensIfNecessary(Be)})).apply(this,arguments)}function Ul(w,y){return di((0,c.m9)(w),y,null)}function An(w,y){return di((0,c.m9)(w),null,y)}function di(w,y,C){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,_.Z)(function*(w,y,C){const{auth:N}=w,ie={idToken:yield w.getIdToken(),returnSecureToken:!0};y&&(ie.email=y),C&&(ie.password=C);const Be=yield et(w,Rs(N,ie));yield w._updateTokensIfNecessary(Be,!0)})).apply(this,arguments)}class Ct{constructor(y,C,N={}){this.isNewUser=y,this.providerId=C,this.profile=N}}class en extends Ct{constructor(y,C,N,K){super(y,C,N),this.username=K}}class is extends Ct{constructor(y,C){super(y,"facebook.com",C)}}class dc extends en{constructor(y,C){super(y,"github.com",C,"string"==typeof(null==C?void 0:C.login)?null==C?void 0:C.login:null)}}class Gc extends Ct{constructor(y,C){super(y,"google.com",C)}}class qs extends en{constructor(y,C,N){super(y,"twitter.com",C,N)}}function Zc(w){const{user:y,_tokenResponse:C}=w;return y.isAnonymous&&!C?{providerId:null,isNewUser:!1,profile:null}:function En(w){var y,C;if(!w)return null;const{providerId:N}=w,K=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},ie=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!N&&(null==w?void 0:w.idToken)){const Be=null===(C=null===(y=ce(w.idToken))||void 0===y?void 0:y.firebase)||void 0===C?void 0:C.sign_in_provider;if(Be)return new Ct(ie,"anonymous"!==Be&&"custom"!==Be?Be:null)}if(!N)return null;switch(N){case"facebook.com":return new is(ie,K);case"github.com":return new dc(ie,K);case"google.com":return new Gc(ie,K);case"twitter.com":return new qs(ie,K,w.screenName||null);case"custom":case"anonymous":return new Ct(ie,null);default:return new Ct(ie,N,K)}}(C)}class k{constructor(y,C,N){this.type=y,this.credential=C,this.auth=N}static _fromIdtoken(y,C){return new k("enroll",y,C)}static _fromMfaPendingCredential(y){return new k("signin",y)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(y){var C,N;if(null==y?void 0:y.multiFactorSession){if(null===(C=y.multiFactorSession)||void 0===C?void 0:C.pendingCredential)return k._fromMfaPendingCredential(y.multiFactorSession.pendingCredential);if(null===(N=y.multiFactorSession)||void 0===N?void 0:N.idToken)return k._fromIdtoken(y.multiFactorSession.idToken)}return null}}class M{constructor(y,C,N){this.session=y,this.hints=C,this.signInResolver=N}static _fromError(y,C){const N=Di(y),K=C.customData._serverResponse,ie=(K.mfaInfo||[]).map(Dt=>ea._fromServerResponse(N,Dt));Nt(K.mfaPendingCredential,N,"internal-error");const Be=k._fromMfaPendingCredential(K.mfaPendingCredential);return new M(Be,ie,function(){var Dt=(0,_.Z)(function*(hn){const an=yield hn._process(N,Be);delete K.mfaInfo,delete K.mfaPendingCredential;const Gn=Object.assign(Object.assign({},K),{idToken:an.idToken,refreshToken:an.refreshToken});switch(C.operationType){case"signIn":const pr=yield kr._fromIdTokenResponse(N,C.operationType,Gn);return yield N._updateCurrentUser(pr.user),pr;case"reauthenticate":return Nt(C.user,N,"internal-error"),kr._forOperation(C.user,C.operationType,Gn);default:Kn(N,"internal-error")}});return function(hn){return Dt.apply(this,arguments)}}())}resolveSignIn(y){var C=this;return(0,_.Z)(function*(){return C.signInResolver(y)})()}}function I(w,y){var C;const N=(0,c.m9)(w),K=y;return Nt(y.customData.operationType,N,"argument-error"),Nt(null===(C=K.customData._serverResponse)||void 0===C?void 0:C.mfaPendingCredential,N,"argument-error"),M._fromError(N,K)}function U(w,y){return fi(w,"POST","/v2/accounts/mfaEnrollment:start",sn(w,y))}class ye{constructor(y){this.user=y,this.enrolledFactors=[],y._onReload(C=>{C.mfaInfo&&(this.enrolledFactors=C.mfaInfo.map(N=>ea._fromServerResponse(y.auth,N)))})}static _fromUser(y){return new ye(y)}getSession(){var y=this;return(0,_.Z)(function*(){return k._fromIdtoken(yield y.user.getIdToken(),y.user.auth)})()}enroll(y,C){var N=this;return(0,_.Z)(function*(){const K=y,ie=yield N.getSession(),Be=yield et(N.user,K._process(N.user.auth,ie,C));return yield N.user._updateTokensIfNecessary(Be),N.user.reload()})()}unenroll(y){var C=this;return(0,_.Z)(function*(){var N;const K="string"==typeof y?y:y.uid,ie=yield C.user.getIdToken(),Be=yield et(C.user,function he(w,y){return fi(w,"POST","/v2/accounts/mfaEnrollment:withdraw",sn(w,y))}(C.user.auth,{idToken:ie,mfaEnrollmentId:K}));C.enrolledFactors=C.enrolledFactors.filter(({uid:Dt})=>Dt!==K),yield C.user._updateTokensIfNecessary(Be);try{yield C.user.reload()}catch(Dt){if("auth/user-token-expired"!==(null===(N=Dt)||void 0===N?void 0:N.code))throw Dt}})()}}const _e=new WeakMap;function xt(w){const y=(0,c.m9)(w);return _e.has(y)||_e.set(y,ye._fromUser(y)),_e.get(y)}const Sn="__sak";class Ii{constructor(y,C){this.storageRetriever=y,this.type=C}_isAvailable(){try{return this.storage?(this.storage.setItem(Sn,"1"),this.storage.removeItem(Sn),Promise.resolve(!0)):Promise.resolve(!1)}catch(y){return Promise.resolve(!1)}}_set(y,C){return this.storage.setItem(y,JSON.stringify(C)),Promise.resolve()}_get(y){const C=this.storage.getItem(y);return Promise.resolve(C?JSON.parse(C):null)}_remove(y){return this.storage.removeItem(y),Promise.resolve()}get storage(){return this.storageRetriever()}}const Fr=(()=>{class w extends Ii{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(C,N)=>this.onStorageEvent(C,N),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ti(){const w=(0,c.z$)();return Wr(w)||Ke(w)}()&&function mn(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=zt(),this._shouldAllowMigration=!0}forAllChangedKeys(C){for(const N of Object.keys(this.listeners)){const K=this.storage.getItem(N),ie=this.localCache[N];K!==ie&&C(N,ie,K)}}onStorageEvent(C,N=!1){if(!C.key)return void this.forAllChangedKeys((Dt,hn,an)=>{this.notifyListeners(Dt,an)});const K=C.key;if(N?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Dt=this.storage.getItem(K);if(C.newValue!==Dt)null!==C.newValue?this.storage.setItem(K,C.newValue):this.storage.removeItem(K);else if(this.localCache[K]===C.newValue&&!N)return}const ie=()=>{const Dt=this.storage.getItem(K);!N&&this.localCache[K]===Dt||this.notifyListeners(K,Dt)},Be=this.storage.getItem(K);!function St(){return(0,c.w1)()&&10===document.documentMode}()||Be===C.newValue||C.newValue===C.oldValue?ie():setTimeout(ie,10)}notifyListeners(C,N){this.localCache[C]=N;const K=this.listeners[C];if(K)for(const ie of Array.from(K))ie(N&&JSON.parse(N))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((C,N,K)=>{this.onStorageEvent(new StorageEvent("storage",{key:C,oldValue:N,newValue:K}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(C,N){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[C]||(this.listeners[C]=new Set,this.localCache[C]=this.storage.getItem(C)),this.listeners[C].add(N)}_removeListener(C,N){this.listeners[C]&&(this.listeners[C].delete(N),0===this.listeners[C].size&&delete this.listeners[C]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(C,N){var K=()=>super._set,ie=this;return(0,_.Z)(function*(){yield K().call(ie,C,N),ie.localCache[C]=JSON.stringify(N)})()}_get(C){var N=()=>super._get,K=this;return(0,_.Z)(function*(){const ie=yield N().call(K,C);return K.localCache[C]=JSON.stringify(ie),ie})()}_remove(C){var N=()=>super._remove,K=this;return(0,_.Z)(function*(){yield N().call(K,C),delete K.localCache[C]})()}}return w.type="LOCAL",w})(),fr=(()=>{class w extends Ii{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(C,N){}_removeListener(C,N){}}return w.type="SESSION",w})();let Bs=(()=>{class w{constructor(C){this.eventTarget=C,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(C){const N=this.receivers.find(ie=>ie.isListeningto(C));if(N)return N;const K=new w(C);return this.receivers.push(K),K}isListeningto(C){return this.eventTarget===C}handleEvent(C){var N=this;return(0,_.Z)(function*(){const K=C,{eventId:ie,eventType:Be,data:Dt}=K.data,hn=N.handlersMap[Be];if(!(null==hn?void 0:hn.size))return;K.ports[0].postMessage({status:"ack",eventId:ie,eventType:Be});const an=Array.from(hn).map(function(){var pr=(0,_.Z)(function*(Gr){return Gr(K.origin,Dt)});return function(Gr){return pr.apply(this,arguments)}}()),Gn=yield function ya(w){return Promise.all(w.map(function(){var y=(0,_.Z)(function*(C){try{return{fulfilled:!0,value:yield C}}catch(N){return{fulfilled:!1,reason:N}}});return function(C){return y.apply(this,arguments)}}()))}(an);K.ports[0].postMessage({status:"done",eventId:ie,eventType:Be,response:Gn})})()}_subscribe(C,N){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[C]||(this.handlersMap[C]=new Set),this.handlersMap[C].add(N)}_unsubscribe(C,N){this.handlersMap[C]&&N&&this.handlersMap[C].delete(N),(!N||0===this.handlersMap[C].size)&&delete this.handlersMap[C],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function xo(w="",y=10){let C="";for(let N=0;N<y;N++)C+=Math.floor(10*Math.random());return w+C}class Oo{constructor(y){this.target=y,this.handlers=new Set}removeMessageHandler(y){y.messageChannel&&(y.messageChannel.port1.removeEventListener("message",y.onMessage),y.messageChannel.port1.close()),this.handlers.delete(y)}_send(y,C,N=50){var K=this;return(0,_.Z)(function*(){const ie="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!ie)throw new Error("connection_unavailable");let Be,Dt;return new Promise((hn,an)=>{const Gn=xo("",20);ie.port1.start();const pr=setTimeout(()=>{an(new Error("unsupported_event"))},N);Dt={messageChannel:ie,onMessage(Gr){const so=Gr;if(so.data.eventId===Gn)switch(so.data.status){case"ack":clearTimeout(pr),Be=setTimeout(()=>{an(new Error("timeout"))},3e3);break;case"done":clearTimeout(Be),hn(so.data.response);break;default:clearTimeout(pr),clearTimeout(Be),an(new Error("invalid_response"))}}},K.handlers.add(Dt),ie.port1.addEventListener("message",Dt.onMessage),K.target.postMessage({eventType:y,eventId:Gn,data:C},[ie.port2])}).finally(()=>{Dt&&K.removeMessageHandler(Dt)})})()}}function rs(){return window}function qo(){return void 0!==rs().WorkerGlobalScope&&"function"==typeof rs().importScripts}function pl(){return(pl=(0,_.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const Fa="firebaseLocalStorageDb",Ui="firebaseLocalStorage",qc="fbase_key";class zc{constructor(y){this.request=y}toPromise(){return new Promise((y,C)=>{this.request.addEventListener("success",()=>{y(this.request.result)}),this.request.addEventListener("error",()=>{C(this.request.error)})})}}function Ru(w,y){return w.transaction([Ui],y?"readwrite":"readonly").objectStore(Ui)}function ku(){const w=indexedDB.open(Fa,1);return new Promise((y,C)=>{w.addEventListener("error",()=>{C(w.error)}),w.addEventListener("upgradeneeded",()=>{const N=w.result;try{N.createObjectStore(Ui,{keyPath:qc})}catch(K){C(K)}}),w.addEventListener("success",(0,_.Z)(function*(){const N=w.result;N.objectStoreNames.contains(Ui)?y(N):(N.close(),yield function no(){const w=indexedDB.deleteDatabase(Fa);return new zc(w).toPromise()}(),y(yield ku()))}))})}function La(w,y,C){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,_.Z)(function*(w,y,C){const N=Ru(w,!0).put({[qc]:y,value:C});return new zc(N).toPromise()})).apply(this,arguments)}function hc(){return(hc=(0,_.Z)(function*(w,y){const C=Ru(w,!1).get(y),N=yield new zc(C).toPromise();return void 0===N?null:N.value})).apply(this,arguments)}function zi(w,y){const C=Ru(w,!0).delete(y);return new zc(C).toPromise()}const vo=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var C=this;return(0,_.Z)(function*(){return C.db||(C.db=yield ku()),C.db})()}_withRetries(C){var N=this;return(0,_.Z)(function*(){let K=0;for(;;)try{const ie=yield N._openDb();return yield C(ie)}catch(ie){if(K++>3)throw ie;N.db&&(N.db.close(),N.db=void 0)}})()}initializeServiceWorkerMessaging(){var C=this;return(0,_.Z)(function*(){return qo()?C.initializeReceiver():C.initializeSender()})()}initializeReceiver(){var C=this;return(0,_.Z)(function*(){C.receiver=Bs._getInstance(function yo(){return qo()?self:null}()),C.receiver._subscribe("keyChanged",function(){var N=(0,_.Z)(function*(K,ie){return{keyProcessed:(yield C._poll()).includes(ie.key)}});return function(K,ie){return N.apply(this,arguments)}}()),C.receiver._subscribe("ping",function(){var N=(0,_.Z)(function*(K,ie){return["keyChanged"]});return function(K,ie){return N.apply(this,arguments)}}())})()}initializeSender(){var C=this;return(0,_.Z)(function*(){var N,K;if(C.activeServiceWorker=yield function to(){return pl.apply(this,arguments)}(),!C.activeServiceWorker)return;C.sender=new Oo(C.activeServiceWorker);const ie=yield C.sender._send("ping",{},800);!ie||(null===(N=ie[0])||void 0===N?void 0:N.fulfilled)&&(null===(K=ie[0])||void 0===K?void 0:K.value.includes("keyChanged"))&&(C.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(C){var N=this;return(0,_.Z)(function*(){if(N.sender&&N.activeServiceWorker&&function Pa(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===N.activeServiceWorker)try{yield N.sender._send("keyChanged",{key:C},N.serviceWorkerReceiverAvailable?800:50)}catch(K){}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const C=yield ku();return yield La(C,Sn,"1"),yield zi(C,Sn),!0}catch(C){}return!1})()}_withPendingWrite(C){var N=this;return(0,_.Z)(function*(){N.pendingWrites++;try{yield C()}finally{N.pendingWrites--}})()}_set(C,N){var K=this;return(0,_.Z)(function*(){return K._withPendingWrite((0,_.Z)(function*(){return yield K._withRetries(ie=>La(ie,C,N)),K.localCache[C]=N,K.notifyServiceWorker(C)}))})()}_get(C){var N=this;return(0,_.Z)(function*(){const K=yield N._withRetries(ie=>function $r(w,y){return hc.apply(this,arguments)}(ie,C));return N.localCache[C]=K,K})()}_remove(C){var N=this;return(0,_.Z)(function*(){return N._withPendingWrite((0,_.Z)(function*(){return yield N._withRetries(K=>zi(K,C)),delete N.localCache[C],N.notifyServiceWorker(C)}))})()}_poll(){var C=this;return(0,_.Z)(function*(){const N=yield C._withRetries(Be=>{const Dt=Ru(Be,!1).getAll();return new zc(Dt).toPromise()});if(!N)return[];if(0!==C.pendingWrites)return[];const K=[],ie=new Set;for(const{fbase_key:Be,value:Dt}of N)ie.add(Be),JSON.stringify(C.localCache[Be])!==JSON.stringify(Dt)&&(C.notifyListeners(Be,Dt),K.push(Be));for(const Be of Object.keys(C.localCache))C.localCache[Be]&&!ie.has(Be)&&(C.notifyListeners(Be,null),K.push(Be));return K})()}notifyListeners(C,N){this.localCache[C]=N;const K=this.listeners[C];if(K)for(const ie of Array.from(K))ie(N)}startPolling(){var C=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return C._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(C,N){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[C]||(this.listeners[C]=new Set,this._get(C)),this.listeners[C].add(N)}_removeListener(C,N){this.listeners[C]&&(this.listeners[C].delete(N),0===this.listeners[C].size&&delete this.listeners[C]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function bo(w,y){return fi(w,"POST","/v2/accounts/mfaSignIn:start",sn(w,y))}function zo(){return(zo=(0,_.Z)(function*(w){return(yield fi(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ra(w){return new Promise((y,C)=>{const N=document.createElement("script");N.setAttribute("src",w),N.onload=y,N.onerror=K=>{const ie=ii("internal-error");ie.customData=K,C(ie)},N.type="text/javascript",N.charset="UTF-8",function Br(){var w,y;return null!==(y=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==y?y:document}().appendChild(N)})}function Qc(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Pu=1e12;class Xa{constructor(y){this.auth=y,this.counter=Pu,this._widgets=new Map}render(y,C){const N=this.counter;return this._widgets.set(N,new Es(y,this.auth.name,C||{})),this.counter++,N}reset(y){var C;const N=y||Pu;null===(C=this._widgets.get(N))||void 0===C||C.delete(),this._widgets.delete(N)}getResponse(y){var C;return(null===(C=this._widgets.get(y||Pu))||void 0===C?void 0:C.getResponse())||""}execute(y){var C=this;return(0,_.Z)(function*(){var N;return null===(N=C._widgets.get(y||Pu))||void 0===N||N.execute(),""})()}}class Es{constructor(y,C,N){this.params=N,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const K="string"==typeof y?document.getElementById(y):y;Nt(K,"argument-error",{appName:C}),this.container=K,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function uo(w){const y=[],C="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let N=0;N<w;N++)y.push(C.charAt(Math.floor(Math.random()*C.length)));return y.join("")}(50);const{callback:y,"expired-callback":C}=this.params;if(y)try{y(this.responseToken)}catch(N){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,C)try{C()}catch(N){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const va=Qc("rcb"),ko=new Pn(3e4,6e4);class Ba{constructor(){var y;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(y=rs().grecaptcha)||void 0===y?void 0:y.render)}load(y,C=""){return Nt(function Ko(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(C),y,"argument-error"),this.shouldResolveImmediately(C)?Promise.resolve(rs().grecaptcha):new Promise((N,K)=>{const ie=rs().setTimeout(()=>{K(ii(y,"network-request-failed"))},ko.get());rs()[va]=()=>{rs().clearTimeout(ie),delete rs()[va];const Dt=rs().grecaptcha;if(!Dt)return void K(ii(y,"internal-error"));const hn=Dt.render;Dt.render=(an,Gn)=>{const pr=hn(an,Gn);return this.counter++,pr},this.hostLanguage=C,N(Dt)},ra(`https://www.google.com/recaptcha/api.js??${(0,c.xO)({onload:va,render:"explicit",hl:C})}`).catch(()=>{clearTimeout(ie),K(ii(y,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(y){var C;return!!(null===(C=rs().grecaptcha)||void 0===C?void 0:C.render)&&(y===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ml{load(y){return(0,_.Z)(function*(){return new Xa(y)})()}clearedOneInstance(){}}const sa="recaptcha",pc={theme:"light",type:"image"};class $l{constructor(y,C=Object.assign({},pc),N){this.parameters=C,this.type=sa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Di(N),this.isInvisible="invisible"===this.parameters.size,Nt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const K="string"==typeof y?document.getElementById(y):y;Nt(K,this.auth,"argument-error"),this.container=K,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ml:new Ba,this.validateStartingState()}verify(){var y=this;return(0,_.Z)(function*(){y.assertNotDestroyed();const C=yield y.render(),N=y.getAssertedRecaptcha();return N.getResponse(C)||new Promise(ie=>{const Be=Dt=>{!Dt||(y.tokenChangeListeners.delete(Be),ie(Dt))};y.tokenChangeListeners.add(Be),y.isInvisible&&N.execute(C)})})()}render(){try{this.assertNotDestroyed()}catch(y){return Promise.reject(y)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(y=>{throw this.renderPromise=null,y})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(y=>{this.container.removeChild(y)})}validateStartingState(){Nt(!this.parameters.sitekey,this.auth,"argument-error"),Nt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Nt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(y){return C=>{if(this.tokenChangeListeners.forEach(N=>N(C)),"function"==typeof y)y(C);else if("string"==typeof y){const N=rs()[y];"function"==typeof N&&N(C)}}}assertNotDestroyed(){Nt(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var y=this;return(0,_.Z)(function*(){if(yield y.init(),!y.widgetId){let C=y.container;if(!y.isInvisible){const N=document.createElement("div");C.appendChild(N),C=N}y.widgetId=y.getAssertedRecaptcha().render(C,y.parameters)}return y.widgetId})()}init(){var y=this;return(0,_.Z)(function*(){Nt(Zi()&&!qo(),y.auth,"internal-error"),yield function Ea(){let w=null;return new Promise(y=>{"complete"!==document.readyState?(w=()=>y(),window.addEventListener("load",w)):y()}).catch(y=>{throw w&&window.removeEventListener("load",w),y})}(),y.recaptcha=yield y._recaptchaLoader.load(y.auth,y.auth.languageCode||void 0);const C=yield function ph(w){return zo.apply(this,arguments)}(y.auth);Nt(C,y.auth,"internal-error"),y.parameters.sitekey=C})()}getAssertedRecaptcha(){return Nt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ca{constructor(y,C){this.verificationId=y,this.onConfirmation=C}confirm(y){const C=_n._fromVerification(this.verificationId,y);return this.onConfirmation(C)}}function Fu(w,y,C){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,_.Z)(function*(w,y,C){const N=Di(w),K=yield wa(N,y,(0,c.m9)(C));return new Ca(K,ie=>fa(N,ie))})).apply(this,arguments)}function el(w,y,C){return Va.apply(this,arguments)}function Va(){return(Va=(0,_.Z)(function*(w,y,C){const N=(0,c.m9)(w);yield Pr(!1,N,"phone");const K=yield wa(N.auth,y,(0,c.m9)(C));return new Ca(K,ie=>Ns(N,ie))})).apply(this,arguments)}function Po(w,y,C){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,_.Z)(function*(w,y,C){const N=(0,c.m9)(w),K=yield wa(N.auth,y,(0,c.m9)(C));return new Ca(K,ie=>lc(N,ie))})).apply(this,arguments)}function wa(w,y,C){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,_.Z)(function*(w,y,C){var N;const K=yield C.verify();try{let ie;if(Nt("string"==typeof K,w,"argument-error"),Nt(C.type===sa,w,"argument-error"),ie="string"==typeof y?{phoneNumber:y}:y,"session"in ie){const Be=ie.session;if("phoneNumber"in ie)return Nt("enroll"===Be.type,w,"internal-error"),(yield U(w,{idToken:Be.credential,phoneEnrollmentInfo:{phoneNumber:ie.phoneNumber,recaptchaToken:K}})).phoneSessionInfo.sessionInfo;{Nt("signin"===Be.type,w,"internal-error");const Dt=(null===(N=ie.multiFactorHint)||void 0===N?void 0:N.uid)||ie.multiFactorUid;return Nt(Dt,w,"missing-multi-factor-info"),(yield bo(w,{mfaPendingCredential:Be.credential,mfaEnrollmentId:Dt,phoneSignInInfo:{recaptchaToken:K}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Be}=yield Na(w,{phoneNumber:ie.phoneNumber,recaptchaToken:K});return Be}}finally{C._reset()}})).apply(this,arguments)}function Gl(w,y){return _l.apply(this,arguments)}function _l(){return(_l=(0,_.Z)(function*(w,y){yield oi((0,c.m9)(w),y)})).apply(this,arguments)}let mh=(()=>{class w{constructor(C){this.providerId=w.PROVIDER_ID,this.auth=Di(C)}verifyPhoneNumber(C,N){return wa(this.auth,C,(0,c.m9)(N))}static credential(C,N){return _n._fromVerification(C,N)}static credentialFromResult(C){return w.credentialFromTaggedObject(C)}static credentialFromError(C){return w.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C)return null;const{phoneNumber:N,temporaryProof:K}=C;return N&&K?_n._fromTokenResponse(N,K):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function ss(w,y){return y?Ht(y):(Nt(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Cs extends Os{constructor(y){super("custom","custom"),this.params=y}_getIdTokenResponse(y){return As(y,this._buildIdpRequest())}_linkToIdToken(y,C){return As(y,this._buildIdpRequest(C))}_getReauthenticationResolver(y){return As(y,this._buildIdpRequest())}_buildIdpRequest(y){const C={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return y&&(C.idToken=y),C}}function Hr(w){return ha(w.auth,new Cs(w),w.bypassAuthState)}function Tf(w){const{auth:y,user:C}=w;return Nt(C,y,"internal-error"),Io(C,new Cs(w),w.bypassAuthState)}function L(w){return H.apply(this,arguments)}function H(){return(H=(0,_.Z)(function*(w){const{auth:y,user:C}=w;return Nt(C,y,"internal-error"),oi(C,new Cs(w),w.bypassAuthState)})).apply(this,arguments)}class ae{constructor(y,C,N,K,ie=!1){this.auth=y,this.resolver=N,this.user=K,this.bypassAuthState=ie,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(C)?C:[C]}execute(){var y=this;return new Promise(function(){var C=(0,_.Z)(function*(N,K){y.pendingPromise={resolve:N,reject:K};try{y.eventManager=yield y.resolver._initialize(y.auth),yield y.onExecution(),y.eventManager.registerConsumer(y)}catch(ie){y.reject(ie)}});return function(N,K){return C.apply(this,arguments)}}())}onAuthEvent(y){var C=this;return(0,_.Z)(function*(){const{urlResponse:N,sessionId:K,postBody:ie,tenantId:Be,error:Dt,type:hn}=y;if(Dt)return void C.reject(Dt);const an={auth:C.auth,requestUri:N,sessionId:K,tenantId:Be||void 0,postBody:ie||void 0,user:C.user,bypassAuthState:C.bypassAuthState};try{C.resolve(yield C.getIdpTask(hn)(an))}catch(Gn){C.reject(Gn)}})()}onError(y){this.reject(y)}getIdpTask(y){switch(y){case"signInViaPopup":case"signInViaRedirect":return Hr;case"linkViaPopup":case"linkViaRedirect":return L;case"reauthViaPopup":case"reauthViaRedirect":return Tf;default:Kn(this.auth,"internal-error")}}resolve(y){Jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(y),this.unregisterAndCleanUp()}reject(y){Jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(y),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const De=new Pn(2e3,1e4);function tt(w,y,C){return yt.apply(this,arguments)}function yt(){return(yt=(0,_.Z)(function*(w,y,C){const N=Di(w);Ei(w,y,le);const K=ss(N,C);return new ki(N,"signInViaPopup",y,K).executeNotNull()})).apply(this,arguments)}function Gt(w,y,C){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,_.Z)(function*(w,y,C){const N=(0,c.m9)(w);Ei(N.auth,y,le);const K=ss(N.auth,C);return new ki(N.auth,"reauthViaPopup",y,K,N).executeNotNull()})).apply(this,arguments)}function On(w,y,C){return xi.apply(this,arguments)}function xi(){return(xi=(0,_.Z)(function*(w,y,C){const N=(0,c.m9)(w);Ei(N.auth,y,le);const K=ss(N.auth,C);return new ki(N.auth,"linkViaPopup",y,K,N).executeNotNull()})).apply(this,arguments)}let ki=(()=>{class w extends ae{constructor(C,N,K,ie,Be){super(C,N,ie,Be),this.provider=K,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var C=this;return(0,_.Z)(function*(){const N=yield C.execute();return Nt(N,C.auth,"internal-error"),N})()}onExecution(){var C=this;return(0,_.Z)(function*(){Jt(1===C.filter.length,"Popup operations only handle one event");const N=xo();C.authWindow=yield C.resolver._openPopup(C.auth,C.provider,C.filter[0],N),C.authWindow.associatedEvent=N,C.resolver._originValidation(C.auth).catch(K=>{C.reject(K)}),C.resolver._isIframeWebStorageSupported(C.auth,K=>{K||C.reject(ii(C.auth,"web-storage-unsupported"))}),C.pollUserCancellation()})()}get eventId(){var C;return(null===(C=this.authWindow)||void 0===C?void 0:C.associatedEvent)||null}cancel(){this.reject(ii(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const C=()=>{var N,K;this.pollId=(null===(K=null===(N=this.authWindow)||void 0===N?void 0:N.window)||void 0===K?void 0:K.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ii(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(C,De.get())};C()}}return w.currentPopupAction=null,w})();const os=new Map;class Fo extends ae{constructor(y,C,N=!1){super(y,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],C,void 0,N),this.eventId=null}execute(){var y=()=>super.execute,C=this;return(0,_.Z)(function*(){let N=os.get(C.auth._key());if(!N){try{const ie=(yield function Lu(w,y){return Zl.apply(this,arguments)}(C.resolver,C.auth))?yield y().call(C):null;N=()=>Promise.resolve(ie)}catch(K){N=()=>Promise.reject(K)}os.set(C.auth._key(),N)}return C.bypassAuthState||os.set(C.auth._key(),()=>Promise.resolve(null)),N()})()}onAuthEvent(y){var C=()=>super.onAuthEvent,N=this;return(0,_.Z)(function*(){if("signInViaRedirect"===y.type)return C().call(N,y);if("unknown"!==y.type){if(y.eventId){const K=yield N.auth._redirectUserForId(y.eventId);if(K)return N.user=K,C().call(N,y);N.resolve(null)}}else N.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function Zl(){return(Zl=(0,_.Z)(function*(w,y){const C=vl(y),N=Mr(w);if(!(yield N._isAvailable()))return!1;const K="true"===(yield N._get(C));return yield N._remove(C),K})).apply(this,arguments)}function Lo(w,y){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,_.Z)(function*(w,y){return Mr(w)._set(vl(y),"true")})).apply(this,arguments)}function yl(){os.clear()}function Xc(w,y){os.set(w._key(),y)}function Mr(w){return Ht(w._redirectPersistence)}function vl(w){return xn("pendingRedirect",w.config.apiKey,w.name)}function tl(w,y,C){return function Jp(w,y,C){return gc.apply(this,arguments)}(w,y,C)}function gc(){return(gc=(0,_.Z)(function*(w,y,C){const N=Di(w);Ei(w,y,le);const K=ss(N,C);return yield Lo(K,N),K._openRedirect(N,y,"signInViaRedirect")})).apply(this,arguments)}function Bu(w,y,C){return function mc(w,y,C){return _c.apply(this,arguments)}(w,y,C)}function _c(){return(_c=(0,_.Z)(function*(w,y,C){const N=(0,c.m9)(w);Ei(N.auth,y,le);const K=ss(N.auth,C);yield Lo(K,N.auth);const ie=yield Vu(N);return K._openRedirect(N.auth,y,"reauthViaRedirect",ie)})).apply(this,arguments)}function Wl(w,y,C){return function eu(w,y,C){return io.apply(this,arguments)}(w,y,C)}function io(){return(io=(0,_.Z)(function*(w,y,C){const N=(0,c.m9)(w);Ei(N.auth,y,le);const K=ss(N.auth,C);yield Pr(!1,N,y.providerId),yield Lo(K,N.auth);const ie=yield Vu(N);return K._openRedirect(N.auth,y,"linkViaRedirect",ie)})).apply(this,arguments)}function vd(w,y){return nl.apply(this,arguments)}function nl(){return(nl=(0,_.Z)(function*(w,y){return yield Di(w)._initializationPromise,tu(w,y,!1)})).apply(this,arguments)}function tu(w,y){return nu.apply(this,arguments)}function nu(){return(nu=(0,_.Z)(function*(w,y,C=!1){const N=Di(w),K=ss(N,y),Be=yield new Fo(N,K,C).execute();return Be&&!C&&(delete Be.user._redirectEventId,yield N._persistUserIfCurrent(Be.user),yield N._setRedirectUser(null,y)),Be})).apply(this,arguments)}function Vu(w){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,_.Z)(function*(w){const y=xo(`${w.uid}:::`);return w._redirectEventId=y,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),y})).apply(this,arguments)}class wf{constructor(y){this.auth=y,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(y){this.consumers.add(y),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,y)&&(this.sendToConsumer(this.queuedRedirectEvent,y),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(y){this.consumers.delete(y)}onEvent(y){if(this.hasEventBeenHandled(y))return!1;let C=!1;return this.consumers.forEach(N=>{this.isEventForConsumer(y,N)&&(C=!0,this.sendToConsumer(y,N),this.saveEventToCache(y))}),this.hasHandledPotentialRedirect||!function Df(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yh(w);default:return!1}}(y)||(this.hasHandledPotentialRedirect=!0,C||(this.queuedRedirectEvent=y,C=!0)),C}sendToConsumer(y,C){var N;if(y.error&&!yh(y)){const K=(null===(N=y.error.code)||void 0===N?void 0:N.split("auth/")[1])||"internal-error";C.onError(ii(this.auth,K))}else C.onAuthEvent(y)}isEventForConsumer(y,C){const N=null===C.eventId||!!y.eventId&&y.eventId===C.eventId;return C.filter.includes(y.type)&&N}hasEventBeenHandled(y){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_h(y))}saveEventToCache(y){this.cachedEventUids.add(_h(y)),this.lastProcessedEventTime=Date.now()}}function _h(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(y=>y).join("-")}function yh({type:w,error:y}){return"unknown"===w&&"auth/no-auth-event"===(null==y?void 0:y.code)}function ju(w){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,_.Z)(function*(w,y={}){return fi(w,"GET","/v1/projects",y)})).apply(this,arguments)}const iu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bd=/^https?/;function bl(){return(bl=(0,_.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:y}=yield ju(w);for(const C of y)try{if(Xp(C))return}catch(N){}Kn(w,"unauthorized-domain")})).apply(this,arguments)}function Xp(w){const y=Vi(),{protocol:C,hostname:N}=new URL(y);if(w.startsWith("chrome-extension://")){const Be=new URL(w);return""===Be.hostname&&""===N?"chrome-extension:"===C&&w.replace("chrome-extension://","")===y.replace("chrome-extension://",""):"chrome-extension:"===C&&Be.hostname===N}if(!bd.test(C))return!1;if(iu.test(w))return N===w;const K=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+K+"|"+K+")$","i").test(N)}const vc=new Pn(3e4,6e4);function If(){const w=rs().___jsl;if(null==w?void 0:w.H)for(const y of Object.keys(w.H))if(w.H[y].r=w.H[y].r||[],w.H[y].L=w.H[y].L||[],w.H[y].r=[...w.H[y].L],w.CP)for(let C=0;C<w.CP.length;C++)w.CP[C]=null}let $u=null;function eg(w){return $u=$u||function ru(w){return new Promise((y,C)=>{var N,K,ie;function Be(){If(),gapi.load("gapi.iframes",{callback:()=>{y(gapi.iframes.getContext())},ontimeout:()=>{If(),C(ii(w,"network-request-failed"))},timeout:vc.get()})}if(null===(K=null===(N=rs().gapi)||void 0===N?void 0:N.iframes)||void 0===K?void 0:K.Iframe)y(gapi.iframes.getContext());else{if(!(null===(ie=rs().gapi)||void 0===ie?void 0:ie.load)){const Dt=Qc("iframefcb");return rs()[Dt]=()=>{gapi.load?Be():C(ii(w,"network-request-failed"))},ra(`https://apis.google.com/js/api.js?onload=${Dt}`).catch(hn=>C(hn))}Be()}}).catch(y=>{throw $u=null,y})}(w),$u}const Ed=new Pn(5e3,15e3),fs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cd(w){const y=w.config;Nt(y.authDomain,w,"auth-domain-config-required");const C=y.emulator?Tn(y,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,N={apiKey:y.apiKey,appName:w.name,v:J.SDK_VERSION},K=bc.get(w.config.apiHost);K&&(N.eid=K);const ie=w._getFrameworks();return ie.length&&(N.fw=ie.join(",")),`${C}?${(0,c.xO)(N).slice(1)}`}function su(){return su=(0,_.Z)(function*(w){const y=yield eg(w),C=rs().gapi;return Nt(C,w,"internal-error"),y.open({where:document.body,url:Cd(w),messageHandlersFilter:C.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fs,dontclear:!0},N=>new Promise(function(){var K=(0,_.Z)(function*(ie,Be){yield N.restyle({setHideOnLeave:!1});const Dt=ii(w,"network-request-failed"),hn=rs().setTimeout(()=>{Be(Dt)},Ed.get());function an(){rs().clearTimeout(hn),ie(N)}N.ping(an).then(an,()=>{Be(Dt)})});return function(ie,Be){return K.apply(this,arguments)}}()))}),su.apply(this,arguments)}const Hu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Sf{constructor(y){this.window=y,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(y){}}}function ig(w,y,C,N,K,ie){Nt(w.config.authDomain,w,"auth-domain-config-required"),Nt(w.config.apiKey,w,"invalid-api-key");const Be={apiKey:w.config.apiKey,appName:w.name,authType:C,redirectUrl:N,v:J.SDK_VERSION,eventId:K};if(y instanceof le){y.setDefaultLanguage(w.languageCode),Be.providerId=y.providerId||"",(0,c.xb)(y.getCustomParameters())||(Be.customParameters=JSON.stringify(y.getCustomParameters()));for(const[hn,an]of Object.entries(ie||{}))Be[hn]=an}if(y instanceof Oe){const hn=y.getScopes().filter(an=>""!==an);hn.length>0&&(Be.scopes=hn.join(","))}w.tenantId&&(Be.tid=w.tenantId);const Dt=Be;for(const hn of Object.keys(Dt))void 0===Dt[hn]&&delete Dt[hn];return`${function Vs({config:w}){return w.emulator?Tn(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,c.xO)(Dt).slice(1)}`}const rr="webStorageSupport",oa=class rg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fr,this._completeRedirectFn=tu,this._overrideRedirectResult=Xc}_openPopup(y,C,N,K){var ie=this;return(0,_.Z)(function*(){var Be;Jt(null===(Be=ie.eventManagers[y._key()])||void 0===Be?void 0:Be.manager,"_initialize() not called before _openPopup()");const Dt=ig(y,C,N,Vi(),K);return function vh(w,y,C,N=500,K=600){const ie=Math.max((window.screen.availHeight-K)/2,0).toString(),Be=Math.max((window.screen.availWidth-N)/2,0).toString();let Dt="";const hn=Object.assign(Object.assign({},Hu),{width:N.toString(),height:K.toString(),top:ie,left:Be}),an=(0,c.z$)().toLowerCase();C&&(Dt=Ds(an)?"_blank":C),zn(an)&&(y=y||"http://localhost",hn.scrollbars="yes");const Gn=Object.entries(hn).reduce((Gr,[so,Kl])=>`${Gr}${so}=${Kl},`,"");if(function Xe(w=(0,c.z$)()){var y;return Ke(w)&&!!(null===(y=window.navigator)||void 0===y?void 0:y.standalone)}(an)&&"_self"!==Dt)return function bh(w,y){const C=document.createElement("a");C.href=w,C.target=y;const N=document.createEvent("MouseEvent");N.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),C.dispatchEvent(N)}(y||"",Dt),new Sf(null);const pr=window.open(y||"",Dt,Gn);Nt(pr,w,"popup-blocked");try{pr.focus()}catch(Gr){}return new Sf(pr)}(y,Dt,xo())})()}_openRedirect(y,C,N,K){var ie=this;return(0,_.Z)(function*(){return yield ie._originValidation(y),function ut(w){rs().location.href=w}(ig(y,C,N,Vi(),K)),new Promise(()=>{})})()}_initialize(y){const C=y._key();if(this.eventManagers[C]){const{manager:K,promise:ie}=this.eventManagers[C];return K?Promise.resolve(K):(Jt(ie,"If manager is not set, promise should be"),ie)}const N=this.initAndGetManager(y);return this.eventManagers[C]={promise:N},N.catch(()=>{delete this.eventManagers[C]}),N}initAndGetManager(y){var C=this;return(0,_.Z)(function*(){const N=yield function il(w){return su.apply(this,arguments)}(y),K=new wf(y);return N.register("authEvent",ie=>(Nt(null==ie?void 0:ie.authEvent,y,"invalid-auth-event"),{status:K.onEvent(ie.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),C.eventManagers[y._key()]={manager:K},C.iframes[y._key()]=N,K})()}_isIframeWebStorageSupported(y,C){this.iframes[y._key()].send(rr,{type:rr},K=>{var ie;const Be=null===(ie=null==K?void 0:K[0])||void 0===ie?void 0:ie[rr];void 0!==Be&&C(!!Be),Kn(y,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(y){const C=y._key();return this.originValidationPromises[C]||(this.originValidationPromises[C]=function yc(w){return bl.apply(this,arguments)}(y)),this.originValidationPromises[C]}get _shouldInitProactively(){return zt()||Wr()||Ke()}};class ou extends class Ir{constructor(y){this.factorId=y}_process(y,C,N){switch(C.type){case"enroll":return this._finalizeEnroll(y,C.credential,N);case"signin":return this._finalizeSignIn(y,C.credential);default:return hi("unexpected MultiFactorSessionType")}}}{constructor(y){super("phone"),this.credential=y}static _fromCredential(y){return new ou(y)}_finalizeEnroll(y,C,N){return function q(w,y){return fi(w,"POST","/v2/accounts/mfaEnrollment:finalize",sn(w,y))}(y,{idToken:C,displayName:N,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(y,C){return function Lr(w,y){return fi(w,"POST","/v2/accounts/mfaSignIn:finalize",sn(w,y))}(y,{mfaPendingCredential:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ro=(()=>{class w{constructor(){}static assertion(C){return ou._fromCredential(C)}}return w.FACTOR_ID="phone",w})();var au="@firebase/auth",zl="0.20.10";class Nf{constructor(y){this.auth=y,this.internalListeners=new Map}getUid(){var y;return this.assertAuthConfigured(),(null===(y=this.auth.currentUser)||void 0===y?void 0:y.uid)||null}getToken(y){var C=this;return(0,_.Z)(function*(){return C.assertAuthConfigured(),yield C.auth._initializationPromise,C.auth.currentUser?{accessToken:yield C.auth.currentUser.getIdToken(y)}:null})()}addAuthTokenListener(y){if(this.assertAuthConfigured(),this.internalListeners.has(y))return;const C=this.auth.onIdTokenChanged(N=>{var K;y((null===(K=N)||void 0===K?void 0:K.stsTokenManager.accessToken)||null)});this.internalListeners.set(y,C),this.updateProactiveRefresh()}removeAuthTokenListener(y){this.assertAuthConfigured();const C=this.internalListeners.get(y);!C||(this.internalListeners.delete(y),C(),this.updateProactiveRefresh())}assertAuthConfigured(){Nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const lu=(0,c.Pz)("authIdTokenMaxAge")||300;let wd=null;const Li=w=>function(){var y=(0,_.Z)(function*(C){const N=C&&(yield C.getIdTokenResult()),K=N&&((new Date).getTime()-Date.parse(N.issuedAtTime))/1e3;if(K&&K>lu)return;const ie=null==N?void 0:N.token;wd!==ie&&(wd=ie,yield fetch(w,{method:ie?"POST":"DELETE",headers:ie?{Authorization:`Bearer ${ie}`}:{}}))});return function(C){return y.apply(this,arguments)}}();function sg(w=(0,J.getApp)()){const y=(0,J._getProvider)(w,"auth");if(y.isInitialized())return y.getImmediate();const C=function kn(w,y){const C=(0,J._getProvider)(w,"auth");if(C.isInitialized()){const K=C.getImmediate(),ie=C.getOptions();if((0,c.vZ)(ie,null!=y?y:{}))return K;Kn(K,"already-initialized")}return C.initialize({options:y})}(w,{popupRedirectResolver:oa,persistence:[vo,Fr,fr]}),N=(0,c.Pz)("authTokenSyncURL");if(N){const ie=Li(N);(function Wc(w,y,C){(0,c.m9)(w).beforeAuthStateChanged(y,C)})(C,ie,()=>ie(C.currentUser)),function fl(w,y,C,N){(0,c.m9)(w).onIdTokenChanged(y,C,N)}(C,Be=>ie(Be))}const K=(0,c.q4)("auth");return K&&_s(C,`http://${K}`),C}!function Mf(w){(0,J._registerComponent)(new at.wA("auth",(y,{options:C})=>{const N=y.getProvider("app").getImmediate(),K=y.getProvider("heartbeat"),{apiKey:ie,authDomain:Be}=N.options;return((Dt,hn)=>{Nt(ie&&!ie.includes(":"),"invalid-api-key",{appName:Dt.name}),Nt(!(null==Be?void 0:Be.includes(":")),"argument-error",{appName:Dt.name});const an={apiKey:ie,authDomain:Be,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ei(w)},Gn=new Ri(Dt,hn,an);return function Ti(w,y){const C=(null==y?void 0:y.persistence)||[],N=(Array.isArray(C)?C:[C]).map(Ht);(null==y?void 0:y.errorMap)&&w._updateErrorMap(y.errorMap),w._initializeWithPersistence(N,null==y?void 0:y.popupRedirectResolver)}(Gn,C),Gn})(N,K)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((y,C,N)=>{y.getProvider("auth-internal").initialize()})),(0,J._registerComponent)(new at.wA("auth-internal",y=>{const C=Di(y.getProvider("auth").getImmediate());return new Nf(C)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,J.registerVersion)(au,zl,function Tr(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,J.registerVersion)(au,zl,"esm2017")}("Browser")},5525:(rn,Ye,V)=>{V.d(Ye,{u7:()=>cd,Jj:()=>_u,IX:()=>sm,my:()=>Ts,xU:()=>Tu,Lz:()=>Qd,WA:()=>en,F8:()=>zh,$q:()=>ud,W:()=>wu,EK:()=>M,PU:()=>Fc,l7:()=>Xa,Ky:()=>_e,Xb:()=>ye,Cf:()=>Ji,K9:()=>Mo,Me:()=>bo,yq:()=>No,Wi:()=>id,ET:()=>Tm,Ab:()=>Z0,vr:()=>G0,Fc:()=>lw,hJ:()=>dy,B$:()=>b0,at:()=>uy,oe:()=>Cm,AK:()=>$0,TF:()=>wy,JU:()=>hy,ST:()=>aw,fH:()=>Ty,Ix:()=>P0,Wu:()=>rh,Lx:()=>Sl,qY:()=>Us,GL:()=>Pc,QT:()=>Ep,kl:()=>ef,Xk:()=>U0,PL:()=>tf,UQ:()=>Cp,zN:()=>bm,ad:()=>R0,nP:()=>W0,b9:()=>Ay,vh:()=>Al,Pb:()=>tC,L$:()=>Dy,cf:()=>Sy,sc:()=>wm,Xo:()=>pm,IO:()=>Xh,iE:()=>nm,Eo:()=>E0,i3:()=>rf,Bt:()=>H0,pl:()=>Em,Ub:()=>xu,qK:()=>vm,TQ:()=>mm,e0:()=>Eu,r7:()=>Tp,Mx:()=>yp,ar:()=>fm});var pe,_=V(5861),c=V(9681),J=V(4859),Ee=V(1877),Ie=V(2090),Ze="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ge={},ke=ke||{},fe=Ze||self;function ge(){}function Fe(l){var n=typeof l;return"array"==(n="object"!=n?n:l?Array.isArray(l)?"array":n:"null")||"object"==n&&"number"==typeof l.length}function _t(l){var n=typeof l;return"object"==n&&null!=l||"function"==n}var mt="closure_uid_"+(1e9*Math.random()>>>0),ot=0;function qe(l,n,s){return l.call.apply(l.bind,arguments)}function ze(l,n,s){if(!l)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var p=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(p,d),l.apply(n,p)}}return function(){return l.apply(n,arguments)}}function Ue(l,n,s){return(Ue=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qe:ze).apply(null,arguments)}function vt(l,n){var s=Array.prototype.slice.call(arguments,1);return function(){var d=s.slice();return d.push.apply(d,arguments),l.apply(this,d)}}function Pe(l,n){function s(){}s.prototype=n.prototype,l.X=n.prototype,l.prototype=new s,l.prototype.constructor=l,l.Wb=function(d,p,v){for(var T=Array(arguments.length-2),O=2;O<arguments.length;O++)T[O-2]=arguments[O];return n.prototype[p].apply(d,T)}}function je(){this.s=this.s,this.o=this.o}var It={};je.prototype.s=!1,je.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var l=function rt(l){return Object.prototype.hasOwnProperty.call(l,mt)&&l[mt]||(l[mt]=++ot)}(this);delete It[l]}},je.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const At=Array.prototype.indexOf?function(l,n){return Array.prototype.indexOf.call(l,n,void 0)}:function(l,n){if("string"==typeof l)return"string"!=typeof n||1!=n.length?-1:l.indexOf(n,0);for(let s=0;s<l.length;s++)if(s in l&&l[s]===n)return s;return-1};function it(l){const n=l.length;if(0<n){const s=Array(n);for(let d=0;d<n;d++)s[d]=l[d];return s}return[]}function Ne(l,n){for(let s=1;s<arguments.length;s++){const d=arguments[s];if(Fe(d)){const p=l.length||0,v=d.length||0;l.length=p+v;for(let T=0;T<v;T++)l[p+T]=d[T]}else l.push(d)}}function We(l,n){this.type=l,this.g=this.target=n,this.defaultPrevented=!1}We.prototype.h=function(){this.defaultPrevented=!0};var Qe=function(){if(!fe.addEventListener||!Object.defineProperty)return!1;var l=!1,n=Object.defineProperty({},"passive",{get:function(){l=!0}});try{fe.addEventListener("test",ge,n),fe.removeEventListener("test",ge,n)}catch(s){}return l}();function dt(l){return/^[\s\xa0]*$/.test(l)}var wt=String.prototype.trim?function(l){return l.trim()}:function(l){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(l)[1]};function at(l,n){return l<n?-1:l>n?1:0}function In(){var l=fe.navigator;return l&&(l=l.userAgent)?l:""}function tn(l){return-1!=In().indexOf(l)}function wn(l){return wn[" "](l),l}wn[" "]=ge;var Kt,l,qt=tn("Opera"),Nn=tn("Trident")||tn("MSIE"),bn=tn("Edge"),pt=bn||Nn,Ot=tn("Gecko")&&!(-1!=In().toLowerCase().indexOf("webkit")&&!tn("Edge"))&&!(tn("Trident")||tn("MSIE"))&&!tn("Edge"),Le=-1!=In().toLowerCase().indexOf("webkit")&&!tn("Edge");function ht(){var l=fe.document;return l?l.documentMode:void 0}e:{var Mn="",Kn=(l=In(),Ot?/rv:([^\);]+)(\)|;)/.exec(l):bn?/Edge\/([\d\.]+)/.exec(l):Nn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(l):Le?/WebKit\/(\S+)/.exec(l):qt?/(?:Version)[ \/]?(\S+)/.exec(l):void 0);if(Kn&&(Mn=Kn?Kn[1]:""),Nn){var ii=ht();if(null!=ii&&ii>parseFloat(Mn)){Kt=String(ii);break e}}Kt=Mn}var Ki={};var hi=fe.document&&Nn&&(ht()||parseInt(Kt,10))||void 0;function Jt(l,n){if(We.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var s=this.type=l.type,d=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=n,n=l.relatedTarget){if(Ot){e:{try{wn(n.nodeName);var p=!0;break e}catch(v){}p=!1}p||(n=null)}}else"mouseover"==s?n=l.fromElement:"mouseout"==s&&(n=l.toElement);this.relatedTarget=n,d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType="string"==typeof l.pointerType?l.pointerType:Yn[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Jt.X.h.call(this)}}Pe(Jt,We);var Yn={2:"touch",3:"pen",4:"mouse"};Jt.prototype.h=function(){Jt.X.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ht="closure_listenable_"+(1e6*Math.random()|0),kn=0;function Ti(l,n,s,d,p){this.listener=l,this.proxy=null,this.src=n,this.type=s,this.capture=!!d,this.ha=p,this.key=++kn,this.ba=this.ea=!1}function Vi(l){l.ba=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Zi(l,n,s){for(const d in l)n.call(s,l[d],d,l)}function Ai(l){const n={};for(const s in l)n[s]=l[s];return n}const lr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tr(l,n){let s,d;for(let p=1;p<arguments.length;p++){for(s in d=arguments[p],d)l[s]=d[s];for(let v=0;v<lr.length;v++)s=lr[v],Object.prototype.hasOwnProperty.call(d,s)&&(l[s]=d[s])}}function Pn(l){this.src=l,this.g={},this.h=0}function Tn(l,n){var s=n.type;if(s in l.g){var v,d=l.g[s],p=At(d,n);(v=0<=p)&&Array.prototype.splice.call(d,p,1),v&&(Vi(n),0==l.g[s].length&&(delete l.g[s],l.h--))}}function gn(l,n,s,d){for(var p=0;p<l.length;++p){var v=l[p];if(!v.ba&&v.listener==n&&v.capture==!!s&&v.ha==d)return p}return-1}Pn.prototype.add=function(l,n,s,d,p){var v=l.toString();(l=this.g[v])||(l=this.g[v]=[],this.h++);var T=gn(l,n,d,p);return-1<T?(n=l[T],s||(n.ea=!1)):((n=new Ti(n,this.src,v,!!d,p)).ea=s,l.push(n)),n};var Sr="closure_lm_"+(1e6*Math.random()|0),Fi={};function sn(l,n,s,d,p){if(d&&d.once)return ui(l,n,s,d,p);if(Array.isArray(n)){for(var v=0;v<n.length;v++)sn(l,n[v],s,d,p);return null}return s=nn(s),l&&l[Ht]?l.N(n,s,_t(d)?!!d.capture:!!d,p):fi(l,n,s,!1,d,p)}function fi(l,n,s,d,p,v){if(!n)throw Error("Invalid event type");var T=_t(p)?!!p.capture:!!p,O=Ut(l);if(O||(l[Sr]=O=new Pn(l)),(s=O.add(n,s,d,T,v)).proxy)return s;if(d=function cr(){const n=Yi;return function l(s){return n.call(l.src,l.listener,s)}}(),s.proxy=d,d.src=l,d.listener=s,l.addEventListener)Qe||(p=T),void 0===p&&(p=!1),l.addEventListener(n.toString(),d,p);else if(l.attachEvent)l.attachEvent(Bn(n.toString()),d);else{if(!l.addListener||!l.removeListener)throw Error("addEventListener and attachEvent are unavailable.");l.addListener(d)}return s}function ui(l,n,s,d,p){if(Array.isArray(n)){for(var v=0;v<n.length;v++)ui(l,n[v],s,d,p);return null}return s=nn(s),l&&l[Ht]?l.O(n,s,_t(d)?!!d.capture:!!d,p):fi(l,n,s,!0,d,p)}function yn(l,n,s,d,p){if(Array.isArray(n))for(var v=0;v<n.length;v++)yn(l,n[v],s,d,p);else d=_t(d)?!!d.capture:!!d,s=nn(s),l&&l[Ht]?(l=l.i,(n=String(n).toString())in l.g&&-1<(s=gn(v=l.g[n],s,d,p))&&(Vi(v[s]),Array.prototype.splice.call(v,s,1),0==v.length&&(delete l.g[n],l.h--))):l&&(l=Ut(l))&&(n=l.g[n.toString()],l=-1,n&&(l=gn(n,s,d,p)),(s=-1<l?n[l]:null)&&Qn(s))}function Qn(l){if("number"!=typeof l&&l&&!l.ba){var n=l.src;if(n&&n[Ht])Tn(n.i,l);else{var s=l.type,d=l.proxy;n.removeEventListener?n.removeEventListener(s,d,l.capture):n.detachEvent?n.detachEvent(Bn(s),d):n.addListener&&n.removeListener&&n.removeListener(d),(s=Ut(n))?(Tn(s,l),0==s.h&&(s.src=null,n[Sr]=null)):Vi(l)}}}function Bn(l){return l in Fi?Fi[l]:Fi[l]="on"+l}function Yi(l,n){if(l.ba)l=!0;else{n=new Jt(n,this);var s=l.listener,d=l.ha||l.src;l.ea&&Qn(l),l=s.call(d,n)}return l}function Ut(l){return(l=l[Sr])instanceof Pn?l:null}var bt="__closure_events_fn_"+(1e9*Math.random()>>>0);function nn(l){return"function"==typeof l?l:(l[bt]||(l[bt]=function(n){return l.handleEvent(n)}),l[bt])}function fn(){je.call(this),this.i=new Pn(this),this.P=this,this.I=null}function dn(l,n){var s,d=l.I;if(d)for(s=[];d;d=d.I)s.push(d);if(l=l.P,d=n.type||n,"string"==typeof n)n=new We(n,l);else if(n instanceof We)n.target=n.target||l;else{var p=n;tr(n=new We(d,l),p)}if(p=!0,s)for(var v=s.length-1;0<=v;v--){var T=n.g=s[v];p=on(T,d,!0,n)&&p}if(p=on(T=n.g=l,d,!0,n)&&p,p=on(T,d,!1,n)&&p,s)for(v=0;v<s.length;v++)p=on(T=n.g=s[v],d,!1,n)&&p}function on(l,n,s,d){if(!(n=l.i.g[String(n)]))return!0;n=n.concat();for(var p=!0,v=0;v<n.length;++v){var T=n[v];if(T&&!T.ba&&T.capture==s){var O=T.listener,z=T.ha||T.src;T.ea&&Tn(l.i,T),p=!1!==O.call(z,d)&&p}}return p&&!d.defaultPrevented}Pe(fn,je),fn.prototype[Ht]=!0,fn.prototype.removeEventListener=function(l,n,s,d){yn(this,l,n,s,d)},fn.prototype.M=function(){if(fn.X.M.call(this),this.i){var n,l=this.i;for(n in l.g){for(var s=l.g[n],d=0;d<s.length;d++)Vi(s[d]);delete l.g[n],l.h--}}this.I=null},fn.prototype.N=function(l,n,s,d){return this.i.add(String(l),n,!1,s,d)},fn.prototype.O=function(l,n,s,d){return this.i.add(String(l),n,!0,s,d)};var xe=fe.JSON.stringify;function we(){var l=Zt;let n=null;return l.g&&(n=l.g,l.g=l.g.next,l.g||(l.h=null),n.next=null),n}var ce,Ce=new class{constructor(l,n){this.i=l,this.j=n,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}(()=>new de,l=>l.reset());class de{constructor(){this.next=this.g=this.h=null}set(n,s){this.h=n,this.g=s,this.next=null}reset(){this.next=this.g=this.h=null}}function X(l){fe.setTimeout(()=>{throw l},0)}function ue(l,n){ce||function Me(){var l=fe.Promise.resolve(void 0);ce=function(){l.then(Yt)}}(),et||(ce(),et=!0),Zt.add(l,n)}var et=!1,Zt=new class Ve{constructor(){this.h=this.g=null}add(n,s){const d=Ce.get();d.set(n,s),this.h?this.h.next=d:this.g=d,this.h=d}};function Yt(){for(var l;l=we();){try{l.h.call(l.g)}catch(s){X(s)}var n=Ce;n.j(l),100>n.h&&(n.h++,l.next=n.g,n.g=l)}et=!1}function Jn(l,n){fn.call(this),this.h=l||1,this.g=n||fe,this.j=Ue(this.lb,this),this.l=Date.now()}function Xn(l){l.ca=!1,l.R&&(l.g.clearTimeout(l.R),l.R=null)}function Mt(l,n,s){if("function"==typeof l)s&&(l=Ue(l,s));else{if(!l||"function"!=typeof l.handleEvent)throw Error("Invalid listener argument");l=Ue(l.handleEvent,l)}return 2147483647<Number(n)?-1:fe.setTimeout(l,n||0)}function Vt(l){l.g=Mt(()=>{l.g=null,l.i&&(l.i=!1,Vt(l))},l.j);const n=l.h;l.h=null,l.m.apply(null,n)}Pe(Jn,fn),(pe=Jn.prototype).ca=!1,pe.R=null,pe.lb=function(){if(this.ca){var l=Date.now()-this.l;0<l&&l<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-l):(this.R&&(this.g.clearTimeout(this.R),this.R=null),dn(this,"tick"),this.ca&&(Xn(this),this.start()))}},pe.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},pe.M=function(){Jn.X.M.call(this),Xn(this),delete this.g};class Hn extends je{constructor(n,s){super(),this.m=n,this.j=s,this.h=null,this.i=!1,this.g=null}l(n){this.h=arguments,this.g?this.i=!0:Vt(this)}M(){super.M(),this.g&&(fe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jn(l){je.call(this),this.h=l,this.g={}}Pe(jn,je);var ji=[];function Si(l,n,s,d){Array.isArray(s)||(s&&(ji[0]=s.toString()),s=ji);for(var p=0;p<s.length;p++){var v=sn(n,s[p],d||l.handleEvent,!1,l.h||l);if(!v)break;l.g[v.key]=v}}function Xt(l){Zi(l.g,function(n,s){this.g.hasOwnProperty(s)&&Qn(n)},l),l.g={}}function Zn(){this.g=!0}function Wi(l,n,s,d){l.info(function(){return"XMLHTTP TEXT ("+n+"): "+function Qr(l,n){if(!l.g)return n;if(!n)return null;try{var s=JSON.parse(n);if(s)for(l=0;l<s.length;l++)if(Array.isArray(s[l])){var d=s[l];if(!(2>d.length)){var p=d[1];if(Array.isArray(p)&&!(1>p.length)){var v=p[0];if("noop"!=v&&"stop"!=v&&"close"!=v)for(var T=1;T<p.length;T++)p[T]=""}}}return xe(s)}catch(O){return n}}(l,s)+(d?" "+d:"")})}jn.prototype.M=function(){jn.X.M.call(this),Xt(this)},jn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zn.prototype.Aa=function(){this.g=!1},Zn.prototype.info=function(){};var xn={},or=null;function vi(){return or=or||new fn}function zn(l){We.call(this,xn.Pa,l)}function Wr(l){const n=vi();dn(n,new zn(n,l))}function Ds(l,n){We.call(this,xn.STAT_EVENT,l),this.stat=n}function $i(l){const n=vi();dn(n,new Ds(n,l))}function _r(l,n){We.call(this,xn.Qa,l),this.size=n}function ar(l,n){if("function"!=typeof l)throw Error("Fn must not be null and must be a function");return fe.setTimeout(function(){l()},n)}xn.Pa="serverreachability",Pe(zn,We),xn.STAT_EVENT="statevent",Pe(Ds,We),xn.Qa="timingevent",Pe(_r,We);var qr={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Ke={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function He(){}function St(){}He.prototype.h=null;var dr,zt={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function mn(){We.call(this,"d")}function ei(){We.call(this,"c")}function Ri(){}function Di(l,n,s,d){this.l=l,this.j=n,this.m=s,this.U=d||1,this.S=new jn(this),this.O=_s,this.T=new Jn(l=pt?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new yr}function yr(){this.i=null,this.g="",this.h=!1}Pe(mn,We),Pe(ei,We),Pe(Ri,He),Ri.prototype.g=function(){return new XMLHttpRequest},Ri.prototype.i=function(){return{}},dr=new Ri;var _s=45e3,ys={},Jr={};function zr(l,n,s){l.K=1,l.v=Hs(Xr(n)),l.s=s,l.P=!0,Ia(l,null)}function Ia(l,n){l.F=Date.now(),Rs(l),l.A=Xr(l.v);var s=l.A,d=l.U;Array.isArray(d)||(d=[String(d)]),Se(s.i,"t",d),l.C=0,s=l.l.H,l.h=new yr,l.g=hl(l.l,s?n:null,!l.s),0<l.N&&(l.L=new Hn(Ue(l.La,l,l.g),l.N)),Si(l.S,l.g,"readystatechange",l.ib),n=l.H?Ai(l.H):{},l.s?(l.u||(l.u="POST"),n["Content-Type"]="application/x-www-form-urlencoded",l.g.da(l.A,l.u,l.s,n)):(l.u="GET",l.g.da(l.A,l.u,null,n)),Wr(1),function Ni(l,n,s,d,p,v){l.info(function(){if(l.g)if(v)for(var T="",O=v.split("&"),z=0;z<O.length;z++){var ee=O[z].split("=");if(1<ee.length){var me=ee[0];ee=ee[1];var Re=me.split("_");T=2<=Re.length&&"type"==Re[1]?T+(me+"=")+ee+"&":T+(me+"=redacted&")}}else T=null;else T=v;return"XMLHTTP REQ ("+d+") [attempt "+p+"]: "+n+"\n"+s+"\n"+T})}(l.j,l.u,l.A,l.m,l.U,l.s)}function Os(l){return!!l.g&&"GET"==l.u&&2!=l.K&&l.l.Da}function Xo(l,n,s){let p,d=!0;for(;!l.I&&l.C<s.length;){if(p=Aa(l,s),p==Jr){4==n&&(l.o=4,$i(14),d=!1),Wi(l.j,l.m,null,"[Incomplete Response]");break}if(p==ys){l.o=4,$i(15),Wi(l.j,l.m,s,"[Invalid Chunk]"),d=!1;break}Wi(l.j,l.m,p,null),Qs(l,p)}Os(l)&&p!=Jr&&p!=ys&&(l.h.g="",l.C=0),4!=n||0!=s.length||l.h.h||(l.o=1,$i(16),d=!1),l.i=l.i&&d,d?0<s.length&&!l.$&&(l.$=!0,(n=l.l).g==l&&n.$&&!n.K&&(n.j.info("Great, no buffering proxy detected. Bytes received: "+s.length),ea(n),n.K=!0,$i(11))):(Wi(l.j,l.m,s,"[Invalid Chunked Response]"),$s(l),ds(l))}function Aa(l,n){var s=l.C,d=n.indexOf("\n",s);return-1==d?Jr:(s=Number(n.substring(s,d)),isNaN(s)?ys:(d+=1)+s>n.length?Jr:(n=n.substr(d,s),l.C=d+s,n))}function Rs(l){l.V=Date.now()+l.O,Co(l,l.O)}function Co(l,n){if(null!=l.B)throw Error("WatchDog timer not null");l.B=ar(Ue(l.gb,l),n)}function vs(l){l.B&&(fe.clearTimeout(l.B),l.B=null)}function ds(l){0==l.l.G||l.I||ul(l.l,l)}function $s(l){vs(l);var n=l.L;n&&"function"==typeof n.na&&n.na(),l.L=null,Xn(l.T),Xt(l.S),l.g&&(n=l.g,l.g=null,n.abort(),n.na())}function Qs(l,n){try{var s=l.l;if(0!=s.G&&(s.g==l||se(s.h,l)))if(!l.J&&se(s.h,l)&&3==s.G){try{var d=s.Fa.g.parse(n)}catch(ee){d=null}if(Array.isArray(d)&&3==d.length){var p=d;if(0==p[0])e:if(s.u)s.Ba=p[1],0<s.Ba-s.T&&37500>p[2]&&s.L&&0==s.A&&!s.v&&(s.v=ar(Ue(s.cb,s),6e3));else{if(s.g){if(!(s.g.F+3e3<l.F))break e;So(s),pa(s)}Bl(s),$i(18)}if(1>=B(s.h)&&s.ja){try{s.ja()}catch(ee){}s.ja=void 0}}else xa(s,11)}else if((l.J||s.g==l)&&So(s),!dt(n))for(p=s.Fa.g.parse(n),n=0;n<p.length;n++){let ee=p[n];if(s.T=ee[0],ee=ee[1],2==s.G)if("c"==ee[0]){s.I=ee[1],s.ka=ee[2];const me=ee[3];null!=me&&(s.ma=me,s.j.info("VER="+s.ma));const Re=ee[4];null!=Re&&(s.Ca=Re,s.j.info("SVER="+s.Ca));const gt=ee[5];null!=gt&&"number"==typeof gt&&0<gt&&(s.J=d=1.5*gt,s.j.info("backChannelRequestTimeoutMs_="+d)),d=s;const Ft=l.g;if(Ft){const jt=Ft.g?Ft.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jt){var v=d.h;v.g||-1==jt.indexOf("spdy")&&-1==jt.indexOf("quic")&&-1==jt.indexOf("h2")||(v.j=v.l,v.g=new Set,v.h&&($(v,v.h),v.h=null))}if(d.D){const Rn=Ft.g?Ft.g.getResponseHeader("X-HTTP-Session-Id"):null;Rn&&(d.za=Rn,nr(d.F,d.D,Rn))}}s.G=3,s.l&&s.l.xa(),s.$&&(s.P=Date.now()-l.F,s.j.info("Handshake RTT: "+s.P+"ms"));var T=l;if((d=s).sa=dl(d,d.H?d.ka:null,d.V),T.J){le(d.h,T);var O=T,z=d.J;z&&O.setTimeout(z),O.B&&(vs(O),Rs(O)),d.g=T}else Qa(d);0<s.i.length&&Xs(s)}else"stop"!=ee[0]&&"close"!=ee[0]||xa(s,7);else 3==s.G&&("stop"==ee[0]||"close"==ee[0]?"stop"==ee[0]?xa(s,7):fa(s):"noop"!=ee[0]&&s.l&&s.l.wa(ee),s.A=0)}Wr(4)}catch(ee){}}function da(l,n){if(l.forEach&&"function"==typeof l.forEach)l.forEach(n,void 0);else if(Fe(l)||"string"==typeof l)Array.prototype.forEach.call(l,n,void 0);else for(var s=function wo(l){if(l.oa&&"function"==typeof l.oa)return l.oa();if(!l.W||"function"!=typeof l.W){if("undefined"!=typeof Map&&l instanceof Map)return Array.from(l.keys());if(!("undefined"!=typeof Set&&l instanceof Set)){if(Fe(l)||"string"==typeof l){var n=[];l=l.length;for(var s=0;s<l;s++)n.push(s);return n}n=[],s=0;for(const d in l)n[s++]=d;return n}}}(l),d=function To(l){if(l.W&&"function"==typeof l.W)return l.W();if("undefined"!=typeof Map&&l instanceof Map||"undefined"!=typeof Set&&l instanceof Set)return Array.from(l.values());if("string"==typeof l)return l.split("");if(Fe(l)){for(var n=[],s=l.length,d=0;d<s;d++)n.push(l[d]);return n}for(d in n=[],s=0,l)n[s++]=l[d];return n}(l),p=d.length,v=0;v<p;v++)n.call(void 0,d[v],s&&s[v],l)}(pe=Di.prototype).setTimeout=function(l){this.O=l},pe.ib=function(l){l=l.target;const n=this.L;n&&3==Pr(l)?n.l():this.La(l)},pe.La=function(l){try{if(l==this.g)e:{const me=Pr(this.g);var n=this.g.Ea();const Re=this.g.aa();if(!(3>me)&&(3!=me||pt||this.g&&(this.h.h||this.g.fa()||hs(this.g)))){this.I||4!=me||7==n||Wr(8==n||0>=Re?3:2),vs(this);var s=this.g.aa();this.Y=s;t:if(Os(this)){var d=hs(this.g);l="";var p=d.length,v=4==Pr(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){$s(this),ds(this);var T="";break t}this.h.i=new fe.TextDecoder}for(n=0;n<p;n++)this.h.h=!0,l+=this.h.i.decode(d[n],{stream:v&&n==p-1});d.splice(0,p),this.h.g+=l,this.C=0,T=this.h.g}else T=this.g.fa();if(this.i=200==s,function Oi(l,n,s,d,p,v,T){l.info(function(){return"XMLHTTP RESP ("+d+") [ attempt "+p+"]: "+n+"\n"+s+"\n"+v+" "+T})}(this.j,this.u,this.A,this.m,this.U,me,s),this.i){if(this.Z&&!this.J){t:{if(this.g){var O,z=this.g;if((O=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dt(O)){var ee=O;break t}}ee=null}if(!(s=ee)){this.i=!1,this.o=3,$i(12),$s(this),ds(this);break e}Wi(this.j,this.m,s,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Qs(this,s)}this.P?(Xo(this,me,T),pt&&this.i&&3==me&&(Si(this.S,this.T,"tick",this.hb),this.T.start())):(Wi(this.j,this.m,T,null),Qs(this,T)),4==me&&$s(this),this.i&&!this.I&&(4==me?ul(this.l,this):(this.i=!1,Rs(this)))}else 400==s&&0<T.indexOf("Unknown SID")?(this.o=3,$i(12)):(this.o=0,$i(13)),$s(this),ds(this)}}}catch(me){}},pe.hb=function(){if(this.g){var l=Pr(this.g),n=this.g.fa();this.C<n.length&&(vs(this),Xo(this,l,n),this.i&&4!=l&&Rs(this))}},pe.cancel=function(){this.I=!0,$s(this)},pe.gb=function(){this.B=null;const l=Date.now();0<=l-this.V?(function ur(l,n){l.info(function(){return"TIMEOUT: "+n})}(this.j,this.A),2!=this.K&&(Wr(3),$i(17)),$s(this),this.o=2,ds(this)):Co(this,this.V-l)};var Do=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kr(l,n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,l instanceof Kr){this.h=void 0!==n?n:l.h,ks(this,l.j),this.s=l.s,this.g=l.g,Ps(this,l.m),this.l=l.l,n=l.i;var s=new vr;s.i=n.i,n.g&&(s.g=new Map(n.g),s.h=n.h),Fs(this,s),this.o=l.o}else l&&(s=String(l).match(Do))?(this.h=!!n,ks(this,s[1]||"",!0),this.s=Gs(s[2]||""),this.g=Gs(s[3]||"",!0),Ps(this,s[4]),this.l=Gs(s[5]||"",!0),Fs(this,s[6]||"",!0),this.o=Gs(s[7]||"")):(this.h=!!n,this.i=new vr(null,this.h))}function Xr(l){return new Kr(l)}function ks(l,n,s){l.j=s?Gs(n,!0):n,l.j&&(l.j=l.j.replace(/:$/,""))}function Ps(l,n){if(n){if(n=Number(n),isNaN(n)||0>n)throw Error("Bad port number "+n);l.m=n}else l.m=null}function Fs(l,n,s){n instanceof vr?(l.i=n,function Rt(l,n){n&&!l.j&&(ne(l),l.i=null,l.g.forEach(function(s,d){var p=d.toLowerCase();d!=p&&(te(this,d),Se(this,p,s))},l)),l.j=n}(l.i,l.h)):(s||(n=bs(n,Rr)),l.i=new vr(n,l.h))}function nr(l,n,s){l.i.set(n,s)}function Hs(l){return nr(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Gs(l,n){return l?n?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function bs(l,n,s){return"string"==typeof l?(l=encodeURI(l).replace(n,Is),s&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Is(l){return"%"+((l=l.charCodeAt(0))>>4&15).toString(16)+(15&l).toString(16)}Kr.prototype.toString=function(){var l=[],n=this.j;n&&l.push(bs(n,As,!0),":");var s=this.g;return(s||"file"==n)&&(l.push("//"),(n=this.s)&&l.push(bs(n,As,!0),"@"),l.push(encodeURIComponent(String(s)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(s=this.m)&&l.push(":",String(s))),(s=this.l)&&(this.g&&"/"!=s.charAt(0)&&l.push("/"),l.push(bs(s,"/"==s.charAt(0)?Ss:Js,!0))),(s=this.i.toString())&&l.push("?",s),(s=this.o)&&l.push("#",bs(s,Na)),l.join("")};var As=/[#\/\?@]/g,Js=/[#\?:]/g,Ss=/[#\?]/g,Rr=/[#\?@]/g,Na=/#/g;function vr(l,n){this.h=this.g=null,this.i=l||null,this.j=!!n}function ne(l){l.g||(l.g=new Map,l.h=0,l.i&&function Sa(l,n){if(l){l=l.split("&");for(var s=0;s<l.length;s++){var d=l[s].indexOf("="),p=null;if(0<=d){var v=l[s].substring(0,d);p=l[s].substring(d+1)}else v=l[s];n(v,p?decodeURIComponent(p.replace(/\+/g," ")):"")}}}(l.i,function(n,s){l.add(decodeURIComponent(n.replace(/\+/g," ")),s)}))}function te(l,n){ne(l),n=Je(l,n),l.g.has(n)&&(l.i=null,l.h-=l.g.get(n).length,l.g.delete(n))}function Te(l,n){return ne(l),n=Je(l,n),l.g.has(n)}function Se(l,n,s){te(l,n),0<s.length&&(l.i=null,l.g.set(Je(l,n),it(s)),l.h+=s.length)}function Je(l,n){return n=String(n),l.j&&(n=n.toLowerCase()),n}function _n(l){this.l=l||Vn,l=fe.PerformanceNavigationTiming?0<(l=fe.performance.getEntriesByType("navigation")).length&&("hq"==l[0].nextHopProtocol||"h2"==l[0].nextHopProtocol):!!(fe.g&&fe.g.Ga&&fe.g.Ga()&&fe.g.Ga().$b),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(pe=vr.prototype).add=function(l,n){ne(this),this.i=null,l=Je(this,l);var s=this.g.get(l);return s||this.g.set(l,s=[]),s.push(n),this.h+=1,this},pe.forEach=function(l,n){ne(this),this.g.forEach(function(s,d){s.forEach(function(p){l.call(n,p,d,this)},this)},this)},pe.oa=function(){ne(this);const l=Array.from(this.g.values()),n=Array.from(this.g.keys()),s=[];for(let d=0;d<n.length;d++){const p=l[d];for(let v=0;v<p.length;v++)s.push(n[d])}return s},pe.W=function(l){ne(this);let n=[];if("string"==typeof l)Te(this,l)&&(n=n.concat(this.g.get(Je(this,l))));else{l=Array.from(this.g.values());for(let s=0;s<l.length;s++)n=n.concat(l[s])}return n},pe.set=function(l,n){return ne(this),this.i=null,Te(this,l=Je(this,l))&&(this.h-=this.g.get(l).length),this.g.set(l,[n]),this.h+=1,this},pe.get=function(l,n){return l&&0<(l=this.W(l)).length?String(l[0]):n},pe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],n=Array.from(this.g.keys());for(var s=0;s<n.length;s++){var d=n[s];const v=encodeURIComponent(String(d)),T=this.W(d);for(d=0;d<T.length;d++){var p=v;""!==T[d]&&(p+="="+encodeURIComponent(String(T[d]))),l.push(p)}}return this.i=l.join("&")};var Vn=10;function Fn(l){return!!l.h||!!l.g&&l.g.size>=l.j}function B(l){return l.h?1:l.g?l.g.size:0}function se(l,n){return l.h?l.h==n:!!l.g&&l.g.has(n)}function $(l,n){l.g?l.g.add(n):l.h=n}function le(l,n){l.h&&l.h==n?l.h=null:l.g&&l.g.has(n)&&l.g.delete(n)}function Oe(l){if(null!=l.h)return l.i.concat(l.h.D);if(null!=l.g&&0!==l.g.size){let n=l.i;for(const s of l.g.values())n=n.concat(s.D);return n}return it(l.i)}function ft(){}function kt(){this.g=new ft}function cn(l,n,s){const d=s||"";try{da(l,function(p,v){let T=p;_t(p)&&(T=xe(p)),n.push(d+v+"="+encodeURIComponent(T))})}catch(p){throw n.push(d+"type="+encodeURIComponent("_badmap")),p}}function pi(l,n,s,d,p){try{n.onload=null,n.onerror=null,n.onabort=null,n.ontimeout=null,p(d)}catch(v){}}function si(l){this.l=l.ac||null,this.j=l.jb||!1}function gi(l,n){fn.call(this),this.D=l,this.u=n,this.m=void 0,this.readyState=Qi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_n.prototype.cancel=function(){if(this.i=Oe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const l of this.g.values())l.cancel();this.g.clear()}},ft.prototype.stringify=function(l){return fe.JSON.stringify(l,void 0)},ft.prototype.parse=function(l){return fe.JSON.parse(l,void 0)},Pe(si,He),si.prototype.g=function(){return new gi(this.l,this.j)},si.prototype.i=function(l){return function(){return l}}({}),Pe(gi,fn);var Qi=0;function Hi(l){l.j.read().then(l.Ta.bind(l)).catch(l.ga.bind(l))}function vn(l){l.readyState=4,l.l=null,l.j=null,l.A=null,es(l)}function es(l){l.onreadystatechange&&l.onreadystatechange.call(l)}(pe=gi.prototype).open=function(l,n){if(this.readyState!=Qi)throw this.abort(),Error("Error reopening a connection");this.C=l,this.B=n,this.readyState=1,es(this)},pe.send=function(l){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const n={headers:this.v,method:this.C,credentials:this.m,cache:void 0};l&&(n.body=l),(this.D||fe).fetch(new Request(this.B,n)).then(this.Wa.bind(this),this.ga.bind(this))},pe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,vn(this)),this.readyState=Qi},pe.Wa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,es(this)),this.g&&(this.readyState=3,es(this),this.g)))if("arraybuffer"===this.responseType)l.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==fe.ReadableStream&&"body"in l){if(this.j=l.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Hi(this)}else l.text().then(this.Va.bind(this),this.ga.bind(this))},pe.Ta=function(l){if(this.g){if(this.u&&l.value)this.response.push(l.value);else if(!this.u){var n=l.value?l.value:new Uint8Array(0);(n=this.A.decode(n,{stream:!l.done}))&&(this.response=this.responseText+=n)}l.done?vn(this):es(this),3==this.readyState&&Hi(this)}},pe.Va=function(l){this.g&&(this.response=this.responseText=l,vn(this))},pe.Ua=function(l){this.g&&(this.response=l,vn(this))},pe.ga=function(){this.g&&vn(this)},pe.setRequestHeader=function(l,n){this.v.append(l,n)},pe.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},pe.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],n=this.h.entries();for(var s=n.next();!s.done;)l.push((s=s.value)[0]+": "+s[1]),s=n.next();return l.join("\r\n")},Object.defineProperty(gi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(l){this.m=l?"include":"same-origin"}});var kr=fe.JSON.parse;function qi(l){fn.call(this),this.headers=new Map,this.u=l||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Go,this.K=this.L=!1}Pe(qi,fn);var Go="",W=/^https?$/i,j=["POST","PUT"];function Y(l,n){l.h=!1,l.g&&(l.l=!0,l.g.abort(),l.l=!1),l.j=n,l.m=5,ct(l),oi(l)}function ct(l){l.D||(l.D=!0,dn(l,"complete"),dn(l,"error"))}function Ln(l){if(l.h&&void 0!==ke&&(!l.C[1]||4!=Pr(l)||2!=l.aa()))if(l.v&&4==Pr(l))Mt(l.Ha,0,l);else if(dn(l,"readystatechange"),4==Pr(l)){l.h=!1;try{const O=l.aa();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var s;if(!(s=n)){var d;if(d=0===O){var p=String(l.H).match(Do)[1]||null;if(!p&&fe.self&&fe.self.location){var v=fe.self.location.protocol;p=v.substr(0,v.length-1)}d=!W.test(p?p.toLowerCase():"")}s=d}if(s)dn(l,"complete"),dn(l,"success");else{l.m=6;try{var T=2<Pr(l)?l.g.statusText:""}catch(z){T=""}l.j=T+" ["+l.aa()+"]",ct(l)}}finally{oi(l)}}}function oi(l,n){if(l.g){ts(l);const s=l.g,d=l.C[0]?ge:null;l.g=null,l.C=null,n||dn(l,"ready");try{s.onreadystatechange=d}catch(p){}}}function ts(l){l.g&&l.K&&(l.g.ontimeout=null),l.A&&(fe.clearTimeout(l.A),l.A=null)}function Pr(l){return l.g?l.g.readyState:0}function hs(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.J){case Go:case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch(n){return null}}function Io(l){let n="";return Zi(l,function(s,d){n+=d,n+=":",n+=s,n+="\r\n"}),n}function Zo(l,n,s){e:{for(d in s){var d=!1;break e}d=!0}d||(s=Io(s),"string"==typeof l?null!=s&&encodeURIComponent(String(s)):nr(l,n,s))}function ha(l,n,s){return s&&s.internalChannelParams&&s.internalChannelParams[l]||n}function Ll(l){this.Ca=0,this.i=[],this.j=new Zn,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ha("failFast",!1,l),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ha("baseRetryDelayMs",5e3,l),this.bb=ha("retryDelaySeedMs",1e4,l),this.$a=ha("forwardChannelMaxRetries",2,l),this.ta=ha("forwardChannelRequestTimeoutMs",2e4,l),this.ra=l&&l.xmlHttpFactory||void 0,this.Da=l&&l.Zb||!1,this.J=void 0,this.H=l&&l.supportsCrossDomainXhr||!1,this.I="",this.h=new _n(l&&l.concurrentRequestLimit),this.Fa=new kt,this.O=l&&l.fastHandshake||!1,this.N=l&&l.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=l&&l.Xb||!1,l&&l.Aa&&this.j.Aa(),l&&l.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&l&&l.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function fa(l){if(Ns(l),3==l.G){var n=l.U++,s=Xr(l.F);nr(s,"SID",l.I),nr(s,"RID",n),nr(s,"TYPE","terminate"),mo(l,s),(n=new Di(l,l.j,n,void 0)).K=2,n.v=Hs(Xr(s)),s=!1,fe.navigator&&fe.navigator.sendBeacon&&(s=fe.navigator.sendBeacon(n.v.toString(),"")),!s&&fe.Image&&((new Image).src=n.v,s=!0),s||(n.g=hl(n.l,null),n.g.da(n.v)),n.F=Date.now(),Rs(n)}Oa(l)}function pa(l){l.g&&(ea(l),l.g.cancel(),l.g=null)}function Ns(l){pa(l),l.u&&(fe.clearTimeout(l.u),l.u=null),So(l),l.h.cancel(),l.m&&("number"==typeof l.m&&fe.clearTimeout(l.m),l.m=null)}function Xs(l){Fn(l.h)||l.m||(l.m=!0,ue(l.Ja,l),l.C=0)}function Ao(l,n){var s;s=n?n.m:l.U++;const d=Xr(l.F);nr(d,"SID",l.I),nr(d,"RID",s),nr(d,"AID",l.T),mo(l,d),l.o&&l.s&&Zo(d,l.o,l.s),s=new Di(l,l.j,s,l.C+1),null===l.o&&(s.H=l.s),n&&(l.i=n.D.concat(l.i)),n=cl(l,s,1e3),s.setTimeout(Math.round(.5*l.ta)+Math.round(.5*l.ta*Math.random())),$(l.h,s),zr(s,d,n)}function mo(l,n){l.ia&&Zi(l.ia,function(s,d){nr(n,d,s)}),l.l&&da({},function(s,d){nr(n,d,s)})}function cl(l,n,s){s=Math.min(l.i.length,s);var d=l.l?Ue(l.l.Ra,l.l,l):null;e:{var p=l.i;let v=-1;for(;;){const T=["count="+s];-1==v?0<s?(v=p[0].h,T.push("ofs="+v)):v=0:T.push("ofs="+v);let O=!0;for(let z=0;z<s;z++){let ee=p[z].h;const me=p[z].g;if(ee-=v,0>ee)v=Math.max(0,p[z].h-100),O=!1;else try{cn(me,T,"req"+ee+"_")}catch(Re){d&&d(me)}}if(O){d=T.join("&");break e}}}return l=l.i.splice(0,s),n.D=l,d}function Qa(l){l.g||l.u||(l.Z=1,ue(l.Ia,l),l.A=0)}function Bl(l){return!(l.g||l.u||3<=l.A||(l.Z++,l.u=ar(Ue(l.Ia,l),ga(l,l.A)),l.A++,0))}function ea(l){null!=l.B&&(fe.clearTimeout(l.B),l.B=null)}function Ma(l){l.g=new Di(l,l.j,"rpc",l.Z),null===l.o&&(l.g.H=l.s),l.g.N=0;var n=Xr(l.sa);nr(n,"RID","rpc"),nr(n,"SID",l.I),nr(n,"CI",l.L?"0":"1"),nr(n,"AID",l.T),nr(n,"TYPE","xmlhttp"),mo(l,n),l.o&&l.s&&Zo(n,l.o,l.s),l.J&&l.g.setTimeout(l.J);var s=l.g;l=l.ka,s.K=1,s.v=Hs(Xr(n)),s.s=null,s.P=!0,Ia(s,l)}function So(l){null!=l.v&&(fe.clearTimeout(l.v),l.v=null)}function ul(l,n){var s=null;if(l.g==n){So(l),ea(l),l.g=null;var d=2}else{if(!se(l.h,n))return;s=n.D,le(l.h,n),d=1}if(0!=l.G)if(l.pa=n.Y,n.i)if(1==d){s=n.s?n.s.length:0,n=Date.now()-n.F;var p=l.C;dn(d=vi(),new _r(d,s,n,p)),Xs(l)}else Qa(l);else if(3==(p=n.o)||0==p&&0<l.pa||!(1==d&&function lc(l,n){return!(B(l.h)>=l.h.j-(l.m?1:0)||(l.m?(l.i=n.D.concat(l.i),0):1==l.G||2==l.G||l.C>=(l.Za?0:l.$a)||(l.m=ar(Ue(l.Ja,l,n),ga(l,l.C)),l.C++,0)))}(l,n)||2==d&&Bl(l)))switch(s&&0<s.length&&(n=l.h,n.i=n.i.concat(s)),p){case 1:xa(l,5);break;case 4:xa(l,10);break;case 3:xa(l,6);break;default:xa(l,2)}}function ga(l,n){let s=l.Xa+Math.floor(Math.random()*l.bb);return l.l||(s*=2),s*n}function xa(l,n){if(l.j.info("Error code "+n),2==n){var s=null;l.l&&(s=null);var d=Ue(l.kb,l);s||(s=new Kr("//www.google.com/images/cleardot.gif"),fe.location&&"http"==fe.location.protocol||ks(s,"https"),Hs(s)),function ri(l,n){const s=new Zn;if(fe.Image){const d=new Image;d.onload=vt(pi,s,d,"TestLoadImage: loaded",!0,n),d.onerror=vt(pi,s,d,"TestLoadImage: error",!1,n),d.onabort=vt(pi,s,d,"TestLoadImage: abort",!1,n),d.ontimeout=vt(pi,s,d,"TestLoadImage: timeout",!1,n),fe.setTimeout(function(){d.ontimeout&&d.ontimeout()},1e4),d.src=l}else n(!1)}(s.toString(),d)}else $i(2);l.G=0,l.l&&l.l.va(n),Oa(l),Ns(l)}function Oa(l){if(l.G=0,l.la=[],l.l){const n=Oe(l.h);(0!=n.length||0!=l.i.length)&&(Ne(l.la,n),Ne(l.la,l.i),l.h.i.length=0,it(l.i),l.i.length=0),l.l.ua()}}function dl(l,n,s){var d=s instanceof Kr?Xr(s):new Kr(s,void 0);if(""!=d.g)n&&(d.g=n+"."+d.g),Ps(d,d.m);else{var p=fe.location;d=p.protocol,n=n?n+"."+p.hostname:p.hostname,p=+p.port;var v=new Kr(null,void 0);d&&ks(v,d),n&&(v.g=n),p&&Ps(v,p),s&&(v.l=s),d=v}return n=l.za,(s=l.D)&&n&&nr(d,s,n),nr(d,"VER",l.ma),mo(l,d),d}function hl(l,n,s){if(n&&!l.H)throw Error("Can't create secondary domain capable XhrIo object.");return(n=new qi(s&&l.Da&&!l.ra?new si({jb:!0}):l.ra)).Ka(l.H),n}function ma(){}function _a(){if(Nn&&!(10<=Number(hi)))throw Error("Environmental error: no available transport.")}function Zs(l,n){fn.call(this),this.g=new Ll(n),this.l=l,this.h=n&&n.messageUrlParams||null,l=n&&n.messageHeaders||null,n&&n.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.s=l,l=n&&n.initMessageHeaders||null,n&&n.messageContentType&&(l?l["X-WebChannel-Content-Type"]=n.messageContentType:l={"X-WebChannel-Content-Type":n.messageContentType}),n&&n.ya&&(l?l["X-WebChannel-Client-Profile"]=n.ya:l={"X-WebChannel-Client-Profile":n.ya}),this.g.S=l,(l=n&&n.Yb)&&!dt(l)&&(this.g.o=l),this.A=n&&n.supportsCrossDomainXhr||!1,this.v=n&&n.sendRawJson||!1,(n=n&&n.httpSessionIdParam)&&!dt(n)&&(this.g.D=n,null!==(l=this.h)&&n in l&&n in(l=this.h)&&delete l[n]),this.j=new ta(this)}function Ra(l){mn.call(this);var n=l.__sm__;if(n){e:{for(const s in n){l=s;break e}l=void 0}(this.i=l)&&(l=this.i,n=null!==n&&l in n?n[l]:void 0),this.data=n}else this.data=l}function Vl(){ei.call(this),this.status=1}function ta(l){this.g=l}(pe=qi.prototype).Ka=function(l){this.L=l},pe.da=function(l,n,s,d){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+l);n=n?n.toUpperCase():"GET",this.H=l,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():dr.g(),this.C=function Xe(l){return l.h||(l.h=l.i())}(this.u?this.u:dr),this.g.onreadystatechange=Ue(this.Ha,this);try{this.F=!0,this.g.open(n,String(l),!0),this.F=!1}catch(v){return void Y(this,v)}if(l=s||"",s=new Map(this.headers),d)if(Object.getPrototypeOf(d)===Object.prototype)for(var p in d)s.set(p,d[p]);else{if("function"!=typeof d.keys||"function"!=typeof d.get)throw Error("Unknown input type for opt_headers: "+String(d));for(const v of d.keys())s.set(v,d.get(v))}d=Array.from(s.keys()).find(v=>"content-type"==v.toLowerCase()),p=fe.FormData&&l instanceof fe.FormData,!(0<=At(j,n))||d||p||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[v,T]of s)this.g.setRequestHeader(v,T);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ts(this),0<this.B&&((this.K=function F(l){return Nn&&function Ei(){return function $t(l){var n=Ki;return Object.prototype.hasOwnProperty.call(n,9)?n[9]:n[9]=l(9)}(function(){let l=0;const n=wt(String(Kt)).split("."),s=wt("9").split("."),d=Math.max(n.length,s.length);for(let T=0;0==l&&T<d;T++){var p=n[T]||"",v=s[T]||"";do{if(p=/(\d*)(\D*)(.*)/.exec(p)||["","","",""],v=/(\d*)(\D*)(.*)/.exec(v)||["","","",""],0==p[0].length&&0==v[0].length)break;l=at(0==p[1].length?0:parseInt(p[1],10),0==v[1].length?0:parseInt(v[1],10))||at(0==p[2].length,0==v[2].length)||at(p[2],v[2]),p=p[3],v=v[3]}while(0==l)}return 0<=l})}()&&"number"==typeof l.timeout&&void 0!==l.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ue(this.qa,this)):this.A=Mt(this.qa,this.B,this)),this.v=!0,this.g.send(l),this.v=!1}catch(v){Y(this,v)}},pe.qa=function(){void 0!==ke&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,dn(this,"timeout"),this.abort(8))},pe.abort=function(l){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=l||7,dn(this,"complete"),dn(this,"abort"),oi(this))},pe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),oi(this,!0)),qi.X.M.call(this)},pe.Ha=function(){this.s||(this.F||this.v||this.l?Ln(this):this.fb())},pe.fb=function(){Ln(this)},pe.aa=function(){try{return 2<Pr(this)?this.g.status:-1}catch(l){return-1}},pe.fa=function(){try{return this.g?this.g.responseText:""}catch(l){return""}},pe.Sa=function(l){if(this.g){var n=this.g.responseText;return l&&0==n.indexOf(l)&&(n=n.substring(l.length)),kr(n)}},pe.Ea=function(){return this.m},pe.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(pe=Ll.prototype).ma=8,pe.G=1,pe.Ja=function(l){if(this.m)if(this.m=null,1==this.G){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const p=new Di(this,this.j,l,void 0);let v=this.s;if(this.S&&(v?(v=Ai(v),tr(v,this.S)):v=this.S),null!==this.o||this.N||(p.H=v,v=null),this.O)e:{for(var n=0,s=0;s<this.i.length;s++){var d=this.i[s];if(void 0===(d="__data__"in d.g&&"string"==typeof(d=d.g.__data__)?d.length:void 0))break;if(4096<(n+=d)){n=s;break e}if(4096===n||s===this.i.length-1){n=s+1;break e}}n=1e3}else n=1e3;n=cl(this,p,n),nr(s=Xr(this.F),"RID",l),nr(s,"CVER",22),this.D&&nr(s,"X-HTTP-Session-Id",this.D),mo(this,s),v&&(this.N?n="headers="+encodeURIComponent(String(Io(v)))+"&"+n:this.o&&Zo(s,this.o,v)),$(this.h,p),this.Ya&&nr(s,"TYPE","init"),this.O?(nr(s,"$req",n),nr(s,"SID","null"),p.Z=!0,zr(p,s,null)):zr(p,s,n),this.G=2}}else 3==this.G&&(l?Ao(this,l):0==this.i.length||Fn(this.h)||Ao(this))},pe.Ia=function(){if(this.u=null,Ma(this),this.$&&!(this.K||null==this.g||0>=this.P)){var l=2*this.P;this.j.info("BP detection timer enabled: "+l),this.B=ar(Ue(this.eb,this),l)}},pe.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,$i(10),pa(this),Ma(this))},pe.cb=function(){null!=this.v&&(this.v=null,pa(this),Bl(this),$i(19))},pe.kb=function(l){l?(this.j.info("Successfully pinged google.com"),$i(2)):(this.j.info("Failed to ping google.com"),$i(1))},(pe=ma.prototype).xa=function(){},pe.wa=function(){},pe.va=function(){},pe.ua=function(){},pe.Ra=function(){},_a.prototype.g=function(l,n){return new Zs(l,n)},Pe(Zs,fn),Zs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var l=this.g,n=this.l,s=this.h||void 0;$i(0),l.V=n,l.ia=s||{},l.L=l.Y,l.F=dl(l,null,l.V),Xs(l)},Zs.prototype.close=function(){fa(this.g)},Zs.prototype.u=function(l){var n=this.g;if("string"==typeof l){var s={};s.__data__=l,l=s}else this.v&&((s={}).__data__=xe(l),l=s);n.i.push(new class{constructor(l,n){this.h=l,this.g=n}}(n.ab++,l)),3==n.G&&Xs(n)},Zs.prototype.M=function(){this.g.l=null,delete this.j,fa(this.g),delete this.g,Zs.X.M.call(this)},Pe(Ra,mn),Pe(Vl,ei),Pe(ta,ma),ta.prototype.xa=function(){dn(this.g,"a")},ta.prototype.wa=function(l){dn(this.g,new Ra(l))},ta.prototype.va=function(l){dn(this.g,new Vl(l))},ta.prototype.ua=function(){dn(this.g,"b")},_a.prototype.createWebChannel=_a.prototype.g,Zs.prototype.send=Zs.prototype.u,Zs.prototype.open=Zs.prototype.m,Zs.prototype.close=Zs.prototype.close,qr.NO_ERROR=0,qr.TIMEOUT=8,qr.HTTP_ERROR=6,Ke.COMPLETE="complete",St.EventType=zt,zt.OPEN="a",zt.CLOSE="b",zt.ERROR="c",zt.MESSAGE="d",fn.prototype.listen=fn.prototype.N,qi.prototype.listenOnce=qi.prototype.O,qi.prototype.getLastError=qi.prototype.Oa,qi.prototype.getLastErrorCode=qi.prototype.Ea,qi.prototype.getStatus=qi.prototype.aa,qi.prototype.getResponseJson=qi.prototype.Sa,qi.prototype.getResponseText=qi.prototype.fa,qi.prototype.send=qi.prototype.da,qi.prototype.setWithCredentials=qi.prototype.Ka;var Ls=Ge.createWebChannelTransport=function(){return new _a},Wo=Ge.getStatEventTarget=function(){return vi()},Nr=Ge.ErrorCode=qr,cc=Ge.EventType=Ke,Hc=Ge.Event=xn,uc=Ge.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},gd=Ge.FetchXmlHttpFactory=si,ns=Ge.WebChannel=St,md=Ge.XhrIo=qi;const na="@firebase/firestore";class br{constructor(n){this.uid=n}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(n){return n.uid===this.uid}}br.UNAUTHENTICATED=new br(null),br.GOOGLE_CREDENTIALS=new br("google-credentials-uid"),br.FIRST_PARTY=new br("first-party-uid"),br.MOCK_USER=new br("mock-user");let eo="9.12.1";const Ws=new Ee.Yd("@firebase/firestore");function Ja(){return Ws.logLevel}function xu(l){Ws.setLogLevel(l)}function Wt(l,...n){if(Ws.logLevel<=Ee.in.DEBUG){const s=n.map(Ul);Ws.debug(`Firestore (${eo}): ${l}`,...s)}}function Mi(l,...n){if(Ws.logLevel<=Ee.in.ERROR){const s=n.map(Ul);Ws.error(`Firestore (${eo}): ${l}`,...s)}}function No(l,...n){if(Ws.logLevel<=Ee.in.WARN){const s=n.map(Ul);Ws.warn(`Firestore (${eo}): ${l}`,...s)}}function Ul(l){if("string"==typeof l)return l;try{return JSON.stringify(l)}catch(s){return l}}function An(l="Unexpected state"){const n=`FIRESTORE (${eo}) INTERNAL ASSERTION FAILED: `+l;throw Mi(n),new Error(n)}function di(l,n){l||An()}function Mo(l,n){l||An()}function En(l,n){return l}const Ct={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class en extends Ie.ZR{constructor(n,s){super(n,s),this.code=n,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class is{constructor(){this.promise=new Promise((n,s)=>{this.resolve=n,this.reject=s})}}class dc{constructor(n,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${n}`)}}class Gc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(n,s){n.enqueueRetryable(()=>s(br.UNAUTHENTICATED))}shutdown(){}}class qs{constructor(n){this.token=n,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(n,s){this.changeListener=s,n.enqueueRetryable(()=>s(this.token.user))}shutdown(){this.changeListener=null}}class Zc{constructor(n){this.t=n,this.currentUser=br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(n,s){var d=this;let p=this.i;const v=ee=>this.i!==p?(p=this.i,s(ee)):Promise.resolve();let T=new is;this.o=()=>{this.i++,this.currentUser=this.u(),T.resolve(),T=new is,n.enqueueRetryable(()=>v(this.currentUser))};const O=()=>{const ee=T;n.enqueueRetryable((0,_.Z)(function*(){yield ee.promise,yield v(d.currentUser)}))},z=ee=>{Wt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=ee,this.auth.addAuthTokenListener(this.o),O()};this.t.onInit(ee=>z(ee)),setTimeout(()=>{if(!this.auth){const ee=this.t.getImmediate({optional:!0});ee?z(ee):(Wt("FirebaseAuthCredentialsProvider","Auth not yet detected"),T.resolve(),T=new is)}},0),O()}getToken(){const n=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(d=>this.i!==n?(Wt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):d?(di("string"==typeof d.accessToken),new dc(d.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const n=this.auth&&this.auth.getUid();return di(null===n||"string"==typeof n),new br(n)}}class _d{constructor(n,s,d,p){this.h=n,this.l=s,this.m=d,this.g=p,this.type="FirstParty",this.user=br.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(di(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const n=this.I();return n&&this.p.set("Authorization",n),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class fl{constructor(n,s,d,p){this.h=n,this.l=s,this.m=d,this.g=p}getToken(){return Promise.resolve(new _d(this.h,this.l,this.m,this.g))}start(n,s){n.enqueueRetryable(()=>s(br.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wc{constructor(n){this.value=n,this.type="AppCheck",this.headers=new Map,n&&n.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ka{constructor(n){this.T=n,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(n,s){const d=v=>{null!=v.error&&Wt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${v.error.message}`);const T=v.token!==this.A;return this.A=v.token,Wt("FirebaseAppCheckTokenProvider",`Received ${T?"new":"existing"} token.`),T?s(v.token):Promise.resolve()};this.o=v=>{n.enqueueRetryable(()=>d(v))};const p=v=>{Wt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=v,this.appCheck.addTokenListener(this.o)};this.T.onInit(v=>p(v)),setTimeout(()=>{if(!this.appCheck){const v=this.T.getImmediate({optional:!0});v?p(v):Wt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const n=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(n).then(s=>s?(di("string"==typeof s.token),this.A=s.token,new Wc(s.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function jl(l){const n="undefined"!=typeof self&&(self.crypto||self.msCrypto),s=new Uint8Array(l);if(n&&"function"==typeof n.getRandomValues)n.getRandomValues(s);else for(let d=0;d<l;d++)s[d]=Math.floor(256*Math.random());return s}class yd{static R(){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/n.length)*n.length;let d="";for(;d.length<20;){const p=jl(40);for(let v=0;v<p.length;++v)d.length<20&&p[v]<s&&(d+=n.charAt(p[v]%n.length))}return d}}function bi(l,n){return l<n?-1:l>n?1:0}function ia(l,n,s){return l.length===n.length&&l.every((d,p)=>s(d,n[p]))}function k(l){return l+"\0"}class M{constructor(n,s){if(this.seconds=n,this.nanoseconds=s,s<0)throw new en(Ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new en(Ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(n<-62135596800)throw new en(Ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new en(Ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}static now(){return M.fromMillis(Date.now())}static fromDate(n){return M.fromMillis(n.getTime())}static fromMillis(n){const s=Math.floor(n/1e3),d=Math.floor(1e6*(n-1e3*s));return new M(s,d)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(n){return this.seconds===n.seconds?bi(this.nanoseconds,n.nanoseconds):bi(this.seconds,n.seconds)}isEqual(n){return n.seconds===this.seconds&&n.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class I{constructor(n){this.timestamp=n}static fromTimestamp(n){return new I(n)}static min(){return new I(new M(0,0))}static max(){return new I(new M(253402300799,999999999))}compareTo(n){return this.timestamp._compareTo(n.timestamp)}isEqual(n){return this.timestamp.isEqual(n.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class U{constructor(n,s,d){void 0===s?s=0:s>n.length&&An(),void 0===d?d=n.length-s:d>n.length-s&&An(),this.segments=n,this.offset=s,this.len=d}get length(){return this.len}isEqual(n){return 0===U.comparator(this,n)}child(n){const s=this.segments.slice(this.offset,this.limit());return n instanceof U?n.forEach(d=>{s.push(d)}):s.push(n),this.construct(s)}limit(){return this.offset+this.length}popFirst(n){return this.construct(this.segments,this.offset+(n=void 0===n?1:n),this.length-n)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(n){return this.segments[this.offset+n]}isEmpty(){return 0===this.length}isPrefixOf(n){if(n.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==n.get(s))return!1;return!0}isImmediateParentOf(n){if(this.length+1!==n.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==n.get(s))return!1;return!0}forEach(n){for(let s=this.offset,d=this.limit();s<d;s++)n(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(n,s){const d=Math.min(n.length,s.length);for(let p=0;p<d;p++){const v=n.get(p),T=s.get(p);if(v<T)return-1;if(v>T)return 1}return n.length<s.length?-1:n.length>s.length?1:0}}class q extends U{construct(n,s,d){return new q(n,s,d)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...n){const s=[];for(const d of n){if(d.indexOf("//")>=0)throw new en(Ct.INVALID_ARGUMENT,`Invalid segment (${d}). Paths must not contain // in them.`);s.push(...d.split("/").filter(p=>p.length>0))}return new q(s)}static emptyPath(){return new q([])}}const he=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ye extends U{construct(n,s,d){return new ye(n,s,d)}static isValidIdentifier(n){return he.test(n)}canonicalString(){return this.toArray().map(n=>(n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ye.isValidIdentifier(n)||(n="`"+n+"`"),n)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ye(["__name__"])}static fromServerFormat(n){const s=[];let d="",p=0;const v=()=>{if(0===d.length)throw new en(Ct.INVALID_ARGUMENT,`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(d),d=""};let T=!1;for(;p<n.length;){const O=n[p];if("\\"===O){if(p+1===n.length)throw new en(Ct.INVALID_ARGUMENT,"Path has trailing escape character: "+n);const z=n[p+1];if("\\"!==z&&"."!==z&&"`"!==z)throw new en(Ct.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);d+=z,p+=2}else"`"===O?(T=!T,p++):"."!==O||T?(d+=O,p++):(v(),p++)}if(v(),T)throw new en(Ct.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new ye(s)}static emptyPath(){return new ye([])}}class _e{constructor(n){this.path=n}static fromPath(n){return new _e(q.fromString(n))}static fromName(n){return new _e(q.fromString(n).popFirst(5))}static empty(){return new _e(q.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(n){return this.path.length>=2&&this.path.get(this.path.length-2)===n}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(n){return null!==n&&0===q.comparator(this.path,n.path)}toString(){return this.path.toString()}static comparator(n,s){return q.comparator(n.path,s.path)}static isDocumentKey(n){return n.length%2==0}static fromSegments(n){return new _e(new q(n.slice()))}}class xt{constructor(n,s,d,p){this.indexId=n,this.collectionGroup=s,this.fields=d,this.indexState=p}}function Sn(l){return l.fields.find(n=>2===n.kind)}function Ii(l){return l.fields.filter(n=>2!==n.kind)}xt.UNKNOWN_ID=-1;class ir{constructor(n,s){this.fieldPath=n,this.kind=s}}class zs{constructor(n,s){this.sequenceNumber=n,this.offset=s}static empty(){return new zs(0,fr.min())}}function Fr(l,n){const s=l.toTimestamp().seconds,d=l.toTimestamp().nanoseconds+1,p=I.fromTimestamp(1e9===d?new M(s+1,0):new M(s,d));return new fr(p,_e.empty(),n)}function _o(l){return new fr(l.readTime,l.key,-1)}class fr{constructor(n,s,d){this.readTime=n,this.documentKey=s,this.largestBatchId=d}static min(){return new fr(I.min(),_e.empty(),-1)}static max(){return new fr(I.max(),_e.empty(),-1)}}function ya(l,n){let s=l.readTime.compareTo(n.readTime);return 0!==s?s:(s=_e.comparator(l.documentKey,n.documentKey),0!==s?s:bi(l.largestBatchId,n.largestBatchId))}const Bs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(n){this.onCommittedListeners.push(n)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(n=>n())}}function Oo(l){return rs.apply(this,arguments)}function rs(){return rs=(0,_.Z)(function*(l){if(l.code!==Ct.FAILED_PRECONDITION||l.message!==Bs)throw l;Wt("LocalStore","Unexpectedly lost primary lease")}),rs.apply(this,arguments)}class ut{constructor(n){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n(s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)},s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)})}catch(n){return this.next(void 0,n)}next(n,s){return this.callbackAttached&&An(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(n,this.result):new ut((d,p)=>{this.nextCallback=v=>{this.wrapSuccess(n,v).next(d,p)},this.catchCallback=v=>{this.wrapFailure(s,v).next(d,p)}})}toPromise(){return new Promise((n,s)=>{this.next(n,s)})}wrapUserFunction(n){try{const s=n();return s instanceof ut?s:ut.resolve(s)}catch(s){return ut.reject(s)}}wrapSuccess(n,s){return n?this.wrapUserFunction(()=>n(s)):ut.resolve(s)}wrapFailure(n,s){return n?this.wrapUserFunction(()=>n(s)):ut.reject(s)}static resolve(n){return new ut((s,d)=>{s(n)})}static reject(n){return new ut((s,d)=>{d(n)})}static waitFor(n){return new ut((s,d)=>{let p=0,v=0,T=!1;n.forEach(O=>{++p,O.next(()=>{++v,T&&v===p&&s()},z=>d(z))}),T=!0,v===p&&s()})}static or(n){let s=ut.resolve(!1);for(const d of n)s=s.next(p=>p?ut.resolve(p):d());return s}static forEach(n,s){const d=[];return n.forEach((p,v)=>{d.push(s.call(this,p,v))}),this.waitFor(d)}static mapArray(n,s){return new ut((d,p)=>{const v=n.length,T=new Array(v);let O=0;for(let z=0;z<v;z++){const ee=z;s(n[ee]).next(me=>{T[ee]=me,++O,O===v&&d(T)},me=>p(me))}})}static doWhile(n,s){return new ut((d,p)=>{const v=()=>{!0===n()?s().next(()=>{v()},p):d()};v()})}}class qo{constructor(n,s){this.action=n,this.transaction=s,this.aborted=!1,this.P=new is,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{s.error?this.P.reject(new Pa(n,s.error)):this.P.resolve()},this.transaction.onerror=d=>{const p=qc(d.target.error);this.P.reject(new Pa(n,p))}}static open(n,s,d,p){try{return new qo(s,n.transaction(p,d))}catch(v){throw new Pa(s,v)}}get v(){return this.P.promise}abort(n){n&&this.P.reject(n),this.aborted||(Wt("SimpleDb","Aborting transaction:",n?n.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const n=this.transaction;this.aborted||"function"!=typeof n.commit||n.commit()}store(n){const s=this.transaction.objectStore(n);return new Fa(s)}}class to{constructor(n,s,d){this.name=n,this.version=s,this.S=d,12.2===to.D((0,Ie.z$)())&&Mi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(n){return Wt("SimpleDb","Removing database:",n),Ro(window.indexedDB.deleteDatabase(n)).toPromise()}static C(){if(!(0,Ie.hl)())return!1;if(to.N())return!0;const n=(0,Ie.z$)(),s=to.D(n),d=0<s&&s<10,p=to.k(n),v=0<p&&p<4.5;return!(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0||n.indexOf("Edge/")>0||d||v)}static N(){var n;return"undefined"!=typeof process&&"YES"===(null===(n=process.env)||void 0===n?void 0:n.O)}static M(n,s){return n.store(s)}static D(n){const s=n.match(/i(?:phone|pad|pod) os ([\d_]+)/i),d=s?s[1].split("_").slice(0,2).join("."):"-1";return Number(d)}static k(n){const s=n.match(/Android ([\d.]+)/i),d=s?s[1].split(".").slice(0,2).join("."):"-1";return Number(d)}F(n){var s=this;return(0,_.Z)(function*(){return s.db||(Wt("SimpleDb","Opening database:",s.name),s.db=yield new Promise((d,p)=>{const v=indexedDB.open(s.name,s.version);v.onsuccess=T=>{d(T.target.result)},v.onblocked=()=>{p(new Pa(n,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},v.onerror=T=>{const O=T.target.error;p("VersionError"===O.name?new en(Ct.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===O.name?new en(Ct.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+O):new Pa(n,O))},v.onupgradeneeded=T=>{Wt("SimpleDb",'Database "'+s.name+'" requires upgrade from version:',T.oldVersion),s.S.$(T.target.result,v.transaction,T.oldVersion,s.version).next(()=>{Wt("SimpleDb","Database upgrade to version "+s.version+" complete")})}})),s.B&&(s.db.onversionchange=d=>s.B(d)),s.db})()}L(n){this.B=n,this.db&&(this.db.onversionchange=s=>n(s))}runTransaction(n,s,d,p){var v=this;return(0,_.Z)(function*(){const T="readonly"===s;let O=0;for(;;){++O;try{v.db=yield v.F(n);const z=qo.open(v.db,n,T?"readonly":"readwrite",d),ee=p(z).next(me=>(z.V(),me)).catch(me=>(z.abort(me),ut.reject(me))).toPromise();return ee.catch(()=>{}),yield z.v,ee}catch(z){const ee=z,me="FirebaseError"!==ee.name&&O<3;if(Wt("SimpleDb","Transaction failed with error:",ee.message,"Retrying:",me),v.close(),!me)return Promise.reject(ee)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class pl{constructor(n){this.U=n,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(n){this.U=n}done(){this.q=!0}j(n){this.K=n}delete(){return Ro(this.U.delete())}}class Pa extends en{constructor(n,s){super(Ct.UNAVAILABLE,`IndexedDB transaction '${n}' failed: ${s}`),this.name="IndexedDbTransactionError"}}function yo(l){return"IndexedDbTransactionError"===l.name}class Fa{constructor(n){this.store=n}put(n,s){let d;return void 0!==s?(Wt("SimpleDb","PUT",this.store.name,n,s),d=this.store.put(s,n)):(Wt("SimpleDb","PUT",this.store.name,"<auto-key>",n),d=this.store.put(n)),Ro(d)}add(n){return Wt("SimpleDb","ADD",this.store.name,n,n),Ro(this.store.add(n))}get(n){return Ro(this.store.get(n)).next(s=>(void 0===s&&(s=null),Wt("SimpleDb","GET",this.store.name,n,s),s))}delete(n){return Wt("SimpleDb","DELETE",this.store.name,n),Ro(this.store.delete(n))}count(){return Wt("SimpleDb","COUNT",this.store.name),Ro(this.store.count())}W(n,s){const d=this.options(n,s);if(d.index||"function"!=typeof this.store.getAll){const p=this.cursor(d),v=[];return this.H(p,(T,O)=>{v.push(O)}).next(()=>v)}{const p=this.store.getAll(d.range);return new ut((v,T)=>{p.onerror=O=>{T(O.target.error)},p.onsuccess=O=>{v(O.target.result)}})}}J(n,s){const d=this.store.getAll(n,null===s?void 0:s);return new ut((p,v)=>{d.onerror=T=>{v(T.target.error)},d.onsuccess=T=>{p(T.target.result)}})}Y(n,s){Wt("SimpleDb","DELETE ALL",this.store.name);const d=this.options(n,s);d.X=!1;const p=this.cursor(d);return this.H(p,(v,T,O)=>O.delete())}Z(n,s){let d;s?d=n:(d={},s=n);const p=this.cursor(d);return this.H(p,s)}tt(n){const s=this.cursor({});return new ut((d,p)=>{s.onerror=v=>{const T=qc(v.target.error);p(T)},s.onsuccess=v=>{const T=v.target.result;T?n(T.primaryKey,T.value).next(O=>{O?T.continue():d()}):d()}})}H(n,s){const d=[];return new ut((p,v)=>{n.onerror=T=>{v(T.target.error)},n.onsuccess=T=>{const O=T.target.result;if(!O)return void p();const z=new pl(O),ee=s(O.primaryKey,O.value,z);if(ee instanceof ut){const me=ee.catch(Re=>(z.done(),ut.reject(Re)));d.push(me)}z.isDone?p():null===z.G?O.continue():O.continue(z.G)}}).next(()=>ut.waitFor(d))}options(n,s){let d;return void 0!==n&&("string"==typeof n?d=n:s=n),{index:d,range:s}}cursor(n){let s="next";if(n.reverse&&(s="prev"),n.index){const d=this.store.index(n.index);return n.X?d.openKeyCursor(n.range,s):d.openCursor(n.range,s)}return this.store.openCursor(n.range,s)}}function Ro(l){return new ut((n,s)=>{l.onsuccess=d=>{n(d.target.result)},l.onerror=d=>{const p=qc(d.target.error);s(p)}})}let Ui=!1;function qc(l){const n=to.D((0,Ie.z$)());if(n>=12.2&&n<13){const s="An internal error was encountered in the Indexed Database server";if(l.message.indexOf(s)>=0){const d=new en("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${s}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ui||(Ui=!0,setTimeout(()=>{throw d},0)),d}}return l}class zc{constructor(n,s){this.asyncQueue=n,this.et=s,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(n){var s=this;Wt("IndexBackiller",`Scheduled in ${n}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",n,(0,_.Z)(function*(){s.task=null;try{Wt("IndexBackiller",`Documents written: ${yield s.et.st()}`)}catch(d){yo(d)?Wt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",d):yield Oo(d)}yield s.nt(6e4)}))}}class Ru{constructor(n,s){this.localStore=n,this.persistence=s}st(n=50){var s=this;return(0,_.Z)(function*(){return s.persistence.runTransaction("Backfill Indexes","readwrite-primary",d=>s.it(d,n))})()}it(n,s){const d=new Set;let p=s,v=!0;return ut.doWhile(()=>!0===v&&p>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(n).next(T=>{if(null!==T&&!d.has(T))return Wt("IndexBackiller",`Processing collection: ${T}`),this.rt(n,T,p).next(O=>{p-=O,d.add(T)});v=!1})).next(()=>s-p)}rt(n,s,d){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(n,s).next(p=>this.localStore.localDocuments.getNextDocuments(n,s,p,d).next(v=>{const T=v.changes;return this.localStore.indexManager.updateIndexEntries(n,T).next(()=>this.ot(p,v)).next(O=>(Wt("IndexBackiller",`Updating offset: ${O}`),this.localStore.indexManager.updateCollectionGroup(n,s,O))).next(()=>T.size)}))}ot(n,s){let d=n;return s.changes.forEach((p,v)=>{const T=_o(v);ya(T,d)>0&&(d=T)}),new fr(d.readTime,d.documentKey,Math.max(s.batchId,n.largestBatchId))}}class no{constructor(n,s){this.previousValue=n,s&&(s.sequenceNumberHandler=d=>this.ut(d),this.ct=d=>s.writeSequenceNumber(d))}ut(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ct&&this.ct(n),n}}function ku(l){let n=0;for(const s in l)Object.prototype.hasOwnProperty.call(l,s)&&n++;return n}function La(l,n){for(const s in l)Object.prototype.hasOwnProperty.call(l,s)&&n(s,l[s])}function Kc(l){for(const n in l)if(Object.prototype.hasOwnProperty.call(l,n))return!1;return!0}no.at=-1;class $r{constructor(n,s){this.comparator=n,this.root=s||zi.EMPTY}insert(n,s){return new $r(this.comparator,this.root.insert(n,s,this.comparator).copy(null,null,zi.BLACK,null,null))}remove(n){return new $r(this.comparator,this.root.remove(n,this.comparator).copy(null,null,zi.BLACK,null,null))}get(n){let s=this.root;for(;!s.isEmpty();){const d=this.comparator(n,s.key);if(0===d)return s.value;d<0?s=s.left:d>0&&(s=s.right)}return null}indexOf(n){let s=0,d=this.root;for(;!d.isEmpty();){const p=this.comparator(n,d.key);if(0===p)return s+d.left.size;p<0?d=d.left:(s+=d.left.size+1,d=d.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(n){return this.root.inorderTraversal(n)}forEach(n){this.inorderTraversal((s,d)=>(n(s,d),!1))}toString(){const n=[];return this.inorderTraversal((s,d)=>(n.push(`${s}:${d}`),!1)),`{${n.join(", ")}}`}reverseTraversal(n){return this.root.reverseTraversal(n)}getIterator(){return new hc(this.root,null,this.comparator,!1)}getIteratorFrom(n){return new hc(this.root,n,this.comparator,!1)}getReverseIterator(){return new hc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(n){return new hc(this.root,n,this.comparator,!0)}}class hc{constructor(n,s,d,p){this.isReverse=p,this.nodeStack=[];let v=1;for(;!n.isEmpty();)if(v=s?d(n.key,s):1,s&&p&&(v*=-1),v<0)n=this.isReverse?n.left:n.right;else{if(0===v){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}getNext(){let n=this.nodeStack.pop();const s={key:n.key,value:n.value};if(this.isReverse)for(n=n.left;!n.isEmpty();)this.nodeStack.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack.push(n),n=n.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const n=this.nodeStack[this.nodeStack.length-1];return{key:n.key,value:n.value}}}class zi{constructor(n,s,d,p,v){this.key=n,this.value=s,this.color=null!=d?d:zi.RED,this.left=null!=p?p:zi.EMPTY,this.right=null!=v?v:zi.EMPTY,this.size=this.left.size+1+this.right.size}copy(n,s,d,p,v){return new zi(null!=n?n:this.key,null!=s?s:this.value,null!=d?d:this.color,null!=p?p:this.left,null!=v?v:this.right)}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,s,d){let p=this;const v=d(n,p.key);return p=v<0?p.copy(null,null,null,p.left.insert(n,s,d),null):0===v?p.copy(null,s,null,null,null):p.copy(null,null,null,null,p.right.insert(n,s,d)),p.fixUp()}removeMin(){if(this.left.isEmpty())return zi.EMPTY;let n=this;return n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.removeMin(),null),n.fixUp()}remove(n,s){let d,p=this;if(s(n,p.key)<0)p.left.isEmpty()||p.left.isRed()||p.left.left.isRed()||(p=p.moveRedLeft()),p=p.copy(null,null,null,p.left.remove(n,s),null);else{if(p.left.isRed()&&(p=p.rotateRight()),p.right.isEmpty()||p.right.isRed()||p.right.left.isRed()||(p=p.moveRedRight()),0===s(n,p.key)){if(p.right.isEmpty())return zi.EMPTY;d=p.right.min(),p=p.copy(d.key,d.value,null,null,p.right.removeMin())}p=p.copy(null,null,null,null,p.right.remove(n,s))}return p.fixUp()}isRed(){return this.color}fixUp(){let n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}moveRedLeft(){let n=this.colorFlip();return n.right.left.isRed()&&(n=n.copy(null,null,null,null,n.right.rotateRight()),n=n.rotateLeft(),n=n.colorFlip()),n}moveRedRight(){let n=this.colorFlip();return n.left.left.isRed()&&(n=n.rotateRight(),n=n.colorFlip()),n}rotateLeft(){const n=this.copy(null,null,zi.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight(){const n=this.copy(null,null,zi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip(){const n=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,s)}checkMaxDepth(){const n=this.check();return Math.pow(2,n)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw An();const n=this.left.check();if(n!==this.right.check())throw An();return n+(this.isRed()?0:1)}}zi.EMPTY=null,zi.RED=!0,zi.BLACK=!1,zi.EMPTY=new class{constructor(){this.size=0}get key(){throw An()}get value(){throw An()}get color(){throw An()}get left(){throw An()}get right(){throw An()}copy(l,n,s,d,p){return this}insert(l,n,s){return new zi(l,n)}remove(l,n){return this}isEmpty(){return!0}inorderTraversal(l){return!1}reverseTraversal(l){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Dr{constructor(n){this.comparator=n,this.data=new $r(this.comparator)}has(n){return null!==this.data.get(n)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(n){return this.data.indexOf(n)}forEach(n){this.data.inorderTraversal((s,d)=>(n(s),!1))}forEachInRange(n,s){const d=this.data.getIteratorFrom(n[0]);for(;d.hasNext();){const p=d.getNext();if(this.comparator(p.key,n[1])>=0)return;s(p.key)}}forEachWhile(n,s){let d;for(d=void 0!==s?this.data.getIteratorFrom(s):this.data.getIterator();d.hasNext();)if(!n(d.getNext().key))return}firstAfterOrEqual(n){const s=this.data.getIteratorFrom(n);return s.hasNext()?s.getNext().key:null}getIterator(){return new gl(this.data.getIterator())}getIteratorFrom(n){return new gl(this.data.getIteratorFrom(n))}add(n){return this.copy(this.data.remove(n).insert(n,!0))}delete(n){return this.has(n)?this.copy(this.data.remove(n)):this}isEmpty(){return this.data.isEmpty()}unionWith(n){let s=this;return s.size<n.size&&(s=n,n=this),n.forEach(d=>{s=s.add(d)}),s}isEqual(n){if(!(n instanceof Dr)||this.size!==n.size)return!1;const s=this.data.getIterator(),d=n.data.getIterator();for(;s.hasNext();){const p=s.getNext().key,v=d.getNext().key;if(0!==this.comparator(p,v))return!1}return!0}toArray(){const n=[];return this.forEach(s=>{n.push(s)}),n}toString(){const n=[];return this.forEach(s=>n.push(s)),"SortedSet("+n.toString()+")"}copy(n){const s=new Dr(this.comparator);return s.data=n,s}}class gl{constructor(n){this.iter=n}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Yc(l){return l.hasNext()?l.getNext():void 0}class vo{constructor(n){this.fields=n,n.sort(ye.comparator)}static empty(){return new vo([])}unionWith(n){let s=new Dr(ye.comparator);for(const d of this.fields)s=s.add(d);for(const d of n)s=s.add(d);return new vo(s.toArray())}covers(n){for(const s of this.fields)if(s.isPrefixOf(n))return!0;return!1}isEqual(n){return ia(this.fields,n.fields,(s,d)=>s.isEqual(d))}}function bo(){return"undefined"!=typeof atob}class Lr{constructor(n){this.binaryString=n}static fromBase64String(n){const s=atob(n);return new Lr(s)}static fromUint8Array(n){const s=function(d){let p="";for(let v=0;v<d.length;++v)p+=String.fromCharCode(d[v]);return p}(n);return new Lr(s)}[Symbol.iterator](){let n=0;return{next:()=>n<this.binaryString.length?{value:this.binaryString.charCodeAt(n++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let d=0;d<n.length;d++)s[d]=n.charCodeAt(d);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(n){return bi(this.binaryString,n.binaryString)}isEqual(n){return this.binaryString===n.binaryString}}Lr.EMPTY_BYTE_STRING=new Lr("");const ph=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zo(l){if(di(!!l),"string"==typeof l){let n=0;const s=ph.exec(l);if(di(!!s),s[1]){let p=s[1];p=(p+"000000000").substr(0,9),n=Number(p)}const d=new Date(l);return{seconds:Math.floor(d.getTime()/1e3),nanos:n}}return{seconds:Br(l.seconds),nanos:Br(l.nanos)}}function Br(l){return"number"==typeof l?l:"string"==typeof l?Number(l):0}function ra(l){return"string"==typeof l?Lr.fromBase64String(l):Lr.fromUint8Array(l)}function Qc(l){var n,s;return"server_timestamp"===(null===(s=((null===(n=null==l?void 0:l.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===s?void 0:s.stringValue)}function gh(l){const n=l.mapValue.fields.__previous_value__;return Qc(n)?gh(n):n}function fc(l){const n=zo(l.mapValue.fields.__local_write_time__.timestampValue);return new M(n.seconds,n.nanos)}class Pu{constructor(n,s,d,p,v,T,O,z){this.databaseId=n,this.appId=s,this.persistenceKey=d,this.host=p,this.ssl=v,this.forceLongPolling=T,this.autoDetectLongPolling=O,this.useFetchStreams=z}}class Xa{constructor(n,s){this.projectId=n,this.database=s||"(default)"}static empty(){return new Xa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(n){return n instanceof Xa&&n.projectId===this.projectId&&n.database===this.database}}function Es(l){return null==l}function uo(l){return 0===l&&1/l==-1/0}function va(l){return"number"==typeof l&&Number.isInteger(l)&&!uo(l)&&l<=Number.MAX_SAFE_INTEGER&&l>=Number.MIN_SAFE_INTEGER}const ko={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ba={nullValue:"NULL_VALUE"};function Ba(l){return"nullValue"in l?0:"booleanValue"in l?1:"integerValue"in l||"doubleValue"in l?2:"timestampValue"in l?3:"stringValue"in l?5:"bytesValue"in l?6:"referenceValue"in l?7:"geoPointValue"in l?8:"arrayValue"in l?9:"mapValue"in l?Qc(l)?4:wa(l)?9007199254740991:10:An()}function Ko(l,n){if(l===n)return!0;const s=Ba(l);if(s!==Ba(n))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return l.booleanValue===n.booleanValue;case 4:return fc(l).isEqual(fc(n));case 3:return function(d,p){if("string"==typeof d.timestampValue&&"string"==typeof p.timestampValue&&d.timestampValue.length===p.timestampValue.length)return d.timestampValue===p.timestampValue;const v=zo(d.timestampValue),T=zo(p.timestampValue);return v.seconds===T.seconds&&v.nanos===T.nanos}(l,n);case 5:return l.stringValue===n.stringValue;case 6:return p=n,ra(l.bytesValue).isEqual(ra(p.bytesValue));case 7:return l.referenceValue===n.referenceValue;case 8:return function(d,p){return Br(d.geoPointValue.latitude)===Br(p.geoPointValue.latitude)&&Br(d.geoPointValue.longitude)===Br(p.geoPointValue.longitude)}(l,n);case 2:return function(d,p){if("integerValue"in d&&"integerValue"in p)return Br(d.integerValue)===Br(p.integerValue);if("doubleValue"in d&&"doubleValue"in p){const v=Br(d.doubleValue),T=Br(p.doubleValue);return v===T?uo(v)===uo(T):isNaN(v)&&isNaN(T)}return!1}(l,n);case 9:return ia(l.arrayValue.values||[],n.arrayValue.values||[],Ko);case 10:return function(d,p){const v=d.mapValue.fields||{},T=p.mapValue.fields||{};if(ku(v)!==ku(T))return!1;for(const O in v)if(v.hasOwnProperty(O)&&(void 0===T[O]||!Ko(v[O],T[O])))return!1;return!0}(l,n);default:return An()}var p}function ml(l,n){return void 0!==(l.values||[]).find(s=>Ko(s,n))}function sa(l,n){if(l===n)return 0;const s=Ba(l),d=Ba(n);if(s!==d)return bi(s,d);switch(s){case 0:case 9007199254740991:return 0;case 1:return bi(l.booleanValue,n.booleanValue);case 2:return function(p,v){const T=Br(p.integerValue||p.doubleValue),O=Br(v.integerValue||v.doubleValue);return T<O?-1:T>O?1:T===O?0:isNaN(T)?isNaN(O)?0:-1:1}(l,n);case 3:return pc(l.timestampValue,n.timestampValue);case 4:return pc(fc(l),fc(n));case 5:return bi(l.stringValue,n.stringValue);case 6:return function(p,v){const T=ra(p),O=ra(v);return T.compareTo(O)}(l.bytesValue,n.bytesValue);case 7:return function(p,v){const T=p.split("/"),O=v.split("/");for(let z=0;z<T.length&&z<O.length;z++){const ee=bi(T[z],O[z]);if(0!==ee)return ee}return bi(T.length,O.length)}(l.referenceValue,n.referenceValue);case 8:return function(p,v){const T=bi(Br(p.latitude),Br(v.latitude));return 0!==T?T:bi(Br(p.longitude),Br(v.longitude))}(l.geoPointValue,n.geoPointValue);case 9:return function(p,v){const T=p.values||[],O=v.values||[];for(let z=0;z<T.length&&z<O.length;++z){const ee=sa(T[z],O[z]);if(ee)return ee}return bi(T.length,O.length)}(l.arrayValue,n.arrayValue);case 10:return function(p,v){if(p===ko.mapValue&&v===ko.mapValue)return 0;if(p===ko.mapValue)return 1;if(v===ko.mapValue)return-1;const T=p.fields||{},O=Object.keys(T),z=v.fields||{},ee=Object.keys(z);O.sort(),ee.sort();for(let me=0;me<O.length&&me<ee.length;++me){const Re=bi(O[me],ee[me]);if(0!==Re)return Re;const gt=sa(T[O[me]],z[ee[me]]);if(0!==gt)return gt}return bi(O.length,ee.length)}(l.mapValue,n.mapValue);default:throw An()}}function pc(l,n){if("string"==typeof l&&"string"==typeof n&&l.length===n.length)return bi(l,n);const s=zo(l),d=zo(n),p=bi(s.seconds,d.seconds);return 0!==p?p:bi(s.nanos,d.nanos)}function $l(l){return Ea(l)}function Ea(l){return"nullValue"in l?"null":"booleanValue"in l?""+l.booleanValue:"integerValue"in l?""+l.integerValue:"doubleValue"in l?""+l.doubleValue:"timestampValue"in l?function(d){const p=zo(d);return`time(${p.seconds},${p.nanos})`}(l.timestampValue):"stringValue"in l?l.stringValue:"bytesValue"in l?ra(l.bytesValue).toBase64():"referenceValue"in l?_e.fromName(l.referenceValue).toString():"geoPointValue"in l?`geo(${(n=l.geoPointValue).latitude},${n.longitude})`:"arrayValue"in l?function(d){let p="[",v=!0;for(const T of d.values||[])v?v=!1:p+=",",p+=Ea(T);return p+"]"}(l.arrayValue):"mapValue"in l?function(d){const p=Object.keys(d.fields||{}).sort();let v="{",T=!0;for(const O of p)T?T=!1:v+=",",v+=`${O}:${Ea(d.fields[O])}`;return v+"}"}(l.mapValue):An();var n}function Ca(l,n){return{referenceValue:`projects/${l.projectId}/databases/${l.database}/documents/${n.path.canonicalString()}`}}function Fu(l){return!!l&&"integerValue"in l}function Ta(l){return!!l&&"arrayValue"in l}function el(l){return!!l&&"nullValue"in l}function Va(l){return!!l&&"doubleValue"in l&&isNaN(Number(l.doubleValue))}function Po(l){return!!l&&"mapValue"in l}function Hl(l){if(l.geoPointValue)return{geoPointValue:Object.assign({},l.geoPointValue)};if(l.timestampValue&&"object"==typeof l.timestampValue)return{timestampValue:Object.assign({},l.timestampValue)};if(l.mapValue){const n={mapValue:{fields:{}}};return La(l.mapValue.fields,(s,d)=>n.mapValue.fields[s]=Hl(d)),n}if(l.arrayValue){const n={arrayValue:{values:[]}};for(let s=0;s<(l.arrayValue.values||[]).length;++s)n.arrayValue.values[s]=Hl(l.arrayValue.values[s]);return n}return Object.assign({},l)}function wa(l){return"__max__"===(((l.mapValue||{}).fields||{}).__type__||{}).stringValue}function Jc(l){return"nullValue"in l?ba:"booleanValue"in l?{booleanValue:!1}:"integerValue"in l||"doubleValue"in l?{doubleValue:NaN}:"timestampValue"in l?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in l?{stringValue:""}:"bytesValue"in l?{bytesValue:""}:"referenceValue"in l?Ca(Xa.empty(),_e.empty()):"geoPointValue"in l?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in l?{arrayValue:{}}:"mapValue"in l?{mapValue:{}}:An()}function Gl(l){return"nullValue"in l?{booleanValue:!1}:"booleanValue"in l?{doubleValue:NaN}:"integerValue"in l||"doubleValue"in l?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in l?{stringValue:""}:"stringValue"in l?{bytesValue:""}:"bytesValue"in l?Ca(Xa.empty(),_e.empty()):"referenceValue"in l?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in l?{arrayValue:{}}:"arrayValue"in l?{mapValue:{}}:"mapValue"in l?ko:An()}function _l(l,n){const s=sa(l.value,n.value);return 0!==s?s:l.inclusive&&!n.inclusive?-1:!l.inclusive&&n.inclusive?1:0}function mh(l,n){const s=sa(l.value,n.value);return 0!==s?s:l.inclusive&&!n.inclusive?1:!l.inclusive&&n.inclusive?-1:0}class ss{constructor(n){this.value=n}static empty(){return new ss({mapValue:{}})}field(n){if(n.isEmpty())return this.value;{let s=this.value;for(let d=0;d<n.length-1;++d)if(s=(s.mapValue.fields||{})[n.get(d)],!Po(s))return null;return s=(s.mapValue.fields||{})[n.lastSegment()],s||null}}set(n,s){this.getFieldsMap(n.popLast())[n.lastSegment()]=Hl(s)}setAll(n){let s=ye.emptyPath(),d={},p=[];n.forEach((T,O)=>{if(!s.isImmediateParentOf(O)){const z=this.getFieldsMap(s);this.applyChanges(z,d,p),d={},p=[],s=O.popLast()}T?d[O.lastSegment()]=Hl(T):p.push(O.lastSegment())});const v=this.getFieldsMap(s);this.applyChanges(v,d,p)}delete(n){const s=this.field(n.popLast());Po(s)&&s.mapValue.fields&&delete s.mapValue.fields[n.lastSegment()]}isEqual(n){return Ko(this.value,n.value)}getFieldsMap(n){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let d=0;d<n.length;++d){let p=s.mapValue.fields[n.get(d)];Po(p)&&p.mapValue.fields||(p={mapValue:{fields:{}}},s.mapValue.fields[n.get(d)]=p),s=p}return s.mapValue.fields}applyChanges(n,s,d){La(s,(p,v)=>n[p]=v);for(const p of d)delete n[p]}clone(){return new ss(Hl(this.value))}}function Cs(l){const n=[];return La(l.fields,(s,d)=>{const p=new ye([s]);if(Po(d)){const v=Cs(d.mapValue).fields;if(0===v.length)n.push(p);else for(const T of v)n.push(p.child(T))}else n.push(p)}),new vo(n)}class Hr{constructor(n,s,d,p,v,T){this.key=n,this.documentType=s,this.version=d,this.readTime=p,this.data=v,this.documentState=T}static newInvalidDocument(n){return new Hr(n,0,I.min(),I.min(),ss.empty(),0)}static newFoundDocument(n,s,d){return new Hr(n,1,s,I.min(),d,0)}static newNoDocument(n,s){return new Hr(n,2,s,I.min(),ss.empty(),0)}static newUnknownDocument(n,s){return new Hr(n,3,s,I.min(),ss.empty(),2)}convertToFoundDocument(n,s){return this.version=n,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(n){return this.version=n,this.documentType=2,this.data=ss.empty(),this.documentState=0,this}convertToUnknownDocument(n){return this.version=n,this.documentType=3,this.data=ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=I.min(),this}setReadTime(n){return this.readTime=n,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(n){return n instanceof Hr&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.documentType===n.documentType&&this.documentState===n.documentState&&this.data.isEqual(n.data)}mutableCopy(){return new Hr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Tf{constructor(n,s=null,d=[],p=[],v=null,T=null,O=null){this.path=n,this.collectionGroup=s,this.orderBy=d,this.filters=p,this.limit=v,this.startAt=T,this.endAt=O,this.ht=null}}function L(l,n=null,s=[],d=[],p=null,v=null,T=null){return new Tf(l,n,s,d,p,v,T)}function H(l){const n=En(l);if(null===n.ht){let s=n.path.canonicalString();null!==n.collectionGroup&&(s+="|cg:"+n.collectionGroup),s+="|f:",s+=n.filters.map(d=>{return(p=d).field.canonicalString()+p.op.toString()+$l(p.value);var p}).join(","),s+="|ob:",s+=n.orderBy.map(d=>{return(p=d).field.canonicalString()+p.dir;var p}).join(","),Es(n.limit)||(s+="|l:",s+=n.limit),n.startAt&&(s+="|lb:",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(d=>$l(d)).join(",")),n.endAt&&(s+="|ub:",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(d=>$l(d)).join(",")),n.ht=s}return n.ht}function De(l,n){if(l.limit!==n.limit||l.orderBy.length!==n.orderBy.length)return!1;for(let p=0;p<l.orderBy.length;p++)if(!Xc(l.orderBy[p],n.orderBy[p]))return!1;if(l.filters.length!==n.filters.length)return!1;for(let p=0;p<l.filters.length;p++)if((s=l.filters[p]).op!==(d=n.filters[p]).op||!s.field.isEqual(d.field)||!Ko(s.value,d.value))return!1;var s,d;return l.collectionGroup===n.collectionGroup&&!!l.path.isEqual(n.path)&&!!vl(l.startAt,n.startAt)&&vl(l.endAt,n.endAt)}function tt(l){return _e.isDocumentKey(l.path)&&null===l.collectionGroup&&0===l.filters.length}function yt(l,n){return l.filters.filter(s=>s instanceof On&&s.field.isEqual(n))}function Gt(l,n,s){let d=ba,p=!0;for(const v of yt(l,n)){let T=ba,O=!0;switch(v.op){case"<":case"<=":T=Jc(v.value);break;case"==":case"in":case">=":T=v.value;break;case">":T=v.value,O=!1;break;case"!=":case"not-in":T=ba}_l({value:d,inclusive:p},{value:T,inclusive:O})<0&&(d=T,p=O)}if(null!==s)for(let v=0;v<l.orderBy.length;++v)if(l.orderBy[v].field.isEqual(n)){const T=s.position[v];_l({value:d,inclusive:p},{value:T,inclusive:s.inclusive})<0&&(d=T,p=s.inclusive);break}return{value:d,inclusive:p}}function Cn(l,n,s){let d=ko,p=!0;for(const v of yt(l,n)){let T=ko,O=!0;switch(v.op){case">=":case">":T=Gl(v.value),O=!1;break;case"==":case"in":case"<=":T=v.value;break;case"<":T=v.value,O=!1;break;case"!=":case"not-in":T=ko}mh({value:d,inclusive:p},{value:T,inclusive:O})>0&&(d=T,p=O)}if(null!==s)for(let v=0;v<l.orderBy.length;++v)if(l.orderBy[v].field.isEqual(n)){const T=s.position[v];mh({value:d,inclusive:p},{value:T,inclusive:s.inclusive})>0&&(d=T,p=s.inclusive);break}return{value:d,inclusive:p}}class On extends class{}{constructor(n,s,d){super(),this.field=n,this.op=s,this.value=d}static create(n,s,d){return n.isKeyField()?"in"===s||"not-in"===s?this.lt(n,s,d):new xi(n,s,d):"array-contains"===s?new Fo(n,d):"in"===s?new Lu(n,d):"not-in"===s?new Zl(n,d):"array-contains-any"===s?new Lo(n,d):new On(n,s,d)}static lt(n,s,d){return"in"===s?new ki(n,d):new mi(n,d)}matches(n){const s=n.data.field(this.field);return"!="===this.op?null!==s&&this.ft(sa(s,this.value)):null!==s&&Ba(this.value)===Ba(s)&&this.ft(sa(s,this.value))}ft(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return 0===n;case"!=":return 0!==n;case">":return n>0;case">=":return n>=0;default:return An()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class xi extends On{constructor(n,s,d){super(n,s,d),this.key=_e.fromName(d.referenceValue)}matches(n){const s=_e.comparator(n.key,this.key);return this.ft(s)}}class ki extends On{constructor(n,s){super(n,"in",s),this.keys=os(0,s)}matches(n){return this.keys.some(s=>s.isEqual(n.key))}}class mi extends On{constructor(n,s){super(n,"not-in",s),this.keys=os(0,s)}matches(n){return!this.keys.some(s=>s.isEqual(n.key))}}function os(l,n){var s;return((null===(s=n.arrayValue)||void 0===s?void 0:s.values)||[]).map(d=>_e.fromName(d.referenceValue))}class Fo extends On{constructor(n,s){super(n,"array-contains",s)}matches(n){const s=n.data.field(this.field);return Ta(s)&&ml(s.arrayValue,this.value)}}class Lu extends On{constructor(n,s){super(n,"in",s)}matches(n){const s=n.data.field(this.field);return null!==s&&ml(this.value.arrayValue,s)}}class Zl extends On{constructor(n,s){super(n,"not-in",s)}matches(n){if(ml(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=n.data.field(this.field);return null!==s&&!ml(this.value.arrayValue,s)}}class Lo extends On{constructor(n,s){super(n,"array-contains-any",s)}matches(n){const s=n.data.field(this.field);return!(!Ta(s)||!s.arrayValue.values)&&s.arrayValue.values.some(d=>ml(this.value.arrayValue,d))}}class Bo{constructor(n,s){this.position=n,this.inclusive=s}}class yl{constructor(n,s="asc"){this.field=n,this.dir=s}}function Xc(l,n){return l.dir===n.dir&&l.field.isEqual(n.field)}function Mr(l,n,s){let d=0;for(let p=0;p<l.position.length;p++){const v=n[p],T=l.position[p];if(d=v.field.isKeyField()?_e.comparator(_e.fromName(T.referenceValue),s.key):sa(T,s.data.field(v.field)),"desc"===v.dir&&(d*=-1),0!==d)break}return d}function vl(l,n){if(null===l)return null===n;if(null===n||l.inclusive!==n.inclusive||l.position.length!==n.position.length)return!1;for(let s=0;s<l.position.length;s++)if(!Ko(l.position[s],n.position[s]))return!1;return!0}class tl{constructor(n,s=null,d=[],p=[],v=null,T="F",O=null,z=null){this.path=n,this.collectionGroup=s,this.explicitOrderBy=d,this.filters=p,this.limit=v,this.limitType=T,this.startAt=O,this.endAt=z,this._t=null,this.wt=null}}function Jp(l,n,s,d,p,v,T,O){return new tl(l,n,s,d,p,v,T,O)}function gc(l){return new tl(l)}function Bu(l){return 0===l.filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())}function mc(l){return l.explicitOrderBy.length>0?l.explicitOrderBy[0].field:null}function _c(l){for(const n of l.filters)if(n.dt())return n.field;return null}function Wl(l){return null!==l.collectionGroup}function eu(l){const n=En(l);if(null===n._t){n._t=[];const s=_c(n),d=mc(n);if(null!==s&&null===d)s.isKeyField()||n._t.push(new yl(s)),n._t.push(new yl(ye.keyField(),"asc"));else{let p=!1;for(const v of n.explicitOrderBy)n._t.push(v),v.field.isKeyField()&&(p=!0);if(!p){const v=n.explicitOrderBy.length>0?n.explicitOrderBy[n.explicitOrderBy.length-1].dir:"asc";n._t.push(new yl(ye.keyField(),v))}}}return n._t}function io(l){const n=En(l);if(!n.wt)if("F"===n.limitType)n.wt=L(n.path,n.collectionGroup,eu(n),n.filters,n.limit,n.startAt,n.endAt);else{const s=[];for(const v of eu(n))s.push(new yl(v.field,"desc"===v.dir?"asc":"desc"));const d=n.endAt?new Bo(n.endAt.position,n.endAt.inclusive):null,p=n.startAt?new Bo(n.startAt.position,n.startAt.inclusive):null;n.wt=L(n.path,n.collectionGroup,s,n.filters,n.limit,d,p)}return n.wt}function vd(l,n,s){return new tl(l.path,l.collectionGroup,l.explicitOrderBy.slice(),l.filters.slice(),n,s,l.startAt,l.endAt)}function nl(l,n){return De(io(l),io(n))&&l.limitType===n.limitType}function tu(l){return`${H(io(l))}|lt:${l.limitType}`}function nu(l){return`Query(target=${function ae(l){let n=l.path.canonicalString();return null!==l.collectionGroup&&(n+=" collectionGroup="+l.collectionGroup),l.filters.length>0&&(n+=`, filters: [${l.filters.map(s=>{return`${(d=s).field.canonicalString()} ${d.op} ${$l(d.value)}`;var d}).join(", ")}]`),Es(l.limit)||(n+=", limit: "+l.limit),l.orderBy.length>0&&(n+=`, orderBy: [${l.orderBy.map(s=>{return`${(d=s).field.canonicalString()} (${d.dir})`;var d}).join(", ")}]`),l.startAt&&(n+=", startAt: ",n+=l.startAt.inclusive?"b:":"a:",n+=l.startAt.position.map(s=>$l(s)).join(",")),l.endAt&&(n+=", endAt: ",n+=l.endAt.inclusive?"a:":"b:",n+=l.endAt.position.map(s=>$l(s)).join(",")),`Target(${n})`}(io(l))}; limitType=${l.limitType})`}function Vu(l,n){return n.isFoundDocument()&&function(s,d){const p=d.key.path;return null!==s.collectionGroup?d.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(p):_e.isDocumentKey(s.path)?s.path.isEqual(p):s.path.isImmediateParentOf(p)}(l,n)&&function(s,d){for(const p of s.explicitOrderBy)if(!p.field.isKeyField()&&null===d.data.field(p.field))return!1;return!0}(l,n)&&function(s,d){for(const p of s.filters)if(!p.matches(d))return!1;return!0}(l,n)&&(d=n,!((s=l).startAt&&!function(p,v,T){const O=Mr(p,v,T);return p.inclusive?O<=0:O<0}(s.startAt,eu(s),d)||s.endAt&&!function(p,v,T){const O=Mr(p,v,T);return p.inclusive?O>=0:O>0}(s.endAt,eu(s),d)));var s,d}function Uu(l){return l.collectionGroup||(l.path.length%2==1?l.path.lastSegment():l.path.get(l.path.length-2))}function ql(l){return(n,s)=>{let d=!1;for(const p of eu(l)){const v=wf(p,n,s);if(0!==v)return v;d=d||p.field.isKeyField()}return 0}}function wf(l,n,s){const d=l.field.isKeyField()?_e.comparator(n.key,s.key):function(p,v,T){const O=v.data.field(p),z=T.data.field(p);return null!==O&&null!==z?sa(O,z):An()}(l.field,n,s);switch(l.dir){case"asc":return d;case"desc":return-1*d;default:return An()}}function _h(l,n){if(l.gt){if(isNaN(n))return{doubleValue:"NaN"};if(n===1/0)return{doubleValue:"Infinity"};if(n===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uo(n)?"-0":n}}function yh(l){return{integerValue:""+l}}function Df(l,n){return va(n)?yh(n):_h(l,n)}class ju{constructor(){this._=void 0}}function Ua(l,n,s){return l instanceof yc?function(d,p){const v={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:d.seconds,nanos:d.nanoseconds}}}};return p&&(v.fields.__previous_value__=p),{mapValue:v}}(s,n):l instanceof bl?Xp(l,n):l instanceof vc?If(l,n):function(d,p){const v=bd(d,p),T=$u(v)+$u(d.yt);return Fu(v)&&Fu(d.yt)?yh(T):_h(d.It,T)}(l,n)}function iu(l,n,s){return l instanceof bl?Xp(l,n):l instanceof vc?If(l,n):s}function bd(l,n){return l instanceof ru?Fu(s=n)||(d=s)&&"doubleValue"in d?n:{integerValue:0}:null;var d,s}class yc extends ju{}class bl extends ju{constructor(n){super(),this.elements=n}}function Xp(l,n){const s=eg(n);for(const d of l.elements)s.some(p=>Ko(p,d))||s.push(d);return{arrayValue:{values:s}}}class vc extends ju{constructor(n){super(),this.elements=n}}function If(l,n){let s=eg(n);for(const d of l.elements)s=s.filter(p=>!Ko(p,d));return{arrayValue:{values:s}}}class ru extends ju{constructor(n,s){super(),this.It=n,this.yt=s}}function $u(l){return Br(l.integerValue||l.doubleValue)}function eg(l){return Ta(l)&&l.arrayValue.values?l.arrayValue.values.slice():[]}class Ed{constructor(n,s){this.field=n,this.transform=s}}class Nv{constructor(n,s){this.version=n,this.transformResults=s}}class fs{constructor(n,s){this.updateTime=n,this.exists=s}static none(){return new fs}static exists(n){return new fs(void 0,n)}static updateTime(n){return new fs(n)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(n){return this.exists===n.exists&&(this.updateTime?!!n.updateTime&&this.updateTime.isEqual(n.updateTime):!n.updateTime)}}function bc(l,n){return void 0!==l.updateTime?n.isFoundDocument()&&n.version.isEqual(l.updateTime):void 0===l.exists||l.exists===n.isFoundDocument()}class Cd{}function il(l,n){if(!l.hasLocalMutations||n&&0===n.fields.length)return null;if(null===n)return l.isNoDocument()?new Cc(l.key,fs.none()):new Td(l.key,l.data,fs.none());{const s=l.data,d=ss.empty();let p=new Dr(ye.comparator);for(let v of n.fields)if(!p.has(v)){let T=s.field(v);null===T&&v.length>1&&(v=v.popLast(),T=s.field(v)),null===T?d.delete(v):d.set(v,T),p=p.add(v)}return new Ec(l.key,d,new vo(p.toArray()),fs.none())}}function su(l,n,s){l instanceof Td?function(d,p,v){const T=d.value.clone(),O=vh(d.fieldTransforms,p,v.transformResults);T.setAll(O),p.convertToFoundDocument(v.version,T).setHasCommittedMutations()}(l,n,s):l instanceof Ec?function(d,p,v){if(!bc(d.precondition,p))return void p.convertToUnknownDocument(v.version);const T=vh(d.fieldTransforms,p,v.transformResults),O=p.data;O.setAll(Sf(d)),O.setAll(T),p.convertToFoundDocument(v.version,O).setHasCommittedMutations()}(l,n,s):n.convertToNoDocument(s.version).setHasCommittedMutations()}function Hu(l,n,s,d){return l instanceof Td?function(p,v,T,O){if(!bc(p.precondition,v))return T;const z=p.value.clone(),ee=bh(p.fieldTransforms,O,v);return z.setAll(ee),v.convertToFoundDocument(v.version,z).setHasLocalMutations(),null}(l,n,s,d):l instanceof Ec?function(p,v,T,O){if(!bc(p.precondition,v))return T;const z=bh(p.fieldTransforms,O,v),ee=v.data;return ee.setAll(Sf(p)),ee.setAll(z),v.convertToFoundDocument(v.version,ee).setHasLocalMutations(),null===T?null:T.unionWith(p.fieldMask.fields).unionWith(p.fieldTransforms.map(me=>me.field))}(l,n,s,d):(T=s,bc(l.precondition,v=n)?(v.convertToNoDocument(v.version).setHasLocalMutations(),null):T);var v,T}function tg(l,n){let s=null;for(const d of l.fieldTransforms){const p=n.data.field(d.field),v=bd(d.transform,p||null);null!=v&&(null===s&&(s=ss.empty()),s.set(d.field,v))}return s||null}function Af(l,n){return l.type===n.type&&!!l.key.isEqual(n.key)&&!!l.precondition.isEqual(n.precondition)&&(d=n.fieldTransforms,!!(void 0===(s=l.fieldTransforms)&&void 0===d||s&&d&&ia(s,d,(p,v)=>function n_(l,n){return l.field.isEqual(n.field)&&(d=n.transform,(s=l.transform)instanceof bl&&d instanceof bl||s instanceof vc&&d instanceof vc?ia(s.elements,d.elements,Ko):s instanceof ru&&d instanceof ru?Ko(s.yt,d.yt):s instanceof yc&&d instanceof yc);var s,d}(p,v))))&&(0===l.type?l.value.isEqual(n.value):1!==l.type||l.data.isEqual(n.data)&&l.fieldMask.isEqual(n.fieldMask));var s,d}class Td extends Cd{constructor(n,s,d,p=[]){super(),this.key=n,this.value=s,this.precondition=d,this.fieldTransforms=p,this.type=0}getFieldMask(){return null}}class Ec extends Cd{constructor(n,s,d,p,v=[]){super(),this.key=n,this.data=s,this.fieldMask=d,this.precondition=p,this.fieldTransforms=v,this.type=1}getFieldMask(){return this.fieldMask}}function Sf(l){const n=new Map;return l.fieldMask.fields.forEach(s=>{if(!s.isEmpty()){const d=l.data.field(s);n.set(s,d)}}),n}function vh(l,n,s){const d=new Map;di(l.length===s.length);for(let p=0;p<s.length;p++){const v=l[p],T=v.transform,O=n.data.field(v.field);d.set(v.field,iu(T,O,s[p]))}return d}function bh(l,n,s){const d=new Map;for(const p of l){const v=p.transform,T=s.data.field(p.field);d.set(p.field,Ua(v,T,n))}return d}class Cc extends Cd{constructor(n,s){super(),this.key=n,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ng extends Cd{constructor(n,s){super(),this.key=n,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ig{constructor(n){this.count=n}}var Vs,rr;function rg(l){switch(l){default:return An();case Ct.CANCELLED:case Ct.UNKNOWN:case Ct.DEADLINE_EXCEEDED:case Ct.RESOURCE_EXHAUSTED:case Ct.INTERNAL:case Ct.UNAVAILABLE:case Ct.UNAUTHENTICATED:return!1;case Ct.INVALID_ARGUMENT:case Ct.NOT_FOUND:case Ct.ALREADY_EXISTS:case Ct.PERMISSION_DENIED:case Ct.FAILED_PRECONDITION:case Ct.ABORTED:case Ct.OUT_OF_RANGE:case Ct.UNIMPLEMENTED:case Ct.DATA_LOSS:return!0}}function oa(l){if(void 0===l)return Mi("GRPC error has no .code"),Ct.UNKNOWN;switch(l){case Vs.OK:return Ct.OK;case Vs.CANCELLED:return Ct.CANCELLED;case Vs.UNKNOWN:return Ct.UNKNOWN;case Vs.DEADLINE_EXCEEDED:return Ct.DEADLINE_EXCEEDED;case Vs.RESOURCE_EXHAUSTED:return Ct.RESOURCE_EXHAUSTED;case Vs.INTERNAL:return Ct.INTERNAL;case Vs.UNAVAILABLE:return Ct.UNAVAILABLE;case Vs.UNAUTHENTICATED:return Ct.UNAUTHENTICATED;case Vs.INVALID_ARGUMENT:return Ct.INVALID_ARGUMENT;case Vs.NOT_FOUND:return Ct.NOT_FOUND;case Vs.ALREADY_EXISTS:return Ct.ALREADY_EXISTS;case Vs.PERMISSION_DENIED:return Ct.PERMISSION_DENIED;case Vs.FAILED_PRECONDITION:return Ct.FAILED_PRECONDITION;case Vs.ABORTED:return Ct.ABORTED;case Vs.OUT_OF_RANGE:return Ct.OUT_OF_RANGE;case Vs.UNIMPLEMENTED:return Ct.UNIMPLEMENTED;case Vs.DATA_LOSS:return Ct.DATA_LOSS;default:return An()}}(rr=Vs||(Vs={}))[rr.OK=0]="OK",rr[rr.CANCELLED=1]="CANCELLED",rr[rr.UNKNOWN=2]="UNKNOWN",rr[rr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rr[rr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rr[rr.NOT_FOUND=5]="NOT_FOUND",rr[rr.ALREADY_EXISTS=6]="ALREADY_EXISTS",rr[rr.PERMISSION_DENIED=7]="PERMISSION_DENIED",rr[rr.UNAUTHENTICATED=16]="UNAUTHENTICATED",rr[rr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rr[rr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rr[rr.ABORTED=10]="ABORTED",rr[rr.OUT_OF_RANGE=11]="OUT_OF_RANGE",rr[rr.UNIMPLEMENTED=12]="UNIMPLEMENTED",rr[rr.INTERNAL=13]="INTERNAL",rr[rr.UNAVAILABLE=14]="UNAVAILABLE",rr[rr.DATA_LOSS=15]="DATA_LOSS";class Ir{constructor(n,s){this.mapKeyFn=n,this.equalsFn=s,this.inner={},this.innerSize=0}get(n){const s=this.mapKeyFn(n),d=this.inner[s];if(void 0!==d)for(const[p,v]of d)if(this.equalsFn(p,n))return v}has(n){return void 0!==this.get(n)}set(n,s){const d=this.mapKeyFn(n),p=this.inner[d];if(void 0===p)return this.inner[d]=[[n,s]],void this.innerSize++;for(let v=0;v<p.length;v++)if(this.equalsFn(p[v][0],n))return void(p[v]=[n,s]);p.push([n,s]),this.innerSize++}delete(n){const s=this.mapKeyFn(n),d=this.inner[s];if(void 0===d)return!1;for(let p=0;p<d.length;p++)if(this.equalsFn(d[p][0],n))return 1===d.length?delete this.inner[s]:d.splice(p,1),this.innerSize--,!0;return!1}forEach(n){La(this.inner,(s,d)=>{for(const[p,v]of d)n(p,v)})}isEmpty(){return Kc(this.inner)}size(){return this.innerSize}}const ou=new $r(_e.comparator);function ro(){return ou}const au=new $r(_e.comparator);function zl(...l){let n=au;for(const s of l)n=n.insert(s.key,s);return n}function Nf(l){let n=au;return l.forEach((s,d)=>n=n.insert(s,d.overlayedDocument)),n}function Tr(){return El()}function Mf(){return El()}function El(){return new Ir(l=>l.toString(),(l,n)=>l.isEqual(n))}const lu=new $r(_e.comparator),wd=new Dr(_e.comparator);function Li(...l){let n=wd;for(const s of l)n=n.add(s);return n}const sg=new Dr(bi);function w(){return sg}class y{constructor(n,s,d,p,v){this.snapshotVersion=n,this.targetChanges=s,this.targetMismatches=d,this.documentUpdates=p,this.resolvedLimboDocuments=v}static createSynthesizedRemoteEventForCurrentChange(n,s,d){const p=new Map;return p.set(n,C.createSynthesizedTargetChangeForCurrentChange(n,s,d)),new y(I.min(),p,w(),ro(),Li())}}class C{constructor(n,s,d,p,v){this.resumeToken=n,this.current=s,this.addedDocuments=d,this.modifiedDocuments=p,this.removedDocuments=v}static createSynthesizedTargetChangeForCurrentChange(n,s,d){return new C(d,s,Li(),Li(),Li())}}class N{constructor(n,s,d,p){this.Tt=n,this.removedTargetIds=s,this.key=d,this.Et=p}}class K{constructor(n,s){this.targetId=n,this.At=s}}class ie{constructor(n,s,d=Lr.EMPTY_BYTE_STRING,p=null){this.state=n,this.targetIds=s,this.resumeToken=d,this.cause=p}}class Be{constructor(){this.Rt=0,this.bt=an(),this.Pt=Lr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(n){n.approximateByteSize()>0&&(this.Vt=!0,this.Pt=n)}xt(){let n=Li(),s=Li(),d=Li();return this.bt.forEach((p,v)=>{switch(v){case 0:n=n.add(p);break;case 2:s=s.add(p);break;case 1:d=d.add(p);break;default:An()}}),new C(this.Pt,this.vt,n,s,d)}Nt(){this.Vt=!1,this.bt=an()}kt(n,s){this.Vt=!0,this.bt=this.bt.insert(n,s)}Ot(n){this.Vt=!0,this.bt=this.bt.remove(n)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Dt{constructor(n){this.Bt=n,this.Lt=new Map,this.Ut=ro(),this.qt=hn(),this.Kt=new Dr(bi)}Gt(n){for(const s of n.Tt)n.Et&&n.Et.isFoundDocument()?this.Qt(s,n.Et):this.jt(s,n.key,n.Et);for(const s of n.removedTargetIds)this.jt(s,n.key,n.Et)}Wt(n){this.forEachTarget(n,s=>{const d=this.zt(s);switch(n.state){case 0:this.Ht(s)&&d.Ct(n.resumeToken);break;case 1:d.Ft(),d.St||d.Nt(),d.Ct(n.resumeToken);break;case 2:d.Ft(),d.St||this.removeTarget(s);break;case 3:this.Ht(s)&&(d.$t(),d.Ct(n.resumeToken));break;case 4:this.Ht(s)&&(this.Jt(s),d.Ct(n.resumeToken));break;default:An()}})}forEachTarget(n,s){n.targetIds.length>0?n.targetIds.forEach(s):this.Lt.forEach((d,p)=>{this.Ht(p)&&s(p)})}Yt(n){const s=n.targetId,d=n.At.count,p=this.Xt(s);if(p){const v=p.target;if(tt(v))if(0===d){const T=new _e(v.path);this.jt(s,T,Hr.newNoDocument(T,I.min()))}else di(1===d);else this.Zt(s)!==d&&(this.Jt(s),this.Kt=this.Kt.add(s))}}te(n){const s=new Map;this.Lt.forEach((v,T)=>{const O=this.Xt(T);if(O){if(v.current&&tt(O.target)){const z=new _e(O.target.path);null!==this.Ut.get(z)||this.ee(T,z)||this.jt(T,z,Hr.newNoDocument(z,n))}v.Dt&&(s.set(T,v.xt()),v.Nt())}});let d=Li();this.qt.forEach((v,T)=>{let O=!0;T.forEachWhile(z=>{const ee=this.Xt(z);return!ee||2===ee.purpose||(O=!1,!1)}),O&&(d=d.add(v))}),this.Ut.forEach((v,T)=>T.setReadTime(n));const p=new y(n,s,this.Kt,this.Ut,d);return this.Ut=ro(),this.qt=hn(),this.Kt=new Dr(bi),p}Qt(n,s){if(!this.Ht(n))return;const d=this.ee(n,s.key)?2:0;this.zt(n).kt(s.key,d),this.Ut=this.Ut.insert(s.key,s),this.qt=this.qt.insert(s.key,this.ne(s.key).add(n))}jt(n,s,d){if(!this.Ht(n))return;const p=this.zt(n);this.ee(n,s)?p.kt(s,1):p.Ot(s),this.qt=this.qt.insert(s,this.ne(s).delete(n)),d&&(this.Ut=this.Ut.insert(s,d))}removeTarget(n){this.Lt.delete(n)}Zt(n){const s=this.zt(n).xt();return this.Bt.getRemoteKeysForTarget(n).size+s.addedDocuments.size-s.removedDocuments.size}Mt(n){this.zt(n).Mt()}zt(n){let s=this.Lt.get(n);return s||(s=new Be,this.Lt.set(n,s)),s}ne(n){let s=this.qt.get(n);return s||(s=new Dr(bi),this.qt=this.qt.insert(n,s)),s}Ht(n){const s=null!==this.Xt(n);return s||Wt("WatchChangeAggregator","Detected inactive target",n),s}Xt(n){const s=this.Lt.get(n);return s&&s.St?null:this.Bt.se(n)}Jt(n){this.Lt.set(n,new Be),this.Bt.getRemoteKeysForTarget(n).forEach(s=>{this.jt(n,s,null)})}ee(n,s){return this.Bt.getRemoteKeysForTarget(n).has(s)}}function hn(){return new $r(_e.comparator)}function an(){return new $r(_e.comparator)}const Gn={asc:"ASCENDING",desc:"DESCENDING"},pr={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Gr{constructor(n,s){this.databaseId=n,this.gt=s}}function so(l,n){return l.gt?`${new Date(1e3*n.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+n.nanoseconds).slice(-9)}Z`:{seconds:""+n.seconds,nanos:n.nanoseconds}}function Kl(l,n){return l.gt?n.toBase64():n.toUint8Array()}function Dd(l,n){return so(l,n.toTimestamp())}function Ks(l){return di(!!l),I.fromTimestamp(function(n){const s=zo(n);return new M(s.seconds,s.nanos)}(l))}function Id(l,n){return(s=l,new q(["projects",s.projectId,"databases",s.database])).child("documents").child(n).canonicalString();var s}function xf(l){const n=q.fromString(l);return di(Cl(n)),n}function Tc(l,n){return Id(l.databaseId,n.path)}function rl(l,n){const s=xf(n);if(s.get(1)!==l.databaseId.projectId)throw new en(Ct.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+l.databaseId.projectId);if(s.get(3)!==l.databaseId.database)throw new en(Ct.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+l.databaseId.database);return new _e(og(s))}function Eh(l,n){return Id(l.databaseId,n)}function Gu(l){const n=xf(l);return 4===n.length?q.emptyPath():og(n)}function Zu(l){return new q(["projects",l.databaseId.projectId,"databases",l.databaseId.database]).canonicalString()}function og(l){return di(l.length>4&&"documents"===l.get(4)),l.popFirst(5)}function wc(l,n,s){return{name:Tc(l,n),fields:s.value.mapValue.fields}}function Of(l,n,s){const d=rl(l,n.name),p=Ks(n.updateTime),v=new ss({mapValue:{fields:n.fields}}),T=Hr.newFoundDocument(d,p,v);return s&&T.setHasCommittedMutations(),s?T.setHasCommittedMutations():T}function Sd(l,n){let s;if(n instanceof Td)s={update:wc(l,n.key,n.value)};else if(n instanceof Cc)s={delete:Tc(l,n.key)};else if(n instanceof Ec)s={update:wc(l,n.key,n.data),updateMask:Md(n.fieldMask)};else{if(!(n instanceof ng))return An();s={verify:Tc(l,n.key)}}return n.fieldTransforms.length>0&&(s.updateTransforms=n.fieldTransforms.map(d=>function(p,v){const T=v.transform;if(T instanceof yc)return{fieldPath:v.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(T instanceof bl)return{fieldPath:v.field.canonicalString(),appendMissingElements:{values:T.elements}};if(T instanceof vc)return{fieldPath:v.field.canonicalString(),removeAllFromArray:{values:T.elements}};if(T instanceof ru)return{fieldPath:v.field.canonicalString(),increment:T.yt};throw An()}(0,d))),n.precondition.isNone||(s.currentDocument=void 0!==(p=n.precondition).updateTime?{updateTime:Dd(l,p.updateTime)}:void 0!==p.exists?{exists:p.exists}:An()),s;var p}function Nd(l,n){const s=n.currentDocument?void 0!==(p=n.currentDocument).updateTime?fs.updateTime(Ks(p.updateTime)):void 0!==p.exists?fs.exists(p.exists):fs.none():fs.none(),d=n.updateTransforms?n.updateTransforms.map(p=>function(v,T){let O=null;"setToServerValue"in T?(di("REQUEST_TIME"===T.setToServerValue),O=new yc):"appendMissingElements"in T?O=new bl(T.appendMissingElements.values||[]):"removeAllFromArray"in T?O=new vc(T.removeAllFromArray.values||[]):"increment"in T?O=new ru(v,T.increment):An();const z=ye.fromServerFormat(T.fieldPath);return new Ed(z,O)}(l,p)):[];var p;if(n.update){const p=rl(l,n.update.name),v=new ss({mapValue:{fields:n.update.fields}});if(n.updateMask){const T=new vo((n.updateMask.fieldPaths||[]).map(ee=>ye.fromServerFormat(ee)));return new Ec(p,v,T,s,d)}return new Td(p,v,s,d)}if(n.delete){const p=rl(l,n.delete);return new Cc(p,s)}if(n.verify){const p=rl(l,n.verify);return new ng(p,s)}return An()}function Ch(l,n){return{documents:[Eh(l,n.path)]}}function i_(l,n){const s={structuredQuery:{}},d=n.path;null!==n.collectionGroup?(s.parent=Eh(l,d),s.structuredQuery.from=[{collectionId:n.collectionGroup,allDescendants:!0}]):(s.parent=Eh(l,d.popLast()),s.structuredQuery.from=[{collectionId:d.lastSegment()}]);const p=function(z){if(0===z.length)return;const ee=z.map(me=>function(Re){if("=="===Re.op){if(Va(Re.value))return{unaryFilter:{field:qu(Re.field),op:"IS_NAN"}};if(el(Re.value))return{unaryFilter:{field:qu(Re.field),op:"IS_NULL"}}}else if("!="===Re.op){if(Va(Re.value))return{unaryFilter:{field:qu(Re.field),op:"IS_NOT_NAN"}};if(el(Re.value))return{unaryFilter:{field:qu(Re.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qu(Re.field),op:r_(Re.op),value:Re.value}}}(me));return 1===ee.length?ee[0]:{compositeFilter:{op:"AND",filters:ee}}}(n.filters);p&&(s.structuredQuery.where=p);const v=function(z){if(0!==z.length)return z.map(ee=>{return{field:qu((me=ee).field),direction:Ov(me.dir)};var me})}(n.orderBy);v&&(s.structuredQuery.orderBy=v);const T=(ee=n.limit,l.gt||Es(ee)?ee:{value:ee});var ee,O,z;return null!==T&&(s.structuredQuery.limit=T),n.startAt&&(s.structuredQuery.startAt={before:(O=n.startAt).inclusive,values:O.position}),n.endAt&&(s.structuredQuery.endAt={before:!(z=n.endAt).inclusive,values:z.position}),s}function Rf(l){let n=Gu(l.parent);const s=l.structuredQuery,d=s.from?s.from.length:0;let p=null;if(d>0){di(1===d);const me=s.from[0];me.allDescendants?p=me.collectionId:n=n.child(me.collectionId)}let v=[];s.where&&(v=xv(s.where));let T=[];s.orderBy&&(T=s.orderBy.map(me=>{return new yl(sl((Re=me).field),function(gt){switch(gt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Re.direction));var Re}));let O=null;s.limit&&(O=function(me){let Re;return Re="object"==typeof me?me.value:me,Es(Re)?null:Re}(s.limit));let z=null;var me;s.startAt&&(z=new Bo((me=s.startAt).values||[],!!me.before));let ee=null;return s.endAt&&(ee=function(me){return new Bo(me.values||[],!me.before)}(s.endAt)),Jp(n,p,T,v,O,"F",z,ee)}function xv(l){return l?void 0!==l.unaryFilter?[kv(l)]:void 0!==l.fieldFilter?[Rv(l)]:void 0!==l.compositeFilter?l.compositeFilter.filters.map(n=>xv(n)).reduce((n,s)=>n.concat(s)):An():[]}function Ov(l){return Gn[l]}function r_(l){return pr[l]}function qu(l){return{fieldPath:l.canonicalString()}}function sl(l){return ye.fromServerFormat(l.fieldPath)}function Rv(l){return On.create(sl(l.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return An()}}(l.fieldFilter.op),l.fieldFilter.value)}function kv(l){switch(l.unaryFilter.op){case"IS_NAN":const n=sl(l.unaryFilter.field);return On.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=sl(l.unaryFilter.field);return On.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=sl(l.unaryFilter.field);return On.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=sl(l.unaryFilter.field);return On.create(p,"!=",{nullValue:"NULL_VALUE"});default:return An()}}function Md(l){const n=[];return l.fields.forEach(s=>n.push(s.canonicalString())),{fieldPaths:n}}function Cl(l){return l.length>=4&&"projects"===l.get(0)&&"databases"===l.get(2)}function aa(l){let n="";for(let s=0;s<l.length;s++)n.length>0&&(n=lg(n)),n=Pv(l.get(s),n);return lg(n)}function Pv(l,n){let s=n;const d=l.length;for(let p=0;p<d;p++){const v=l.charAt(p);switch(v){case"\0":s+="\x01\x10";break;case"\x01":s+="\x01\x11";break;default:s+=v}}return s}function lg(l){return l+"\x01\x01"}function Yl(l){const n=l.length;if(di(n>=2),2===n)return di("\x01"===l.charAt(0)&&"\x01"===l.charAt(1)),q.emptyPath();const s=n-2,d=[];let p="";for(let v=0;v<n;){const T=l.indexOf("\x01",v);switch((T<0||T>s)&&An(),l.charAt(T+1)){case"\x01":const O=l.substring(v,T);let z;0===p.length?z=O:(p+=O,z=p,p=""),d.push(z);break;case"\x10":p+=l.substring(v,T),p+="\0";break;case"\x11":p+=l.substring(v,T+1);break;default:An()}v=T+2}return new q(d)}const Tl=["userId","batchId"];function zu(l,n){return[l,aa(n)]}function xd(l,n,s){return[l,aa(n),s]}const cg={},ug=["prefixPath","collectionGroup","readTime","documentId"],Th=["prefixPath","collectionGroup","documentId"],s_=["collectionGroup","readTime","prefixPath","documentId"],kf=["canonicalId","targetId"],o_=["targetId","path"],a_=["path","targetId"],dg=["collectionId","parent"],AE=["indexId","uid"],Ku=["uid","sequenceNumber"],Pf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hg=["indexId","uid","orderedDocumentKey"],l_=["userId","collectionPath","documentId"],Ff=["userId","collectionPath","largestBatchId"],c_=["userId","collectionGroup","largestBatchId"],fg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],SE=[...fg,"documentOverlays"],Fv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],pg=Fv,Lv=[...pg,"indexConfiguration","indexState","indexEntries"];class Lf extends xo{constructor(n,s){super(),this.ie=n,this.currentSequenceNumber=s}}function oo(l,n){const s=En(l);return to.M(s.ie,n)}class Bf{constructor(n,s,d,p){this.batchId=n,this.localWriteTime=s,this.baseMutations=d,this.mutations=p}applyToRemoteDocument(n,s){const d=s.mutationResults;for(let p=0;p<this.mutations.length;p++){const v=this.mutations[p];v.key.isEqual(n.key)&&su(v,n,d[p])}}applyToLocalView(n,s){for(const d of this.baseMutations)d.key.isEqual(n.key)&&(s=Hu(d,n,s,this.localWriteTime));for(const d of this.mutations)d.key.isEqual(n.key)&&(s=Hu(d,n,s,this.localWriteTime));return s}applyToLocalDocumentSet(n,s){const d=Mf();return this.mutations.forEach(p=>{const v=n.get(p.key),T=v.overlayedDocument;let O=this.applyToLocalView(T,v.mutatedFields);O=s.has(p.key)?null:O;const z=il(T,O);null!==z&&d.set(p.key,z),T.isValidDocument()||T.convertToNoDocument(I.min())}),d}keys(){return this.mutations.reduce((n,s)=>n.add(s.key),Li())}isEqual(n){return this.batchId===n.batchId&&ia(this.mutations,n.mutations,(s,d)=>Af(s,d))&&ia(this.baseMutations,n.baseMutations,(s,d)=>Af(s,d))}}class Od{constructor(n,s,d,p){this.batch=n,this.commitVersion=s,this.mutationResults=d,this.docVersions=p}static from(n,s,d){di(n.mutations.length===d.length);let p=lu;const v=n.mutations;for(let T=0;T<v.length;T++)p=p.insert(v[T].key,d[T].version);return new Od(n,s,d,p)}}class gg{constructor(n,s){this.largestBatchId=n,this.mutation=s}getKey(){return this.mutation.key}isEqual(n){return null!==n&&this.mutation===n.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Yu{constructor(n,s,d,p,v=I.min(),T=I.min(),O=Lr.EMPTY_BYTE_STRING){this.target=n,this.targetId=s,this.purpose=d,this.sequenceNumber=p,this.snapshotVersion=v,this.lastLimboFreeSnapshotVersion=T,this.resumeToken=O}withSequenceNumber(n){return new Yu(this.target,this.targetId,this.purpose,n,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(n,s){return new Yu(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,n)}withLastLimboFreeSnapshotVersion(n){return new Yu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,n,this.resumeToken)}}class u_{constructor(n){this.re=n}}function Qu(l,n){const s=n.key,d={prefixPath:s.getCollectionPath().popLast().toArray(),collectionGroup:s.collectionGroup,documentId:s.path.lastSegment(),readTime:Vf(n.readTime),hasCommittedMutations:n.hasCommittedMutations};if(n.isFoundDocument())d.document={name:Tc(p=l.re,(v=n).key),fields:v.data.value.mapValue.fields,updateTime:so(p,v.version.toTimestamp())};else if(n.isNoDocument())d.noDocument={path:s.path.toArray(),readTime:Dc(n.version)};else{if(!n.isUnknownDocument())return An();d.unknownDocument={path:s.path.toArray(),version:Dc(n.version)}}var p,v;return d}function Vf(l){const n=l.toTimestamp();return[n.seconds,n.nanoseconds]}function Dc(l){const n=l.toTimestamp();return{seconds:n.seconds,nanoseconds:n.nanoseconds}}function Rd(l){const n=new M(l.seconds,l.nanoseconds);return I.fromTimestamp(n)}function Ic(l,n){const s=(n.baseMutations||[]).map(v=>Nd(l.re,v));for(let v=0;v<n.mutations.length-1;++v){const T=n.mutations[v];v+1<n.mutations.length&&void 0!==n.mutations[v+1].transform&&(T.updateTransforms=n.mutations[v+1].transform.fieldTransforms,n.mutations.splice(v+1,1),++v)}const d=n.mutations.map(v=>Nd(l.re,v)),p=M.fromMillis(n.localWriteTimeMs);return new Bf(n.batchId,p,s,d)}function kd(l){const n=Rd(l.readTime),s=void 0!==l.lastLimboFreeSnapshotVersion?Rd(l.lastLimboFreeSnapshotVersion):I.min();let d;var p;return void 0!==l.query.documents?(di(1===(p=l.query).documents.length),d=io(gc(Gu(p.documents[0])))):d=io(Rf(l.query)),new Yu(d,l.targetId,0,l.lastListenSequenceNumber,n,s,Lr.fromBase64String(l.resumeToken))}function d_(l,n){const s=Dc(n.snapshotVersion),d=Dc(n.lastLimboFreeSnapshotVersion);let p;p=tt(n.target)?Ch(l.re,n.target):i_(l.re,n.target);const v=n.resumeToken.toBase64();return{targetId:n.targetId,canonicalId:H(n.target),readTime:s,resumeToken:v,lastListenSequenceNumber:n.sequenceNumber,lastLimboFreeSnapshotVersion:d,query:p}}function mg(l){const n=Rf({parent:l.parent,structuredQuery:l.structuredQuery});return"LAST"===l.limitType?vd(n,n.limit,"L"):n}function wh(l,n){return new gg(n.largestBatchId,Nd(l.re,n.overlayMutation))}function _g(l,n){const s=n.path.lastSegment();return[l,aa(n.path.popLast()),s]}function h_(l,n,s,d){return{indexId:l,uid:n.uid||"",sequenceNumber:s,readTime:Dc(d.readTime),documentKey:aa(d.documentKey.path),largestBatchId:d.largestBatchId}}class yg{getBundleMetadata(n,s){return Uf(n).get(s).next(d=>{if(d)return{id:(p=d).bundleId,createTime:Rd(p.createTime),version:p.version};var p})}saveBundleMetadata(n,s){return Uf(n).put({bundleId:(d=s).id,createTime:Dc(Ks(d.createTime)),version:d.version});var d}getNamedQuery(n,s){return vg(n).get(s).next(d=>{if(d)return{name:(p=d).name,query:mg(p.bundledQuery),readTime:Rd(p.readTime)};var p})}saveNamedQuery(n,s){return vg(n).put({name:(d=s).name,readTime:Dc(Ks(d.readTime)),bundledQuery:d.bundledQuery});var d}}function Uf(l){return oo(l,"bundles")}function vg(l){return oo(l,"namedQueries")}class Dh{constructor(n,s){this.It=n,this.userId=s}static oe(n,s){return new Dh(n,s.uid||"")}getOverlay(n,s){return Ih(n).get(_g(this.userId,s)).next(d=>d?wh(this.It,d):null)}getOverlays(n,s){const d=Tr();return ut.forEach(s,p=>this.getOverlay(n,p).next(v=>{null!==v&&d.set(p,v)})).next(()=>d)}saveOverlays(n,s,d){const p=[];return d.forEach((v,T)=>{const O=new gg(s,T);p.push(this.ue(n,O))}),ut.waitFor(p)}removeOverlaysForBatchId(n,s,d){const p=new Set;s.forEach(T=>p.add(aa(T.getCollectionPath())));const v=[];return p.forEach(T=>{const O=IDBKeyRange.bound([this.userId,T,d],[this.userId,T,d+1],!1,!0);v.push(Ih(n).Y("collectionPathOverlayIndex",O))}),ut.waitFor(v)}getOverlaysForCollection(n,s,d){const p=Tr(),v=aa(s),T=IDBKeyRange.bound([this.userId,v,d],[this.userId,v,Number.POSITIVE_INFINITY],!0);return Ih(n).W("collectionPathOverlayIndex",T).next(O=>{for(const z of O){const ee=wh(this.It,z);p.set(ee.getKey(),ee)}return p})}getOverlaysForCollectionGroup(n,s,d,p){const v=Tr();let T;const O=IDBKeyRange.bound([this.userId,s,d],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ih(n).Z({index:"collectionGroupOverlayIndex",range:O},(z,ee,me)=>{const Re=wh(this.It,ee);v.size()<p||Re.largestBatchId===T?(v.set(Re.getKey(),Re),T=Re.largestBatchId):me.done()}).next(()=>v)}ue(n,s){return Ih(n).put(function(d,p,v){const[T,O,z]=_g(p,v.mutation.key);return{userId:p,collectionPath:O,documentId:z,collectionGroup:v.mutation.key.getCollectionGroup(),largestBatchId:v.largestBatchId,overlayMutation:Sd(d.re,v.mutation)}}(this.It,this.userId,s))}}function Ih(l){return oo(l,"documentOverlays")}class Ac{constructor(){}ce(n,s){this.ae(n,s),s.he()}ae(n,s){if("nullValue"in n)this.le(s,5);else if("booleanValue"in n)this.le(s,10),s.fe(n.booleanValue?1:0);else if("integerValue"in n)this.le(s,15),s.fe(Br(n.integerValue));else if("doubleValue"in n){const d=Br(n.doubleValue);isNaN(d)?this.le(s,13):(this.le(s,15),uo(d)?s.fe(0):s.fe(d))}else if("timestampValue"in n){const d=n.timestampValue;this.le(s,20),"string"==typeof d?s.de(d):(s.de(`${d.seconds||""}`),s.fe(d.nanos||0))}else if("stringValue"in n)this._e(n.stringValue,s),this.we(s);else if("bytesValue"in n)this.le(s,30),s.me(ra(n.bytesValue)),this.we(s);else if("referenceValue"in n)this.ge(n.referenceValue,s);else if("geoPointValue"in n){const d=n.geoPointValue;this.le(s,45),s.fe(d.latitude||0),s.fe(d.longitude||0)}else"mapValue"in n?wa(n)?this.le(s,Number.MAX_SAFE_INTEGER):(this.ye(n.mapValue,s),this.we(s)):"arrayValue"in n?(this.pe(n.arrayValue,s),this.we(s)):An()}_e(n,s){this.le(s,25),this.Ie(n,s)}Ie(n,s){s.de(n)}ye(n,s){const d=n.fields||{};this.le(s,55);for(const p of Object.keys(d))this._e(p,s),this.ae(d[p],s)}pe(n,s){const d=n.values||[];this.le(s,50);for(const p of d)this.ae(p,s)}ge(n,s){this.le(s,37),_e.fromName(n).path.forEach(d=>{this.le(s,60),this.Ie(d,s)})}le(n,s){n.fe(s)}we(n){n.fe(2)}}function jf(l){if(0===l)return 8;let n=0;return l>>4==0&&(n+=4,l<<=4),l>>6==0&&(n+=2,l<<=2),l>>7==0&&(n+=1),n}function Vv(l){const n=64-function(s){let d=0;for(let p=0;p<8;++p){const v=jf(255&s[p]);if(d+=v,8!==v)break}return d}(l);return Math.ceil(n/8)}Ac.Te=new Ac;class bg{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(n){const s=n[Symbol.iterator]();let d=s.next();for(;!d.done;)this.Ae(d.value),d=s.next();this.Re()}be(n){const s=n[Symbol.iterator]();let d=s.next();for(;!d.done;)this.Pe(d.value),d=s.next();this.ve()}Ve(n){for(const s of n){const d=s.charCodeAt(0);if(d<128)this.Ae(d);else if(d<2048)this.Ae(960|d>>>6),this.Ae(128|63&d);else if(s<"\ud800"||"\udbff"<s)this.Ae(480|d>>>12),this.Ae(128|63&d>>>6),this.Ae(128|63&d);else{const p=s.codePointAt(0);this.Ae(240|p>>>18),this.Ae(128|63&p>>>12),this.Ae(128|63&p>>>6),this.Ae(128|63&p)}}this.Re()}Se(n){for(const s of n){const d=s.charCodeAt(0);if(d<128)this.Pe(d);else if(d<2048)this.Pe(960|d>>>6),this.Pe(128|63&d);else if(s<"\ud800"||"\udbff"<s)this.Pe(480|d>>>12),this.Pe(128|63&d>>>6),this.Pe(128|63&d);else{const p=s.codePointAt(0);this.Pe(240|p>>>18),this.Pe(128|63&p>>>12),this.Pe(128|63&p>>>6),this.Pe(128|63&p)}}this.ve()}De(n){const s=this.Ce(n),d=Vv(s);this.xe(1+d),this.buffer[this.position++]=255&d;for(let p=s.length-d;p<s.length;++p)this.buffer[this.position++]=255&s[p]}Ne(n){const s=this.Ce(n),d=Vv(s);this.xe(1+d),this.buffer[this.position++]=~(255&d);for(let p=s.length-d;p<s.length;++p)this.buffer[this.position++]=~(255&s[p])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(n){this.xe(n.length),this.buffer.set(n,this.position),this.position+=n.length}$e(){return this.buffer.slice(0,this.position)}Ce(n){const s=function(p){const v=new DataView(new ArrayBuffer(8));return v.setFloat64(0,p,!1),new Uint8Array(v.buffer)}(n),d=0!=(128&s[0]);s[0]^=d?255:128;for(let p=1;p<s.length;++p)s[p]^=d?255:0;return s}Ae(n){const s=255&n;0===s?(this.Oe(0),this.Oe(255)):255===s?(this.Oe(255),this.Oe(0)):this.Oe(s)}Pe(n){const s=255&n;0===s?(this.Fe(0),this.Fe(255)):255===s?(this.Fe(255),this.Fe(0)):this.Fe(n)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(n){this.xe(1),this.buffer[this.position++]=n}Fe(n){this.xe(1),this.buffer[this.position++]=~n}xe(n){const s=n+this.position;if(s<=this.buffer.length)return;let d=2*this.buffer.length;d<s&&(d=s);const p=new Uint8Array(d);p.set(this.buffer),this.buffer=p}}class NE{constructor(n){this.Be=n}me(n){this.Be.Ee(n)}de(n){this.Be.Ve(n)}fe(n){this.Be.De(n)}he(){this.Be.ke()}}class ME{constructor(n){this.Be=n}me(n){this.Be.be(n)}de(n){this.Be.Se(n)}fe(n){this.Be.Ne(n)}he(){this.Be.Me()}}class Ah{constructor(){this.Be=new bg,this.Le=new NE(this.Be),this.Ue=new ME(this.Be)}seed(n){this.Be.seed(n)}qe(n){return 0===n?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class cu{constructor(n,s,d,p){this.indexId=n,this.documentKey=s,this.arrayValue=d,this.directionalValue=p}Ke(){const n=this.directionalValue.length,s=0===n||255===this.directionalValue[n-1]?n+1:n,d=new Uint8Array(s);return d.set(this.directionalValue,0),s!==n?d.set([0],this.directionalValue.length):++d[d.length-1],new cu(this.indexId,this.documentKey,this.arrayValue,d)}}function Ju(l,n){let s=l.indexId-n.indexId;return 0!==s?s:(s=f_(l.arrayValue,n.arrayValue),0!==s?s:(s=f_(l.directionalValue,n.directionalValue),0!==s?s:_e.comparator(l.documentKey,n.documentKey)))}function f_(l,n){for(let s=0;s<l.length&&s<n.length;++s){const d=l[s]-n[s];if(0!==d)return d}return l.length-n.length}class Uv{constructor(n){this.collectionId=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment(),this.Ge=n.orderBy,this.Qe=[];for(const s of n.filters){const d=s;d.dt()?this.je=d:this.Qe.push(d)}}We(n){const s=Sn(n);if(void 0!==s&&!this.ze(s))return!1;const d=Ii(n);let p=0,v=0;for(;p<d.length&&this.ze(d[p]);++p);if(p===d.length)return!0;if(void 0!==this.je){const T=d[p];if(!this.He(this.je,T)||!this.Je(this.Ge[v++],T))return!1;++p}for(;p<d.length;++p){const T=d[p];if(v>=this.Ge.length||!this.Je(this.Ge[v++],T))return!1}return!0}ze(n){for(const s of this.Qe)if(this.He(s,n))return!0;return!1}He(n,s){return!(void 0===n||!n.field.isEqual(s.fieldPath))&&2===s.kind==("array-contains"===n.op||"array-contains-any"===n.op)}Je(n,s){return!!n.field.isEqual(s.fieldPath)&&(0===s.kind&&"asc"===n.dir||1===s.kind&&"desc"===n.dir)}}class xE{constructor(){this.Ye=new Eg}addToCollectionParentIndex(n,s){return this.Ye.add(s),ut.resolve()}getCollectionParents(n,s){return ut.resolve(this.Ye.getEntries(s))}addFieldIndex(n,s){return ut.resolve()}deleteFieldIndex(n,s){return ut.resolve()}getDocumentsMatchingTarget(n,s){return ut.resolve(null)}getIndexType(n,s){return ut.resolve(0)}getFieldIndexes(n,s){return ut.resolve([])}getNextCollectionGroupToUpdate(n){return ut.resolve(null)}getMinOffset(n,s){return ut.resolve(fr.min())}getMinOffsetFromCollectionGroup(n,s){return ut.resolve(fr.min())}updateCollectionGroup(n,s,d){return ut.resolve()}updateIndexEntries(n,s){return ut.resolve()}}class Eg{constructor(){this.index={}}add(n){const s=n.lastSegment(),d=n.popLast(),p=this.index[s]||new Dr(q.comparator),v=!p.has(d);return this.index[s]=p.add(d),v}has(n){const s=n.lastSegment(),d=n.popLast(),p=this.index[s];return p&&p.has(d)}getEntries(n){return(this.index[n]||new Dr(q.comparator)).toArray()}}const Cg=new Uint8Array(0);class p_{constructor(n,s){this.user=n,this.databaseId=s,this.Xe=new Eg,this.Ze=new Ir(d=>H(d),(d,p)=>De(d,p)),this.uid=n.uid||""}addToCollectionParentIndex(n,s){if(!this.Xe.has(s)){const d=s.lastSegment(),p=s.popLast();n.addOnCommittedListener(()=>{this.Xe.add(s)});const v={collectionId:d,parent:aa(p)};return wl(n).put(v)}return ut.resolve()}getCollectionParents(n,s){const d=[],p=IDBKeyRange.bound([s,""],[k(s),""],!1,!0);return wl(n).W(p).next(v=>{for(const T of v){if(T.collectionId!==s)break;d.push(Yl(T.parent))}return d})}addFieldIndex(n,s){const d=Hf(n),p={indexId:(T=s).indexId,collectionGroup:T.collectionGroup,fields:T.fields.map(O=>[O.fieldPath.canonicalString(),O.kind])};var T;delete p.indexId;const v=d.add(p);if(s.indexState){const T=Gf(n);return v.next(O=>{T.put(h_(O,this.user,s.indexState.sequenceNumber,s.indexState.offset))})}return v.next()}deleteFieldIndex(n,s){const d=Hf(n),p=Gf(n),v=$f(n);return d.delete(s.indexId).next(()=>p.delete(IDBKeyRange.bound([s.indexId],[s.indexId+1],!1,!0))).next(()=>v.delete(IDBKeyRange.bound([s.indexId],[s.indexId+1],!1,!0)))}getDocumentsMatchingTarget(n,s){const d=$f(n);let p=!0;const v=new Map;return ut.forEach(this.tn(s),T=>this.en(n,T).next(O=>{p&&(p=!!O),v.set(T,O)})).next(()=>{if(p){let T=Li();const O=[];return ut.forEach(v,(z,ee)=>{var me;Wt("IndexedDbIndexManager",`Using index ${me=z,`id=${me.indexId}|cg=${me.collectionGroup}|f=${me.fields.map(Or=>`${Or.fieldPath}:${Or.kind}`).join(",")}`} to execute ${H(s)}`);const Re=function(Or,ao){const Ar=Sn(ao);if(void 0===Ar)return null;for(const Vr of yt(Or,Ar.fieldPath))switch(Vr.op){case"array-contains-any":return Vr.value.arrayValue.values||[];case"array-contains":return[Vr.value]}return null}(ee,z),gt=function(Or,ao){const Ar=new Map;for(const Vr of Ii(ao))for(const jo of yt(Or,Vr.fieldPath))switch(jo.op){case"==":case"in":Ar.set(Vr.fieldPath.canonicalString(),jo.value);break;case"not-in":case"!=":return Ar.set(Vr.fieldPath.canonicalString(),jo.value),Array.from(Ar.values())}return null}(ee,z),Ft=function(Or,ao){const Ar=[];let Vr=!0;for(const jo of Ii(ao)){const al=0===jo.kind?Gt(Or,jo.fieldPath,Or.startAt):Cn(Or,jo.fieldPath,Or.startAt);Ar.push(al.value),Vr&&(Vr=al.inclusive)}return new Bo(Ar,Vr)}(ee,z),jt=function(Or,ao){const Ar=[];let Vr=!0;for(const jo of Ii(ao)){const al=0===jo.kind?Cn(Or,jo.fieldPath,Or.endAt):Gt(Or,jo.fieldPath,Or.endAt);Ar.push(al.value),Vr&&(Vr=al.inclusive)}return new Bo(Ar,Vr)}(ee,z),Rn=this.nn(z,ee,Ft),qn=this.nn(z,ee,jt),xr=this.sn(z,ee,gt),ls=this.rn(z.indexId,Re,Rn,Ft.inclusive,qn,jt.inclusive,xr);return ut.forEach(ls,Or=>d.J(Or,s.limit).next(ao=>{ao.forEach(Ar=>{const Vr=_e.fromSegments(Ar.documentKey);T.has(Vr)||(T=T.add(Vr),O.push(Vr))})}))}).next(()=>O)}return ut.resolve(null)})}tn(n){let s=this.Ze.get(n);return s||(s=[n],this.Ze.set(n,s),s)}rn(n,s,d,p,v,T,O){const z=(null!=s?s.length:1)*Math.max(d.length,v.length),ee=z/(null!=s?s.length:1),me=[];for(let Re=0;Re<z;++Re){const gt=s?this.on(s[Re/ee]):Cg,Ft=this.un(n,gt,d[Re%ee],p),jt=this.cn(n,gt,v[Re%ee],T),Rn=O.map(qn=>this.un(n,gt,qn,!0));me.push(...this.createRange(Ft,jt,Rn))}return me}un(n,s,d,p){const v=new cu(n,_e.empty(),s,d);return p?v:v.Ke()}cn(n,s,d,p){const v=new cu(n,_e.empty(),s,d);return p?v.Ke():v}en(n,s){const d=new Uv(s),p=null!=s.collectionGroup?s.collectionGroup:s.path.lastSegment();return this.getFieldIndexes(n,p).next(v=>{let T=null;for(const O of v)d.We(O)&&(!T||O.fields.length>T.fields.length)&&(T=O);return T})}getIndexType(n,s){let d=2;return ut.forEach(this.tn(s),p=>this.en(n,p).next(v=>{v?0!==d&&v.fields.length<function(T){let O=new Dr(ye.comparator),z=!1;for(const ee of T.filters){const me=ee;me.field.isKeyField()||("array-contains"===me.op||"array-contains-any"===me.op?z=!0:O=O.add(me.field))}for(const ee of T.orderBy)ee.field.isKeyField()||(O=O.add(ee.field));return O.size+(z?1:0)}(p)&&(d=1):d=0})).next(()=>d)}an(n,s){const d=new Ah;for(const p of Ii(n)){const v=s.data.field(p.fieldPath);if(null==v)return null;const T=d.qe(p.kind);Ac.Te.ce(v,T)}return d.$e()}on(n){const s=new Ah;return Ac.Te.ce(n,s.qe(0)),s.$e()}hn(n,s){const d=new Ah;return Ac.Te.ce(Ca(this.databaseId,s),d.qe(function(p){const v=Ii(p);return 0===v.length?0:v[v.length-1].kind}(n))),d.$e()}sn(n,s,d){if(null===d)return[];let p=[];p.push(new Ah);let v=0;for(const T of Ii(n)){const O=d[v++];for(const z of p)if(this.ln(s,T.fieldPath)&&Ta(O))p=this.fn(p,T,O);else{const ee=z.qe(T.kind);Ac.Te.ce(O,ee)}}return this.dn(p)}nn(n,s,d){return this.sn(n,s,d.position)}dn(n){const s=[];for(let d=0;d<n.length;++d)s[d]=n[d].$e();return s}fn(n,s,d){const p=[...n],v=[];for(const T of d.arrayValue.values||[])for(const O of p){const z=new Ah;z.seed(O.$e()),Ac.Te.ce(T,z.qe(s.kind)),v.push(z)}return v}ln(n,s){return!!n.filters.find(d=>d instanceof On&&d.field.isEqual(s)&&("in"===d.op||"not-in"===d.op))}getFieldIndexes(n,s){const d=Hf(n),p=Gf(n);return(s?d.W("collectionGroupIndex",IDBKeyRange.bound(s,s)):d.W()).next(v=>{const T=[];return ut.forEach(v,O=>p.get([O.indexId,this.uid]).next(z=>{T.push(function(ee,me){const Re=me?new zs(me.sequenceNumber,new fr(Rd(me.readTime),new _e(Yl(me.documentKey)),me.largestBatchId)):zs.empty(),gt=ee.fields.map(([Ft,jt])=>new ir(ye.fromServerFormat(Ft),jt));return new xt(ee.indexId,ee.collectionGroup,gt,Re)}(O,z))})).next(()=>T)})}getNextCollectionGroupToUpdate(n){return this.getFieldIndexes(n).next(s=>0===s.length?null:(s.sort((d,p)=>{const v=d.indexState.sequenceNumber-p.indexState.sequenceNumber;return 0!==v?v:bi(d.collectionGroup,p.collectionGroup)}),s[0].collectionGroup))}updateCollectionGroup(n,s,d){const p=Hf(n),v=Gf(n);return this._n(n).next(T=>p.W("collectionGroupIndex",IDBKeyRange.bound(s,s)).next(O=>ut.forEach(O,z=>v.put(h_(z.indexId,this.user,T,d)))))}updateIndexEntries(n,s){const d=new Map;return ut.forEach(s,(p,v)=>{const T=d.get(p.collectionGroup);return(T?ut.resolve(T):this.getFieldIndexes(n,p.collectionGroup)).next(O=>(d.set(p.collectionGroup,O),ut.forEach(O,z=>this.wn(n,p,z).next(ee=>{const me=this.mn(v,z);return ee.isEqual(me)?ut.resolve():this.gn(n,v,z,ee,me)}))))})}yn(n,s,d,p){return $f(n).put({indexId:p.indexId,uid:this.uid,arrayValue:p.arrayValue,directionalValue:p.directionalValue,orderedDocumentKey:this.hn(d,s.key),documentKey:s.key.path.toArray()})}pn(n,s,d,p){return $f(n).delete([p.indexId,this.uid,p.arrayValue,p.directionalValue,this.hn(d,s.key),s.key.path.toArray()])}wn(n,s,d){const p=$f(n);let v=new Dr(Ju);return p.Z({index:"documentKeyIndex",range:IDBKeyRange.only([d.indexId,this.uid,this.hn(d,s)])},(T,O)=>{v=v.add(new cu(d.indexId,s,O.arrayValue,O.directionalValue))}).next(()=>v)}mn(n,s){let d=new Dr(Ju);const p=this.an(s,n);if(null==p)return d;const v=Sn(s);if(null!=v){const T=n.data.field(v.fieldPath);if(Ta(T))for(const O of T.arrayValue.values||[])d=d.add(new cu(s.indexId,n.key,this.on(O),p))}else d=d.add(new cu(s.indexId,n.key,Cg,p));return d}gn(n,s,d,p,v){Wt("IndexedDbIndexManager","Updating index entries for document '%s'",s.key);const T=[];return function(O,z,ee,me,Re){const gt=O.getIterator(),Ft=z.getIterator();let jt=Yc(gt),Rn=Yc(Ft);for(;jt||Rn;){let qn=!1,xr=!1;if(jt&&Rn){const ls=ee(jt,Rn);ls<0?xr=!0:ls>0&&(qn=!0)}else null!=jt?xr=!0:qn=!0;qn?(me(Rn),Rn=Yc(Ft)):xr?(Re(jt),jt=Yc(gt)):(jt=Yc(gt),Rn=Yc(Ft))}}(p,v,Ju,O=>{T.push(this.yn(n,s,d,O))},O=>{T.push(this.pn(n,s,d,O))}),ut.waitFor(T)}_n(n){let s=1;return Gf(n).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(d,p,v)=>{v.done(),s=p.sequenceNumber+1}).next(()=>s)}createRange(n,s,d){d=d.sort((T,O)=>Ju(T,O)).filter((T,O,z)=>!O||0!==Ju(T,z[O-1]));const p=[];p.push(n);for(const T of d){const O=Ju(T,n),z=Ju(T,s);if(0===O)p[0]=n.Ke();else if(O>0&&z<0)p.push(T),p.push(T.Ke());else if(z>0)break}p.push(s);const v=[];for(let T=0;T<p.length;T+=2)v.push(IDBKeyRange.bound([p[T].indexId,this.uid,p[T].arrayValue,p[T].directionalValue,Cg,[]],[p[T+1].indexId,this.uid,p[T+1].arrayValue,p[T+1].directionalValue,Cg,[]]));return v}getMinOffsetFromCollectionGroup(n,s){return this.getFieldIndexes(n,s).next(g_)}getMinOffset(n,s){return ut.mapArray(this.tn(s),d=>this.en(n,d).next(p=>p||An())).next(g_)}}function wl(l){return oo(l,"collectionParents")}function $f(l){return oo(l,"indexEntries")}function Hf(l){return oo(l,"indexConfiguration")}function Gf(l){return oo(l,"indexState")}function g_(l){di(0!==l.length);let n=l[0].indexState.offset,s=n.largestBatchId;for(let d=1;d<l.length;d++){const p=l[d].indexState.offset;ya(p,n)<0&&(n=p),s<p.largestBatchId&&(s=p.largestBatchId)}return new fr(n.readTime,n.documentKey,s)}const jv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ja{constructor(n,s,d){this.cacheSizeCollectionThreshold=n,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=d}static withCacheSize(n){return new ja(n,ja.DEFAULT_COLLECTION_PERCENTILE,ja.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function m_(l,n,s){const d=l.store("mutations"),p=l.store("documentMutations"),v=[],T=IDBKeyRange.only(s.batchId);let O=0;const z=d.Z({range:T},(me,Re,gt)=>(O++,gt.delete()));v.push(z.next(()=>{di(1===O)}));const ee=[];for(const me of s.mutations){const Re=xd(n,me.key.path,s.batchId);v.push(p.delete(Re)),ee.push(me.key)}return ut.waitFor(v).next(()=>ee)}function Tg(l){if(!l)return 0;let n;if(l.document)n=l.document;else if(l.unknownDocument)n=l.unknownDocument;else{if(!l.noDocument)throw An();n=l.noDocument}return JSON.stringify(n).length}ja.DEFAULT_COLLECTION_PERCENTILE=10,ja.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ja.DEFAULT=new ja(41943040,ja.DEFAULT_COLLECTION_PERCENTILE,ja.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ja.DISABLED=new ja(-1,0,0);class Sh{constructor(n,s,d,p){this.userId=n,this.It=s,this.indexManager=d,this.referenceDelegate=p,this.In={}}static oe(n,s,d,p){di(""!==n.uid);const v=n.isAuthenticated()?n.uid:"";return new Sh(v,s,d,p)}checkEmpty(n){let s=!0;const d=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return wi(n).Z({index:"userMutationsIndex",range:d},(p,v,T)=>{s=!1,T.done()}).next(()=>s)}addMutationBatch(n,s,d,p){const v=Pd(n),T=wi(n);return T.add({}).next(O=>{di("number"==typeof O);const z=new Bf(O,s,d,p),ee=function(gt,Ft,jt){const Rn=jt.baseMutations.map(xr=>Sd(gt.re,xr)),qn=jt.mutations.map(xr=>Sd(gt.re,xr));return{userId:Ft,batchId:jt.batchId,localWriteTimeMs:jt.localWriteTime.toMillis(),baseMutations:Rn,mutations:qn}}(this.It,this.userId,z),me=[];let Re=new Dr((gt,Ft)=>bi(gt.canonicalString(),Ft.canonicalString()));for(const gt of p){const Ft=xd(this.userId,gt.key.path,O);Re=Re.add(gt.key.path.popLast()),me.push(T.put(ee)),me.push(v.put(Ft,cg))}return Re.forEach(gt=>{me.push(this.indexManager.addToCollectionParentIndex(n,gt))}),n.addOnCommittedListener(()=>{this.In[O]=z.keys()}),ut.waitFor(me).next(()=>z)})}lookupMutationBatch(n,s){return wi(n).get(s).next(d=>d?(di(d.userId===this.userId),Ic(this.It,d)):null)}Tn(n,s){return this.In[s]?ut.resolve(this.In[s]):this.lookupMutationBatch(n,s).next(d=>{if(d){const p=d.keys();return this.In[s]=p,p}return null})}getNextMutationBatchAfterBatchId(n,s){const d=s+1,p=IDBKeyRange.lowerBound([this.userId,d]);let v=null;return wi(n).Z({index:"userMutationsIndex",range:p},(T,O,z)=>{O.userId===this.userId&&(di(O.batchId>=d),v=Ic(this.It,O)),z.done()}).next(()=>v)}getHighestUnacknowledgedBatchId(n){const s=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let d=-1;return wi(n).Z({index:"userMutationsIndex",range:s,reverse:!0},(p,v,T)=>{d=v.batchId,T.done()}).next(()=>d)}getAllMutationBatches(n){const s=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return wi(n).W("userMutationsIndex",s).next(d=>d.map(p=>Ic(this.It,p)))}getAllMutationBatchesAffectingDocumentKey(n,s){const d=zu(this.userId,s.path),p=IDBKeyRange.lowerBound(d),v=[];return Pd(n).Z({range:p},(T,O,z)=>{const[ee,me,Re]=T,gt=Yl(me);if(ee===this.userId&&s.path.isEqual(gt))return wi(n).get(Re).next(Ft=>{if(!Ft)throw An();di(Ft.userId===this.userId),v.push(Ic(this.It,Ft))});z.done()}).next(()=>v)}getAllMutationBatchesAffectingDocumentKeys(n,s){let d=new Dr(bi);const p=[];return s.forEach(v=>{const T=zu(this.userId,v.path),O=IDBKeyRange.lowerBound(T),z=Pd(n).Z({range:O},(ee,me,Re)=>{const[gt,Ft,jt]=ee,Rn=Yl(Ft);gt===this.userId&&v.path.isEqual(Rn)?d=d.add(jt):Re.done()});p.push(z)}),ut.waitFor(p).next(()=>this.En(n,d))}getAllMutationBatchesAffectingQuery(n,s){const d=s.path,p=d.length+1,v=zu(this.userId,d),T=IDBKeyRange.lowerBound(v);let O=new Dr(bi);return Pd(n).Z({range:T},(z,ee,me)=>{const[Re,gt,Ft]=z,jt=Yl(gt);Re===this.userId&&d.isPrefixOf(jt)?jt.length===p&&(O=O.add(Ft)):me.done()}).next(()=>this.En(n,O))}En(n,s){const d=[],p=[];return s.forEach(v=>{p.push(wi(n).get(v).next(T=>{if(null===T)throw An();di(T.userId===this.userId),d.push(Ic(this.It,T))}))}),ut.waitFor(p).next(()=>d)}removeMutationBatch(n,s){return m_(n.ie,this.userId,s).next(d=>(n.addOnCommittedListener(()=>{this.An(s.batchId)}),ut.forEach(d,p=>this.referenceDelegate.markPotentiallyOrphaned(n,p))))}An(n){delete this.In[n]}performConsistencyCheck(n){return this.checkEmpty(n).next(s=>{if(!s)return ut.resolve();const d=IDBKeyRange.lowerBound([this.userId]),p=[];return Pd(n).Z({range:d},(v,T,O)=>{if(v[0]===this.userId){const z=Yl(v[1]);p.push(z)}else O.done()}).next(()=>{di(0===p.length)})})}containsKey(n,s){return $v(n,this.userId,s)}Rn(n){return __(n).get(this.userId).next(s=>s||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function $v(l,n,s){const d=zu(n,s.path),p=d[1],v=IDBKeyRange.lowerBound(d);let T=!1;return Pd(l).Z({range:v,X:!0},(O,z,ee)=>{const[me,Re,gt]=O;me===n&&Re===p&&(T=!0),ee.done()}).next(()=>T)}function wi(l){return oo(l,"mutations")}function Pd(l){return oo(l,"documentMutations")}function __(l){return oo(l,"mutationQueues")}class Xu{constructor(n){this.bn=n}next(){return this.bn+=2,this.bn}static Pn(){return new Xu(0)}static vn(){return new Xu(-1)}}class wg{constructor(n,s){this.referenceDelegate=n,this.It=s}allocateTargetId(n){return this.Vn(n).next(s=>{const d=new Xu(s.highestTargetId);return s.highestTargetId=d.next(),this.Sn(n,s).next(()=>s.highestTargetId)})}getLastRemoteSnapshotVersion(n){return this.Vn(n).next(s=>I.fromTimestamp(new M(s.lastRemoteSnapshotVersion.seconds,s.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(n){return this.Vn(n).next(s=>s.highestListenSequenceNumber)}setTargetsMetadata(n,s,d){return this.Vn(n).next(p=>(p.highestListenSequenceNumber=s,d&&(p.lastRemoteSnapshotVersion=d.toTimestamp()),s>p.highestListenSequenceNumber&&(p.highestListenSequenceNumber=s),this.Sn(n,p)))}addTargetData(n,s){return this.Dn(n,s).next(()=>this.Vn(n).next(d=>(d.targetCount+=1,this.Cn(s,d),this.Sn(n,d))))}updateTargetData(n,s){return this.Dn(n,s)}removeTargetData(n,s){return this.removeMatchingKeysForTargetId(n,s.targetId).next(()=>la(n).delete(s.targetId)).next(()=>this.Vn(n)).next(d=>(di(d.targetCount>0),d.targetCount-=1,this.Sn(n,d)))}removeTargets(n,s,d){let p=0;const v=[];return la(n).Z((T,O)=>{const z=kd(O);z.sequenceNumber<=s&&null===d.get(z.targetId)&&(p++,v.push(this.removeTargetData(n,z)))}).next(()=>ut.waitFor(v)).next(()=>p)}forEachTarget(n,s){return la(n).Z((d,p)=>{const v=kd(p);s(v)})}Vn(n){return y_(n).get("targetGlobalKey").next(s=>(di(null!==s),s))}Sn(n,s){return y_(n).put("targetGlobalKey",s)}Dn(n,s){return la(n).put(d_(this.It,s))}Cn(n,s){let d=!1;return n.targetId>s.highestTargetId&&(s.highestTargetId=n.targetId,d=!0),n.sequenceNumber>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n.sequenceNumber,d=!0),d}getTargetCount(n){return this.Vn(n).next(s=>s.targetCount)}getTargetData(n,s){const d=H(s),p=IDBKeyRange.bound([d,Number.NEGATIVE_INFINITY],[d,Number.POSITIVE_INFINITY]);let v=null;return la(n).Z({range:p,index:"queryTargetsIndex"},(T,O,z)=>{const ee=kd(O);De(s,ee.target)&&(v=ee,z.done())}).next(()=>v)}addMatchingKeys(n,s,d){const p=[],v=Sc(n);return s.forEach(T=>{const O=aa(T.path);p.push(v.put({targetId:d,path:O})),p.push(this.referenceDelegate.addReference(n,d,T))}),ut.waitFor(p)}removeMatchingKeys(n,s,d){const p=Sc(n);return ut.forEach(s,v=>{const T=aa(v.path);return ut.waitFor([p.delete([d,T]),this.referenceDelegate.removeReference(n,d,v)])})}removeMatchingKeysForTargetId(n,s){const d=Sc(n),p=IDBKeyRange.bound([s],[s+1],!1,!0);return d.delete(p)}getMatchingKeysForTargetId(n,s){const d=IDBKeyRange.bound([s],[s+1],!1,!0),p=Sc(n);let v=Li();return p.Z({range:d,X:!0},(T,O,z)=>{const ee=Yl(T[1]),me=new _e(ee);v=v.add(me)}).next(()=>v)}containsKey(n,s){const d=aa(s.path),p=IDBKeyRange.bound([d],[k(d)],!1,!0);let v=0;return Sc(n).Z({index:"documentTargetsIndex",X:!0,range:p},([T,O],z,ee)=>{0!==T&&(v++,ee.done())}).next(()=>v>0)}se(n,s){return la(n).get(s).next(d=>d?kd(d):null)}}function la(l){return oo(l,"targets")}function y_(l){return oo(l,"targetGlobal")}function Sc(l){return oo(l,"targetDocuments")}function Zf([l,n],[s,d]){const p=bi(l,s);return 0===p?bi(n,d):p}class Nc{constructor(n){this.xn=n,this.buffer=new Dr(Zf),this.Nn=0}kn(){return++this.Nn}On(n){const s=[n,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(s);else{const d=this.buffer.last();Zf(s,d)<0&&(this.buffer=this.buffer.delete(d).add(s))}}get maxValue(){return this.buffer.last()[0]}}class Dg{constructor(n,s,d){this.garbageCollector=n,this.asyncQueue=s,this.localStore=d,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(n){var s=this;Wt("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,_.Z)(function*(){s.Mn=null;try{yield s.localStore.collectGarbage(s.garbageCollector)}catch(d){yo(d)?Wt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",d):yield Oo(d)}yield s.Fn(3e5)}))}}class v_{constructor(n,s){this.$n=n,this.params=s}calculateTargetCount(n,s){return this.$n.Bn(n).next(d=>Math.floor(s/100*d))}nthSequenceNumber(n,s){if(0===s)return ut.resolve(no.at);const d=new Nc(s);return this.$n.forEachTarget(n,p=>d.On(p.sequenceNumber)).next(()=>this.$n.Ln(n,p=>d.On(p))).next(()=>d.maxValue)}removeTargets(n,s,d){return this.$n.removeTargets(n,s,d)}removeOrphanedDocuments(n,s){return this.$n.removeOrphanedDocuments(n,s)}collect(n,s){return-1===this.params.cacheSizeCollectionThreshold?(Wt("LruGarbageCollector","Garbage collection skipped; disabled"),ut.resolve(jv)):this.getCacheSize(n).next(d=>d<this.params.cacheSizeCollectionThreshold?(Wt("LruGarbageCollector",`Garbage collection skipped; Cache size ${d} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jv):this.Un(n,s))}getCacheSize(n){return this.$n.getCacheSize(n)}Un(n,s){let d,p,v,T,O,z,ee;const me=Date.now();return this.calculateTargetCount(n,this.params.percentileToCollect).next(Re=>(Re>this.params.maximumSequenceNumbersToCollect?(Wt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Re}`),p=this.params.maximumSequenceNumbersToCollect):p=Re,T=Date.now(),this.nthSequenceNumber(n,p))).next(Re=>(d=Re,O=Date.now(),this.removeTargets(n,d,s))).next(Re=>(v=Re,z=Date.now(),this.removeOrphanedDocuments(n,d))).next(Re=>(ee=Date.now(),Ja()<=Ee.in.DEBUG&&Wt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${T-me}ms\n\tDetermined least recently used ${p} in `+(O-T)+`ms\n\tRemoved ${v} targets in `+(z-O)+`ms\n\tRemoved ${Re} documents in `+(ee-z)+`ms\nTotal Duration: ${ee-me}ms`),ut.resolve({didRun:!0,sequenceNumbersCollected:p,targetsRemoved:v,documentsRemoved:Re})))}}class Ig{constructor(n,s){this.db=n,this.garbageCollector=new v_(this,s)}Bn(n){const s=this.qn(n);return this.db.getTargetCache().getTargetCount(n).next(d=>s.next(p=>d+p))}qn(n){let s=0;return this.Ln(n,d=>{s++}).next(()=>s)}forEachTarget(n,s){return this.db.getTargetCache().forEachTarget(n,s)}Ln(n,s){return this.Kn(n,(d,p)=>s(p))}addReference(n,s,d){return Ag(n,d)}removeReference(n,s,d){return Ag(n,d)}removeTargets(n,s,d){return this.db.getTargetCache().removeTargets(n,s,d)}markPotentiallyOrphaned(n,s){return Ag(n,s)}Gn(n,s){return function(d,p){let v=!1;return __(d).tt(T=>$v(d,T,p).next(O=>(O&&(v=!0),ut.resolve(!O)))).next(()=>v)}(n,s)}removeOrphanedDocuments(n,s){const d=this.db.getRemoteDocumentCache().newChangeBuffer(),p=[];let v=0;return this.Kn(n,(T,O)=>{if(O<=s){const z=this.Gn(n,T).next(ee=>{if(!ee)return v++,d.getEntry(n,T).next(()=>(d.removeEntry(T,I.min()),Sc(n).delete([0,aa(T.path)])))});p.push(z)}}).next(()=>ut.waitFor(p)).next(()=>d.apply(n)).next(()=>v)}removeTarget(n,s){const d=s.withSequenceNumber(n.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(n,d)}updateLimboDocument(n,s){return Ag(n,s)}Kn(n,s){const d=Sc(n);let p,v=no.at;return d.Z({index:"documentTargetsIndex"},([T,O],{path:z,sequenceNumber:ee})=>{0===T?(v!==no.at&&s(new _e(Yl(p)),v),v=ee,p=z):v=no.at}).next(()=>{v!==no.at&&s(new _e(Yl(p)),v)})}getCacheSize(n){return this.db.getRemoteDocumentCache().getSize(n)}}function Ag(l,n){return Sc(l).put((d=l.currentSequenceNumber,{targetId:0,path:aa(n.path),sequenceNumber:d}));var d}class Sg{constructor(){this.changes=new Ir(n=>n.toString(),(n,s)=>n.isEqual(s)),this.changesApplied=!1}addEntry(n){this.assertNotApplied(),this.changes.set(n.key,n)}removeEntry(n,s){this.assertNotApplied(),this.changes.set(n,Hr.newInvalidDocument(n).setReadTime(s))}getEntry(n,s){this.assertNotApplied();const d=this.changes.get(s);return void 0!==d?ut.resolve(d):this.getFromCache(n,s)}getEntries(n,s){return this.getAllFromCache(n,s)}apply(n){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(n)}assertNotApplied(){}}class OE{constructor(n){this.It=n}setIndexManager(n){this.indexManager=n}addEntry(n,s,d){return Mc(n).put(d)}removeEntry(n,s,d){return Mc(n).delete(function(p,v){const T=p.path.toArray();return[T.slice(0,T.length-2),T[T.length-2],Vf(v),T[T.length-1]]}(s,d))}updateMetadata(n,s){return this.getMetadata(n).next(d=>(d.byteSize+=s,this.Qn(n,d)))}getEntry(n,s){let d=Hr.newInvalidDocument(s);return Mc(n).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ed(s))},(p,v)=>{d=this.jn(s,v)}).next(()=>d)}Wn(n,s){let d={size:0,document:Hr.newInvalidDocument(s)};return Mc(n).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ed(s))},(p,v)=>{d={document:this.jn(s,v),size:Tg(v)}}).next(()=>d)}getEntries(n,s){let d=ro();return this.zn(n,s,(p,v)=>{const T=this.jn(p,v);d=d.insert(p,T)}).next(()=>d)}Hn(n,s){let d=ro(),p=new $r(_e.comparator);return this.zn(n,s,(v,T)=>{const O=this.jn(v,T);d=d.insert(v,O),p=p.insert(v,Tg(T))}).next(()=>({documents:d,Jn:p}))}zn(n,s,d){if(s.isEmpty())return ut.resolve();let p=new Dr(Gv);s.forEach(z=>p=p.add(z));const v=IDBKeyRange.bound(ed(p.first()),ed(p.last())),T=p.getIterator();let O=T.getNext();return Mc(n).Z({index:"documentKeyIndex",range:v},(z,ee,me)=>{const Re=_e.fromSegments([...ee.prefixPath,ee.collectionGroup,ee.documentId]);for(;O&&Gv(O,Re)<0;)d(O,null),O=T.getNext();O&&O.isEqual(Re)&&(d(O,ee),O=T.hasNext()?T.getNext():null),O?me.j(ed(O)):me.done()}).next(()=>{for(;O;)d(O,null),O=T.hasNext()?T.getNext():null})}getAllFromCollection(n,s,d){const p=[s.popLast().toArray(),s.lastSegment(),Vf(d.readTime),d.documentKey.path.isEmpty()?"":d.documentKey.path.lastSegment()],v=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Mc(n).W(IDBKeyRange.bound(p,v,!0)).next(T=>{let O=ro();for(const z of T){const ee=this.jn(_e.fromSegments(z.prefixPath.concat(z.collectionGroup,z.documentId)),z);O=O.insert(ee.key,ee)}return O})}getAllFromCollectionGroup(n,s,d,p){let v=ro();const T=Hv(s,d),O=Hv(s,fr.max());return Mc(n).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(T,O,!0)},(z,ee,me)=>{const Re=this.jn(_e.fromSegments(ee.prefixPath.concat(ee.collectionGroup,ee.documentId)),ee);v=v.insert(Re.key,Re),v.size===p&&me.done()}).next(()=>v)}newChangeBuffer(n){return new Wf(this,!!n&&n.trackRemovals)}getSize(n){return this.getMetadata(n).next(s=>s.byteSize)}getMetadata(n){return qf(n).get("remoteDocumentGlobalKey").next(s=>(di(!!s),s))}Qn(n,s){return qf(n).put("remoteDocumentGlobalKey",s)}jn(n,s){if(s){const d=function Bv(l,n){let s;if(n.document)s=Of(l.re,n.document,!!n.hasCommittedMutations);else if(n.noDocument){const d=_e.fromSegments(n.noDocument.path),p=Rd(n.noDocument.readTime);s=Hr.newNoDocument(d,p),n.hasCommittedMutations&&s.setHasCommittedMutations()}else{if(!n.unknownDocument)return An();{const d=_e.fromSegments(n.unknownDocument.path),p=Rd(n.unknownDocument.version);s=Hr.newUnknownDocument(d,p)}}return n.readTime&&s.setReadTime(function(d){const p=new M(d[0],d[1]);return I.fromTimestamp(p)}(n.readTime)),s}(this.It,s);if(!d.isNoDocument()||!d.version.isEqual(I.min()))return d}return Hr.newInvalidDocument(n)}}function uu(l){return new OE(l)}class Wf extends Sg{constructor(n,s){super(),this.Yn=n,this.trackRemovals=s,this.Xn=new Ir(d=>d.toString(),(d,p)=>d.isEqual(p))}applyChanges(n){const s=[];let d=0,p=new Dr((v,T)=>bi(v.canonicalString(),T.canonicalString()));return this.changes.forEach((v,T)=>{const O=this.Xn.get(v);if(s.push(this.Yn.removeEntry(n,v,O.readTime)),T.isValidDocument()){const z=Qu(this.Yn.It,T);p=p.add(v.path.popLast()),d+=Tg(z)-O.size,s.push(this.Yn.addEntry(n,v,z))}else if(d-=O.size,this.trackRemovals){const z=Qu(this.Yn.It,T.convertToNoDocument(I.min()));s.push(this.Yn.addEntry(n,v,z))}}),p.forEach(v=>{s.push(this.Yn.indexManager.addToCollectionParentIndex(n,v))}),s.push(this.Yn.updateMetadata(n,d)),ut.waitFor(s)}getFromCache(n,s){return this.Yn.Wn(n,s).next(d=>(this.Xn.set(s,{size:d.size,readTime:d.document.readTime}),d.document))}getAllFromCache(n,s){return this.Yn.Hn(n,s).next(({documents:d,Jn:p})=>(p.forEach((v,T)=>{this.Xn.set(v,{size:T,readTime:d.get(v).readTime})}),d))}}function qf(l){return oo(l,"remoteDocumentGlobal")}function Mc(l){return oo(l,"remoteDocumentsV14")}function ed(l){const n=l.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],n[n.length-1]]}function Hv(l,n){const s=n.documentKey.path.toArray();return[l,Vf(n.readTime),s.slice(0,s.length-2),s.length>0?s[s.length-1]:""]}function Gv(l,n){const s=l.path.toArray(),d=n.path.toArray();let p=0;for(let v=0;v<s.length-2&&v<d.length-2;++v)if(p=bi(s[v],d[v]),p)return p;return p=bi(s.length,d.length),p||(p=bi(s[s.length-2],d[d.length-2]),p||bi(s[s.length-1],d[d.length-1]))}class b_{constructor(n,s){this.overlayedDocument=n,this.mutatedFields=s}}class Ng{constructor(n,s,d,p){this.remoteDocumentCache=n,this.mutationQueue=s,this.documentOverlayCache=d,this.indexManager=p}getDocument(n,s){let d=null;return this.documentOverlayCache.getOverlay(n,s).next(p=>(d=p,this.getBaseDocument(n,s,d))).next(p=>(null!==d&&Hu(d.mutation,p,vo.empty(),M.now()),p))}getDocuments(n,s){return this.remoteDocumentCache.getEntries(n,s).next(d=>this.getLocalViewOfDocuments(n,d,Li()).next(()=>d))}getLocalViewOfDocuments(n,s,d=Li()){const p=Tr();return this.populateOverlays(n,p,s).next(()=>this.computeViews(n,s,p,d).next(v=>{let T=zl();return v.forEach((O,z)=>{T=T.insert(O,z.overlayedDocument)}),T}))}getOverlayedDocuments(n,s){const d=Tr();return this.populateOverlays(n,d,s).next(()=>this.computeViews(n,s,d,Li()))}populateOverlays(n,s,d){const p=[];return d.forEach(v=>{s.has(v)||p.push(v)}),this.documentOverlayCache.getOverlays(n,p).next(v=>{v.forEach((T,O)=>{s.set(T,O)})})}computeViews(n,s,d,p){let v=ro();const T=El(),O=El();return s.forEach((z,ee)=>{const me=d.get(ee.key);p.has(ee.key)&&(void 0===me||me.mutation instanceof Ec)?v=v.insert(ee.key,ee):void 0!==me&&(T.set(ee.key,me.mutation.getFieldMask()),Hu(me.mutation,ee,me.mutation.getFieldMask(),M.now()))}),this.recalculateAndSaveOverlays(n,v).next(z=>(z.forEach((ee,me)=>T.set(ee,me)),s.forEach((ee,me)=>{var Re;return O.set(ee,new b_(me,null!==(Re=T.get(ee))&&void 0!==Re?Re:null))}),O))}recalculateAndSaveOverlays(n,s){const d=El();let p=new $r((T,O)=>T-O),v=Li();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(n,s).next(T=>{for(const O of T)O.keys().forEach(z=>{const ee=s.get(z);if(null===ee)return;let me=d.get(z)||vo.empty();me=O.applyToLocalView(ee,me),d.set(z,me);const Re=(p.get(O.batchId)||Li()).add(z);p=p.insert(O.batchId,Re)})}).next(()=>{const T=[],O=p.getReverseIterator();for(;O.hasNext();){const z=O.getNext(),ee=z.key,me=z.value,Re=Mf();me.forEach(gt=>{if(!v.has(gt)){const Ft=il(s.get(gt),d.get(gt));null!==Ft&&Re.set(gt,Ft),v=v.add(gt)}}),T.push(this.documentOverlayCache.saveOverlays(n,ee,Re))}return ut.waitFor(T)}).next(()=>d)}recalculateAndSaveOverlaysForDocumentKeys(n,s){return this.remoteDocumentCache.getEntries(n,s).next(d=>this.recalculateAndSaveOverlays(n,d))}getDocumentsMatchingQuery(n,s,d){return _e.isDocumentKey((p=s).path)&&null===p.collectionGroup&&0===p.filters.length?this.getDocumentsMatchingDocumentQuery(n,s.path):Wl(s)?this.getDocumentsMatchingCollectionGroupQuery(n,s,d):this.getDocumentsMatchingCollectionQuery(n,s,d);var p}getNextDocuments(n,s,d,p){return this.remoteDocumentCache.getAllFromCollectionGroup(n,s,d,p).next(v=>{const T=p-v.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(n,s,d.largestBatchId,p-v.size):ut.resolve(Tr());let O=-1,z=v;return T.next(ee=>ut.forEach(ee,(me,Re)=>(O<Re.largestBatchId&&(O=Re.largestBatchId),v.get(me)?ut.resolve():this.getBaseDocument(n,me,Re).next(gt=>{z=z.insert(me,gt)}))).next(()=>this.populateOverlays(n,ee,v)).next(()=>this.computeViews(n,z,ee,Li())).next(me=>({batchId:O,changes:Nf(me)})))})}getDocumentsMatchingDocumentQuery(n,s){return this.getDocument(n,new _e(s)).next(d=>{let p=zl();return d.isFoundDocument()&&(p=p.insert(d.key,d)),p})}getDocumentsMatchingCollectionGroupQuery(n,s,d){const p=s.collectionGroup;let v=zl();return this.indexManager.getCollectionParents(n,p).next(T=>ut.forEach(T,O=>{const z=(ee=s,me=O.child(p),new tl(me,null,ee.explicitOrderBy.slice(),ee.filters.slice(),ee.limit,ee.limitType,ee.startAt,ee.endAt));var ee,me;return this.getDocumentsMatchingCollectionQuery(n,z,d).next(ee=>{ee.forEach((me,Re)=>{v=v.insert(me,Re)})})}).next(()=>v))}getDocumentsMatchingCollectionQuery(n,s,d){let p;return this.remoteDocumentCache.getAllFromCollection(n,s.path,d).next(v=>(p=v,this.documentOverlayCache.getOverlaysForCollection(n,s.path,d.largestBatchId))).next(v=>{v.forEach((O,z)=>{const ee=z.getKey();null===p.get(ee)&&(p=p.insert(ee,Hr.newInvalidDocument(ee)))});let T=zl();return p.forEach((O,z)=>{const ee=v.get(O);void 0!==ee&&Hu(ee.mutation,z,vo.empty(),M.now()),Vu(s,z)&&(T=T.insert(O,z))}),T})}getBaseDocument(n,s,d){return null===d||1===d.mutation.type?this.remoteDocumentCache.getEntry(n,s):ut.resolve(Hr.newInvalidDocument(s))}}class Mg{constructor(n){this.It=n,this.Zn=new Map,this.ts=new Map}getBundleMetadata(n,s){return ut.resolve(this.Zn.get(s))}saveBundleMetadata(n,s){var d;return this.Zn.set(s.id,{id:(d=s).id,version:d.version,createTime:Ks(d.createTime)}),ut.resolve()}getNamedQuery(n,s){return ut.resolve(this.ts.get(s))}saveNamedQuery(n,s){return this.ts.set(s.name,{name:(d=s).name,query:mg(d.bundledQuery),readTime:Ks(d.readTime)}),ut.resolve();var d}}class zf{constructor(){this.overlays=new $r(_e.comparator),this.es=new Map}getOverlay(n,s){return ut.resolve(this.overlays.get(s))}getOverlays(n,s){const d=Tr();return ut.forEach(s,p=>this.getOverlay(n,p).next(v=>{null!==v&&d.set(p,v)})).next(()=>d)}saveOverlays(n,s,d){return d.forEach((p,v)=>{this.ue(n,s,v)}),ut.resolve()}removeOverlaysForBatchId(n,s,d){const p=this.es.get(d);return void 0!==p&&(p.forEach(v=>this.overlays=this.overlays.remove(v)),this.es.delete(d)),ut.resolve()}getOverlaysForCollection(n,s,d){const p=Tr(),v=s.length+1,T=new _e(s.child("")),O=this.overlays.getIteratorFrom(T);for(;O.hasNext();){const z=O.getNext().value,ee=z.getKey();if(!s.isPrefixOf(ee.path))break;ee.path.length===v&&z.largestBatchId>d&&p.set(z.getKey(),z)}return ut.resolve(p)}getOverlaysForCollectionGroup(n,s,d,p){let v=new $r((ee,me)=>ee-me);const T=this.overlays.getIterator();for(;T.hasNext();){const ee=T.getNext().value;if(ee.getKey().getCollectionGroup()===s&&ee.largestBatchId>d){let me=v.get(ee.largestBatchId);null===me&&(me=Tr(),v=v.insert(ee.largestBatchId,me)),me.set(ee.getKey(),ee)}}const O=Tr(),z=v.getIterator();for(;z.hasNext()&&(z.getNext().value.forEach((ee,me)=>O.set(ee,me)),!(O.size()>=p)););return ut.resolve(O)}ue(n,s,d){const p=this.overlays.get(d.key);if(null!==p){const T=this.es.get(p.largestBatchId).delete(d.key);this.es.set(p.largestBatchId,T)}this.overlays=this.overlays.insert(d.key,new gg(s,d));let v=this.es.get(s);void 0===v&&(v=Li(),this.es.set(s,v)),this.es.set(s,v.add(d.key))}}class Zv{constructor(){this.ns=new Dr(Ms.ss),this.rs=new Dr(Ms.os)}isEmpty(){return this.ns.isEmpty()}addReference(n,s){const d=new Ms(n,s);this.ns=this.ns.add(d),this.rs=this.rs.add(d)}us(n,s){n.forEach(d=>this.addReference(d,s))}removeReference(n,s){this.cs(new Ms(n,s))}hs(n,s){n.forEach(d=>this.removeReference(d,s))}ls(n){const s=new _e(new q([])),d=new Ms(s,n),p=new Ms(s,n+1),v=[];return this.rs.forEachInRange([d,p],T=>{this.cs(T),v.push(T.key)}),v}fs(){this.ns.forEach(n=>this.cs(n))}cs(n){this.ns=this.ns.delete(n),this.rs=this.rs.delete(n)}ds(n){const s=new _e(new q([])),d=new Ms(s,n),p=new Ms(s,n+1);let v=Li();return this.rs.forEachInRange([d,p],T=>{v=v.add(T.key)}),v}containsKey(n){const s=new Ms(n,0),d=this.ns.firstAfterOrEqual(s);return null!==d&&n.isEqual(d.key)}}class Ms{constructor(n,s){this.key=n,this._s=s}static ss(n,s){return _e.comparator(n.key,s.key)||bi(n._s,s._s)}static os(n,s){return bi(n._s,s._s)||_e.comparator(n.key,s.key)}}class Wv{constructor(n,s){this.indexManager=n,this.referenceDelegate=s,this.mutationQueue=[],this.ws=1,this.gs=new Dr(Ms.ss)}checkEmpty(n){return ut.resolve(0===this.mutationQueue.length)}addMutationBatch(n,s,d,p){const v=this.ws;this.ws++;const T=new Bf(v,s,d,p);this.mutationQueue.push(T);for(const O of p)this.gs=this.gs.add(new Ms(O.key,v)),this.indexManager.addToCollectionParentIndex(n,O.key.path.popLast());return ut.resolve(T)}lookupMutationBatch(n,s){return ut.resolve(this.ys(s))}getNextMutationBatchAfterBatchId(n,s){const p=this.ps(s+1),v=p<0?0:p;return ut.resolve(this.mutationQueue.length>v?this.mutationQueue[v]:null)}getHighestUnacknowledgedBatchId(){return ut.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(n){return ut.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(n,s){const d=new Ms(s,0),p=new Ms(s,Number.POSITIVE_INFINITY),v=[];return this.gs.forEachInRange([d,p],T=>{const O=this.ys(T._s);v.push(O)}),ut.resolve(v)}getAllMutationBatchesAffectingDocumentKeys(n,s){let d=new Dr(bi);return s.forEach(p=>{const v=new Ms(p,0),T=new Ms(p,Number.POSITIVE_INFINITY);this.gs.forEachInRange([v,T],O=>{d=d.add(O._s)})}),ut.resolve(this.Is(d))}getAllMutationBatchesAffectingQuery(n,s){const d=s.path,p=d.length+1;let v=d;_e.isDocumentKey(v)||(v=v.child(""));const T=new Ms(new _e(v),0);let O=new Dr(bi);return this.gs.forEachWhile(z=>{const ee=z.key.path;return!!d.isPrefixOf(ee)&&(ee.length===p&&(O=O.add(z._s)),!0)},T),ut.resolve(this.Is(O))}Is(n){const s=[];return n.forEach(d=>{const p=this.ys(d);null!==p&&s.push(p)}),s}removeMutationBatch(n,s){di(0===this.Ts(s.batchId,"removed")),this.mutationQueue.shift();let d=this.gs;return ut.forEach(s.mutations,p=>{const v=new Ms(p.key,s.batchId);return d=d.delete(v),this.referenceDelegate.markPotentiallyOrphaned(n,p.key)}).next(()=>{this.gs=d})}An(n){}containsKey(n,s){const d=new Ms(s,0),p=this.gs.firstAfterOrEqual(d);return ut.resolve(s.isEqual(p&&p.key))}performConsistencyCheck(n){return ut.resolve()}Ts(n,s){return this.ps(n)}ps(n){return 0===this.mutationQueue.length?0:n-this.mutationQueue[0].batchId}ys(n){const s=this.ps(n);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}class qv{constructor(n){this.Es=n,this.docs=new $r(_e.comparator),this.size=0}setIndexManager(n){this.indexManager=n}addEntry(n,s){const d=s.key,p=this.docs.get(d),v=p?p.size:0,T=this.Es(s);return this.docs=this.docs.insert(d,{document:s.mutableCopy(),size:T}),this.size+=T-v,this.indexManager.addToCollectionParentIndex(n,d.path.popLast())}removeEntry(n){const s=this.docs.get(n);s&&(this.docs=this.docs.remove(n),this.size-=s.size)}getEntry(n,s){const d=this.docs.get(s);return ut.resolve(d?d.document.mutableCopy():Hr.newInvalidDocument(s))}getEntries(n,s){let d=ro();return s.forEach(p=>{const v=this.docs.get(p);d=d.insert(p,v?v.document.mutableCopy():Hr.newInvalidDocument(p))}),ut.resolve(d)}getAllFromCollection(n,s,d){let p=ro();const v=new _e(s.child("")),T=this.docs.getIteratorFrom(v);for(;T.hasNext();){const{key:O,value:{document:z}}=T.getNext();if(!s.isPrefixOf(O.path))break;O.path.length>s.length+1||ya(_o(z),d)<=0||(p=p.insert(z.key,z.mutableCopy()))}return ut.resolve(p)}getAllFromCollectionGroup(n,s,d,p){An()}As(n,s){return ut.forEach(this.docs,d=>s(d))}newChangeBuffer(n){return new Fd(this)}getSize(n){return ut.resolve(this.size)}}class Fd extends Sg{constructor(n){super(),this.Yn=n}applyChanges(n){const s=[];return this.changes.forEach((d,p)=>{p.isValidDocument()?s.push(this.Yn.addEntry(n,p)):this.Yn.removeEntry(d)}),ut.waitFor(s)}getFromCache(n,s){return this.Yn.getEntry(n,s)}getAllFromCache(n,s){return this.Yn.getEntries(n,s)}}class zv{constructor(n){this.persistence=n,this.Rs=new Ir(s=>H(s),De),this.lastRemoteSnapshotVersion=I.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Zv,this.targetCount=0,this.vs=Xu.Pn()}forEachTarget(n,s){return this.Rs.forEach((d,p)=>s(p)),ut.resolve()}getLastRemoteSnapshotVersion(n){return ut.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(n){return ut.resolve(this.bs)}allocateTargetId(n){return this.highestTargetId=this.vs.next(),ut.resolve(this.highestTargetId)}setTargetsMetadata(n,s,d){return d&&(this.lastRemoteSnapshotVersion=d),s>this.bs&&(this.bs=s),ut.resolve()}Dn(n){this.Rs.set(n.target,n);const s=n.targetId;s>this.highestTargetId&&(this.vs=new Xu(s),this.highestTargetId=s),n.sequenceNumber>this.bs&&(this.bs=n.sequenceNumber)}addTargetData(n,s){return this.Dn(s),this.targetCount+=1,ut.resolve()}updateTargetData(n,s){return this.Dn(s),ut.resolve()}removeTargetData(n,s){return this.Rs.delete(s.target),this.Ps.ls(s.targetId),this.targetCount-=1,ut.resolve()}removeTargets(n,s,d){let p=0;const v=[];return this.Rs.forEach((T,O)=>{O.sequenceNumber<=s&&null===d.get(O.targetId)&&(this.Rs.delete(T),v.push(this.removeMatchingKeysForTargetId(n,O.targetId)),p++)}),ut.waitFor(v).next(()=>p)}getTargetCount(n){return ut.resolve(this.targetCount)}getTargetData(n,s){const d=this.Rs.get(s)||null;return ut.resolve(d)}addMatchingKeys(n,s,d){return this.Ps.us(s,d),ut.resolve()}removeMatchingKeys(n,s,d){this.Ps.hs(s,d);const p=this.persistence.referenceDelegate,v=[];return p&&s.forEach(T=>{v.push(p.markPotentiallyOrphaned(n,T))}),ut.waitFor(v)}removeMatchingKeysForTargetId(n,s){return this.Ps.ls(s),ut.resolve()}getMatchingKeysForTargetId(n,s){const d=this.Ps.ds(s);return ut.resolve(d)}containsKey(n,s){return ut.resolve(this.Ps.containsKey(s))}}class td{constructor(n,s){this.Vs={},this.overlays={},this.Ss=new no(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=n(this),this.Cs=new zv(this),this.indexManager=new xE,this.remoteDocumentCache=new qv(d=>this.referenceDelegate.xs(d)),this.It=new u_(s),this.Ns=new Mg(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(n){return this.indexManager}getDocumentOverlayCache(n){let s=this.overlays[n.toKey()];return s||(s=new zf,this.overlays[n.toKey()]=s),s}getMutationQueue(n,s){let d=this.Vs[n.toKey()];return d||(d=new Wv(s,this.referenceDelegate),this.Vs[n.toKey()]=d),d}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(n,s,d){Wt("MemoryPersistence","Starting transaction:",n);const p=new xg(this.Ss.next());return this.referenceDelegate.ks(),d(p).next(v=>this.referenceDelegate.Os(p).next(()=>v)).toPromise().then(v=>(p.raiseOnCommittedEvent(),v))}Ms(n,s){return ut.or(Object.values(this.Vs).map(d=>()=>d.containsKey(n,s)))}}class xg extends xo{constructor(n){super(),this.currentSequenceNumber=n}}class xc{constructor(n){this.persistence=n,this.Fs=new Zv,this.$s=null}static Bs(n){return new xc(n)}get Ls(){if(this.$s)return this.$s;throw An()}addReference(n,s,d){return this.Fs.addReference(d,s),this.Ls.delete(d.toString()),ut.resolve()}removeReference(n,s,d){return this.Fs.removeReference(d,s),this.Ls.add(d.toString()),ut.resolve()}markPotentiallyOrphaned(n,s){return this.Ls.add(s.toString()),ut.resolve()}removeTarget(n,s){this.Fs.ls(s.targetId).forEach(p=>this.Ls.add(p.toString()));const d=this.persistence.getTargetCache();return d.getMatchingKeysForTargetId(n,s.targetId).next(p=>{p.forEach(v=>this.Ls.add(v.toString()))}).next(()=>d.removeTargetData(n,s))}ks(){this.$s=new Set}Os(n){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ut.forEach(this.Ls,d=>{const p=_e.fromPath(d);return this.Us(n,p).next(v=>{v||s.removeEntry(p,I.min())})}).next(()=>(this.$s=null,s.apply(n)))}updateLimboDocument(n,s){return this.Us(n,s).next(d=>{d?this.Ls.delete(s.toString()):this.Ls.add(s.toString())})}xs(n){return 0}Us(n,s){return ut.or([()=>ut.resolve(this.Fs.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(n,s),()=>this.persistence.Ms(n,s)])}}class XT{constructor(n){this.It=n}$(n,s,d,p){const v=new qo("createOrUpgrade",s);var O;d<1&&p>=1&&(n.createObjectStore("owner"),(O=n).createObjectStore("mutationQueues",{keyPath:"userId"}),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Tl,{unique:!0}),O.createObjectStore("documentMutations"),RE(n),function(O){O.createObjectStore("remoteDocuments")}(n));let T=ut.resolve();return d<3&&p>=3&&(0!==d&&(function(O){O.deleteObjectStore("targetDocuments"),O.deleteObjectStore("targets"),O.deleteObjectStore("targetGlobal")}(n),RE(n)),T=T.next(()=>function(O){const z=O.store("targetGlobal"),ee={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:I.min().toTimestamp(),targetCount:0};return z.put("targetGlobalKey",ee)}(v))),d<4&&p>=4&&(0!==d&&(T=T.next(()=>function(O,z){return z.store("mutations").W().next(ee=>{O.deleteObjectStore("mutations"),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Tl,{unique:!0});const me=z.store("mutations"),Re=ee.map(gt=>me.put(gt));return ut.waitFor(Re)})}(n,v))),T=T.next(()=>{!function(O){O.createObjectStore("clientMetadata",{keyPath:"clientId"})}(n)})),d<5&&p>=5&&(T=T.next(()=>this.qs(v))),d<6&&p>=6&&(T=T.next(()=>(function(O){O.createObjectStore("remoteDocumentGlobal")}(n),this.Ks(v)))),d<7&&p>=7&&(T=T.next(()=>this.Gs(v))),d<8&&p>=8&&(T=T.next(()=>this.Qs(n,v))),d<9&&p>=9&&(T=T.next(()=>{!function(O){O.objectStoreNames.contains("remoteDocumentChanges")&&O.deleteObjectStore("remoteDocumentChanges")}(n)})),d<10&&p>=10&&(T=T.next(()=>this.js(v))),d<11&&p>=11&&(T=T.next(()=>{(function(O){O.createObjectStore("bundles",{keyPath:"bundleId"})})(n),function(O){O.createObjectStore("namedQueries",{keyPath:"name"})}(n)})),d<12&&p>=12&&(T=T.next(()=>{!function(O){const z=O.createObjectStore("documentOverlays",{keyPath:l_});z.createIndex("collectionPathOverlayIndex",Ff,{unique:!1}),z.createIndex("collectionGroupOverlayIndex",c_,{unique:!1})}(n)})),d<13&&p>=13&&(T=T.next(()=>function(O){const z=O.createObjectStore("remoteDocumentsV14",{keyPath:ug});z.createIndex("documentKeyIndex",Th),z.createIndex("collectionGroupIndex",s_)}(n)).next(()=>this.Ws(n,v)).next(()=>n.deleteObjectStore("remoteDocuments"))),d<14&&p>=14&&(T=T.next(()=>this.zs(n,v))),d<15&&p>=15&&(T=T.next(()=>function(O){O.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),O.createObjectStore("indexState",{keyPath:AE}).createIndex("sequenceNumberIndex",Ku,{unique:!1}),O.createObjectStore("indexEntries",{keyPath:Pf}).createIndex("documentKeyIndex",hg,{unique:!1})}(n))),T}Ks(n){let s=0;return n.store("remoteDocuments").Z((d,p)=>{s+=Tg(p)}).next(()=>{const d={byteSize:s};return n.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",d)})}qs(n){const s=n.store("mutationQueues"),d=n.store("mutations");return s.W().next(p=>ut.forEach(p,v=>{const T=IDBKeyRange.bound([v.userId,-1],[v.userId,v.lastAcknowledgedBatchId]);return d.W("userMutationsIndex",T).next(O=>ut.forEach(O,z=>{di(z.userId===v.userId);const ee=Ic(this.It,z);return m_(n,v.userId,ee).next(()=>{})}))}))}Gs(n){const s=n.store("targetDocuments"),d=n.store("remoteDocuments");return n.store("targetGlobal").get("targetGlobalKey").next(p=>{const v=[];return d.Z((T,O)=>{const z=new q(T),ee=[0,aa(z)];v.push(s.get(ee).next(me=>me?ut.resolve():s.put({targetId:0,path:aa(z),sequenceNumber:p.highestListenSequenceNumber})))}).next(()=>ut.waitFor(v))})}Qs(n,s){n.createObjectStore("collectionParents",{keyPath:dg});const d=s.store("collectionParents"),p=new Eg,v=T=>{if(p.add(T)){const O=T.lastSegment(),z=T.popLast();return d.put({collectionId:O,parent:aa(z)})}};return s.store("remoteDocuments").Z({X:!0},(T,O)=>{const z=new q(T);return v(z.popLast())}).next(()=>s.store("documentMutations").Z({X:!0},([T,O,z],ee)=>{const me=Yl(O);return v(me.popLast())}))}js(n){const s=n.store("targets");return s.Z((d,p)=>{const v=kd(p),T=d_(this.It,v);return s.put(T)})}Ws(n,s){const d=s.store("remoteDocuments"),p=[];return d.Z((v,T)=>{const O=s.store("remoteDocumentsV14"),z=(ee=T,ee.document?new _e(q.fromString(ee.document.name).popFirst(5)):ee.noDocument?_e.fromSegments(ee.noDocument.path):ee.unknownDocument?_e.fromSegments(ee.unknownDocument.path):An()).path.toArray();var ee;const me={prefixPath:z.slice(0,z.length-2),collectionGroup:z[z.length-2],documentId:z[z.length-1],readTime:T.readTime||[0,0],unknownDocument:T.unknownDocument,noDocument:T.noDocument,document:T.document,hasCommittedMutations:!!T.hasCommittedMutations};p.push(O.put(me))}).next(()=>ut.waitFor(p))}zs(n,s){const d=s.store("mutations"),p=uu(this.It),v=new td(xc.Bs,this.It.re);return d.W().next(T=>{const O=new Map;return T.forEach(z=>{var ee;let me=null!==(ee=O.get(z.userId))&&void 0!==ee?ee:Li();Ic(this.It,z).keys().forEach(Re=>me=me.add(Re)),O.set(z.userId,me)}),ut.forEach(O,(z,ee)=>{const me=new br(ee),Re=Dh.oe(this.It,me),gt=v.getIndexManager(me),Ft=Sh.oe(me,this.It,gt,v.referenceDelegate);return new Ng(p,Ft,Re,gt).recalculateAndSaveOverlaysForDocumentKeys(new Lf(s,no.at),z).next()})})}}function RE(l){l.createObjectStore("targetDocuments",{keyPath:o_}).createIndex("documentTargetsIndex",a_,{unique:!0}),l.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kf,{unique:!0}),l.createObjectStore("targetGlobal")}const Kf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class E_{constructor(n,s,d,p,v,T,O,z,ee,me,Re=15){if(this.allowTabSynchronization=n,this.persistenceKey=s,this.clientId=d,this.Hs=v,this.window=T,this.document=O,this.Js=ee,this.Ys=me,this.Xs=Re,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=gt=>Promise.resolve(),!E_.C())throw new en(Ct.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ig(this,p),this.ii=s+"main",this.It=new u_(z),this.ri=new to(this.ii,this.Xs,new XT(this.It)),this.Cs=new wg(this.referenceDelegate,this.It),this.remoteDocumentCache=uu(this.It),this.Ns=new yg,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===me&&Mi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new en(Ct.FAILED_PRECONDITION,Kf);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",n=>this.Cs.getHighestSequenceNumber(n))}).then(n=>{this.Ss=new no(n,this.Js)}).then(()=>{this.Ds=!0}).catch(n=>(this.ri&&this.ri.close(),Promise.reject(n)))}li(n){var s=this;return this.si=function(){var d=(0,_.Z)(function*(p){if(s.started)return n(p)});return function(p){return d.apply(this,arguments)}}(),n(this.isPrimary)}setDatabaseDeletedListener(n){this.ri.L(function(){var s=(0,_.Z)(function*(d){null===d.newVersion&&(yield n())});return function(d){return s.apply(this,arguments)}}())}setNetworkEnabled(n){var s=this;this.networkEnabled!==n&&(this.networkEnabled=n,this.Hs.enqueueAndForget((0,_.Z)(function*(){s.started&&(yield s.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",n=>C_(n).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(n).next(s=>{s||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(n)).next(s=>this.isPrimary&&!s?this._i(n).next(()=>!1):!!s&&this.wi(n).next(()=>!0))).catch(n=>{if(yo(n))return Wt("IndexedDbPersistence","Failed to extend owner lease: ",n),this.isPrimary;if(!this.allowTabSynchronization)throw n;return Wt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(n=>{this.isPrimary!==n&&this.Hs.enqueueRetryable(()=>this.si(n)),this.isPrimary=n})}fi(n){return Yf(n).get("owner").next(s=>ut.resolve(this.mi(s)))}gi(n){return C_(n).delete(this.clientId)}yi(){var n=this;return(0,_.Z)(function*(){if(n.isPrimary&&!n.pi(n.ni,18e5)){n.ni=Date.now();const s=yield n.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",d=>{const p=oo(d,"clientMetadata");return p.W().next(v=>{const T=n.Ii(v,18e5),O=v.filter(z=>-1===T.indexOf(z));return ut.forEach(O,z=>p.delete(z.clientId)).next(()=>O)})}).catch(()=>[]);if(n.oi)for(const d of s)n.oi.removeItem(n.Ti(d.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(n){return!!n&&n.ownerId===this.clientId}di(n){return this.Ys?ut.resolve(!0):Yf(n).get("owner").next(s=>{if(null!==s&&this.pi(s.leaseTimestampMs,5e3)&&!this.Ei(s.ownerId)){if(this.mi(s)&&this.networkEnabled)return!0;if(!this.mi(s)){if(!s.allowTabSynchronization)throw new en(Ct.FAILED_PRECONDITION,Kf);return!1}}return!(!this.networkEnabled||!this.inForeground)||C_(n).W().next(d=>void 0===this.Ii(d,5e3).find(p=>{if(this.clientId!==p.clientId){const T=!this.inForeground&&p.inForeground,O=this.networkEnabled===p.networkEnabled;if(!this.networkEnabled&&p.networkEnabled||T&&O)return!0}return!1}))}).next(s=>(this.isPrimary!==s&&Wt("IndexedDbPersistence",`Client ${s?"is":"is not"} eligible for a primary lease.`),s))}shutdown(){var n=this;return(0,_.Z)(function*(){n.Ds=!1,n.Ai(),n.ei&&(n.ei.cancel(),n.ei=null),n.Ri(),n.bi(),yield n.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],s=>{const d=new Lf(s,no.at);return n._i(d).next(()=>n.gi(d))}),n.ri.close(),n.Pi()})()}Ii(n,s){return n.filter(d=>this.pi(d.updateTimeMs,s)&&!this.Ei(d.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",n=>C_(n).W().next(s=>this.Ii(s,18e5).map(d=>d.clientId)))}get started(){return this.Ds}getMutationQueue(n,s){return Sh.oe(n,this.It,s,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(n){return new p_(n,this.It.re.databaseId)}getDocumentOverlayCache(n){return Dh.oe(this.It,n)}getBundleCache(){return this.Ns}runTransaction(n,s,d){Wt("IndexedDbPersistence","Starting transaction:",n);const p="readonly"===s?"readonly":"readwrite",v=15===(T=this.Xs)?Lv:14===T?pg:13===T?Fv:12===T?SE:11===T?fg:void An();var T;let O;return this.ri.runTransaction(n,p,v,z=>(O=new Lf(z,this.Ss?this.Ss.next():no.at),"readwrite-primary"===s?this.fi(O).next(ee=>!!ee||this.di(O)).next(ee=>{if(!ee)throw Mi(`Failed to obtain primary lease for action '${n}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new en(Ct.FAILED_PRECONDITION,Bs);return d(O)}).next(ee=>this.wi(O).next(()=>ee)):this.Vi(O).next(()=>d(O)))).then(z=>(O.raiseOnCommittedEvent(),z))}Vi(n){return Yf(n).get("owner").next(s=>{if(null!==s&&this.pi(s.leaseTimestampMs,5e3)&&!this.Ei(s.ownerId)&&!this.mi(s)&&!(this.Ys||this.allowTabSynchronization&&s.allowTabSynchronization))throw new en(Ct.FAILED_PRECONDITION,Kf)})}wi(n){const s={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yf(n).put("owner",s)}static C(){return to.C()}_i(n){const s=Yf(n);return s.get("owner").next(d=>this.mi(d)?(Wt("IndexedDbPersistence","Releasing primary lease."),s.delete("owner")):ut.resolve())}pi(n,s){const d=Date.now();return!(n<d-s||n>d&&(Mi(`Detected an update time that is in the future: ${n} > ${d}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var n;"function"==typeof(null===(n=this.window)||void 0===n?void 0:n.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Ie.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(n){var s;try{const d=null!==(null===(s=this.oi)||void 0===s?void 0:s.getItem(this.Ti(n)));return Wt("IndexedDbPersistence",`Client '${n}' ${d?"is":"is not"} zombied in LocalStorage`),d}catch(d){return Mi("IndexedDbPersistence","Failed to get zombied client id.",d),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(n){Mi("Failed to set zombie client id.",n)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(n){}}Ti(n){return`firestore_zombie_${this.persistenceKey}_${n}`}}function Yf(l){return oo(l,"owner")}function C_(l){return oo(l,"clientMetadata")}function Ld(l,n){let s=l.projectId;return l.isDefaultDatabase||(s+="."+l.database),"firestore/"+n+"/"+s+"/"}class T_{constructor(n,s,d,p){this.targetId=n,this.fromCache=s,this.Si=d,this.Di=p}static Ci(n,s){let d=Li(),p=Li();for(const v of s.docChanges)switch(v.type){case 0:d=d.add(v.doc.key);break;case 1:p=p.add(v.doc.key)}return new T_(n,s.fromCache,d,p)}}class du{constructor(){this.xi=!1}initialize(n,s){this.Ni=n,this.indexManager=s,this.xi=!0}getDocumentsMatchingQuery(n,s,d,p){return this.ki(n,s).next(v=>v||this.Oi(n,s,p,d)).next(v=>v||this.Mi(n,s))}ki(n,s){if(Bu(s))return ut.resolve(null);let d=io(s);return this.indexManager.getIndexType(n,d).next(p=>0===p?null:(null!==s.limit&&1===p&&(s=vd(s,null,"F"),d=io(s)),this.indexManager.getDocumentsMatchingTarget(n,d).next(v=>{const T=Li(...v);return this.Ni.getDocuments(n,T).next(O=>this.indexManager.getMinOffset(n,d).next(z=>{const ee=this.Fi(s,O);return this.$i(s,ee,T,z.readTime)?this.ki(n,vd(s,null,"F")):this.Bi(n,ee,s,z)}))})))}Oi(n,s,d,p){return Bu(s)||p.isEqual(I.min())?this.Mi(n,s):this.Ni.getDocuments(n,d).next(v=>{const T=this.Fi(s,v);return this.$i(s,T,d,p)?this.Mi(n,s):(Ja()<=Ee.in.DEBUG&&Wt("QueryEngine","Re-using previous result from %s to execute query: %s",p.toString(),nu(s)),this.Bi(n,T,s,Fr(p,-1)))})}Fi(n,s){let d=new Dr(ql(n));return s.forEach((p,v)=>{Vu(n,v)&&(d=d.add(v))}),d}$i(n,s,d,p){if(null===n.limit)return!1;if(d.size!==s.size)return!0;const v="F"===n.limitType?s.last():s.first();return!!v&&(v.hasPendingWrites||v.version.compareTo(p)>0)}Mi(n,s){return Ja()<=Ee.in.DEBUG&&Wt("QueryEngine","Using full collection scan to execute query:",nu(s)),this.Ni.getDocumentsMatchingQuery(n,s,fr.min())}Bi(n,s,d,p){return this.Ni.getDocumentsMatchingQuery(n,d,p).next(v=>(s.forEach(T=>{v=v.insert(T.key,T)}),v))}}class w_{constructor(n,s,d,p){this.persistence=n,this.Li=s,this.It=p,this.Ui=new $r(bi),this.qi=new Ir(v=>H(v),De),this.Ki=new Map,this.Gi=n.getRemoteDocumentCache(),this.Cs=n.getTargetCache(),this.Ns=n.getBundleCache(),this.Qi(d)}Qi(n){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(n),this.indexManager=this.persistence.getIndexManager(n),this.mutationQueue=this.persistence.getMutationQueue(n,this.indexManager),this.localDocuments=new Ng(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(n){return this.persistence.runTransaction("Collect garbage","readwrite-primary",s=>n.collect(s,this.Ui))}}function Kv(l,n,s,d){return new w_(l,n,s,d)}function D_(l,n){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,_.Z)(function*(l,n){const s=En(l);return yield s.persistence.runTransaction("Handle user change","readonly",d=>{let p;return s.mutationQueue.getAllMutationBatches(d).next(v=>(p=v,s.Qi(n),s.mutationQueue.getAllMutationBatches(d))).next(v=>{const T=[],O=[];let z=Li();for(const ee of p){T.push(ee.batchId);for(const me of ee.mutations)z=z.add(me.key)}for(const ee of v){O.push(ee.batchId);for(const me of ee.mutations)z=z.add(me.key)}return s.localDocuments.getDocuments(d,z).next(ee=>({ji:ee,removedBatchIds:T,addedBatchIds:O}))})})}),Qf.apply(this,arguments)}function I_(l,n){const s=En(l);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",d=>{const p=n.batch.keys(),v=s.Gi.newChangeBuffer({trackRemovals:!0});return function(T,O,z,ee){const me=z.batch,Re=me.keys();let gt=ut.resolve();return Re.forEach(Ft=>{gt=gt.next(()=>ee.getEntry(O,Ft)).next(jt=>{const Rn=z.docVersions.get(Ft);di(null!==Rn),jt.version.compareTo(Rn)<0&&(me.applyToRemoteDocument(jt,z),jt.isValidDocument()&&(jt.setReadTime(z.commitVersion),ee.addEntry(jt)))})}),gt.next(()=>T.mutationQueue.removeMutationBatch(O,me))}(s,d,n,v).next(()=>v.apply(d)).next(()=>s.mutationQueue.performConsistencyCheck(d)).next(()=>s.documentOverlayCache.removeOverlaysForBatchId(d,p,n.batch.batchId)).next(()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,function(T){let O=Li();for(let z=0;z<T.mutationResults.length;++z)T.mutationResults[z].transformResults.length>0&&(O=O.add(T.batch.mutations[z].key));return O}(n))).next(()=>s.localDocuments.getDocuments(d,p))})}function Jf(l){const n=En(l);return n.persistence.runTransaction("Get last remote snapshot version","readonly",s=>n.Cs.getLastRemoteSnapshotVersion(s))}function Yv(l,n){const s=En(l),d=n.snapshotVersion;let p=s.Ui;return s.persistence.runTransaction("Apply remote event","readwrite-primary",v=>{const T=s.Gi.newChangeBuffer({trackRemovals:!0});p=s.Ui;const O=[];n.targetChanges.forEach((me,Re)=>{const gt=p.get(Re);if(!gt)return;O.push(s.Cs.removeMatchingKeys(v,me.removedDocuments,Re).next(()=>s.Cs.addMatchingKeys(v,me.addedDocuments,Re)));let Ft=gt.withSequenceNumber(v.currentSequenceNumber);var jt,Rn,qn;n.targetMismatches.has(Re)?Ft=Ft.withResumeToken(Lr.EMPTY_BYTE_STRING,I.min()).withLastLimboFreeSnapshotVersion(I.min()):me.resumeToken.approximateByteSize()>0&&(Ft=Ft.withResumeToken(me.resumeToken,d)),p=p.insert(Re,Ft),Rn=Ft,qn=me,(0===(jt=gt).resumeToken.approximateByteSize()||Rn.snapshotVersion.toMicroseconds()-jt.snapshotVersion.toMicroseconds()>=3e8||qn.addedDocuments.size+qn.modifiedDocuments.size+qn.removedDocuments.size>0)&&O.push(s.Cs.updateTargetData(v,Ft))});let z=ro(),ee=Li();if(n.documentUpdates.forEach(me=>{n.resolvedLimboDocuments.has(me)&&O.push(s.persistence.referenceDelegate.updateLimboDocument(v,me))}),O.push(hu(v,T,n.documentUpdates).next(me=>{z=me.Wi,ee=me.zi})),!d.isEqual(I.min())){const me=s.Cs.getLastRemoteSnapshotVersion(v).next(Re=>s.Cs.setTargetsMetadata(v,v.currentSequenceNumber,d));O.push(me)}return ut.waitFor(O).next(()=>T.apply(v)).next(()=>s.localDocuments.getLocalViewOfDocuments(v,z,ee)).next(()=>z)}).then(v=>(s.Ui=p,v))}function hu(l,n,s){let d=Li(),p=Li();return s.forEach(v=>d=d.add(v)),n.getEntries(l,d).next(v=>{let T=ro();return s.forEach((O,z)=>{const ee=v.get(O);z.isFoundDocument()!==ee.isFoundDocument()&&(p=p.add(O)),z.isNoDocument()&&z.version.isEqual(I.min())?(n.removeEntry(O,z.readTime),T=T.insert(O,z)):!ee.isValidDocument()||z.version.compareTo(ee.version)>0||0===z.version.compareTo(ee.version)&&ee.hasPendingWrites?(n.addEntry(z),T=T.insert(O,z)):Wt("LocalStore","Ignoring outdated watch update for ",O,". Current version:",ee.version," Watch version:",z.version)}),{Wi:T,zi:p}})}function Qv(l,n){const s=En(l);return s.persistence.runTransaction("Get next mutation batch","readonly",d=>(void 0===n&&(n=-1),s.mutationQueue.getNextMutationBatchAfterBatchId(d,n)))}function Nh(l,n){const s=En(l);return s.persistence.runTransaction("Allocate target","readwrite",d=>{let p;return s.Cs.getTargetData(d,n).next(v=>v?(p=v,ut.resolve(p)):s.Cs.allocateTargetId(d).next(T=>(p=new Yu(n,T,0,d.currentSequenceNumber),s.Cs.addTargetData(d,p).next(()=>p))))}).then(d=>{const p=s.Ui.get(d.targetId);return(null===p||d.snapshotVersion.compareTo(p.snapshotVersion)>0)&&(s.Ui=s.Ui.insert(d.targetId,d),s.qi.set(n,d.targetId)),d})}function nd(l,n,s){return Og.apply(this,arguments)}function Og(){return Og=(0,_.Z)(function*(l,n,s){const d=En(l),p=d.Ui.get(n),v=s?"readwrite":"readwrite-primary";try{s||(yield d.persistence.runTransaction("Release target",v,T=>d.persistence.referenceDelegate.removeTarget(T,p)))}catch(T){if(!yo(T))throw T;Wt("LocalStore",`Failed to update sequence numbers for target ${n}: ${T}`)}d.Ui=d.Ui.remove(n),d.qi.delete(p.target)}),Og.apply(this,arguments)}function Mh(l,n,s){const d=En(l);let p=I.min(),v=Li();return d.persistence.runTransaction("Execute query","readonly",T=>function(O,z,ee){const me=En(O),Re=me.qi.get(ee);return void 0!==Re?ut.resolve(me.Ui.get(Re)):me.Cs.getTargetData(z,ee)}(d,T,io(n)).next(O=>{if(O)return p=O.lastLimboFreeSnapshotVersion,d.Cs.getMatchingKeysForTargetId(T,O.targetId).next(z=>{v=z})}).next(()=>d.Li.getDocumentsMatchingQuery(T,n,s?p:I.min(),s?v:Li())).next(O=>(Bd(d,Uu(n),O),{documents:O,Hi:v})))}function A_(l,n){const s=En(l),d=En(s.Cs),p=s.Ui.get(n);return p?Promise.resolve(p.target):s.persistence.runTransaction("Get target data","readonly",v=>d.se(v,n).next(T=>T?T.target:null))}function S_(l,n){const s=En(l),d=s.Ki.get(n)||I.min();return s.persistence.runTransaction("Get new document changes","readonly",p=>s.Gi.getAllFromCollectionGroup(p,n,Fr(d,-1),Number.MAX_SAFE_INTEGER)).then(p=>(Bd(s,n,p),p))}function Bd(l,n,s){let d=l.Ki.get(n)||I.min();s.forEach((p,v)=>{v.readTime.compareTo(d)>0&&(d=v.readTime)}),l.Ki.set(n,d)}function xh(){return xh=(0,_.Z)(function*(l,n,s,d){const p=En(l);let v=Li(),T=ro();for(const ee of s){const me=n.Ji(ee.metadata.name);ee.document&&(v=v.add(me));const Re=n.Yi(ee);Re.setReadTime(n.Xi(ee.metadata.readTime)),T=T.insert(me,Re)}const O=p.Gi.newChangeBuffer({trackRemovals:!0}),z=yield Nh(p,(ee=d,io(gc(q.fromString(`__bundle__/docs/${ee}`)))));var ee;return p.persistence.runTransaction("Apply bundle documents","readwrite",ee=>hu(ee,O,T).next(me=>(O.apply(ee),me)).next(me=>p.Cs.removeMatchingKeysForTargetId(ee,z.targetId).next(()=>p.Cs.addMatchingKeys(ee,v,z.targetId)).next(()=>p.localDocuments.getLocalViewOfDocuments(ee,me.Wi,me.zi)).next(()=>me.Wi)))}),xh.apply(this,arguments)}function Ud(l,n){return jd.apply(this,arguments)}function jd(){return jd=(0,_.Z)(function*(l,n,s=Li()){const d=yield Nh(l,io(mg(n.bundledQuery))),p=En(l);return p.persistence.runTransaction("Save named query","readwrite",v=>{const T=Ks(n.readTime);if(d.snapshotVersion.compareTo(T)>=0)return p.Ns.saveNamedQuery(v,n);const O=d.withResumeToken(Lr.EMPTY_BYTE_STRING,T);return p.Ui=p.Ui.insert(O.targetId,O),p.Cs.updateTargetData(v,O).next(()=>p.Cs.removeMatchingKeysForTargetId(v,d.targetId)).next(()=>p.Cs.addMatchingKeys(v,s,d.targetId)).next(()=>p.Ns.saveNamedQuery(v,n))})}),jd.apply(this,arguments)}function $d(l,n){return`firestore_clients_${l}_${n}`}function Jv(l,n,s){let d=`firestore_mutations_${l}_${s}`;return n.isAuthenticated()&&(d+=`_${n.uid}`),d}function Rg(l,n){return`firestore_targets_${l}_${n}`}class Xf{constructor(n,s,d,p){this.user=n,this.batchId=s,this.state=d,this.error=p}static Zi(n,s,d){const p=JSON.parse(d);let v,T="object"==typeof p&&-1!==["pending","acknowledged","rejected"].indexOf(p.state)&&(void 0===p.error||"object"==typeof p.error);return T&&p.error&&(T="string"==typeof p.error.message&&"string"==typeof p.error.code,T&&(v=new en(p.error.code,p.error.message))),T?new Xf(n,s,p.state,v):(Mi("SharedClientState",`Failed to parse mutation state for ID '${s}': ${d}`),null)}tr(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class Hd{constructor(n,s,d){this.targetId=n,this.state=s,this.error=d}static Zi(n,s){const d=JSON.parse(s);let p,v="object"==typeof d&&-1!==["not-current","current","rejected"].indexOf(d.state)&&(void 0===d.error||"object"==typeof d.error);return v&&d.error&&(v="string"==typeof d.error.message&&"string"==typeof d.error.code,v&&(p=new en(d.error.code,d.error.message))),v?new Hd(n,d.state,p):(Mi("SharedClientState",`Failed to parse target state for ID '${n}': ${s}`),null)}tr(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class Oh{constructor(n,s){this.clientId=n,this.activeTargetIds=s}static Zi(n,s){const d=JSON.parse(s);let p="object"==typeof d&&d.activeTargetIds instanceof Array,v=w();for(let T=0;p&&T<d.activeTargetIds.length;++T)p=va(d.activeTargetIds[T]),v=v.add(d.activeTargetIds[T]);return p?new Oh(n,v):(Mi("SharedClientState",`Failed to parse client data for instance '${n}': ${s}`),null)}}class kg{constructor(n,s){this.clientId=n,this.onlineState=s}static Zi(n){const s=JSON.parse(n);return"object"==typeof s&&-1!==["Unknown","Online","Offline"].indexOf(s.onlineState)&&"string"==typeof s.clientId?new kg(s.clientId,s.onlineState):(Mi("SharedClientState",`Failed to parse online state: ${n}`),null)}}class Rh{constructor(){this.activeTargetIds=w()}er(n){this.activeTargetIds=this.activeTargetIds.add(n)}nr(n){this.activeTargetIds=this.activeTargetIds.delete(n)}tr(){const n={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(n)}}class N_{constructor(n,s,d,p,v){this.window=n,this.Hs=s,this.persistenceKey=d,this.sr=p,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new $r(bi),this.started=!1,this.cr=[];const T=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=v,this.ar=$d(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Rh),this.lr=new RegExp(`^firestore_clients_${T}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${T}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${T}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(O){return`firestore_bundle_loaded_v2_${O}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(n){return!(!n||!n.localStorage)}start(){var n=this;return(0,_.Z)(function*(){const s=yield n.syncEngine.vi();for(const p of s){if(p===n.sr)continue;const v=n.getItem($d(n.persistenceKey,p));if(v){const T=Oh.Zi(p,v);T&&(n.ur=n.ur.insert(T.clientId,T))}}n.gr();const d=n.storage.getItem(n.wr);if(d){const p=n.yr(d);p&&n.pr(p)}for(const p of n.cr)n.rr(p);n.cr=[],n.window.addEventListener("pagehide",()=>n.shutdown()),n.started=!0})()}writeSequenceNumber(n){this.setItem(this.hr,JSON.stringify(n))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(n){let s=!1;return this.ur.forEach((d,p)=>{p.activeTargetIds.has(n)&&(s=!0)}),s}addPendingMutation(n){this.Tr(n,"pending")}updateMutationState(n,s,d){this.Tr(n,s,d),this.Er(n)}addLocalQueryTarget(n){let s="not-current";if(this.isActiveQueryTarget(n)){const d=this.storage.getItem(Rg(this.persistenceKey,n));if(d){const p=Hd.Zi(n,d);p&&(s=p.state)}}return this.Ar.er(n),this.gr(),s}removeLocalQueryTarget(n){this.Ar.nr(n),this.gr()}isLocalQueryTarget(n){return this.Ar.activeTargetIds.has(n)}clearQueryState(n){this.removeItem(Rg(this.persistenceKey,n))}updateQueryState(n,s,d){this.Rr(n,s,d)}handleUserChange(n,s,d){s.forEach(p=>{this.Er(p)}),this.currentUser=n,d.forEach(p=>{this.addPendingMutation(p)})}setOnlineState(n){this.br(n)}notifyBundleLoaded(n){this.Pr(n)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(n){const s=this.storage.getItem(n);return Wt("SharedClientState","READ",n,s),s}setItem(n,s){Wt("SharedClientState","SET",n,s),this.storage.setItem(n,s)}removeItem(n){Wt("SharedClientState","REMOVE",n),this.storage.removeItem(n)}rr(n){var s=this;const d=n;if(d.storageArea===this.storage){if(Wt("SharedClientState","EVENT",d.key,d.newValue),d.key===this.ar)return void Mi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,_.Z)(function*(){if(s.started){if(null!==d.key)if(s.lr.test(d.key)){if(null==d.newValue){const p=s.vr(d.key);return s.Vr(p,null)}{const p=s.Sr(d.key,d.newValue);if(p)return s.Vr(p.clientId,p)}}else if(s.dr.test(d.key)){if(null!==d.newValue){const p=s.Dr(d.key,d.newValue);if(p)return s.Cr(p)}}else if(s._r.test(d.key)){if(null!==d.newValue){const p=s.Nr(d.key,d.newValue);if(p)return s.kr(p)}}else if(d.key===s.wr){if(null!==d.newValue){const p=s.yr(d.newValue);if(p)return s.pr(p)}}else if(d.key===s.hr){const p=function(v){let T=no.at;if(null!=v)try{const O=JSON.parse(v);di("number"==typeof O),T=O}catch(O){Mi("SharedClientState","Failed to read sequence number from WebStorage",O)}return T}(d.newValue);p!==no.at&&s.sequenceNumberHandler(p)}else if(d.key===s.mr){const p=s.Or(d.newValue);yield Promise.all(p.map(v=>s.syncEngine.Mr(v)))}}else s.cr.push(d)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(n,s,d){const p=new Xf(this.currentUser,n,s,d),v=Jv(this.persistenceKey,this.currentUser,n);this.setItem(v,p.tr())}Er(n){const s=Jv(this.persistenceKey,this.currentUser,n);this.removeItem(s)}br(n){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:n}))}Rr(n,s,d){const p=Rg(this.persistenceKey,n),v=new Hd(n,s,d);this.setItem(p,v.tr())}Pr(n){const s=JSON.stringify(Array.from(n));this.setItem(this.mr,s)}vr(n){const s=this.lr.exec(n);return s?s[1]:null}Sr(n,s){const d=this.vr(n);return Oh.Zi(d,s)}Dr(n,s){const d=this.dr.exec(n),p=Number(d[1]);return Xf.Zi(new br(void 0!==d[2]?d[2]:null),p,s)}Nr(n,s){const d=this._r.exec(n),p=Number(d[1]);return Hd.Zi(p,s)}yr(n){return kg.Zi(n)}Or(n){return JSON.parse(n)}Cr(n){var s=this;return(0,_.Z)(function*(){if(n.user.uid===s.currentUser.uid)return s.syncEngine.Fr(n.batchId,n.state,n.error);Wt("SharedClientState",`Ignoring mutation for non-active user ${n.user.uid}`)})()}kr(n){return this.syncEngine.$r(n.targetId,n.state,n.error)}Vr(n,s){const d=s?this.ur.insert(n,s):this.ur.remove(n),p=this.Ir(this.ur),v=this.Ir(d),T=[],O=[];return v.forEach(z=>{p.has(z)||T.push(z)}),p.forEach(z=>{v.has(z)||O.push(z)}),this.syncEngine.Br(T,O).then(()=>{this.ur=d})}pr(n){this.ur.get(n.clientId)&&this.onlineStateHandler(n.onlineState)}Ir(n){let s=w();return n.forEach((d,p)=>{s=s.unionWith(p.activeTargetIds)}),s}}class M_{constructor(){this.Lr=new Rh,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(n){}updateMutationState(n,s,d){}addLocalQueryTarget(n){return this.Lr.er(n),this.Ur[n]||"not-current"}updateQueryState(n,s,d){this.Ur[n]=s}removeLocalQueryTarget(n){this.Lr.nr(n)}isLocalQueryTarget(n){return this.Lr.activeTargetIds.has(n)}clearQueryState(n){delete this.Ur[n]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(n){return this.Lr.activeTargetIds.has(n)}start(){return this.Lr=new Rh,Promise.resolve()}handleUserChange(n,s,d){}setOnlineState(n){}shutdown(){}writeSequenceNumber(n){}notifyBundleLoaded(n){}}class ew{qr(n){}shutdown(){}}class x_{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(n){this.Wr.push(n)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Wt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const n of this.Wr)n(0)}jr(){Wt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const n of this.Wr)n(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Xv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kE{constructor(n){this.Hr=n.Hr,this.Jr=n.Jr}Yr(n){this.Xr=n}Zr(n){this.eo=n}onMessage(n){this.no=n}close(){this.Jr()}send(n){this.Hr(n)}so(){this.Xr()}io(n){this.eo(n)}ro(n){this.no(n)}}class e0 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId,this.oo=(n.ssl?"https":"http")+"://"+n.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(n,s,d,p,v){const T=this.ho(n,s);Wt("RestConnection","Sending: ",T,d);const O={};return this.lo(O,p,v),this.fo(n,T,O,d).then(z=>(Wt("RestConnection","Received: ",z),z),z=>{throw No("RestConnection",`${n} failed with error: `,z,"url: ",T,"request:",d),z})}_o(n,s,d,p,v,T){return this.ao(n,s,d,p,v)}lo(n,s,d){n["X-Goog-Api-Client"]="gl-js/ fire/"+eo,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((p,v)=>n[v]=p),d&&d.headers.forEach((p,v)=>n[v]=p)}ho(n,s){return`${this.oo}/v1/${s}:${Xv[n]}`}}{constructor(n){super(n),this.forceLongPolling=n.forceLongPolling,this.autoDetectLongPolling=n.autoDetectLongPolling,this.useFetchStreams=n.useFetchStreams}fo(n,s,d,p){return new Promise((v,T)=>{const O=new md;O.setWithCredentials(!0),O.listenOnce(cc.COMPLETE,()=>{try{switch(O.getLastErrorCode()){case Nr.NO_ERROR:const ee=O.getResponseJson();Wt("Connection","XHR received:",JSON.stringify(ee)),v(ee);break;case Nr.TIMEOUT:Wt("Connection",'RPC "'+n+'" timed out'),T(new en(Ct.DEADLINE_EXCEEDED,"Request time out"));break;case Nr.HTTP_ERROR:const me=O.getStatus();if(Wt("Connection",'RPC "'+n+'" failed with status:',me,"response text:",O.getResponseText()),me>0){const Re=O.getResponseJson().error;if(Re&&Re.status&&Re.message){const gt=function(Ft){const jt=Ft.toLowerCase().replace(/_/g,"-");return Object.values(Ct).indexOf(jt)>=0?jt:Ct.UNKNOWN}(Re.status);T(new en(gt,Re.message))}else T(new en(Ct.UNKNOWN,"Server responded with status "+O.getStatus()))}else T(new en(Ct.UNAVAILABLE,"Connection failed."));break;default:An()}}finally{Wt("Connection",'RPC "'+n+'" completed.')}});const z=JSON.stringify(p);O.send(s,"POST",z,d,15)})}wo(n,s,d){const p=[this.oo,"/","google.firestore.v1.Firestore","/",n,"/channel"],v=Ls(),T=Wo(),O={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(O.xmlHttpFactory=new gd({})),this.lo(O.initMessageHeaders,s,d),O.encodeInitMessageHeaders=!0;const z=p.join("");Wt("Connection","Creating WebChannel: "+z,O);const ee=v.createWebChannel(z,O);let me=!1,Re=!1;const gt=new kE({Hr:jt=>{Re?Wt("Connection","Not sending because WebChannel is closed:",jt):(me||(Wt("Connection","Opening WebChannel transport."),ee.open(),me=!0),Wt("Connection","WebChannel sending:",jt),ee.send(jt))},Jr:()=>ee.close()}),Ft=(jt,Rn,qn)=>{jt.listen(Rn,xr=>{try{qn(xr)}catch(ls){setTimeout(()=>{throw ls},0)}})};return Ft(ee,ns.EventType.OPEN,()=>{Re||Wt("Connection","WebChannel transport opened.")}),Ft(ee,ns.EventType.CLOSE,()=>{Re||(Re=!0,Wt("Connection","WebChannel transport closed"),gt.io())}),Ft(ee,ns.EventType.ERROR,jt=>{Re||(Re=!0,No("Connection","WebChannel transport errored:",jt),gt.io(new en(Ct.UNAVAILABLE,"The operation could not be completed")))}),Ft(ee,ns.EventType.MESSAGE,jt=>{var Rn;if(!Re){const qn=jt.data[0];di(!!qn);const xr=qn,ls=xr.error||(null===(Rn=xr[0])||void 0===Rn?void 0:Rn.error);if(ls){Wt("Connection","WebChannel received error:",ls);const Or=ls.status;let ao=function(Vr){const jo=Vs[Vr];if(void 0!==jo)return oa(jo)}(Or),Ar=ls.message;void 0===ao&&(ao=Ct.INTERNAL,Ar="Unknown error status: "+Or+" with message "+ls.message),Re=!0,gt.io(new en(ao,Ar)),ee.close()}else Wt("Connection","WebChannel received:",qn),gt.ro(qn)}}),Ft(T,Hc.STAT_EVENT,jt=>{jt.stat===uc.PROXY?Wt("Connection","Detected buffering proxy"):jt.stat===uc.NOPROXY&&Wt("Connection","Detected no buffering proxy")}),setTimeout(()=>{gt.so()},0),gt}}function t0(){return"undefined"!=typeof window?window:null}function Pg(){return"undefined"!=typeof document?document:null}function Yo(l){return new Gr(l,!0)}class O_{constructor(n,s,d=1e3,p=1.5,v=6e4){this.Hs=n,this.timerId=s,this.mo=d,this.yo=p,this.po=v,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(n){this.cancel();const s=Math.floor(this.Io+this.bo()),d=Math.max(0,Date.now()-this.Eo),p=Math.max(0,s-d);p>0&&Wt("ExponentialBackoff",`Backing off for ${p} ms (base delay: ${this.Io} ms, delay with jitter: ${s} ms, last attempt: ${d} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,p,()=>(this.Eo=Date.now(),n())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class n0{constructor(n,s,d,p,v,T,O,z){this.Hs=n,this.vo=d,this.Vo=p,this.So=v,this.authCredentialsProvider=T,this.appCheckCredentialsProvider=O,this.listener=z,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new O_(n,s)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var n=this;return(0,_.Z)(function*(){n.ko()&&(yield n.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(n){this.Uo(),this.stream.send(n)}Bo(){var n=this;return(0,_.Z)(function*(){if(n.Oo())return n.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(n,s){var d=this;return(0,_.Z)(function*(){d.Uo(),d.qo(),d.No.cancel(),d.Do++,4!==n?d.No.reset():s&&s.code===Ct.RESOURCE_EXHAUSTED?(Mi(s.toString()),Mi("Using maximum backoff delay to prevent overloading the backend."),d.No.Ao()):s&&s.code===Ct.UNAUTHENTICATED&&3!==d.state&&(d.authCredentialsProvider.invalidateToken(),d.appCheckCredentialsProvider.invalidateToken()),null!==d.stream&&(d.Ko(),d.stream.close(),d.stream=null),d.state=n,yield d.listener.Zr(s)})()}Ko(){}auth(){this.state=1;const n=this.Go(this.Do),s=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([d,p])=>{this.Do===s&&this.Qo(d,p)},d=>{n(()=>{const p=new en(Ct.UNKNOWN,"Fetching auth token failed: "+d.message);return this.jo(p)})})}Qo(n,s){const d=this.Go(this.Do);this.stream=this.Wo(n,s),this.stream.Yr(()=>{d(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(p=>{d(()=>this.jo(p))}),this.stream.onMessage(p=>{d(()=>this.onMessage(p))})}Mo(){var n=this;this.state=5,this.No.Ro((0,_.Z)(function*(){n.state=0,n.start()}))}jo(n){return Wt("PersistentStream",`close with error: ${n}`),this.stream=null,this.close(4,n)}Go(n){return s=>{this.Hs.enqueueAndForget(()=>this.Do===n?s():(Wt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tw extends n0{constructor(n,s,d,p,v,T){super(n,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,d,p,T),this.It=v}Wo(n,s){return this.So.wo("Listen",n,s)}onMessage(n){this.No.reset();const s=function Ad(l,n){let s;if("targetChange"in n){const d="NO_CHANGE"===(z=n.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===z?1:"REMOVE"===z?2:"CURRENT"===z?3:"RESET"===z?4:An(),p=n.targetChange.targetIds||[],v=function(z,ee){return z.gt?(di(void 0===ee||"string"==typeof ee),Lr.fromBase64String(ee||"")):(di(void 0===ee||ee instanceof Uint8Array),Lr.fromUint8Array(ee||new Uint8Array))}(l,n.targetChange.resumeToken),T=n.targetChange.cause,O=T&&function(z){const ee=void 0===z.code?Ct.UNKNOWN:oa(z.code);return new en(ee,z.message||"")}(T);s=new ie(d,p,v,O||null)}else if("documentChange"in n){const d=n.documentChange,p=rl(l,d.document.name),v=Ks(d.document.updateTime),T=new ss({mapValue:{fields:d.document.fields}}),O=Hr.newFoundDocument(p,v,T);s=new N(d.targetIds||[],d.removedTargetIds||[],O.key,O)}else if("documentDelete"in n){const d=n.documentDelete,p=rl(l,d.document),v=d.readTime?Ks(d.readTime):I.min(),T=Hr.newNoDocument(p,v);s=new N([],d.removedTargetIds||[],T.key,T)}else if("documentRemove"in n){const d=n.documentRemove,p=rl(l,d.document);s=new N([],d.removedTargetIds||[],p,null)}else{if(!("filter"in n))return An();{const d=n.filter,v=new ig(d.count||0);s=new K(d.targetId,v)}}var z;return s}(this.It,n),d=function(p){if(!("targetChange"in p))return I.min();const v=p.targetChange;return v.targetIds&&v.targetIds.length?I.min():v.readTime?Ks(v.readTime):I.min()}(n);return this.listener.zo(s,d)}Ho(n){const s={};s.database=Zu(this.It),s.addTarget=function(p,v){let T;const O=v.target;return T=tt(O)?{documents:Ch(p,O)}:{query:i_(p,O)},T.targetId=v.targetId,v.resumeToken.approximateByteSize()>0?T.resumeToken=Kl(p,v.resumeToken):v.snapshotVersion.compareTo(I.min())>0&&(T.readTime=so(p,v.snapshotVersion.toTimestamp())),T}(this.It,n);const d=function Wu(l,n){const s=function(d,p){switch(p){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return An()}}(0,n.purpose);return null==s?null:{"goog-listen-tags":s}}(0,n);d&&(s.labels=d),this.Lo(s)}Jo(n){const s={};s.database=Zu(this.It),s.removeTarget=n,this.Lo(s)}}class nw extends n0{constructor(n,s,d,p,v,T){super(n,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,d,p,T),this.It=v,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(n,s){return this.So.wo("Write",n,s)}onMessage(n){if(di(!!n.streamToken),this.lastStreamToken=n.streamToken,this.Yo){this.No.reset();const s=function Mv(l,n){return l&&l.length>0?(di(void 0!==n),l.map(s=>function(d,p){let v=Ks(d.updateTime?d.updateTime:p);return v.isEqual(I.min())&&(v=Ks(p)),new Nv(v,d.transformResults||[])}(s,n))):[]}(n.writeResults,n.commitTime),d=Ks(n.commitTime);return this.listener.tu(d,s)}return di(!n.writeResults||0===n.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const n={};n.database=Zu(this.It),this.Lo(n)}Zo(n){const s={streamToken:this.lastStreamToken,writes:n.map(d=>Sd(this.It,d))};this.Lo(s)}}class r0 extends class{}{constructor(n,s,d,p){super(),this.authCredentials=n,this.appCheckCredentials=s,this.So=d,this.It=p,this.su=!1}iu(){if(this.su)throw new en(Ct.FAILED_PRECONDITION,"The client has already been terminated.")}ao(n,s,d){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,v])=>this.So.ao(n,s,d,p,v)).catch(p=>{throw"FirebaseError"===p.name?(p.code===Ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new en(Ct.UNKNOWN,p.toString())})}_o(n,s,d,p){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([v,T])=>this.So._o(n,s,d,v,T,p)).catch(v=>{throw"FirebaseError"===v.name?(v.code===Ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),v):new en(Ct.UNKNOWN,v.toString())})}terminate(){this.su=!0}}class k_{constructor(n,s){this.asyncQueue=n,this.onlineStateHandler=s,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(n){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${n.toString()}`),this.au("Offline")))}set(n){this.fu(),this.ru=0,"Online"===n&&(this.uu=!1),this.au(n)}au(n){n!==this.state&&(this.state=n,this.onlineStateHandler(n))}hu(n){const s=`Could not reach Cloud Firestore backend. ${n}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Mi(s),this.uu=!1):Wt("OnlineStateTracker",s)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class s0{constructor(n,s,d,p,v){var T=this;this.localStore=n,this.datastore=s,this.asyncQueue=d,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=v,this.gu.qr(O=>{d.enqueueAndForget((0,_.Z)(function*(){var z;fu(T)&&(Wt("RemoteStore","Restarting streams for network reachability change."),yield(z=(0,_.Z)(function*(ee){const me=En(ee);me.wu.add(4),yield kh(me),me.yu.set("Unknown"),me.wu.delete(4),yield ep(me)}),function(ee){return z.apply(this,arguments)})(T))}))}),this.yu=new k_(d,p)}}function ep(l){return P_.apply(this,arguments)}function P_(){return P_=(0,_.Z)(function*(l){if(fu(l))for(const n of l.mu)yield n(!0)}),P_.apply(this,arguments)}function kh(l){return Fg.apply(this,arguments)}function Fg(){return Fg=(0,_.Z)(function*(l){for(const n of l.mu)yield n(!1)}),Fg.apply(this,arguments)}function Lg(l,n){const s=En(l);s._u.has(n.targetId)||(s._u.set(n.targetId,n),Vg(s)?Bg(s):$a(s).Oo()&&F_(s,n))}function Ph(l,n){const s=En(l),d=$a(s);s._u.delete(n),d.Oo()&&o0(s,n),0===s._u.size&&(d.Oo()?d.$o():fu(s)&&s.yu.set("Unknown"))}function F_(l,n){l.pu.Mt(n.targetId),$a(l).Ho(n)}function o0(l,n){l.pu.Mt(n),$a(l).Jo(n)}function Bg(l){l.pu=new Dt({getRemoteKeysForTarget:n=>l.remoteSyncer.getRemoteKeysForTarget(n),se:n=>l._u.get(n)||null}),$a(l).start(),l.yu.cu()}function Vg(l){return fu(l)&&!$a(l).ko()&&l._u.size>0}function fu(l){return 0===En(l).wu.size}function Ql(l){l.pu=void 0}function L_(l){return B_.apply(this,arguments)}function B_(){return B_=(0,_.Z)(function*(l){l._u.forEach((n,s)=>{F_(l,n)})}),B_.apply(this,arguments)}function PE(l,n){return a0.apply(this,arguments)}function a0(){return a0=(0,_.Z)(function*(l,n){Ql(l),Vg(l)?(l.yu.lu(n),Bg(l)):l.yu.set("Unknown")}),a0.apply(this,arguments)}function V_(l,n,s){return U_.apply(this,arguments)}function U_(){return U_=(0,_.Z)(function*(l,n,s){if(l.yu.set("Online"),n instanceof ie&&2===n.state&&n.cause)try{yield(d=(0,_.Z)(function*(p,v){const T=v.cause;for(const O of v.targetIds)p._u.has(O)&&(yield p.remoteSyncer.rejectListen(O,T),p._u.delete(O),p.pu.removeTarget(O))}),function(p,v){return d.apply(this,arguments)})(l,n)}catch(d){Wt("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),d),yield Ug(l,d)}else if(n instanceof N?l.pu.Gt(n):n instanceof K?l.pu.Yt(n):l.pu.Wt(n),!s.isEqual(I.min()))try{const d=yield Jf(l.localStore);s.compareTo(d)>=0&&(yield function(p,v){const T=p.pu.te(v);return T.targetChanges.forEach((O,z)=>{if(O.resumeToken.approximateByteSize()>0){const ee=p._u.get(z);ee&&p._u.set(z,ee.withResumeToken(O.resumeToken,v))}}),T.targetMismatches.forEach(O=>{const z=p._u.get(O);if(!z)return;p._u.set(O,z.withResumeToken(Lr.EMPTY_BYTE_STRING,z.snapshotVersion)),o0(p,O);const ee=new Yu(z.target,O,1,z.sequenceNumber);F_(p,ee)}),p.remoteSyncer.applyRemoteEvent(T)}(l,s))}catch(d){Wt("RemoteStore","Failed to raise snapshot:",d),yield Ug(l,d)}var d}),U_.apply(this,arguments)}function Ug(l,n,s){return j_.apply(this,arguments)}function j_(){return j_=(0,_.Z)(function*(l,n,s){if(!yo(n))throw n;l.wu.add(1),yield kh(l),l.yu.set("Offline"),s||(s=()=>Jf(l.localStore)),l.asyncQueue.enqueueRetryable((0,_.Z)(function*(){Wt("RemoteStore","Retrying IndexedDB access"),yield s(),l.wu.delete(1),yield ep(l)}))}),j_.apply(this,arguments)}function jg(l,n){return n().catch(s=>Ug(l,s,n))}function Fh(l){return $_.apply(this,arguments)}function $_(){return $_=(0,_.Z)(function*(l){const n=En(l),s=Jl(n);let d=n.du.length>0?n.du[n.du.length-1].batchId:-1;for(;$g(n);)try{const p=yield Qv(n.localStore,d);if(null===p){0===n.du.length&&s.$o();break}d=p.batchId,H_(n,p)}catch(p){yield Ug(n,p)}l0(n)&&Hg(n)}),$_.apply(this,arguments)}function $g(l){return fu(l)&&l.du.length<10}function H_(l,n){l.du.push(n);const s=Jl(l);s.Oo()&&s.Xo&&s.Zo(n.mutations)}function l0(l){return fu(l)&&!Jl(l).ko()&&l.du.length>0}function Hg(l){Jl(l).start()}function G_(l){return Gg.apply(this,arguments)}function Gg(){return Gg=(0,_.Z)(function*(l){Jl(l).nu()}),Gg.apply(this,arguments)}function FE(l){return Z_.apply(this,arguments)}function Z_(){return Z_=(0,_.Z)(function*(l){const n=Jl(l);for(const s of l.du)n.Zo(s.mutations)}),Z_.apply(this,arguments)}function W_(l,n,s){return c0.apply(this,arguments)}function c0(){return c0=(0,_.Z)(function*(l,n,s){const d=l.du.shift(),p=Od.from(d,n,s);yield jg(l,()=>l.remoteSyncer.applySuccessfulWrite(p)),yield Fh(l)}),c0.apply(this,arguments)}function LE(l,n){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,_.Z)(function*(l,n){var s;n&&Jl(l).Xo&&(yield(s=(0,_.Z)(function*(d,p){if(rg(v=p.code)&&v!==Ct.ABORTED){const T=d.du.shift();Jl(d).Fo(),yield jg(d,()=>d.remoteSyncer.rejectFailedWrite(T.batchId,p)),yield Fh(d)}var v}),function(d,p){return s.apply(this,arguments)})(l,n)),l0(l)&&Hg(l)}),Zg.apply(this,arguments)}function q_(l,n){return Wg.apply(this,arguments)}function Wg(){return Wg=(0,_.Z)(function*(l,n){const s=En(l);s.asyncQueue.verifyOperationInProgress(),Wt("RemoteStore","RemoteStore received new credentials");const d=fu(s);s.wu.add(3),yield kh(s),d&&s.yu.set("Unknown"),yield s.remoteSyncer.handleCredentialChange(n),s.wu.delete(3),yield ep(s)}),Wg.apply(this,arguments)}function qg(l,n){return zg.apply(this,arguments)}function zg(){return zg=(0,_.Z)(function*(l,n){const s=En(l);n?(s.wu.delete(2),yield ep(s)):n||(s.wu.add(2),yield kh(s),s.yu.set("Unknown"))}),zg.apply(this,arguments)}function $a(l){return l.Iu||(l.Iu=function(n,s,d){const p=En(n);return p.iu(),new tw(s,p.So,p.authCredentials,p.appCheckCredentials,p.It,d)}(l.datastore,l.asyncQueue,{Yr:L_.bind(null,l),Zr:PE.bind(null,l),zo:V_.bind(null,l)}),l.mu.push(function(){var n=(0,_.Z)(function*(s){s?(l.Iu.Fo(),Vg(l)?Bg(l):l.yu.set("Unknown")):(yield l.Iu.stop(),Ql(l))});return function(s){return n.apply(this,arguments)}}())),l.Iu}function Jl(l){return l.Tu||(l.Tu=function(n,s,d){const p=En(n);return p.iu(),new nw(s,p.So,p.authCredentials,p.appCheckCredentials,p.It,d)}(l.datastore,l.asyncQueue,{Yr:G_.bind(null,l),Zr:LE.bind(null,l),eu:FE.bind(null,l),tu:W_.bind(null,l)}),l.mu.push(function(){var n=(0,_.Z)(function*(s){s?(l.Tu.Fo(),yield Fh(l)):(yield l.Tu.stop(),l.du.length>0&&(Wt("RemoteStore",`Stopping write stream with ${l.du.length} pending writes`),l.du=[]))});return function(s){return n.apply(this,arguments)}}())),l.Tu}class z_{constructor(n,s,d,p,v){this.asyncQueue=n,this.timerId=s,this.targetTimeMs=d,this.op=p,this.removalCallback=v,this.deferred=new is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(T=>{})}static createAndSchedule(n,s,d,p,v){const T=Date.now()+d,O=new z_(n,s,T,p,v);return O.start(d),O}start(n){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),n)}skipDelay(){return this.handleDelayElapsed()}cancel(n){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new en(Ct.CANCELLED,"Operation cancelled"+(n?": "+n:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(n=>this.deferred.resolve(n))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lh(l,n){if(Mi("AsyncQueue",`${n}: ${l}`),yo(l))return new en(Ct.UNAVAILABLE,`${n}: ${l}`);throw l}class tp{constructor(n){this.comparator=n?(s,d)=>n(s,d)||_e.comparator(s.key,d.key):(s,d)=>_e.comparator(s.key,d.key),this.keyedMap=zl(),this.sortedSet=new $r(this.comparator)}static emptySet(n){return new tp(n.comparator)}has(n){return null!=this.keyedMap.get(n)}get(n){return this.keyedMap.get(n)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(n){const s=this.keyedMap.get(n);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(n){this.sortedSet.inorderTraversal((s,d)=>(n(s),!1))}add(n){const s=this.delete(n.key);return s.copy(s.keyedMap.insert(n.key,n),s.sortedSet.insert(n,null))}delete(n){const s=this.get(n);return s?this.copy(this.keyedMap.remove(n),this.sortedSet.remove(s)):this}isEqual(n){if(!(n instanceof tp)||this.size!==n.size)return!1;const s=this.sortedSet.getIterator(),d=n.sortedSet.getIterator();for(;s.hasNext();){const p=s.getNext().key,v=d.getNext().key;if(!p.isEqual(v))return!1}return!0}toString(){const n=[];return this.forEach(s=>{n.push(s.toString())}),0===n.length?"DocumentSet ()":"DocumentSet (\n  "+n.join("  \n")+"\n)"}copy(n,s){const d=new tp;return d.comparator=this.comparator,d.keyedMap=n,d.sortedSet=s,d}}class Kg{constructor(){this.Eu=new $r(_e.comparator)}track(n){const s=n.doc.key,d=this.Eu.get(s);d?0!==n.type&&3===d.type?this.Eu=this.Eu.insert(s,n):3===n.type&&1!==d.type?this.Eu=this.Eu.insert(s,{type:d.type,doc:n.doc}):2===n.type&&2===d.type?this.Eu=this.Eu.insert(s,{type:2,doc:n.doc}):2===n.type&&0===d.type?this.Eu=this.Eu.insert(s,{type:0,doc:n.doc}):1===n.type&&0===d.type?this.Eu=this.Eu.remove(s):1===n.type&&2===d.type?this.Eu=this.Eu.insert(s,{type:1,doc:d.doc}):0===n.type&&1===d.type?this.Eu=this.Eu.insert(s,{type:2,doc:n.doc}):An():this.Eu=this.Eu.insert(s,n)}Au(){const n=[];return this.Eu.inorderTraversal((s,d)=>{n.push(d)}),n}}class Gd{constructor(n,s,d,p,v,T,O,z,ee){this.query=n,this.docs=s,this.oldDocs=d,this.docChanges=p,this.mutatedKeys=v,this.fromCache=T,this.syncStateChanged=O,this.excludesMetadataChanges=z,this.hasCachedResults=ee}static fromInitialDocuments(n,s,d,p,v){const T=[];return s.forEach(O=>{T.push({type:0,doc:O})}),new Gd(n,s,tp.emptySet(s),T,d,p,!0,!1,v)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(n){if(!(this.fromCache===n.fromCache&&this.hasCachedResults===n.hasCachedResults&&this.syncStateChanged===n.syncStateChanged&&this.mutatedKeys.isEqual(n.mutatedKeys)&&nl(this.query,n.query)&&this.docs.isEqual(n.docs)&&this.oldDocs.isEqual(n.oldDocs)))return!1;const s=this.docChanges,d=n.docChanges;if(s.length!==d.length)return!1;for(let p=0;p<s.length;p++)if(s[p].type!==d[p].type||!s[p].doc.isEqual(d[p].doc))return!1;return!0}}class K_{constructor(){this.Ru=void 0,this.listeners=[]}}class np{constructor(){this.queries=new Ir(n=>tu(n),nl),this.onlineState="Unknown",this.bu=new Set}}function Y_(l,n){return ip.apply(this,arguments)}function ip(){return ip=(0,_.Z)(function*(l,n){const s=En(l),d=n.query;let p=!1,v=s.queries.get(d);if(v||(p=!0,v=new K_),p)try{v.Ru=yield s.onListen(d)}catch(T){const O=Lh(T,`Initialization of query '${nu(n.query)}' failed`);return void n.onError(O)}s.queries.set(d,v),v.listeners.push(n),n.Pu(s.onlineState),v.Ru&&n.vu(v.Ru)&&rp(s)}),ip.apply(this,arguments)}function Yg(l,n){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,_.Z)(function*(l,n){const s=En(l),d=n.query;let p=!1;const v=s.queries.get(d);if(v){const T=v.listeners.indexOf(n);T>=0&&(v.listeners.splice(T,1),p=0===v.listeners.length)}if(p)return s.queries.delete(d),s.onUnlisten(d)}),Qg.apply(this,arguments)}function u0(l,n){const s=En(l);let d=!1;for(const p of n){const T=s.queries.get(p.query);if(T){for(const O of T.listeners)O.vu(p)&&(d=!0);T.Ru=p}}d&&rp(s)}function BE(l,n,s){const d=En(l),p=d.queries.get(n);if(p)for(const v of p.listeners)v.onError(s);d.queries.delete(n)}function rp(l){l.bu.forEach(n=>{n.next()})}class Q_{constructor(n,s,d){this.query=n,this.Vu=s,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=d||{}}vu(n){if(!this.options.includeMetadataChanges){const d=[];for(const p of n.docChanges)3!==p.type&&d.push(p);n=new Gd(n.query,n.docs,n.oldDocs,d,n.mutatedKeys,n.fromCache,n.syncStateChanged,!0,n.hasCachedResults)}let s=!1;return this.Su?this.Cu(n)&&(this.Vu.next(n),s=!0):this.xu(n,this.onlineState)&&(this.Nu(n),s=!0),this.Du=n,s}onError(n){this.Vu.error(n)}Pu(n){this.onlineState=n;let s=!1;return this.Du&&!this.Su&&this.xu(this.Du,n)&&(this.Nu(this.Du),s=!0),s}xu(n,s){return!n.fromCache||(!this.options.ku||!("Offline"!==s))&&(!n.docs.isEmpty()||n.hasCachedResults||"Offline"===s)}Cu(n){return n.docChanges.length>0||!!(n.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==n.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(n){n=Gd.fromInitialDocuments(n.query,n.docs,n.mutatedKeys,n.fromCache,n.hasCachedResults),this.Su=!0,this.Vu.next(n)}}class VE{constructor(n,s){this.payload=n,this.byteLength=s}Ou(){return"metadata"in this.payload}}class J_{constructor(n){this.It=n}Ji(n){return rl(this.It,n)}Yi(n){return n.metadata.exists?Of(this.It,n.document,!1):Hr.newNoDocument(this.Ji(n.metadata.name),this.Xi(n.metadata.readTime))}Xi(n){return Ks(n)}}class Bh{constructor(n,s,d){this.Mu=n,this.localStore=s,this.It=d,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=X_(n)}Fu(n){this.progress.bytesLoaded+=n.byteLength;let s=this.progress.documentsLoaded;if(n.payload.namedQuery)this.queries.push(n.payload.namedQuery);else if(n.payload.documentMetadata){this.documents.push({metadata:n.payload.documentMetadata}),n.payload.documentMetadata.exists||++s;const d=q.fromString(n.payload.documentMetadata.name);this.collectionGroups.add(d.get(d.length-2))}else n.payload.document&&(this.documents[this.documents.length-1].document=n.payload.document,++s);return s!==this.progress.documentsLoaded?(this.progress.documentsLoaded=s,Object.assign({},this.progress)):null}$u(n){const s=new Map,d=new J_(this.It);for(const p of n)if(p.metadata.queries){const v=d.Ji(p.metadata.name);for(const T of p.metadata.queries){const O=(s.get(T)||Li()).add(v);s.set(T,O)}}return s}complete(){var n=this;return(0,_.Z)(function*(){const s=yield function Vd(l,n,s,d){return xh.apply(this,arguments)}(n.localStore,new J_(n.It),n.documents,n.Mu.id),d=n.$u(n.documents);for(const p of n.queries)yield Ud(n.localStore,p,d.get(p.name));return n.progress.taskState="Success",{progress:n.progress,Bu:n.collectionGroups,Lu:s}})()}}function X_(l){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:l.totalDocuments,totalBytes:l.totalBytes}}class d0{constructor(n){this.key=n}}class h0{constructor(n){this.key=n}}class Zd{constructor(n,s){this.query=n,this.Uu=s,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Li(),this.mutatedKeys=Li(),this.Gu=ql(n),this.Qu=new tp(this.Gu)}get ju(){return this.Uu}Wu(n,s){const d=s?s.zu:new Kg,p=s?s.Qu:this.Qu;let v=s?s.mutatedKeys:this.mutatedKeys,T=p,O=!1;const z="F"===this.query.limitType&&p.size===this.query.limit?p.last():null,ee="L"===this.query.limitType&&p.size===this.query.limit?p.first():null;if(n.inorderTraversal((me,Re)=>{const gt=p.get(me),Ft=Vu(this.query,Re)?Re:null,jt=!!gt&&this.mutatedKeys.has(gt.key),Rn=!!Ft&&(Ft.hasLocalMutations||this.mutatedKeys.has(Ft.key)&&Ft.hasCommittedMutations);let qn=!1;gt&&Ft?gt.data.isEqual(Ft.data)?jt!==Rn&&(d.track({type:3,doc:Ft}),qn=!0):this.Hu(gt,Ft)||(d.track({type:2,doc:Ft}),qn=!0,(z&&this.Gu(Ft,z)>0||ee&&this.Gu(Ft,ee)<0)&&(O=!0)):!gt&&Ft?(d.track({type:0,doc:Ft}),qn=!0):gt&&!Ft&&(d.track({type:1,doc:gt}),qn=!0,(z||ee)&&(O=!0)),qn&&(Ft?(T=T.add(Ft),v=Rn?v.add(me):v.delete(me)):(T=T.delete(me),v=v.delete(me)))}),null!==this.query.limit)for(;T.size>this.query.limit;){const me="F"===this.query.limitType?T.last():T.first();T=T.delete(me.key),v=v.delete(me.key),d.track({type:1,doc:me})}return{Qu:T,zu:d,$i:O,mutatedKeys:v}}Hu(n,s){return n.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(n,s,d){const p=this.Qu;this.Qu=n.Qu,this.mutatedKeys=n.mutatedKeys;const v=n.zu.Au();v.sort((ee,me)=>function(Re,gt){const Ft=jt=>{switch(jt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return An()}};return Ft(Re)-Ft(gt)}(ee.type,me.type)||this.Gu(ee.doc,me.doc)),this.Ju(d);const T=s?this.Yu():[],O=0===this.Ku.size&&this.current?1:0,z=O!==this.qu;return this.qu=O,0!==v.length||z?{snapshot:new Gd(this.query,n.Qu,p,v,n.mutatedKeys,0===O,z,!1,!!d&&d.resumeToken.approximateByteSize()>0),Xu:T}:{Xu:T}}Pu(n){return this.current&&"Offline"===n?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Kg,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(n){return!this.Uu.has(n)&&!!this.Qu.has(n)&&!this.Qu.get(n).hasLocalMutations}Ju(n){n&&(n.addedDocuments.forEach(s=>this.Uu=this.Uu.add(s)),n.modifiedDocuments.forEach(s=>{}),n.removedDocuments.forEach(s=>this.Uu=this.Uu.delete(s)),this.current=n.current)}Yu(){if(!this.current)return[];const n=this.Ku;this.Ku=Li(),this.Qu.forEach(d=>{this.Zu(d.key)&&(this.Ku=this.Ku.add(d.key))});const s=[];return n.forEach(d=>{this.Ku.has(d)||s.push(new h0(d))}),this.Ku.forEach(d=>{n.has(d)||s.push(new d0(d))}),s}tc(n){this.Uu=n.Hi,this.Ku=Li();const s=this.Wu(n.documents);return this.applyChanges(s,!0)}ec(){return Gd.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class UE{constructor(n,s,d){this.query=n,this.targetId=s,this.view=d}}class jE{constructor(n){this.key=n,this.nc=!1}}class $E{constructor(n,s,d,p,v,T){this.localStore=n,this.remoteStore=s,this.eventManager=d,this.sharedClientState=p,this.currentUser=v,this.maxConcurrentLimboResolutions=T,this.sc={},this.ic=new Ir(O=>tu(O),nl),this.rc=new Map,this.oc=new Set,this.uc=new $r(_e.comparator),this.cc=new Map,this.ac=new Zv,this.hc={},this.lc=new Map,this.fc=Xu.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function HE(l,n){return Ha.apply(this,arguments)}function Ha(){return Ha=(0,_.Z)(function*(l,n){const s=dp(l);let d,p;const v=s.ic.get(n);if(v)d=v.targetId,s.sharedClientState.addLocalQueryTarget(d),p=v.view.ec();else{const T=yield Nh(s.localStore,io(n));s.isPrimaryClient&&Lg(s.remoteStore,T);const O=s.sharedClientState.addLocalQueryTarget(T.targetId);d=T.targetId,p=yield sp(s,n,d,"current"===O,T.resumeToken)}return p}),Ha.apply(this,arguments)}function sp(l,n,s,d,p){return Jg.apply(this,arguments)}function Jg(){return Jg=(0,_.Z)(function*(l,n,s,d,p){l._c=(Re,gt,Ft)=>{return(jt=(0,_.Z)(function*(Rn,qn,xr,ls){let Or=qn.view.Wu(xr);Or.$i&&(Or=yield Mh(Rn.localStore,qn.query,!1).then(({documents:Vr})=>qn.view.Wu(Vr,Or)));const ao=ls&&ls.targetChanges.get(qn.targetId),Ar=qn.view.applyChanges(Or,Rn.isPrimaryClient,ao);return ol(Rn,qn.targetId,Ar.Xu),Ar.snapshot}),function(Rn,qn,xr,ls){return jt.apply(this,arguments)})(l,Re,gt,Ft);var jt};const v=yield Mh(l.localStore,n,!0),T=new Zd(n,v.Hi),O=T.Wu(v.documents),z=C.createSynthesizedTargetChangeForCurrentChange(s,d&&"Offline"!==l.onlineState,p),ee=T.applyChanges(O,l.isPrimaryClient,z);ol(l,s,ee.Xu);const me=new UE(n,s,T);return l.ic.set(n,me),l.rc.has(s)?l.rc.get(s).push(n):l.rc.set(s,[n]),ee.snapshot}),Jg.apply(this,arguments)}function ey(l,n){return op.apply(this,arguments)}function op(){return op=(0,_.Z)(function*(l,n){const s=En(l),d=s.ic.get(n),p=s.rc.get(d.targetId);if(p.length>1)return s.rc.set(d.targetId,p.filter(v=>!nl(v,n))),void s.ic.delete(n);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(d.targetId),s.sharedClientState.isActiveQueryTarget(d.targetId)||(yield nd(s.localStore,d.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(d.targetId),Ph(s.remoteStore,d.targetId),Wd(s,d.targetId)}).catch(Oo))):(Wd(s,d.targetId),yield nd(s.localStore,d.targetId,!0))}),op.apply(this,arguments)}function pu(){return pu=(0,_.Z)(function*(l,n,s){const d=Dl(l);try{const p=yield function(v,T){const O=En(v),z=M.now(),ee=T.reduce((gt,Ft)=>gt.add(Ft.key),Li());let me,Re;return O.persistence.runTransaction("Locally write mutations","readwrite",gt=>{let Ft=ro(),jt=Li();return O.Gi.getEntries(gt,ee).next(Rn=>{Ft=Rn,Ft.forEach((qn,xr)=>{xr.isValidDocument()||(jt=jt.add(qn))})}).next(()=>O.localDocuments.getOverlayedDocuments(gt,Ft)).next(Rn=>{me=Rn;const qn=[];for(const xr of T){const ls=tg(xr,me.get(xr.key).overlayedDocument);null!=ls&&qn.push(new Ec(xr.key,ls,Cs(ls.value.mapValue),fs.exists(!0)))}return O.mutationQueue.addMutationBatch(gt,z,qn,T)}).next(Rn=>{Re=Rn;const qn=Rn.applyToLocalDocumentSet(me,jt);return O.documentOverlayCache.saveOverlays(gt,Rn.batchId,qn)})}).then(()=>({batchId:Re.batchId,changes:Nf(me)}))}(d.localStore,n);d.sharedClientState.addPendingMutation(p.batchId),function(v,T,O){let z=v.hc[v.currentUser.toKey()];z||(z=new $r(bi)),z=z.insert(T,O),v.hc[v.currentUser.toKey()]=z}(d,p.batchId,s),yield Oc(d,p.changes),yield Fh(d.remoteStore)}catch(p){const v=Lh(p,"Failed to persist write");s.reject(v)}}),pu.apply(this,arguments)}function ty(l,n){return ny.apply(this,arguments)}function ny(){return ny=(0,_.Z)(function*(l,n){const s=En(l);try{const d=yield Yv(s.localStore,n);n.targetChanges.forEach((p,v)=>{const T=s.cc.get(v);T&&(di(p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size<=1),p.addedDocuments.size>0?T.nc=!0:p.modifiedDocuments.size>0?di(T.nc):p.removedDocuments.size>0&&(di(T.nc),T.nc=!1))}),yield Oc(s,d,n)}catch(d){yield Oo(d)}}),ny.apply(this,arguments)}function f0(l,n,s){const d=En(l);if(d.isPrimaryClient&&0===s||!d.isPrimaryClient&&1===s){const p=[];d.ic.forEach((v,T)=>{const O=T.view.Pu(n);O.snapshot&&p.push(O.snapshot)}),function(v,T){const O=En(v);O.onlineState=T;let z=!1;O.queries.forEach((ee,me)=>{for(const Re of me.listeners)Re.Pu(T)&&(z=!0)}),z&&rp(O)}(d.eventManager,n),p.length&&d.sc.zo(p),d.onlineState=n,d.isPrimaryClient&&d.sharedClientState.setOnlineState(n)}}function ap(l,n,s){return p0.apply(this,arguments)}function p0(){return p0=(0,_.Z)(function*(l,n,s){const d=En(l);d.sharedClientState.updateQueryState(n,"rejected",s);const p=d.cc.get(n),v=p&&p.key;if(v){let T=new $r(_e.comparator);T=T.insert(v,Hr.newNoDocument(v,I.min()));const O=Li().add(v),z=new y(I.min(),new Map,new Dr(bi),T,O);yield ty(d,z),d.uc=d.uc.remove(v),d.cc.delete(n),g0(d)}else yield nd(d.localStore,n,!1).then(()=>Wd(d,n,s)).catch(Oo)}),p0.apply(this,arguments)}function Xg(l,n){return iy.apply(this,arguments)}function iy(){return iy=(0,_.Z)(function*(l,n){const s=En(l),d=n.batch.batchId;try{const p=yield I_(s.localStore,n);lp(s,d,null),ry(s,d),s.sharedClientState.updateMutationState(d,"acknowledged"),yield Oc(s,p)}catch(p){yield Oo(p)}}),iy.apply(this,arguments)}function GE(l,n,s){return em.apply(this,arguments)}function em(){return em=(0,_.Z)(function*(l,n,s){const d=En(l);try{const p=yield function(v,T){const O=En(v);return O.persistence.runTransaction("Reject batch","readwrite-primary",z=>{let ee;return O.mutationQueue.lookupMutationBatch(z,T).next(me=>(di(null!==me),ee=me.keys(),O.mutationQueue.removeMutationBatch(z,me))).next(()=>O.mutationQueue.performConsistencyCheck(z)).next(()=>O.documentOverlayCache.removeOverlaysForBatchId(z,ee,T)).next(()=>O.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(z,ee)).next(()=>O.localDocuments.getDocuments(z,ee))})}(d.localStore,n);lp(d,n,s),ry(d,n),d.sharedClientState.updateMutationState(n,"rejected",s),yield Oc(d,p)}catch(p){yield Oo(p)}}),em.apply(this,arguments)}function Uh(){return Uh=(0,_.Z)(function*(l,n){const s=En(l);fu(s.remoteStore)||Wt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const d=yield function(v){const T=En(v);return T.persistence.runTransaction("Get highest unacknowledged batch id","readonly",O=>T.mutationQueue.getHighestUnacknowledgedBatchId(O))}(s.localStore);if(-1===d)return void n.resolve();const p=s.lc.get(d)||[];p.push(n),s.lc.set(d,p)}catch(d){const p=Lh(d,"Initialization of waitForPendingWrites() operation failed");n.reject(p)}}),Uh.apply(this,arguments)}function ry(l,n){(l.lc.get(n)||[]).forEach(s=>{s.resolve()}),l.lc.delete(n)}function lp(l,n,s){const d=En(l);let p=d.hc[d.currentUser.toKey()];if(p){const v=p.get(n);v&&(s?v.reject(s):v.resolve(),p=p.remove(n)),d.hc[d.currentUser.toKey()]=p}}function Wd(l,n,s=null){l.sharedClientState.removeLocalQueryTarget(n);for(const d of l.rc.get(n))l.ic.delete(d),s&&l.sc.wc(d,s);l.rc.delete(n),l.isPrimaryClient&&l.ac.ls(n).forEach(d=>{l.ac.containsKey(d)||ZE(l,d)})}function ZE(l,n){l.oc.delete(n.path.canonicalString());const s=l.uc.get(n);null!==s&&(Ph(l.remoteStore,s),l.uc=l.uc.remove(n),l.cc.delete(s),g0(l))}function ol(l,n,s){for(const d of s)d instanceof d0?(l.ac.addReference(d.key,n),sw(l,d)):d instanceof h0?(Wt("SyncEngine","Document no longer in limbo: "+d.key),l.ac.removeReference(d.key,n),l.ac.containsKey(d.key)||ZE(l,d.key)):An()}function sw(l,n){const s=n.key,d=s.path.canonicalString();l.uc.get(s)||l.oc.has(d)||(Wt("SyncEngine","New document in limbo: "+s),l.oc.add(d),g0(l))}function g0(l){for(;l.oc.size>0&&l.uc.size<l.maxConcurrentLimboResolutions;){const n=l.oc.values().next().value;l.oc.delete(n);const s=new _e(q.fromString(n)),d=l.fc.next();l.cc.set(d,new jE(s)),l.uc=l.uc.insert(s,d),Lg(l.remoteStore,new Yu(io(gc(s.path)),d,2,no.at))}}function Oc(l,n,s){return tm.apply(this,arguments)}function tm(){return tm=(0,_.Z)(function*(l,n,s){const d=En(l),p=[],v=[],T=[];var O;d.ic.isEmpty()||(d.ic.forEach((O,z)=>{T.push(d._c(z,n,s).then(ee=>{if((ee||s)&&d.isPrimaryClient&&d.sharedClientState.updateQueryState(z.targetId,(null==ee?void 0:ee.fromCache)?"not-current":"current"),ee){p.push(ee);const me=T_.Ci(z.targetId,ee);v.push(me)}}))}),yield Promise.all(T),d.sc.zo(p),yield(O=(0,_.Z)(function*(z,ee){const me=En(z);try{yield me.persistence.runTransaction("notifyLocalViewChanges","readwrite",Re=>ut.forEach(ee,gt=>ut.forEach(gt.Si,Ft=>me.persistence.referenceDelegate.addReference(Re,gt.targetId,Ft)).next(()=>ut.forEach(gt.Di,Ft=>me.persistence.referenceDelegate.removeReference(Re,gt.targetId,Ft)))))}catch(Re){if(!yo(Re))throw Re;Wt("LocalStore","Failed to update sequence numbers: "+Re)}for(const Re of ee){const gt=Re.targetId;if(!Re.fromCache){const Ft=me.Ui.get(gt),Rn=Ft.withLastLimboFreeSnapshotVersion(Ft.snapshotVersion);me.Ui=me.Ui.insert(gt,Rn)}}}),function(z,ee){return O.apply(this,arguments)})(d.localStore,v))}),tm.apply(this,arguments)}function m0(l,n){return sy.apply(this,arguments)}function sy(){return sy=(0,_.Z)(function*(l,n){const s=En(l);if(!s.currentUser.isEqual(n)){Wt("SyncEngine","User change. New user:",n.toKey());const d=yield D_(s.localStore,n);s.currentUser=n,(p=s).lc.forEach(T=>{T.forEach(O=>{O.reject(new en(Ct.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),p.lc.clear(),s.sharedClientState.handleUserChange(n,d.removedBatchIds,d.addedBatchIds),yield Oc(s,d.ji)}var p}),sy.apply(this,arguments)}function ow(l,n){const s=En(l),d=s.cc.get(n);if(d&&d.nc)return Li().add(d.key);{let p=Li();const v=s.rc.get(n);if(!v)return p;for(const T of v){const O=s.ic.get(T);p=p.unionWith(O.view.ju)}return p}}function oy(l,n){return jh.apply(this,arguments)}function jh(){return jh=(0,_.Z)(function*(l,n){const s=En(l),d=yield Mh(s.localStore,n.query,!0),p=n.view.tc(d);return s.isPrimaryClient&&ol(s,n.targetId,p.Xu),p}),jh.apply(this,arguments)}function _0(l,n){return $h.apply(this,arguments)}function $h(){return $h=(0,_.Z)(function*(l,n){const s=En(l);return S_(s.localStore,n).then(d=>Oc(s,d))}),$h.apply(this,arguments)}function y0(l,n,s,d){return cp.apply(this,arguments)}function cp(){return cp=(0,_.Z)(function*(l,n,s,d){const p=En(l),v=yield function(T,O){const z=En(T),ee=En(z.mutationQueue);return z.persistence.runTransaction("Lookup mutation documents","readonly",me=>ee.Tn(me,O).next(Re=>Re?z.localDocuments.getDocuments(me,Re):ut.resolve(null)))}(p.localStore,n);var O;null!==v?("pending"===s?yield Fh(p.remoteStore):"acknowledged"===s||"rejected"===s?(lp(p,n,d||null),ry(p,n),O=n,En(En(p.localStore).mutationQueue).An(O)):An(),yield Oc(p,v)):Wt("SyncEngine","Cannot apply mutation batch with id: "+n)}),cp.apply(this,arguments)}function ay(){return ay=(0,_.Z)(function*(l,n){const s=En(l);if(dp(s),Dl(s),!0===n&&!0!==s.dc){const d=s.sharedClientState.getAllActiveQueryTargets(),p=yield v0(s,d.toArray());s.dc=!0,yield qg(s.remoteStore,!0);for(const v of p)Lg(s.remoteStore,v)}else if(!1===n&&!1!==s.dc){const d=[];let p=Promise.resolve();s.rc.forEach((v,T)=>{s.sharedClientState.isLocalQueryTarget(T)?d.push(T):p=p.then(()=>(Wd(s,T),nd(s.localStore,T,!0))),Ph(s.remoteStore,T)}),yield p,yield v0(s,d),function(v){const T=En(v);T.cc.forEach((O,z)=>{Ph(T.remoteStore,z)}),T.ac.fs(),T.cc=new Map,T.uc=new $r(_e.comparator)}(s),s.dc=!1,yield qg(s.remoteStore,!1)}}),ay.apply(this,arguments)}function v0(l,n,s){return ly.apply(this,arguments)}function ly(){return ly=(0,_.Z)(function*(l,n,s){const d=En(l),p=[],v=[];for(const T of n){let O;const z=d.rc.get(T);if(z&&0!==z.length){O=yield Nh(d.localStore,io(z[0]));for(const ee of z){const me=d.ic.get(ee),Re=yield oy(d,me);Re.snapshot&&v.push(Re.snapshot)}}else{const ee=yield A_(d.localStore,T);O=yield Nh(d.localStore,ee),yield sp(d,up(ee),T,!1,O.resumeToken)}p.push(O)}return d.sc.zo(v),p}),ly.apply(this,arguments)}function up(l){return Jp(l.path,l.collectionGroup,l.orderBy,l.filters,l.limit,"F",l.startAt,l.endAt)}function Hh(l){const n=En(l);return En(En(n.localStore).persistence).vi()}function qE(l,n,s,d){return qd.apply(this,arguments)}function qd(){return qd=(0,_.Z)(function*(l,n,s,d){const p=En(l);if(p.dc)return void Wt("SyncEngine","Ignoring unexpected query state notification.");const v=p.rc.get(n);if(v&&v.length>0)switch(s){case"current":case"not-current":{const T=yield S_(p.localStore,Uu(v[0])),O=y.createSynthesizedRemoteEventForCurrentChange(n,"current"===s,Lr.EMPTY_BYTE_STRING);yield Oc(p,T,O);break}case"rejected":yield nd(p.localStore,n,!0),Wd(p,n,d);break;default:An()}}),qd.apply(this,arguments)}function zE(l,n,s){return cy.apply(this,arguments)}function cy(){return cy=(0,_.Z)(function*(l,n,s){const d=dp(l);if(d.dc){for(const p of n){if(d.rc.has(p)){Wt("SyncEngine","Adding an already active target "+p);continue}const v=yield A_(d.localStore,p),T=yield Nh(d.localStore,v);yield sp(d,up(v),T.targetId,!1,T.resumeToken),Lg(d.remoteStore,T)}for(const p of s)d.rc.has(p)&&(yield nd(d.localStore,p,!1).then(()=>{Ph(d.remoteStore,p),Wd(d,p)}).catch(Oo))}}),cy.apply(this,arguments)}function dp(l){const n=En(l);return n.remoteStore.remoteSyncer.applyRemoteEvent=ty.bind(null,n),n.remoteStore.remoteSyncer.getRemoteKeysForTarget=ow.bind(null,n),n.remoteStore.remoteSyncer.rejectListen=ap.bind(null,n),n.sc.zo=u0.bind(null,n.eventManager),n.sc.wc=BE.bind(null,n.eventManager),n}function Dl(l){const n=En(l);return n.remoteStore.remoteSyncer.applySuccessfulWrite=Xg.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=GE.bind(null,n),n}class Vo{constructor(){this.synchronizeTabs=!1}initialize(n){var s=this;return(0,_.Z)(function*(){s.It=Yo(n.databaseInfo.databaseId),s.sharedClientState=s.gc(n),s.persistence=s.yc(n),yield s.persistence.start(),s.localStore=s.Ic(n),s.gcScheduler=s.Tc(n,s.localStore),s.indexBackfillerScheduler=s.Ec(n,s.localStore)})()}Tc(n,s){return null}Ec(n,s){return null}Ic(n){return Kv(this.persistence,new du,n.initialUser,this.It)}yc(n){return new td(xc.Bs,this.It)}gc(n){return new M_}terminate(){var n=this;return(0,_.Z)(function*(){n.gcScheduler&&n.gcScheduler.stop(),yield n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}class gu extends Vo{constructor(n,s,d){super(),this.Ac=n,this.cacheSizeBytes=s,this.forceOwnership=d,this.synchronizeTabs=!1}initialize(n){var s=()=>super.initialize,d=this;return(0,_.Z)(function*(){yield s().call(d,n),yield d.Ac.initialize(d,n),yield Dl(d.Ac.syncEngine),yield Fh(d.Ac.remoteStore),yield d.persistence.li(()=>(d.gcScheduler&&!d.gcScheduler.started&&d.gcScheduler.start(),d.indexBackfillerScheduler&&!d.indexBackfillerScheduler.started&&d.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(n){return Kv(this.persistence,new du,n.initialUser,this.It)}Tc(n,s){return new Dg(this.persistence.referenceDelegate.garbageCollector,n.asyncQueue,s)}Ec(n,s){const d=new Ru(s,this.persistence);return new zc(n.asyncQueue,d)}yc(n){const s=Ld(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),d=void 0!==this.cacheSizeBytes?ja.withCacheSize(this.cacheSizeBytes):ja.DEFAULT;return new E_(this.synchronizeTabs,s,n.clientId,d,n.asyncQueue,t0(),Pg(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(n){return new M_}}class hp extends gu{constructor(n,s){super(n,s,!1),this.Ac=n,this.cacheSizeBytes=s,this.synchronizeTabs=!0}initialize(n){var s=()=>super.initialize,d=this;return(0,_.Z)(function*(){yield s().call(d,n);const p=d.Ac.syncEngine;d.sharedClientState instanceof N_&&(d.sharedClientState.syncEngine={Fr:y0.bind(null,p),$r:qE.bind(null,p),Br:zE.bind(null,p),vi:Hh.bind(null,p),Mr:_0.bind(null,p)},yield d.sharedClientState.start()),yield d.persistence.li(function(){var v=(0,_.Z)(function*(T){yield function WE(l,n){return ay.apply(this,arguments)}(d.Ac.syncEngine,T),d.gcScheduler&&(T&&!d.gcScheduler.started?d.gcScheduler.start():T||d.gcScheduler.stop()),d.indexBackfillerScheduler&&(T&&!d.indexBackfillerScheduler.started?d.indexBackfillerScheduler.start():T||d.indexBackfillerScheduler.stop())});return function(T){return v.apply(this,arguments)}}())})()}gc(n){const s=t0();if(!N_.C(s))throw new en(Ct.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const d=Ld(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new N_(s,n.asyncQueue,d,n.clientId,n.initialUser)}}class ca{initialize(n,s){var d=this;return(0,_.Z)(function*(){d.localStore||(d.localStore=n.localStore,d.sharedClientState=n.sharedClientState,d.datastore=d.createDatastore(s),d.remoteStore=d.createRemoteStore(s),d.eventManager=d.createEventManager(s),d.syncEngine=d.createSyncEngine(s,!n.synchronizeTabs),d.sharedClientState.onlineStateHandler=p=>f0(d.syncEngine,p,1),d.remoteStore.remoteSyncer.handleCredentialChange=m0.bind(null,d.syncEngine),yield qg(d.remoteStore,d.syncEngine.isPrimaryClient))})()}createEventManager(n){return new np}createDatastore(n){const s=Yo(n.databaseInfo.databaseId),d=new e0(n.databaseInfo);return new r0(n.authCredentials,n.appCheckCredentials,d,s)}createRemoteStore(n){return s=this.localStore,d=this.datastore,p=n.asyncQueue,v=O=>f0(this.syncEngine,O,0),T=x_.C()?new x_:new ew,new s0(s,d,p,v,T);var s,d,p,v,T}createSyncEngine(n,s){return function(d,p,v,T,O,z,ee){const me=new $E(d,p,v,T,O,z);return ee&&(me.dc=!0),me}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,s)}terminate(){return(n=(0,_.Z)(function*(s){const d=En(s);Wt("RemoteStore","RemoteStore shutting down."),d.wu.add(5),yield kh(d),d.gu.shutdown(),d.yu.set("Unknown")}),function(s){return n.apply(this,arguments)})(this.remoteStore);var n}}function Xl(l,n,s){if(!s)throw new en(Ct.INVALID_ARGUMENT,`Function ${l}() cannot be called with an empty ${n}.`)}function id(l,n,s,d){if(!0===n&&!0===d)throw new en(Ct.INVALID_ARGUMENT,`${l} and ${s} cannot be used together.`)}function zd(l){if(!_e.isDocumentKey(l))throw new en(Ct.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${l} has ${l.length}.`)}function rd(l){if(_e.isDocumentKey(l))throw new en(Ct.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${l} has ${l.length}.`)}function mu(l){if(void 0===l)return"undefined";if(null===l)return"null";if("string"==typeof l)return l.length>20&&(l=`${l.substring(0,20)}...`),JSON.stringify(l);if("number"==typeof l||"boolean"==typeof l)return""+l;if("object"==typeof l){if(l instanceof Array)return"an array";{const n=(s=l).constructor?s.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var s;return"function"==typeof l?"a function":An()}function Ji(l,n){if("_delegate"in l&&(l=l._delegate),!(l instanceof n)){if(n.name===l.constructor.name)throw new en(Ct.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=mu(l);throw new en(Ct.INVALID_ARGUMENT,`Expected type '${n.name}', but it was: ${s}`)}}return l}function Kd(l,n){if(n<=0)throw new en(Ct.INVALID_ARGUMENT,`Function ${l}() requires a positive number, but it was: ${n}.`)}const sd=new Map;class ec{constructor(n){var s;if(void 0===n.host){if(void 0!==n.ssl)throw new en(Ct.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(s=n.ssl)||void 0===s||s;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new en(Ct.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!n.experimentalAutoDetectLongPolling,this.useFetchStreams=!!n.useFetchStreams,id("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling)}isEqual(n){return this.host===n.host&&this.ssl===n.ssl&&this.credentials===n.credentials&&this.cacheSizeBytes===n.cacheSizeBytes&&this.experimentalForceLongPolling===n.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===n.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===n.ignoreUndefinedProperties&&this.useFetchStreams===n.useFetchStreams}}class tc{constructor(n,s,d,p){this._authCredentials=n,this._appCheckCredentials=s,this._databaseId=d,this._app=p,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ec({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new en(Ct.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(n){if(this._settingsFrozen)throw new en(Ct.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ec(n),void 0!==n.credentials&&(this._authCredentials=function(s){if(!s)return new Gc;switch(s.type){case"gapi":return new fl(s.client,s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new en(Ct.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(n.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=sd.get(n);s&&(Wt("ComponentProvider","Removing Datastore"),sd.delete(n),s.terminate())}(this),Promise.resolve()}}function uy(l,n,s,d={}){var p;const v=(l=Ji(l,tc))._getSettings();if("firestore.googleapis.com"!==v.host&&v.host!==n&&No("Host has been set in both settings() and useEmulator(), emulator host will be used"),l._setSettings(Object.assign(Object.assign({},v),{host:`${n}:${s}`,ssl:!1})),d.mockUserToken){let T,O;if("string"==typeof d.mockUserToken)T=d.mockUserToken,O=br.MOCK_USER;else{T=(0,Ie.Sg)(d.mockUserToken,null===(p=l._app)||void 0===p?void 0:p.options.projectId);const z=d.mockUserToken.sub||d.mockUserToken.user_id;if(!z)throw new en(Ct.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");O=new br(z)}l._authCredentials=new qs(new dc(T,O))}}class Ts{constructor(n,s,d){this.converter=s,this._key=d,this.type="document",this.firestore=n}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ga(this.firestore,this.converter,this._key.path.popLast())}withConverter(n){return new Ts(this.firestore,n,this._key)}}class Eo{constructor(n,s,d){this.converter=s,this._query=d,this.type="query",this.firestore=n}withConverter(n){return new Eo(this.firestore,n,this._query)}}class Ga extends Eo{constructor(n,s,d){super(n,s,gc(d)),this._path=d,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const n=this._path.popLast();return n.isEmpty()?null:new Ts(this.firestore,null,new _e(n))}withConverter(n){return new Ga(this.firestore,n,this._path)}}function dy(l,n,...s){if(l=(0,Ie.m9)(l),Xl("collection","path",n),l instanceof tc){const d=q.fromString(n,...s);return rd(d),new Ga(l,null,d)}{if(!(l instanceof Ts||l instanceof Ga))throw new en(Ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const d=l._path.child(q.fromString(n,...s));return rd(d),new Ga(l.firestore,null,d)}}function b0(l,n){if(l=Ji(l,tc),Xl("collectionGroup","collection id",n),n.indexOf("/")>=0)throw new en(Ct.INVALID_ARGUMENT,`Invalid collection ID '${n}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Eo(l,null,(s=n,new tl(q.emptyPath(),s)));var s}function hy(l,n,...s){if(l=(0,Ie.m9)(l),1===arguments.length&&(n=yd.R()),Xl("doc","path",n),l instanceof tc){const d=q.fromString(n,...s);return zd(d),new Ts(l,null,new _e(d))}{if(!(l instanceof Ts||l instanceof Ga))throw new en(Ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const d=l._path.child(q.fromString(n,...s));return zd(d),new Ts(l.firestore,l instanceof Ga?l.converter:null,new _e(d))}}function E0(l,n){return l=(0,Ie.m9)(l),n=(0,Ie.m9)(n),(l instanceof Ts||l instanceof Ga)&&(n instanceof Ts||n instanceof Ga)&&l.firestore===n.firestore&&l.path===n.path&&l.converter===n.converter}function nm(l,n){return l=(0,Ie.m9)(l),n=(0,Ie.m9)(n),l instanceof Eo&&n instanceof Eo&&l.firestore===n.firestore&&nl(l._query,n._query)&&l.converter===n.converter}function C0(l,n=10240){let s=0;return{read:()=>(0,_.Z)(function*(){if(s<l.byteLength){const d={value:l.slice(s,s+n),done:!1};return s+=n,d}return{done:!0}})(),cancel:()=>(0,_.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class fp{constructor(n){this.observer=n,this.muted=!1}next(n){this.observer.next&&this.Rc(this.observer.next,n)}error(n){this.observer.error?this.Rc(this.observer.error,n):Mi("Uncaught Error in snapshot listener:",n)}bc(){this.muted=!0}Rc(n,s){this.muted||setTimeout(()=>{this.muted||n(s)},0)}}class fy{constructor(n,s){this.Pc=n,this.It=s,this.metadata=new is,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(d=>{d&&d.Ou()?this.metadata.resolve(d.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==d?void 0:d.payload)}`))},d=>this.metadata.reject(d))}close(){return this.Pc.cancel()}getMetadata(){var n=this;return(0,_.Z)(function*(){return n.metadata.promise})()}mc(){var n=this;return(0,_.Z)(function*(){return yield n.getMetadata(),n.Vc()})()}Vc(){var n=this;return(0,_.Z)(function*(){const s=yield n.Sc();if(null===s)return null;const d=n.vc.decode(s),p=Number(d);isNaN(p)&&n.Dc(`length string (${d}) is not valid number`);const v=yield n.Cc(p);return new VE(JSON.parse(v),s.length+p)})()}xc(){return this.buffer.findIndex(n=>n==="{".charCodeAt(0))}Sc(){var n=this;return(0,_.Z)(function*(){for(;n.xc()<0&&!(yield n.Nc()););if(0===n.buffer.length)return null;const s=n.xc();s<0&&n.Dc("Reached the end of bundle when a length string is expected.");const d=n.buffer.slice(0,s);return n.buffer=n.buffer.slice(s),d})()}Cc(n){var s=this;return(0,_.Z)(function*(){for(;s.buffer.length<n;)(yield s.Nc())&&s.Dc("Reached the end of bundle when more is expected.");const d=s.vc.decode(s.buffer.slice(0,n));return s.buffer=s.buffer.slice(n),d})()}Dc(n){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${n}`)}Nc(){var n=this;return(0,_.Z)(function*(){const s=yield n.Pc.read();if(!s.done){const d=new Uint8Array(n.buffer.length+s.value.length);d.set(n.buffer),d.set(s.value,n.buffer.length),n.buffer=d}return s.done})()}}class D0{constructor(n){this.datastore=n,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(n){var s=this;return(0,_.Z)(function*(){if(s.ensureCommitNotCalled(),s.mutations.length>0)throw new en(Ct.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const d=yield(p=(0,_.Z)(function*(v,T){const O=En(v),z=Zu(O.It)+"/documents",ee={documents:T.map(Ft=>Tc(O.It,Ft))},me=yield O._o("BatchGetDocuments",z,ee,T.length),Re=new Map;me.forEach(Ft=>{const jt=function ag(l,n){return"found"in n?function(s,d){di(!!d.found);const p=rl(s,d.found.name),v=Ks(d.found.updateTime),T=new ss({mapValue:{fields:d.found.fields}});return Hr.newFoundDocument(p,v,T)}(l,n):"missing"in n?function(s,d){di(!!d.missing),di(!!d.readTime);const p=rl(s,d.missing),v=Ks(d.readTime);return Hr.newNoDocument(p,v)}(l,n):An()}(O.It,Ft);Re.set(jt.key.toString(),jt)});const gt=[];return T.forEach(Ft=>{const jt=Re.get(Ft.toString());di(!!jt),gt.push(jt)}),gt}),function(v,T){return p.apply(this,arguments)})(s.datastore,n);var p;return d.forEach(p=>s.recordVersion(p)),d})()}set(n,s){this.write(s.toMutation(n,this.precondition(n))),this.writtenDocs.add(n.toString())}update(n,s){try{this.write(s.toMutation(n,this.preconditionForUpdate(n)))}catch(d){this.lastWriteError=d}this.writtenDocs.add(n.toString())}delete(n){this.write(new Cc(n,this.precondition(n))),this.writtenDocs.add(n.toString())}commit(){var n=this;return(0,_.Z)(function*(){if(n.ensureCommitNotCalled(),n.lastWriteError)throw n.lastWriteError;const s=n.readVersions;var d;n.mutations.forEach(d=>{s.delete(d.key.toString())}),s.forEach((d,p)=>{const v=_e.fromPath(p);n.mutations.push(new ng(v,n.precondition(v)))}),yield(d=(0,_.Z)(function*(p,v){const T=En(p),O=Zu(T.It)+"/documents",z={writes:v.map(ee=>Sd(T.It,ee))};yield T.ao("Commit",O,z)}),function(p,v){return d.apply(this,arguments)})(n.datastore,n.mutations),n.committed=!0})()}recordVersion(n){let s;if(n.isFoundDocument())s=n.version;else{if(!n.isNoDocument())throw An();s=I.min()}const d=this.readVersions.get(n.key.toString());if(d){if(!s.isEqual(d))throw new en(Ct.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(n.key.toString(),s)}precondition(n){const s=this.readVersions.get(n.toString());return!this.writtenDocs.has(n.toString())&&s?s.isEqual(I.min())?fs.exists(!1):fs.updateTime(s):fs.none()}preconditionForUpdate(n){const s=this.readVersions.get(n.toString());if(!this.writtenDocs.has(n.toString())&&s){if(s.isEqual(I.min()))throw new en(Ct.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fs.updateTime(s)}return fs.exists(!0)}write(n){this.ensureCommitNotCalled(),this.mutations.push(n)}ensureCommitNotCalled(){}}class im{constructor(n,s,d,p,v){this.asyncQueue=n,this.datastore=s,this.options=d,this.updateFunction=p,this.deferred=v,this.kc=d.maxAttempts,this.No=new O_(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var n=this;this.No.Ro((0,_.Z)(function*(){const s=new D0(n.datastore),d=n.Mc(s);d&&d.then(p=>{n.asyncQueue.enqueueAndForget(()=>s.commit().then(()=>{n.deferred.resolve(p)}).catch(v=>{n.Fc(v)}))}).catch(p=>{n.Fc(p)})}))}Mc(n){try{const s=this.updateFunction(n);return!Es(s)&&s.catch&&s.then?s:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(s){return this.deferred.reject(s),null}}Fc(n){this.kc>0&&this.$c(n)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(n)}$c(n){if("FirebaseError"===n.name){const s=n.code;return"aborted"===s||"failed-precondition"===s||!rg(s)}return!1}}class YE{constructor(n,s,d,p){var v=this;this.authCredentials=n,this.appCheckCredentials=s,this.asyncQueue=d,this.databaseInfo=p,this.user=br.UNAUTHENTICATED,this.clientId=yd.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(d,function(){var T=(0,_.Z)(function*(O){Wt("FirestoreClient","Received user=",O.uid),yield v.authCredentialListener(O),v.user=O});return function(O){return T.apply(this,arguments)}}()),this.appCheckCredentials.start(d,T=>(Wt("FirestoreClient","Received new app check token=",T),this.appCheckCredentialListener(T,this.user)))}getConfiguration(){var n=this;return(0,_.Z)(function*(){return{asyncQueue:n.asyncQueue,databaseInfo:n.databaseInfo,clientId:n.clientId,authCredentials:n.authCredentials,appCheckCredentials:n.appCheckCredentials,initialUser:n.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(n){this.authCredentialListener=n}setAppCheckTokenChangeListener(n){this.appCheckCredentialListener=n}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new en(Ct.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var n=this;this.asyncQueue.enterRestrictedMode();const s=new is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_.Z)(function*(){try{n.onlineComponents&&(yield n.onlineComponents.terminate()),n.offlineComponents&&(yield n.offlineComponents.terminate()),n.authCredentials.shutdown(),n.appCheckCredentials.shutdown(),s.resolve()}catch(d){const p=Lh(d,"Failed to shutdown persistence");s.reject(p)}})),s.promise}}function py(l,n){return gy.apply(this,arguments)}function gy(){return gy=(0,_.Z)(function*(l,n){l.asyncQueue.verifyOperationInProgress(),Wt("FirestoreClient","Initializing OfflineComponentProvider");const s=yield l.getConfiguration();yield n.initialize(s);let d=s.initialUser;l.setCredentialChangeListener(function(){var p=(0,_.Z)(function*(v){d.isEqual(v)||(yield D_(n.localStore,v),d=v)});return function(v){return p.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(()=>l.terminate()),l.offlineComponents=n}),gy.apply(this,arguments)}function my(l,n){return _y.apply(this,arguments)}function _y(){return _y=(0,_.Z)(function*(l,n){l.asyncQueue.verifyOperationInProgress();const s=yield yy(l);Wt("FirestoreClient","Initializing OnlineComponentProvider");const d=yield l.getConfiguration();yield n.initialize(s,d),l.setCredentialChangeListener(p=>q_(n.remoteStore,p)),l.setAppCheckTokenChangeListener((p,v)=>q_(n.remoteStore,v)),l.onlineComponents=n}),_y.apply(this,arguments)}function yy(l){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,_.Z)(function*(l){return l.offlineComponents||(Wt("FirestoreClient","Using default OfflineComponentProvider"),yield py(l,new Vo)),l.offlineComponents}),Zh.apply(this,arguments)}function Wh(l){return vy.apply(this,arguments)}function vy(){return vy=(0,_.Z)(function*(l){return l.onlineComponents||(Wt("FirestoreClient","Using default OnlineComponentProvider"),yield my(l,new ca)),l.onlineComponents}),vy.apply(this,arguments)}function QE(l){return yy(l).then(n=>n.persistence)}function rm(l){return yy(l).then(n=>n.localStore)}function I0(l){return Wh(l).then(n=>n.remoteStore)}function by(l){return Wh(l).then(n=>n.syncEngine)}function pp(l){return Cy.apply(this,arguments)}function Cy(){return Cy=(0,_.Z)(function*(l){const n=yield Wh(l),s=n.eventManager;return s.onListen=HE.bind(null,n.syncEngine),s.onUnlisten=ey.bind(null,n.syncEngine),s}),Cy.apply(this,arguments)}function S0(l,n,s={}){const d=new is;return l.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function(p,v,T,O,z){const ee=new fp({next:Re=>{v.enqueueAndForget(()=>Yg(p,me));const gt=Re.docs.has(T);!gt&&Re.fromCache?z.reject(new en(Ct.UNAVAILABLE,"Failed to get document because the client is offline.")):gt&&Re.fromCache&&O&&"server"===O.source?z.reject(new en(Ct.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):z.resolve(Re)},error:Re=>z.reject(Re)}),me=new Q_(gc(T.path),ee,{includeMetadataChanges:!0,ku:!0});return Y_(p,me)}(yield pp(l),l.asyncQueue,n,s,d)})),d.promise}function gp(l,n,s={}){const d=new is;return l.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function(p,v,T,O,z){const ee=new fp({next:Re=>{v.enqueueAndForget(()=>Yg(p,me)),Re.fromCache&&"server"===O.source?z.reject(new en(Ct.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):z.resolve(Re)},error:Re=>z.reject(Re)}),me=new Q_(T,ee,{includeMetadataChanges:!0,ku:!0});return Y_(p,me)}(yield pp(l),l.asyncQueue,n,s,d)})),d.promise}class M0{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new O_(this,"async_queue_retry"),this.Wc=()=>{const s=Pg();s&&Wt("AsyncQueue","Visibility state changed to "+s.visibilityState),this.No.Po()};const n=Pg();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(n){this.enqueue(n)}enqueueAndForgetEvenWhileRestricted(n){this.zc(),this.Hc(n)}enterRestrictedMode(n){if(!this.Uc){this.Uc=!0,this.Qc=n||!1;const s=Pg();s&&"function"==typeof s.removeEventListener&&s.removeEventListener("visibilitychange",this.Wc)}}enqueue(n){if(this.zc(),this.Uc)return new Promise(()=>{});const s=new is;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(n().then(s.resolve,s.reject),s.promise)).then(()=>s.promise)}enqueueRetryable(n){this.enqueueAndForget(()=>(this.Lc.push(n),this.Jc()))}Jc(){var n=this;return(0,_.Z)(function*(){if(0!==n.Lc.length){try{yield n.Lc[0](),n.Lc.shift(),n.No.reset()}catch(s){if(!yo(s))throw s;Wt("AsyncQueue","Operation failed with retryable error: "+s)}n.Lc.length>0&&n.No.Ro(()=>n.Jc())}})()}Hc(n){const s=this.Bc.then(()=>(this.Gc=!0,n().catch(d=>{throw this.Kc=d,this.Gc=!1,Mi("INTERNAL UNHANDLED ERROR: ",function(v){let T=v.message||"";return v.stack&&(T=v.stack.includes(v.message)?v.stack:v.message+"\n"+v.stack),T}(d)),d}).then(d=>(this.Gc=!1,d))));return this.Bc=s,s}enqueueAfterDelay(n,s,d){this.zc(),this.jc.indexOf(n)>-1&&(s=0);const p=z_.createAndSchedule(this,n,s,d,v=>this.Yc(v));return this.qc.push(p),p}zc(){this.Kc&&An()}verifyOperationInProgress(){}Xc(){var n=this;return(0,_.Z)(function*(){let s;do{s=n.Bc,yield s}while(s!==n.Bc)})()}Zc(n){for(const s of this.qc)if(s.timerId===n)return!0;return!1}ta(n){return this.Xc().then(()=>{this.qc.sort((s,d)=>s.targetTimeMs-d.targetTimeMs);for(const s of this.qc)if(s.skipDelay(),"all"!==n&&s.timerId===n)break;return this.Xc()})}ea(n){this.jc.push(n)}Yc(n){const s=this.qc.indexOf(n);this.qc.splice(s,1)}}function mp(l){return function(n,s){if("object"!=typeof n||null===n)return!1;const d=n;for(const p of["next","error","complete"])if(p in d&&"function"==typeof d[p])return!0;return!1}(l)}class x0{constructor(){this._progressObserver={},this._taskCompletionResolver=new is,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(n,s,d){this._progressObserver={next:n,error:s,complete:d}}catch(n){return this._taskCompletionResolver.promise.catch(n)}then(n,s){return this._taskCompletionResolver.promise.then(n,s)}_completeWith(n){this._updateProgress(n),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(n)}_failWith(n){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(n),this._taskCompletionResolver.reject(n)}_updateProgress(n){this._lastProgress=n,this._progressObserver.next&&this._progressObserver.next(n)}}const sm=-1;class as extends tc{constructor(n,s,d,p){super(n,s,d,p),this.type="firestore",this._queue=new M0,this._persistenceKey=(null==p?void 0:p.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||_p(this),this._firestoreClient.terminate()}}function R0(l,n){const s="object"==typeof l?l:(0,c.getApp)(),d="string"==typeof l?l:n||"(default)",p=(0,c._getProvider)(s,"firestore").getImmediate({identifier:d});if(!p._initialized){const v=(0,Ie.P0)("firestore");v&&uy(p,...v)}return p}function Us(l){return l._firestoreClient||_p(l),l._firestoreClient.verifyNotTerminated(),l._firestoreClient}function _p(l){var n;const s=l._freezeSettings(),d=(v=(null===(n=l._app)||void 0===n?void 0:n.options.appId)||"",new Pu(l._databaseId,v,l._persistenceKey,(O=s).host,O.ssl,O.experimentalForceLongPolling,O.experimentalAutoDetectLongPolling,O.useFetchStreams));var v,O;l._firestoreClient=new YE(l._authCredentials,l._appCheckCredentials,l._queue,d)}function aw(l,n){om(l=Ji(l,as));const s=Us(l),d=l._freezeSettings(),p=new ca;return k0(s,p,new gu(p,d.cacheSizeBytes,null==n?void 0:n.forceOwnership))}function Ty(l){om(l=Ji(l,as));const n=Us(l),s=l._freezeSettings(),d=new ca;return k0(n,d,new hp(d,s.cacheSizeBytes))}function k0(l,n,s){const d=new is;return l.asyncQueue.enqueue((0,_.Z)(function*(){try{yield py(l,s),yield my(l,n),d.resolve()}catch(p){const v=p;if(!("FirebaseError"===(T=v).name?T.code===Ct.FAILED_PRECONDITION||T.code===Ct.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&T instanceof DOMException)||22===T.code||20===T.code||11===T.code))throw v;No("Error enabling offline persistence. Falling back to persistence disabled: "+v),d.reject(v)}var T})).then(()=>d.promise)}function lw(l){if(l._initialized&&!l._terminated)throw new en(Ct.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const n=new is;return l._queue.enqueueAndForgetEvenWhileRestricted((0,_.Z)(function*(){try{yield(s=(0,_.Z)(function*(d){if(!to.C())return Promise.resolve();const p=d+"main";yield to.delete(p)}),function(d){return s.apply(this,arguments)})(Ld(l._databaseId,l._persistenceKey)),n.resolve()}catch(s){n.reject(s)}var s})),n.promise}function yp(l){return function(n){const s=new is;return n.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function rw(l,n){return Uh.apply(this,arguments)}(yield by(n),s)})),s.promise}(Us(l=Ji(l,as)))}function P0(l){return function qh(l){return l.asyncQueue.enqueue((0,_.Z)(function*(){const n=yield QE(l),s=yield I0(l);return n.setNetworkEnabled(!0),function(d){const p=En(d);return p.wu.delete(0),ep(p)}(s)}))}(Us(l=Ji(l,as)))}function wy(l){return function JE(l){return l.asyncQueue.enqueue((0,_.Z)(function*(){const n=yield QE(l),s=yield I0(l);return n.setNetworkEnabled(!1),(d=(0,_.Z)(function*(p){const v=En(p);v.wu.add(0),yield kh(v),v.yu.set("Offline")}),function(p){return d.apply(this,arguments)})(s);var d}))}(Us(l=Ji(l,as)))}function tC(l,n){const s=Us(l=Ji(l,as)),d=new x0;return function Yd(l,n,s,d){const p=function(v,T){let O;return O="string"==typeof v?(new TextEncoder).encode(v):v,z=function(z,ee){if(z instanceof Uint8Array)return C0(z,void 0);if(z instanceof ArrayBuffer)return C0(new Uint8Array(z),void 0);if(z instanceof ReadableStream)return z.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(O),new fy(z,T);var z}(s,Yo(n));l.asyncQueue.enqueueAndForget((0,_.Z)(function*(){!function Gh(l,n,s){const d=En(l);var p;(p=(0,_.Z)(function*(v,T,O){try{const z=yield T.getMetadata();if(yield function(gt,Ft){const jt=En(gt),Rn=Ks(Ft.createTime);return jt.persistence.runTransaction("hasNewerBundle","readonly",qn=>jt.Ns.getBundleMetadata(qn,Ft.id)).then(qn=>!!qn&&qn.createTime.compareTo(Rn)>=0)}(v.localStore,z))return yield T.close(),O._completeWith({taskState:"Success",documentsLoaded:(gt=z).totalDocuments,bytesLoaded:gt.totalBytes,totalDocuments:gt.totalDocuments,totalBytes:gt.totalBytes}),Promise.resolve(new Set);O._updateProgress(X_(z));const ee=new Bh(z,v.localStore,T.It);let me=yield T.mc();for(;me;){const gt=yield ee.Fu(me);gt&&O._updateProgress(gt),me=yield T.mc()}const Re=yield ee.complete();return yield Oc(v,Re.Lu,void 0),yield function(gt,Ft){const jt=En(gt);return jt.persistence.runTransaction("Save bundle","readwrite",Rn=>jt.Ns.saveBundleMetadata(Rn,Ft))}(v.localStore,z),O._completeWith(Re.progress),Promise.resolve(Re.Bu)}catch(z){return No("SyncEngine",`Loading bundle failed with ${z}`),O._failWith(z),Promise.resolve(new Set)}var gt}),function(v,T,O){return p.apply(this,arguments)})(d,n,s).then(p=>{d.sharedClientState.notifyBundleLoaded(p)})}(yield by(l),p,d)}))}(s,l._databaseId,n,d),d}function Dy(l,n){return function eC(l,n){return l.asyncQueue.enqueue((0,_.Z)(function*(){return function(s,d){const p=En(s);return p.persistence.runTransaction("Get named query","readonly",v=>p.Ns.getNamedQuery(v,d))}(yield rm(l),n)}))}(Us(l=Ji(l,as)),n).then(s=>s?new Eo(l,null,s.query):null)}function om(l){if(l._initialized||l._terminated)throw new en(Ct.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class _u{constructor(n){this._byteString=n}static fromBase64String(n){try{return new _u(Lr.fromBase64String(n))}catch(s){throw new en(Ct.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(n){return new _u(Lr.fromUint8Array(n))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(n){return this._byteString.isEqual(n._byteString)}}class Qd{constructor(...n){for(let s=0;s<n.length;++s)if(0===n[s].length)throw new en(Ct.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ye(n)}isEqual(n){return this._internalPath.isEqual(n._internalPath)}}class yu{constructor(n){this._methodName=n}}class zh{constructor(n,s){if(!isFinite(n)||n<-90||n>90)throw new en(Ct.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(s)||s<-180||s>180)throw new en(Ct.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=n,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(n){return this._lat===n._lat&&this._long===n._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(n){return bi(this._lat,n._lat)||bi(this._long,n._long)}}const nC=/^__.*__$/;class L0{constructor(n,s,d){this.data=n,this.fieldMask=s,this.fieldTransforms=d}toMutation(n,s){return null!==this.fieldMask?new Ec(n,this.data,this.fieldMask,s,this.fieldTransforms):new Td(n,this.data,s,this.fieldTransforms)}}class Zr{constructor(n,s,d){this.data=n,this.fieldMask=s,this.fieldTransforms=d}toMutation(n,s){return new Ec(n,this.data,this.fieldMask,s,this.fieldTransforms)}}function vp(l){switch(l){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw An()}}class od{constructor(n,s,d,p,v,T){this.settings=n,this.databaseId=s,this.It=d,this.ignoreUndefinedProperties=p,void 0===v&&this.na(),this.fieldTransforms=v||[],this.fieldMask=T||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(n){return new od(Object.assign(Object.assign({},this.settings),n),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(n){var s;const d=null===(s=this.path)||void 0===s?void 0:s.child(n),p=this.ia({path:d,oa:!1});return p.ua(n),p}ca(n){var s;const d=null===(s=this.path)||void 0===s?void 0:s.child(n),p=this.ia({path:d,oa:!1});return p.na(),p}aa(n){return this.ia({path:void 0,oa:!0})}ha(n){return ad(n,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(n){return void 0!==this.fieldMask.find(s=>n.isPrefixOf(s))||void 0!==this.fieldTransforms.find(s=>n.isPrefixOf(s.field))}na(){if(this.path)for(let n=0;n<this.path.length;n++)this.ua(this.path.get(n))}ua(n){if(0===n.length)throw this.ha("Document fields must not be empty");if(vp(this.sa)&&nC.test(n))throw this.ha('Document fields cannot begin and end with "__"')}}class nc{constructor(n,s,d){this.databaseId=n,this.ignoreUndefinedProperties=s,this.It=d||Yo(n)}da(n,s,d,p=!1){return new od({sa:n,methodName:s,fa:d,path:ye.emptyPath(),oa:!1,la:p},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Rc(l){const n=l._freezeSettings(),s=Yo(l._databaseId);return new nc(l._databaseId,!!n.ignoreUndefinedProperties,s)}function Jd(l,n,s,d,p,v={}){const T=l.da(v.merge||v.mergeFields?2:0,n,s,p);Xd("Data must be an object, but it was:",T,d);const O=Qh(d,T);let z,ee;if(v.merge)z=new vo(T.fieldMask),ee=T.fieldTransforms;else if(v.mergeFields){const me=[];for(const Re of v.mergeFields){const gt=eh(n,Re,s);if(!T.contains(gt))throw new en(Ct.INVALID_ARGUMENT,`Field '${gt}' is specified in your field mask but missing from your input data.`);B0(me,gt)||me.push(gt)}z=new vo(me),ee=T.fieldTransforms.filter(Re=>z.covers(Re.field))}else z=null,ee=T.fieldTransforms;return new L0(new ss(O),z,ee)}class vu extends yu{_toFieldTransform(n){if(2!==n.sa)throw n.ha(1===n.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return n.fieldMask.push(n.path),null}isEqual(n){return n instanceof vu}}function Kh(l,n,s){return new od({sa:3,fa:n.settings.fa,methodName:l._methodName,oa:s},n.databaseId,n.It,n.ignoreUndefinedProperties)}class Uo extends yu{_toFieldTransform(n){return new Ed(n.path,new yc)}isEqual(n){return n instanceof Uo}}class am extends yu{constructor(n,s){super(n),this._a=s}_toFieldTransform(n){const s=Kh(this,n,!0),d=this._a.map(v=>kc(v,s)),p=new bl(d);return new Ed(n.path,p)}isEqual(n){return this===n}}class lm extends yu{constructor(n,s){super(n),this._a=s}_toFieldTransform(n){const s=Kh(this,n,!0),d=this._a.map(v=>kc(v,s)),p=new vc(d);return new Ed(n.path,p)}isEqual(n){return this===n}}class cm extends yu{constructor(n,s){super(n),this.wa=s}_toFieldTransform(n){const s=new ru(n.It,Df(n.It,this.wa));return new Ed(n.path,s)}isEqual(n){return this===n}}function um(l,n,s,d){const p=l.da(1,n,s);Xd("Data must be an object, but it was:",p,d);const v=[],T=ss.empty();La(d,(z,ee)=>{const me=th(n,z,s);ee=(0,Ie.m9)(ee);const Re=p.ca(me);if(ee instanceof vu)v.push(me);else{const gt=kc(ee,Re);null!=gt&&(v.push(me),T.set(me,gt))}});const O=new vo(v);return new Zr(T,O,p.fieldTransforms)}function Yh(l,n,s,d,p,v){const T=l.da(1,n,s),O=[eh(n,d,s)],z=[p];if(v.length%2!=0)throw new en(Ct.INVALID_ARGUMENT,`Function ${n}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let gt=0;gt<v.length;gt+=2)O.push(eh(n,v[gt])),z.push(v[gt+1]);const ee=[],me=ss.empty();for(let gt=O.length-1;gt>=0;--gt)if(!B0(ee,O[gt])){const Ft=O[gt];let jt=z[gt];jt=(0,Ie.m9)(jt);const Rn=T.ca(Ft);if(jt instanceof vu)ee.push(Ft);else{const qn=kc(jt,Rn);null!=qn&&(ee.push(Ft),me.set(Ft,qn))}}const Re=new vo(ee);return new Zr(me,Re,T.fieldTransforms)}function Il(l,n,s,d=!1){return kc(s,l.da(d?4:3,n))}function kc(l,n){if(dm(l=(0,Ie.m9)(l)))return Xd("Unsupported field value:",n,l),Qh(l,n);if(l instanceof yu)return function(s,d){if(!vp(d.sa))throw d.ha(`${s._methodName}() can only be used with update() and set()`);if(!d.path)throw d.ha(`${s._methodName}() is not currently supported inside arrays`);const p=s._toFieldTransform(d);p&&d.fieldTransforms.push(p)}(l,n),null;if(void 0===l&&n.ignoreUndefinedProperties)return null;if(n.path&&n.fieldMask.push(n.path),l instanceof Array){if(n.settings.oa&&4!==n.sa)throw n.ha("Nested arrays are not supported");return function(s,d){const p=[];let v=0;for(const T of s){let O=kc(T,d.aa(v));null==O&&(O={nullValue:"NULL_VALUE"}),p.push(O),v++}return{arrayValue:{values:p}}}(l,n)}return function(s,d){if(null===(s=(0,Ie.m9)(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof s)return Df(d.It,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){const p=M.fromDate(s);return{timestampValue:so(d.It,p)}}if(s instanceof M){const p=new M(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:so(d.It,p)}}if(s instanceof zh)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof _u)return{bytesValue:Kl(d.It,s._byteString)};if(s instanceof Ts){const p=d.databaseId,v=s.firestore._databaseId;if(!v.isEqual(p))throw d.ha(`Document reference is for database ${v.projectId}/${v.database} but should be for database ${p.projectId}/${p.database}`);return{referenceValue:Id(s.firestore._databaseId||d.databaseId,s._key.path)}}throw d.ha(`Unsupported field value: ${mu(s)}`)}(l,n)}function Qh(l,n){const s={};return Kc(l)?n.path&&n.path.length>0&&n.fieldMask.push(n.path):La(l,(d,p)=>{const v=kc(p,n.ra(d));null!=v&&(s[d]=v)}),{mapValue:{fields:s}}}function dm(l){return!("object"!=typeof l||null===l||l instanceof Array||l instanceof Date||l instanceof M||l instanceof zh||l instanceof _u||l instanceof Ts||l instanceof yu)}function Xd(l,n,s){if(!dm(s)||"object"!=typeof(d=s)||null===d||Object.getPrototypeOf(d)!==Object.prototype&&null!==Object.getPrototypeOf(d)){const d=mu(s);throw n.ha("an object"===d?l+" a custom object":l+" "+d)}var d}function eh(l,n,s){if((n=(0,Ie.m9)(n))instanceof Qd)return n._internalPath;if("string"==typeof n)return th(l,n);throw ad("Field path arguments must be of type string or ",l,!1,void 0,s)}const hm=new RegExp("[~\\*/\\[\\]]");function th(l,n,s){if(n.search(hm)>=0)throw ad(`Invalid field path (${n}). Paths must not contain '~', '*', '/', '[', or ']'`,l,!1,void 0,s);try{return new Qd(...n.split("."))._internalPath}catch(d){throw ad(`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,l,!1,void 0,s)}}function ad(l,n,s,d,p){const v=d&&!d.isEmpty(),T=void 0!==p;let O=`Function ${n}() called with invalid data`;s&&(O+=" (via `toFirestore()`)"),O+=". ";let z="";return(v||T)&&(z+=" (found",v&&(z+=` in field ${d}`),T&&(z+=` in document ${p}`),z+=")"),new en(Ct.INVALID_ARGUMENT,O+l+z)}function B0(l,n){return l.some(s=>s.isEqual(n))}class nh{constructor(n,s,d,p,v){this._firestore=n,this._userDataWriter=s,this._key=d,this._document=p,this._converter=v}get id(){return this._key.path.lastSegment()}get ref(){return new Ts(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const n=new V0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(n)}return this._userDataWriter.convertValue(this._document.data.value)}}get(n){if(this._document){const s=this._document.data.field(ld("DocumentSnapshot.get",n));if(null!==s)return this._userDataWriter.convertValue(s)}}}class V0 extends nh{data(){return super.data()}}function ld(l,n){return"string"==typeof n?th(l,n):n instanceof Qd?n._internalPath:n._delegate._internalPath}function Jh(l){if("L"===l.limitType&&0===l.explicitOrderBy.length)throw new en(Ct.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cs{}function Xh(l,...n){for(const s of n)l=s._apply(l);return l}class Iy extends cs{constructor(n,s,d){super(),this.ma=n,this.ga=s,this.ya=d,this.type="where"}_apply(n){const s=Rc(n.firestore),d=function(p,v,T,O,z,ee,me){let Re;if(z.isKeyField()){if("array-contains"===ee||"array-contains-any"===ee)throw new en(Ct.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ee}' queries on documentId().`);if("in"===ee||"not-in"===ee){Za(me,ee);const Ft=[];for(const jt of me)Ft.push(bp(O,p,jt));Re={arrayValue:{values:Ft}}}else Re=bp(O,p,me)}else"in"!==ee&&"not-in"!==ee&&"array-contains-any"!==ee||Za(me,ee),Re=Il(T,"where",me,"in"===ee||"not-in"===ee);const gt=On.create(z,ee,Re);return function(Ft,jt){if(jt.dt()){const qn=_c(Ft);if(null!==qn&&!qn.isEqual(jt.field))throw new en(Ct.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${qn.toString()}' and '${jt.field.toString()}'`);const xr=mc(Ft);null!==xr&&ym(0,jt.field,xr)}const Rn=function(qn,xr){for(const ls of qn.filters)if(xr.indexOf(ls.op)>=0)return ls.op;return null}(Ft,function(qn){switch(qn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(jt.op));if(null!==Rn)throw new en(Ct.INVALID_ARGUMENT,Rn===jt.op?`Invalid query. You cannot use more than one '${jt.op.toString()}' filter.`:`Invalid query. You cannot use '${jt.op.toString()}' filters with '${Rn.toString()}' filters.`)}(p,gt),gt}(n._query,0,s,n.firestore._databaseId,this.ma,this.ga,this.ya);return new Eo(n.firestore,n.converter,function(p,v){const T=p.filters.concat([v]);return new tl(p.path,p.collectionGroup,p.explicitOrderBy.slice(),T,p.limit,p.limitType,p.startAt,p.endAt)}(n._query,d))}}function fm(l,n,s){const d=n,p=ld("where",l);return new Iy(p,d,s)}class bu extends cs{constructor(n,s){super(),this.ma=n,this.pa=s,this.type="orderBy"}_apply(n){const s=function(d,p,v){if(null!==d.startAt)throw new en(Ct.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==d.endAt)throw new en(Ct.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const T=new yl(p,v);return function(O,z){if(null===mc(O)){const ee=_c(O);null!==ee&&ym(0,ee,z.field)}}(d,T),T}(n._query,this.ma,this.pa);return new Eo(n.firestore,n.converter,function(d,p){const v=d.explicitOrderBy.concat([p]);return new tl(d.path,d.collectionGroup,v,d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n._query,s))}}function pm(l,n="asc"){const s=n,d=ld("orderBy",l);return new bu(d,s)}class ih extends cs{constructor(n,s,d){super(),this.type=n,this.Ia=s,this.Ta=d}_apply(n){return new Eo(n.firestore,n.converter,vd(n._query,this.Ia,this.Ta))}}function Ay(l){return Kd("limit",l),new ih("limit",l,"F")}function Al(l){return Kd("limitToLast",l),new ih("limitToLast",l,"L")}class gm extends cs{constructor(n,s,d){super(),this.type=n,this.Ea=s,this.Aa=d}_apply(n){const s=Cu(n,this.type,this.Ea,this.Aa);return new Eo(n.firestore,n.converter,(p=s,new tl((d=n._query).path,d.collectionGroup,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,p,d.endAt)));var d,p}}function Eu(...l){return new gm("startAt",l,!0)}function mm(...l){return new gm("startAfter",l,!1)}class _m extends cs{constructor(n,s,d){super(),this.type=n,this.Ea=s,this.Aa=d}_apply(n){const s=Cu(n,this.type,this.Ea,this.Aa);return new Eo(n.firestore,n.converter,(p=s,new tl((d=n._query).path,d.collectionGroup,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,p)));var d,p}}function Sl(...l){return new _m("endBefore",l,!1)}function rh(...l){return new _m("endAt",l,!0)}function Cu(l,n,s,d){if(s[0]=(0,Ie.m9)(s[0]),s[0]instanceof nh)return function(p,v,T,O,z){if(!O)throw new en(Ct.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${T}().`);const ee=[];for(const me of eu(p))if(me.field.isKeyField())ee.push(Ca(v,O.key));else{const Re=O.data.field(me.field);if(Qc(Re))throw new en(Ct.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+me.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Re){const gt=me.field.canonicalString();throw new en(Ct.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${gt}' (used as the orderBy) does not exist.`)}ee.push(Re)}return new Bo(ee,z)}(l._query,l.firestore._databaseId,n,s[0]._document,d);{const p=Rc(l.firestore);return function(v,T,O,z,ee,me){const Re=v.explicitOrderBy;if(ee.length>Re.length)throw new en(Ct.INVALID_ARGUMENT,`Too many arguments provided to ${z}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const gt=[];for(let Ft=0;Ft<ee.length;Ft++){const jt=ee[Ft];if(Re[Ft].field.isKeyField()){if("string"!=typeof jt)throw new en(Ct.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${z}(), but got a ${typeof jt}`);if(!Wl(v)&&-1!==jt.indexOf("/"))throw new en(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${z}() must be a plain document ID, but '${jt}' contains a slash.`);const Rn=v.path.child(q.fromString(jt));if(!_e.isDocumentKey(Rn))throw new en(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${z}() must result in a valid document path, but '${Rn}' is not because it contains an odd number of segments.`);const qn=new _e(Rn);gt.push(Ca(T,qn))}else{const Rn=Il(O,z,jt);gt.push(Rn)}}return new Bo(gt,me)}(l._query,l.firestore._databaseId,p,n,s,d)}}function bp(l,n,s){if("string"==typeof(s=(0,Ie.m9)(s))){if(""===s)throw new en(Ct.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wl(n)&&-1!==s.indexOf("/"))throw new en(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const d=n.path.child(q.fromString(s));if(!_e.isDocumentKey(d))throw new en(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${d}' is not because it has an odd number of segments (${d.length}).`);return Ca(l,new _e(d))}if(s instanceof Ts)return Ca(l,s._key);throw new en(Ct.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mu(s)}.`)}function Za(l,n){if(!Array.isArray(l)||0===l.length)throw new en(Ct.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${n.toString()}' filters.`);if(l.length>10)throw new en(Ct.INVALID_ARGUMENT,`Invalid Query. '${n.toString()}' filters support a maximum of 10 elements in the value array.`)}function ym(l,n,s){if(!s.isEqual(n))throw new en(Ct.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${n.toString()}' and so you must also use '${n.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${s.toString()}' instead.`)}class cd{convertValue(n,s="none"){switch(Ba(n)){case 0:return null;case 1:return n.booleanValue;case 2:return Br(n.integerValue||n.doubleValue);case 3:return this.convertTimestamp(n.timestampValue);case 4:return this.convertServerTimestamp(n,s);case 5:return n.stringValue;case 6:return this.convertBytes(ra(n.bytesValue));case 7:return this.convertReference(n.referenceValue);case 8:return this.convertGeoPoint(n.geoPointValue);case 9:return this.convertArray(n.arrayValue,s);case 10:return this.convertObject(n.mapValue,s);default:throw An()}}convertObject(n,s){const d={};return La(n.fields,(p,v)=>{d[p]=this.convertValue(v,s)}),d}convertGeoPoint(n){return new zh(Br(n.latitude),Br(n.longitude))}convertArray(n,s){return(n.values||[]).map(d=>this.convertValue(d,s))}convertServerTimestamp(n,s){switch(s){case"previous":const d=gh(n);return null==d?null:this.convertValue(d,s);case"estimate":return this.convertTimestamp(fc(n));default:return null}}convertTimestamp(n){const s=zo(n);return new M(s.seconds,s.nanos)}convertDocumentKey(n,s){const d=q.fromString(n);di(Cl(d));const p=new Xa(d.get(1),d.get(3)),v=new _e(d.popFirst(5));return p.isEqual(s)||Mi(`Document ${v} contains a document reference within a different database (${p.projectId}/${p.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),v}}function Qo(l,n,s){let d;return d=l?s&&(s.merge||s.mergeFields)?l.toFirestore(n,s):l.toFirestore(n):n,d}class Nl extends cd{constructor(n){super(),this.firestore=n}convertBytes(n){return new _u(n)}convertReference(n){const s=this.convertDocumentKey(n,this.firestore._databaseId);return new Ts(this.firestore,null,s)}}class ho{constructor(n,s){this.hasPendingWrites=n,this.fromCache=s}isEqual(n){return this.hasPendingWrites===n.hasPendingWrites&&this.fromCache===n.fromCache}}class Tu extends nh{constructor(n,s,d,p,v,T){super(n,s,d,p,T),this._firestore=n,this._firestoreImpl=n,this.metadata=v}exists(){return super.exists()}data(n={}){if(this._document){if(this._converter){const s=new ud(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}}get(n,s={}){if(this._document){const d=this._document.data.field(ld("DocumentSnapshot.get",n));if(null!==d)return this._userDataWriter.convertValue(d,s.serverTimestamps)}}}class ud extends Tu{data(n={}){return super.data(n)}}class wu{constructor(n,s,d,p){this._firestore=n,this._userDataWriter=s,this._snapshot=p,this.metadata=new ho(p.hasPendingWrites,p.fromCache),this.query=d}get docs(){const n=[];return this.forEach(s=>n.push(s)),n}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(n,s){this._snapshot.docs.forEach(d=>{n.call(s,new ud(this._firestore,this._userDataWriter,d.key,d,new ho(this._snapshot.mutatedKeys.has(d.key),this._snapshot.fromCache),this.query.converter))})}docChanges(n={}){const s=!!n.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new en(Ct.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=function(d,p){if(d._snapshot.oldDocs.isEmpty()){let v=0;return d._snapshot.docChanges.map(T=>({type:"added",doc:new ud(d._firestore,d._userDataWriter,T.doc.key,T.doc,new ho(d._snapshot.mutatedKeys.has(T.doc.key),d._snapshot.fromCache),d.query.converter),oldIndex:-1,newIndex:v++}))}{let v=d._snapshot.oldDocs;return d._snapshot.docChanges.filter(T=>p||3!==T.type).map(T=>{const O=new ud(d._firestore,d._userDataWriter,T.doc.key,T.doc,new ho(d._snapshot.mutatedKeys.has(T.doc.key),d._snapshot.fromCache),d.query.converter);let z=-1,ee=-1;return 0!==T.type&&(z=v.indexOf(T.doc.key),v=v.delete(T.doc.key)),1!==T.type&&(v=v.add(T.doc),ee=v.indexOf(T.doc.key)),{type:Wa(T.type),doc:O,oldIndex:z,newIndex:ee}})}}(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}}function Wa(l){switch(l){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return An()}}function vm(l,n){return l instanceof Tu&&n instanceof Tu?l._firestore===n._firestore&&l._key.isEqual(n._key)&&(null===l._document?null===n._document:l._document.isEqual(n._document))&&l._converter===n._converter:l instanceof wu&&n instanceof wu&&l._firestore===n._firestore&&nm(l.query,n.query)&&l.metadata.isEqual(n.metadata)&&l._snapshot.isEqual(n._snapshot)}function Ep(l){l=Ji(l,Ts);const n=Ji(l.firestore,as);return S0(Us(n),l._key).then(s=>nf(n,l,s))}class ic extends cd{constructor(n){super(),this.firestore=n}convertBytes(n){return new _u(n)}convertReference(n){const s=this.convertDocumentKey(n,this.firestore._databaseId);return new Ts(this.firestore,null,s)}}function ef(l){l=Ji(l,Ts);const n=Ji(l.firestore,as),s=Us(n),d=new ic(n);return function A0(l,n){const s=new is;return l.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return(d=(0,_.Z)(function*(p,v,T){try{const O=yield function(z,ee){const me=En(z);return me.persistence.runTransaction("read document","readonly",Re=>me.localDocuments.getDocument(Re,ee))}(p,v);O.isFoundDocument()?T.resolve(O):O.isNoDocument()?T.resolve(null):T.reject(new en(Ct.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(O){const z=Lh(O,`Failed to get document '${v} from cache`);T.reject(z)}}),function(p,v,T){return d.apply(this,arguments)})(yield rm(l),n,s);var d})),s.promise}(s,l._key).then(p=>new Tu(n,d,l._key,p,new ho(null!==p&&p.hasLocalMutations,!0),l.converter))}function U0(l){l=Ji(l,Ts);const n=Ji(l.firestore,as);return S0(Us(n),l._key,{source:"server"}).then(s=>nf(n,l,s))}function tf(l){l=Ji(l,Eo);const n=Ji(l.firestore,as),s=Us(n),d=new ic(n);return Jh(l._query),gp(s,l._query).then(p=>new wu(n,d,l,p))}function Cp(l){l=Ji(l,Eo);const n=Ji(l.firestore,as),s=Us(n),d=new ic(n);return function N0(l,n){const s=new is;return l.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return(d=(0,_.Z)(function*(p,v,T){try{const O=yield Mh(p,v,!0),z=new Zd(v,O.Hi),ee=z.Wu(O.documents),me=z.applyChanges(ee,!1);T.resolve(me.snapshot)}catch(O){const z=Lh(O,`Failed to execute query '${v} against cache`);T.reject(z)}}),function(p,v,T){return d.apply(this,arguments)})(yield rm(l),n,s);var d})),s.promise}(s,l._query).then(p=>new wu(n,d,l,p))}function bm(l){l=Ji(l,Eo);const n=Ji(l.firestore,as),s=Us(n),d=new ic(n);return gp(s,l._query,{source:"server"}).then(p=>new wu(n,d,l,p))}function Em(l,n,s){l=Ji(l,Ts);const d=Ji(l.firestore,as),p=Qo(l.converter,n,s);return Pc(d,[Jd(Rc(d),"setDoc",l._key,p,null!==l.converter,s).toMutation(l._key,fs.none())])}function Tp(l,n,s,...d){l=Ji(l,Ts);const p=Ji(l.firestore,as),v=Rc(p);let T;return T="string"==typeof(n=(0,Ie.m9)(n))||n instanceof Qd?Yh(v,"updateDoc",l._key,n,s,d):um(v,"updateDoc",l._key,n),Pc(p,[T.toMutation(l._key,fs.exists(!0))])}function Cm(l){return Pc(Ji(l.firestore,as),[new Cc(l._key,fs.none())])}function Tm(l,n){const s=Ji(l.firestore,as),d=hy(l),p=Qo(l.converter,n);return Pc(s,[Jd(Rc(l.firestore),"addDoc",d._key,p,null!==l.converter,{}).toMutation(d._key,fs.exists(!1))]).then(()=>d)}function Sy(l,...n){var s,d,p;l=(0,Ie.m9)(l);let v={includeMetadataChanges:!1},T=0;"object"!=typeof n[T]||mp(n[T])||(v=n[T],T++);const O={includeMetadataChanges:v.includeMetadataChanges};if(mp(n[T])){const Re=n[T];n[T]=null===(s=Re.next)||void 0===s?void 0:s.bind(Re),n[T+1]=null===(d=Re.error)||void 0===d?void 0:d.bind(Re),n[T+2]=null===(p=Re.complete)||void 0===p?void 0:p.bind(Re)}let z,ee,me;if(l instanceof Ts)ee=Ji(l.firestore,as),me=gc(l._key.path),z={next:Re=>{n[T]&&n[T](nf(ee,l,Re))},error:n[T+1],complete:n[T+2]};else{const Re=Ji(l,Eo);ee=Ji(Re.firestore,as),me=Re._query;const gt=new ic(ee);z={next:Ft=>{n[T]&&n[T](new wu(ee,gt,Re,Ft))},error:n[T+1],complete:n[T+2]},Jh(l._query)}return function(Re,gt,Ft,jt){const Rn=new fp(jt),qn=new Q_(gt,Rn,Ft);return Re.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return Y_(yield pp(Re),qn)})),()=>{Rn.bc(),Re.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return Yg(yield pp(Re),qn)}))}}(Us(ee),me,O,z)}function wm(l,n){return function XE(l,n){const s=new fp(n);return l.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return d=yield pp(l),p=s,En(d).bu.add(p),void p.next();var d,p})),()=>{s.bc(),l.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return d=yield pp(l),p=s,void En(d).bu.delete(p);var d,p}))}}(Us(l=Ji(l,as)),mp(n)?n:{next:n})}function Pc(l,n){return function(s,d){const p=new is;return s.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function Vh(l,n,s){return pu.apply(this,arguments)}(yield by(s),d,p)})),p.promise}(Us(l),n)}function nf(l,n,s){const d=s.docs.get(n._key),p=new ic(l);return new Tu(l,p,n._key,d,new ho(s.hasPendingWrites,s.fromCache),n.converter)}const Ny={maxAttempts:5};class Fc{constructor(n,s){this._firestore=n,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=Rc(n)}set(n,s,d){this._verifyNotCommitted();const p=Ml(n,this._firestore),v=Qo(p.converter,s,d),T=Jd(this._dataReader,"WriteBatch.set",p._key,v,null!==p.converter,d);return this._mutations.push(T.toMutation(p._key,fs.none())),this}update(n,s,d,...p){this._verifyNotCommitted();const v=Ml(n,this._firestore);let T;return T="string"==typeof(s=(0,Ie.m9)(s))||s instanceof Qd?Yh(this._dataReader,"WriteBatch.update",v._key,s,d,p):um(this._dataReader,"WriteBatch.update",v._key,s),this._mutations.push(T.toMutation(v._key,fs.exists(!0))),this}delete(n){this._verifyNotCommitted();const s=Ml(n,this._firestore);return this._mutations=this._mutations.concat(new Cc(s._key,fs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new en(Ct.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ml(l,n){if((l=(0,Ie.m9)(l)).firestore!==n)throw new en(Ct.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return l}class Dp extends class{constructor(n,s){this._firestore=n,this._transaction=s,this._dataReader=Rc(n)}get(n){const s=Ml(n,this._firestore),d=new Nl(this._firestore);return this._transaction.lookup([s._key]).then(p=>{if(!p||1!==p.length)return An();const v=p[0];if(v.isFoundDocument())return new nh(this._firestore,d,v.key,v,s.converter);if(v.isNoDocument())return new nh(this._firestore,d,s._key,null,s.converter);throw An()})}set(n,s,d){const p=Ml(n,this._firestore),v=Qo(p.converter,s,d),T=Jd(this._dataReader,"Transaction.set",p._key,v,null!==p.converter,d);return this._transaction.set(p._key,T),this}update(n,s,d,...p){const v=Ml(n,this._firestore);let T;return T="string"==typeof(s=(0,Ie.m9)(s))||s instanceof Qd?Yh(this._dataReader,"Transaction.update",v._key,s,d,p):um(this._dataReader,"Transaction.update",v._key,s),this._transaction.update(v._key,T),this}delete(n){const s=Ml(n,this._firestore);return this._transaction.delete(s._key),this}}{constructor(n,s){super(n,s),this._firestore=n}get(n){const s=Ml(n,this._firestore),d=new ic(this._firestore);return super.get(n).then(p=>new Tu(this._firestore,d,s._key,p._document,new ho(!1,!1),s.converter))}}function rf(l,n,s){l=Ji(l,as);const d=Object.assign(Object.assign({},Ny),s);return function(p){if(p.maxAttempts<1)throw new en(Ct.INVALID_ARGUMENT,"Max attempts must be at least 1")}(d),function(p,v,T){const O=new is;return p.asyncQueue.enqueueAndForget((0,_.Z)(function*(){const z=yield function Ey(l){return Wh(l).then(n=>n.datastore)}(p);new im(p.asyncQueue,z,T,v,O).run()})),O.promise}(Us(l),p=>n(new Dp(l,p)),d)}function $0(){return new vu("deleteField")}function H0(){return new Uo("serverTimestamp")}function G0(...l){return new am("arrayUnion",l)}function Z0(...l){return new lm("arrayRemove",l)}function W0(l){return new cm("increment",l)}!function(l,n=!0){eo=c.SDK_VERSION,(0,c._registerComponent)(new J.wA("firestore",(s,{instanceIdentifier:d,options:p})=>{const v=s.getProvider("app").getImmediate(),T=new as(new Zc(s.getProvider("auth-internal")),new ka(s.getProvider("app-check-internal")),function(O,z){if(!Object.prototype.hasOwnProperty.apply(O.options,["projectId"]))throw new en(Ct.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xa(O.options.projectId,z)}(v,d),v);return p=Object.assign({useFetchStreams:n},p),T._setSettings(p),T},"PUBLIC").setMultipleInstances(!0)),(0,c.registerVersion)(na,"3.7.1",l),(0,c.registerVersion)(na,"3.7.1","esm2017")}()},6961:(rn,Ye,V)=>{V.d(Ye,{bm:()=>Ti,UJ:()=>Fi,gE:()=>wt,FN:()=>Qr,$Y:()=>xn,IX:()=>Xe,qm:()=>Zi,g6:()=>Is,gH:()=>it,y4:()=>We,a1:()=>Js,oq:()=>Gs,Jt:()=>Hs,sd:()=>ks,cF:()=>As,pb:()=>Fs,aF:()=>nr,iH:()=>bs,Ym:()=>Ps,KV:()=>Sa,B0:()=>Xr});var _=V(5861),c=V(9681),J=V(2090),Ee=V(4859);const Ie="firebasestorage.googleapis.com",Ze="storageBucket";class fe extends J.ZR{constructor(te,Te,Se=0){super(ge(te),`Firebase Storage: ${Te} (${ge(te)})`),this.status_=Se,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,fe.prototype)}get status(){return this.status_}set status(te){this.status_=te}_codeEquals(te){return ge(te)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(te){this.customData.serverResponse=te,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function ge(ne){return"storage/"+ne}function Fe(){return new fe("unknown","An unknown error occurred, please check the error payload for server response.")}function ze(){return new fe("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Ue(){return new fe("canceled","User canceled the upload/download.")}function nt(){return new fe("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function it(ne){return new fe("invalid-argument",ne)}function Ne(){return new fe("app-deleted","The Firebase app was deleted.")}function We(ne){return new fe("invalid-root-operation","The operation '"+ne+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Qe(ne,te){return new fe("invalid-format","String does not match format '"+ne+"': "+te)}function dt(ne){throw new fe("internal-error","Internal error: "+ne)}class wt{constructor(te,Te){this.bucket=te,this.path_=Te}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const te=encodeURIComponent;return"/b/"+te(this.bucket)+"/o/"+te(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(te,Te){let Se;try{Se=wt.makeFromUrl(te,Te)}catch(Je){return new wt(te,"")}if(""===Se.path)return Se;throw function Pe(ne){return new fe("invalid-default-bucket","Invalid default bucket '"+ne+"'.")}(te)}static makeFromUrl(te,Te){let Se=null;const Je="([A-Za-z0-9.\\-_]+)",_n=new RegExp("^gs://"+Je+"(/(.*))?$","i");function Fn(si){si.path_=decodeURIComponent(si.path)}const se=Te.replace(/[.]/g,"\\."),pi=[{regex:_n,indices:{bucket:1,path:3},postModify:function Rt(si){"/"===si.path.charAt(si.path.length-1)&&(si.path_=si.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${se}/v[A-Za-z0-9_]+/b/${Je}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Fn},{regex:new RegExp(`^https?://${Te===Ie?"(?:storage.googleapis.com|storage.cloud.google.com)":Te}/${Je}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Fn}];for(let si=0;si<pi.length;si++){const gi=pi[si],Qi=gi.regex.exec(te);if(Qi){let vn=Qi[gi.indices.path];vn||(vn=""),Se=new wt(Qi[gi.indices.bucket],vn),gi.postModify(Se);break}}if(null==Se)throw function vt(ne){return new fe("invalid-url","Invalid URL '"+ne+"'.")}(te);return Se}}class at{constructor(te){this.promise_=Promise.reject(te)}getPromise(){return this.promise_}cancel(te=!1){}}function Nn(ne){return"string"==typeof ne||ne instanceof String}function bn(ne){return pt()&&ne instanceof Blob}function pt(){return"undefined"!=typeof Blob}function Ot(ne,te,Te,Se){if(Se<te)throw it(`Invalid value for '${ne}'. Expected ${te} or greater.`);if(Se>Te)throw it(`Invalid value for '${ne}'. Expected ${Te} or less.`)}function Le(ne,te,Te){let Se=te;return null==Te&&(Se=`https://${te}`),`${Te}://${Se}/v0${ne}`}function ht(ne){const te=encodeURIComponent;let Te="?";for(const Se in ne)ne.hasOwnProperty(Se)&&(Te=Te+(te(Se)+"=")+te(ne[Se])+"&");return Te=Te.slice(0,-1),Te}var Kt=(()=>{return(ne=Kt||(Kt={}))[ne.NO_ERROR=0]="NO_ERROR",ne[ne.NETWORK_ERROR=1]="NETWORK_ERROR",ne[ne.ABORT=2]="ABORT",Kt;var ne})();function Mn(ne,te){const Te=ne>=500&&ne<600,Je=-1!==[408,429].indexOf(ne),Rt=-1!==te.indexOf(ne);return Te||Je||Rt}class Kn{constructor(te,Te,Se,Je,Rt,Bt,_n,Vn,Fn,B,se,$=!0){this.url_=te,this.method_=Te,this.headers_=Se,this.body_=Je,this.successCodes_=Rt,this.additionalRetryCodes_=Bt,this.callback_=_n,this.errorCallback_=Vn,this.timeout_=Fn,this.progressCallback_=B,this.connectionFactory_=se,this.retry=$,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((le,Oe)=>{this.resolve_=le,this.reject_=Oe,this.start_()})}start_(){const Te=(Se,Je)=>{const Rt=this.resolve_,Bt=this.reject_,_n=Je.connection;if(Je.wasSuccessCode)try{const Vn=this.callback_(_n,_n.getResponse());!function wn(ne){return void 0!==ne}(Vn)?Rt():Rt(Vn)}catch(Vn){Bt(Vn)}else if(null!==_n){const Vn=Fe();Vn.serverResponse=_n.getErrorText(),Bt(this.errorCallback_?this.errorCallback_(_n,Vn):Vn)}else Bt(Je.canceled?this.appDelete_?Ne():Ue():ze())};this.canceled_?Te(0,new ii(!1,null,!0)):this.backoffId_=function In(ne,te,Te){let Se=1,Je=null,Rt=null,Bt=!1,_n=0;function Vn(){return 2===_n}let Fn=!1;function B(...kt){Fn||(Fn=!0,te.apply(null,kt))}function se(kt){Je=setTimeout(()=>{Je=null,ne(le,Vn())},kt)}function $(){Rt&&clearTimeout(Rt)}function le(kt,...cn){if(Fn)return void $();if(kt)return $(),void B.call(null,kt,...cn);if(Vn()||Bt)return $(),void B.call(null,kt,...cn);let pi;Se<64&&(Se*=2),1===_n?(_n=2,pi=0):pi=1e3*(Se+Math.random()),se(pi)}let Oe=!1;function ft(kt){Oe||(Oe=!0,$(),!Fn&&(null!==Je?(kt||(_n=2),clearTimeout(Je),se(0)):kt||(_n=1)))}return se(0),Rt=setTimeout(()=>{Bt=!0,ft(!0)},Te),ft}((Se,Je)=>{if(Je)return void Se(!1,new ii(!1,null,!0));const Rt=this.connectionFactory_();this.pendingConnection_=Rt;const Bt=_n=>{null!==this.progressCallback_&&this.progressCallback_(_n.loaded,_n.lengthComputable?_n.total:-1)};null!==this.progressCallback_&&Rt.addUploadProgressListener(Bt),Rt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Rt.removeUploadProgressListener(Bt),this.pendingConnection_=null;const _n=Rt.getErrorCode()===Kt.NO_ERROR,Vn=Rt.getStatus();if((!_n||Mn(Vn,this.additionalRetryCodes_))&&this.retry){const B=Rt.getErrorCode()===Kt.ABORT;return void Se(!1,new ii(!1,null,B))}const Fn=-1!==this.successCodes_.indexOf(Vn);Se(!0,new ii(Fn,Rt))})},Te,this.timeout_)}getPromise(){return this.promise_}cancel(te){this.canceled_=!0,this.appDelete_=te||!1,null!==this.backoffId_&&function tn(ne){ne(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ii{constructor(te,Te,Se){this.wasSuccessCode=te,this.connection=Te,this.canceled=!!Se}}function Yn(...ne){const te=function Jt(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==te){const Te=new te;for(let Se=0;Se<ne.length;Se++)Te.append(ne[Se]);return Te.getBlob()}if(pt())return new Blob(ne);throw new fe("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Ti={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Vi{constructor(te,Te){this.data=te,this.contentType=Te||null}}function Zi(ne,te){switch(ne){case Ti.RAW:return new Vi(Ai(te));case Ti.BASE64:case Ti.BASE64URL:return new Vi(tr(ne,te));case Ti.DATA_URL:return new Vi(function Tn(ne){const te=new Pn(ne);return te.base64?tr(Ti.BASE64,te.rest):function lr(ne){let te;try{te=decodeURIComponent(ne)}catch(Te){throw Qe(Ti.DATA_URL,"Malformed data URL.")}return Ai(te)}(te.rest)}(te),function gn(ne){return new Pn(ne).contentType}(te))}throw Fe()}function Ai(ne){const te=[];for(let Te=0;Te<ne.length;Te++){let Se=ne.charCodeAt(Te);Se<=127?te.push(Se):Se<=2047?te.push(192|Se>>6,128|63&Se):55296==(64512&Se)?Te<ne.length-1&&56320==(64512&ne.charCodeAt(Te+1))?(Se=65536|(1023&Se)<<10|1023&ne.charCodeAt(++Te),te.push(240|Se>>18,128|Se>>12&63,128|Se>>6&63,128|63&Se)):te.push(239,191,189):56320==(64512&Se)?te.push(239,191,189):te.push(224|Se>>12,128|Se>>6&63,128|63&Se)}return new Uint8Array(te)}function tr(ne,te){switch(ne){case Ti.BASE64:{const Je=-1!==te.indexOf("-"),Rt=-1!==te.indexOf("_");if(Je||Rt)throw Qe(ne,"Invalid character '"+(Je?"-":"_")+"' found: is it base64url encoded?");break}case Ti.BASE64URL:{const Je=-1!==te.indexOf("+"),Rt=-1!==te.indexOf("/");if(Je||Rt)throw Qe(ne,"Invalid character '"+(Je?"+":"/")+"' found: is it base64 encoded?");te=te.replace(/-/g,"+").replace(/_/g,"/");break}}let Te;try{Te=function kn(ne){return atob(ne)}(te)}catch(Je){throw Qe(ne,"Invalid character found")}const Se=new Uint8Array(Te.length);for(let Je=0;Je<Te.length;Je++)Se[Je]=Te.charCodeAt(Je);return Se}class Pn{constructor(te){this.base64=!1,this.contentType=null;const Te=te.match(/^data:([^,]+)?,/);if(null===Te)throw Qe(Ti.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const Se=Te[1]||null;null!=Se&&(this.base64=function Sr(ne,te){return ne.length>=te.length&&ne.substring(ne.length-te.length)===te}(Se,";base64"),this.contentType=this.base64?Se.substring(0,Se.length-";base64".length):Se),this.rest=te.substring(te.indexOf(",")+1)}}class Fi{constructor(te,Te){let Se=0,Je="";bn(te)?(this.data_=te,Se=te.size,Je=te.type):te instanceof ArrayBuffer?(Te?this.data_=new Uint8Array(te):(this.data_=new Uint8Array(te.byteLength),this.data_.set(new Uint8Array(te))),Se=this.data_.length):te instanceof Uint8Array&&(Te?this.data_=te:(this.data_=new Uint8Array(te.length),this.data_.set(te)),Se=te.length),this.size_=Se,this.type_=Je}size(){return this.size_}type(){return this.type_}slice(te,Te){if(bn(this.data_)){const Je=function Ht(ne,te,Te){return ne.webkitSlice?ne.webkitSlice(te,Te):ne.mozSlice?ne.mozSlice(te,Te):ne.slice?ne.slice(te,Te):null}(this.data_,te,Te);return null===Je?null:new Fi(Je)}{const Se=new Uint8Array(this.data_.buffer,te,Te-te);return new Fi(Se,!0)}}static getBlob(...te){if(pt()){const Te=te.map(Se=>Se instanceof Fi?Se.data_:Se);return new Fi(Yn.apply(null,Te))}{const Te=te.map(Bt=>Nn(Bt)?Zi(Ti.RAW,Bt).data:Bt.data_);let Se=0;Te.forEach(Bt=>{Se+=Bt.byteLength});const Je=new Uint8Array(Se);let Rt=0;return Te.forEach(Bt=>{for(let _n=0;_n<Bt.length;_n++)Je[Rt++]=Bt[_n]}),new Fi(Je,!0)}}uploadData(){return this.data_}}function sn(ne){let te;try{te=JSON.parse(ne)}catch(Te){return null}return function qt(ne){return"object"==typeof ne&&!Array.isArray(ne)}(te)?te:null}function ui(ne){const te=ne.lastIndexOf("/",ne.length-2);return-1===te?ne:ne.slice(te+1)}function yn(ne,te){return te}class Qn{constructor(te,Te,Se,Je){this.server=te,this.local=Te||te,this.writable=!!Se,this.xform=Je||yn}}let Bn=null;function Ut(){if(Bn)return Bn;const ne=[];ne.push(new Qn("bucket")),ne.push(new Qn("generation")),ne.push(new Qn("metageneration")),ne.push(new Qn("name","fullPath",!0));const Te=new Qn("name");Te.xform=function te(Rt,Bt){return function Yi(ne){return!Nn(ne)||ne.length<2?ne:ui(ne)}(Bt)},ne.push(Te);const Je=new Qn("size");return Je.xform=function Se(Rt,Bt){return void 0!==Bt?Number(Bt):Bt},ne.push(Je),ne.push(new Qn("timeCreated")),ne.push(new Qn("updated")),ne.push(new Qn("md5Hash",null,!0)),ne.push(new Qn("cacheControl",null,!0)),ne.push(new Qn("contentDisposition",null,!0)),ne.push(new Qn("contentEncoding",null,!0)),ne.push(new Qn("contentLanguage",null,!0)),ne.push(new Qn("contentType",null,!0)),ne.push(new Qn("metadata","customMetadata",!0)),Bn=ne,Bn}function fn(ne,te,Te){const Se=sn(te);return null===Se?null:function nn(ne,te,Te){const Se={type:"file"},Je=Te.length;for(let Rt=0;Rt<Je;Rt++){const Bt=Te[Rt];Se[Bt.local]=Bt.xform(Se,te[Bt.server])}return function bt(ne,te){Object.defineProperty(ne,"ref",{get:function Te(){const Rt=new wt(ne.bucket,ne.fullPath);return te._makeStorageReference(Rt)}})}(Se,ne),Se}(ne,Se,Te)}function on(ne,te){const Te={},Se=te.length;for(let Je=0;Je<Se;Je++){const Rt=te[Je];Rt.writable&&(Te[Rt.server]=ne[Rt.local])}return JSON.stringify(Te)}const xe="prefixes";class de{constructor(te,Te,Se,Je){this.url=te,this.method=Te,this.handler=Se,this.timeout=Je,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function X(ne){if(!ne)throw Fe()}function ue(ne,te){return function Te(Se,Je){const Rt=fn(ne,Je,te);return X(null!==Rt),Rt}}function et(ne){return function te(Te,Se){let Je;return Je=401===Te.getStatus()?Te.getErrorText().includes("Firebase App Check token is invalid")?function ot(){return new fe("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function mt(){return new fe("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===Te.getStatus()?function rt(ne){return new fe("quota-exceeded","Quota for bucket '"+ne+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(ne.bucket):403===Te.getStatus()?function qe(ne){return new fe("unauthorized","User does not have permission to access '"+ne+"'.")}(ne.path):Se,Je.status=Te.getStatus(),Je.serverResponse=Se.serverResponse,Je}}function Zt(ne){const te=et(ne);return function Te(Se,Je){let Rt=te(Se,Je);return 404===Se.getStatus()&&(Rt=function _t(ne){return new fe("object-not-found","Object '"+ne+"' does not exist.")}(ne.path)),Rt.serverResponse=Je.serverResponse,Rt}}function Yt(ne,te,Te){const Je=Le(te.fullServerUrl(),ne.host,ne._protocol),Bt=ne.maxOperationRetryTime,_n=new de(Je,"GET",ue(ne,Te),Bt);return _n.errorHandler=Zt(te),_n}function Jn(ne,te,Te,Se,Je){const Rt={};Rt.prefix=te.isRoot?"":te.path+"/",Te&&Te.length>0&&(Rt.delimiter=Te),Se&&(Rt.pageToken=Se),Je&&(Rt.maxResults=Je);const _n=Le(te.bucketOnlyServerUrl(),ne.host,ne._protocol),Fn=ne.maxOperationRetryTime,B=new de(_n,"GET",function ce(ne,te){return function Te(Se,Je){const Rt=function Ce(ne,te,Te){const Se=sn(Te);return null===Se?null:function Ve(ne,te,Te){const Se={prefixes:[],items:[],nextPageToken:Te.nextPageToken};if(Te[xe])for(const Je of Te[xe]){const Rt=Je.replace(/\/$/,""),Bt=ne._makeStorageReference(new wt(te,Rt));Se.prefixes.push(Bt)}if(Te.items)for(const Je of Te.items){const Rt=ne._makeStorageReference(new wt(te,Je.name));Se.items.push(Rt)}return Se}(ne,te,Se)}(ne,te,Je);return X(null!==Rt),Rt}}(ne,te.bucket),Fn);return B.urlParams=Rt,B.errorHandler=et(te),B}function ji(ne,te,Te){const Se=Object.assign({},Te);return Se.fullPath=ne.path,Se.size=te.size(),Se.contentType||(Se.contentType=function jn(ne,te){return ne&&ne.contentType||te&&te.type()||"application/octet-stream"}(null,te)),Se}function Si(ne,te,Te,Se,Je){const Rt=te.bucketOnlyServerUrl(),Bt={"X-Goog-Upload-Protocol":"multipart"},Vn=function _n(){let pi="";for(let si=0;si<2;si++)pi+=Math.random().toString().slice(2);return pi}();Bt["Content-Type"]="multipart/related; boundary="+Vn;const Fn=ji(te,Se,Je),B=on(Fn,Te),le=Fi.getBlob("--"+Vn+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+B+"\r\n--"+Vn+"\r\nContent-Type: "+Fn.contentType+"\r\n\r\n",Se,"\r\n--"+Vn+"--");if(null===le)throw nt();const Oe={name:Fn.fullPath},ft=Le(Rt,ne.host,ne._protocol),cn=ne.maxUploadRetryTime,ri=new de(ft,"POST",ue(ne,Te),cn);return ri.urlParams=Oe,ri.headers=Bt,ri.body=le.uploadData(),ri.errorHandler=et(te),ri}class Xt{constructor(te,Te,Se,Je){this.current=te,this.total=Te,this.finalized=!!Se,this.metadata=Je||null}}function Zn(ne,te){let Te=null;try{Te=ne.getResponseHeader("X-Goog-Upload-Status")}catch(Je){X(!1)}return X(!!Te&&-1!==(te||["active"]).indexOf(Te)),Te}const Qr={STATE_CHANGED:"state_changed"},xn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function or(ne){switch(ne){case"running":case"pausing":case"canceling":return xn.RUNNING;case"paused":return xn.PAUSED;case"success":return xn.SUCCESS;case"canceled":return xn.CANCELED;default:return xn.ERROR}}class vi{constructor(te,Te,Se){if(function $t(ne){return"function"==typeof ne}(te)||null!=Te||null!=Se)this.next=te,this.error=null!=Te?Te:void 0,this.complete=null!=Se?Se:void 0;else{const Rt=te;this.next=Rt.next,this.error=Rt.error,this.complete=Rt.complete}}}function zn(ne){return(...te)=>{Promise.resolve().then(()=>ne(...te))}}class $i extends class Ds{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Kt.NO_ERROR,this.sendPromise_=new Promise(te=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Kt.ABORT,te()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Kt.NETWORK_ERROR,te()}),this.xhr_.addEventListener("load",()=>{te()})})}send(te,Te,Se,Je){if(this.sent_)throw dt("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(Te,te,!0),void 0!==Je)for(const Rt in Je)Je.hasOwnProperty(Rt)&&this.xhr_.setRequestHeader(Rt,Je[Rt].toString());return void 0!==Se?this.xhr_.send(Se):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw dt("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw dt("cannot .getStatus() before sending");try{return this.xhr_.status}catch(te){return-1}}getResponse(){if(!this.sent_)throw dt("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw dt("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(te){return this.xhr_.getResponseHeader(te)}addUploadProgressListener(te){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",te)}removeUploadProgressListener(te){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",te)}}{initXhr(){this.xhr_.responseType="text"}}function _r(){return new $i}class Xe{constructor(te,Te,Se=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=te,this._blob=Te,this._metadata=Se,this._mappings=Ut(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=Je=>{if(this._request=void 0,this._chunkMultiplier=1,Je._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const Rt=this.isExponentialBackoffExpired();if(Mn(Je.status,[])){if(!Rt)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();Je=ze()}this._error=Je,this._transition("error")}},this._metadataErrorHandler=Je=>{this._request=void 0,Je._codeEquals("canceled")?this.completeTransitions_():(this._error=Je,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((Je,Rt)=>{this._resolve=Je,this._reject=Rt,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const te=this._transferred;return Te=>this._updateProgress(te+Te)}_shouldDoResumable(te){return te.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(te){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([Te,Se])=>{switch(this._state){case"running":te(Te,Se);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((te,Te)=>{const Se=function Ni(ne,te,Te,Se,Je){const Rt=te.bucketOnlyServerUrl(),Bt=ji(te,Se,Je),_n={name:Bt.fullPath},Vn=Le(Rt,ne.host,ne._protocol),B={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${Se.size()}`,"X-Goog-Upload-Header-Content-Type":Bt.contentType,"Content-Type":"application/json; charset=utf-8"},se=on(Bt,Te),Oe=new de(Vn,"POST",function le(ft){let kt;Zn(ft);try{kt=ft.getResponseHeader("X-Goog-Upload-URL")}catch(cn){X(!1)}return X(Nn(kt)),kt},ne.maxUploadRetryTime);return Oe.urlParams=_n,Oe.headers=B,Oe.body=se,Oe.errorHandler=et(te),Oe}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Je=this._ref.storage._makeRequest(Se,_r,te,Te);this._request=Je,Je.getPromise().then(Rt=>{this._request=void 0,this._uploadUrl=Rt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const te=this._uploadUrl;this._resolveToken((Te,Se)=>{const Je=function Oi(ne,te,Te,Se){const Vn=new de(Te,"POST",function Rt(Fn){const B=Zn(Fn,["active","final"]);let se=null;try{se=Fn.getResponseHeader("X-Goog-Upload-Size-Received")}catch(le){X(!1)}se||X(!1);const $=Number(se);return X(!isNaN($)),new Xt($,Se.size(),"final"===B)},ne.maxUploadRetryTime);return Vn.headers={"X-Goog-Upload-Command":"query"},Vn.errorHandler=et(te),Vn}(this._ref.storage,this._ref._location,te,this._blob),Rt=this._ref.storage._makeRequest(Je,_r,Te,Se);this._request=Rt,Rt.getPromise().then(Bt=>{Bt=Bt,this._request=void 0,this._updateProgress(Bt.current),this._needToFetchStatus=!1,Bt.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const te=262144*this._chunkMultiplier,Te=new Xt(this._transferred,this._blob.size()),Se=this._uploadUrl;this._resolveToken((Je,Rt)=>{let Bt;try{Bt=function ur(ne,te,Te,Se,Je,Rt,Bt,_n){const Vn=new Xt(0,0);if(Bt?(Vn.current=Bt.current,Vn.total=Bt.total):(Vn.current=0,Vn.total=Se.size()),Se.size()!==Vn.total)throw function It(){return new fe("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const Fn=Vn.total-Vn.current;let B=Fn;Je>0&&(B=Math.min(B,Je));const se=Vn.current;let le="";le=0===B?"finalize":Fn===B?"upload, finalize":"upload";const Oe={"X-Goog-Upload-Command":le,"X-Goog-Upload-Offset":`${Vn.current}`},ft=Se.slice(se,se+B);if(null===ft)throw nt();const pi=new de(Te,"POST",function kt(si,gi){const Qi=Zn(si,["active","final"]),Hi=Vn.current+B,vn=Se.size();let es;return es="final"===Qi?ue(te,Rt)(si,gi):null,new Xt(Hi,vn,"final"===Qi,es)},te.maxUploadRetryTime);return pi.headers=Oe,pi.body=ft.uploadData(),pi.progressCallback=_n||null,pi.errorHandler=et(ne),pi}(this._ref._location,this._ref.storage,Se,this._blob,te,this._mappings,Te,this._makeProgressCallback())}catch(Vn){return this._error=Vn,void this._transition("error")}const _n=this._ref.storage._makeRequest(Bt,_r,Je,Rt,!1);this._request=_n,_n.getPromise().then(Vn=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Vn.current),Vn.finalized?(this._metadata=Vn.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((te,Te)=>{const Se=Yt(this._ref.storage,this._ref._location,this._mappings),Je=this._ref.storage._makeRequest(Se,_r,te,Te);this._request=Je,Je.getPromise().then(Rt=>{this._request=void 0,this._metadata=Rt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((te,Te)=>{const Se=Si(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Je=this._ref.storage._makeRequest(Se,_r,te,Te);this._request=Je,Je.getPromise().then(Rt=>{this._request=void 0,this._metadata=Rt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(te){const Te=this._transferred;this._transferred=te,this._transferred!==Te&&this._notifyObservers()}_transition(te){if(this._state!==te)switch(te){case"canceling":case"pausing":this._state=te,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const Te="paused"===this._state;this._state=te,Te&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=te,this._notifyObservers();break;case"canceled":this._error=Ue(),this._state=te,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const te=or(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:te,metadata:this._metadata,task:this,ref:this._ref}}on(te,Te,Se,Je){const Rt=new vi(Te||void 0,Se||void 0,Je||void 0);return this._addObserver(Rt),()=>{this._removeObserver(Rt)}}then(te,Te){return this._promise.then(te,Te)}catch(te){return this.then(null,te)}_addObserver(te){this._observers.push(te),this._notifyObserver(te)}_removeObserver(te){const Te=this._observers.indexOf(te);-1!==Te&&this._observers.splice(Te,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(Te=>{this._notifyObserver(Te)})}_finishPromise(){if(void 0!==this._resolve){let te=!0;switch(or(this._state)){case xn.SUCCESS:zn(this._resolve.bind(null,this.snapshot))();break;case xn.CANCELED:case xn.ERROR:zn(this._reject.bind(null,this._error))();break;default:te=!1}te&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(te){switch(or(this._state)){case xn.RUNNING:case xn.PAUSED:te.next&&zn(te.next.bind(te,this.snapshot))();break;case xn.SUCCESS:te.complete&&zn(te.complete.bind(te))();break;default:te.error&&zn(te.error.bind(te,this._error))()}}resume(){const te="paused"===this._state||"pausing"===this._state;return te&&this._transition("running"),te}pause(){const te="running"===this._state;return te&&this._transition("pausing"),te}cancel(){const te="running"===this._state||"pausing"===this._state;return te&&this._transition("canceling"),te}}class St{constructor(te,Te){this._service=te,this._location=Te instanceof wt?Te:wt.makeFromUrl(Te,te.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(te,Te){return new St(te,Te)}get root(){const te=new wt(this._location.bucket,"");return this._newRef(this._service,te)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ui(this._location.path)}get storage(){return this._service}get parent(){const te=function fi(ne){if(0===ne.length)return null;const te=ne.lastIndexOf("/");return-1===te?"":ne.slice(0,te)}(this._location.path);if(null===te)return null;const Te=new wt(this._location.bucket,te);return new St(this._service,Te)}_throwIfRoot(te){if(""===this._location.path)throw We(te)}}function yr(ne,te,Te){return _s.apply(this,arguments)}function _s(){return(_s=(0,_.Z)(function*(ne,te,Te){const Je=yield ys(ne,{pageToken:Te});te.prefixes.push(...Je.prefixes),te.items.push(...Je.items),null!=Je.nextPageToken&&(yield yr(ne,te,Je.nextPageToken))})).apply(this,arguments)}function ys(ne,te){null!=te&&"number"==typeof te.maxResults&&Ot("options.maxResults",1,1e3,te.maxResults);const Te=te||{},Se=Jn(ne.storage,ne._location,"/",Te.pageToken,Te.maxResults);return ne.storage.makeRequestWithTokens(Se,_r)}function Ia(ne){ne._throwIfRoot("getDownloadURL");const te=function Mt(ne,te,Te){const Je=Le(te.fullServerUrl(),ne.host,ne._protocol),Bt=ne.maxOperationRetryTime,_n=new de(Je,"GET",function Me(ne,te){return function Te(Se,Je){const Rt=fn(ne,Je,te);return X(null!==Rt),function dn(ne,te,Te,Se){const Je=sn(te);if(null===Je||!Nn(Je.downloadTokens))return null;const Rt=Je.downloadTokens;if(0===Rt.length)return null;const Bt=encodeURIComponent;return Rt.split(",").map(Fn=>{const se=ne.fullPath;return Le("/b/"+Bt(ne.bucket)+"/o/"+Bt(se),Te,Se)+ht({alt:"media",token:Fn})})[0]}(Rt,Je,ne.host,ne._protocol)}}(ne,Te),Bt);return _n.errorHandler=Zt(te),_n}(ne.storage,ne._location,Ut());return ne.storage.makeRequestWithTokens(te,_r).then(Te=>{if(null===Te)throw function At(){return new fe("no-download-url","The given file does not have any download URLs.")}();return Te})}function Xo(ne,te){const Te=function cr(ne,te){const Te=te.split("/").filter(Se=>Se.length>0).join("/");return 0===ne.length?Te:ne+"/"+Te}(ne._location.path,te),Se=new wt(ne._location.bucket,Te);return new St(ne.storage,Se)}function Co(ne,te){if(ne instanceof Qs){const Te=ne;if(null==Te._bucket)throw function je(){return new fe("no-default-bucket","No default bucket found. Did you set the '"+Ze+"' property when initializing the app?")}();const Se=new St(Te,Te._bucket);return null!=te?Co(Se,te):Se}return void 0!==te?Xo(ne,te):ne}function vs(ne,te){if(te&&function Aa(ne){return/^[A-Za-z]+:\/\//.test(ne)}(te)){if(ne instanceof Qs)return function Rs(ne,te){return new St(ne,te)}(ne,te);throw it("To use ref(service, url), the first argument must be a Storage instance.")}return Co(ne,te)}function ds(ne,te){const Te=null==te?void 0:te[Ze];return null==Te?null:wt.makeFromBucketSpec(Te,ne)}class Qs{constructor(te,Te,Se,Je,Rt){this.app=te,this._authProvider=Te,this._appCheckProvider=Se,this._url=Je,this._firebaseVersion=Rt,this._bucket=null,this._host=Ie,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=Je?wt.makeFromBucketSpec(Je,this._host):ds(this._host,this.app.options)}get host(){return this._host}set host(te){this._host=te,this._bucket=null!=this._url?wt.makeFromBucketSpec(this._url,te):ds(te,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(te){Ot("time",0,Number.POSITIVE_INFINITY,te),this._maxUploadRetryTime=te}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(te){Ot("time",0,Number.POSITIVE_INFINITY,te),this._maxOperationRetryTime=te}_getAuthToken(){var te=this;return(0,_.Z)(function*(){if(te._overrideAuthToken)return te._overrideAuthToken;const Te=te._authProvider.getImmediate({optional:!0});if(Te){const Se=yield Te.getToken();if(null!==Se)return Se.accessToken}return null})()}_getAppCheckToken(){var te=this;return(0,_.Z)(function*(){const Te=te._appCheckProvider.getImmediate({optional:!0});return Te?(yield Te.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(te=>te.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(te){return new St(this,te)}_makeRequest(te,Te,Se,Je,Rt=!0){if(this._deleted)return new at(Ne());{const Bt=function hi(ne,te,Te,Se,Je,Rt,Bt=!0){const _n=ht(ne.urlParams),Vn=ne.url+_n,Fn=Object.assign({},ne.headers);return function $n(ne,te){te&&(ne["X-Firebase-GMPID"]=te)}(Fn,te),function Ki(ne,te){null!==te&&te.length>0&&(ne.Authorization="Firebase "+te)}(Fn,Te),function Ei(ne,te){ne["X-Firebase-Storage-Version"]="webjs/"+(null!=te?te:"AppManager")}(Fn,Rt),function Nt(ne,te){null!==te&&(ne["X-Firebase-AppCheck"]=te)}(Fn,Se),new Kn(Vn,ne.method,Fn,ne.body,ne.successCodes,ne.additionalRetryCodes,ne.handler,ne.errorHandler,ne.timeout,ne.progressCallback,Je,Bt)}(te,this._appId,Se,Je,Te,this._firebaseVersion,Rt);return this._requests.add(Bt),Bt.getPromise().then(()=>this._requests.delete(Bt),()=>this._requests.delete(Bt)),Bt}}makeRequestWithTokens(te,Te){var Se=this;return(0,_.Z)(function*(){const[Je,Rt]=yield Promise.all([Se._getAuthToken(),Se._getAppCheckToken()]);return Se._makeRequest(te,Te,Je,Rt).getPromise()})()}}const To="@firebase/storage",da="storage";function Sa(ne,te,Te){return function ei(ne,te,Te){ne._throwIfRoot("uploadBytes");const Se=Si(ne.storage,ne._location,Ut(),new Fi(te,!0),Te);return ne.storage.makeRequestWithTokens(Se,_r).then(Je=>({metadata:Je,ref:ne}))}(ne=(0,J.m9)(ne),te,Te)}function Xr(ne,te,Te){return function dr(ne,te,Te){return ne._throwIfRoot("uploadBytesResumable"),new Xe(ne,new Fi(te),Te)}(ne=(0,J.m9)(ne),te,Te)}function ks(ne){return function Jr(ne){ne._throwIfRoot("getMetadata");const te=Yt(ne.storage,ne._location,Ut());return ne.storage.makeRequestWithTokens(te,_r)}(ne=(0,J.m9)(ne))}function Ps(ne,te){return function zr(ne,te){ne._throwIfRoot("updateMetadata");const Te=function Vt(ne,te,Te,Se){const Rt=Le(te.fullServerUrl(),ne.host,ne._protocol),_n=on(Te,Se),Fn=ne.maxOperationRetryTime,B=new de(Rt,"PATCH",ue(ne,Se),Fn);return B.headers={"Content-Type":"application/json; charset=utf-8"},B.body=_n,B.errorHandler=Zt(te),B}(ne.storage,ne._location,te,Ut());return ne.storage.makeRequestWithTokens(Te,_r)}(ne=(0,J.m9)(ne),te)}function Fs(ne,te){return ys(ne=(0,J.m9)(ne),te)}function nr(ne){return function Di(ne){const te={prefixes:[],items:[]};return yr(ne,te).then(()=>te)}(ne=(0,J.m9)(ne))}function Hs(ne){return Ia(ne=(0,J.m9)(ne))}function Gs(ne){return function Os(ne){ne._throwIfRoot("deleteObject");const te=function Hn(ne,te){const Se=Le(te.fullServerUrl(),ne.host,ne._protocol),_n=new de(Se,"DELETE",function Bt(Vn,Fn){},ne.maxOperationRetryTime);return _n.successCodes=[200,204],_n.errorHandler=Zt(te),_n}(ne.storage,ne._location);return ne.storage.makeRequestWithTokens(te,_r)}(ne=(0,J.m9)(ne))}function bs(ne,te){return vs(ne=(0,J.m9)(ne),te)}function Is(ne,te){return Xo(ne,te)}function As(ne=(0,c.getApp)(),te){ne=(0,J.m9)(ne);const Se=(0,c._getProvider)(ne,da).getImmediate({identifier:te}),Je=(0,J.P0)("storage");return Je&&Js(Se,...Je),Se}function Js(ne,te,Te,Se={}){!function $s(ne,te,Te,Se={}){ne.host=`${te}:${Te}`,ne._protocol="http";const{mockUserToken:Je}=Se;Je&&(ne._overrideAuthToken="string"==typeof Je?Je:(0,J.Sg)(Je,ne.app.options.projectId))}(ne,te,Te,Se)}function Na(ne,{instanceIdentifier:te}){const Te=ne.getProvider("app").getImmediate(),Se=ne.getProvider("auth-internal"),Je=ne.getProvider("app-check-internal");return new Qs(Te,Se,Je,te,c.SDK_VERSION)}!function vr(){(0,c._registerComponent)(new Ee.wA(da,Na,"PUBLIC").setMultipleInstances(!0)),(0,c.registerVersion)(To,"0.9.12",""),(0,c.registerVersion)(To,"0.9.12","esm2017")}()},2090:(rn,Ye,V)=>{V.d(Ye,{BH:()=>$t,LL:()=>pt,ZR:()=>bn,gQ:()=>Ai,zI:()=>it,hu:()=>c,g5:()=>J,US:()=>Ze,tV:()=>ke,h$:()=>Ge,L:()=>pe,$s:()=>nn,r3:()=>$n,Sg:()=>qt,ne:()=>lr,p$:()=>fe,vZ:()=>Yn,ZB:()=>ge,gK:()=>Fi,pd:()=>Zi,aH:()=>tn,q4:()=>at,P0:()=>In,Pz:()=>wn,m9:()=>on,z$:()=>_t,GJ:()=>Ei,jU:()=>ot,ru:()=>qe,xb:()=>hi,w1:()=>vt,hl:()=>It,uI:()=>rt,UG:()=>mt,Yr:()=>je,b$:()=>ze,G6:()=>nt,w9:()=>Ki,cI:()=>ht,UI:()=>Jt,xO:()=>Ti,zd:()=>Vi,DV:()=>Nt,ug:()=>yn,dS:()=>ui,Wl:()=>Kt,eu:()=>At});const c=function(xe,we){if(!xe)throw J(we)},J=function(xe){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+xe)},Ee=function(xe){const we=[];let Ve=0;for(let Ce=0;Ce<xe.length;Ce++){let de=xe.charCodeAt(Ce);de<128?we[Ve++]=de:de<2048?(we[Ve++]=de>>6|192,we[Ve++]=63&de|128):55296==(64512&de)&&Ce+1<xe.length&&56320==(64512&xe.charCodeAt(Ce+1))?(de=65536+((1023&de)<<10)+(1023&xe.charCodeAt(++Ce)),we[Ve++]=de>>18|240,we[Ve++]=de>>12&63|128,we[Ve++]=de>>6&63|128,we[Ve++]=63&de|128):(we[Ve++]=de>>12|224,we[Ve++]=de>>6&63|128,we[Ve++]=63&de|128)}return we},Ze={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(xe,we){if(!Array.isArray(xe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ve=we?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ce=[];for(let de=0;de<xe.length;de+=3){const X=xe[de],ue=de+1<xe.length,ce=ue?xe[de+1]:0,Me=de+2<xe.length,et=Me?xe[de+2]:0;let Jn=(15&ce)<<2|et>>6,Xn=63&et;Me||(Xn=64,ue||(Jn=64)),Ce.push(Ve[X>>2],Ve[(3&X)<<4|ce>>4],Ve[Jn],Ve[Xn])}return Ce.join("")},encodeString(xe,we){return this.HAS_NATIVE_SUPPORT&&!we?btoa(xe):this.encodeByteArray(Ee(xe),we)},decodeString(xe,we){return this.HAS_NATIVE_SUPPORT&&!we?atob(xe):function(xe){const we=[];let Ve=0,Ce=0;for(;Ve<xe.length;){const de=xe[Ve++];if(de<128)we[Ce++]=String.fromCharCode(de);else if(de>191&&de<224){const X=xe[Ve++];we[Ce++]=String.fromCharCode((31&de)<<6|63&X)}else if(de>239&&de<365){const Me=((7&de)<<18|(63&xe[Ve++])<<12|(63&xe[Ve++])<<6|63&xe[Ve++])-65536;we[Ce++]=String.fromCharCode(55296+(Me>>10)),we[Ce++]=String.fromCharCode(56320+(1023&Me))}else{const X=xe[Ve++],ue=xe[Ve++];we[Ce++]=String.fromCharCode((15&de)<<12|(63&X)<<6|63&ue)}}return we.join("")}(this.decodeStringToByteArray(xe,we))},decodeStringToByteArray(xe,we){this.init_();const Ve=we?this.charToByteMapWebSafe_:this.charToByteMap_,Ce=[];for(let de=0;de<xe.length;){const X=Ve[xe.charAt(de++)],ce=de<xe.length?Ve[xe.charAt(de)]:0;++de;const et=de<xe.length?Ve[xe.charAt(de)]:64;++de;const Yt=de<xe.length?Ve[xe.charAt(de)]:64;if(++de,null==X||null==ce||null==et||null==Yt)throw Error();Ce.push(X<<2|ce>>4),64!==et&&(Ce.push(ce<<4&240|et>>2),64!==Yt&&Ce.push(et<<6&192|Yt))}return Ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let xe=0;xe<this.ENCODED_VALS.length;xe++)this.byteToCharMap_[xe]=this.ENCODED_VALS.charAt(xe),this.charToByteMap_[this.byteToCharMap_[xe]]=xe,this.byteToCharMapWebSafe_[xe]=this.ENCODED_VALS_WEBSAFE.charAt(xe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[xe]]=xe,xe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(xe)]=xe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(xe)]=xe)}}},Ge=function(xe){const we=Ee(xe);return Ze.encodeByteArray(we,!0)},pe=function(xe){return Ge(xe).replace(/\./g,"")},ke=function(xe){try{return Ze.decodeString(xe,!0)}catch(we){console.error("base64Decode failed: ",we)}return null};function fe(xe){return ge(void 0,xe)}function ge(xe,we){if(!(we instanceof Object))return we;switch(we.constructor){case Date:return new Date(we.getTime());case Object:void 0===xe&&(xe={});break;case Array:xe=[];break;default:return we}for(const Ve in we)!we.hasOwnProperty(Ve)||!Fe(Ve)||(xe[Ve]=ge(xe[Ve],we[Ve]));return xe}function Fe(xe){return"__proto__"!==xe}function _t(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function rt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function mt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(xe){return!1}}function ot(){return"object"==typeof self&&self.self===self}function qe(){const xe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof xe&&void 0!==xe.id}function ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function vt(){const xe=_t();return xe.indexOf("MSIE ")>=0||xe.indexOf("Trident/")>=0}function je(){return!1}function nt(){return!mt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function It(){return"object"==typeof indexedDB}function At(){return new Promise((xe,we)=>{try{let Ve=!0;const Ce="validate-browser-context-for-indexeddb-analytics-module",de=self.indexedDB.open(Ce);de.onsuccess=()=>{de.result.close(),Ve||self.indexedDB.deleteDatabase(Ce),xe(!0)},de.onupgradeneeded=()=>{Ve=!1},de.onerror=()=>{var X;we((null===(X=de.error)||void 0===X?void 0:X.message)||"")}}catch(Ve){we(Ve)}})}function it(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const wt=()=>{try{return function Ne(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const xe=process.env.__FIREBASE_DEFAULTS__;return xe?JSON.parse(xe):void 0})()||(()=>{if("undefined"==typeof document)return;let xe;try{xe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Ve){return}const we=xe&&ke(xe[1]);return we&&JSON.parse(we)})()}catch(xe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${xe}`)}},at=xe=>{var we,Ve;return null===(Ve=null===(we=wt())||void 0===we?void 0:we.emulatorHosts)||void 0===Ve?void 0:Ve[xe]},In=xe=>{const we=at(xe);if(!we)return;const Ve=we.lastIndexOf(":");if(Ve<=0||Ve+1===we.length)throw new Error(`Invalid host ${we} with no separate hostname and port!`);const Ce=parseInt(we.substring(Ve+1),10);return"["===we[0]?[we.substring(1,Ve-1),Ce]:[we.substring(0,Ve),Ce]},tn=()=>{var xe;return null===(xe=wt())||void 0===xe?void 0:xe.config},wn=xe=>{var we;return null===(we=wt())||void 0===we?void 0:we[`_${xe}`]};class $t{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((we,Ve)=>{this.resolve=we,this.reject=Ve})}wrapCallback(we){return(Ve,Ce)=>{Ve?this.reject(Ve):this.resolve(Ce),"function"==typeof we&&(this.promise.catch(()=>{}),1===we.length?we(Ve):we(Ve,Ce))}}}function qt(xe,we){if(xe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ce=we||"demo-project",de=xe.iat||0,X=xe.sub||xe.user_id;if(!X)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ue=Object.assign({iss:`https://securetoken.google.com/${Ce}`,aud:Ce,iat:de,exp:de+3600,auth_time:de,sub:X,user_id:X,firebase:{sign_in_provider:"custom",identities:{}}},xe);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(ue)),""].join(".")}class bn extends Error{constructor(we,Ve,Ce){super(Ve),this.code=we,this.customData=Ce,this.name="FirebaseError",Object.setPrototypeOf(this,bn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pt.prototype.create)}}class pt{constructor(we,Ve,Ce){this.service=we,this.serviceName=Ve,this.errors=Ce}create(we,...Ve){const Ce=Ve[0]||{},de=`${this.service}/${we}`,X=this.errors[we],ue=X?function Ot(xe,we){return xe.replace(Le,(Ve,Ce)=>{const de=we[Ce];return null!=de?String(de):`<${Ce}?>`})}(X,Ce):"Error";return new bn(de,`${this.serviceName}: ${ue} (${de}).`,Ce)}}const Le=/\{\$([^}]+)}/g;function ht(xe){return JSON.parse(xe)}function Kt(xe){return JSON.stringify(xe)}const Mn=function(xe){let we={},Ve={},Ce={},de="";try{const X=xe.split(".");we=ht(ke(X[0])||""),Ve=ht(ke(X[1])||""),de=X[2],Ce=Ve.d||{},delete Ve.d}catch(X){}return{header:we,claims:Ve,data:Ce,signature:de}},Ki=function(xe){const Ve=Mn(xe).claims;return!!Ve&&"object"==typeof Ve&&Ve.hasOwnProperty("iat")},Ei=function(xe){const we=Mn(xe).claims;return"object"==typeof we&&!0===we.admin};function $n(xe,we){return Object.prototype.hasOwnProperty.call(xe,we)}function Nt(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]}function hi(xe){for(const we in xe)if(Object.prototype.hasOwnProperty.call(xe,we))return!1;return!0}function Jt(xe,we,Ve){const Ce={};for(const de in xe)Object.prototype.hasOwnProperty.call(xe,de)&&(Ce[de]=we.call(Ve,xe[de],de,xe));return Ce}function Yn(xe,we){if(xe===we)return!0;const Ve=Object.keys(xe),Ce=Object.keys(we);for(const de of Ve){if(!Ce.includes(de))return!1;const X=xe[de],ue=we[de];if(Ht(X)&&Ht(ue)){if(!Yn(X,ue))return!1}else if(X!==ue)return!1}for(const de of Ce)if(!Ve.includes(de))return!1;return!0}function Ht(xe){return null!==xe&&"object"==typeof xe}function Ti(xe){const we=[];for(const[Ve,Ce]of Object.entries(xe))Array.isArray(Ce)?Ce.forEach(de=>{we.push(encodeURIComponent(Ve)+"="+encodeURIComponent(de))}):we.push(encodeURIComponent(Ve)+"="+encodeURIComponent(Ce));return we.length?"&"+we.join("&"):""}function Vi(xe){const we={};return xe.replace(/^\?/,"").split("&").forEach(Ce=>{if(Ce){const[de,X]=Ce.split("=");we[decodeURIComponent(de)]=decodeURIComponent(X)}}),we}function Zi(xe){const we=xe.indexOf("?");if(!we)return"";const Ve=xe.indexOf("#",we);return xe.substring(we,Ve>0?Ve:void 0)}class Ai{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let we=1;we<this.blockSize;++we)this.pad_[we]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(we,Ve){Ve||(Ve=0);const Ce=this.W_;if("string"==typeof we)for(let Yt=0;Yt<16;Yt++)Ce[Yt]=we.charCodeAt(Ve)<<24|we.charCodeAt(Ve+1)<<16|we.charCodeAt(Ve+2)<<8|we.charCodeAt(Ve+3),Ve+=4;else for(let Yt=0;Yt<16;Yt++)Ce[Yt]=we[Ve]<<24|we[Ve+1]<<16|we[Ve+2]<<8|we[Ve+3],Ve+=4;for(let Yt=16;Yt<80;Yt++){const Jn=Ce[Yt-3]^Ce[Yt-8]^Ce[Yt-14]^Ce[Yt-16];Ce[Yt]=4294967295&(Jn<<1|Jn>>>31)}let et,Zt,de=this.chain_[0],X=this.chain_[1],ue=this.chain_[2],ce=this.chain_[3],Me=this.chain_[4];for(let Yt=0;Yt<80;Yt++){Yt<40?Yt<20?(et=ce^X&(ue^ce),Zt=1518500249):(et=X^ue^ce,Zt=1859775393):Yt<60?(et=X&ue|ce&(X|ue),Zt=2400959708):(et=X^ue^ce,Zt=3395469782);const Jn=(de<<5|de>>>27)+et+Me+Zt+Ce[Yt]&4294967295;Me=ce,ce=ue,ue=4294967295&(X<<30|X>>>2),X=de,de=Jn}this.chain_[0]=this.chain_[0]+de&4294967295,this.chain_[1]=this.chain_[1]+X&4294967295,this.chain_[2]=this.chain_[2]+ue&4294967295,this.chain_[3]=this.chain_[3]+ce&4294967295,this.chain_[4]=this.chain_[4]+Me&4294967295}update(we,Ve){if(null==we)return;void 0===Ve&&(Ve=we.length);const Ce=Ve-this.blockSize;let de=0;const X=this.buf_;let ue=this.inbuf_;for(;de<Ve;){if(0===ue)for(;de<=Ce;)this.compress_(we,de),de+=this.blockSize;if("string"==typeof we){for(;de<Ve;)if(X[ue]=we.charCodeAt(de),++ue,++de,ue===this.blockSize){this.compress_(X),ue=0;break}}else for(;de<Ve;)if(X[ue]=we[de],++ue,++de,ue===this.blockSize){this.compress_(X),ue=0;break}}this.inbuf_=ue,this.total_+=Ve}digest(){const we=[];let Ve=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let de=this.blockSize-1;de>=56;de--)this.buf_[de]=255&Ve,Ve/=256;this.compress_(this.buf_);let Ce=0;for(let de=0;de<5;de++)for(let X=24;X>=0;X-=8)we[Ce]=this.chain_[de]>>X&255,++Ce;return we}}function lr(xe,we){const Ve=new tr(xe,we);return Ve.subscribe.bind(Ve)}class tr{constructor(we,Ve){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ve,this.task.then(()=>{we(this)}).catch(Ce=>{this.error(Ce)})}next(we){this.forEachObserver(Ve=>{Ve.next(we)})}error(we){this.forEachObserver(Ve=>{Ve.error(we)}),this.close(we)}complete(){this.forEachObserver(we=>{we.complete()}),this.close()}subscribe(we,Ve,Ce){let de;if(void 0===we&&void 0===Ve&&void 0===Ce)throw new Error("Missing Observer.");de=function Tn(xe,we){if("object"!=typeof xe||null===xe)return!1;for(const Ve of we)if(Ve in xe&&"function"==typeof xe[Ve])return!0;return!1}(we,["next","error","complete"])?we:{next:we,error:Ve,complete:Ce},void 0===de.next&&(de.next=gn),void 0===de.error&&(de.error=gn),void 0===de.complete&&(de.complete=gn);const X=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?de.error(this.finalError):de.complete()}catch(ue){}}),this.observers.push(de),X}unsubscribeOne(we){void 0===this.observers||void 0===this.observers[we]||(delete this.observers[we],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(we){if(!this.finalized)for(let Ve=0;Ve<this.observers.length;Ve++)this.sendOne(Ve,we)}sendOne(we,Ve){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[we])try{Ve(this.observers[we])}catch(Ce){"undefined"!=typeof console&&console.error&&console.error(Ce)}})}close(we){this.finalized||(this.finalized=!0,void 0!==we&&(this.finalError=we),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gn(){}function Fi(xe,we){return`${xe} failed: ${we} argument `}const ui=function(xe){const we=[];let Ve=0;for(let Ce=0;Ce<xe.length;Ce++){let de=xe.charCodeAt(Ce);if(de>=55296&&de<=56319){const X=de-55296;Ce++,c(Ce<xe.length,"Surrogate pair missing trail surrogate."),de=65536+(X<<10)+(xe.charCodeAt(Ce)-56320)}de<128?we[Ve++]=de:de<2048?(we[Ve++]=de>>6|192,we[Ve++]=63&de|128):de<65536?(we[Ve++]=de>>12|224,we[Ve++]=de>>6&63|128,we[Ve++]=63&de|128):(we[Ve++]=de>>18|240,we[Ve++]=de>>12&63|128,we[Ve++]=de>>6&63|128,we[Ve++]=63&de|128)}return we},yn=function(xe){let we=0;for(let Ve=0;Ve<xe.length;Ve++){const Ce=xe.charCodeAt(Ve);Ce<128?we++:Ce<2048?we+=2:Ce>=55296&&Ce<=56319?(we+=4,Ve++):we+=3}return we};function nn(xe,we=1e3,Ve=2){const Ce=we*Math.pow(Ve,xe),de=Math.round(.5*Ce*(Math.random()-.5)*2);return Math.min(144e5,Ce+de)}function on(xe){return xe&&xe._delegate?xe._delegate:xe}},4203:(rn,Ye,V)=>{V.d(Ye,{w:()=>mt});var _=V(2382),c=V(5e3),J=V(7293),Ee=V(2290),Ie=V(541),Ze=V(8931),Ge=V(9808);function pe(ot,qe){1&ot&&(c.TgZ(0,"small",18),c._uU(1,"El nombre es requerido "),c.qZA())}function ke(ot,qe){1&ot&&(c.TgZ(0,"small",18),c._uU(1,"El apellido es requeridos"),c.qZA())}function fe(ot,qe){1&ot&&(c.TgZ(0,"small",18),c._uU(1,"La edad es requerida"),c.qZA())}function ge(ot,qe){1&ot&&(c.TgZ(0,"small",18),c._uU(1,"El dni es requerido"),c.qZA())}function Fe(ot,qe){1&ot&&(c.TgZ(0,"small",18),c._uU(1,"La especialidad es requerida "),c.qZA())}function _t(ot,qe){1&ot&&(c.TgZ(0,"small",18),c._uU(1,"El mail es requerido"),c.qZA())}function rt(ot,qe){1&ot&&(c.TgZ(0,"small",18),c._uU(1,"La clave es requerida"),c.qZA())}let mt=(()=>{class ot{constructor(ze,Ue,vt,Pe,je){this.fb=ze,this.fs=Ue,this.toastr=vt,this.router=Pe,this.cs=je,this.grupoControles=this.fb.group({nombre:["",[_.kI.required]],apellido:["",[_.kI.required]],edad:["",[_.kI.required]],esp:["",[_.kI.required]],dni:["",[_.kI.required]],mail:["",[_.kI.required]],clave:["",[_.kI.required]],captcha:["",[_.kI.required]],foto:[]})}agregarProfesional(){var ze,Ue,vt,Pe,je,nt,It;let At={nombre:null===(ze=this.grupoControles.get("nombre"))||void 0===ze?void 0:ze.value,apellido:null===(Ue=this.grupoControles.get("apellido"))||void 0===Ue?void 0:Ue.value,edad:null===(vt=this.grupoControles.get("edad"))||void 0===vt?void 0:vt.value,especialidad:null===(Pe=this.grupoControles.get("esp"))||void 0===Pe?void 0:Pe.value,dni:null===(je=this.grupoControles.get("dni"))||void 0===je?void 0:je.value,mail:null===(nt=this.grupoControles.get("mail"))||void 0===nt?void 0:nt.value,clave:null===(It=this.grupoControles.get("clave"))||void 0===It?void 0:It.value,foto:this.foto,perfil:"profesional",habilitado:!1};this.captcha==this.cs.palabra?(this.fs.agregarProfesional(At),this.toastr.success("Confirme mail y el administrador deber\xe1 habilitarlo ahora!","Profesional registrado!"),this.grupoControles.reset(),setTimeout(()=>{this.router.navigateByUrl("/login")},3e3)):this.toastr.error("Verifique el captcha!","Error en captcha!")}upload(ze){this.foto=ze.target.files[0]}ngOnInit(){}}return ot.\u0275fac=function(ze){return new(ze||ot)(c.Y36(_.qu),c.Y36(J.C),c.Y36(Ee._W),c.Y36(Ie.F0),c.Y36(Ze.n))},ot.\u0275cmp=c.Xpm({type:ot,selectors:[["app-alta-profesional"]],decls:35,vars:11,consts:[[1,"wrapper"],[1,"logo"],["src","../../../assets/doctor.png","alt",""],[1,"text-center","mt-4","name"],[1,"p-3","mt-3",3,"formGroup","ngSubmit"],[1,"form-field","d-flex","align-items-center"],["type","text","name","nombre","formControlName","nombre","placeholder","Nombre"],["class","invalid",4,"ngIf"],["type","text","name","apellido","formControlName","apellido","placeholder","Apellido"],["type","number","name","edad","formControlName","edad","placeholder","Edad"],["type","number","name","dni","formControlName","dni","placeholder","DNI"],["type","text","name","esp","formControlName","esp","placeholder","Especialidad"],["type","text","name","mail","formControlName","mail","placeholder","Mail"],["type","password","name","clave","formControlName","clave","placeholder","Password"],["type","file","name","foro","formControlName","foto","placeholder","Foto",3,"change"],[1,"text-center",2,"margin-bottom","10px","background-color","rgb(150, 248, 105)"],["type","text","name","captcha","formControlName","captcha","placeholder","Captcha",3,"ngModel","ngModelChange"],["type","submit",1,"btn","mt-3",3,"disabled"],[1,"invalid"]],template:function(ze,Ue){if(1&ze&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"img",2),c.qZA(),c.TgZ(3,"div",3),c._uU(4," Registro Profesional "),c.qZA(),c.TgZ(5,"form",4),c.NdJ("ngSubmit",function(){return Ue.agregarProfesional()}),c.TgZ(6,"div",5),c._UZ(7,"input",6),c.YNc(8,pe,2,0,"small",7),c.qZA(),c.TgZ(9,"div",5),c._UZ(10,"input",8),c.YNc(11,ke,2,0,"small",7),c.qZA(),c.TgZ(12,"div",5),c._UZ(13,"input",9),c.YNc(14,fe,2,0,"small",7),c.qZA(),c.TgZ(15,"div",5),c._UZ(16,"input",10),c.YNc(17,ge,2,0,"small",7),c.qZA(),c.TgZ(18,"div",5),c._UZ(19,"input",11),c.YNc(20,Fe,2,0,"small",7),c.qZA(),c.TgZ(21,"div",5),c._UZ(22,"input",12),c.YNc(23,_t,2,0,"small",7),c.qZA(),c.TgZ(24,"div",5),c._UZ(25,"input",13),c.YNc(26,rt,2,0,"small",7),c.qZA(),c.TgZ(27,"div",5),c.TgZ(28,"input",14),c.NdJ("change",function(Pe){return Ue.upload(Pe)}),c.qZA(),c.qZA(),c.TgZ(29,"h1",15),c._uU(30),c.qZA(),c.TgZ(31,"div",5),c.TgZ(32,"input",16),c.NdJ("ngModelChange",function(Pe){return Ue.captcha=Pe}),c.qZA(),c.qZA(),c.TgZ(33,"button",17),c._uU(34,"Registrar"),c.qZA(),c.qZA(),c.qZA()),2&ze){let vt,Pe,je,nt,It,At,it;c.xp6(5),c.Q6J("formGroup",Ue.grupoControles),c.xp6(3),c.Q6J("ngIf",(null==(vt=Ue.grupoControles.get("nombre"))||null==vt.errors?null:vt.errors.required)&&(null==(vt=Ue.grupoControles.get("nombre"))?null:vt.touched)),c.xp6(3),c.Q6J("ngIf",(null==(Pe=Ue.grupoControles.get("apellido"))||null==Pe.errors?null:Pe.errors.required)&&(null==(Pe=Ue.grupoControles.get("apellido"))?null:Pe.touched)),c.xp6(3),c.Q6J("ngIf",(null==(je=Ue.grupoControles.get("edad"))||null==je.errors?null:je.errors.required)&&(null==(je=Ue.grupoControles.get("edad"))?null:je.touched)),c.xp6(3),c.Q6J("ngIf",(null==(nt=Ue.grupoControles.get("dni"))||null==nt.errors?null:nt.errors.required)&&(null==(nt=Ue.grupoControles.get("dni"))?null:nt.touched)),c.xp6(3),c.Q6J("ngIf",(null==(It=Ue.grupoControles.get("esp"))||null==It.errors?null:It.errors.required)&&(null==(It=Ue.grupoControles.get("esp"))?null:It.touched)),c.xp6(3),c.Q6J("ngIf",(null==(At=Ue.grupoControles.get("mail"))||null==At.errors?null:At.errors.required)&&(null==(At=Ue.grupoControles.get("mail"))?null:At.touched)),c.xp6(3),c.Q6J("ngIf",(null==(it=Ue.grupoControles.get("clave"))||null==it.errors?null:it.errors.required)&&(null==(it=Ue.grupoControles.get("clave"))?null:it.touched)),c.xp6(4),c.Oqu(Ue.cs.palabra),c.xp6(2),c.Q6J("ngModel",Ue.captcha),c.xp6(1),c.Q6J("disabled",Ue.grupoControles.invalid)}},directives:[_._Y,_.JL,_.sg,_.Fj,_.JJ,_.u,Ge.O5,_.wV],styles:['@import"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}body[_ngcontent-%COMP%]{background:#67aadd}.wrapper[_ngcontent-%COMP%]{max-width:350px;min-height:500px;margin:30px auto;padding:40px 30px 30px;background-color:#ecf0f3;border-radius:15px;box-shadow:13px 13px 20px #cbced1,-13px -13px 20px #fff}.logo[_ngcontent-%COMP%]{width:80px;margin:auto}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:80px;object-fit:cover;border-radius:50%;box-shadow:0 0 3px #5f5f5f,0 0 0 5px #ecf0f3,8px 8px 15px #a7aaa7,-8px -8px 15px #fff}.wrapper[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:600;font-size:1.4rem;letter-spacing:1.3px;padding-left:10px;color:#555}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;display:block;border:none;outline:none;background:none;font-size:1.2rem;color:#666;padding:10px 15px 10px 10px}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{padding-left:10px;margin-bottom:20px;border-radius:20px;box-shadow:inset 8px 8px 8px #cbced1,inset -8px -8px 8px #fff}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{color:#555}.wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{box-shadow:none;width:100%;height:40px;background-color:#03a9f4;color:#fff;border-radius:25px;box-shadow:3px 3px 3px #b1b1b1,-3px -3px 3px #fff;letter-spacing:1.3px}.wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#039be5}.wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:.8rem;color:#03a9f4}.wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#039be5}@media (max-width: 380px){.wrapper[_ngcontent-%COMP%]{margin:30px 20px;padding:40px 15px 15px}}']}),ot})()},5108:(rn,Ye,V)=>{V.d(Ye,{U:()=>mt});var _=V(2382),c=V(5e3),J=V(7293),Ee=V(2290),Ie=V(541),Ze=V(8931),Ge=V(9808);function pe(ot,qe){1&ot&&(c.TgZ(0,"small",18),c._uU(1,"El nombre es requerido "),c.qZA())}function ke(ot,qe){1&ot&&(c.TgZ(0,"small",18),c._uU(1,"El apellido es requeridos"),c.qZA())}function fe(ot,qe){1&ot&&(c.TgZ(0,"small",18),c._uU(1,"La edad es requerida"),c.qZA())}function ge(ot,qe){1&ot&&(c.TgZ(0,"small",18),c._uU(1,"El dni es requerido"),c.qZA())}function Fe(ot,qe){1&ot&&(c.TgZ(0,"small",18),c._uU(1,"La obra social es requerida "),c.qZA())}function _t(ot,qe){1&ot&&(c.TgZ(0,"small",18),c._uU(1,"El mail es requerido"),c.qZA())}function rt(ot,qe){1&ot&&(c.TgZ(0,"small",18),c._uU(1,"La clave es requerida"),c.qZA())}let mt=(()=>{class ot{constructor(ze,Ue,vt,Pe,je){this.fb=ze,this.fs=Ue,this.toastr=vt,this.router=Pe,this.cs=je,this.grupoControles=this.fb.group({nombre:["",[_.kI.required]],apellido:["",[_.kI.required]],edad:["",[_.kI.required]],obraSocial:["",[_.kI.required]],dni:["",[_.kI.required]],mail:["",[_.kI.required]],clave:["",[_.kI.required]],foto:[],captcha:["",[_.kI.required]]})}agregarUsuario(){var ze,Ue,vt,Pe,je,nt,It;let At={nombre:null===(ze=this.grupoControles.get("nombre"))||void 0===ze?void 0:ze.value,apellido:null===(Ue=this.grupoControles.get("apellido"))||void 0===Ue?void 0:Ue.value,edad:null===(vt=this.grupoControles.get("edad"))||void 0===vt?void 0:vt.value,obraSocial:null===(Pe=this.grupoControles.get("obraSocial"))||void 0===Pe?void 0:Pe.value,dni:null===(je=this.grupoControles.get("dni"))||void 0===je?void 0:je.value,mail:null===(nt=this.grupoControles.get("mail"))||void 0===nt?void 0:nt.value,clave:null===(It=this.grupoControles.get("clave"))||void 0===It?void 0:It.value,perfil:"paciente",foto:this.foto};this.captcha==this.cs.palabra?(this.fs.agregarUsuario(At),this.toastr.success("Confirme mail ahora!","Usuario registrado!"),this.grupoControles.reset(),setTimeout(()=>{this.router.navigateByUrl("/login")},3e3)):this.toastr.error("Verifique el captcha!","Error en captcha!")}upload(ze){this.foto=ze.target.files[0]}ngOnInit(){}}return ot.\u0275fac=function(ze){return new(ze||ot)(c.Y36(_.qu),c.Y36(J.C),c.Y36(Ee._W),c.Y36(Ie.F0),c.Y36(Ze.n))},ot.\u0275cmp=c.Xpm({type:ot,selectors:[["app-alta-usuario"]],decls:35,vars:11,consts:[[1,"wrapper"],[1,"logo"],["src","../../../assets/paciente.png","alt",""],[1,"text-center","mt-4","name"],[1,"p-3","mt-3",3,"formGroup","ngSubmit"],[1,"form-field","d-flex","align-items-center"],["type","text","name","nombre","formControlName","nombre","placeholder","Nombre"],["class","invalid",4,"ngIf"],["type","text","name","apellido","formControlName","apellido","placeholder","Apellido"],["type","number","name","edad","formControlName","edad","placeholder","Edad"],["type","number","name","dni","formControlName","dni","placeholder","DNI"],["type","text","name","obraSocial","formControlName","obraSocial","placeholder","Obra Social"],["type","text","name","mail","formControlName","mail","placeholder","Mail"],["type","password","name","clave","formControlName","clave","placeholder","Password"],["type","file","name","foro","formControlName","foto","placeholder","Foto",3,"change"],[1,"text-center",2,"margin-bottom","10px","background-color","rgb(150, 248, 105)"],["type","text","name","captcha","formControlName","captcha","placeholder","Captcha",3,"ngModel","ngModelChange"],["type","submit",1,"btn","mt-3",3,"disabled"],[1,"invalid"]],template:function(ze,Ue){if(1&ze&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"img",2),c.qZA(),c.TgZ(3,"div",3),c._uU(4," Registro Paciente "),c.qZA(),c.TgZ(5,"form",4),c.NdJ("ngSubmit",function(){return Ue.agregarUsuario()}),c.TgZ(6,"div",5),c._UZ(7,"input",6),c.YNc(8,pe,2,0,"small",7),c.qZA(),c.TgZ(9,"div",5),c._UZ(10,"input",8),c.YNc(11,ke,2,0,"small",7),c.qZA(),c.TgZ(12,"div",5),c._UZ(13,"input",9),c.YNc(14,fe,2,0,"small",7),c.qZA(),c.TgZ(15,"div",5),c._UZ(16,"input",10),c.YNc(17,ge,2,0,"small",7),c.qZA(),c.TgZ(18,"div",5),c._UZ(19,"input",11),c.YNc(20,Fe,2,0,"small",7),c.qZA(),c.TgZ(21,"div",5),c._UZ(22,"input",12),c.YNc(23,_t,2,0,"small",7),c.qZA(),c.TgZ(24,"div",5),c._UZ(25,"input",13),c.YNc(26,rt,2,0,"small",7),c.qZA(),c.TgZ(27,"div",5),c.TgZ(28,"input",14),c.NdJ("change",function(Pe){return Ue.upload(Pe)}),c.qZA(),c.qZA(),c.TgZ(29,"h1",15),c._uU(30),c.qZA(),c.TgZ(31,"div",5),c.TgZ(32,"input",16),c.NdJ("ngModelChange",function(Pe){return Ue.captcha=Pe}),c.qZA(),c.qZA(),c.TgZ(33,"button",17),c._uU(34,"Registrar"),c.qZA(),c.qZA(),c.qZA()),2&ze){let vt,Pe,je,nt,It,At,it;c.xp6(5),c.Q6J("formGroup",Ue.grupoControles),c.xp6(3),c.Q6J("ngIf",(null==(vt=Ue.grupoControles.get("nombre"))||null==vt.errors?null:vt.errors.required)&&(null==(vt=Ue.grupoControles.get("nombre"))?null:vt.touched)),c.xp6(3),c.Q6J("ngIf",(null==(Pe=Ue.grupoControles.get("apellido"))||null==Pe.errors?null:Pe.errors.required)&&(null==(Pe=Ue.grupoControles.get("apellido"))?null:Pe.touched)),c.xp6(3),c.Q6J("ngIf",(null==(je=Ue.grupoControles.get("edad"))||null==je.errors?null:je.errors.required)&&(null==(je=Ue.grupoControles.get("edad"))?null:je.touched)),c.xp6(3),c.Q6J("ngIf",(null==(nt=Ue.grupoControles.get("dni"))||null==nt.errors?null:nt.errors.required)&&(null==(nt=Ue.grupoControles.get("dni"))?null:nt.touched)),c.xp6(3),c.Q6J("ngIf",(null==(It=Ue.grupoControles.get("obraSocial"))||null==It.errors?null:It.errors.required)&&(null==(It=Ue.grupoControles.get("obraSocial"))?null:It.touched)),c.xp6(3),c.Q6J("ngIf",(null==(At=Ue.grupoControles.get("mail"))||null==At.errors?null:At.errors.required)&&(null==(At=Ue.grupoControles.get("mail"))?null:At.touched)),c.xp6(3),c.Q6J("ngIf",(null==(it=Ue.grupoControles.get("clave"))||null==it.errors?null:it.errors.required)&&(null==(it=Ue.grupoControles.get("clave"))?null:it.touched)),c.xp6(4),c.Oqu(Ue.cs.palabra),c.xp6(2),c.Q6J("ngModel",Ue.captcha),c.xp6(1),c.Q6J("disabled",Ue.grupoControles.invalid)}},directives:[_._Y,_.JL,_.sg,_.Fj,_.JJ,_.u,Ge.O5,_.wV],styles:['@import"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}body[_ngcontent-%COMP%]{background:#67aadd}.wrapper[_ngcontent-%COMP%]{max-width:350px;min-height:500px;margin:30px auto;padding:40px 30px 30px;background-color:#ecf0f3;border-radius:15px;box-shadow:13px 13px 20px #cbced1,-13px -13px 20px #fff}.logo[_ngcontent-%COMP%]{width:80px;margin:auto}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:80px;object-fit:cover;border-radius:50%;box-shadow:0 0 3px #5f5f5f,0 0 0 5px #ecf0f3,8px 8px 15px #a7aaa7,-8px -8px 15px #fff}.wrapper[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:600;font-size:1.4rem;letter-spacing:1.3px;padding-left:10px;color:#555}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;display:block;border:none;outline:none;background:none;font-size:1.2rem;color:#666;padding:10px 15px 10px 10px}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{padding-left:10px;margin-bottom:20px;border-radius:20px;box-shadow:inset 8px 8px 8px #cbced1,inset -8px -8px 8px #fff}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{color:#555}.wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{box-shadow:none;width:100%;height:40px;background-color:#03a9f4;color:#fff;border-radius:25px;box-shadow:3px 3px 3px #b1b1b1,-3px -3px 3px #fff;letter-spacing:1.3px}.wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#039be5}.wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:.8rem;color:#03a9f4}.wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#039be5}@media (max-width: 380px){.wrapper[_ngcontent-%COMP%]{margin:30px 20px;padding:40px 15px 15px}}']}),ot})()},7556:(rn,Ye,V)=>{V.d(Ye,{e:()=>Ie});var _=V(5861),c=V(5e3),J=V(1205),Ee=V(541);let Ie=(()=>{class Ze{constructor(pe,ke){this.afAuth=pe,this.router=ke,this.user=""}sendVerificationEmail(){var pe=this;return(0,_.Z)(function*(){var ke;return null===(ke=yield pe.afAuth.currentUser)||void 0===ke?void 0:ke.sendEmailVerification()})()}login(pe,ke){var fe=this;return(0,_.Z)(function*(){try{const ge=yield fe.afAuth.signInWithEmailAndPassword(pe,ke);return fe.userDateFirebase=ge,console.log(fe.user),ge}catch(ge){return console.log(ge),ge}})()}register(pe,ke){var fe=this;return(0,_.Z)(function*(){try{yield fe.afAuth.createUserWithEmailAndPassword(pe,ke),fe.sendVerificationEmail()}catch(ge){console.log(ge)}})()}logout(){var pe=this;return(0,_.Z)(function*(){try{yield pe.afAuth.signOut().then(()=>{pe.router.navigateByUrl("/login")})}catch(ke){console.log(ke)}})()}}return Ze.\u0275fac=function(pe){return new(pe||Ze)(c.LFG(J.zQ),c.LFG(Ee.F0))},Ze.\u0275prov=c.Yz7({token:Ze,factory:Ze.\u0275fac,providedIn:"root"}),Ze})()},8931:(rn,Ye,V)=>{V.d(Ye,{n:()=>c});var _=V(5e3);let c=(()=>{class J{constructor(){this.palabras=["captcha","palabra","perro","gato","hola","chau"],this.generarCaptcha()}generarCaptcha(){let Ie=Math.floor(6*Math.random()+0);this.palabra=this.palabras[Ie]}}return J.\u0275fac=function(Ie){return new(Ie||J)},J.\u0275prov=_.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})()},7293:(rn,Ye,V)=>{V.d(Ye,{C:()=>Ze});var _=V(3562),c=V(6961),J=V(2731),Ee=V(5e3),Ie=V(7556);let Ze=(()=>{class Ge{constructor(ke,fe){this.Firestore=ke,this.as=fe,this.storage=(0,c.cF)(),this.profesionalCollectionReference=(0,_.hJ)(this.Firestore,"profesionales"),this.pacientesCollectionReference=(0,_.hJ)(this.Firestore,"pacientes"),this.usuariosCollectionReference=(0,_.hJ)(this.Firestore,"usuarios"),this.adminCollectionReference=(0,_.hJ)(this.Firestore,"administradores"),this.turnoCollectionReference=(0,_.hJ)(this.Firestore,"turnos")}agregarProfesional(ke){let fe=(0,c.iH)(this.storage,ke.foto.name);(0,c.KV)(fe,ke.foto).then(ge=>{(0,c.Jt)((0,c.iH)(this.storage,ke.foto.name)).then(Fe=>{ke.foto=Fe,this.as.register(ke.mail,ke.clave).then(()=>((0,_.ET)(this.profesionalCollectionReference,ke),(0,_.ET)(this.usuariosCollectionReference,ke)))}).catch(Fe=>{console.log(Fe)})})}agregarUsuario(ke){let fe=(0,c.iH)(this.storage,ke.foto.name);(0,c.KV)(fe,ke.foto).then(ge=>{(0,c.Jt)((0,c.iH)(this.storage,ke.foto.name)).then(Fe=>{ke.foto=Fe,this.as.register(ke.mail,ke.clave).then(()=>((0,_.ET)(this.pacientesCollectionReference,ke),(0,_.ET)(this.usuariosCollectionReference,ke)))}).catch(Fe=>{console.log(Fe)})})}agregarAdmin(ke){let fe=(0,c.iH)(this.storage,ke.foto.name);(0,c.KV)(fe,ke.foto).then(ge=>{(0,c.Jt)((0,c.iH)(this.storage,ke.foto.name)).then(Fe=>{ke.foto=Fe,this.as.register(ke.mail,ke.clave).then(()=>((0,_.ET)(this.adminCollectionReference,ke),(0,_.ET)(this.usuariosCollectionReference,ke)))}).catch(Fe=>{console.log(Fe)})})}agregarTurno(ke){return(0,_.ET)(this.turnoCollectionReference,ke)}ListaUsuarios(){return(0,_.BS)(this.usuariosCollectionReference,{idField:"id"})}ListaTurnos(){return(0,_.BS)(this.turnoCollectionReference,{idField:"id"})}ListaEspecialistas(){return(0,_.BS)(this.profesionalCollectionReference,{idField:"id"})}ListaPacientes(){return(0,_.BS)(this.pacientesCollectionReference,{idField:"id"})}ModificarUsuario(ke,fe){const ge=(0,J.JU)(this.Firestore,`usuarios/${fe}`);return(0,J.r7)(ge,ke)}ModificarTurno(ke,fe){const ge=(0,J.JU)(this.Firestore,`turnos/${fe}`);return(0,J.r7)(ge,ke)}}return Ge.\u0275fac=function(ke){return new(ke||Ge)(Ee.LFG(_.gg),Ee.LFG(Ie.e))},Ge.\u0275prov=Ee.Yz7({token:Ge,factory:Ge.\u0275fac,providedIn:"root"}),Ge})()},2809:(rn,Ye,V)=>{var _=V(2313),c=V(5e3),J=V(541),Ee=V(2382),Ie=V(7556),Ze=V(7293),Ge=V(2290),pe=V(9808);function ke(i,t){1&i&&(c.TgZ(0,"small",21),c._uU(1,"El correo es requerido "),c.qZA())}function fe(i,t){1&i&&(c.TgZ(0,"small",21),c._uU(1,"La clave es requerida "),c.qZA())}function ge(i,t){1&i&&(c.TgZ(0,"div",22),c._UZ(1,"div",23),c.qZA())}const Fe=function(){return["/registro"]};let _t=(()=>{class i{constructor(e,r,h,g,E){this.fb=e,this.as=r,this.router=h,this.fs=g,this.toastr=E,this.cargando=!1,this.grupoControles=this.fb.group({email:["",[Ee.kI.required]],clave:["",[Ee.kI.required]]}),this.fs.ListaUsuarios().subscribe(S=>{this.usuarios=S}),this.fs.ListaPacientes().subscribe(S=>{this.pacientes=S}),this.fs.ListaEspecialistas().subscribe(S=>{this.profesionales=S})}iniciarSesion(){var e,r;let h={email:null===(e=this.grupoControles.get("email"))||void 0===e?void 0:e.value,clave:null===(r=this.grupoControles.get("clave"))||void 0===r?void 0:r.value},g=this.usuarios.filter(E=>E.mail==h.email);this.cargando=!0,setTimeout(()=>{1==g.length?(this.as.user=g[0],console.log(this.as.user),this.as.login(h.email,h.clave).then(()=>{1==this.as.userDateFirebase.user.emailVerified?"profesional"==this.as.user.perfil?this.as.user.habilitado?(this.toastr.success("disfrute del sistema!","Bienvenido!"),this.router.navigateByUrl("/principal")):this.toastr.error("Espere la habilitacion del administrador!","profesional NO HABILITADO!"):(this.toastr.success("disfrute del sistema!","Bienvenido!"),this.router.navigateByUrl("/principal")):this.toastr.error("Verifique su casilla de correo!","Correo NO CONFIRMADO!")})):this.toastr.error("Verifique si los datos son correctos!","ERROR EN LOS DATOS!"),this.cargando=!1},2e3)}inicioRapido(e){var r,h,g,E,S,R,G,re,be,Ae,st,Tt;switch(e){case 1:null===(r=this.grupoControles.get("email"))||void 0===r||r.setValue(`${this.pacientes[0].mail}`),null===(h=this.grupoControles.get("clave"))||void 0===h||h.setValue("123456789");break;case 2:null===(g=this.grupoControles.get("email"))||void 0===g||g.setValue(`${this.pacientes[1].mail}`),null===(E=this.grupoControles.get("clave"))||void 0===E||E.setValue("123456789");break;case 3:null===(S=this.grupoControles.get("email"))||void 0===S||S.setValue(`${this.pacientes[2].mail}`),null===(R=this.grupoControles.get("clave"))||void 0===R||R.setValue("123456789");break;case 4:null===(G=this.grupoControles.get("email"))||void 0===G||G.setValue(`${this.profesionales[0].mail}`),null===(re=this.grupoControles.get("clave"))||void 0===re||re.setValue("123456789");break;case 5:null===(be=this.grupoControles.get("email"))||void 0===be||be.setValue(`${this.profesionales[1].mail}`),null===(Ae=this.grupoControles.get("clave"))||void 0===Ae||Ae.setValue("123456789");break;case 6:null===(st=this.grupoControles.get("email"))||void 0===st||st.setValue("jeyesis426@adroh.com"),null===(Tt=this.grupoControles.get("clave"))||void 0===Tt||Tt.setValue("123456789")}}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)(c.Y36(Ee.qu),c.Y36(Ie.e),c.Y36(J.F0),c.Y36(Ze.C),c.Y36(Ge._W))},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-login"]],decls:36,vars:12,consts:[[1,"wrapper"],[1,"logo"],["src","../../../assets/3140366.png","alt",""],[1,"text-center","mt-4","name"],[1,"p-3","mt-3",3,"formGroup","ngSubmit"],[1,"form-field","d-flex","align-items-center"],["type","text","name","userName","placeholder","Correo","formControlName","email"],["class","invalid",4,"ngIf"],["type","password","name","password","placeholder","Clave","formControlName","clave"],["class","d-flex justify-content-center",4,"ngIf"],[1,"btn","mt-3",3,"disabled"],[1,"text-center","fs-6"],[3,"routerLink"],[2,"border","3px solid rgb(153, 145, 145)","margin-top","20px"],[1,"text-center","fs-6",2,"margin-top","10px"],[2,"text-decoration","underline"],[1,"text-center","fs-6",2,"margin-top","20px"],[1,"row","align-items-start"],[1,"col","logo",2,"margin-bottom","20px"],["alt","...",1,"card-img-top",2,"height","80px","width","80px",3,"src","click"],["src","../../../assets/admin.png","alt","...",1,"card-img-top",2,"height","80px","width","80px",3,"click"],[1,"invalid"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"]],template:function(e,r){if(1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"img",2),c.qZA(),c.TgZ(3,"div",3),c._uU(4," Clinica OnLine "),c.qZA(),c.TgZ(5,"form",4),c.NdJ("ngSubmit",function(){return r.iniciarSesion()}),c.TgZ(6,"div",5),c._UZ(7,"input",6),c.YNc(8,ke,2,0,"small",7),c.qZA(),c.TgZ(9,"div",5),c._UZ(10,"input",8),c.YNc(11,fe,2,0,"small",7),c.qZA(),c.YNc(12,ge,2,0,"div",9),c.TgZ(13,"button",10),c._uU(14,"Ingresar"),c.qZA(),c.qZA(),c.TgZ(15,"div",11),c.TgZ(16,"a",12),c._uU(17,"Registarse"),c.qZA(),c.qZA(),c.TgZ(18,"div",13),c.TgZ(19,"div",14),c.TgZ(20,"h2",15),c._uU(21,"Inicio Rapido"),c.qZA(),c.qZA(),c.TgZ(22,"div",16),c.TgZ(23,"div",17),c.TgZ(24,"div",18),c.TgZ(25,"img",19),c.NdJ("click",function(){return r.inicioRapido(1)}),c.qZA(),c.qZA(),c.TgZ(26,"div",18),c.TgZ(27,"img",19),c.NdJ("click",function(){return r.inicioRapido(2)}),c.qZA(),c.qZA(),c.TgZ(28,"div",18),c.TgZ(29,"img",19),c.NdJ("click",function(){return r.inicioRapido(3)}),c.qZA(),c.qZA(),c.TgZ(30,"div",18),c.TgZ(31,"img",19),c.NdJ("click",function(){return r.inicioRapido(4)}),c.qZA(),c.qZA(),c.TgZ(32,"div",18),c.TgZ(33,"img",19),c.NdJ("click",function(){return r.inicioRapido(5)}),c.qZA(),c.qZA(),c.TgZ(34,"div",18),c.TgZ(35,"img",20),c.NdJ("click",function(){return r.inicioRapido(6)}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){let h,g;c.xp6(5),c.Q6J("formGroup",r.grupoControles),c.xp6(3),c.Q6J("ngIf",(null==(h=r.grupoControles.get("email"))||null==h.errors?null:h.errors.required)&&(null==(h=r.grupoControles.get("email"))?null:h.touched)),c.xp6(3),c.Q6J("ngIf",(null==(g=r.grupoControles.get("clave"))||null==g.errors?null:g.errors.required)&&(null==(g=r.grupoControles.get("clave"))?null:g.touched)),c.xp6(1),c.Q6J("ngIf",r.cargando),c.xp6(1),c.Q6J("disabled",r.grupoControles.invalid),c.xp6(3),c.Q6J("routerLink",c.DdM(11,Fe)),c.xp6(9),c.s9C("src",r.pacientes[0].foto,c.LSH),c.xp6(2),c.s9C("src",r.pacientes[1].foto,c.LSH),c.xp6(2),c.s9C("src",r.pacientes[2].foto,c.LSH),c.xp6(2),c.s9C("src",r.profesionales[0].foto,c.LSH),c.xp6(2),c.s9C("src",r.profesionales[1].foto,c.LSH)}},directives:[Ee._Y,Ee.JL,Ee.sg,Ee.Fj,Ee.JJ,Ee.u,pe.O5,J.yS],styles:['@import"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}body[_ngcontent-%COMP%]{background:#67aadd}.wrapper[_ngcontent-%COMP%]{max-width:350px;min-height:500px;margin:80px auto;padding:40px 30px 30px;background-color:#ecf0f3;border-radius:15px;box-shadow:13px 13px 20px #cbced1,-13px -13px 20px #fff}.logo[_ngcontent-%COMP%]{width:80px;margin:auto}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:80px;object-fit:cover;border-radius:50%;box-shadow:0 0 3px #5f5f5f,0 0 0 5px #ecf0f3,8px 8px 15px #a7aaa7,-8px -8px 15px #fff}.wrapper[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:600;font-size:1.4rem;letter-spacing:1.3px;padding-left:10px;color:#555}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;display:block;border:none;outline:none;background:none;font-size:1.2rem;color:#666;padding:10px 15px 10px 10px}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{padding-left:10px;margin-bottom:20px;border-radius:20px;box-shadow:inset 8px 8px 8px #cbced1,inset -8px -8px 8px #fff}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{color:#555}.wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{box-shadow:none;width:100%;height:40px;background-color:#03a9f4;color:#fff;border-radius:25px;box-shadow:3px 3px 3px #b1b1b1,-3px -3px 3px #fff;letter-spacing:1.3px}.wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#039be5}.wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:.8rem;color:#03a9f4}.wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#039be5}@media (max-width: 380px){.wrapper[_ngcontent-%COMP%]{margin:30px 20px;padding:40px 15px 15px}}']}),i})();var rt=V(8306),mt=V(515),ot=V(9646),qe=V(7579),ze=V(8421),Ue=V(5577),vt=V(1144),Pe=V(576),je=V(3268);const nt=["addListener","removeListener"],It=["addEventListener","removeEventListener"],At=["on","off"];function it(i,t,e,r){if((0,Pe.m)(e)&&(r=e,e=void 0),r)return it(i,t,e).pipe((0,je.Z)(r));const[h,g]=function dt(i){return(0,Pe.m)(i.addEventListener)&&(0,Pe.m)(i.removeEventListener)}(i)?It.map(E=>S=>i[E](t,S,e)):function We(i){return(0,Pe.m)(i.addListener)&&(0,Pe.m)(i.removeListener)}(i)?nt.map(Ne(i,t)):function Qe(i){return(0,Pe.m)(i.on)&&(0,Pe.m)(i.off)}(i)?At.map(Ne(i,t)):[];if(!h&&(0,vt.z)(i))return(0,Ue.z)(E=>it(E,t,e))((0,ze.Xf)(i));if(!h)throw new TypeError("Invalid event target");return new rt.y(E=>{const S=(...R)=>E.next(1<R.length?R:R[0]);return h(S),()=>g(S)})}function Ne(i,t){return e=>r=>i[e](t,r)}var wt=V(4986),at=V(3532);const{isArray:wn}=Array;function $t(i){return 1===i.length&&wn(i[0])?i[0]:i}var qt=V(5403);var pt=V(1135),Le=(V(9841),V(5032));new rt.y(Le.Z);var Mn=V(3269);function Kn(...i){const t=(0,Mn.jO)(i),e=$t(i);return e.length?new rt.y(r=>{let h=e.map(()=>[]),g=e.map(()=>!1);r.add(()=>{h=g=null});for(let E=0;!r.closed&&E<e.length;E++)(0,ze.Xf)(e[E]).subscribe(new qt.Q(r,S=>{if(h[E].push(S),h.every(R=>R.length)){const R=h.map(G=>G.shift());r.next(t?t(...R):R),h.some((G,re)=>!G.length&&g[re])&&r.complete()}},()=>{g[E]=!0,!h[E].length&&r.complete()}));return()=>{h=g=null}}):mt.E}var ii=V(7272),Ei=V(4482);function $n(i){return(0,Ei.e)((t,e)=>{(0,ze.Xf)(i).subscribe(new qt.Q(e,()=>e.complete(),Le.Z)),!e.closed&&t.subscribe(e)})}var Nt=V(9300),hi=V(5698),Jt=V(4004),Yn=V(8675),Ht=V(4671);function kn(i,t=Ht.y){return i=null!=i?i:Ti,(0,Ei.e)((e,r)=>{let h,g=!0;e.subscribe(new qt.Q(r,E=>{const S=t(E);(g||!i(h,S))&&(g=!1,h=S,r.next(E))}))})}function Ti(i,t){return i===t}var Vi=V(3900),Zi=V(8505);function Ai(...i){const t=(0,Mn.jO)(i);return(0,Ei.e)((e,r)=>{const h=i.length,g=new Array(h);let E=i.map(()=>!1),S=!1;for(let R=0;R<h;R++)(0,ze.Xf)(i[R]).subscribe(new qt.Q(r,G=>{g[R]=G,!S&&!E[R]&&(E[R]=!0,(S=E.every(Ht.y))&&(E=null))},Le.Z));e.subscribe(new qt.Q(r,R=>{if(S){const G=[R,...g];r.next(t?t(...G):G)}}))})}Math,Math,Math;const Qi=["*"],ul=["dialog"];function zs(i){return"string"==typeof i}function fr(i){return null!=i}function ut(i){return(i||document.body).getBoundingClientRect()}const Pa={animation:!0,transitionTimerDelayMs:5},yo=()=>{},{transitionTimerDelayMs:Fa}=Pa,Ro=new Map,Ui=(i,t,e,r)=>{let h=r.context||{};const g=Ro.get(t);if(g)switch(r.runningTransition){case"continue":return mt.E;case"stop":i.run(()=>g.transition$.complete()),h=Object.assign(g.context,h),Ro.delete(t)}const E=e(t,r.animation,h)||yo;if(!r.animation||"none"===window.getComputedStyle(t).transitionProperty)return i.run(()=>E()),(0,ot.of)(void 0).pipe(function qo(i){return t=>new rt.y(e=>t.subscribe({next:E=>i.run(()=>e.next(E)),error:E=>i.run(()=>e.error(E)),complete:()=>i.run(()=>e.complete())}))}(i));const S=new qe.x,R=new qe.x,G=S.pipe(function Ki(...i){return t=>(0,ii.z)(t,(0,ot.of)(...i))}(!0));Ro.set(t,{transition$:S,complete:()=>{R.next(),R.complete()},context:h});const re=function pl(i){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(i);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return i.runOutsideAngular(()=>{const be=it(t,"transitionend").pipe($n(G),(0,Nt.h)(({target:st})=>st===t));(function Nn(...i){return 1===(i=$t(i)).length?(0,ze.Xf)(i[0]):new rt.y(function bn(i){return t=>{let e=[];for(let r=0;e&&!t.closed&&r<i.length;r++)e.push((0,ze.Xf)(i[r]).subscribe(new qt.Q(t,h=>{if(e){for(let g=0;g<e.length;g++)g!==r&&e[g].unsubscribe();e=null}t.next(h)})))}}(i))})(function tn(i=0,t,e=wt.P){let r=-1;return null!=t&&((0,at.K)(t)?e=t:r=t),new rt.y(h=>{let g=function In(i){return i instanceof Date&&!isNaN(i)}(i)?+i-e.now():i;g<0&&(g=0);let E=0;return e.schedule(function(){h.closed||(h.next(E++),0<=r?this.schedule(void 0,r):h.complete())},g)})}(re+Fa).pipe($n(G)),be,R).pipe($n(G)).subscribe(()=>{Ro.delete(t),i.run(()=>{E(),S.next(),S.complete()})})}),S.asObservable()};let no=(()=>{class i{constructor(){this.animation=Pa.animation}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),bo=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[pe.ez]]}),i})(),Br=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[pe.ez]]}),i})(),Es=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({}),i})(),Fu=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[pe.ez]]}),i})(),Va=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({}),i})();var Mr=(()=>{return(i=Mr||(Mr={}))[i.Tab=9]="Tab",i[i.Enter=13]="Enter",i[i.Escape=27]="Escape",i[i.Space=32]="Space",i[i.PageUp=33]="PageUp",i[i.PageDown=34]="PageDown",i[i.End=35]="End",i[i.Home=36]="Home",i[i.ArrowLeft=37]="ArrowLeft",i[i.ArrowUp=38]="ArrowUp",i[i.ArrowRight=39]="ArrowRight",i[i.ArrowDown=40]="ArrowDown",Mr;var i})();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const io=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function vd(i){const t=Array.from(i.querySelectorAll(io)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let wc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[pe.ez,Ee.u5]]}),i})(),ag=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=c.lG2({type:i,selectors:[["",8,"navbar"]]}),i})(),Rf=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({}),i})();class Wu{constructor(t,e,r){this.nodes=t,this.viewRef=e,this.componentRef=r}}let Ov=(()=>{class i{constructor(e,r){this._el=e,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe((0,hi.q)(1)).subscribe(()=>{Ui(this._zone,this._el.nativeElement,(e,r)=>{r&&ut(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Ui(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return i.\u0275fac=function(e){return new(e||i)(c.Y36(c.SBq),c.Y36(c.R0b))},i.\u0275cmp=c.Xpm({type:i,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(e,r){2&e&&(c.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),c.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,r){},encapsulation:2}),i})();class r_{close(t){}dismiss(t){}}class qu{constructor(t,e,r,h){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=r,this._beforeDismiss=h,this._closed=new qe.x,this._dismissed=new qe.x,this._hidden=new qe.x,t.instance.dismissEvent.subscribe(g=>{this.dismiss(g)}),this.result=new Promise((g,E)=>{this._resolve=g,this._reject=E}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe($n(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe($n(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function ya(i){return i&&i.then}(e)?!1!==e&&this._dismiss(t):e.then(r=>{!1!==r&&this._dismiss(t)},()=>{})}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,ot.of)(void 0);t.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Kn(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var sl=(()=>{return(i=sl||(sl={}))[i.BACKDROP_CLICK=0]="BACKDROP_CLICK",i[i.ESC=1]="ESC",sl;var i})();let Rv=(()=>{class i{constructor(e,r,h){this._document=e,this._elRef=r,this._zone=h,this._closed$=new qe.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new c.vpe,this.shown=new qe.x,this.hidden=new qe.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":zs(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,hi.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,r={animation:this.animation,runningTransition:"stop"},E=Kn(Ui(this._zone,e,()=>e.classList.remove("show"),r),Ui(this._zone,this._dialogEl.nativeElement,()=>{},r));return E.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),E}_show(){const e={animation:this.animation,runningTransition:"continue"};Kn(Ui(this._zone,this._elRef.nativeElement,(g,E)=>{E&&ut(g),g.classList.add("show")},e),Ui(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{it(e,"keydown").pipe($n(this._closed$),(0,Nt.h)(h=>h.which===Mr.Escape)).subscribe(h=>{this.keyboard?requestAnimationFrame(()=>{h.defaultPrevented||this._zone.run(()=>this.dismiss(sl.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;it(this._dialogEl.nativeElement,"mousedown").pipe($n(this._closed$),(0,Zi.b)(()=>r=!1),(0,Vi.w)(()=>it(e,"mouseup").pipe($n(this._closed$),(0,hi.q)(1))),(0,Nt.h)(({target:h})=>e===h)).subscribe(()=>{r=!0}),it(e,"click").pipe($n(this._closed$)).subscribe(({target:h})=>{e===h&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(sl.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const r=e.querySelector("[ngbAutofocus]"),h=vd(e)[0];(r||h||e).focus()}}_restoreFocus(){const e=this._document.body,r=this._elWithFocus;let h;h=r&&r.focus&&e.contains(r)?r:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>h.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Ui(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return i.\u0275fac=function(e){return new(e||i)(c.Y36(pe.K0),c.Y36(c.SBq),c.Y36(c.R0b))},i.\u0275cmp=c.Xpm({type:i,selectors:[["ngb-modal-window"]],viewQuery:function(e,r){if(1&e&&c.Gf(ul,7),2&e){let h;c.iGM(h=c.CRH())&&(r._dialogEl=h.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,r){2&e&&(c.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),c.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),c.ekj("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:Qi,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,r){1&e&&(c.F$t(),c.TgZ(0,"div",0,1),c.TgZ(2,"div",2),c.Hsn(3),c.qZA(),c.qZA()),2&e&&c.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),i})(),kv=(()=>{class i{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,h=r.style,{overflow:g,paddingRight:E}=h;if(e>0){const S=parseFloat(window.getComputedStyle(r).paddingRight);h.paddingRight=`${S+e}px`}return h.overflow="hidden",()=>{e>0&&(h.paddingRight=E),h.overflow=g}}}return i.\u0275fac=function(e){return new(e||i)(c.LFG(pe.K0))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Md=(()=>{class i{constructor(e,r,h,g,E,S){this._applicationRef=e,this._injector=r,this._document=h,this._scrollBar=g,this._rendererFactory=E,this._ngZone=S,this._activeWindowCmptHasChanged=new qe.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new c.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const R=this._windowCmpts[this._windowCmpts.length-1];((i,t,e,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const h=it(t,"focusin").pipe($n(e),(0,Jt.U)(g=>g.target));it(t,"keydown").pipe($n(e),(0,Nt.h)(g=>g.which===Mr.Tab),Ai(h)).subscribe(([g,E])=>{const[S,R]=vd(t);(E===S||E===t)&&g.shiftKey&&(R.focus(),g.preventDefault()),E===R&&!g.shiftKey&&(S.focus(),g.preventDefault())}),r&&it(t,"click").pipe($n(e),Ai(h),(0,Jt.U)(g=>g[1])).subscribe(g=>g.focus())})})(0,R.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(R.location.nativeElement)}})}_restoreScrollBar(){const e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,r,h,g){const E=g.container instanceof HTMLElement?g.container:fr(g.container)?this._document.querySelector(g.container):this._document.body,S=this._rendererFactory.createRenderer(null,null);if(!E)throw new Error(`The specified modal container "${g.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const R=new r_,G=this._getContentRef(e,g.injector||r,h,R,g);let re=!1!==g.backdrop?this._attachBackdrop(e,E):void 0,be=this._attachWindowComponent(e,E,G),Ae=new qu(be,G,re,g.beforeDismiss);return this._registerModalRef(Ae),this._registerWindowCmpt(be),Ae.hidden.pipe((0,hi.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(S.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),R.close=st=>{Ae.close(st)},R.dismiss=st=>{Ae.dismiss(st)},this._applyWindowOptions(be.instance,g),1===this._modalRefs.length&&S.addClass(this._document.body,"modal-open"),re&&re.instance&&(this._applyBackdropOptions(re.instance,g),re.changeDetectorRef.detectChanges()),be.changeDetectorRef.detectChanges(),Ae}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(r=>r.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,r){let g=e.resolveComponentFactory(Ov).create(this._injector);return this._applicationRef.attachView(g.hostView),r.appendChild(g.location.nativeElement),g}_attachWindowComponent(e,r,h){let E=e.resolveComponentFactory(Rv).create(this._injector,h.nodes);return this._applicationRef.attachView(E.hostView),r.appendChild(E.location.nativeElement),E}_applyWindowOptions(e,r){this._windowAttributes.forEach(h=>{fr(r[h])&&(e[h]=r[h])})}_applyBackdropOptions(e,r){this._backdropAttributes.forEach(h=>{fr(r[h])&&(e[h]=r[h])})}_getContentRef(e,r,h,g,E){return h?h instanceof c.Rgc?this._createFromTemplateRef(h,g):zs(h)?this._createFromString(h):this._createFromComponent(e,r,h,g,E):new Wu([])}_createFromTemplateRef(e,r){const g=e.createEmbeddedView({$implicit:r,close(E){r.close(E)},dismiss(E){r.dismiss(E)}});return this._applicationRef.attachView(g),new Wu([g.rootNodes],g)}_createFromString(e){const r=this._document.createTextNode(`${e}`);return new Wu([[r]])}_createFromComponent(e,r,h,g,E){const S=e.resolveComponentFactory(h),R=c.zs3.create({providers:[{provide:r_,useValue:g}],parent:r}),G=S.create(R),re=G.location.nativeElement;return E.scrollable&&re.classList.add("component-host-scrollable"),this._applicationRef.attachView(G.hostView),new Wu([[re]],G.hostView,G)}_setAriaHidden(e){const r=e.parentElement;r&&e!==this._document.body&&(Array.from(r.children).forEach(h=>{h!==e&&"SCRIPT"!==h.nodeName&&(this._ariaHiddenValues.set(h,h.getAttribute("aria-hidden")),h.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,r)=>{e?r.setAttribute("aria-hidden",e):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const r=()=>{const h=this._modalRefs.indexOf(e);h>-1&&(this._modalRefs.splice(h,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(r,r)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const r=this._windowCmpts.indexOf(e);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return i.\u0275fac=function(e){return new(e||i)(c.LFG(c.z2F),c.LFG(c.zs3),c.LFG(pe.K0),c.LFG(kv),c.LFG(c.FYo),c.LFG(c.R0b))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Cl=(()=>{class i{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return i.\u0275fac=function(e){return new(e||i)(c.LFG(no))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),aa=(()=>{class i{constructor(e,r,h,g){this._moduleCFR=e,this._injector=r,this._modalStack=h,this._config=g}open(e,r={}){const h=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._moduleCFR,this._injector,e,h)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return i.\u0275fac=function(e){return new(e||i)(c.LFG(c._Vd),c.LFG(c.zs3),c.LFG(Md),c.LFG(Cl))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Pv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({providers:[aa]}),i})(),dg=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[pe.ez]]}),i})(),pg=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[pe.ez]]}),i})(),Dc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[pe.ez]]}),i})(),kd=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[pe.ez]]}),i})(),wh=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[pe.ez]]}),i})(),bg=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[pe.ez]]}),i})(),f_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[pe.ez]]}),i})(),p_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({}),i})();new c.OlP("live announcer delay",{providedIn:"root",factory:function g_(){return 100}});let Sh=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[pe.ez]]}),i})(),Sc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({}),i})();const Zf=[bo,Br,Es,Fu,Va,wc,Rf,Pv,dg,Sc,pg,Dc,kd,wh,bg,f_,p_,Sh];let Nc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[Zf,bo,Br,Es,Fu,Va,wc,Rf,Pv,dg,Sc,pg,Dc,kd,wh,bg,f_,p_,Sh]}),i})();const Dg=function(){return["/usuarios"]};function v_(i,t){1&i&&(c.TgZ(0,"li",4),c.TgZ(1,"a",5),c._uU(2,"Usuarios"),c.qZA(),c.qZA()),2&i&&(c.xp6(1),c.Q6J("routerLink",c.DdM(1,Dg)))}const Ig=function(){return["/misturnos"]};function Ag(i,t){1&i&&(c.TgZ(0,"li",4),c.TgZ(1,"a",5),c._uU(2,"Mis turnos"),c.qZA(),c.qZA()),2&i&&(c.xp6(1),c.Q6J("routerLink",c.DdM(1,Ig)))}const Sg=function(){return["/principal"]},OE=function(){return["/perfil"]};let uu=(()=>{class i{constructor(e){this.as=e}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)(c.Y36(Ie.e))},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-nav"]],decls:22,vars:8,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container-fluid"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],[1,"nav-link",3,"routerLink"],["class","nav-item",4,"ngIf"],[1,"navbar-nav","my-2","my-lg-0"],[1,"nav-link"],[1,"btn","btn-outline-success",3,"click"]],template:function(e,r){1&e&&(c.TgZ(0,"nav",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"ul",3),c.TgZ(4,"li",4),c.TgZ(5,"a",5),c._uU(6,"Inicio"),c.qZA(),c.qZA(),c.TgZ(7,"li",4),c.TgZ(8,"a",5),c._uU(9,"Perfil"),c.qZA(),c.qZA(),c.YNc(10,v_,3,2,"li",6),c.YNc(11,Ag,3,2,"li",6),c.qZA(),c.TgZ(12,"ul",7),c.TgZ(13,"li",4),c.TgZ(14,"a",8),c._uU(15),c.qZA(),c.qZA(),c.TgZ(16,"li",4),c.TgZ(17,"a",8),c._uU(18),c.qZA(),c.qZA(),c.TgZ(19,"li",4),c.TgZ(20,"button",9),c.NdJ("click",function(){return r.as.logout()}),c._uU(21,"Cerrar Sesion"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(5),c.Q6J("routerLink",c.DdM(6,Sg)),c.xp6(3),c.Q6J("routerLink",c.DdM(7,OE)),c.xp6(2),c.Q6J("ngIf","administrador"==r.as.user.perfil),c.xp6(1),c.Q6J("ngIf","paciente"==r.as.user.perfil),c.xp6(4),c.Oqu(r.as.user.perfil),c.xp6(3),c.Oqu(r.as.user.mail))},directives:[ag,J.yS,pe.O5],styles:[""]}),i})();const Wf=new c.OlP("cdk-dir-doc",{providedIn:"root",factory:function qf(){return(0,c.f3M)(pe.K0)}}),Mc=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Mg,Hv=(()=>{class i{constructor(e){if(this.value="ltr",this.change=new c.vpe,e){const h=e.documentElement?e.documentElement.dir:null;this.value=function ed(i){const t=(null==i?void 0:i.toLowerCase())||"";return"auto"===t&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?Mc.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||h||"ltr")}}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(e){return new(e||i)(c.LFG(Wf,8))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),b_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({}),i})();try{Mg="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(i){Mg=!1}let Fd,Kf,zf=(()=>{class i{constructor(e){this._platformId=e,this.isBrowser=this._platformId?(0,pe.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Mg)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(e){return new(e||i)(c.LFG(c.Lbi))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function td(i){return function zv(){if(null==Fd&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Fd=!0}))}finally{Fd=Fd||!1}return Fd}()?i:!!i.capture}function Ld(i){return i.composedPath?i.composedPath()[0]:i.target}function Vh(i){return null!=i&&"false"!=`${i}`}function pu(i,t=0){return function ty(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):t}function ap(i){return i instanceof c.SBq?i.nativeElement:i}const gu=new c.OlP("cdk-input-modality-detector-options"),hp={ignoreKeys:[18,17,224,91,16]},Xl=td({passive:!0,capture:!0});let id=(()=>{class i{constructor(e,r,h,g){this._platform=e,this._mostRecentTarget=null,this._modality=new pt.X(null),this._lastTouchMs=0,this._onKeydown=E=>{var S,R;(null===(R=null===(S=this._options)||void 0===S?void 0:S.ignoreKeys)||void 0===R?void 0:R.some(G=>G===E.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Ld(E))},this._onMousedown=E=>{Date.now()-this._lastTouchMs<650||(this._modality.next(function Gh(i){return 0===i.buttons||0===i.offsetX&&0===i.offsetY}(E)?"keyboard":"mouse"),this._mostRecentTarget=Ld(E))},this._onTouchstart=E=>{!function Vo(i){const t=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}(E)?(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ld(E)):this._modality.next("keyboard")},this._options=Object.assign(Object.assign({},hp),g),this.modalityDetected=this._modality.pipe(function gn(i){return(0,Nt.h)((t,e)=>i<=e)}(1)),this.modalityChanged=this.modalityDetected.pipe(kn()),e.isBrowser&&r.runOutsideAngular(()=>{h.addEventListener("keydown",this._onKeydown,Xl),h.addEventListener("mousedown",this._onMousedown,Xl),h.addEventListener("touchstart",this._onTouchstart,Xl)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Xl),document.removeEventListener("mousedown",this._onMousedown,Xl),document.removeEventListener("touchstart",this._onTouchstart,Xl))}}return i.\u0275fac=function(e){return new(e||i)(c.LFG(zf),c.LFG(c.R0b),c.LFG(pe.K0),c.LFG(gu,8))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const sd=new c.OlP("cdk-focus-monitor-default-options"),ec=td({passive:!0,capture:!0});let tc=(()=>{class i{constructor(e,r,h,g,E){this._ngZone=e,this._platform=r,this._inputModalityDetector=h,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new qe.x,this._rootNodeFocusAndBlurListener=S=>{const R=Ld(S),G="focus"===S.type?this._onFocus:this._onBlur;for(let re=R;re;re=re.parentElement)G.call(this,S,re)},this._document=g,this._detectionMode=(null==E?void 0:E.detectionMode)||0}monitor(e,r=!1){const h=ap(e);if(!this._platform.isBrowser||1!==h.nodeType)return(0,ot.of)(null);const g=function Yf(i){if(function E_(){if(null==Kf){const i="undefined"!=typeof document?document.head:null;Kf=!(!i||!i.createShadowRoot&&!i.attachShadow)}return Kf}()){const t=i.getRootNode?i.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(h)||this._getDocument(),E=this._elementInfo.get(h);if(E)return r&&(E.checkChildren=!0),E.subject;const S={checkChildren:r,subject:new qe.x,rootNode:g};return this._elementInfo.set(h,S),this._registerGlobalListeners(S),S.subject}stopMonitoring(e){const r=ap(e),h=this._elementInfo.get(r);h&&(h.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(h))}focusVia(e,r,h){const g=ap(e);g===this._getDocument().activeElement?this._getClosestElementsInfo(g).forEach(([S,R])=>this._originChanged(S,r,R)):(this._setOrigin(r),"function"==typeof g.focus&&g.focus(h))}ngOnDestroy(){this._elementInfo.forEach((e,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,r){e.classList.toggle("cdk-focused",!!r),e.classList.toggle("cdk-touch-focused","touch"===r),e.classList.toggle("cdk-keyboard-focused","keyboard"===r),e.classList.toggle("cdk-mouse-focused","mouse"===r),e.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(e,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,r){const h=this._elementInfo.get(r),g=Ld(e);!h||!h.checkChildren&&r!==g||this._originChanged(r,this._getFocusOrigin(g),h)}_onBlur(e,r){const h=this._elementInfo.get(r);!h||h.checkChildren&&e.relatedTarget instanceof Node&&r.contains(e.relatedTarget)||(this._setClasses(r),this._emitOrigin(h.subject,null))}_emitOrigin(e,r){this._ngZone.run(()=>e.next(r))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const r=e.rootNode,h=this._rootNodeFocusListenerCount.get(r)||0;h||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,ec),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,ec)}),this._rootNodeFocusListenerCount.set(r,h+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe($n(this._stopInputModalityDetector)).subscribe(g=>{this._setOrigin(g,!0)}))}_removeGlobalListeners(e){const r=e.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const h=this._rootNodeFocusListenerCount.get(r);h>1?this._rootNodeFocusListenerCount.set(r,h-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ec),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ec),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,r,h){this._setClasses(e,r),this._emitOrigin(h.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(e){const r=[];return this._elementInfo.forEach((h,g)=>{(g===e||h.checkChildren&&g.contains(e))&&r.push([g,h])}),r}}return i.\u0275fac=function(e){return new(e||i)(c.LFG(c.R0b),c.LFG(zf),c.LFG(id),c.LFG(pe.K0,8),c.LFG(sd,8))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ts="cdk-high-contrast-black-on-white",Eo="cdk-high-contrast-white-on-black",Ga="cdk-high-contrast-active";let dy=(()=>{class i{constructor(e,r){this._platform=e,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const r=this._document.defaultView||window,h=r&&r.getComputedStyle?r.getComputedStyle(e):null,g=(h&&h.backgroundColor||"").replace(/ /g,"");switch(e.remove(),g){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(Ga),e.remove(Ts),e.remove(Eo),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(e.add(Ga),e.add(Ts)):2===r&&(e.add(Ga),e.add(Eo))}}}return i.\u0275fac=function(e){return new(e||i)(c.LFG(zf),c.LFG(pe.K0))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const D0=new c.OlP("mat-sanity-checks",{providedIn:"root",factory:function w0(){return!0}});let im=(()=>{class i{constructor(e,r,h){this._sanityChecks=r,this._document=h,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!function T_(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return i.\u0275fac=function(e){return new(e||i)(c.LFG(dy),c.LFG(D0,8),c.LFG(pe.K0))},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[b_],b_]}),i})();function my(i){return class extends i{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Vh(t)}}}function _y(i,t){return class extends i{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const r=e||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function Zh(i,t=0){return class extends i{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?pu(e):this.defaultTabIndex}}}var Zr=V(1777);function vp(){return"undefined"!=typeof window&&void 0!==window.document}function od(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function nc(i){switch(i.length){case 0:return new Zr.ZN;case 1:return i[0];default:return new Zr.ZE(i)}}function Rc(i,t,e,r,h={},g={}){const E=[],S=[];let R=-1,G=null;if(r.forEach(re=>{const be=re.offset,Ae=be==R,st=Ae&&G||{};Object.keys(re).forEach(Tt=>{let Pt=Tt,un=re[Tt];if("offset"!==Tt)switch(Pt=t.normalizePropertyName(Pt,E),un){case Zr.k1:un=h[Tt];break;case Zr.l3:un=g[Tt];break;default:un=t.normalizeStyleValue(Tt,Pt,un,E)}st[Pt]=un}),Ae||S.push(st),G=st,R=be}),E.length){const re="\n - ";throw new Error(`Unable to animate due to the following errors:${re}${E.join(re)}`)}return S}function Jd(i,t,e,r){switch(t){case"start":i.onStart(()=>r(e&&vu(e,"start",i)));break;case"done":i.onDone(()=>r(e&&vu(e,"done",i)));break;case"destroy":i.onDestroy(()=>r(e&&vu(e,"destroy",i)))}}function vu(i,t,e){const r=e.totalTime,g=Kh(i.element,i.triggerName,i.fromState,i.toState,t||i.phaseName,null==r?i.totalTime:r,!!e.disabled),E=i._data;return null!=E&&(g._data=E),g}function Kh(i,t,e,r,h="",g=0,E){return{element:i,triggerName:t,fromState:e,toState:r,phaseName:h,totalTime:g,disabled:!!E}}function Uo(i,t,e){let r;return i instanceof Map?(r=i.get(t),r||i.set(t,r=e)):(r=i[t],r||(r=i[t]=e)),r}function am(i){const t=i.indexOf(":");return[i.substring(1,t),i.substr(t+1)]}let lm=(i,t)=>!1,cm=(i,t,e)=>[];(od()||"undefined"!=typeof Element)&&(lm=vp()?(i,t)=>{for(;t&&t!==document.documentElement;){if(t===i)return!0;t=t.parentNode||t.host}return!1}:(i,t)=>i.contains(t),cm=(i,t,e)=>{if(e)return Array.from(i.querySelectorAll(t));const r=i.querySelector(t);return r?[r]:[]});let Il=null,kc=!1;function Qh(i){Il||(Il=function dm(){return"undefined"!=typeof document?document.body:null}()||{},kc=!!Il.style&&"WebkitAppearance"in Il.style);let t=!0;return Il.style&&!function Yh(i){return"ebkit"==i.substring(1,6)}(i)&&(t=i in Il.style,!t&&kc&&(t="Webkit"+i.charAt(0).toUpperCase()+i.substr(1)in Il.style)),t}const Xd=lm,eh=cm;function hm(i){const t={};return Object.keys(i).forEach(e=>{const r=e.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=i[e]}),t}let th=(()=>{class i{validateStyleProperty(e){return Qh(e)}matchesElement(e,r){return!1}containsElement(e,r){return Xd(e,r)}query(e,r,h){return eh(e,r,h)}computeStyle(e,r,h){return h||""}animate(e,r,h,g,E,S=[],R){return new Zr.ZN(h,g)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac}),i})(),ad=(()=>{class i{}return i.NOOP=new th,i})();const ld="ng-enter",Jh="ng-leave",cs="ng-trigger",Xh=".ng-trigger",Iy="ng-animating",fm=".ng-animating";function bu(i){if("number"==typeof i)return i;const t=i.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:pm(parseFloat(t[1]),t[2])}function pm(i,t){return"s"===t?1e3*i:i}function ih(i,t,e){return i.hasOwnProperty("duration")?i:function Ay(i,t,e){let h,g=0,E="";if("string"==typeof i){const S=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===S)return t.push(`The provided timing value "${i}" is invalid.`),{duration:0,delay:0,easing:""};h=pm(parseFloat(S[1]),S[2]);const R=S[3];null!=R&&(g=pm(parseFloat(R),S[4]));const G=S[5];G&&(E=G)}else h=i;if(!e){let S=!1,R=t.length;h<0&&(t.push("Duration values below 0 are not allowed for this animation step."),S=!0),g<0&&(t.push("Delay values below 0 are not allowed for this animation step."),S=!0),S&&t.splice(R,0,`The provided timing value "${i}" is invalid.`)}return{duration:h,delay:g,easing:E}}(i,t,e)}function Al(i,t={}){return Object.keys(i).forEach(e=>{t[e]=i[e]}),t}function Eu(i,t,e={}){if(t)for(let r in i)e[r]=i[r];else Al(i,e);return e}function mm(i,t,e){return e?t+":"+e+";":""}function _m(i){let t="";for(let e=0;e<i.style.length;e++){const r=i.style.item(e);t+=mm(0,r,i.style.getPropertyValue(r))}for(const e in i.style)i.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=mm(0,Tu(e),i.style[e]));i.setAttribute("style",t)}function Sl(i,t,e){i.style&&(Object.keys(t).forEach(r=>{const h=ho(r);e&&!e.hasOwnProperty(r)&&(e[r]=i.style[h]),i.style[h]=t[r]}),od()&&_m(i))}function rh(i,t){i.style&&(Object.keys(t).forEach(e=>{const r=ho(e);i.style[r]=""}),od()&&_m(i))}function Cu(i){return Array.isArray(i)?1==i.length?i[0]:(0,Zr.vP)(i):i}const Za=new RegExp("{{\\s*(.+?)\\s*}}","g");function ym(i){let t=[];if("string"==typeof i){let e;for(;e=Za.exec(i);)t.push(e[1]);Za.lastIndex=0}return t}function cd(i,t,e){const r=i.toString(),h=r.replace(Za,(g,E)=>{let S=t[E];return t.hasOwnProperty(E)||(e.push(`Please provide a value for the animation param ${E}`),S=""),S.toString()});return h==r?i:h}function Qo(i){const t=[];let e=i.next();for(;!e.done;)t.push(e.value),e=i.next();return t}const Nl=/-+([a-z0-9])/g;function ho(i){return i.replace(Nl,(...t)=>t[1].toUpperCase())}function Tu(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ud(i,t){return 0===i||0===t}function wu(i,t,e){const r=Object.keys(e);if(r.length&&t.length){let g=t[0],E=[];if(r.forEach(S=>{g.hasOwnProperty(S)||E.push(S),g[S]=e[S]}),E.length)for(var h=1;h<t.length;h++){let S=t[h];E.forEach(function(R){S[R]=vm(i,R)})}}return t}function Wa(i,t,e){switch(t.type){case 7:return i.visitTrigger(t,e);case 0:return i.visitState(t,e);case 1:return i.visitTransition(t,e);case 2:return i.visitSequence(t,e);case 3:return i.visitGroup(t,e);case 4:return i.visitAnimate(t,e);case 5:return i.visitKeyframes(t,e);case 6:return i.visitStyle(t,e);case 8:return i.visitReference(t,e);case 9:return i.visitAnimateChild(t,e);case 10:return i.visitAnimateRef(t,e);case 11:return i.visitQuery(t,e);case 12:return i.visitStagger(t,e);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function vm(i,t){return window.getComputedStyle(i)[t]}function ic(i,t){const e=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(r=>function ef(i,t,e){if(":"==i[0]){const R=function U0(i,t){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return t.push(`The transition alias value "${i}" is not supported`),"* => *"}}(i,e);if("function"==typeof R)return void t.push(R);i=R}const r=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return e.push(`The provided transition expression "${i}" is not supported`),t;const h=r[1],g=r[2],E=r[3];t.push(bm(h,E));"<"==g[0]&&!("*"==h&&"*"==E)&&t.push(bm(E,h))}(r,e,t)):e.push(i),e}const tf=new Set(["true","1"]),Cp=new Set(["false","0"]);function bm(i,t){const e=tf.has(i)||Cp.has(i),r=tf.has(t)||Cp.has(t);return(h,g)=>{let E="*"==i||i==h,S="*"==t||t==g;return!E&&e&&"boolean"==typeof h&&(E=h?tf.has(i):Cp.has(i)),!S&&r&&"boolean"==typeof g&&(S=g?tf.has(t):Cp.has(t)),E&&S}}const Tp=new RegExp("s*:selfs*,?","g");function Cm(i,t,e){return new Sy(i).build(t,e)}class Sy{constructor(t){this._driver=t}build(t,e){const r=new nf(e);return this._resetContextStyleTimingState(r),Wa(this,Cu(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let r=e.queryCount=0,h=e.depCount=0;const g=[],E=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(S=>{if(this._resetContextStyleTimingState(e),0==S.type){const R=S,G=R.name;G.toString().split(/\s*,\s*/).forEach(re=>{R.name=re,g.push(this.visitState(R,e))}),R.name=G}else if(1==S.type){const R=this.visitTransition(S,e);r+=R.queryCount,h+=R.depCount,E.push(R)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:g,transitions:E,queryCount:r,depCount:h,options:null}}visitState(t,e){const r=this.visitStyle(t.styles,e),h=t.options&&t.options.params||null;if(r.containsDynamicStyles){const g=new Set,E=h||{};if(r.styles.forEach(S=>{if(wp(S)){const R=S;Object.keys(R).forEach(G=>{ym(R[G]).forEach(re=>{E.hasOwnProperty(re)||g.add(re)})})}}),g.size){const S=Qo(g.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${S.join(", ")}`)}}return{type:0,name:t.name,style:r,options:h?{params:h}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const r=Wa(this,Cu(t.animation),e);return{type:1,matchers:ic(t.expr,e.errors),animation:r,queryCount:e.queryCount,depCount:e.depCount,options:Fc(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(r=>Wa(this,r,e)),options:Fc(t.options)}}visitGroup(t,e){const r=e.currentTime;let h=0;const g=t.steps.map(E=>{e.currentTime=r;const S=Wa(this,E,e);return h=Math.max(h,e.currentTime),S});return e.currentTime=h,{type:3,steps:g,options:Fc(t.options)}}visitAnimate(t,e){const r=function Ny(i,t){let e=null;if(i.hasOwnProperty("duration"))e=i;else if("number"==typeof i)return Ml(ih(i,t).duration,0,"");const r=i;if(r.split(/\s+/).some(g=>"{"==g.charAt(0)&&"{"==g.charAt(1))){const g=Ml(0,0,"");return g.dynamic=!0,g.strValue=r,g}return e=e||ih(r,t),Ml(e.duration,e.delay,e.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;let h,g=t.styles?t.styles:(0,Zr.oB)({});if(5==g.type)h=this.visitKeyframes(g,e);else{let E=t.styles,S=!1;if(!E){S=!0;const G={};r.easing&&(G.easing=r.easing),E=(0,Zr.oB)(G)}e.currentTime+=r.duration+r.delay;const R=this.visitStyle(E,e);R.isEmptyStep=S,h=R}return e.currentAnimateTimings=null,{type:4,timings:r,style:h,options:null}}visitStyle(t,e){const r=this._makeStyleAst(t,e);return this._validateStyleAst(r,e),r}_makeStyleAst(t,e){const r=[];Array.isArray(t.styles)?t.styles.forEach(E=>{"string"==typeof E?E==Zr.l3?r.push(E):e.errors.push(`The provided style string value ${E} is not allowed.`):r.push(E)}):r.push(t.styles);let h=!1,g=null;return r.forEach(E=>{if(wp(E)){const S=E,R=S.easing;if(R&&(g=R,delete S.easing),!h)for(let G in S)if(S[G].toString().indexOf("{{")>=0){h=!0;break}}}),{type:6,styles:r,easing:g,offset:t.offset,containsDynamicStyles:h,options:null}}_validateStyleAst(t,e){const r=e.currentAnimateTimings;let h=e.currentTime,g=e.currentTime;r&&g>0&&(g-=r.duration+r.delay),t.styles.forEach(E=>{"string"!=typeof E&&Object.keys(E).forEach(S=>{if(!this._driver.validateStyleProperty(S))return void e.errors.push(`The provided animation property "${S}" is not a supported CSS property for animations`);const R=e.collectedStyles[e.currentQuerySelector],G=R[S];let re=!0;G&&(g!=h&&g>=G.startTime&&h<=G.endTime&&(e.errors.push(`The CSS property "${S}" that exists between the times of "${G.startTime}ms" and "${G.endTime}ms" is also being animated in a parallel animation between the times of "${g}ms" and "${h}ms"`),re=!1),g=G.startTime),re&&(R[S]={startTime:g,endTime:h}),e.options&&function bp(i,t,e){const r=t.params||{},h=ym(i);h.length&&h.forEach(g=>{r.hasOwnProperty(g)||e.push(`Unable to resolve the local animation param ${g} in the given list of values`)})}(E[S],e.options,e.errors)})})}visitKeyframes(t,e){const r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),r;let g=0;const E=[];let S=!1,R=!1,G=0;const re=t.steps.map(ni=>{const li=this._makeStyleAst(ni,e);let Pi=null!=li.offset?li.offset:function j0(i){if("string"==typeof i)return null;let t=null;if(Array.isArray(i))i.forEach(e=>{if(wp(e)&&e.hasOwnProperty("offset")){const r=e;t=parseFloat(r.offset),delete r.offset}});else if(wp(i)&&i.hasOwnProperty("offset")){const e=i;t=parseFloat(e.offset),delete e.offset}return t}(li.styles),yi=0;return null!=Pi&&(g++,yi=li.offset=Pi),R=R||yi<0||yi>1,S=S||yi<G,G=yi,E.push(yi),li});R&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),S&&e.errors.push("Please ensure that all keyframe offsets are in order");const be=t.steps.length;let Ae=0;g>0&&g<be?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==g&&(Ae=1/(be-1));const st=be-1,Tt=e.currentTime,Pt=e.currentAnimateTimings,un=Pt.duration;return re.forEach((ni,li)=>{const Pi=Ae>0?li==st?1:Ae*li:E[li],yi=Pi*un;e.currentTime=Tt+Pt.delay+yi,Pt.duration=yi,this._validateStyleAst(ni,e),ni.offset=Pi,r.styles.push(ni)}),r}visitReference(t,e){return{type:8,animation:Wa(this,Cu(t.animation),e),options:Fc(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Fc(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Fc(t.options)}}visitQuery(t,e){const r=e.currentQuerySelector,h=t.options||{};e.queryCount++,e.currentQuery=t;const[g,E]=function wm(i){const t=!!i.split(/\s*,\s*/).find(e=>":self"==e);return t&&(i=i.replace(Tp,"")),i=i.replace(/@\*/g,Xh).replace(/@\w+/g,e=>Xh+"-"+e.substr(1)).replace(/:animating/g,fm),[i,t]}(t.selector);e.currentQuerySelector=r.length?r+" "+g:g,Uo(e.collectedStyles,e.currentQuerySelector,{});const S=Wa(this,Cu(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:11,selector:g,limit:h.limit||0,optional:!!h.optional,includeSelf:E,animation:S,originalSelector:t.selector,options:Fc(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const r="full"===t.timings?{duration:0,delay:0,easing:"full"}:ih(t.timings,e.errors,!0);return{type:12,animation:Wa(this,Cu(t.animation),e),timings:r,options:null}}}class nf{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function wp(i){return!Array.isArray(i)&&"object"==typeof i}function Fc(i){return i?(i=Al(i)).params&&(i.params=function Pc(i){return i?Al(i):null}(i.params)):i={},i}function Ml(i,t,e){return{duration:i,delay:t,easing:e}}function Dp(i,t,e,r,h,g,E=null,S=!1){return{type:1,element:i,keyframes:t,preStyleProps:e,postStyleProps:r,duration:h,delay:g,totalTime:h+g,easing:E,subTimeline:S}}class rf{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const G0=new RegExp(":enter","g"),W0=new RegExp(":leave","g");function My(i,t,e,r,h,g={},E={},S,R,G=[]){return(new iC).buildKeyframes(i,t,e,r,h,g,E,S,R,G)}class iC{buildKeyframes(t,e,r,h,g,E,S,R,G,re=[]){G=G||new rf;const be=new l(t,e,G,h,g,re,[]);be.options=R,be.currentTimeline.setStyles([E],null,be.errors,R),Wa(this,r,be);const Ae=be.timelines.filter(st=>st.containsAnimation());if(Object.keys(S).length){let st;for(let Tt=Ae.length-1;Tt>=0;Tt--){const Pt=Ae[Tt];if(Pt.element===e){st=Pt;break}}st&&!st.allowOnlyTimelineStyles()&&st.setStyles([S],null,be.errors,R)}return Ae.length?Ae.map(st=>st.buildKeyframes()):[Dp(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const r=e.subInstructions.get(e.element);if(r){const h=e.createSubContext(t.options),g=e.currentTimeline.currentTime,E=this._visitSubInstructions(r,h,h.options);g!=E&&e.transformIntoNewTimeline(E)}e.previousNode=t}visitAnimateRef(t,e){const r=e.createSubContext(t.options);r.transformIntoNewTimeline(),this.visitReference(t.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,r){let g=e.currentTimeline.currentTime;const E=null!=r.duration?bu(r.duration):null,S=null!=r.delay?bu(r.delay):null;return 0!==E&&t.forEach(R=>{const G=e.appendInstructionToTimeline(R,E,S);g=Math.max(g,G.duration+G.delay)}),g}visitReference(t,e){e.updateOptions(t.options,!0),Wa(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const r=e.subContextCount;let h=e;const g=t.options;if(g&&(g.params||g.delay)&&(h=e.createSubContext(g),h.transformIntoNewTimeline(),null!=g.delay)){6==h.previousNode.type&&(h.currentTimeline.snapshotCurrentStyles(),h.previousNode=sf);const E=bu(g.delay);h.delayNextStep(E)}t.steps.length&&(t.steps.forEach(E=>Wa(this,E,h)),h.currentTimeline.applyStylesToKeyframe(),h.subContextCount>r&&h.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const r=[];let h=e.currentTimeline.currentTime;const g=t.options&&t.options.delay?bu(t.options.delay):0;t.steps.forEach(E=>{const S=e.createSubContext(t.options);g&&S.delayNextStep(g),Wa(this,E,S),h=Math.max(h,S.currentTimeline.currentTime),r.push(S.currentTimeline)}),r.forEach(E=>e.currentTimeline.mergeTimelineCollectedStyles(E)),e.transformIntoNewTimeline(h),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const r=t.strValue;return ih(e.params?cd(r,e.params,e.errors):r,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const r=e.currentAnimateTimings=this._visitTiming(t.timings,e),h=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),h.snapshotCurrentStyles());const g=t.style;5==g.type?this.visitKeyframes(g,e):(e.incrementTime(r.duration),this.visitStyle(g,e),h.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const r=e.currentTimeline,h=e.currentAnimateTimings;!h&&r.getCurrentStyleProperties().length&&r.forwardFrame();const g=h&&h.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(g):r.setStyles(t.styles,g,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const r=e.currentAnimateTimings,h=e.currentTimeline.duration,g=r.duration,S=e.createSubContext().currentTimeline;S.easing=r.easing,t.styles.forEach(R=>{S.forwardTime((R.offset||0)*g),S.setStyles(R.styles,R.easing,e.errors,e.options),S.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(S),e.transformIntoNewTimeline(h+g),e.previousNode=t}visitQuery(t,e){const r=e.currentTimeline.currentTime,h=t.options||{},g=h.delay?bu(h.delay):0;g&&(6===e.previousNode.type||0==r&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=sf);let E=r;const S=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!h.optional,e.errors);e.currentQueryTotal=S.length;let R=null;S.forEach((G,re)=>{e.currentQueryIndex=re;const be=e.createSubContext(t.options,G);g&&be.delayNextStep(g),G===e.element&&(R=be.currentTimeline),Wa(this,t.animation,be),be.currentTimeline.applyStylesToKeyframe(),E=Math.max(E,be.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(E),R&&(e.currentTimeline.mergeTimelineCollectedStyles(R),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const r=e.parentContext,h=e.currentTimeline,g=t.timings,E=Math.abs(g.duration),S=E*(e.currentQueryTotal-1);let R=E*e.currentQueryIndex;switch(g.duration<0?"reverse":g.easing){case"reverse":R=S-R;break;case"full":R=r.currentStaggerTime}const re=e.currentTimeline;R&&re.delayNextStep(R);const be=re.currentTime;Wa(this,t.animation,e),e.previousNode=t,r.currentStaggerTime=h.currentTime-be+(h.startTime-r.currentTimeline.startTime)}}const sf={};class l{constructor(t,e,r,h,g,E,S,R){this._driver=t,this.element=e,this.subInstructions=r,this._enterClassName=h,this._leaveClassName=g,this.errors=E,this.timelines=S,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=sf,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=R||new n(this._driver,e,0),S.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const r=t;let h=this.options;null!=r.duration&&(h.duration=bu(r.duration)),null!=r.delay&&(h.delay=bu(r.delay));const g=r.params;if(g){let E=h.params;E||(E=this.options.params={}),Object.keys(g).forEach(S=>{(!e||!E.hasOwnProperty(S))&&(E[S]=cd(g[S],E,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const r=t.params={};Object.keys(e).forEach(h=>{r[h]=e[h]})}}return t}createSubContext(t=null,e,r){const h=e||this.element,g=new l(this._driver,h,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(h,r||0));return g.previousNode=this.previousNode,g.currentAnimateTimings=this.currentAnimateTimings,g.options=this._copyOptions(),g.updateOptions(t),g.currentQueryIndex=this.currentQueryIndex,g.currentQueryTotal=this.currentQueryTotal,g.parentContext=this,this.subContextCount++,g}transformIntoNewTimeline(t){return this.previousNode=sf,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,r){const h={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+t.delay,easing:""},g=new s(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,h,t.stretchStartingKeyframe);return this.timelines.push(g),h}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,r,h,g,E){let S=[];if(h&&S.push(this.element),t.length>0){t=(t=t.replace(G0,"."+this._enterClassName)).replace(W0,"."+this._leaveClassName);let G=this._driver.query(this.element,t,1!=r);0!==r&&(G=r<0?G.slice(G.length+r,G.length):G.slice(0,r)),S.push(...G)}return!g&&0==S.length&&E.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),S}}class n{constructor(t,e,r,h){this._driver=t,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=h,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new n(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||Zr.l3,this._currentKeyframe[e]=Zr.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,r,h){e&&(this._previousKeyframe.easing=e);const g=h&&h.params||{},E=function p(i,t){const e={};let r;return i.forEach(h=>{"*"===h?(r=r||Object.keys(t),r.forEach(g=>{e[g]=Zr.l3})):Eu(h,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(E).forEach(S=>{const R=cd(E[S],g,r);this._pendingStyles[S]=R,this._localTimelineStyles.hasOwnProperty(S)||(this._backFill[S]=this._globalTimelineStyles.hasOwnProperty(S)?this._globalTimelineStyles[S]:Zr.l3),this._updateStyle(S,R)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(r=>{this._currentKeyframe[r]=t[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const r=this._styleSummary[e],h=t._styleSummary[e];(!r||h.time>r.time)&&this._updateStyle(e,h.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,r=1===this._keyframes.size&&0===this.duration;let h=[];this._keyframes.forEach((S,R)=>{const G=Eu(S,!0);Object.keys(G).forEach(re=>{const be=G[re];be==Zr.k1?t.add(re):be==Zr.l3&&e.add(re)}),r||(G.offset=R/this.duration),h.push(G)});const g=t.size?Qo(t.values()):[],E=e.size?Qo(e.values()):[];if(r){const S=h[0],R=Al(S);S.offset=0,R.offset=1,h=[S,R]}return Dp(this.element,h,g,E,this.duration,this.startTime,this.easing,!1)}}class s extends n{constructor(t,e,r,h,g,E,S=!1){super(t,e,E.delay),this.keyframes=r,this.preStyleProps=h,this.postStyleProps=g,this._stretchStartingKeyframe=S,this.timings={duration:E.duration,delay:E.delay,easing:E.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:r,easing:h}=this.timings;if(this._stretchStartingKeyframe&&e){const g=[],E=r+e,S=e/E,R=Eu(t[0],!1);R.offset=0,g.push(R);const G=Eu(t[0],!1);G.offset=d(S),g.push(G);const re=t.length-1;for(let be=1;be<=re;be++){let Ae=Eu(t[be],!1);Ae.offset=d((e+Ae.offset*r)/E),g.push(Ae)}r=E,e=0,h="",t=g}return Dp(this.element,t,this.preStyleProps,this.postStyleProps,r,e,h,!0)}}function d(i,t=3){const e=Math.pow(10,t-1);return Math.round(i*e)/e}class T{}class z extends T{normalizePropertyName(t,e){return ho(t)}normalizeStyleValue(t,e,r,h){let g="";const E=r.toString().trim();if(ee[e]&&0!==r&&"0"!==r)if("number"==typeof r)g="px";else{const S=r.match(/^[+-]?[\d\.]+([a-z]*)$/);S&&0==S[1].length&&h.push(`Please provide a CSS unit value for ${t}:${r}`)}return E+g}}const ee=(()=>function me(i){const t={};return i.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Re(i,t,e,r,h,g,E,S,R,G,re,be,Ae){return{type:0,element:i,triggerName:t,isRemovalTransition:h,fromState:e,fromStyles:g,toState:r,toStyles:E,timelines:S,queriedElements:R,preStyleProps:G,postStyleProps:re,totalTime:be,errors:Ae}}const gt={};class Ft{constructor(t,e,r){this._triggerName=t,this.ast=e,this._stateStyles=r}match(t,e,r,h){return function jt(i,t,e,r,h){return i.some(g=>g(t,e,r,h))}(this.ast.matchers,t,e,r,h)}buildStyles(t,e,r){const h=this._stateStyles["*"],g=this._stateStyles[t],E=h?h.buildStyles(e,r):{};return g?g.buildStyles(e,r):E}build(t,e,r,h,g,E,S,R,G,re){const be=[],Ae=this.ast.options&&this.ast.options.params||gt,Tt=this.buildStyles(r,S&&S.params||gt,be),Pt=R&&R.params||gt,un=this.buildStyles(h,Pt,be),ni=new Set,li=new Map,Pi=new Map,yi="void"===h,Bi={params:Object.assign(Object.assign({},Ae),Pt)},Gi=re?[]:My(t,e,this.ast.animation,g,E,Tt,un,Bi,G,be);let er=0;if(Gi.forEach(gs=>{er=Math.max(gs.duration+gs.delay,er)}),be.length)return Re(e,this._triggerName,r,h,yi,Tt,un,[],[],li,Pi,er,be);Gi.forEach(gs=>{const ms=gs.element,co=Uo(li,ms,{});gs.preStyleProps.forEach(po=>co[po]=!0);const Ya=Uo(Pi,ms,{});gs.postStyleProps.forEach(po=>Ya[po]=!0),ms!==e&&ni.add(ms)});const wr=Qo(ni.values());return Re(e,this._triggerName,r,h,yi,Tt,un,Gi,wr,li,Pi,er)}}class Rn{constructor(t,e,r){this.styles=t,this.defaultParams=e,this.normalizer=r}buildStyles(t,e){const r={},h=Al(this.defaultParams);return Object.keys(t).forEach(g=>{const E=t[g];null!=E&&(h[g]=E)}),this.styles.styles.forEach(g=>{if("string"!=typeof g){const E=g;Object.keys(E).forEach(S=>{let R=E[S];R.length>1&&(R=cd(R,h,e));const G=this.normalizer.normalizePropertyName(S,e);R=this.normalizer.normalizeStyleValue(S,G,R,e),r[G]=R})}}),r}}class xr{constructor(t,e,r){this.name=t,this.ast=e,this._normalizer=r,this.transitionFactories=[],this.states={},e.states.forEach(h=>{this.states[h.name]=new Rn(h.style,h.options&&h.options.params||{},r)}),Or(this.states,"true","1"),Or(this.states,"false","0"),e.transitions.forEach(h=>{this.transitionFactories.push(new Ft(t,h,this.states))}),this.fallbackTransition=function ls(i,t,e){return new Ft(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(E,S)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,r,h){return this.transitionFactories.find(E=>E.match(t,e,r,h))||null}matchStyles(t,e,r){return this.fallbackTransition.buildStyles(t,e,r)}}function Or(i,t,e){i.hasOwnProperty(t)?i.hasOwnProperty(e)||(i[e]=i[t]):i.hasOwnProperty(e)&&(i[t]=i[e])}const ao=new rf;class Ar{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(t,e){const r=[],h=Cm(this._driver,e,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[t]=h}_buildPlayer(t,e,r){const h=t.element,g=Rc(0,this._normalizer,0,t.keyframes,e,r);return this._driver.animate(h,g,t.duration,t.delay,t.easing,[],!0)}create(t,e,r={}){const h=[],g=this._animations[t];let E;const S=new Map;if(g?(E=My(this._driver,e,g,ld,Jh,{},{},r,ao,h),E.forEach(re=>{const be=Uo(S,re.element,{});re.postStyleProps.forEach(Ae=>be[Ae]=null)})):(h.push("The requested animation doesn't exist or has already been destroyed"),E=[]),h.length)throw new Error(`Unable to create the animation due to the following errors: ${h.join("\n")}`);S.forEach((re,be)=>{Object.keys(re).forEach(Ae=>{re[Ae]=this._driver.computeStyle(be,Ae,Zr.l3)})});const G=nc(E.map(re=>{const be=S.get(re.element);return this._buildPlayer(re,{},be)}));return this._playersById[t]=G,G.onDestroy(()=>this.destroy(t)),this.players.push(G),G}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,r,h){const g=Kh(e,"","","");return Jd(this._getPlayer(t),r,g,h),()=>{}}command(t,e,r,h){if("register"==r)return void this.register(t,h[0]);if("create"==r)return void this.create(t,e,h[0]||{});const g=this._getPlayer(t);switch(r){case"play":g.play();break;case"pause":g.pause();break;case"reset":g.reset();break;case"restart":g.restart();break;case"finish":g.finish();break;case"init":g.init();break;case"setPosition":g.setPosition(parseFloat(h[0]));break;case"destroy":this.destroy(t)}}}const Vr="ng-animate-queued",al="ng-animate-disabled",rC=[],z0={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},RD={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ai="__ng_removed";class K0{constructor(t,e=""){this.namespaceId=e;const r=t&&t.hasOwnProperty("value");if(this.value=function lo(i){return null!=i?i:null}(r?t.value:t),r){const g=Al(t);delete g.value,this.options=g}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const r=this.options.params;Object.keys(e).forEach(h=>{null==r[h]&&(r[h]=e[h])})}}}const Dm="void",Y0=new K0(Dm);class xy{constructor(t,e,r){this.id=t,this.hostElement=e,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,xl(e,this._hostClassName)}listen(t,e,r,h){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${e}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if(!function sC(i){return"start"==i||"done"==i}(r))throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${e}" is not supported!`);const g=Uo(this._elementListeners,t,[]),E={name:e,phase:r,callback:h};g.push(E);const S=Uo(this._engine.statesByElement,t,{});return S.hasOwnProperty(e)||(xl(t,cs),xl(t,cs+"-"+e),S[e]=Y0),()=>{this._engine.afterFlush(()=>{const R=g.indexOf(E);R>=0&&g.splice(R,1),this._triggers[e]||delete S[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,r,h=!0){const g=this._getTrigger(e),E=new Ip(this.id,e,t);let S=this._engine.statesByElement.get(t);S||(xl(t,cs),xl(t,cs+"-"+e),this._engine.statesByElement.set(t,S={}));let R=S[e];const G=new K0(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&R&&G.absorbOptions(R.options),S[e]=G,R||(R=Y0),G.value!==Dm&&R.value===G.value){if(!function hw(i,t){const e=Object.keys(i),r=Object.keys(t);if(e.length!=r.length)return!1;for(let h=0;h<e.length;h++){const g=e[h];if(!t.hasOwnProperty(g)||i[g]!==t[g])return!1}return!0}(R.params,G.params)){const Pt=[],un=g.matchStyles(R.value,R.params,Pt),ni=g.matchStyles(G.value,G.params,Pt);Pt.length?this._engine.reportError(Pt):this._engine.afterFlush(()=>{rh(t,un),Sl(t,ni)})}return}const Ae=Uo(this._engine.playersByElement,t,[]);Ae.forEach(Pt=>{Pt.namespaceId==this.id&&Pt.triggerName==e&&Pt.queued&&Pt.destroy()});let st=g.matchTransition(R.value,G.value,t,G.params),Tt=!1;if(!st){if(!h)return;st=g.fallbackTransition,Tt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:st,fromState:R,toState:G,player:E,isFallbackTransition:Tt}),Tt||(xl(t,Vr),E.onStart(()=>{af(t,Vr)})),E.onDone(()=>{let Pt=this.players.indexOf(E);Pt>=0&&this.players.splice(Pt,1);const un=this._engine.playersByElement.get(t);if(un){let ni=un.indexOf(E);ni>=0&&un.splice(ni,1)}}),this.players.push(E),Ae.push(E),E}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,r)=>{delete e[t]}),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(h=>h.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const r=this._engine.driver.query(t,Xh,!0);r.forEach(h=>{if(h[ai])return;const g=this._engine.fetchNamespacesByElement(h);g.size?g.forEach(E=>E.triggerLeaveAnimation(h,e,!1,!0)):this.clearElementCache(h)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(h=>this.clearElementCache(h)))}triggerLeaveAnimation(t,e,r,h){const g=this._engine.statesByElement.get(t),E=new Map;if(g){const S=[];if(Object.keys(g).forEach(R=>{if(E.set(R,g[R].value),this._triggers[R]){const G=this.trigger(t,R,Dm,h);G&&S.push(G)}}),S.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,E),r&&nc(S).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(e&&r){const h=new Set;e.forEach(g=>{const E=g.name;if(h.has(E))return;h.add(E);const R=this._triggers[E].fallbackTransition,G=r[E]||Y0,re=new K0(Dm),be=new Ip(this.id,E,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:E,transition:R,fromState:G,toState:re,player:be,isFallbackTransition:!0})})}}removeNode(t,e){const r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let h=!1;if(r.totalAnimations){const g=r.players.length?r.playersByQueriedElement.get(t):[];if(g&&g.length)h=!0;else{let E=t;for(;E=E.parentNode;)if(r.statesByElement.get(E)){h=!0;break}}}if(this.prepareLeaveAnimationListeners(t),h)r.markElementAsRemoved(this.id,t,!1,e);else{const g=t[ai];(!g||g===z0)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}insertNode(t,e){xl(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(r=>{const h=r.player;if(h.destroyed)return;const g=r.element,E=this._elementListeners.get(g);E&&E.forEach(S=>{if(S.name==r.triggerName){const R=Kh(g,r.triggerName,r.fromState.value,r.toState.value);R._data=t,Jd(r.player,S.phase,R,S.callback)}}),h.markedForDestroy?this._engine.afterFlush(()=>{h.destroy()}):e.push(r)}),this._queue=[],e.sort((r,h)=>{const g=r.transition.ast.depCount,E=h.transition.ast.depCount;return 0==g||0==E?g-E:this._engine.driver.containsElement(r.element,h.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(r=>r.element===t)||e,e}}class uw{constructor(t,e,r){this.bodyNode=t,this.driver=e,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(h,g)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,e){const r=new xy(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,e){const r=this._namespaceList.length-1;if(r>=0){let h=!1;for(let g=r;g>=0;g--)if(this.driver.containsElement(this._namespaceList[g].hostElement,e)){this._namespaceList.splice(g+1,0,t),h=!0;break}h||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,e)),r}registerTrigger(t,e,r){let h=this._namespaceLookup[t];h&&h.register(e,r)&&this.totalAnimations++}destroy(t,e){if(!t)return;const r=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[t];const h=this._namespaceList.indexOf(r);h>=0&&this._namespaceList.splice(h,1)}),this.afterFlushAnimationsDone(()=>r.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,r=this.statesByElement.get(t);if(r){const h=Object.keys(r);for(let g=0;g<h.length;g++){const E=r[h[g]].namespaceId;if(E){const S=this._fetchNamespace(E);S&&e.add(S)}}}return e}trigger(t,e,r,h){if(Q0(e)){const g=this._fetchNamespace(t);if(g)return g.trigger(e,r,h),!0}return!1}insertNode(t,e,r,h){if(!Q0(e))return;const g=e[ai];if(g&&g.setForRemoval){g.setForRemoval=!1,g.setForMove=!0;const E=this.collectedLeaveElements.indexOf(e);E>=0&&this.collectedLeaveElements.splice(E,1)}if(t){const E=this._fetchNamespace(t);E&&E.insertNode(e,r)}h&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),xl(t,al)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),af(t,al))}removeNode(t,e,r,h){if(Q0(e)){const g=t?this._fetchNamespace(t):null;if(g?g.removeNode(e,h):this.markElementAsRemoved(t,e,!1,h),r){const E=this.namespacesByHostElement.get(e);E&&E.id!==t&&E.removeNode(e,h)}}else this._onRemovalComplete(e,h)}markElementAsRemoved(t,e,r,h,g){this.collectedLeaveElements.push(e),e[ai]={namespaceId:t,setForRemoval:h,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:g}}listen(t,e,r,h,g){return Q0(e)?this._fetchNamespace(t).listen(e,r,h,g):()=>{}}_buildInstruction(t,e,r,h,g){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,h,t.fromState.options,t.toState.options,e,g)}destroyInnerAnimations(t){let e=this.driver.query(t,Xh,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,fm,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return nc(this.players).onDone(()=>t());t()})}processLeaveNode(t){var e;const r=t[ai];if(r&&r.setForRemoval){if(t[ai]=z0,r.namespaceId){this.destroyInnerAnimations(t);const h=this._fetchNamespace(r.namespaceId);h&&h.clearElementCache(t)}this._onRemovalComplete(t,r.setForRemoval)}(null===(e=t.classList)||void 0===e?void 0:e.contains(al))&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(h=>{this.markElementAsDisabled(h,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,h)=>this._balanceNamespaceList(r,h)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)xl(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{e=this._flushAnimations(r,t)}finally{for(let h=0;h<r.length;h++)r[h]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],e.length?nc(e).onDone(()=>{r.forEach(h=>h())}):r.forEach(h=>h())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const r=new rf,h=[],g=new Map,E=[],S=new Map,R=new Map,G=new Map,re=new Set;this.disabledNodes.forEach(Un=>{re.add(Un);const ci=this.driver.query(Un,".ng-animate-queued",!0);for(let Ci=0;Ci<ci.length;Ci++)re.add(ci[Ci])});const be=this.bodyNode,Ae=Array.from(this.statesByElement.keys()),st=J0(Ae,this.collectedEnterElements),Tt=new Map;let Pt=0;st.forEach((Un,ci)=>{const Ci=ld+Pt++;Tt.set(ci,Ci),Un.forEach(hr=>xl(hr,Ci))});const un=[],ni=new Set,li=new Set;for(let Un=0;Un<this.collectedLeaveElements.length;Un++){const ci=this.collectedLeaveElements[Un],Ci=ci[ai];Ci&&Ci.setForRemoval&&(un.push(ci),ni.add(ci),Ci.hasAnimation?this.driver.query(ci,".ng-star-inserted",!0).forEach(hr=>ni.add(hr)):li.add(ci))}const Pi=new Map,yi=J0(Ae,Array.from(ni));yi.forEach((Un,ci)=>{const Ci=Jh+Pt++;Pi.set(ci,Ci),Un.forEach(hr=>xl(hr,Ci))}),t.push(()=>{st.forEach((Un,ci)=>{const Ci=Tt.get(ci);Un.forEach(hr=>af(hr,Ci))}),yi.forEach((Un,ci)=>{const Ci=Pi.get(ci);Un.forEach(hr=>af(hr,Ci))}),un.forEach(Un=>{this.processLeaveNode(Un)})});const Bi=[],Gi=[];for(let Un=this._namespaceList.length-1;Un>=0;Un--)this._namespaceList[Un].drainQueuedTransitions(e).forEach(Ci=>{const hr=Ci.player,go=Ci.element;if(Bi.push(hr),this.collectedEnterElements.length){const Jo=go[ai];if(Jo&&Jo.setForMove){if(Jo.previousTriggersValues&&Jo.previousTriggersValues.has(Ci.triggerName)){const Fl=Jo.previousTriggersValues.get(Ci.triggerName),Mu=this.statesByElement.get(Ci.element);Mu&&Mu[Ci.triggerName]&&(Mu[Ci.triggerName].value=Fl)}return void hr.destroy()}}const ac=!be||!this.driver.containsElement(be,go),ua=Pi.get(go),$c=Tt.get(go),us=this._buildInstruction(Ci,r,$c,ua,ac);if(us.errors&&us.errors.length)return void Gi.push(us);if(ac)return hr.onStart(()=>rh(go,us.fromStyles)),hr.onDestroy(()=>Sl(go,us.toStyles)),void h.push(hr);if(Ci.isFallbackTransition)return hr.onStart(()=>rh(go,us.fromStyles)),hr.onDestroy(()=>Sl(go,us.toStyles)),void h.push(hr);const pd=[];us.timelines.forEach(Jo=>{Jo.stretchStartingKeyframe=!0,this.disabledNodes.has(Jo.element)||pd.push(Jo)}),us.timelines=pd,r.append(go,us.timelines),E.push({instruction:us,player:hr,element:go}),us.queriedElements.forEach(Jo=>Uo(S,Jo,[]).push(hr)),us.preStyleProps.forEach((Jo,Fl)=>{const Mu=Object.keys(Jo);if(Mu.length){let Cf=R.get(Fl);Cf||R.set(Fl,Cf=new Set),Mu.forEach(e_=>Cf.add(e_))}}),us.postStyleProps.forEach((Jo,Fl)=>{const Mu=Object.keys(Jo);let Cf=G.get(Fl);Cf||G.set(Fl,Cf=new Set),Mu.forEach(e_=>Cf.add(e_))})});if(Gi.length){const Un=[];Gi.forEach(ci=>{Un.push(`@${ci.triggerName} has failed due to:\n`),ci.errors.forEach(Ci=>Un.push(`- ${Ci}\n`))}),Bi.forEach(ci=>ci.destroy()),this.reportError(Un)}const er=new Map,wr=new Map;E.forEach(Un=>{const ci=Un.element;r.has(ci)&&(wr.set(ci,ci),this._beforeAnimationBuild(Un.player.namespaceId,Un.instruction,er))}),h.forEach(Un=>{const ci=Un.element;this._getPreviousPlayers(ci,!1,Un.namespaceId,Un.triggerName,null).forEach(hr=>{Uo(er,ci,[]).push(hr),hr.destroy()})});const gs=un.filter(Un=>Ap(Un,R,G)),ms=new Map;aC(ms,this.driver,li,G,Zr.l3).forEach(Un=>{Ap(Un,R,G)&&gs.push(Un)});const Ya=new Map;st.forEach((Un,ci)=>{aC(Ya,this.driver,new Set(Un),R,Zr.k1)}),gs.forEach(Un=>{const ci=ms.get(Un),Ci=Ya.get(Un);ms.set(Un,Object.assign(Object.assign({},ci),Ci))});const po=[],hh=[],fh={};E.forEach(Un=>{const{element:ci,player:Ci,instruction:hr}=Un;if(r.has(ci)){if(re.has(ci))return Ci.onDestroy(()=>Sl(ci,hr.toStyles)),Ci.disabled=!0,Ci.overrideTotalTime(hr.totalTime),void h.push(Ci);let go=fh;if(wr.size>1){let ua=ci;const $c=[];for(;ua=ua.parentNode;){const us=wr.get(ua);if(us){go=us;break}$c.push(ua)}$c.forEach(us=>wr.set(us,go))}const ac=this._buildAnimation(Ci.namespaceId,hr,er,g,Ya,ms);if(Ci.setRealPlayer(ac),go===fh)po.push(Ci);else{const ua=this.playersByElement.get(go);ua&&ua.length&&(Ci.parentPlayer=nc(ua)),h.push(Ci)}}else rh(ci,hr.fromStyles),Ci.onDestroy(()=>Sl(ci,hr.toStyles)),hh.push(Ci),re.has(ci)&&h.push(Ci)}),hh.forEach(Un=>{const ci=g.get(Un.element);if(ci&&ci.length){const Ci=nc(ci);Un.setRealPlayer(Ci)}}),h.forEach(Un=>{Un.parentPlayer?Un.syncPlayerEvents(Un.parentPlayer):Un.destroy()});for(let Un=0;Un<un.length;Un++){const ci=un[Un],Ci=ci[ai];if(af(ci,Jh),Ci&&Ci.hasAnimation)continue;let hr=[];if(S.size){let ac=S.get(ci);ac&&ac.length&&hr.push(...ac);let ua=this.driver.query(ci,fm,!0);for(let $c=0;$c<ua.length;$c++){let us=S.get(ua[$c]);us&&us.length&&hr.push(...us)}}const go=hr.filter(ac=>!ac.destroyed);go.length?lC(this,ci,go):this.processLeaveNode(ci)}return un.length=0,po.forEach(Un=>{this.players.push(Un),Un.onDone(()=>{Un.destroy();const ci=this.players.indexOf(Un);this.players.splice(ci,1)}),Un.play()}),po}elementContainsData(t,e){let r=!1;const h=e[ai];return h&&h.setForRemoval&&(r=!0),this.playersByElement.has(e)&&(r=!0),this.playersByQueriedElement.has(e)&&(r=!0),this.statesByElement.has(e)&&(r=!0),this._fetchNamespace(t).elementContainsData(e)||r}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,r,h,g){let E=[];if(e){const S=this.playersByQueriedElement.get(t);S&&(E=S)}else{const S=this.playersByElement.get(t);if(S){const R=!g||g==Dm;S.forEach(G=>{G.queued||!R&&G.triggerName!=h||E.push(G)})}}return(r||h)&&(E=E.filter(S=>!(r&&r!=S.namespaceId||h&&h!=S.triggerName))),E}_beforeAnimationBuild(t,e,r){const g=e.element,E=e.isRemovalTransition?void 0:t,S=e.isRemovalTransition?void 0:e.triggerName;for(const R of e.timelines){const G=R.element,re=G!==g,be=Uo(r,G,[]);this._getPreviousPlayers(G,re,E,S,e.toState).forEach(st=>{const Tt=st.getRealPlayer();Tt.beforeDestroy&&Tt.beforeDestroy(),st.destroy(),be.push(st)})}rh(g,e.fromStyles)}_buildAnimation(t,e,r,h,g,E){const S=e.triggerName,R=e.element,G=[],re=new Set,be=new Set,Ae=e.timelines.map(Tt=>{const Pt=Tt.element;re.add(Pt);const un=Pt[ai];if(un&&un.removedBeforeQueried)return new Zr.ZN(Tt.duration,Tt.delay);const ni=Pt!==R,li=function dw(i){const t=[];return cC(i,t),t}((r.get(Pt)||rC).map(er=>er.getRealPlayer())).filter(er=>!!er.element&&er.element===Pt),Pi=g.get(Pt),yi=E.get(Pt),Bi=Rc(0,this._normalizer,0,Tt.keyframes,Pi,yi),Gi=this._buildPlayer(Tt,Bi,li);if(Tt.subTimeline&&h&&be.add(Pt),ni){const er=new Ip(t,S,Pt);er.setRealPlayer(Gi),G.push(er)}return Gi});G.forEach(Tt=>{Uo(this.playersByQueriedElement,Tt.element,[]).push(Tt),Tt.onDone(()=>function Oy(i,t,e){let r;if(i instanceof Map){if(r=i.get(t),r){if(r.length){const h=r.indexOf(e);r.splice(h,1)}0==r.length&&i.delete(t)}}else if(r=i[t],r){if(r.length){const h=r.indexOf(e);r.splice(h,1)}0==r.length&&delete i[t]}return r}(this.playersByQueriedElement,Tt.element,Tt))}),re.forEach(Tt=>xl(Tt,Iy));const st=nc(Ae);return st.onDestroy(()=>{re.forEach(Tt=>af(Tt,Iy)),Sl(R,e.toStyles)}),be.forEach(Tt=>{Uo(h,Tt,[]).push(st)}),st}_buildPlayer(t,e,r){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,r):new Zr.ZN(t.duration,t.delay)}}class Ip{constructor(t,e,r){this.namespaceId=t,this.triggerName=e,this.element=r,this._player=new Zr.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(r=>Jd(t,e,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Uo(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Q0(i){return i&&1===i.nodeType}function oC(i,t){const e=i.style.display;return i.style.display=null!=t?t:"none",e}function aC(i,t,e,r,h){const g=[];e.forEach(R=>g.push(oC(R)));const E=[];r.forEach((R,G)=>{const re={};R.forEach(be=>{const Ae=re[be]=t.computeStyle(G,be,h);(!Ae||0==Ae.length)&&(G[ai]=RD,E.push(G))}),i.set(G,re)});let S=0;return e.forEach(R=>oC(R,g[S++])),E}function J0(i,t){const e=new Map;if(i.forEach(S=>e.set(S,[])),0==t.length)return e;const h=new Set(t),g=new Map;function E(S){if(!S)return 1;let R=g.get(S);if(R)return R;const G=S.parentNode;return R=e.has(G)?G:h.has(G)?1:E(G),g.set(S,R),R}return t.forEach(S=>{const R=E(S);1!==R&&e.get(R).push(S)}),e}function xl(i,t){var e;null===(e=i.classList)||void 0===e||e.add(t)}function af(i,t){var e;null===(e=i.classList)||void 0===e||e.remove(t)}function lC(i,t,e){nc(e).onDone(()=>i.processLeaveNode(t))}function cC(i,t){for(let e=0;e<i.length;e++){const r=i[e];r instanceof Zr.ZE?cC(r.players,t):t.push(r)}}function Ap(i,t,e){const r=e.get(i);if(!r)return!1;let h=t.get(i);return h?r.forEach(g=>h.add(g)):t.set(i,r),e.delete(i),!0}class Ry{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(h,g)=>{},this._transitionEngine=new uw(t,e,r),this._timelineEngine=new Ar(t,e,r),this._transitionEngine.onRemovalComplete=(h,g)=>this.onRemovalComplete(h,g)}registerTrigger(t,e,r,h,g){const E=t+"-"+h;let S=this._triggerCache[E];if(!S){const R=[],G=Cm(this._driver,g,R);if(R.length)throw new Error(`The animation trigger "${h}" has failed to build due to the following errors:\n - ${R.join("\n - ")}`);S=function qn(i,t,e){return new xr(i,t,e)}(h,G,this._normalizer),this._triggerCache[E]=S}this._transitionEngine.registerTrigger(e,h,S)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,r,h){this._transitionEngine.insertNode(t,e,r,h)}onRemove(t,e,r,h){this._transitionEngine.removeNode(t,e,h||!1,r)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,r,h){if("@"==r.charAt(0)){const[g,E]=am(r);this._timelineEngine.command(g,e,E,h)}else this._transitionEngine.trigger(t,e,r,h)}listen(t,e,r,h,g){if("@"==r.charAt(0)){const[E,S]=am(r);return this._timelineEngine.listen(E,e,S,g)}return this._transitionEngine.listen(t,e,r,h,g)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function uC(i,t){let e=null,r=null;return Array.isArray(t)&&t.length?(e=Sp(t[0]),t.length>1&&(r=Sp(t[t.length-1]))):t&&(e=Sp(t)),e||r?new fw(i,e,r):null}let fw=(()=>{class i{constructor(e,r,h){this._element=e,this._startStyles=r,this._endStyles=h,this._state=0;let g=i.initialStylesByElement.get(e);g||i.initialStylesByElement.set(e,g={}),this._initialStyles=g}start(){this._state<1&&(this._startStyles&&Sl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Sl(this._element,this._initialStyles),this._endStyles&&(Sl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(rh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(rh(this._element,this._endStyles),this._endStyles=null),Sl(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function Sp(i){let t=null;const e=Object.keys(i);for(let r=0;r<e.length;r++){const h=e[r];dC(h)&&(t=t||{},t[h]=i[h])}return t}function dC(i){return"display"===i||"position"===i}const X0="animation",fC="animationend";class Am{constructor(t,e,r,h,g,E,S){this._element=t,this._name=e,this._duration=r,this._delay=h,this._easing=g,this._fillMode=E,this._onDoneFn=S,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=R=>this._handleCallback(R)}apply(){(function pw(i,t){const e=Fy(i,"").trim();let r=0;e.length&&(r=function mw(i,t){let e=0;for(let r=0;r<i.length;r++)i.charAt(r)===t&&e++;return e}(e,",")+1,t=`${e}, ${t}`),Py(i,"",t)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),tb(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){pC(this._element,this._name,"paused")}resume(){pC(this._element,this._name,"running")}setPosition(t){const e=eb(this._element,this._name);this._position=t*this._duration,Py(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),tb(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function gw(i,t){const r=Fy(i,"").split(","),h=ky(r,t);h>=0&&(r.splice(h,1),Py(i,"",r.join(",")))}(this._element,this._name))}}function pC(i,t,e){Py(i,"PlayState",e,eb(i,t))}function eb(i,t){const e=Fy(i,"");return e.indexOf(",")>0?ky(e.split(","),t):ky([e],t)}function ky(i,t){for(let e=0;e<i.length;e++)if(i[e].indexOf(t)>=0)return e;return-1}function tb(i,t,e){e?i.removeEventListener(fC,t):i.addEventListener(fC,t)}function Py(i,t,e,r){const h=X0+t;if(null!=r){const g=i.style[h];if(g.length){const E=g.split(",");E[r]=e,e=E.join(",")}}i.style[h]=e}function Fy(i,t){return i.style[X0+t]||""}class yw{constructor(t,e,r,h,g,E,S,R){this.element=t,this.keyframes=e,this.animationName=r,this._duration=h,this._delay=g,this._finalStyles=S,this._specialStyles=R,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=E||"linear",this.totalTime=h+g,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Am(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(t[r]=e?this._finalStyles[r]:vm(this.element,r))})}this.currentSnapshot=t}}class PD extends Zr.ZN{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=hm(e)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class Sm{constructor(){this._count=0}validateStyleProperty(t){return Qh(t)}matchesElement(t,e){return!1}containsElement(t,e){return Xd(t,e)}query(t,e,r){return eh(t,e,r)}computeStyle(t,e,r){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,r){r=r.map(S=>hm(S));let h=`@keyframes ${e} {\n`,g="";r.forEach(S=>{g=" ";const R=parseFloat(S.offset);h+=`${g}${100*R}% {\n`,g+=" ",Object.keys(S).forEach(G=>{const re=S[G];switch(G){case"offset":return;case"easing":return void(re&&(h+=`${g}animation-timing-function: ${re};\n`));default:return void(h+=`${g}${G}: ${re};\n`)}}),h+=`${g}}\n`}),h+="}\n";const E=document.createElement("style");return E.textContent=h,E}animate(t,e,r,h,g,E=[],S){const R=E.filter(un=>un instanceof yw),G={};ud(r,h)&&R.forEach(un=>{let ni=un.currentSnapshot;Object.keys(ni).forEach(li=>G[li]=ni[li])});const re=function bw(i){let t={};return i&&(Array.isArray(i)?i:[i]).forEach(r=>{Object.keys(r).forEach(h=>{"offset"==h||"easing"==h||(t[h]=r[h])})}),t}(e=wu(t,e,G));if(0==r)return new PD(t,re);const be="gen_css_kf_"+this._count++,Ae=this.buildKeyframeElement(t,be,e);(function vw(i){var t;const e=null===(t=i.getRootNode)||void 0===t?void 0:t.call(i);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(t).appendChild(Ae);const Tt=uC(t,e),Pt=new yw(t,e,be,r,h,g,re,Tt);return Pt.onDestroy(()=>function gC(i){i.parentNode.removeChild(i)}(Ae)),Pt}}class mC{constructor(t,e,r,h){this.element=t,this.keyframes=e,this.options=r,this._specialStyles=h,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,r){return t.animate(e,r)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};if(this.hasStarted()){const e=this._finalKeyframe;Object.keys(e).forEach(r=>{"offset"!=r&&(t[r]=this._finished?e[r]:vm(this.element,r))})}this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class Ew{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(_C().toString()),this._cssKeyframesDriver=new Sm}validateStyleProperty(t){return Qh(t)}matchesElement(t,e){return!1}containsElement(t,e){return Xd(t,e)}query(t,e,r){return eh(t,e,r)}computeStyle(t,e,r){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,r,h,g,E=[],S){if(!S&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,r,h,g,E);const re={duration:r,delay:h,fill:0==h?"both":"forwards"};g&&(re.easing=g);const be={},Ae=E.filter(Tt=>Tt instanceof mC);ud(r,h)&&Ae.forEach(Tt=>{let Pt=Tt.currentSnapshot;Object.keys(Pt).forEach(un=>be[un]=Pt[un])});const st=uC(t,e=wu(t,e=e.map(Tt=>Eu(Tt,!1)),be));return new mC(t,e,re,st)}}function _C(){return vp()&&Element.prototype.animate||{}}let yC=(()=>{class i extends Zr._j{constructor(e,r){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(r.body,{id:"0",encapsulation:c.ifc.None,styles:[],data:{animation:[]}})}build(e){const r=this._nextAnimationId.toString();this._nextAnimationId++;const h=Array.isArray(e)?(0,Zr.vP)(e):e;return lf(this._renderer,null,r,"register",[h]),new Tw(r,this._renderer)}}return i.\u0275fac=function(e){return new(e||i)(c.LFG(c.FYo),c.LFG(pe.K0))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac}),i})();class Tw extends Zr.LC{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new ww(this._id,t,e||{},this._renderer)}}class ww{constructor(t,e,r,h){this.id=t,this.element=e,this._renderer=h,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return lf(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function lf(i,t,e,r,h){return i.setProperty(t,`@@${e}:${r}`,h)}const ib="@.disabled";let Dw=(()=>{class i{constructor(e,r,h){this.delegate=e,this.engine=r,this._zone=h,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(g,E)=>{const S=null==E?void 0:E.parentNode(g);S&&E.removeChild(S,g)}}createRenderer(e,r){const g=this.delegate.createRenderer(e,r);if(!(e&&r&&r.data&&r.data.animation)){let re=this._rendererCache.get(g);return re||(re=new rb("",g,this.engine),this._rendererCache.set(g,re)),re}const E=r.id,S=r.id+"-"+this._currentId;this._currentId++,this.engine.register(S,e);const R=re=>{Array.isArray(re)?re.forEach(R):this.engine.registerTrigger(E,S,e,re.name,re)};return r.data.animation.forEach(R),new Iw(this,S,g,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,r,h){e>=0&&e<this._microtaskId?this._zone.run(()=>r(h)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(g=>{const[E,S]=g;E(S)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,h]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(e){return new(e||i)(c.LFG(c.FYo),c.LFG(Ry),c.LFG(c.R0b))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac}),i})();class rb{constructor(t,e,r){this.namespaceId=t,this.delegate=e,this.engine=r,this.destroyNode=this.delegate.destroyNode?h=>e.destroyNode(h):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,r,h=!0){this.delegate.insertBefore(t,e,r),this.engine.onInsert(this.namespaceId,e,t,h)}removeChild(t,e,r){this.engine.onRemove(this.namespaceId,e,this.delegate,r)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,r,h){this.delegate.setAttribute(t,e,r,h)}removeAttribute(t,e,r){this.delegate.removeAttribute(t,e,r)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,r,h){this.delegate.setStyle(t,e,r,h)}removeStyle(t,e,r){this.delegate.removeStyle(t,e,r)}setProperty(t,e,r){"@"==e.charAt(0)&&e==ib?this.disableAnimations(t,!!r):this.delegate.setProperty(t,e,r)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,r){return this.delegate.listen(t,e,r)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Iw extends rb{constructor(t,e,r,h){super(e,r,h),this.factory=t,this.namespaceId=e}setProperty(t,e,r){"@"==e.charAt(0)?"."==e.charAt(1)&&e==ib?this.disableAnimations(t,r=void 0===r||!!r):this.engine.process(this.namespaceId,t,e.substr(1),r):this.delegate.setProperty(t,e,r)}listen(t,e,r){if("@"==e.charAt(0)){const h=function vC(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(t);let g=e.substr(1),E="";return"@"!=g.charAt(0)&&([g,E]=function Aw(i){const t=i.indexOf(".");return[i.substring(0,t),i.substr(t+1)]}(g)),this.engine.listen(this.namespaceId,h,g,E,S=>{this.factory.scheduleListenerCallback(S._data||-1,r,S)})}return this.delegate.listen(t,e,r)}}let sb=(()=>{class i extends Ry{constructor(e,r,h){super(e.body,r,h)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(e){return new(e||i)(c.LFG(pe.K0),c.LFG(ad),c.LFG(T))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac}),i})();const ob=new c.OlP("AnimationModuleType"),CC=[{provide:Zr._j,useClass:yC},{provide:T,useFactory:function bC(){return new z}},{provide:Ry,useClass:sb},{provide:c.FYo,useFactory:function EC(i,t,e){return new Dw(i,t,e)},deps:[_.se,Ry,c.R0b]}],TC=[{provide:ad,useFactory:function Sw(){return function Cw(){return"function"==typeof _C()}()?new Ew:new Sm}},{provide:ob,useValue:"BrowserAnimations"},...CC],ab=[{provide:ad,useClass:th},{provide:ob,useValue:"NoopAnimations"},...CC];let Nw=(()=>{class i{static withConfig(e){return{ngModule:i,providers:e.disableAnimations?ab:TC}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({providers:TC,imports:[_.b2]}),i})();var xw=V(727);const Ow=["sliderWrapper"],rc=td({passive:!1}),Lw={provide:Ee.JU,useExisting:(0,c.Gpc)(()=>lb),multi:!0};class wC{}const DC=Zh(_y(my(class{constructor(i){this._elementRef=i}}),"accent"));let lb=(()=>{class i extends DC{constructor(e,r,h,g,E,S,R,G){super(e),this._focusMonitor=r,this._changeDetectorRef=h,this._dir=g,this._ngZone=S,this._animationMode=G,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new c.vpe,this.input=new c.vpe,this.valueChange=new c.vpe,this.onTouched=()=>{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=xw.w0.EMPTY,this._pointerDown=re=>{this.disabled||this._isSliding||!cf(re)&&0!==re.button||this._ngZone.run(()=>{this._touchId=cf(re)?function Bw(i,t){for(let e=0;e<i.touches.length;e++){const r=i.touches[e].target;if(t===r||t.contains(r))return i.touches[e].identifier}}(re,this._elementRef.nativeElement):void 0;const be=cb(re,this._touchId);if(be){const Ae=this.value;this._isSliding="pointer",this._lastPointerEvent=re,this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(re),this._focusHostElement(),this._updateValueFromPosition(be),this._valueOnSlideStart=Ae,re.cancelable&&re.preventDefault(),Ae!=this.value&&this._emitInputEvent()}})},this._pointerMove=re=>{if("pointer"===this._isSliding){const be=cb(re,this._touchId);if(be){re.preventDefault();const Ae=this.value;this._lastPointerEvent=re,this._updateValueFromPosition(be),Ae!=this.value&&this._emitInputEvent()}}},this._pointerUp=re=>{"pointer"===this._isSliding&&(!cf(re)||"number"!=typeof this._touchId||ub(re.changedTouches,this._touchId))&&(re.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&&!this.disabled&&this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=R,this.tabIndex=parseInt(E)||0,S.runOutsideAngular(()=>{const re=e.nativeElement;re.addEventListener("mousedown",this._pointerDown,rc),re.addEventListener("touchstart",this._pointerDown,rc)})}get invert(){return this._invert}set invert(e){this._invert=Vh(e)}get max(){return this._max}set max(e){this._max=pu(e,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(e){this._min=pu(e,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(e){this._step=pu(e,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(e){this._thumbLabel=Vh(e)}get tickInterval(){return this._tickInterval}set tickInterval(e){this._tickInterval="auto"===e?"auto":"number"==typeof e||"string"==typeof e?pu(e,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(e){if(e!==this._value){let r=pu(e,0);this._roundToDecimal&&r!==this.min&&r!==this.max&&(r=parseFloat(r.toFixed(this._roundToDecimal))),this._value=r,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(e){this._vertical=Vh(e)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(e){this._focusHostElement(e)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const r=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${r})`}}_getTrackFillStyles(){const e=this.percent,h=this.vertical?`1, ${e}, 1`:`${e}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${h})`,display:0===e?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let e=100*this._tickIntervalPercent,S={backgroundSize:this.vertical?`2px ${e}%`:`${e}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${e/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const R=this._shouldInvertAxis();let G;G=this.vertical?R?"Bottom":"Top":R?"Right":"Left",S[`padding${G}`]=`${this._getThumbGap()}px`}return S}_getThumbContainerStyles(){const e=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?e:!e)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const e=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?e:!e}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{this._isActive=!!e&&"keyboard"!==e,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const e=this._elementRef.nativeElement;e.removeEventListener("mousedown",this._pointerDown,rc),e.removeEventListener("touchstart",this._pointerDown,rc),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(e){if(this.disabled||function op(i,...t){return t.length?t.some(e=>i[e]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}(e)||this._isSliding&&"keyboard"!==this._isSliding)return;const r=this.value;switch(e.keyCode){case 33:this._increment(10);break;case 34:this._increment(-10);break;case 35:this.value=this.max;break;case 36:this.value=this.min;break;case 37:this._increment("rtl"==this._getDirection()?1:-1);break;case 38:this._increment(1);break;case 39:this._increment("rtl"==this._getDirection()?-1:1);break;case 40:this._increment(-1);break;default:return}r!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding="keyboard",e.preventDefault()}_onKeyup(){"keyboard"===this._isSliding&&(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(e){const r=this._document,h=cf(e),E=h?"touchend":"mouseup";r.addEventListener(h?"touchmove":"mousemove",this._pointerMove,rc),r.addEventListener(E,this._pointerUp,rc),h&&r.addEventListener("touchcancel",this._pointerUp,rc);const S=this._getWindow();void 0!==S&&S&&S.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const e=this._document;e.removeEventListener("mousemove",this._pointerMove,rc),e.removeEventListener("mouseup",this._pointerUp,rc),e.removeEventListener("touchmove",this._pointerMove,rc),e.removeEventListener("touchend",this._pointerUp,rc),e.removeEventListener("touchcancel",this._pointerUp,rc);const r=this._getWindow();void 0!==r&&r&&r.removeEventListener("blur",this._windowBlur)}_increment(e){const r=this._clamp(this.value||0,this.min,this.max);this.value=this._clamp(r+this.step*e,this.min,this.max)}_updateValueFromPosition(e){if(!this._sliderDimensions)return;let E=this._clamp(((this.vertical?e.y:e.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(E=1-E),0===E)this.value=this.min;else if(1===E)this.value=this.max;else{const S=this._calculateValue(E),R=Math.round((S-this.min)/this.step)*this.step+this.min;this.value=this._clamp(R,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(!this.tickInterval||!this._sliderDimensions)return;let e;if("auto"==this.tickInterval){let r=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width;e=Math.ceil(30/(r*this.step/(this.max-this.min)))*this.step/r}else e=this.tickInterval*this.step/(this.max-this.min);this._tickIntervalPercent=IC(e)?e:0}_createChangeEvent(e=this.value){let r=new wC;return r.source=this,r.value=e,r}_calculatePercentage(e){const r=((e||0)-this.min)/(this.max-this.min);return IC(r)?r:0}_calculateValue(e){return this.min+e*(this.max-this.min)}_clamp(e,r=0,h=1){return Math.max(r,Math.min(e,h))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(e){this._elementRef.nativeElement.focus(e)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(e){this.value=e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}}return i.\u0275fac=function(e){return new(e||i)(c.Y36(c.SBq),c.Y36(tc),c.Y36(c.sBO),c.Y36(Hv,8),c.$8M("tabindex"),c.Y36(c.R0b),c.Y36(pe.K0),c.Y36(ob,8))},i.\u0275cmp=c.Xpm({type:i,selectors:[["mat-slider"]],viewQuery:function(e,r){if(1&e&&c.Gf(Ow,5),2&e){let h;c.iGM(h=c.CRH())&&(r._sliderWrapper=h.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(e,r){1&e&&c.NdJ("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()})("keydown",function(g){return r._onKeydown(g)})("keyup",function(){return r._onKeyup()})("mouseenter",function(){return r._onMouseenter()})("selectstart",function(g){return g.preventDefault()}),2&e&&(c.Ikx("tabIndex",r.tabIndex),c.uIk("aria-disabled",r.disabled)("aria-valuemax",r.max)("aria-valuemin",r.min)("aria-valuenow",r.value)("aria-valuetext",null==r.valueText?r.displayValue:r.valueText)("aria-orientation",r.vertical?"vertical":"horizontal"),c.ekj("mat-slider-disabled",r.disabled)("mat-slider-has-ticks",r.tickInterval)("mat-slider-horizontal",!r.vertical)("mat-slider-axis-inverted",r._shouldInvertAxis())("mat-slider-invert-mouse-coords",r._shouldInvertMouseCoords())("mat-slider-sliding",r._isSliding)("mat-slider-thumb-label-showing",r.thumbLabel)("mat-slider-vertical",r.vertical)("mat-slider-min-value",r._isMinValue())("mat-slider-hide-last-tick",r.disabled||r._isMinValue()&&r._getThumbGap()&&r._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",displayWith:"displayWith",valueText:"valueText",vertical:"vertical"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[c._Bn([Lw]),c.qOj],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(e,r){1&e&&(c.TgZ(0,"div",0,1),c.TgZ(2,"div",2),c._UZ(3,"div",3),c._UZ(4,"div",4),c.qZA(),c.TgZ(5,"div",5),c._UZ(6,"div",6),c.qZA(),c.TgZ(7,"div",7),c._UZ(8,"div",8),c._UZ(9,"div",9),c.TgZ(10,"div",10),c.TgZ(11,"span",11),c._uU(12),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.Q6J("ngStyle",r._getTrackBackgroundStyles()),c.xp6(1),c.Q6J("ngStyle",r._getTrackFillStyles()),c.xp6(1),c.Q6J("ngStyle",r._getTicksContainerStyles()),c.xp6(1),c.Q6J("ngStyle",r._getTicksStyles()),c.xp6(1),c.Q6J("ngStyle",r._getThumbContainerStyles()),c.xp6(5),c.Oqu(r.displayValue))},directives:[pe.PC],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid transparent;border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}\n'],encapsulation:2,changeDetection:0}),i})();function IC(i){return!isNaN(i)&&isFinite(i)}function cf(i){return"t"===i.type[0]}function cb(i,t){let e;return e=cf(i)?"number"==typeof t?ub(i.touches,t)||ub(i.changedTouches,t):i.touches[0]||i.changedTouches[0]:i,e?{x:e.clientX,y:e.clientY}:void 0}function ub(i,t){for(let e=0;e<i.length;e++)if(i[e].identifier===t)return i[e]}let db=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[pe.ez,im],im]}),i})(),hb=(()=>{class i{transform(e,r){let h=[];if(!r||(null==r?void 0:r.length)<1||""==r.trim())return e;for(const g of e)g.paciente.nombre.toLowerCase().indexOf(r.toLowerCase())>-1&&(h=[...h,g]);return h}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=c.Yjl({name:"paciente",type:i,pure:!0}),i})(),AC=(()=>{class i{transform(e,r){let h=[];if(!r||(null==r?void 0:r.length)<1||""==r.trim())return e;for(const g of e)g.profesional.nombre.toLowerCase().indexOf(r.toLowerCase())>-1&&(h=[...h,g]);return h}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=c.Yjl({name:"especialista",type:i,pure:!0}),i})(),fb=(()=>{class i{transform(e,r){let h=[];if(!r||(null==r?void 0:r.length)<1||""==r.trim())return e;for(const g of e)g.profesional.especialidad.toLowerCase().indexOf(r.toLowerCase())>-1&&(h=[...h,g]);return h}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=c.Yjl({name:"especialidad",type:i,pure:!0}),i})();function Vw(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"div",2),c.TgZ(1,"div",4),c.TgZ(2,"label",5),c._uU(3,"Especialista"),c.qZA(),c.TgZ(4,"input",19),c.NdJ("ngModelChange",function(h){return c.CHM(e),c.oxw().filtroEspecialista=h}),c.qZA(),c.qZA(),c.qZA()}if(2&i){const e=c.oxw();c.xp6(4),c.Q6J("ngModel",e.filtroEspecialista)}}function Uw(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"div",2),c.TgZ(1,"div",4),c.TgZ(2,"label",5),c._uU(3,"Paciente"),c.qZA(),c.TgZ(4,"input",20),c.NdJ("ngModelChange",function(h){return c.CHM(e),c.oxw().filtroPaciente=h}),c.qZA(),c.qZA(),c.qZA()}if(2&i){const e=c.oxw();c.xp6(4),c.Q6J("ngModel",e.filtroPaciente)}}function pb(i,t){1&i&&(c.TgZ(0,"th",9),c._uU(1,"Especialista"),c.qZA())}function jw(i,t){1&i&&(c.TgZ(0,"th",9),c._uU(1,"Paciente"),c.qZA())}function SC(i,t){if(1&i&&(c.TgZ(0,"td"),c._uU(1),c.qZA()),2&i){const e=c.oxw().$implicit;c.xp6(1),c.AsE("",e.profesional.nombre," ",e.profesional.apellido,"")}}function $w(i,t){if(1&i&&(c.TgZ(0,"td"),c._uU(1),c.qZA()),2&i){const e=c.oxw().$implicit;c.xp6(1),c.AsE("",e.paciente.nombre," ",e.paciente.apellido,"")}}function NC(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"button",25),c.NdJ("click",function(){c.CHM(e);const h=c.oxw().$implicit,g=c.oxw(),E=c.MAs(37);return g.btnCancelar(h,E)}),c._uU(1,"Cancelar"),c.qZA()}}function Hw(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"button",26),c.NdJ("click",function(){c.CHM(e);const h=c.oxw().$implicit,g=c.oxw(),E=c.MAs(39);return g.btnFinalizar(h,E)}),c._uU(1,"Finalizar"),c.qZA()}}function MC(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"button",25),c.NdJ("click",function(){c.CHM(e);const h=c.oxw().$implicit,g=c.oxw(),E=c.MAs(37);return g.btnCancelar(h,E)}),c._uU(1,"Cancelar"),c.qZA()}}function BD(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"button",27),c.NdJ("click",function(){c.CHM(e);const h=c.oxw().$implicit;return c.oxw().btnAceptar(h)}),c._uU(1,"Aceptar"),c.qZA()}}function Gw(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"button",25),c.NdJ("click",function(){c.CHM(e);const h=c.oxw().$implicit,g=c.oxw(),E=c.MAs(41);return g.btnCancelar(h,E)}),c._uU(1,"Rechazar"),c.qZA()}}function Nm(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"button",27),c.NdJ("click",function(){c.CHM(e);const h=c.oxw().$implicit,g=c.oxw(),E=c.MAs(47);return g.btnVerComentario(h,E)}),c._uU(1,"Ver Rese\xf1a"),c.qZA()}}function Zw(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"button",27),c.NdJ("click",function(){c.CHM(e);const h=c.oxw().$implicit,g=c.oxw(),E=c.MAs(49);return g.btnVerDiagnostico(h,E)}),c._uU(1,"Ver Diagnostico"),c.qZA()}}function Mp(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"button",27),c.NdJ("click",function(){c.CHM(e);const h=c.oxw().$implicit,g=c.oxw(),E=c.MAs(45);return g.btnCalificarAtencion(h,E)}),c._uU(1,"Calificar Atencion"),c.qZA()}}function Mm(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"button",27),c.NdJ("click",function(){c.CHM(e);const h=c.oxw().$implicit,g=c.oxw(),E=c.MAs(43);return g.btnCompletarEncuesta(h,E)}),c._uU(1,"Completar encuesta"),c.qZA()}}function Ww(i,t){if(1&i&&(c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.YNc(3,SC,2,2,"td",21),c.YNc(4,$w,2,2,"td",21),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td"),c._uU(10),c.qZA(),c.TgZ(11,"td"),c.YNc(12,NC,2,0,"button",22),c.YNc(13,Hw,2,0,"button",23),c.YNc(14,MC,2,0,"button",22),c.YNc(15,BD,2,0,"button",24),c.YNc(16,Gw,2,0,"button",22),c.YNc(17,Nm,2,0,"button",24),c.YNc(18,Zw,2,0,"button",24),c.YNc(19,Mp,2,0,"button",24),c.YNc(20,Mm,2,0,"button",24),c.qZA(),c.qZA()),2&i){const e=t.$implicit,r=c.oxw();c.xp6(2),c.Oqu(e.profesional.especialidad),c.xp6(1),c.Q6J("ngIf","paciente"==r.as.user.perfil),c.xp6(1),c.Q6J("ngIf","profesional"==r.as.user.perfil),c.xp6(2),c.AsE("",e.dia[1]," - ",e.dia[0],""),c.xp6(2),c.Oqu(e.hora),c.xp6(2),c.Oqu(e.estado),c.xp6(2),c.Q6J("ngIf","pendiente"==e.estado&&"paciente"==r.as.user.perfil),c.xp6(1),c.Q6J("ngIf","aceptado"==e.estado&&"profesional"==r.as.user.perfil),c.xp6(1),c.Q6J("ngIf","aceptado"==e.estado&&"profesional"==r.as.user.perfil),c.xp6(1),c.Q6J("ngIf","pendiente"==e.estado&&"profesional"==r.as.user.perfil),c.xp6(1),c.Q6J("ngIf","pendiente"==e.estado&&"profesional"==r.as.user.perfil),c.xp6(1),c.Q6J("ngIf",""!=e.comentario),c.xp6(1),c.Q6J("ngIf",""!=e.comentario&&""!=e.diagnostico),c.xp6(1),c.Q6J("ngIf",""==e.calificacion&&"finalizado"==e.estado),c.xp6(1),c.Q6J("ngIf",""!=e.comentario&&"finalizado"==e.estado&&""==e.encuesta)}}function VD(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"div",28),c.TgZ(1,"h4",29),c._uU(2,"Motivo de cancelacion"),c.qZA(),c.TgZ(3,"button",30),c.NdJ("click",function(){return c.CHM(e).$implicit.dismiss("Cross click")}),c.qZA(),c.qZA(),c.TgZ(4,"div",31),c.TgZ(5,"div",4),c.TgZ(6,"label",32),c._uU(7,"Por que quiere cancelar el turno?"),c.qZA(),c.TgZ(8,"div",33),c.TgZ(9,"textarea",34),c.NdJ("ngModelChange",function(h){return c.CHM(e),c.oxw().msjCancelar=h}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(10,"div",35),c.TgZ(11,"button",36),c.NdJ("click",function(){const g=c.CHM(e).$implicit,E=c.oxw();return g.close(E.msjCancelar)}),c._uU(12,"Enviar"),c.qZA(),c.qZA()}if(2&i){const e=c.oxw();c.xp6(9),c.Q6J("ngModel",e.msjCancelar),c.xp6(2),c.Q6J("disabled",""==e.msjCancelar)}}function xC(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"div",28),c.TgZ(1,"h4",29),c._uU(2,"Cierre del turno"),c.qZA(),c.TgZ(3,"button",30),c.NdJ("click",function(){return c.CHM(e).$implicit.dismiss("Cross click")}),c.qZA(),c.qZA(),c.TgZ(4,"div",31),c.TgZ(5,"div",4),c.TgZ(6,"label",32),c._uU(7,"Mensaje sobre el turno"),c.qZA(),c.TgZ(8,"div",33),c.TgZ(9,"textarea",34),c.NdJ("ngModelChange",function(h){return c.CHM(e),c.oxw().msjCancelar=h}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(10,"div",4),c.TgZ(11,"label",32),c._uU(12,"Diagnostico"),c.qZA(),c.TgZ(13,"div",33),c.TgZ(14,"textarea",37),c.NdJ("ngModelChange",function(h){return c.CHM(e),c.oxw().msjDiagnostico=h}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(15,"div",35),c.TgZ(16,"button",36),c.NdJ("click",function(){const g=c.CHM(e).$implicit,E=c.oxw();return g.close(E.msjCancelar)}),c._uU(17,"Enviar"),c.qZA(),c.qZA()}if(2&i){const e=c.oxw();c.xp6(9),c.Q6J("ngModel",e.msjCancelar),c.xp6(5),c.Q6J("ngModel",e.msjDiagnostico),c.xp6(2),c.Q6J("disabled",""==e.msjCancelar)}}function qw(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"div",28),c.TgZ(1,"h4",29),c._uU(2,"Motivo del rechazo"),c.qZA(),c.TgZ(3,"button",30),c.NdJ("click",function(){return c.CHM(e).$implicit.dismiss("Cross click")}),c.qZA(),c.qZA(),c.TgZ(4,"div",31),c.TgZ(5,"div",4),c.TgZ(6,"label",32),c._uU(7,"Por que quiere rechazar el turno?"),c.qZA(),c.TgZ(8,"div",33),c.TgZ(9,"textarea",34),c.NdJ("ngModelChange",function(h){return c.CHM(e),c.oxw().msjCancelar=h}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(10,"div",35),c.TgZ(11,"button",36),c.NdJ("click",function(){const g=c.CHM(e).$implicit,E=c.oxw();return g.close(E.msjCancelar)}),c._uU(12,"Enviar"),c.qZA(),c.qZA()}if(2&i){const e=c.oxw();c.xp6(9),c.Q6J("ngModel",e.msjCancelar),c.xp6(2),c.Q6J("disabled",""==e.msjCancelar)}}function zw(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"div",28),c.TgZ(1,"h4",29),c._uU(2,"Encuesta de atencion"),c.qZA(),c.TgZ(3,"button",30),c.NdJ("click",function(){return c.CHM(e).$implicit.dismiss("Cross click")}),c.qZA(),c.qZA(),c.TgZ(4,"div",31),c.TgZ(5,"div",4),c.TgZ(6,"label",32),c._uU(7,"Volveria a asistir a esta clinica?"),c.qZA(),c.TgZ(8,"div",33),c.TgZ(9,"textarea",34),c.NdJ("ngModelChange",function(h){return c.CHM(e),c.oxw().msjCancelar=h}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(10,"div",4),c.TgZ(11,"label",32),c._uU(12,"Que tan satisfactoria fue su atencion 1-10"),c.qZA(),c.TgZ(13,"div",33),c.TgZ(14,"mat-slider",38),c.NdJ("ngModelChange",function(h){return c.CHM(e),c.oxw().slideEncuesta=h}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(15,"div",35),c.TgZ(16,"button",36),c.NdJ("click",function(){const g=c.CHM(e).$implicit,E=c.oxw();return g.close(E.msjCancelar)}),c._uU(17,"Enviar"),c.qZA(),c.qZA()}if(2&i){const e=c.oxw();c.xp6(9),c.Q6J("ngModel",e.msjCancelar),c.xp6(5),c.Q6J("ngModel",e.slideEncuesta),c.xp6(2),c.Q6J("disabled",""==e.msjCancelar)}}function Kw(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"div",28),c.TgZ(1,"h4",29),c._uU(2,"Deje un comentario sobre su atencion"),c.qZA(),c.TgZ(3,"button",30),c.NdJ("click",function(){return c.CHM(e).$implicit.dismiss("Cross click")}),c.qZA(),c.qZA(),c.TgZ(4,"div",31),c.TgZ(5,"div",4),c.TgZ(6,"div",33),c.TgZ(7,"textarea",34),c.NdJ("ngModelChange",function(h){return c.CHM(e),c.oxw().msjCancelar=h}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(8,"div",35),c.TgZ(9,"button",36),c.NdJ("click",function(){const g=c.CHM(e).$implicit,E=c.oxw();return g.close(E.msjCancelar)}),c._uU(10,"Enviar"),c.qZA(),c.qZA()}if(2&i){const e=c.oxw();c.xp6(7),c.Q6J("ngModel",e.msjCancelar),c.xp6(2),c.Q6J("disabled",""==e.msjCancelar)}}function Yw(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"div",28),c.TgZ(1,"h4",29),c._uU(2,"Mensaje de rese\xf1a"),c.qZA(),c.TgZ(3,"button",30),c.NdJ("click",function(){return c.CHM(e).$implicit.dismiss("Cross click")}),c.qZA(),c.qZA(),c.TgZ(4,"div",31),c.TgZ(5,"div",4),c.TgZ(6,"label",32),c._uU(7),c.qZA(),c.qZA(),c.qZA(),c.TgZ(8,"div",35),c.TgZ(9,"button",39),c.NdJ("click",function(){return c.CHM(e).$implicit.dismiss("Cross click")}),c._uU(10,"Cerrar"),c.qZA(),c.qZA()}if(2&i){const e=c.oxw();c.xp6(7),c.Oqu(e.msjComentario)}}function OC(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"div",28),c.TgZ(1,"h4",29),c._uU(2,"Diagnostico del paciente"),c.qZA(),c.TgZ(3,"button",30),c.NdJ("click",function(){return c.CHM(e).$implicit.dismiss("Cross click")}),c.qZA(),c.qZA(),c.TgZ(4,"div",31),c.TgZ(5,"div",4),c.TgZ(6,"label",32),c._uU(7),c.qZA(),c.qZA(),c.qZA(),c.TgZ(8,"div",35),c.TgZ(9,"button",39),c.NdJ("click",function(){return c.CHM(e).$implicit.dismiss("Cross click")}),c._uU(10,"Cerrar"),c.qZA(),c.qZA()}if(2&i){const e=c.oxw();c.xp6(7),c.Oqu(e.msjComentario)}}let gb=(()=>{class i{constructor(e,r,h,g){this.as=e,this.fs=r,this.modalService=h,this.toastr=g,this.turnos=[],this.msjCancelar="",this.fs.ListaTurnos().subscribe(E=>{this.turnos=[],E.forEach("profesional"==this.as.user.perfil?S=>{S.profesional.dni==this.as.user.dni&&this.turnos.push(S)}:S=>{S.paciente.dni==this.as.user.dni&&this.turnos.push(S)})})}openCancelacion(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(r=>{this.closeResult=`Closed with: ${r}`,this.turnoSeleccionado.comentario=r,this.turnoSeleccionado.estado="cancelado",this.fs.ModificarTurno(this.turnoSeleccionado,this.turnoSeleccionado.id).then(()=>{this.toastr.error("Se cancelo el turno exitosamente","Turno cancelado!!")})},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`})}openFinalizacion(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(r=>{this.closeResult=`Closed with: ${r}`,this.turnoSeleccionado.comentario=r,this.turnoSeleccionado.diagnostico=this.msjDiagnostico,this.turnoSeleccionado.estado="finalizado",this.fs.ModificarTurno(this.turnoSeleccionado,this.turnoSeleccionado.id).then(()=>{this.toastr.warning("Se finalizo el turno exitosamente","Turno finalizado!!")})},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`})}openCalificarAtencion(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(r=>{this.closeResult=`Closed with: ${r}`,this.turnoSeleccionado.calificacion=r,this.fs.ModificarTurno(this.turnoSeleccionado,this.turnoSeleccionado.id)},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`})}openCompletarEncuesta(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(r=>{this.closeResult=`Closed with: ${r}`,this.turnoSeleccionado.encuesta={mensaje:r,puntaje:this.slideEncuesta},this.fs.ModificarTurno(this.turnoSeleccionado,this.turnoSeleccionado.id)},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`})}openComentario(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(r=>{this.closeResult=`Closed with: ${r}`},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`})}openDiagnostico(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(r=>{this.closeResult=`Closed with: ${r}`},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`})}getDismissReason(e){return e===sl.ESC?"by pressing ESC":e===sl.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${e}`}btnCancelar(e,r){this.turnoSeleccionado=e,this.openCancelacion(r)}btnAceptar(e){this.turnoSeleccionado=e,this.turnoSeleccionado.estado="aceptado",this.fs.ModificarTurno(this.turnoSeleccionado,this.turnoSeleccionado.id)}btnFinalizar(e,r){this.turnoSeleccionado=e,this.openFinalizacion(r)}btnCompletarEncuesta(e,r){this.turnoSeleccionado=e,this.openCompletarEncuesta(r)}btnVerComentario(e,r){this.msjComentario=e.comentario,this.openComentario(r)}btnVerDiagnostico(e,r){this.msjComentario=e.diagnostico,this.openComentario(r)}btnCalificarAtencion(e,r){this.turnoSeleccionado=e,this.openCalificarAtencion(r)}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)(c.Y36(Ie.e),c.Y36(Ze.C),c.Y36(aa),c.Y36(Ge._W))},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-mis-turnos"]],decls:50,vars:15,consts:[[1,"container","text-center"],[1,"row"],[1,"col"],["class","col",4,"ngIf"],[1,"mb-3"],[1,"form-label"],["type","email","id","exampleFormControlInput1","placeholder","Especialidad",1,"form-control",3,"ngModel","ngModelChange"],[1,"row",2,"margin-top","50px"],[1,"table"],["scope","col"],["scope","col",4,"ngIf"],[4,"ngFor","ngForOf"],["contentCancelacion",""],["contentFinalizar",""],["contentRechazar",""],["contentEncuesta",""],["contentAtencion",""],["contentComentario",""],["contentDiagnostico",""],["type","email","id","exampleFormControlInput1","placeholder","Nombre especialista",1,"form-control",3,"ngModel","ngModelChange"],["type","email","id","exampleFormControlInput1","placeholder","Nombre paciente",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf"],["type","button","class","btn btn-outline-danger btn-lg",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-warning btn-lg",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-success btn-lg",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger","btn-lg",3,"click"],["type","button",1,"btn","btn-outline-warning","btn-lg",3,"click"],["type","button",1,"btn","btn-outline-success","btn-lg",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["for","dateOfBirth"],[1,"input-group"],["placeholder","Deje un mensaje",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"disabled","click"],["placeholder","Deje un diagnostico",1,"form-control",3,"ngModel","ngModelChange"],["thumbLabel","","tickInterval","1","step","1","min","1","max","10","aria-label","units",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-outline-dark",3,"click"]],template:function(e,r){1&e&&(c._UZ(0,"app-nav"),c.TgZ(1,"div",0),c.TgZ(2,"div",1),c.TgZ(3,"div",2),c.TgZ(4,"h1"),c._uU(5,"Filtro turnos"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"div",1),c.YNc(7,Vw,5,1,"div",3),c.YNc(8,Uw,5,1,"div",3),c.TgZ(9,"div",2),c.TgZ(10,"div",4),c.TgZ(11,"label",5),c._uU(12,"Especialidad"),c.qZA(),c.TgZ(13,"input",6),c.NdJ("ngModelChange",function(g){return r.filtroEspecialidad=g}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(14,"div",7),c.TgZ(15,"div",2),c.TgZ(16,"table",8),c.TgZ(17,"thead"),c.TgZ(18,"tr"),c.TgZ(19,"th",9),c._uU(20,"Especialidad"),c.qZA(),c.YNc(21,pb,2,0,"th",10),c.YNc(22,jw,2,0,"th",10),c.TgZ(23,"th",9),c._uU(24,"Dia"),c.qZA(),c.TgZ(25,"th",9),c._uU(26,"Hora"),c.qZA(),c.TgZ(27,"th",9),c._uU(28,"Estado"),c.qZA(),c.TgZ(29,"th",9),c._uU(30,"Accion"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(31,"tbody"),c.YNc(32,Ww,21,16,"tr",11),c.ALo(33,"paciente"),c.ALo(34,"especialista"),c.ALo(35,"especialidad"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(36,VD,13,2,"ng-template",null,12,c.W1O),c.YNc(38,xC,18,3,"ng-template",null,13,c.W1O),c.YNc(40,qw,13,2,"ng-template",null,14,c.W1O),c.YNc(42,zw,18,3,"ng-template",null,15,c.W1O),c.YNc(44,Kw,11,2,"ng-template",null,16,c.W1O),c.YNc(46,Yw,11,1,"ng-template",null,17,c.W1O),c.YNc(48,OC,11,1,"ng-template",null,18,c.W1O)),2&e&&(c.xp6(7),c.Q6J("ngIf","paciente"==r.as.user.perfil),c.xp6(1),c.Q6J("ngIf","profesional"==r.as.user.perfil),c.xp6(5),c.Q6J("ngModel",r.filtroEspecialidad),c.xp6(8),c.Q6J("ngIf","paciente"==r.as.user.perfil),c.xp6(1),c.Q6J("ngIf","profesional"==r.as.user.perfil),c.xp6(10),c.Q6J("ngForOf",c.xi3(33,6,c.xi3(34,9,c.xi3(35,12,r.turnos,r.filtroEspecialidad),r.filtroEspecialista),r.filtroPaciente)))},directives:[uu,pe.O5,Ee.Fj,Ee.JJ,Ee.On,pe.sg,lb],pipes:[hb,AC,fb],styles:["mat-slider[_ngcontent-%COMP%]{width:300px}.mat-accent[_ngcontent-%COMP%]   .mat-slider-track-fill[_ngcontent-%COMP%], .mat-slider-thumb-label[_ngcontent-%COMP%], .mat-slider-thumb[_ngcontent-%COMP%]{background-color:red!important}"]}),i})();function mb(i,t){if(1&i&&(c.TgZ(0,"div",15),c.TgZ(1,"h6"),c._uU(2,"Obra Social"),c.qZA(),c.TgZ(3,"p",14),c._uU(4),c.qZA(),c.qZA()),2&i){const e=c.oxw();c.xp6(4),c.Oqu(e.as.user.obraSocial)}}function By(i,t){if(1&i&&(c.TgZ(0,"div",15),c.TgZ(1,"h6"),c._uU(2,"Especialidad"),c.qZA(),c.TgZ(3,"p",14),c._uU(4),c.qZA(),c.qZA()),2&i){const e=c.oxw();c.xp6(4),c.Oqu(e.as.user.especialidad)}}let xm=(()=>{class i{constructor(e){this.as=e}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)(c.Y36(Ie.e))},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-perfil"]],decls:51,vars:9,consts:[[1,"vh-95",2,"margin-top","200px"],[1,"container","py-5","h-95"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col","col-lg-6","mb-4","mb-lg-0"],[1,"card","mb-3",2,"border-radius",".5rem"],[1,"row","g-0"],[1,"col-md-4","gradient-custom","text-center","text-white",2,"border-top-left-radius",".5rem","border-bottom-left-radius",".5rem"],["alt","Avatar",1,"img-fluid","my-5",2,"width","80px",3,"src"],[1,"far","fa-edit","mb-5"],[1,"col-md-8"],[1,"card-body","p-4"],[1,"mt-0","mb-4"],[1,"row","pt-1"],[1,"col-8","mb-3"],[1,"text-muted"],[1,"col-4","mb-3"],["class","col-4 mb-3",4,"ngIf"],[1,"d-flex","justify-content-start"],["href","#!"],[1,"fab","fa-facebook-f","fa-lg","me-3"],[1,"fab","fa-twitter","fa-lg","me-3"],[1,"fab","fa-instagram","fa-lg"]],template:function(e,r){1&e&&(c._UZ(0,"app-nav"),c.TgZ(1,"section",0),c.TgZ(2,"div",1),c.TgZ(3,"div",2),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"div",6),c._UZ(8,"img",7),c.TgZ(9,"h1"),c._uU(10),c.qZA(),c.TgZ(11,"h2"),c._uU(12),c.qZA(),c._UZ(13,"i",8),c.qZA(),c.TgZ(14,"div",9),c.TgZ(15,"div",10),c.TgZ(16,"h2"),c._uU(17,"Mi perfil"),c.qZA(),c._UZ(18,"hr",11),c.TgZ(19,"div",12),c.TgZ(20,"div",13),c.TgZ(21,"h6"),c._uU(22,"Email"),c.qZA(),c.TgZ(23,"p",14),c._uU(24),c.qZA(),c.qZA(),c.TgZ(25,"div",15),c.TgZ(26,"h6"),c._uU(27,"Dni"),c.qZA(),c.TgZ(28,"p",14),c._uU(29),c.qZA(),c.qZA(),c.qZA(),c._UZ(30,"hr",11),c.TgZ(31,"div",12),c.YNc(32,mb,5,1,"div",16),c.YNc(33,By,5,1,"div",16),c.TgZ(34,"div",15),c.TgZ(35,"h6"),c._uU(36,"Edad"),c.qZA(),c.TgZ(37,"p",14),c._uU(38),c.qZA(),c.qZA(),c.TgZ(39,"div",15),c.TgZ(40,"h6"),c._uU(41,"Perfil"),c.qZA(),c.TgZ(42,"p",14),c._uU(43),c.qZA(),c.qZA(),c.qZA(),c.TgZ(44,"div",17),c.TgZ(45,"a",18),c._UZ(46,"i",19),c.qZA(),c.TgZ(47,"a",18),c._UZ(48,"i",20),c.qZA(),c.TgZ(49,"a",18),c._UZ(50,"i",21),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(8),c.s9C("src",r.as.user.foto,c.LSH),c.xp6(2),c.Oqu(r.as.user.nombre),c.xp6(2),c.Oqu(r.as.user.apellido),c.xp6(12),c.Oqu(r.as.user.mail),c.xp6(5),c.Oqu(r.as.user.dni),c.xp6(3),c.Q6J("ngIf",r.as.user.obraSocial),c.xp6(1),c.Q6J("ngIf",r.as.user.especialidad),c.xp6(5),c.Oqu(r.as.user.edad),c.xp6(5),c.Oqu(r.as.user.perfil))},directives:[uu,pe.O5],styles:[".gradient-custom[_ngcontent-%COMP%]{background:#f6d365;background:linear-gradient(to right bottom,#f6d365,#fda085)}"]}),i})(),Qw=(()=>{class i{transform(e,r){let h=[];console.log(r);for(const g of e)g.especialidad.indexOf(r)>-1&&(h=[...h,g]);return h}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=c.Yjl({name:"especialistas",type:i,pure:!0}),i})();function RC(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td"),c._uU(10),c.qZA(),c.TgZ(11,"td"),c._UZ(12,"img",12),c.qZA(),c.TgZ(13,"td"),c.TgZ(14,"button",13),c.NdJ("click",function(){const g=c.CHM(e).$implicit;return c.oxw(2).capturarPaciente(g)}),c._uU(15,"Seleccionar"),c.qZA(),c.qZA(),c.qZA()}if(2&i){const e=t.$implicit;c.xp6(2),c.Oqu(e.nombre),c.xp6(2),c.Oqu(e.apellido),c.xp6(2),c.Oqu(e.dni),c.xp6(2),c.Oqu(e.obraSocial),c.xp6(2),c.Oqu(e.mail),c.xp6(2),c.s9C("src",e.foto,c.LSH)}}function kC(i,t){if(1&i&&(c.TgZ(0,"div"),c.TgZ(1,"h2",3),c._uU(2,"Seleccione Paciente"),c.qZA(),c.TgZ(3,"section",6),c.TgZ(4,"div",7),c.TgZ(5,"div",8),c.TgZ(6,"div",9),c.TgZ(7,"table",10),c.TgZ(8,"tr"),c.TgZ(9,"th"),c._uU(10,"Nombre"),c.qZA(),c.TgZ(11,"th"),c._uU(12,"Apellido"),c.qZA(),c.TgZ(13,"th"),c._uU(14,"DNI"),c.qZA(),c.TgZ(15,"th"),c._uU(16,"Obra Social"),c.qZA(),c.TgZ(17,"th"),c._uU(18,"Correo"),c.qZA(),c.TgZ(19,"th"),c._uU(20,"Foto"),c.qZA(),c.TgZ(21,"th"),c._uU(22,"Seleccionar"),c.qZA(),c.qZA(),c.YNc(23,RC,16,6,"tr",11),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&i){const e=c.oxw();c.xp6(23),c.Q6J("ngForOf",e.usuarios)}}function Jw(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"div",14),c.TgZ(1,"button",15),c.NdJ("click",function(){const g=c.CHM(e).$implicit;return c.oxw().capturarEspecialidad(g)}),c._uU(2),c.qZA(),c.qZA()}if(2&i){const e=t.$implicit;c.xp6(2),c.Oqu(e)}}function Xw(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"div",17),c.TgZ(1,"div",18),c._UZ(2,"img",19),c.TgZ(3,"div",20),c.TgZ(4,"h5",21),c._uU(5),c.qZA(),c.TgZ(6,"button",15),c.NdJ("click",function(){const g=c.CHM(e).$implicit;return c.oxw(2).capturarEspecialista(g)}),c._uU(7,"Seleccionar"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&i){const e=t.$implicit;c.xp6(2),c.s9C("src",e.foto,c.LSH),c.xp6(3),c.AsE("",e.nombre," ",e.apellido,"")}}function e1(i,t){if(1&i&&(c.TgZ(0,"div",2),c.TgZ(1,"h2",3),c._uU(2,"Seleccione Especialista"),c.qZA(),c.YNc(3,Xw,8,3,"div",16),c.ALo(4,"especialistas"),c.qZA()),2&i){const e=c.oxw();c.xp6(3),c.Q6J("ngForOf",c.xi3(4,1,e.especialistas,e.especialidadElegida))}}function _b(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"div",23),c.TgZ(1,"button",15),c.NdJ("click",function(){const g=c.CHM(e).$implicit;return c.oxw(2).capturarDia(g)}),c._uU(2),c.qZA(),c.qZA()}if(2&i){const e=t.$implicit;c.xp6(2),c.Oqu(e[0])}}function t1(i,t){if(1&i&&(c.TgZ(0,"div",2),c.TgZ(1,"h2",3),c._uU(2,"Seleccione Dia"),c.qZA(),c.YNc(3,_b,3,1,"div",22),c.qZA()),2&i){const e=c.oxw();c.xp6(3),c.Q6J("ngForOf",e.tablaDias)}}function UD(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"div",23),c.TgZ(1,"button",15),c.NdJ("click",function(){const g=c.CHM(e).$implicit;return c.oxw(2).seleccionarTurno(g)}),c._uU(2),c.qZA(),c.qZA()}if(2&i){const e=t.$implicit;c.xp6(2),c.Oqu(e)}}function n1(i,t){if(1&i&&(c.TgZ(0,"div",2),c.TgZ(1,"h2",3),c._uU(2,"Seleccione Horario"),c.qZA(),c.YNc(3,UD,3,1,"div",24),c.qZA()),2&i){const e=c.oxw();c.xp6(3),c.Q6J("ngForOf",e.horasLunVie)}}function r1(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"div",23),c.TgZ(1,"button",15),c.NdJ("click",function(){const g=c.CHM(e).$implicit;return c.oxw(2).seleccionarTurno(g)}),c._uU(2),c.qZA(),c.qZA()}if(2&i){const e=t.$implicit;c.xp6(2),c.Oqu(e)}}function xp(i,t){if(1&i&&(c.TgZ(0,"div",2),c.TgZ(1,"h2",3),c._uU(2,"Seleccione Horario"),c.qZA(),c.YNc(3,r1,3,1,"div",22),c.qZA()),2&i){const e=c.oxw();c.xp6(3),c.Q6J("ngForOf",e.horasSab)}}let yb=(()=>{class i{constructor(e,r,h){this.as=e,this.fs=r,this.toastr=h,this.especialidades=[],this.especialidadElegida=void 0,this.especialistas=[],this.especialistaElegido=void 0,this.tablaDias=[],this.admin=!1,this.diaElegido=void 0,this.horasLunVie=["8:00","8:30","9:00","9:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00"],this.horasSab=["8:00","8:30","9:00","9:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00"],this.usuarios=[],"administrador"==this.as.user.perfil&&(this.admin=!0),this.fs.ListaUsuarios().subscribe(g=>{this.usuarios=[],g.forEach(E=>{"paciente"==E.perfil&&this.usuarios.push(E)})}),this.fs.ListaEspecialistas().subscribe(g=>{this.especialistas=g,this.especialistas.forEach(E=>{this.especialidades.push(E.especialidad)}),this.especialidades=this.especialidades.filter(function(E,S,R){return S===R.indexOf(E)})}),this.fs.ListaTurnos().subscribe(g=>{this.turnos=g})}capturarEspecialidad(e){this.especialistaElegido=!1,this.diaElegido=!1,this.tablaDias=[],this.especialidadElegida=e}capturarPaciente(e){this.especialistaElegido=!1,this.diaElegido=!1,this.tablaDias=[],this.pacienteSeleccionado=e}capturarEspecialista(e){this.diaElegido=!1,this.especialistaElegido=e,this.tablaDias=[],this.armarTablaDias()}generarDias(e){let r=new Date;return r.setDate(r.getDate()+e),r}armarTablaDias(){for(let e=0;e<15;e++){let r=[this.generarDias(e).toLocaleDateString("es-ES"),this.generarDias(e).toLocaleDateString("es-ES",{weekday:"long"})];this.tablaDias.push(r)}this.tablaDias=this.tablaDias.filter(e=>"domingo"!=e[1])}capturarDia(e){this.cargarHoras(),this.diaElegido=e,this.turnos.forEach(r=>{if(r.profesional.mail==this.especialistaElegido.mail&&"finalizado"!=r.estado&&"cancelado"!=r.estado&&r.dia[0]==this.diaElegido[0]){let h=this.horasLunVie.indexOf(r.hora);-1!=h&&this.horasLunVie.splice(h,1)}})}cargarHoras(){this.horasLunVie=["8:00","8:30","9:00","9:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00"],this.horasSab=["8:00","8:30","9:00","9:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00"]}seleccionarTurno(e){let r={profesional:this.especialistaElegido,paciente:this.as.user,hora:e,dia:this.diaElegido,estado:"pendiente",comentario:"",encuesta:"",calificacion:"",diagnostico:""};this.admin&&(r.paciente=this.pacienteSeleccionado),this.fs.agregarTurno(r).then(()=>{this.diaElegido=!1,this.especialidadElegida=!1,this.especialistaElegido=!1,this.toastr.success("Se solicito correctamente!","Turno solicitado!")}).catch(h=>{console.log(h)})}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)(c.Y36(Ie.e),c.Y36(Ze.C),c.Y36(Ge._W))},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-solicitar-turno"]],decls:11,vars:6,consts:[[1,"container-fluid"],[4,"ngIf"],[1,"row",2,"margin-top","30px"],[1,"text-center",2,"margin-bottom","15px","text-decoration","underline"],["class","col d-grid gap-2",4,"ngFor","ngForOf"],["class","row","style","margin-top: 30px;",4,"ngIf"],["data-section","about","id","section-about",1,"pb_section","pb_section_v1"],[1,"container"],[1,"row","justify-content-center","mt-5"],[1,"rounded","p-1","text-center","fs-5",2,"color","white","background-color","rgb(53, 51, 51)"],[2,"width","100%"],[4,"ngFor","ngForOf"],["alt","","width","60px","height","60px",3,"src"],["type","button",1,"btn","btn-success",3,"click"],[1,"col","d-grid","gap-2"],["type","button",1,"btn","btn-outline-dark","btn-lg",3,"click"],["class","col d-flex justify-content-center",4,"ngFor","ngForOf"],[1,"col","d-flex","justify-content-center"],[1,"card","text-center",2,"width","18rem"],["alt","...",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],["class","col d-flex justify-content-center","style","margin-top: 30px; margin-left: 15px; margin-left: 15px;\n        margin-bottom: 15px;",4,"ngFor","ngForOf"],[1,"col","d-flex","justify-content-center",2,"margin-top","30px","margin-left","15px","margin-left","15px","margin-bottom","15px"],["class","col d-flex justify-content-center","style","margin-top: 30px; margin-left: 15px; margin-left: 15px;\n            margin-bottom: 15px;",4,"ngFor","ngForOf"]],template:function(e,r){1&e&&(c._UZ(0,"app-nav"),c.TgZ(1,"div",0),c.YNc(2,kC,24,1,"div",1),c.TgZ(3,"div",2),c.TgZ(4,"h2",3),c._uU(5,"Seleccione Especialidad"),c.qZA(),c.YNc(6,Jw,3,1,"div",4),c.qZA(),c.YNc(7,e1,5,4,"div",5),c.YNc(8,t1,4,1,"div",5),c.YNc(9,n1,4,1,"div",5),c.YNc(10,xp,4,1,"div",5),c.qZA()),2&e&&(c.xp6(2),c.Q6J("ngIf",r.admin),c.xp6(4),c.Q6J("ngForOf",r.especialidades),c.xp6(1),c.Q6J("ngIf",r.especialidadElegida),c.xp6(1),c.Q6J("ngIf",r.especialistaElegido),c.xp6(1),c.Q6J("ngIf",r.diaElegido&&"s\xe1bado"!=r.diaElegido[1]),c.xp6(1),c.Q6J("ngIf",r.diaElegido&&"s\xe1bado"==r.diaElegido[1]))},directives:[uu,pe.O5,pe.sg],pipes:[Qw],styles:[""]}),i})();function Op(i,t){1&i&&c._UZ(0,"app-solicitar-turno")}function jD(i,t){1&i&&c._UZ(0,"app-mis-turnos")}let PC=(()=>{class i{constructor(e){this.as=e}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)(c.Y36(Ie.e))},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-principal"]],decls:2,vars:2,consts:[[4,"ngIf"]],template:function(e,r){1&e&&(c.YNc(0,Op,1,0,"app-solicitar-turno",0),c.YNc(1,jD,1,0,"app-mis-turnos",0)),2&e&&(c.Q6J("ngIf","paciente"==r.as.user.perfil||"administrador"==r.as.user.perfil),c.xp6(1),c.Q6J("ngIf","profesional"==r.as.user.perfil))},directives:[pe.O5,yb,gb],styles:[""]}),i})();function s1(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"button",9),c.NdJ("click",function(){c.CHM(e);const h=c.oxw().$implicit;return c.oxw().habilitarProfesional(h,!0)}),c._uU(1,"Habilitar"),c.qZA()}}function $D(i,t){if(1&i){const e=c.EpF();c.TgZ(0,"button",10),c.NdJ("click",function(){c.CHM(e);const h=c.oxw().$implicit;return c.oxw().habilitarProfesional(h,!1)}),c._uU(1,"Inhabilitar"),c.qZA()}}function FC(i,t){if(1&i&&(c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td"),c._uU(10),c.qZA(),c.TgZ(11,"td"),c._UZ(12,"img",6),c.qZA(),c.TgZ(13,"td"),c.YNc(14,s1,2,0,"button",7),c.YNc(15,$D,2,0,"button",8),c.qZA(),c.qZA()),2&i){const e=t.$implicit;c.xp6(2),c.Oqu(e.nombre),c.xp6(2),c.Oqu(e.apellido),c.xp6(2),c.Oqu(e.dni),c.xp6(2),c.Oqu(e.especialidad),c.xp6(2),c.Oqu(e.mail),c.xp6(2),c.s9C("src",e.foto,c.LSH),c.xp6(2),c.Q6J("ngIf",!e.habilitado),c.xp6(1),c.Q6J("ngIf",e.habilitado)}}let HD=(()=>{class i{constructor(e){this.fs=e,this.fs.ListaUsuarios().subscribe(r=>{this.usuarios=r,this.usuarios=this.usuarios.filter(h=>"profesional"==h.perfil)})}habilitarProfesional(e,r){e.habilitado=!!r,this.fs.ModificarUsuario(e,e.id)}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)(c.Y36(Ze.C))},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-tabla-usuarios"]],decls:21,vars:1,consts:[["data-section","about","id","section-about",1,"pb_section","pb_section_v1"],[1,"container"],[1,"row","justify-content-center","mt-5"],[1,"rounded","p-1","text-center","fs-5",2,"color","white","background-color","rgb(53, 51, 51)"],[2,"width","100%"],[4,"ngFor","ngForOf"],["alt","","width","60px","height","60px",3,"src"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,r){1&e&&(c.TgZ(0,"section",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"table",4),c.TgZ(5,"tr"),c.TgZ(6,"th"),c._uU(7,"Nombre"),c.qZA(),c.TgZ(8,"th"),c._uU(9,"Apellido"),c.qZA(),c.TgZ(10,"th"),c._uU(11,"DNI"),c.qZA(),c.TgZ(12,"th"),c._uU(13,"Especialidad"),c.qZA(),c.TgZ(14,"th"),c._uU(15,"Correo"),c.qZA(),c.TgZ(16,"th"),c._uU(17,"Foto"),c.qZA(),c.TgZ(18,"th"),c._uU(19,"Habilitar"),c.qZA(),c.qZA(),c.YNc(20,FC,16,8,"tr",5),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(20),c.Q6J("ngForOf",r.usuarios))},directives:[pe.sg,pe.O5],styles:["table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;border-collapse:collapse;border:3px solid purple}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:30%}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:20%}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:15%}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:35%}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:20px}"]}),i})();var LC=V(4203),vb=V(5108);function BC(i,t){1&i&&(c.TgZ(0,"small",15),c._uU(1,"El nombre es requerido "),c.qZA())}function VC(i,t){1&i&&(c.TgZ(0,"small",15),c._uU(1,"El apellido es requeridos"),c.qZA())}function UC(i,t){1&i&&(c.TgZ(0,"small",15),c._uU(1,"La edad es requerida"),c.qZA())}function jC(i,t){1&i&&(c.TgZ(0,"small",15),c._uU(1,"El dni es requerido"),c.qZA())}function o1(i,t){1&i&&(c.TgZ(0,"small",15),c._uU(1,"El mail es requerido"),c.qZA())}function a1(i,t){1&i&&(c.TgZ(0,"small",15),c._uU(1,"La clave es requerida"),c.qZA())}let l1=(()=>{class i{constructor(e,r,h,g){this.fb=e,this.fs=r,this.toastr=h,this.router=g,this.grupoControles=this.fb.group({nombre:["",[Ee.kI.required]],apellido:["",[Ee.kI.required]],edad:["",[Ee.kI.required]],dni:["",[Ee.kI.required]],mail:["",[Ee.kI.required]],clave:["",[Ee.kI.required]],foto:[]})}agregarAdministrador(){var e,r,h,g,E,S;let R={nombre:null===(e=this.grupoControles.get("nombre"))||void 0===e?void 0:e.value,apellido:null===(r=this.grupoControles.get("apellido"))||void 0===r?void 0:r.value,edad:null===(h=this.grupoControles.get("edad"))||void 0===h?void 0:h.value,dni:null===(g=this.grupoControles.get("dni"))||void 0===g?void 0:g.value,mail:null===(E=this.grupoControles.get("mail"))||void 0===E?void 0:E.value,clave:null===(S=this.grupoControles.get("clave"))||void 0===S?void 0:S.value,foto:this.foto,perfil:"administrador"};this.fs.agregarAdmin(R),this.toastr.success("Confirme mail y el administrador deber\xe1 habilitarlo ahora!","Profesional registrado!"),this.grupoControles.reset()}upload(e){this.foto=e.target.files[0]}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)(c.Y36(Ee.qu),c.Y36(Ze.C),c.Y36(Ge._W),c.Y36(J.F0))},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-alta-admin"]],decls:28,vars:8,consts:[[1,"wrapper"],[1,"logo"],["src","../../../assets/admin.png","alt",""],[1,"text-center","mt-4","name"],[1,"p-3","mt-3",3,"formGroup","ngSubmit"],[1,"form-field","d-flex","align-items-center"],["type","text","name","nombre","formControlName","nombre","placeholder","Nombre"],["class","invalid",4,"ngIf"],["type","text","name","apellido","formControlName","apellido","placeholder","Apellido"],["type","number","name","edad","formControlName","edad","placeholder","Edad"],["type","number","name","dni","formControlName","dni","placeholder","DNI"],["type","text","name","mail","formControlName","mail","placeholder","Mail"],["type","password","name","clave","formControlName","clave","placeholder","Password"],["type","file","name","foro","formControlName","foto","placeholder","Foto",3,"change"],["type","submit",1,"btn","mt-3",3,"disabled"],[1,"invalid"]],template:function(e,r){if(1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"img",2),c.qZA(),c.TgZ(3,"div",3),c._uU(4," Registro Admin "),c.qZA(),c.TgZ(5,"form",4),c.NdJ("ngSubmit",function(){return r.agregarAdministrador()}),c.TgZ(6,"div",5),c._UZ(7,"input",6),c.YNc(8,BC,2,0,"small",7),c.qZA(),c.TgZ(9,"div",5),c._UZ(10,"input",8),c.YNc(11,VC,2,0,"small",7),c.qZA(),c.TgZ(12,"div",5),c._UZ(13,"input",9),c.YNc(14,UC,2,0,"small",7),c.qZA(),c.TgZ(15,"div",5),c._UZ(16,"input",10),c.YNc(17,jC,2,0,"small",7),c.qZA(),c.TgZ(18,"div",5),c._UZ(19,"input",11),c.YNc(20,o1,2,0,"small",7),c.qZA(),c.TgZ(21,"div",5),c._UZ(22,"input",12),c.YNc(23,a1,2,0,"small",7),c.qZA(),c.TgZ(24,"div",5),c.TgZ(25,"input",13),c.NdJ("change",function(g){return r.upload(g)}),c.qZA(),c.qZA(),c.TgZ(26,"button",14),c._uU(27,"Registrar"),c.qZA(),c.qZA(),c.qZA()),2&e){let h,g,E,S,R,G;c.xp6(5),c.Q6J("formGroup",r.grupoControles),c.xp6(3),c.Q6J("ngIf",(null==(h=r.grupoControles.get("nombre"))||null==h.errors?null:h.errors.required)&&(null==(h=r.grupoControles.get("nombre"))?null:h.touched)),c.xp6(3),c.Q6J("ngIf",(null==(g=r.grupoControles.get("apellido"))||null==g.errors?null:g.errors.required)&&(null==(g=r.grupoControles.get("apellido"))?null:g.touched)),c.xp6(3),c.Q6J("ngIf",(null==(E=r.grupoControles.get("edad"))||null==E.errors?null:E.errors.required)&&(null==(E=r.grupoControles.get("edad"))?null:E.touched)),c.xp6(3),c.Q6J("ngIf",(null==(S=r.grupoControles.get("dni"))||null==S.errors?null:S.errors.required)&&(null==(S=r.grupoControles.get("dni"))?null:S.touched)),c.xp6(3),c.Q6J("ngIf",(null==(R=r.grupoControles.get("mail"))||null==R.errors?null:R.errors.required)&&(null==(R=r.grupoControles.get("mail"))?null:R.touched)),c.xp6(3),c.Q6J("ngIf",(null==(G=r.grupoControles.get("clave"))||null==G.errors?null:G.errors.required)&&(null==(G=r.grupoControles.get("clave"))?null:G.touched)),c.xp6(3),c.Q6J("disabled",r.grupoControles.invalid)}},directives:[Ee._Y,Ee.JL,Ee.sg,Ee.Fj,Ee.JJ,Ee.u,pe.O5,Ee.wV],styles:['@import"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}body[_ngcontent-%COMP%]{background:#67aadd}.wrapper[_ngcontent-%COMP%]{max-width:350px;min-height:500px;margin:30px auto;padding:40px 30px 30px;background-color:#ecf0f3;border-radius:15px;box-shadow:13px 13px 20px #cbced1,-13px -13px 20px #fff}.logo[_ngcontent-%COMP%]{width:80px;margin:auto}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:80px;object-fit:cover;border-radius:50%;box-shadow:0 0 3px #5f5f5f,0 0 0 5px #ecf0f3,8px 8px 15px #a7aaa7,-8px -8px 15px #fff}.wrapper[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:600;font-size:1.4rem;letter-spacing:1.3px;padding-left:10px;color:#555}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;display:block;border:none;outline:none;background:none;font-size:1.2rem;color:#666;padding:10px 15px 10px 10px}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{padding-left:10px;margin-bottom:20px;border-radius:20px;box-shadow:inset 8px 8px 8px #cbced1,inset -8px -8px 8px #fff}.wrapper[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{color:#555}.wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{box-shadow:none;width:100%;height:40px;background-color:#03a9f4;color:#fff;border-radius:25px;box-shadow:3px 3px 3px #b1b1b1,-3px -3px 3px #fff;letter-spacing:1.3px}.wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#039be5}.wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:.8rem;color:#03a9f4}.wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#039be5}@media (max-width: 380px){.wrapper[_ngcontent-%COMP%]{margin:30px 20px;padding:40px 15px 15px}}']}),i})();const c1=[{path:"login",component:_t},{path:"",component:_t},{path:"registro",loadChildren:()=>V.e(226).then(V.bind(V,6226)).then(i=>i.RegistroModule)},{path:"principal",component:PC},{path:"usuarios",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-usuarios"]],decls:10,vars:0,consts:[[1,"container"],[1,"row"],[1,"col"]],template:function(e,r){1&e&&(c._UZ(0,"app-nav"),c._UZ(1,"app-tabla-usuarios"),c.TgZ(2,"div",0),c.TgZ(3,"div",1),c.TgZ(4,"div",2),c._UZ(5,"app-alta-profesional"),c.qZA(),c.TgZ(6,"div",2),c._UZ(7,"app-alta-usuario"),c.qZA(),c.TgZ(8,"div",2),c._UZ(9,"app-alta-admin"),c.qZA(),c.qZA(),c.qZA())},directives:[uu,HD,LC.w,vb.U,l1],styles:[""]}),i})()},{path:"perfil",component:xm},{path:"turno",component:yb},{path:"misturnos",component:gb},{path:"*",component:_t}];let u1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[J.Bz.forRoot(c1)],J.Bz]}),i})(),Om=(()=>{class i{constructor(){this.title="TpClinicaOnLine"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-root"]],decls:1,vars:0,template:function(e,r){1&e&&c._UZ(0,"router-outlet")},directives:[J.lC],styles:[""]}),i})();var Rm=V(3692);const Vy_firebase={projectId:"clinicaonline-1e39f",appId:"1:410219080369:web:b479e4d1e1602369561090",storageBucket:"clinicaonline-1e39f.appspot.com",apiKey:"AIzaSyDaI9frBLDptpBZyv2q8wdZa467e-khuoo",authDomain:"clinicaonline-1e39f.firebaseapp.com",messagingSenderId:"410219080369"};var Uy=V(7667),xs=V(5813),$C=V(5867),jy=V(7128),d1=V(5861),Rp=V(9681),$y=V(4859),Et=V(2090),HC=V(1877);const GC="@firebase/database";let bb="";class Du{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,Et.Wl)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,Et.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class h1{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,Et.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const Hy=function(i){try{if("undefined"!=typeof window&&void 0!==window[i]){const t=window[i];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Du(t)}}catch(t){}return new h1},Lc=Hy("localStorage"),Cb=Hy("sessionStorage"),Pp=new HC.Yd("@firebase/database"),ZC=function(){let i=1;return function(){return i++}}(),km=function(i){const t=(0,Et.dS)(i),e=new Et.gQ;e.update(t);const r=e.digest();return Et.US.encodeByteArray(r)},sh=function(...i){let t="";for(let e=0;e<i.length;e++){const r=i[e];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=sh.apply(null,r):t+="object"==typeof r?(0,Et.Wl)(r):r,t+=" "}return t};let uf=null,WC=!0;const $o=function(...i){if(!0===WC&&(WC=!1,null===uf&&!0===Cb.get("logging_enabled")&&function(i,t){(0,Et.hu)(!t||!0===i||!1===i,"Can't turn on custom loggers persistently."),!0===i?(Pp.logLevel=HC.in.VERBOSE,uf=Pp.log.bind(Pp),t&&Cb.set("logging_enabled",!0)):"function"==typeof i?uf=i:(uf=null,Cb.remove("logging_enabled"))}(!0)),uf){const t=sh.apply(null,i);uf(t)}},df=function(i){return function(...t){$o(i,...t)}},Gy=function(...i){const t="FIREBASE INTERNAL ERROR: "+sh(...i);Pp.error(t)},Iu=function(...i){const t=`FIREBASE FATAL ERROR: ${sh(...i)}`;throw Pp.error(t),new Error(t)},Da=function(...i){const t="FIREBASE WARNING: "+sh(...i);Pp.warn(t)},Fp=function(i){return"number"==typeof i&&(i!=i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},Au="[MIN_NAME]",sc="[MAX_NAME]",dd=function(i,t){if(i===t)return 0;if(i===Au||t===sc)return-1;if(t===Au||i===sc)return 1;{const e=Fm(i),r=Fm(t);return null!==e?null!==r?e-r==0?i.length-t.length:e-r:-1:null!==r?1:i<t?-1:1}},f1=function(i,t){return i===t?0:i<t?-1:1},Pm=function(i,t){if(t&&i in t)return t[i];throw new Error("Missing required key ("+i+") in object: "+(0,Et.Wl)(t))},Db=function(i){if("object"!=typeof i||null===i)return(0,Et.Wl)(i);const t=[];for(const r in i)t.push(r);t.sort();let e="{";for(let r=0;r<t.length;r++)0!==r&&(e+=","),e+=(0,Et.Wl)(t[r]),e+=":",e+=Db(i[t[r]]);return e+="}",e},qC=function(i,t){const e=i.length;if(e<=t)return[i];const r=[];for(let h=0;h<e;h+=t)r.push(i.substring(h,h+t>e?e:h+t));return r};function Ho(i,t){for(const e in i)i.hasOwnProperty(e)&&t(e,i[e])}const Zy=function(i){(0,Et.hu)(!Fp(i),"Invalid JSON number");const r=1023;let h,g,E,S,R;0===i?(g=0,E=0,h=1/i==-1/0?1:0):(h=i<0,(i=Math.abs(i))>=Math.pow(2,1-r)?(S=Math.min(Math.floor(Math.log(i)/Math.LN2),r),g=S+r,E=Math.round(i*Math.pow(2,52-S)-Math.pow(2,52))):(g=0,E=Math.round(i/Math.pow(2,-1074))));const G=[];for(R=52;R;R-=1)G.push(E%2?1:0),E=Math.floor(E/2);for(R=11;R;R-=1)G.push(g%2?1:0),g=Math.floor(g/2);G.push(h?1:0),G.reverse();const re=G.join("");let be="";for(R=0;R<64;R+=8){let Ae=parseInt(re.substr(R,8),2).toString(16);1===Ae.length&&(Ae="0"+Ae),be+=Ae}return be.toLowerCase()},QC=new RegExp("^-?(0*)\\d{1,10}$"),Fm=function(i){if(QC.test(i)){const t=Number(i);if(t>=-2147483648&&t<=2147483647)return t}return null},Lp=function(i){try{i()}catch(t){setTimeout(()=>{throw Da("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},Bp=function(i,t){const e=setTimeout(i,t);return"number"==typeof e&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class qa{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){Da(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Vp{constructor(t,e,r){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(h=>this.auth_=h)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?($o("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Da(t)}}let Lm=(()=>{class i{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return i.OWNER="owner",i})();const tT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ky="websocket",Sb="long_polling";class Yy{constructor(t,e,r,h,g=!1,E="",S=!1){this.secure=e,this.namespace=r,this.webSocketOnly=h,this.nodeAdmin=g,this.persistenceKey=E,this.includeNamespaceInQueryParams=S,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Lc.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Lc.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Jy(i,t,e){let r;if((0,Et.hu)("string"==typeof t,"typeof type must == string"),(0,Et.hu)("object"==typeof e,"typeof params must == object"),t===Ky)r=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else{if(t!==Sb)throw new Error("Unknown connection type: "+t);r=(i.secure?"https://":"http://")+i.internalHost+"/.lp?"}(function Qy(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams})(i)&&(e.ns=i.namespace);const h=[];return Ho(e,(g,E)=>{h.push(g+"="+E)}),r+h.join("&")}class WD{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,Et.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,Et.p$)(this.counters_)}}const Xy={},Nb={};function ev(i){const t=i.toString();return Xy[t]||(Xy[t]=new WD),Xy[t]}class iT{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let h=0;h<r.length;++h)r[h]&&Lp(()=>{this.onMessage_(r[h])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class hd{constructor(t,e,r,h,g,E,S){this.connId=t,this.repoInfo=e,this.applicationId=r,this.appCheckToken=h,this.authToken=g,this.transportSessionId=E,this.lastSessionId=S,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=df(t),this.stats_=ev(e),this.urlFn=R=>(this.appCheckToken&&(R.ac=this.appCheckToken),Jy(e,Sb,R))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new iT(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(i){if((0,Et.Yr)()||"complete"===document.readyState)i();else{let t=!1;const e=function(){document.body?t||(t=!0,i()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new nv((...g)=>{const[E,S,R,G,re]=g;if(this.incrementIncomingBytes_(g),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===E)this.id=S,this.password=R;else{if("close"!==E)throw new Error("Unrecognized command received: "+E);S?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(S,()=>{this.onClosed_()})):this.onClosed_()}},(...g)=>{const[E,S]=g;this.incrementIncomingBytes_(g),this.myPacketOrderer.handleResponse(E,S)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&tT.test(location.hostname)&&(r.r="f");const h=this.urlFn(r);this.log_("Connecting via long-poll to "+h),this.scriptTagHolder.addTag(h,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){hd.forceAllow_=!0}static forceDisallow(){hd.forceDisallow_=!0}static isAvailable(){return!((0,Et.Yr)()||!hd.forceAllow_&&(hd.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,Et.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const r=(0,Et.h$)(e),h=qC(r,1840);for(let g=0;g<h.length;g++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,h.length,h[g]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,Et.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=t,r.pw=e,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,Et.Wl)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class nv{constructor(t,e,r,h){if(this.onDisconnect=r,this.urlFn=h,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Et.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=ZC(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=nv.createIFrame_();let g="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(g='<script>document.domain="'+document.domain+'";<\/script>');const E="<html><body>"+g+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(E),this.myIFrame.doc.close()}catch(S){$o("frame writing exception"),S.stack&&$o(S.stack),$o(S)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||$o("No IE domain setting required")}catch(e){const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),r="",h=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const E=this.pendingSegs.shift();r=r+"&seg"+h+"="+E.seg+"&ts"+h+"="+E.ts+"&d"+h+"="+E.d,h++}return e+=r,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,r){this.pendingSegs.push({seg:t,ts:e,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const r=()=>{this.outstandingRequests.delete(e),this.newRequest_()},h=setTimeout(r,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(h),r()})}addTag(t,e){(0,Et.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const h=r.readyState;(!h||"loaded"===h||"complete"===h)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=()=>{$o("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let kb=null;"undefined"!=typeof MozWebSocket?kb=MozWebSocket:"undefined"!=typeof WebSocket&&(kb=WebSocket);let hf=(()=>{class i{constructor(e,r,h,g,E,S,R){this.connId=e,this.applicationId=h,this.appCheckToken=g,this.authToken=E,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=df(this.connId),this.stats_=ev(r),this.connURL=i.connectionURL_(r,S,R,g,h),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,h,g,E){const S={v:"5"};return!(0,Et.Yr)()&&"undefined"!=typeof location&&location.hostname&&tT.test(location.hostname)&&(S.r="f"),r&&(S.s=r),h&&(S.ls=h),g&&(S.ac=g),E&&(S.p=E),Jy(e,Ky,S)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Lc.set("previous_websocket_failure",!0);try{let h;if((0,Et.Yr)()){h={headers:{"User-Agent":`Firebase/5/${bb}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(h.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(h.headers["X-Firebase-AppCheck"]=this.appCheckToken);const E=process.env,S=0===this.connURL.indexOf("wss://")?E.HTTPS_PROXY||E.https_proxy:E.HTTP_PROXY||E.http_proxy;S&&(h.proxy={origin:S})}this.mySock=new kb(this.connURL,[],h)}catch(h){this.log_("Error instantiating WebSocket.");const g=h.message||h.data;return g&&this.log_(g),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=h=>{this.handleIncomingFrame(h)},this.mySock.onerror=h=>{this.log_("WebSocket error.  Closing connection.");const g=h.message||h.data;g&&this.log_(g),this.onClosed_()}}start(){}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const h=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);h&&h.length>1&&parseFloat(h[1])<4.4&&(e=!0)}return!e&&null!==kb&&!i.forceDisallow_}static previouslyFailed(){return Lc.isInMemoryStorage||!0===Lc.get("previous_websocket_failure")}markConnectionHealthy(){Lc.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const h=(0,Et.cI)(r);this.onMessage(h)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,Et.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const h=this.extractFrameCount_(r);null!==h&&this.appendFrame_(h)}}send(e){this.resetKeepAlive();const r=(0,Et.Wl)(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const h=qC(r,16384);h.length>1&&this.sendString_(String(h.length));for(let g=0;g<h.length;g++)this.sendString_(h[g])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4,i})(),b1=(()=>{class i{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[hd,hf]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const r=hf&&hf.isAvailable();let h=r&&!hf.previouslyFailed();if(e.webSocketOnly&&(r||Da("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),h=!0),h)this.transports_=[hf];else{const g=this.transports_=[];for(const E of i.ALL_TRANSPORTS)E&&E.isAvailable()&&g.push(E);i.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return i.globalTransportInitialized_=!1,i})();class rv{constructor(t,e,r,h,g,E,S,R,G,re){this.id=t,this.repoInfo_=e,this.applicationId_=r,this.appCheckToken_=h,this.authToken_=g,this.onMessage_=E,this.onReady_=S,this.onDisconnect_=R,this.onKill_=G,this.lastSessionId=re,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=df("c:"+this.id+":"),this.transportManager_=new b1(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,r)},Math.floor(0));const h=t.healthyTimeout||0;h>0&&(this.healthyTimeout_=Bp(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(h)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=Pm("t",t),r=Pm("d",t);if("c"===e)this.onSecondaryControl_(r);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=Pm("t",t),r=Pm("d",t);"c"===e?this.onControl_(r):"d"===e&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=Pm("t",t);if("d"in t){const r=t.d;if("h"===e)this.onHandshake_(r);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let h=0;h<this.pendingDataMessages.length;++h)this.onDataMessage_(this.pendingDataMessages[h]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(r):"r"===e?this.onReset_(r):"e"===e?Gy("Server Error: "+r):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Gy("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,r=t.v,h=t.h;this.sessionId=t.s,this.repoInfo_.host=h,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==r&&Da("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,r),Bp(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Bp(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Lc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Fb{put(t,e,r,h){}merge(t,e,r,h){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,r){}onDisconnectMerge(t,e,r){}onDisconnectCancel(t,e){}reportStats(t){}}class Lb{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,Et.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let h=0;h<r.length;h++)r[h].callback.apply(r[h].context,e)}}on(t,e,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:r});const h=this.getInitialEvent(t);h&&e.apply(r,h)}off(t,e,r){this.validateEventType_(t);const h=this.listeners_[t]||[];for(let g=0;g<h.length;g++)if(h[g].callback===e&&(!r||r===h[g].context))return void h.splice(g,1)}validateEventType_(t){(0,Et.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class Vm extends Lb{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,Et.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Vm}getInitialEvent(t){return(0,Et.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Ur{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let r=0;for(let h=0;h<this.pieces_.length;h++)this.pieces_[h].length>0&&(this.pieces_[r]=this.pieces_[h],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function jr(){return new Ur("")}function gr(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function pf(i){return i.pieces_.length-i.pieceNum_}function ws(i){let t=i.pieceNum_;return t<i.pieces_.length&&t++,new Ur(i.pieces_,t)}function Vb(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function Um(i,t=0){return i.pieces_.slice(i.pieceNum_+t)}function w1(i){if(i.pieceNum_>=i.pieces_.length)return null;const t=[];for(let e=i.pieceNum_;e<i.pieces_.length-1;e++)t.push(i.pieces_[e]);return new Ur(t,0)}function js(i,t){const e=[];for(let r=i.pieceNum_;r<i.pieces_.length;r++)e.push(i.pieces_[r]);if(t instanceof Ur)for(let r=t.pieceNum_;r<t.pieces_.length;r++)e.push(t.pieces_[r]);else{const r=t.split("/");for(let h=0;h<r.length;h++)r[h].length>0&&e.push(r[h])}return new Ur(e,0)}function sr(i){return i.pieceNum_>=i.pieces_.length}function za(i,t){const e=gr(i),r=gr(t);if(null===e)return t;if(e===r)return za(ws(i),ws(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+i+")")}function jb(i,t){if(pf(i)!==pf(t))return!1;for(let e=i.pieceNum_,r=t.pieceNum_;e<=i.pieces_.length;e++,r++)if(i.pieces_[e]!==t.pieces_[r])return!1;return!0}function ll(i,t){let e=i.pieceNum_,r=t.pieceNum_;if(pf(i)>pf(t))return!1;for(;e<i.pieces_.length;){if(i.pieces_[e]!==t.pieces_[r])return!1;++e,++r}return!0}class D1{constructor(t,e){this.errorPrefix_=e,this.parts_=Um(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,Et.ug)(this.parts_[r]);Hb(this)}}function Hb(i){if(i.byteLength_>768)throw new Error(i.errorPrefix_+"has a key path longer than 768 bytes ("+i.byteLength_+").");if(i.parts_.length>32)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+oh(i))}function oh(i){return 0===i.parts_.length?"":"in property '"+i.parts_.join(".")+"'"}class Gb extends Lb{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Gb}getInitialEvent(t){return(0,Et.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const jp=1e3;let sv,$p=(()=>{class i extends Fb{constructor(e,r,h,g,E,S,R,G){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=h,this.onConnectStatus_=g,this.onServerInfoUpdate_=E,this.authTokenProvider_=S,this.appCheckTokenProvider_=R,this.authOverride_=G,this.id=i.nextPersistentConnectionId_++,this.log_=df("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=jp,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,G&&!(0,Et.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Gb.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Vm.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,h){const g=++this.requestNumber_,E={r:g,a:e,b:r};this.log_((0,Et.Wl)(E)),(0,Et.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(E),h&&(this.requestCBHash_[g]=h)}get(e){this.initConnection_();const r=new Et.BH,h={p:e._path.toString(),q:e._queryObject};return this.outstandingGets_.push({action:"g",request:h,onComplete:S=>{const R=S.d;"ok"===S.s?r.resolve(R):r.reject(R)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(e,r,h,g){this.initConnection_();const E=e._queryIdentifier,S=e._path.toString();this.log_("Listen called for "+S+" "+E),this.listens.has(S)||this.listens.set(S,new Map),(0,Et.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Et.hu)(!this.listens.get(S).has(E),"listen() called twice for same path/queryId.");const R={onComplete:g,hashFn:r,query:e,tag:h};this.listens.get(S).set(E,R),this.connected_&&this.sendListen_(R)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,h=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(h)})}sendListen_(e){const r=e.query,h=r._path.toString(),g=r._queryIdentifier;this.log_("Listen on "+h+" for "+g);const E={p:h};e.tag&&(E.q=r._queryObject,E.t=e.tag),E.h=e.hashFn(),this.sendRequest("q",E,R=>{const G=R.d,re=R.s;i.warnOnListenWarnings_(G,r),(this.listens.get(h)&&this.listens.get(h).get(g))===e&&(this.log_("listen response",R),"ok"!==re&&this.removeListen_(h,g),e.onComplete&&e.onComplete(re,G))})}static warnOnListenWarnings_(e,r){if(e&&"object"==typeof e&&(0,Et.r3)(e,"w")){const h=(0,Et.DV)(e,"w");if(Array.isArray(h)&&~h.indexOf("no_index")){const g='".indexOn": "'+r._queryParams.getIndex().toString()+'"',E=r._path.toString();Da(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${g} at ${E} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,Et.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=(0,Et.w9)(e)?"auth":"gauth",h={cred:e};null===this.authOverride_?h.noauth=!0:"object"==typeof this.authOverride_&&(h.authvar=this.authOverride_),this.sendRequest(r,h,g=>{const E=g.s,S=g.d||"error";this.authToken_===e&&("ok"===E?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(E,S))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,h=e.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,h)})}unlisten(e,r){const h=e._path.toString(),g=e._queryIdentifier;this.log_("Unlisten called for "+h+" "+g),(0,Et.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(h,g)&&this.connected_&&this.sendUnlisten_(h,g,e._queryObject,r)}sendUnlisten_(e,r,h,g){this.log_("Unlisten on "+e+" for "+r);const E={p:e};g&&(E.q=h,E.t=g),this.sendRequest("n",E)}onDisconnectPut(e,r,h){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,h):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:h})}onDisconnectMerge(e,r,h){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,h):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:h})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,h,g){const E={p:r,d:h};this.log_("onDisconnect "+e,E),this.sendRequest(e,E,S=>{g&&setTimeout(()=>{g(S.s,S.d)},Math.floor(0))})}put(e,r,h,g){this.putInternal("p",e,r,h,g)}merge(e,r,h,g){this.putInternal("m",e,r,h,g)}putInternal(e,r,h,g,E){this.initConnection_();const S={p:r,d:h};void 0!==E&&(S.h=E),this.outstandingPuts_.push({action:e,request:S,onComplete:g}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,h=this.outstandingPuts_[e].request,g=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,h,E=>{this.log_(r+" response",E),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),g&&g(E.s,E.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,h=>{"ok"!==h.s&&this.log_("reportStats","Error sending stats: "+h.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,Et.Wl)(e));const r=e.r,h=this.requestCBHash_[r];h&&(delete this.requestCBHash_[r],h(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),"d"===e?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===e?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===e?this.onListenRevoked_(r.p,r.q):"ac"===e?this.onAuthRevoked_(r.s,r.d):"apc"===e?this.onAppCheckRevoked_(r.s,r.d):"sd"===e?this.onSecurityDebugPacket_(r):Gy("Unrecognized action received from server: "+(0,Et.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,Et.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=jp,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=jp,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=jp),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,d1.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const r=e.onDataMessage_.bind(e),h=e.onReady_.bind(e),g=e.onRealtimeDisconnect_.bind(e),E=e.id+":"+i.nextConnectionId_++,S=e.lastSessionId;let R=!1,G=null;const re=function(){G?G.close():(R=!0,g())};e.realtime_={close:re,sendRequest:function(st){(0,Et.hu)(G,"sendRequest call when we're not connected not allowed."),G.sendRequest(st)}};const Ae=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[st,Tt]=yield Promise.all([e.authTokenProvider_.getToken(Ae),e.appCheckTokenProvider_.getToken(Ae)]);R?$o("getToken() completed but was canceled"):($o("getToken() completed. Creating connection."),e.authToken_=st&&st.accessToken,e.appCheckToken_=Tt&&Tt.token,G=new rv(E,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,r,h,g,Pt=>{Da(Pt+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},S))}catch(st){e.log_("Failed to get token: "+st),R||(e.repoInfo_.nodeAdmin&&Da(st),re())}}})()}interrupt(e){$o("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){$o("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,Et.xb)(this.interruptReasons_)&&(this.reconnectDelay_=jp,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let h;h=r?r.map(E=>Db(E)).join("$"):"default";const g=this.removeListen_(e,h);g&&g.onComplete&&g.onComplete("permission_denied")}removeListen_(e,r){const h=new Ur(e).toString();let g;if(this.listens.has(h)){const E=this.listens.get(h);g=E.get(r),E.delete(r),0===E.size&&this.listens.delete(h)}else g=void 0;return g}onAuthRevoked_(e,r){$o("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){$o("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";(0,Et.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+r+"."+bb.replace(/\./g,"-")]=1,(0,Et.uI)()?e["framework.cordova"]=1:(0,Et.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Vm.getInstance().currentlyOnline();return(0,Et.xb)(this.interruptReasons_)&&e}}return i.nextPersistentConnectionId_=0,i.nextConnectionId_=0,i})();class mr{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new mr(t,e)}}class jm{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const r=new mr(Au,t),h=new mr(Au,e);return 0!==this.compare(r,h)}minPost(){return mr.MIN}}class yT extends jm{static get __EMPTY_NODE(){return sv}static set __EMPTY_NODE(t){sv=t}compare(t,e){return dd(t.name,e.name)}isDefinedOn(t){throw(0,Et.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return mr.MIN}maxPost(){return new mr(sc,sv)}makePost(t,e){return(0,Et.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new mr(t,sv)}toString(){return".key"}}const Vc=new yT;class ov{constructor(t,e,r,h,g=null){this.isReverse_=h,this.resultGenerator_=g,this.nodeStack_=[];let E=1;for(;!t.isEmpty();)if(t=t,E=e?r(t.key,e):1,h&&(E*=-1),E<0)t=this.isReverse_?t.left:t.right;else{if(0===E){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let av,Su=(()=>{class i{constructor(e,r,h,g,E){this.key=e,this.value=r,this.color=null!=h?h:i.RED,this.left=null!=g?g:Ka.EMPTY_NODE,this.right=null!=E?E:Ka.EMPTY_NODE}copy(e,r,h,g,E){return new i(null!=e?e:this.key,null!=r?r:this.value,null!=h?h:this.color,null!=g?g:this.left,null!=E?E:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,h){let g=this;const E=h(e,g.key);return g=E<0?g.copy(null,null,null,g.left.insert(e,r,h),null):0===E?g.copy(null,r,null,null,null):g.copy(null,null,null,null,g.right.insert(e,r,h)),g.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ka.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let h,g;if(h=this,r(e,h.key)<0)!h.left.isEmpty()&&!h.left.isRed_()&&!h.left.left.isRed_()&&(h=h.moveRedLeft_()),h=h.copy(null,null,null,h.left.remove(e,r),null);else{if(h.left.isRed_()&&(h=h.rotateRight_()),!h.right.isEmpty()&&!h.right.isRed_()&&!h.right.left.isRed_()&&(h=h.moveRedRight_()),0===r(e,h.key)){if(h.right.isEmpty())return Ka.EMPTY_NODE;g=h.right.min_(),h=h.copy(g.key,g.value,null,null,h.right.removeMin_())}h=h.copy(null,null,null,null,h.right.remove(e,r))}return h.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return i.RED=!0,i.BLACK=!1,i})();class Ka{constructor(t,e=Ka.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Ka(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Su.BLACK,null,null))}remove(t){return new Ka(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Su.BLACK,null,null))}get(t){let e,r=this.root_;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e)return r.value;e<0?r=r.left:e>0&&(r=r.right)}return null}getPredecessorKey(t){let e,r=this.root_,h=null;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e){if(r.left.isEmpty())return h?h.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}e<0?r=r.left:e>0&&(h=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new ov(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new ov(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new ov(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new ov(this.root_,null,this.comparator_,!0,t)}}function S1(i,t){return dd(i.name,t.name)}function Wb(i,t){return dd(i,t)}Ka.EMPTY_NODE=new class vT{copy(t,e,r,h,g){return this}insert(t,e,r){return new Su(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const lv=function(i){return"number"==typeof i?"number:"+Zy(i):"string:"+i},qb=function(i){if(i.isLeafNode()){const t=i.val();(0,Et.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,Et.r3)(t,".sv"),"Priority must be a string or number.")}else(0,Et.hu)(i===av||i.isEmpty(),"priority of unexpected type.");(0,Et.hu)(i===av||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let bT,zb,ET,gf=(()=>{class i{constructor(e,r=i.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,(0,Et.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),qb(this.priorityNode_)}static set __childrenNodeConstructor(e){bT=e}static get __childrenNodeConstructor(){return bT}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new i(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return sr(e)?this:".priority"===gr(e)?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return".priority"===e?this.updatePriority(r):r.isEmpty()&&".priority"!==e?this:i.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const h=gr(e);return null===h?r:r.isEmpty()&&".priority"!==h?this:((0,Et.hu)(".priority"!==h||1===pf(e),".priority must be the last token in a path"),this.updateImmediateChild(h,i.__childrenNodeConstructor.EMPTY_NODE.updateChild(ws(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+lv(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",e+="number"===r?Zy(this.value_):this.value_,this.lazyHash_=km(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===i.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof i.__childrenNodeConstructor?-1:((0,Et.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,h=typeof this.value_,g=i.VALUE_TYPE_ORDER.indexOf(r),E=i.VALUE_TYPE_ORDER.indexOf(h);return(0,Et.hu)(g>=0,"Unknown leaf type: "+r),(0,Et.hu)(E>=0,"Unknown leaf type: "+h),g===E?"object"===h?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:E-g}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const r=e;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return i.VALUE_TYPE_ORDER=["object","boolean","number","string"],i})();const ps=new class tI extends jm{compare(t,e){const r=t.node.getPriority(),h=e.node.getPriority(),g=r.compareTo(h);return 0===g?dd(t.name,e.name):g}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return mr.MIN}maxPost(){return new mr(sc,new gf("[PRIORITY-POST]",ET))}makePost(t,e){const r=zb(t);return new mr(e,new gf("[PRIORITY-POST]",r))}toString(){return".priority"}},M1=Math.log(2);class x1{constructor(t){this.count=parseInt(Math.log(t+1)/M1,10),this.current_=this.count-1;const h=(g=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&h}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const cv=function(i,t,e,r){i.sort(t);const h=function(R,G){const re=G-R;let be,Ae;if(0===re)return null;if(1===re)return be=i[R],Ae=e?e(be):be,new Su(Ae,be.node,Su.BLACK,null,null);{const st=parseInt(re/2,10)+R,Tt=h(R,st),Pt=h(st+1,G);return be=i[st],Ae=e?e(be):be,new Su(Ae,be.node,Su.BLACK,Tt,Pt)}},S=function(R){let G=null,re=null,be=i.length;const Ae=function(Tt,Pt){const un=be-Tt,ni=be;be-=Tt;const li=h(un+1,ni),Pi=i[un],yi=e?e(Pi):Pi;st(new Su(yi,Pi.node,Pt,null,li))},st=function(Tt){G?(G.left=Tt,G=Tt):(re=Tt,G=Tt)};for(let Tt=0;Tt<R.count;++Tt){const Pt=R.nextBitIsOne(),un=Math.pow(2,R.count-(Tt+1));Pt?Ae(un,Su.BLACK):(Ae(un,Su.BLACK),Ae(un,Su.RED))}return re}(new x1(i.length));return new Ka(r||t,S)};let CT;const Hm={};class ah{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,Et.hu)(Hm&&ps,"ChildrenNode.ts has not been loaded"),CT=CT||new ah({".priority":Hm},{".priority":ps}),CT}get(t){const e=(0,Et.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ka?e:null}hasIndex(t){return(0,Et.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,Et.hu)(t!==Vc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let h=!1;const g=e.getIterator(mr.Wrap);let S,E=g.getNext();for(;E;)h=h||t.isDefinedOn(E.node),r.push(E),E=g.getNext();S=h?cv(r,t.getCompare()):Hm;const R=t.toString(),G=Object.assign({},this.indexSet_);G[R]=t;const re=Object.assign({},this.indexes_);return re[R]=S,new ah(re,G)}addToIndexes(t,e){const r=(0,Et.UI)(this.indexes_,(h,g)=>{const E=(0,Et.DV)(this.indexSet_,g);if((0,Et.hu)(E,"Missing index implementation for "+g),h===Hm){if(E.isDefinedOn(t.node)){const S=[],R=e.getIterator(mr.Wrap);let G=R.getNext();for(;G;)G.name!==t.name&&S.push(G),G=R.getNext();return S.push(t),cv(S,E.getCompare())}return Hm}{const S=e.get(t.name);let R=h;return S&&(R=R.remove(new mr(t.name,S))),R.insert(t,t.node)}});return new ah(r,this.indexSet_)}removeFromIndexes(t,e){const r=(0,Et.UI)(this.indexes_,h=>{if(h===Hm)return h;{const g=e.get(t.name);return g?h.remove(new mr(t.name,g)):h}});return new ah(r,this.indexSet_)}}let uv,Xi=(()=>{class i{constructor(e,r,h){this.children_=e,this.priorityNode_=r,this.indexMap_=h,this.lazyHash_=null,this.priorityNode_&&qb(this.priorityNode_),this.children_.isEmpty()&&(0,Et.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return uv||(uv=new i(new Ka(Wb),null,ah.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||uv}updatePriority(e){return this.children_.isEmpty()?this:new i(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const r=this.children_.get(e);return null===r?uv:r}}getChild(e){const r=gr(e);return null===r?this:this.getImmediateChild(r).getChild(ws(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,r){if((0,Et.hu)(r,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(r);{const h=new mr(e,r);let g,E;r.isEmpty()?(g=this.children_.remove(e),E=this.indexMap_.removeFromIndexes(h,this.children_)):(g=this.children_.insert(e,r),E=this.indexMap_.addToIndexes(h,this.children_));const S=g.isEmpty()?uv:this.priorityNode_;return new i(g,S,E)}}updateChild(e,r){const h=gr(e);if(null===h)return r;{(0,Et.hu)(".priority"!==gr(e)||1===pf(e),".priority must be the last token in a path");const g=this.getImmediateChild(h).updateChild(ws(e),r);return this.updateImmediateChild(h,g)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let h=0,g=0,E=!0;if(this.forEachChild(ps,(S,R)=>{r[S]=R.val(e),h++,E&&i.INTEGER_REGEXP_.test(S)?g=Math.max(g,Number(S)):E=!1}),!e&&E&&g<2*h){const S=[];for(const R in r)S[R]=r[R];return S}return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+lv(this.getPriority().val())+":"),this.forEachChild(ps,(r,h)=>{const g=h.hash();""!==g&&(e+=":"+r+":"+g)}),this.lazyHash_=""===e?"":km(e)}return this.lazyHash_}getPredecessorChildName(e,r,h){const g=this.resolveIndex_(h);if(g){const E=g.getPredecessorKey(new mr(e,r));return E?E.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const h=r.minKey();return h&&h.name}return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new mr(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const h=r.maxKey();return h&&h.name}return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new mr(r,this.children_.get(r)):null}forEachChild(e,r){const h=this.resolveIndex_(e);return h?h.inorderTraversal(g=>r(g.name,g.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const h=this.resolveIndex_(r);if(h)return h.getIteratorFrom(e,g=>g);{const g=this.children_.getIteratorFrom(e.name,mr.Wrap);let E=g.peek();for(;null!=E&&r.compare(E,e)<0;)g.getNext(),E=g.peek();return g}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const h=this.resolveIndex_(r);if(h)return h.getReverseIteratorFrom(e,g=>g);{const g=this.children_.getReverseIteratorFrom(e.name,mr.Wrap);let E=g.peek();for(;null!=E&&r.compare(E,e)>0;)g.getNext(),E=g.peek();return g}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===lh?-1:0}withIndex(e){if(e===Vc||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new i(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===Vc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const h=this.getIterator(ps),g=r.getIterator(ps);let E=h.getNext(),S=g.getNext();for(;E&&S;){if(E.name!==S.name||!E.node.equals(S.node))return!1;E=h.getNext(),S=g.getNext()}return null===E&&null===S}return!1}return!1}}resolveIndex_(e){return e===Vc?null:this.indexMap_.get(e.toString())}}return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i})();const lh=new class O1 extends Xi{constructor(){super(new Ka(Wb),Xi.EMPTY_NODE,ah.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Xi.EMPTY_NODE}isEmpty(){return!1}};function Ys(i,t=null){if(null===i)return Xi.EMPTY_NODE;if("object"==typeof i&&".priority"in i&&(t=i[".priority"]),(0,Et.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof i&&".value"in i&&null!==i[".value"]&&(i=i[".value"]),"object"!=typeof i||".sv"in i)return new gf(i,Ys(t));if(i instanceof Array){let e=Xi.EMPTY_NODE;return Ho(i,(r,h)=>{if((0,Et.r3)(i,r)&&"."!==r.substring(0,1)){const g=Ys(h);(g.isLeafNode()||!g.isEmpty())&&(e=e.updateImmediateChild(r,g))}}),e.updatePriority(Ys(t))}{const e=[];let r=!1;if(Ho(i,(E,S)=>{if("."!==E.substring(0,1)){const R=Ys(S);R.isEmpty()||(r=r||!R.getPriority().isEmpty(),e.push(new mr(E,R)))}}),0===e.length)return Xi.EMPTY_NODE;const g=cv(e,S1,E=>E.name,Wb);if(r){const E=cv(e,ps.getCompare());return new Xi(g,Ys(t),new ah({".priority":E},{".priority":ps}))}return new Xi(g,Ys(t),ah.Default)}}Object.defineProperties(mr,{MIN:{value:new mr(Au,Xi.EMPTY_NODE)},MAX:{value:new mr(sc,lh)}}),yT.__EMPTY_NODE=Xi.EMPTY_NODE,gf.__childrenNodeConstructor=Xi,function $m(i){av=i}(lh),function eI(i){ET=i}(lh),function N1(i){zb=i}(Ys);class dv extends jm{constructor(t){super(),this.indexPath_=t,(0,Et.hu)(!sr(t)&&".priority"!==gr(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const r=this.extractChild(t.node),h=this.extractChild(e.node),g=r.compareTo(h);return 0===g?dd(t.name,e.name):g}makePost(t,e){const r=Ys(t),h=Xi.EMPTY_NODE.updateChild(this.indexPath_,r);return new mr(e,h)}maxPost(){const t=Xi.EMPTY_NODE.updateChild(this.indexPath_,lh);return new mr(sc,t)}toString(){return Um(this.indexPath_,0).join("/")}}const hv=new class mf extends jm{compare(t,e){const r=t.node.compareTo(e.node);return 0===r?dd(t.name,e.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return mr.MIN}maxPost(){return mr.MAX}makePost(t,e){const r=Ys(t);return new mr(e,r)}toString(){return".value"}};function gv(i,t,e){return{type:"child_changed",snapshotNode:t,childName:i,oldSnap:e}}class Jb{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ps}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Et.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Et.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Au}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Et.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Et.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:sc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Et.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ps}copy(){const t=new Jb;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Xb(i){const t={};if(i.isDefault())return t;let e;return i.index_===ps?e="$priority":i.index_===hv?e="$value":i.index_===Vc?e="$key":((0,Et.hu)(i.index_ instanceof dv,"Unrecognized index type!"),e=i.index_.toString()),t.orderBy=(0,Et.Wl)(e),i.startSet_&&(t.startAt=(0,Et.Wl)(i.indexStartValue_),i.startNameSet_&&(t.startAt+=","+(0,Et.Wl)(i.indexStartName_))),i.endSet_&&(t.endAt=(0,Et.Wl)(i.indexEndValue_),i.endNameSet_&&(t.endAt+=","+(0,Et.Wl)(i.indexEndName_))),i.limitSet_&&(i.isViewFromLeft()?t.limitToFirst=i.limit_:t.limitToLast=i.limit_),t}function Wm(i){const t={};if(i.startSet_&&(t.sp=i.indexStartValue_,i.startNameSet_&&(t.sn=i.indexStartName_)),i.endSet_&&(t.ep=i.indexEndValue_,i.endNameSet_&&(t.en=i.indexEndName_)),i.limitSet_){t.l=i.limit_;let e=i.viewFrom_;""===e&&(e=i.isViewFromLeft()?"l":"r"),t.vf=e}return i.index_!==ps&&(t.i=i.index_.toString()),t}class eE extends Fb{constructor(t,e,r,h){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=r,this.appCheckTokenProvider_=h,this.log_=df("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,Et.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,r,h){const g=t._path.toString();this.log_("Listen called for "+g+" "+t._queryIdentifier);const E=eE.getListenId_(t,r),S={};this.listens_[E]=S;const R=Xb(t._queryParams);this.restRequest_(g+".json",R,(G,re)=>{let be=re;if(404===G&&(be=null,G=null),null===G&&this.onDataUpdate_(g,be,!1,r),(0,Et.DV)(this.listens_,E)===S){let Ae;Ae=G?401===G?"permission_denied":"rest_error:"+G:"ok",h(Ae,null)}})}unlisten(t,e){const r=eE.getListenId_(t,e);delete this.listens_[r]}get(t){const e=Xb(t._queryParams),r=t._path.toString(),h=new Et.BH;return this.restRequest_(r+".json",e,(g,E)=>{let S=E;404===g&&(S=null,g=null),null===g?(this.onDataUpdate_(r,S,!1,null),h.resolve(S)):h.reject(new Error(S))}),h.promise}refreshAuthToken(t){}restRequest_(t,e={},r){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([h,g])=>{h&&h.accessToken&&(e.auth=h.accessToken),g&&g.token&&(e.ac=g.token);const E=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,Et.xO)(e);this.log_("Sending REST request for "+E);const S=new XMLHttpRequest;S.onreadystatechange=()=>{if(r&&4===S.readyState){this.log_("REST Response for "+E+" received. status:",S.status,"response:",S.responseText);let R=null;if(S.status>=200&&S.status<300){try{R=(0,Et.cI)(S.responseText)}catch(G){Da("Failed to parse JSON response for "+E+": "+S.responseText)}r(null,R)}else 401!==S.status&&404!==S.status&&Da("Got unsuccessful REST response for "+E+" Status: "+S.status),r(S.status);r=null}},S.open("GET",E,!0),S.send()})}}class AT{constructor(){this.rootNode_=Xi.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function _f(){return{value:null,children:new Map}}function Hp(i,t,e){if(sr(t))i.value=e,i.children.clear();else if(null!==i.value)i.value=i.value.updateChild(t,e);else{const r=gr(t);i.children.has(r)||i.children.set(r,_f()),Hp(i.children.get(r),t=ws(t),e)}}function nE(i,t,e){null!==i.value?e(t,i.value):function V1(i,t){i.children.forEach((e,r)=>{t(r,e)})}(i,(r,h)=>{nE(h,new Ur(t.toString()+"/"+r),e)})}class iI{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Ho(this.last_,(r,h)=>{e[r]=e[r]-h}),this.last_=t,e}}class $1{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new iI(t);const r=1e4+2e4*Math.random();Bp(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),e={};let r=!1;Ho(t,(h,g)=>{g>0&&(0,Et.r3)(this.statsToReport_,h)&&(e[h]=g,r=!0)}),r&&this.server_.reportStats(e),Bp(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var oc=(()=>{return(i=oc||(oc={}))[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",oc;var i})();function sE(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}class oE{constructor(t,e,r){this.path=t,this.affectedTree=e,this.revert=r,this.type=oc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(sr(this.path)){if(null!=this.affectedTree.value)return(0,Et.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Ur(t));return new oE(jr(),e,this.revert)}}return(0,Et.hu)(gr(this.path)===t,"operationForChild called for unrelated child."),new oE(ws(this.path),this.affectedTree,this.revert)}}class Gp{constructor(t,e,r){this.source=t,this.path=e,this.snap=r,this.type=oc.OVERWRITE}operationForChild(t){return sr(this.path)?new Gp(this.source,jr(),this.snap.getImmediateChild(t)):new Gp(this.source,ws(this.path),this.snap)}}class qm{constructor(t,e,r){this.source=t,this.path=e,this.children=r,this.type=oc.MERGE}operationForChild(t){if(sr(this.path)){const e=this.children.subtree(new Ur(t));return e.isEmpty()?null:e.value?new Gp(this.source,jr(),e.value):new qm(this.source,jr(),e)}return(0,Et.hu)(gr(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new qm(this.source,ws(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class yf{constructor(t,e,r){this.node_=t,this.fullyInitialized_=e,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(sr(t))return this.isFullyInitialized()&&!this.filtered_;const e=gr(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}function Ev(i,t,e,r,h,g){const E=r.filter(S=>S.type===e);E.sort((S,R)=>function oI(i,t,e){if(null==t.childName||null==e.childName)throw(0,Et.g5)("Should only compare child_ events.");const r=new mr(t.childName,t.snapshotNode),h=new mr(e.childName,e.snapshotNode);return i.index_.compare(r,h)}(i,S,R)),E.forEach(S=>{const R=function sI(i,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,i.index_)),t}(i,S,g);h.forEach(G=>{G.respondsTo(S.type)&&t.push(G.createEvent(R,i.query_))})})}function o(i,t){return{eventCache:i,serverCache:t}}function a(i,t,e,r){return o(new yf(t,e,r),i.serverCache)}function u(i,t,e,r){return o(i.eventCache,new yf(t,e,r))}function f(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function m(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}let b;class x{constructor(t,e=(()=>(b||(b=new Ka(f1)),b))()){this.value=t,this.children=e}static fromObject(t){let e=new x(null);return Ho(t,(r,h)=>{e=e.set(new Ur(r),h)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:jr(),value:this.value};if(sr(t))return null;{const r=gr(t),h=this.children.get(r);if(null!==h){const g=h.findRootMostMatchingPathAndValue(ws(t),e);return null!=g?{path:js(new Ur(r),g.path),value:g.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(sr(t))return this;{const e=gr(t),r=this.children.get(e);return null!==r?r.subtree(ws(t)):new x(null)}}set(t,e){if(sr(t))return new x(e,this.children);{const r=gr(t),g=(this.children.get(r)||new x(null)).set(ws(t),e),E=this.children.insert(r,g);return new x(this.value,E)}}remove(t){if(sr(t))return this.children.isEmpty()?new x(null):new x(null,this.children);{const e=gr(t),r=this.children.get(e);if(r){const h=r.remove(ws(t));let g;return g=h.isEmpty()?this.children.remove(e):this.children.insert(e,h),null===this.value&&g.isEmpty()?new x(null):new x(this.value,g)}return this}}get(t){if(sr(t))return this.value;{const e=gr(t),r=this.children.get(e);return r?r.get(ws(t)):null}}setTree(t,e){if(sr(t))return e;{const r=gr(t),g=(this.children.get(r)||new x(null)).setTree(ws(t),e);let E;return E=g.isEmpty()?this.children.remove(r):this.children.insert(r,g),new x(this.value,E)}}fold(t){return this.fold_(jr(),t)}fold_(t,e){const r={};return this.children.inorderTraversal((h,g)=>{r[h]=g.fold_(js(t,h),e)}),e(t,this.value,r)}findOnPath(t,e){return this.findOnPath_(t,jr(),e)}findOnPath_(t,e,r){const h=!!this.value&&r(e,this.value);if(h)return h;if(sr(t))return null;{const g=gr(t),E=this.children.get(g);return E?E.findOnPath_(ws(t),js(e,g),r):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,jr(),e)}foreachOnPath_(t,e,r){if(sr(t))return this;{this.value&&r(e,this.value);const h=gr(t),g=this.children.get(h);return g?g.foreachOnPath_(ws(t),js(e,h),r):new x(null)}}foreach(t){this.foreach_(jr(),t)}foreach_(t,e){this.children.inorderTraversal((r,h)=>{h.foreach_(js(t,r),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,r)=>{r.value&&t(e,r.value)})}}class P{constructor(t){this.writeTree_=t}static empty(){return new P(new x(null))}}function Q(i,t,e){if(sr(t))return new P(new x(e));{const r=i.writeTree_.findRootMostValueAndPath(t);if(null!=r){const h=r.path;let g=r.value;const E=za(h,t);return g=g.updateChild(E,e),new P(i.writeTree_.set(h,g))}{const h=new x(e),g=i.writeTree_.setTree(t,h);return new P(g)}}}function oe(i,t,e){let r=i;return Ho(e,(h,g)=>{r=Q(r,js(t,h),g)}),r}function ve(i,t){if(sr(t))return P.empty();{const e=i.writeTree_.setTree(t,new x(null));return new P(e)}}function $e(i,t){return null!=lt(i,t)}function lt(i,t){const e=i.writeTree_.findRootMostValueAndPath(t);return null!=e?i.writeTree_.get(e.path).getChild(za(e.path,t)):null}function Lt(i){const t=[],e=i.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(ps,(r,h)=>{t.push(new mr(r,h))}):i.writeTree_.children.inorderTraversal((r,h)=>{null!=h.value&&t.push(new mr(r,h.value))}),t}function ln(i,t){if(sr(t))return i;{const e=lt(i,t);return new P(null!=e?new x(e):i.writeTree_.subtree(t))}}function Dn(i){return i.writeTree_.isEmpty()}function Wn(i,t){return Qt(jr(),i.writeTree_,t)}function Qt(i,t,e){if(null!=t.value)return e.updateChild(i,t.value);{let r=null;return t.children.inorderTraversal((h,g)=>{".priority"===h?((0,Et.hu)(null!==g.value,"Priority writes must always be leaf nodes"),r=g.value):e=Qt(js(i,h),g,e)}),!e.getChild(i).isEmpty()&&null!==r&&(e=e.updateChild(js(i,".priority"),r)),e}}function _i(i,t){return cI(t,i)}function aE(i,t){if(i.snap)return ll(i.path,t);for(const e in i.children)if(i.children.hasOwnProperty(e)&&ll(js(i.path,e),t))return!0;return!1}function cE(i){return i.visible}function Cv(i,t,e){let r=P.empty();for(let h=0;h<i.length;++h){const g=i[h];if(t(g)){const E=g.path;let S;if(g.snap)ll(e,E)?(S=za(e,E),r=Q(r,S,g.snap)):ll(E,e)&&(S=za(E,e),r=Q(r,jr(),g.snap.getChild(S)));else{if(!g.children)throw(0,Et.g5)("WriteRecord should have .snap or .children");if(ll(e,E))S=za(e,E),r=oe(r,S,g.children);else if(ll(E,e))if(S=za(E,e),sr(S))r=oe(r,jr(),g.children);else{const R=(0,Et.DV)(g.children,gr(S));if(R){const G=R.getChild(ws(S));r=Q(r,jr(),G)}}}}}return r}function Tv(i,t,e,r,h){if(r||h){const g=ln(i.visibleWrites,t);return!h&&Dn(g)?e:h||null!=e||$e(g,jr())?Wn(Cv(i.allWrites,function(G){return(G.visible||h)&&(!r||!~r.indexOf(G.writeId))&&(ll(G.path,t)||ll(t,G.path))},t),e||Xi.EMPTY_NODE):null}{const g=lt(i.visibleWrites,t);if(null!=g)return g;{const E=ln(i.visibleWrites,t);return Dn(E)?e:null!=e||$e(E,jr())?Wn(E,e||Xi.EMPTY_NODE):null}}}function NT(i,t,e,r){return Tv(i.writeTree,i.treePath,t,e,r)}function G1(i,t){return function uE(i,t,e){let r=Xi.EMPTY_NODE;const h=lt(i.visibleWrites,t);if(h)return h.isLeafNode()||h.forEachChild(ps,(g,E)=>{r=r.updateImmediateChild(g,E)}),r;if(e){const g=ln(i.visibleWrites,t);return e.forEachChild(ps,(E,S)=>{const R=Wn(ln(g,new Ur(E)),S);r=r.updateImmediateChild(E,R)}),Lt(g).forEach(E=>{r=r.updateImmediateChild(E.name,E.node)}),r}return Lt(ln(i.visibleWrites,t)).forEach(E=>{r=r.updateImmediateChild(E.name,E.node)}),r}(i.writeTree,i.treePath,t)}function aI(i,t,e,r){return function dE(i,t,e,r,h){(0,Et.hu)(r||h,"Either existingEventSnap or existingServerSnap must exist");const g=js(t,e);if($e(i.visibleWrites,g))return null;{const E=ln(i.visibleWrites,g);return Dn(E)?h.getChild(e):Wn(E,h.getChild(e))}}(i.writeTree,i.treePath,t,e,r)}function MT(i,t){return function fE(i,t){return lt(i.visibleWrites,t)}(i.writeTree,js(i.treePath,t))}function Z1(i,t,e){return function hE(i,t,e,r){const h=js(t,e),g=lt(i.visibleWrites,h);return null!=g?g:r.isCompleteForChild(e)?Wn(ln(i.visibleWrites,h),r.getNode().getImmediateChild(e)):null}(i.writeTree,i.treePath,t,e)}function lI(i,t){return cI(js(i.treePath,t),i.writeTree)}function cI(i,t){return{treePath:i,writeTree:t}}class VA{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,r=t.childName;(0,Et.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,Et.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const h=this.changeMap.get(r);if(h){const g=h.type;if("child_added"===e&&"child_removed"===g)this.changeMap.set(r,gv(r,t.snapshotNode,h.snapshotNode));else if("child_removed"===e&&"child_added"===g)this.changeMap.delete(r);else if("child_removed"===e&&"child_changed"===g)this.changeMap.set(r,function pv(i,t){return{type:"child_removed",snapshotNode:t,childName:i}}(r,h.oldSnap));else if("child_changed"===e&&"child_added"===g)this.changeMap.set(r,function Zm(i,t){return{type:"child_added",snapshotNode:t,childName:i}}(r,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==g)throw(0,Et.g5)("Illegal combination of changes: "+t+" occurred after "+h);this.changeMap.set(r,gv(r,t.snapshotNode,h.oldSnap))}}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}const uI=new class UA{getCompleteChild(t){return null}getChildAfterChild(t,e,r){return null}};class W1{constructor(t,e,r=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=r}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const r=null!=this.optCompleteServerCache_?new yf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Z1(this.writes_,t,r)}}getChildAfterChild(t,e,r){const h=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:m(this.viewCache_),g=function BA(i,t,e,r,h,g){return function FA(i,t,e,r,h,g,E){let S;const R=ln(i.visibleWrites,t),G=lt(R,jr());if(null!=G)S=G;else{if(null==e)return[];S=Wn(R,e)}if(S=S.withIndex(E),S.isEmpty()||S.isLeafNode())return[];{const re=[],be=E.getCompare(),Ae=g?S.getReverseIteratorFrom(r,E):S.getIteratorFrom(r,E);let st=Ae.getNext();for(;st&&re.length<h;)0!==be(st,r)&&re.push(st),st=Ae.getNext();return re}}(i.writeTree,i.treePath,t,e,r,h,g)}(this.writes_,h,e,1,r,t);return 0===g.length?null:g[0]}}function dI(i,t,e,r,h,g){const E=t.eventCache;if(null!=MT(r,e))return t;{let S,R;if(sr(e))if((0,Et.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const G=m(t),be=G1(r,G instanceof Xi?G:Xi.EMPTY_NODE);S=i.filter.updateFullNode(t.eventCache.getNode(),be,g)}else{const G=NT(r,m(t));S=i.filter.updateFullNode(t.eventCache.getNode(),G,g)}else{const G=gr(e);if(".priority"===G){(0,Et.hu)(1===pf(e),"Can't have a priority with additional path components");const re=E.getNode();R=t.serverCache.getNode();const be=aI(r,e,re,R);S=null!=be?i.filter.updatePriority(re,be):E.getNode()}else{const re=ws(e);let be;if(E.isCompleteForChild(G)){R=t.serverCache.getNode();const Ae=aI(r,e,E.getNode(),R);be=null!=Ae?E.getNode().getImmediateChild(G).updateChild(re,Ae):E.getNode().getImmediateChild(G)}else be=Z1(r,G,t.serverCache);S=null!=be?i.filter.updateChild(E.getNode(),G,be,re,h,g):E.getNode()}}return a(t,S,E.isFullyInitialized()||sr(e),i.filter.filtersNodes())}}function xT(i,t,e,r,h,g,E,S){const R=t.serverCache;let G;const re=E?i.filter:i.filter.getIndexedFilter();if(sr(e))G=re.updateFullNode(R.getNode(),r,null);else if(re.filtersNodes()&&!R.isFiltered()){const st=R.getNode().updateChild(e,r);G=re.updateFullNode(R.getNode(),st,null)}else{const st=gr(e);if(!R.isCompleteForPath(e)&&pf(e)>1)return t;const Tt=ws(e),un=R.getNode().getImmediateChild(st).updateChild(Tt,r);G=".priority"===st?re.updatePriority(R.getNode(),un):re.updateChild(R.getNode(),st,un,Tt,uI,null)}const be=u(t,G,R.isFullyInitialized()||sr(e),re.filtersNodes());return dI(i,be,e,h,new W1(h,be,g),S)}function q1(i,t,e,r,h,g,E){const S=t.eventCache;let R,G;const re=new W1(h,t,g);if(sr(e))G=i.filter.updateFullNode(t.eventCache.getNode(),r,E),R=a(t,G,!0,i.filter.filtersNodes());else{const be=gr(e);if(".priority"===be)G=i.filter.updatePriority(t.eventCache.getNode(),r),R=a(t,G,S.isFullyInitialized(),S.isFiltered());else{const Ae=ws(e),st=S.getNode().getImmediateChild(be);let Tt;if(sr(Ae))Tt=r;else{const Pt=re.getCompleteChild(be);Tt=null!=Pt?".priority"===Vb(Ae)&&Pt.getChild(w1(Ae)).isEmpty()?Pt:Pt.updateChild(Ae,r):Xi.EMPTY_NODE}R=st.equals(Tt)?t:a(t,i.filter.updateChild(S.getNode(),be,Tt,Ae,re,E),S.isFullyInitialized(),i.filter.filtersNodes())}}return R}function hI(i,t){return i.eventCache.isCompleteForChild(t)}function fI(i,t,e){return e.foreach((r,h)=>{t=t.updateChild(r,h)}),t}function z1(i,t,e,r,h,g,E,S){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let G,R=t;G=sr(e)?r:new x(null).setTree(e,r);const re=t.serverCache.getNode();return G.children.inorderTraversal((be,Ae)=>{if(re.hasChild(be)){const Tt=fI(0,t.serverCache.getNode().getImmediateChild(be),Ae);R=xT(i,R,new Ur(be),Tt,h,g,E,S)}}),G.children.inorderTraversal((be,Ae)=>{const st=!t.serverCache.isCompleteForChild(be)&&null===Ae.value;if(!re.hasChild(be)&&!st){const Pt=fI(0,t.serverCache.getNode().getImmediateChild(be),Ae);R=xT(i,R,new Ur(be),Pt,h,g,E,S)}}),R}function JA(i,t){const e=m(i.viewCache_);return e&&(i.query._queryParams.loadsAllData()||!sr(t)&&!e.getImmediateChild(gr(t)).isEmpty())?e.getChild(t):null}function mI(i,t,e,r){t.type===oc.MERGE&&null!==t.source.queryId&&((0,Et.hu)(m(i.viewCache_),"We should always have a full cache before handling merges"),(0,Et.hu)(f(i.viewCache_),"Missing event cache, even though we have a server cache"));const h=i.viewCache_,g=function HA(i,t,e,r,h){const g=new VA;let E,S;if(e.type===oc.OVERWRITE){const G=e;G.source.fromUser?E=q1(i,t,G.path,G.snap,r,h,g):((0,Et.hu)(G.source.fromServer,"Unknown source."),S=G.source.tagged||t.serverCache.isFiltered()&&!sr(G.path),E=xT(i,t,G.path,G.snap,r,h,S,g))}else if(e.type===oc.MERGE){const G=e;G.source.fromUser?E=function ZA(i,t,e,r,h,g,E){let S=t;return r.foreach((R,G)=>{const re=js(e,R);hI(t,gr(re))&&(S=q1(i,S,re,G,h,g,E))}),r.foreach((R,G)=>{const re=js(e,R);hI(t,gr(re))||(S=q1(i,S,re,G,h,g,E))}),S}(i,t,G.path,G.children,r,h,g):((0,Et.hu)(G.source.fromServer,"Unknown source."),S=G.source.tagged||t.serverCache.isFiltered(),E=z1(i,t,G.path,G.children,r,h,S,g))}else if(e.type===oc.ACK_USER_WRITE){const G=e;E=G.revert?function zA(i,t,e,r,h,g){let E;if(null!=MT(r,e))return t;{const S=new W1(r,t,h),R=t.eventCache.getNode();let G;if(sr(e)||".priority"===gr(e)){let re;if(t.serverCache.isFullyInitialized())re=NT(r,m(t));else{const be=t.serverCache.getNode();(0,Et.hu)(be instanceof Xi,"serverChildren would be complete if leaf node"),re=G1(r,be)}re=re,G=i.filter.updateFullNode(R,re,g)}else{const re=gr(e);let be=Z1(r,re,t.serverCache);null==be&&t.serverCache.isCompleteForChild(re)&&(be=R.getImmediateChild(re)),G=null!=be?i.filter.updateChild(R,re,be,ws(e),S,g):t.eventCache.getNode().hasChild(re)?i.filter.updateChild(R,re,Xi.EMPTY_NODE,ws(e),S,g):R,G.isEmpty()&&t.serverCache.isFullyInitialized()&&(E=NT(r,m(t)),E.isLeafNode()&&(G=i.filter.updateFullNode(G,E,g)))}return E=t.serverCache.isFullyInitialized()||null!=MT(r,jr()),a(t,G,E,i.filter.filtersNodes())}}(i,t,G.path,r,h,g):function WA(i,t,e,r,h,g,E){if(null!=MT(h,e))return t;const S=t.serverCache.isFiltered(),R=t.serverCache;if(null!=r.value){if(sr(e)&&R.isFullyInitialized()||R.isCompleteForPath(e))return xT(i,t,e,R.getNode().getChild(e),h,g,S,E);if(sr(e)){let G=new x(null);return R.getNode().forEachChild(Vc,(re,be)=>{G=G.set(new Ur(re),be)}),z1(i,t,e,G,h,g,S,E)}return t}{let G=new x(null);return r.foreach((re,be)=>{const Ae=js(e,re);R.isCompleteForPath(Ae)&&(G=G.set(re,R.getNode().getChild(Ae)))}),z1(i,t,e,G,h,g,S,E)}}(i,t,G.path,G.affectedTree,r,h,g)}else{if(e.type!==oc.LISTEN_COMPLETE)throw(0,Et.g5)("Unknown operation type: "+e.type);E=function qA(i,t,e,r,h){const g=t.serverCache;return dI(i,u(t,g.getNode(),g.isFullyInitialized()||sr(e),g.isFiltered()),e,r,uI,h)}(i,t,e.path,r,g)}const R=g.getChanges();return function GA(i,t,e){const r=t.eventCache;if(r.isFullyInitialized()){const h=r.getNode().isLeafNode()||r.getNode().isEmpty(),g=f(i);(e.length>0||!i.eventCache.isFullyInitialized()||h&&!r.getNode().equals(g)||!r.getNode().getPriority().equals(g.getPriority()))&&e.push(function k1(i){return{type:"value",snapshotNode:i}}(f(t)))}}(t,E,R),{viewCache:E,changes:R}}(i.processor_,h,t,e,r);return function $A(i,t){(0,Et.hu)(t.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,Et.hu)(t.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}(i.processor_,g.viewCache),(0,Et.hu)(g.viewCache.serverCache.isFullyInitialized()||!h.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=g.viewCache,function _I(i,t,e,r){return function rI(i,t,e,r){const h=[],g=[];return t.forEach(E=>{"child_changed"===E.type&&i.index_.indexedValueChanged(E.oldSnap,E.snapshotNode)&&g.push(function nI(i,t){return{type:"child_moved",snapshotNode:t,childName:i}}(E.childName,E.snapshotNode))}),Ev(i,h,"child_removed",t,r,e),Ev(i,h,"child_added",t,r,e),Ev(i,h,"child_moved",g,r,e),Ev(i,h,"child_changed",t,r,e),Ev(i,h,"value",t,r,e),h}(i.eventGenerator_,t,e,r?[r]:i.eventRegistrations_)}(i,g.changes,g.viewCache.eventCache.getNode(),null)}let OT,kT;function K1(i,t,e,r){const h=t.source.queryId;if(null!==h){const g=i.views.get(h);return(0,Et.hu)(null!=g,"SyncTree gave us an op for an invalid query."),mI(g,t,e,r)}{let g=[];for(const E of i.views.values())g=g.concat(mI(E,t,e,r));return g}}function Zp(i,t){let e=null;for(const r of i.views.values())e=e||JA(r,t);return e}class TI{constructor(t){this.listenProvider_=t,this.syncPointTree_=new x(null),this.pendingWriteTree_=function LA(){return{visibleWrites:P.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Y1(i,t,e,r,h){return function Er(i,t,e,r,h){(0,Et.hu)(r>i.lastWriteId,"Stacking an older write on top of newer ones"),void 0===h&&(h=!0),i.allWrites.push({path:t,snap:e,writeId:r,visible:h}),h&&(i.visibleWrites=Q(i.visibleWrites,t,e)),i.lastWriteId=r}(i.pendingWriteTree_,t,e,r,h),h?wv(i,new Gp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function qp(i,t,e=!1){const r=function Rl(i,t){for(let e=0;e<i.allWrites.length;e++){const r=i.allWrites[e];if(r.writeId===t)return r}return null}(i.pendingWriteTree_,t);if(function vf(i,t){const e=i.allWrites.findIndex(S=>S.writeId===t);(0,Et.hu)(e>=0,"removeWrite called with nonexistent writeId.");const r=i.allWrites[e];i.allWrites.splice(e,1);let h=r.visible,g=!1,E=i.allWrites.length-1;for(;h&&E>=0;){const S=i.allWrites[E];S.visible&&(E>=e&&aE(S,r.path)?h=!1:ll(r.path,S.path)&&(g=!0)),E--}return!!h&&(g?(function lE(i){i.visibleWrites=Cv(i.allWrites,cE,jr()),i.lastWriteId=i.allWrites.length>0?i.allWrites[i.allWrites.length-1].writeId:-1}(i),!0):(r.snap?i.visibleWrites=ve(i.visibleWrites,r.path):Ho(r.children,R=>{i.visibleWrites=ve(i.visibleWrites,js(r.path,R))}),!0))}(i.pendingWriteTree_,t)){let g=new x(null);return null!=r.snap?g=g.set(jr(),!0):Ho(r.children,E=>{g=g.set(new Ur(E),!0)}),wv(i,new oE(r.path,g,e))}return[]}function pE(i,t,e){return wv(i,new Gp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function FT(i,t,e){const h=i.pendingWriteTree_,g=i.syncPointTree_.findOnPath(t,(E,S)=>{const G=Zp(S,za(E,t));if(G)return G});return Tv(h,t,g,e,!0)}function wv(i,t){return DI(t,i.syncPointTree_,null,_i(i.pendingWriteTree_,jr()))}function DI(i,t,e,r){if(sr(i.path))return II(i,t,e,r);{const h=t.get(jr());null==e&&null!=h&&(e=Zp(h,jr()));let g=[];const E=gr(i.path),S=i.operationForChild(E),R=t.children.get(E);if(R&&S){const G=e?e.getImmediateChild(E):null,re=lI(r,E);g=g.concat(DI(S,R,G,re))}return h&&(g=g.concat(K1(h,i,r,e))),g}}function II(i,t,e,r){const h=t.get(jr());null==e&&null!=h&&(e=Zp(h,jr()));let g=[];return t.children.inorderTraversal((E,S)=>{const R=e?e.getImmediateChild(E):null,G=lI(r,E),re=i.operationForChild(E);re&&(g=g.concat(II(re,S,R,G)))}),h&&(g=g.concat(K1(h,i,r,e))),g}function J1(i,t){return i.tagToQueryMap.get(t)}function X1(i){const t=i.indexOf("$");return(0,Et.hu)(-1!==t&&t<i.length-1,"Bad queryKey."),{queryId:i.substr(t+1),path:new Ur(i.substr(0,t))}}function eD(i,t,e){const r=i.syncPointTree_.get(t);return(0,Et.hu)(r,"Missing sync point for query tag that we're tracking"),K1(r,e,_i(i.pendingWriteTree_,t),null)}class tD{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new tD(e)}node(){return this.node_}}class nD{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=js(this.path_,t);return new nD(this.syncTree_,e)}node(){return FT(this.syncTree_,this.path_)}}const SI=function(i,t,e){return i&&"object"==typeof i?((0,Et.hu)(".sv"in i,"Unexpected leaf node or priority contents"),"string"==typeof i[".sv"]?bS(i[".sv"],t,e):"object"==typeof i[".sv"]?ES(i[".sv"],t):void(0,Et.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2))):i},bS=function(i,t,e){if("timestamp"===i)return e.timestamp;(0,Et.hu)(!1,"Unexpected server value: "+i)},ES=function(i,t,e){i.hasOwnProperty("increment")||(0,Et.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const r=i.increment;"number"!=typeof r&&(0,Et.hu)(!1,"Unexpected increment value: "+r);const h=t.node();if((0,Et.hu)(null!=h,"Expected ChildrenNode.EMPTY_NODE for nulls"),!h.isLeafNode())return r;const E=h.getValue();return"number"!=typeof E?r:E+r},iD=function(i,t,e){return rD(i,new tD(t),e)};function rD(i,t,e){const r=i.getPriority().val(),h=SI(r,t.getImmediateChild(".priority"),e);let g;if(i.isLeafNode()){const E=i,S=SI(E.getValue(),t,e);return S!==E.getValue()||h!==E.getPriority().val()?new gf(S,Ys(h)):i}{const E=i;return g=E,h!==E.getPriority().val()&&(g=g.updatePriority(new gf(h))),E.forEachChild(ps,(S,R)=>{const G=rD(R,t.getImmediateChild(S),e);G!==R&&(g=g.updateImmediateChild(S,G))}),g}}class sD{constructor(t="",e=null,r={children:{},childCount:0}){this.name=t,this.parent=e,this.node=r}}function BT(i,t){let e=t instanceof Ur?t:new Ur(t),r=i,h=gr(e);for(;null!==h;){const g=(0,Et.DV)(r.node.children,h)||{children:{},childCount:0};r=new sD(h,r,g),e=ws(e),h=gr(e)}return r}function zm(i){return i.node.value}function oD(i,t){i.node.value=t,aD(i)}function MI(i){return i.node.childCount>0}function VT(i,t){Ho(i.node.children,(e,r)=>{t(new sD(e,i,r))})}function xI(i,t,e,r){e&&!r&&t(i),VT(i,h=>{xI(h,t,!0,r)}),e&&r&&t(i)}function _E(i){return new Ur(null===i.parent?i.name:_E(i.parent)+"/"+i.name)}function aD(i){null!==i.parent&&function wS(i,t,e){const r=function CS(i){return void 0===zm(i)&&!MI(i)}(e),h=(0,Et.r3)(i.node.children,t);r&&h?(delete i.node.children[t],i.node.childCount--,aD(i)):!r&&!h&&(i.node.children[t]=e.node,i.node.childCount++,aD(i))}(i.parent,i.name,i)}const DS=/[\[\].#$\/\u0000-\u001F\u007F]/,IS=/[\[\].#$\u0000-\u001F\u007F]/,lD=10485760,UT=function(i){return"string"==typeof i&&0!==i.length&&!DS.test(i)},vE=function(i,t,e){const r=e instanceof Ur?new D1(e,i):e;if(void 0===t)throw new Error(i+"contains undefined "+oh(r));if("function"==typeof t)throw new Error(i+"contains a function "+oh(r)+" with contents = "+t.toString());if(Fp(t))throw new Error(i+"contains "+t.toString()+" "+oh(r));if("string"==typeof t&&t.length>lD/3&&(0,Et.ug)(t)>lD)throw new Error(i+"contains a string greater than "+lD+" utf8 bytes "+oh(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let h=!1,g=!1;if(Ho(t,(E,S)=>{if(".value"===E)h=!0;else if(".priority"!==E&&".sv"!==E&&(g=!0,!UT(E)))throw new Error(i+" contains an invalid key ("+E+") "+oh(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function I1(i,t){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(t),i.byteLength_+=(0,Et.ug)(t),Hb(i)})(r,E),vE(i,S,r),function $b(i){const t=i.parts_.pop();i.byteLength_-=(0,Et.ug)(t),i.parts_.length>0&&(i.byteLength_-=1)}(r)}),h&&g)throw new Error(i+' contains ".value" child '+oh(r)+" in addition to actual children.")}},kI=function(i,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!UT(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),function(i){return"string"==typeof i&&0!==i.length&&!IS.test(i)}(i)}(e))throw new Error((0,Et.gK)(i,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class MS{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Uc(i,t,e){(function jT(i,t){let e=null;for(let r=0;r<t.length;r++){const h=t[r],g=h.getPath();null!==e&&!jb(g,e.path)&&(i.eventLists_.push(e),e=null),null===e&&(e={events:[],path:g}),e.events.push(h)}e&&i.eventLists_.push(e)})(i,e),function FI(i,t){i.recursionDepth_++;let e=!0;for(let r=0;r<i.eventLists_.length;r++){const h=i.eventLists_[r];h&&(t(h.path)?(xS(i.eventLists_[r]),i.eventLists_[r]=null):e=!1)}e&&(i.eventLists_=[]),i.recursionDepth_--}(i,r=>ll(r,t)||ll(t,r))}function xS(i){for(let t=0;t<i.events.length;t++){const e=i.events[t];if(null!==e){i.events[t]=null;const r=e.getEventRunner();uf&&$o("event: "+e.toString()),Lp(r)}}}class RS{constructor(t,e,r,h){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=r,this.appCheckProvider_=h,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new MS,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=_f(),this.transactionQueueTree_=new sD,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function BI(i){const e=i.infoData_.getNode(new Ur(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function EE(i){return function(i){return(i=i||{}).timestamp=i.timestamp||(new Date).getTime(),i}({timestamp:BI(i)})}function VI(i,t,e,r,h){i.dataUpdateCount++;const g=new Ur(t);e=i.interceptServerDataCallback_?i.interceptServerDataCallback_(t,e):e;let E=[];if(h)if(r){const R=(0,Et.UI)(e,G=>Ys(G));E=function fS(i,t,e,r){const h=J1(i,r);if(h){const g=X1(h),E=g.path,S=g.queryId,R=za(E,t),G=x.fromObject(e);return eD(i,E,new qm(sE(S),R,G))}return[]}(i.serverSyncTree_,g,R,h)}else{const R=Ys(e);E=function wI(i,t,e,r){const h=J1(i,r);if(null!=h){const g=X1(h),E=g.path,S=g.queryId,R=za(E,t);return eD(i,E,new Gp(sE(S),R,e))}return[]}(i.serverSyncTree_,g,R,h)}else if(r){const R=(0,Et.UI)(e,G=>Ys(G));E=function uS(i,t,e){const r=x.fromObject(e);return wv(i,new qm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(i.serverSyncTree_,g,R)}else{const R=Ys(e);E=pE(i.serverSyncTree_,g,R)}let S=g;E.length>0&&(S=Iv(i,g)),Uc(i.eventQueue_,S,E)}function UI(i,t){dD(i,"connected",t),!1===t&&function BS(i){Dv(i,"onDisconnectEvents");const t=EE(i),e=_f();nE(i.onDisconnect_,jr(),(h,g)=>{const E=function(i,t,e,r){return rD(t,new nD(e,i),r)}(h,g,i.serverSyncTree_,t);Hp(e,h,E)});let r=[];nE(e,jr(),(h,g)=>{r=r.concat(pE(i.serverSyncTree_,h,g));const E=function gD(i,t){const e=_E(HI(i,t)),r=BT(i.transactionQueueTree_,t);return function TS(i,t,e){let r=e?i:i.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,h=>{mD(i,h)}),mD(i,r),xI(r,h=>{mD(i,h)}),e}(i,h);Iv(i,E)}),i.onDisconnect_=_f(),Uc(i.eventQueue_,jr(),r)}(i)}function dD(i,t,e){const r=new Ur("/.info/"+t),h=Ys(e);i.infoData_.updateSnapshot(r,h);const g=pE(i.infoSyncTree_,r,h);Uc(i.eventQueue_,r,g)}function $T(i){return i.nextWriteId_++}function Dv(i,...t){let e="";i.persistentConnection_&&(e=i.persistentConnection_.id+":"),$o(e,...t)}function pD(i,t,e){return FT(i.serverSyncTree_,t,e)||Xi.EMPTY_NODE}function HT(i,t=i.transactionQueueTree_){if(t||GT(i,t),zm(t)){const e=GI(i,t);(0,Et.hu)(e.length>0,"Sending zero length transaction queue"),e.every(h=>0===h.status)&&function ZS(i,t,e){const r=e.map(G=>G.currentWriteId),h=pD(i,t,r);let g=h;const E=h.hash();for(let G=0;G<e.length;G++){const re=e[G];(0,Et.hu)(0===re.status,"tryToSendTransactionQueue_: items in queue should all be run."),re.status=1,re.retryCount++;const be=za(t,re.path);g=g.updateChild(be,re.currentOutputSnapshotRaw)}const S=g.val(!0),R=t;i.server_.put(R.toString(),S,G=>{Dv(i,"transaction put response",{path:R.toString(),status:G});let re=[];if("ok"===G){const be=[];for(let Ae=0;Ae<e.length;Ae++)e[Ae].status=2,re=re.concat(qp(i.serverSyncTree_,e[Ae].currentWriteId)),e[Ae].onComplete&&be.push(()=>e[Ae].onComplete(null,!0,e[Ae].currentOutputSnapshotResolved)),e[Ae].unwatcher();GT(i,BT(i.transactionQueueTree_,t)),HT(i,i.transactionQueueTree_),Uc(i.eventQueue_,t,re);for(let Ae=0;Ae<be.length;Ae++)Lp(be[Ae])}else{if("datastale"===G)for(let be=0;be<e.length;be++)e[be].status=3===e[be].status?4:0;else{Da("transaction at "+R.toString()+" failed: "+G);for(let be=0;be<e.length;be++)e[be].status=4,e[be].abortReason=G}Iv(i,t)}},E)}(i,_E(t),e)}else MI(t)&&VT(t,e=>{HT(i,e)})}function Iv(i,t){const e=HI(i,t),r=_E(e);return function WS(i,t,e){if(0===t.length)return;const r=[];let h=[];const E=t.filter(S=>0===S.status).map(S=>S.currentWriteId);for(let S=0;S<t.length;S++){const R=t[S],G=za(e,R.path);let be,re=!1;if((0,Et.hu)(null!==G,"rerunTransactionsUnderNode_: relativePath should not be null."),4===R.status)re=!0,be=R.abortReason,h=h.concat(qp(i.serverSyncTree_,R.currentWriteId,!0));else if(0===R.status)if(R.retryCount>=25)re=!0,be="maxretry",h=h.concat(qp(i.serverSyncTree_,R.currentWriteId,!0));else{const Ae=pD(i,R.path,E);R.currentInputSnapshot=Ae;const st=t[S].update(Ae.val());if(void 0!==st){vE("transaction failed: Data returned ",st,R.path);let Tt=Ys(st);"object"==typeof st&&null!=st&&(0,Et.r3)(st,".priority")||(Tt=Tt.updatePriority(Ae.getPriority()));const un=R.currentWriteId,ni=EE(i),li=iD(Tt,Ae,ni);R.currentOutputSnapshotRaw=Tt,R.currentOutputSnapshotResolved=li,R.currentWriteId=$T(i),E.splice(E.indexOf(un),1),h=h.concat(Y1(i.serverSyncTree_,R.path,li,R.currentWriteId,R.applyLocally)),h=h.concat(qp(i.serverSyncTree_,un,!0))}else re=!0,be="nodata",h=h.concat(qp(i.serverSyncTree_,R.currentWriteId,!0))}Uc(i.eventQueue_,e,h),h=[],re&&(t[S].status=2,setTimeout(t[S].unwatcher,Math.floor(0)),t[S].onComplete&&r.push("nodata"===be?()=>t[S].onComplete(null,!1,t[S].currentInputSnapshot):()=>t[S].onComplete(new Error(be),!1,null)))}GT(i,i.transactionQueueTree_);for(let S=0;S<r.length;S++)Lp(r[S]);HT(i,i.transactionQueueTree_)}(i,GI(i,e),r),r}function HI(i,t){let e,r=i.transactionQueueTree_;for(e=gr(t);null!==e&&void 0===zm(r);)r=BT(r,e),e=gr(t=ws(t));return r}function GI(i,t){const e=[];return ZI(i,t,e),e.sort((r,h)=>r.order-h.order),e}function ZI(i,t,e){const r=zm(t);if(r)for(let h=0;h<r.length;h++)e.push(r[h]);VT(t,h=>{ZI(i,h,e)})}function GT(i,t){const e=zm(t);if(e){let r=0;for(let h=0;h<e.length;h++)2!==e[h].status&&(e[r]=e[h],r++);e.length=r,oD(t,e.length>0?e:void 0)}VT(t,r=>{GT(i,r)})}function mD(i,t){const e=zm(t);if(e){const r=[];let h=[],g=-1;for(let E=0;E<e.length;E++)3===e[E].status||(1===e[E].status?((0,Et.hu)(g===E-1,"All SENT items should be at beginning of queue."),g=E,e[E].status=3,e[E].abortReason="set"):((0,Et.hu)(0===e[E].status,"Unexpected transaction status in abort"),e[E].unwatcher(),h=h.concat(qp(i.serverSyncTree_,e[E].currentWriteId,!0)),e[E].onComplete&&r.push(e[E].onComplete.bind(null,new Error("set"),!1,null))));-1===g?oD(t,void 0):e.length=g+1,Uc(i.eventQueue_,_E(t),h);for(let E=0;E<r.length;E++)Lp(r[E])}}const _D=function(i,t){const e=KS(i),r=e.namespace;return"firebase.com"===e.domain&&Iu(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==e.domain&&Iu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Da("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Yy(e.host,e.secure,r,"ws"===e.scheme||"wss"===e.scheme,t,"",r!==e.subdomain),path:new Ur(e.pathString)}},KS=function(i){let t="",e="",r="",h="",g="",E=!0,S="https",R=443;if("string"==typeof i){let G=i.indexOf("//");G>=0&&(S=i.substring(0,G-1),i=i.substring(G+2));let re=i.indexOf("/");-1===re&&(re=i.length);let be=i.indexOf("?");-1===be&&(be=i.length),t=i.substring(0,Math.min(re,be)),re<be&&(h=function qS(i){let t="";const e=i.split("/");for(let r=0;r<e.length;r++)if(e[r].length>0){let h=e[r];try{h=decodeURIComponent(h.replace(/\+/g," "))}catch(g){}t+="/"+h}return t}(i.substring(re,be)));const Ae=function zS(i){const t={};"?"===i.charAt(0)&&(i=i.substring(1));for(const e of i.split("&")){if(0===e.length)continue;const r=e.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Da(`Invalid query segment '${e}' in query '${i}'`)}return t}(i.substring(Math.min(i.length,be)));G=t.indexOf(":"),G>=0?(E="https"===S||"wss"===S,R=parseInt(t.substring(G+1),10)):G=t.length;const st=t.slice(0,G);if("localhost"===st.toLowerCase())e="localhost";else if(st.split(".").length<=2)e=st;else{const Tt=t.indexOf(".");r=t.substring(0,Tt).toLowerCase(),e=t.substring(Tt+1),g=r}"ns"in Ae&&(g=Ae.ns)}return{host:t,port:R,domain:e,subdomain:r,secure:E,scheme:S,pathString:h,namespace:g}};class jc{constructor(t,e,r,h){this._repo=t,this._path=e,this._queryParams=r,this._orderByCalled=h}get key(){return sr(this._path)?null:Vb(this._path)}get ref(){return new fd(this._repo,this._path)}get _queryIdentifier(){const t=Wm(this._queryParams),e=Db(t);return"{}"===e?"default":e}get _queryObject(){return Wm(this._queryParams)}isEqual(t){if(!((t=(0,Et.m9)(t))instanceof jc))return!1;const e=this._repo===t._repo,r=jb(this._path,t._path);return e&&r&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Ub(i){let t="";for(let e=i.pieceNum_;e<i.pieces_.length;e++)""!==i.pieces_[e]&&(t+="/"+encodeURIComponent(String(i.pieces_[e])));return t||"/"}(this._path)}}class fd extends jc{constructor(t,e){super(t,e,new Jb,!1)}get parent(){const t=w1(this._path);return null===t?null:new fd(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}(function tS(i){(0,Et.hu)(!OT,"__referenceConstructor has already been defined"),OT=i})(fd),function oS(i){(0,Et.hu)(!kT,"__referenceConstructor has already been defined"),kT=i}(fd);const vD={};class pN{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function kS(i,t,e){if(i.stats_=ev(i.repoInfo_),i.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)i.server_=new eE(i.repoInfo_,(r,h,g,E)=>{VI(i,r,h,g,E)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>UI(i,!0),0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Et.Wl)(e)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}i.persistentConnection_=new $p(i.repoInfo_,t,(r,h,g,E)=>{VI(i,r,h,g,E)},r=>{UI(i,r)},r=>{!function PS(i,t){Ho(t,(e,r)=>{dD(i,e,r)})}(i,r)},i.authTokenProvider_,i.appCheckProvider_,e),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(r=>{i.server_.refreshAuthToken(r)}),i.appCheckProvider_.addTokenChangeListener(r=>{i.server_.refreshAppCheckToken(r.token)}),i.statsReporter_=function tv(i,t){const e=i.toString();return Nb[e]||(Nb[e]=t()),Nb[e]}(i.repoInfo_,()=>new $1(i.stats_,i.server_)),i.infoData_=new AT,i.infoSyncTree_=new TI({startListening:(r,h,g,E)=>{let S=[];const R=i.infoData_.getNode(r._path);return R.isEmpty()||(S=pE(i.infoSyncTree_,r._path,R),setTimeout(()=>{E("ok")},0)),S},stopListening:()=>{}}),dD(i,"connected",!1),i.serverSyncTree_=new TI({startListening:(r,h,g,E)=>(i.server_.listen(r,g,h,(S,R)=>{const G=E(S,R);Uc(i.eventQueue_,r._path,G)}),[]),stopListening:(r,h)=>{i.server_.unlisten(r,h)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new fd(this._repo,jr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function dN(i,t){const e=vD[t];(!e||e[i.key]!==i)&&Iu(`Database ${t}(${i.repoInfo_}) has already been deleted.`),function $I(i){i.persistentConnection_&&i.persistentConnection_.interrupt("repo_interrupt")}(i),delete e[i.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Iu("Cannot call "+t+" on a deleted database.")}}function gN(i=(0,Rp.getApp)(),t){const e=(0,Rp._getProvider)(i,"database").getImmediate({identifier:t}),r=(0,Et.P0)("database");return r&&function mN(i,t,e,r={}){(i=(0,Et.m9)(i))._checkNotDeleted("useEmulator"),i._instanceStarted&&Iu("Cannot call useEmulator() after instance has already been initialized.");const h=i._repoInternal;let g;if(h.repoInfo_.nodeAdmin)r.mockUserToken&&Iu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),g=new Lm(Lm.OWNER);else if(r.mockUserToken){const E="string"==typeof r.mockUserToken?r.mockUserToken:(0,Et.Sg)(r.mockUserToken,i.app.options.projectId);g=new Lm(E)}!function cN(i,t,e,r){i.repoInfo_=new Yy(`${t}:${e}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams),r&&(i.authTokenProvider_=r)}(h,t,e,g)}(e,...r),e}$p.prototype.simpleListen=function(i,t){this.sendRequest("q",{p:i},t)},$p.prototype.echo=function(i,t){this.sendRequest("echo",{d:i},t)},function _N(i){(function Eb(i){bb=i})(Rp.SDK_VERSION),(0,Rp._registerComponent)(new $y.wA("database",(t,{instanceIdentifier:e})=>function uN(i,t,e,r,h){let g=r||i.options.databaseURL;void 0===g&&(i.options.projectId||Iu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),$o("Using default host for project ",i.options.projectId),g=`${i.options.projectId}-default-rtdb.firebaseio.com`);let R,G,E=_D(g,h),S=E.repoInfo;"undefined"!=typeof process&&process.env&&(G=process.env.FIREBASE_DATABASE_EMULATOR_HOST),G?(R=!0,g=`http://${G}?ns=${S.namespace}`,E=_D(g,h),S=E.repoInfo):R=!E.repoInfo.secure;const re=h&&R?new Lm(Lm.OWNER):new Vp(i.name,i.options,t);kI("Invalid Firebase Database URL",E),sr(E.path)||Iu("Database URL must point to the root of a Firebase Database (not including a child path).");const be=function hN(i,t,e,r){let h=vD[t.name];h||(h={},vD[t.name]=h);let g=h[i.toURLString()];return g&&Iu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),g=new RS(i,!1,e,r),h[i.toURLString()]=g,g}(S,i,re,new qa(i.name,e));return new pN(be,i)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Rp.registerVersion)(GC,"0.13.9",i),(0,Rp.registerVersion)(GC,"0.13.9","esm2017")}();class bD{constructor(t){return t}}const XI="database",ED=new c.OlP("angularfire2.database-instances");function CN(i){return(t,e)=>{const r=t.runOutsideAngular(()=>i(e));return new bD(r)}}const TN={provide:class bN{constructor(){return(0,xs.vb)(XI)}},deps:[[new c.FiY,ED]]},wN={provide:bD,useFactory:function EN(i,t){const e=(0,xs.JM)(XI,i,t);return e&&new bD(e)},deps:[[new c.FiY,ED],Rm.Ot]};let DN=(()=>{class i{constructor(){(0,$C.KN)("angularfire",xs.q4.full,"rtdb")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({providers:[wN,TN]}),i})();function IN(i,...t){return{ngModule:DN,providers:[{provide:ED,useFactory:CN(i),multi:!0,deps:[c.R0b,c.zs3,xs.HU,Rm.z6,[new c.FiY,Uy.dh],[new c.FiY,jy.nm],...t]}]}}const AN=(0,xs.u3)(gN,!0);var eA=V(3562),bf=V(2011),Yp=V(8996);function CD(){return(0,Ei.e)((i,t)=>{let e,r=!1;i.subscribe(new qt.Q(t,h=>{const g=e;e=h,r&&t.next([g,h]),r=!0}))})}var TD=V(5026),tA=(V(5881),V(3942)),pn=V(5525);function wD(i,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new pn.WA("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return t}function nA(){if("undefined"==typeof Uint8Array)throw new pn.WA("unimplemented","Uint8Arrays are not available in this environment.")}function iA(){if(!(0,pn.Me)())throw new pn.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class wE{constructor(t){this._delegate=t}static fromBase64String(t){return iA(),new wE(pn.Jj.fromBase64String(t))}static fromUint8Array(t){return nA(),new wE(pn.Jj.fromUint8Array(t))}toBase64(){return iA(),this._delegate.toBase64()}toUint8Array(){return nA(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function DD(i){return function MN(i,t){if("object"!=typeof i||null===i)return!1;const e=i;for(const r of t)if(r in e&&"function"==typeof e[r])return!0;return!1}(i,["next","error","complete"])}class xN{enableIndexedDbPersistence(t,e){return(0,pn.ST)(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return(0,pn.fH)(t._delegate)}clearIndexedDbPersistence(t){return(0,pn.Fc)(t._delegate)}}class rA{constructor(t,e,r){this._delegate=e,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},t instanceof pn.l7||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&(0,pn.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,r={}){(0,pn.at)(this._delegate,t,e,r)}enableNetwork(){return(0,pn.Ix)(this._delegate)}disableNetwork(){return(0,pn.TF)(this._delegate)}enablePersistence(t){let e=!1,r=!1;return t&&(e=!!t.synchronizeTabs,r=!!t.experimentalForceOwningTab,(0,pn.Wi)("synchronizeTabs",e,"experimentalForceOwningTab",r)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,pn.Mx)(this._delegate)}onSnapshotsInSync(t){return(0,pn.sc)(this._delegate,t)}get app(){if(!this._appCompat)throw new pn.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Sv(this,(0,pn.hJ)(this._delegate,t))}catch(e){throw kl(e,"collection()","Firestore.collection()")}}doc(t){try{return new Nu(this,(0,pn.JU)(this._delegate,t))}catch(e){throw kl(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Pl(this,(0,pn.B$)(this._delegate,t))}catch(e){throw kl(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return(0,pn.i3)(this._delegate,e=>t(new sA(this,e)))}batch(){return(0,pn.qY)(this._delegate),new oA(new pn.PU(this._delegate,t=>(0,pn.GL)(this._delegate,t)))}loadBundle(t){return(0,pn.Pb)(this._delegate,t)}namedQuery(t){return(0,pn.L$)(this._delegate,t).then(e=>e?new Pl(this,e):null)}}class zT extends pn.u7{constructor(t){super(),this.firestore=t}convertBytes(t){return new wE(new pn.Jj(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Nu.forKey(e,this.firestore,null)}}class sA{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new zT(t)}get(t){const e=Qm(t);return this._delegate.get(e).then(r=>new DE(this._firestore,new pn.xU(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,e.converter)))}set(t,e,r){const h=Qm(t);return r?(wD("Transaction.set",r),this._delegate.set(h,e,r)):this._delegate.set(h,e),this}update(t,e,r,...h){const g=Qm(t);return 2===arguments.length?this._delegate.update(g,e):this._delegate.update(g,e,r,...h),this}delete(t){const e=Qm(t);return this._delegate.delete(e),this}}class oA{constructor(t){this._delegate=t}set(t,e,r){const h=Qm(t);return r?(wD("WriteBatch.set",r),this._delegate.set(h,e,r)):this._delegate.set(h,e),this}update(t,e,r,...h){const g=Qm(t);return 2===arguments.length?this._delegate.update(g,e):this._delegate.update(g,e,r,...h),this}delete(t){const e=Qm(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Ym{constructor(t,e,r){this._firestore=t,this._userDataWriter=e,this._delegate=r}fromFirestore(t,e){const r=new pn.$q(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new IE(this._firestore,r),null!=e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const r=Ym.INSTANCES;let h=r.get(t);h||(h=new WeakMap,r.set(t,h));let g=h.get(e);return g||(g=new Ym(t,new zT(t),e),h.set(e,g)),g}}Ym.INSTANCES=new WeakMap;class Nu{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new zT(t)}static forPath(t,e,r){if(t.length%2!=0)throw new pn.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Nu(e,new pn.my(e._delegate,r,new pn.Ky(t)))}static forKey(t,e,r){return new Nu(e,new pn.my(e._delegate,r,t))}get id(){return this._delegate.id}get parent(){return new Sv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Sv(this.firestore,(0,pn.hJ)(this._delegate,t))}catch(e){throw kl(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,Et.m9)(t))instanceof pn.my&&(0,pn.Eo)(this._delegate,t)}set(t,e){e=wD("DocumentReference.set",e);try{return e?(0,pn.pl)(this._delegate,t,e):(0,pn.pl)(this._delegate,t)}catch(r){throw kl(r,"setDoc()","DocumentReference.set()")}}update(t,e,...r){try{return 1===arguments.length?(0,pn.r7)(this._delegate,t):(0,pn.r7)(this._delegate,t,e,...r)}catch(h){throw kl(h,"updateDoc()","DocumentReference.update()")}}delete(){return(0,pn.oe)(this._delegate)}onSnapshot(...t){const e=aA(t),r=lA(t,h=>new DE(this.firestore,new pn.xU(this.firestore._delegate,this._userDataWriter,h._key,h._document,h.metadata,this._delegate.converter)));return(0,pn.cf)(this._delegate,e,r)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?(0,pn.kl)(this._delegate):"server"===(null==t?void 0:t.source)?(0,pn.Xk)(this._delegate):(0,pn.QT)(this._delegate),e.then(r=>new DE(this.firestore,new pn.xU(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(t){return new Nu(this.firestore,this._delegate.withConverter(t?Ym.getInstance(this.firestore,t):null))}}function kl(i,t,e){return i.message=i.message.replace(t,e),i}function aA(i){for(const t of i)if("object"==typeof t&&!DD(t))return t;return{}}function lA(i,t){var e,r;let h;return h=DD(i[0])?i[0]:DD(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:g=>{h.next&&h.next(t(g))},error:null===(e=h.error)||void 0===e?void 0:e.bind(h),complete:null===(r=h.complete)||void 0===r?void 0:r.bind(h)}}class DE{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Nu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return(0,pn.qK)(this._delegate,t._delegate)}}class IE extends DE{data(t){const e=this._delegate.data(t);return(0,pn.K9)(void 0!==e,"Document in a QueryDocumentSnapshot should exist"),e}}class Pl{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new zT(t)}where(t,e,r){try{return new Pl(this.firestore,(0,pn.IO)(this._delegate,(0,pn.ar)(t,e,r)))}catch(h){throw kl(h,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new Pl(this.firestore,(0,pn.IO)(this._delegate,(0,pn.Xo)(t,e)))}catch(r){throw kl(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new Pl(this.firestore,(0,pn.IO)(this._delegate,(0,pn.b9)(t)))}catch(e){throw kl(e,"limit()","Query.limit()")}}limitToLast(t){try{return new Pl(this.firestore,(0,pn.IO)(this._delegate,(0,pn.vh)(t)))}catch(e){throw kl(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new Pl(this.firestore,(0,pn.IO)(this._delegate,(0,pn.e0)(...t)))}catch(e){throw kl(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new Pl(this.firestore,(0,pn.IO)(this._delegate,(0,pn.TQ)(...t)))}catch(e){throw kl(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new Pl(this.firestore,(0,pn.IO)(this._delegate,(0,pn.Lx)(...t)))}catch(e){throw kl(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new Pl(this.firestore,(0,pn.IO)(this._delegate,(0,pn.Wu)(...t)))}catch(e){throw kl(e,"endAt()","Query.endAt()")}}isEqual(t){return(0,pn.iE)(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?(0,pn.UQ)(this._delegate):"server"===(null==t?void 0:t.source)?(0,pn.zN)(this._delegate):(0,pn.PL)(this._delegate),e.then(r=>new ID(this.firestore,new pn.W(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...t){const e=aA(t),r=lA(t,h=>new ID(this.firestore,new pn.W(this.firestore._delegate,this._userDataWriter,this._delegate,h._snapshot)));return(0,pn.cf)(this._delegate,e,r)}withConverter(t){return new Pl(this.firestore,this._delegate.withConverter(t?Ym.getInstance(this.firestore,t):null))}}class RN{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new IE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ID{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new Pl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new IE(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new RN(this._firestore,e))}forEach(t,e){this._delegate.forEach(r=>{t.call(e,new IE(this._firestore,r))})}isEqual(t){return(0,pn.qK)(this._delegate,t._delegate)}}class Sv extends Pl{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Nu(this.firestore,t):null}doc(t){try{return new Nu(this.firestore,void 0===t?(0,pn.JU)(this._delegate):(0,pn.JU)(this._delegate,t))}catch(e){throw kl(e,"doc()","CollectionReference.doc()")}}add(t){return(0,pn.ET)(this._delegate,t).then(e=>new Nu(this.firestore,e))}isEqual(t){return(0,pn.Eo)(this._delegate,t._delegate)}withConverter(t){return new Sv(this.firestore,this._delegate.withConverter(t?Ym.getInstance(this.firestore,t):null))}}function Qm(i){return(0,pn.Cf)(i,pn.my)}class AD{constructor(...t){this._delegate=new pn.Lz(...t)}static documentId(){return new AD(pn.Xb.keyField().canonicalString())}isEqual(t){return(t=(0,Et.m9)(t))instanceof pn.Lz&&this._delegate._internalPath.isEqual(t._internalPath)}}class Jm{constructor(t){this._delegate=t}static serverTimestamp(){const t=(0,pn.Bt)();return t._methodName="FieldValue.serverTimestamp",new Jm(t)}static delete(){const t=(0,pn.AK)();return t._methodName="FieldValue.delete",new Jm(t)}static arrayUnion(...t){const e=(0,pn.vr)(...t);return e._methodName="FieldValue.arrayUnion",new Jm(e)}static arrayRemove(...t){const e=(0,pn.Ab)(...t);return e._methodName="FieldValue.arrayRemove",new Jm(e)}static increment(t){const e=(0,pn.nP)(t);return e._methodName="FieldValue.increment",new Jm(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const kN={Firestore:rA,GeoPoint:pn.F8,Timestamp:pn.EK,Blob:wE,Transaction:sA,WriteBatch:oA,DocumentReference:Nu,DocumentSnapshot:DE,Query:Pl,QueryDocumentSnapshot:IE,QuerySnapshot:ID,CollectionReference:Sv,FieldPath:AD,FieldValue:Jm,setLogLevel:function ON(i){(0,pn.Ub)(i)},CACHE_SIZE_UNLIMITED:pn.IX};!function FN(i){(function PN(i,t){i.INTERNAL.registerComponent(new $y.wA("firestore-compat",e=>{const r=e.getProvider("app-compat").getImmediate(),h=e.getProvider("firestore").getImmediate();return t(r,h)},"PUBLIC").setServiceProps(Object.assign({},kN)))})(i,(t,e)=>new rA(t,e,new xN)),i.registerVersion("@firebase/firestore-compat","0.2.1")}(tA.Z);var Qp=V(1205),cA=V(127);function uA(i,t){return function LN(i,t=wt.z){return new rt.y(e=>{let r;return null!=t?t.schedule(()=>{r=i.onSnapshot({includeMetadataChanges:!0},e)}):r=i.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=r&&r()}})}(i,t)}function SD(i,t){return uA(i,t).pipe((0,Jt.U)(e=>({payload:e,type:"query"})))}function KT(i,t){return SD(i,t).pipe((0,Yn.O)(void 0),CD(),(0,Jt.U)(([e,r])=>{const h=r.payload.docChanges(),g=h.map(E=>({type:E.type,payload:E}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((E,S)=>{const R=h.find(re=>re.doc.ref.isEqual(E.ref)),G=null==e?void 0:e.payload.docs.find(re=>re.ref.isEqual(E.ref));R&&JSON.stringify(R.doc.metadata)===JSON.stringify(E.metadata)||!R&&G&&JSON.stringify(G.metadata)===JSON.stringify(E.metadata)||g.push({type:"modified",payload:{oldIndex:S,newIndex:S,type:"modified",doc:E}})}),g}))}function dA(i,t,e){return KT(i,e).pipe((0,TD.R)((r,h)=>function VN(i,t,e){return t.forEach(r=>{e.indexOf(r.type)>-1&&(i=function UN(i,t){switch(t.type){case"added":if(!i[t.newIndex]||!i[t.newIndex].doc.ref.isEqual(t.doc.ref))return ND(i,t.newIndex,0,t);break;case"modified":if(null==i[t.oldIndex]||i[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=i.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return ND(i,t.newIndex,1,t)}break;case"removed":if(i[t.oldIndex]&&i[t.oldIndex].doc.ref.isEqual(t.doc.ref))return ND(i,t.oldIndex,1)}return i}(i,r))}),i}(r,h.map(g=>g.payload),t),[]),kn(),(0,Jt.U)(r=>r.map(h=>({type:h.type,payload:h}))))}function ND(i,t,e,...r){const h=i.slice();return h.splice(t,e,...r),h}function hA(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class fA{constructor(t,e,r){this.ref=t,this.query=e,this.afs=r}stateChanges(t){let e=KT(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,Jt.U)(r=>r.filter(h=>t.indexOf(h.type)>-1)))),e.pipe((0,Yn.O)(void 0),CD(),(0,Nt.h)(([r,h])=>h.length>0||!r),(0,Jt.U)(([r,h])=>h),xs.iC)}auditTrail(t){return this.stateChanges(t).pipe((0,TD.R)((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=hA(t);return dA(this.query,e,this.afs.schedulers.outsideAngular).pipe(xs.iC)}valueChanges(t={}){return SD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Jt.U)(e=>e.payload.docs.map(r=>t.idField?Object.assign(Object.assign({},r.data()),{[t.idField]:r.id}):r.data())),xs.iC)}get(t){return(0,Yp.D)(this.query.get(t)).pipe(xs.iC)}add(t){return this.ref.add(t)}doc(t){return new pA(this.ref.doc(t),this.afs)}}class pA{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const r=this.ref.collection(t),{ref:h,query:g}=_A(r,e);return new fA(h,g,this.afs)}snapshotChanges(){return function BN(i,t){return uA(i,t).pipe((0,Yn.O)(void 0),CD(),(0,Jt.U)(([e,r])=>r.exists?(null==e?void 0:e.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(xs.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Jt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Yp.D)(this.ref.get(t)).pipe(xs.iC)}}class jN{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?KT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Jt.U)(e=>e.filter(r=>t.indexOf(r.type)>-1)),(0,Nt.h)(e=>e.length>0),xs.iC):KT(this.query,this.afs.schedulers.outsideAngular).pipe(xs.iC)}auditTrail(t){return this.stateChanges(t).pipe((0,TD.R)((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=hA(t);return dA(this.query,e,this.afs.schedulers.outsideAngular).pipe(xs.iC)}valueChanges(t={}){return SD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Jt.U)(r=>r.payload.docs.map(h=>t.idField?Object.assign({[t.idField]:h.id},h.data()):h.data())),xs.iC)}get(t){return(0,Yp.D)(this.query.get(t)).pipe(xs.iC)}}const gA=new c.OlP("angularfire2.enableFirestorePersistence"),mA=new c.OlP("angularfire2.firestore.persistenceSettings"),$N=new c.OlP("angularfire2.firestore.settings"),HN=new c.OlP("angularfire2.firestore.use-emulator");function _A(i,t=(e=>e)){return{query:t(i),ref:i}}let GN=(()=>{class i{constructor(e,r,h,g,E,S,R,G,re,be,Ae,st,Tt,Pt,un,ni,li){this.schedulers=R;const Pi=(0,bf.on)(e,S,r),yi=re;be&&(0,Qp.nw)(Pi,S,Ae,Tt,Pt,un,st,ni),[this.firestore,this.persistenceEnabled$]=(0,bf.cc)(`${Pi.name}.firestore`,"AngularFirestore",Pi.name,()=>{const Bi=S.runOutsideAngular(()=>Pi.firestore());if(g&&Bi.settings(g),yi&&Bi.useEmulator(...yi),h&&!(0,pe.PM)(E)){const Gi=()=>{try{return(0,Yp.D)(Bi.enablePersistence(G||void 0).then(()=>!0,()=>!1))}catch(er){return"undefined"!=typeof console&&console.warn(er),(0,ot.of)(!1)}};return[Bi,S.runOutsideAngular(Gi)]}return[Bi,(0,ot.of)(!1)]},[g,yi,h])}collection(e,r){let h;h="string"==typeof e?this.firestore.collection(e):e;const{ref:g,query:E}=_A(h,r),S=this.schedulers.ngZone.run(()=>g);return new fA(S,E,this)}collectionGroup(e,r){const h=r||(E=>E),g=this.firestore.collectionGroup(e);return new jN(h(g),this)}doc(e){let r;r="string"==typeof e?this.firestore.doc(e):e;const h=this.schedulers.ngZone.run(()=>r);return new pA(h,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(e){return new(e||i)(c.LFG(bf.Dh),c.LFG(bf.xv,8),c.LFG(gA,8),c.LFG($N,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(xs.HU),c.LFG(mA,8),c.LFG(HN,8),c.LFG(Qp.zQ,8),c.LFG(Qp.Qv,8),c.LFG(Qp.L6,8),c.LFG(Qp._Q,8),c.LFG(Qp.rT,8),c.LFG(Qp.lh,8),c.LFG(Qp.f7,8),c.LFG(jy.nm,8))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),ZN=(()=>{class i{constructor(){cA.Z.registerVersion("angularfire",xs.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:i,providers:[{provide:gA,useValue:!0},{provide:mA,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({providers:[GN]}),i})();var fo=V(6961);class YT{constructor(t,e,r){this._delegate=t,this.task=e,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class yA{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new YT(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(r=>{if(t)return t(new YT(r,this,this._ref))},e)}on(t,e,r,h){let g;return e&&(g="function"==typeof e?E=>e(new YT(E,this,this._ref)):{next:e.next?E=>e.next(new YT(E,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,g,r||void 0,h||void 0)}}class vA{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new Ef(t,this._service))}get items(){return this._delegate.items.map(t=>new Ef(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ef{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=(0,fo.g6)(this._delegate,t);return new Ef(e,this.storage)}get root(){return new Ef(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new Ef(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new yA((0,fo.B0)(this._delegate,t,e),this)}putString(t,e=fo.bm.RAW,r){this._throwIfRoot("putString");const h=(0,fo.qm)(e,t),g=Object.assign({},r);return null==g.contentType&&null!=h.contentType&&(g.contentType=h.contentType),new yA(new fo.IX(this._delegate,new fo.UJ(h.data,!0),g),this)}listAll(){return(0,fo.aF)(this._delegate).then(t=>new vA(t,this.storage))}list(t){return(0,fo.pb)(this._delegate,t||void 0).then(e=>new vA(e,this.storage))}getMetadata(){return(0,fo.sd)(this._delegate)}updateMetadata(t){return(0,fo.Ym)(this._delegate,t)}getDownloadURL(){return(0,fo.Jt)(this._delegate)}delete(){return this._throwIfRoot("delete"),(0,fo.oq)(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw(0,fo.y4)(t)}}class bA{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(EA(t))throw(0,fo.gH)("ref() expected a child path but got a URL, use refFromURL instead.");return new Ef((0,fo.iH)(this._delegate,t),this)}refFromURL(t){if(!EA(t))throw(0,fo.gH)("refFromURL() expected a full URL but got a child path, use ref() instead.");try{fo.gE.makeFromUrl(t,this._delegate.host)}catch(e){throw(0,fo.gH)("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ef((0,fo.iH)(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,r={}){(0,fo.a1)(this._delegate,t,e,r)}}function EA(i){return/^[A-Za-z]+:\/\//.test(i)}function YN(i,{instanceIdentifier:t}){const e=i.getProvider("app-compat").getImmediate(),r=i.getProvider("storage").getImmediate({identifier:t});return new bA(e,r)}function CA(i){const t=function JN(i){return new rt.y(t=>{const e=E=>t.next(E);e(i.snapshot);const g=i.on("state_changed",e);return i.then(E=>{e(E),t.complete()},E=>{e(i.snapshot),(E=>{t.error(E)})(E)}),function(){g()}}).pipe(function WN(i,t=wt.z){return(0,Ei.e)((e,r)=>{let h=null,g=null,E=null;const S=()=>{if(h){h.unsubscribe(),h=null;const G=g;g=null,r.next(G)}};function R(){const G=E+i,re=t.now();if(re<G)return h=this.schedule(void 0,G-re),void r.add(h);S()}e.subscribe(new qt.Q(r,G=>{g=G,E=t.now(),h||(h=t.schedule(R,i),r.add(h))},()=>{S(),r.complete()},void 0,()=>{g=h=null}))})}(0))}(i);return{task:i,then:i.then.bind(i),catch:i.catch.bind(i),pause:i.pause.bind(i),cancel:i.cancel.bind(i),resume:i.resume.bind(i),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,Jt.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function QT(i){return{getDownloadURL:()=>(0,ot.of)(void 0).pipe(xs.fc,(0,Vi.w)(()=>i.getDownloadURL()),xs.iC),getMetadata:()=>(0,ot.of)(void 0).pipe(xs.fc,(0,Vi.w)(()=>i.getMetadata()),xs.iC),delete:()=>(0,Yp.D)(i.delete()),child:t=>QT(i.child(t)),updateMetadata:t=>(0,Yp.D)(i.updateMetadata(t)),put:(t,e)=>CA(i.put(t,e)),putString:(t,e,r)=>CA(i.putString(t,e,r)),list:t=>(0,Yp.D)(i.list(t)),listAll:()=>(0,Yp.D)(i.listAll())}}!function QN(i){const t={TaskState:fo.$Y,TaskEvent:fo.FN,StringFormat:fo.bm,Storage:bA,Reference:Ef};i.INTERNAL.registerComponent(new $y.wA("storage-compat",YN,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),i.registerVersion("@firebase/storage-compat","0.1.20")}(tA.Z);const XN=new c.OlP("angularfire2.storageBucket"),eM=new c.OlP("angularfire2.storage.maxUploadRetryTime"),tM=new c.OlP("angularfire2.storage.maxOperationRetryTime"),nM=new c.OlP("angularfire2.storage.use-emulator");let iM=(()=>{class i{constructor(e,r,h,g,E,S,R,G,re,be){const Ae=(0,bf.on)(e,E,r);this.storage=(0,bf.cc)(`${Ae.name}.storage.${h}`,"AngularFireStorage",Ae.name,()=>{const st=E.runOutsideAngular(()=>Ae.storage(h||void 0)),Tt=re;return Tt&&st.useEmulator(...Tt),R&&st.setMaxUploadRetryTime(R),G&&st.setMaxOperationRetryTime(G),st},[R,G])}ref(e){return QT(this.storage.ref(e))}refFromURL(e){return QT(this.storage.refFromURL(e))}upload(e,r,h){return QT(this.storage.ref(e)).put(r,h)}}return i.\u0275fac=function(e){return new(e||i)(c.LFG(bf.Dh),c.LFG(bf.xv,8),c.LFG(XN,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(xs.HU),c.LFG(eM,8),c.LFG(tM,8),c.LFG(nM,8),c.LFG(jy.nm,8))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),rM=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({}),i})(),sM=(()=>{class i{constructor(){cA.Z.registerVersion("angularfire",xs.q4.full,"gcs-compat")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({providers:[iM],imports:[rM]}),i})(),oM=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i,bootstrap:[Om]}),i.\u0275inj=c.cJS({providers:[],imports:[[_.b2,u1,Ee.u5,Ee.UX,bf.hO.initializeApp(Vy_firebase),ZN.enablePersistence(),sM,(0,Rm.hX)(()=>(0,Rm.ZF)(Vy_firebase)),(0,Uy.AR)(()=>(0,Uy.v0)()),IN(()=>AN()),(0,eA.Cm)(()=>(0,eA.ad)()),Nw,Ge.Rh.forRoot(),Nc,db]]}),i})();(0,c.G48)(),_.q6().bootstrapModule(oM).catch(i=>console.error(i))},5867:(rn,Ye,V)=>{V.d(Ye,{Mq:()=>_.getApp,C6:()=>_.getApps,ZF:()=>_.initializeApp,KN:()=>_.registerVersion});var _=V(9681);(0,_.registerVersion)("firebase","9.12.1","app")},127:(rn,Ye,V)=>{V.d(Ye,{Z:()=>_.Z});var _=V(3942);_.Z.registerVersion("firebase","9.12.1","app-compat")},5881:(rn,Ye,V)=>{V.r(Ye);var _=V(5861),c=V(3942),J=V(1279),Ee=V(2090),Ge=(V(9681),V(1877),V(4859));function pe(){return window}function ge(){return(ge=(0,_.Z)(function*(Ce,de,X){var ue;const{BuildInfo:ce}=pe();(0,J.aq)(de.sessionId,"AuthEvent did not contain a session ID");const Me=yield ze(de.sessionId),et={};return(0,J.ar)()?et.ibi=ce.packageName:(0,J.as)()?et.apn=ce.packageName:(0,J.at)(Ce,"operation-not-supported-in-this-environment"),ce.displayName&&(et.appDisplayName=ce.displayName),et.sessionId=Me,(0,J.au)(Ce,X,de.type,void 0,null!==(ue=de.eventId)&&void 0!==ue?ue:void 0,et)})).apply(this,arguments)}function _t(){return(_t=(0,_.Z)(function*(Ce){const{BuildInfo:de}=pe(),X={};(0,J.ar)()?X.iosBundleId=de.packageName:(0,J.as)()?X.androidPackageName=de.packageName:(0,J.at)(Ce,"operation-not-supported-in-this-environment"),yield(0,J.av)(Ce,X)})).apply(this,arguments)}function ot(){return(ot=(0,_.Z)(function*(Ce,de,X){const{cordova:ue}=pe();let ce=()=>{};try{yield new Promise((Me,et)=>{let Zt=null;function Yt(){var Mt;Me();const Vt=null===(Mt=ue.plugins.browsertab)||void 0===Mt?void 0:Mt.close;"function"==typeof Vt&&Vt(),"function"==typeof(null==X?void 0:X.close)&&X.close()}function Jn(){Zt||(Zt=window.setTimeout(()=>{et((0,J.aw)(Ce,"redirect-cancelled-by-user"))},2e3))}function Xn(){"visible"===(null==document?void 0:document.visibilityState)&&Jn()}de.addPassiveListener(Yt),document.addEventListener("resume",Jn,!1),(0,J.as)()&&document.addEventListener("visibilitychange",Xn,!1),ce=()=>{de.removePassiveListener(Yt),document.removeEventListener("resume",Jn,!1),document.removeEventListener("visibilitychange",Xn,!1),Zt&&window.clearTimeout(Zt)}})}finally{ce()}})).apply(this,arguments)}function ze(Ce){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,_.Z)(function*(Ce){const de=vt(Ce),X=yield crypto.subtle.digest("SHA-256",de);return Array.from(new Uint8Array(X)).map(ce=>ce.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function vt(Ce){if((0,J.aq)(/[0-9a-zA-Z]+/.test(Ce),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(Ce);const de=new ArrayBuffer(Ce.length),X=new Uint8Array(de);for(let ue=0;ue<Ce.length;ue++)X[ue]=Ce.charCodeAt(ue);return X}class je extends J.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(de=>{this.resolveInialized=de})}addPassiveListener(de){this.passiveListeners.add(de)}removePassiveListener(de){this.passiveListeners.delete(de)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(de){return this.resolveInialized(),this.passiveListeners.forEach(X=>X(de)),super.onEvent(de)}initialized(){var de=this;return(0,_.Z)(function*(){yield de.initPromise})()}}function At(Ce){return it.apply(this,arguments)}function it(){return(it=(0,_.Z)(function*(Ce){const de=yield Qe()._get(dt(Ce));return de&&(yield Qe()._remove(dt(Ce))),de})).apply(this,arguments)}function We(){const Ce=[],de="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let X=0;X<20;X++){const ue=Math.floor(Math.random()*de.length);Ce.push(de.charAt(ue))}return Ce.join("")}function Qe(){return(0,J.ay)(J.b)}function dt(Ce){return(0,J.az)("authEvent",Ce.config.apiKey,Ce.name)}function In(Ce){if(!(null==Ce?void 0:Ce.includes("?")))return{};const[de,...X]=Ce.split("?");return(0,Ee.zd)(X.join("?"))}function qt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,J.aw)("no-auth-event")}}function Le(){var Ce;return(null===(Ce=null==self?void 0:self.location)||void 0===Ce?void 0:Ce.protocol)||null}function Kt(Ce=(0,Ee.z$)()){return!("file:"!==Le()&&"ionic:"!==Le()&&"capacitor:"!==Le()||!Ce.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ei(){try{const Ce=self.localStorage,de=J.aI();if(Ce)return Ce.setItem(de,"1"),Ce.removeItem(de),!function Ki(Ce=(0,Ee.z$)()){return function Kn(){return(0,Ee.w1)()&&11===(null==document?void 0:document.documentMode)}()||function ii(Ce=(0,Ee.z$)()){return/Edge\/\d+/.test(Ce)}(Ce)}()||(0,Ee.hl)()}catch(Ce){return $n()&&(0,Ee.hl)()}return!1}function $n(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Nt(){return(function ht(){return"http:"===Le()||"https:"===Le()}()||(0,Ee.ru)()||Kt())&&!function Mn(){return(0,Ee.b$)()||(0,Ee.UG)()}()&&Ei()&&!$n()}function hi(){return Kt()&&"undefined"!=typeof document}function Yn(){return(Yn=(0,_.Z)(function*(){return!!hi()&&new Promise(Ce=>{const de=setTimeout(()=>{Ce(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(de),Ce(!0)})})})).apply(this,arguments)}const kn={LOCAL:"local",NONE:"none",SESSION:"session"},Ti=J.ax,Vi="persistence";function Ai(Ce){return lr.apply(this,arguments)}function lr(){return(lr=(0,_.Z)(function*(Ce){yield Ce._initializationPromise;const de=Pn(),X=J.az(Vi,Ce.config.apiKey,Ce.name);de&&de.setItem(X,Ce._getPersistence())})).apply(this,arguments)}function Pn(){var Ce;try{return(null===(Ce=function Ht(){return"undefined"!=typeof window?window:null}())||void 0===Ce?void 0:Ce.sessionStorage)||null}catch(de){return null}}const Tn=J.ax;class gn{constructor(){this.browserResolver=J.ay(J.k),this.cordovaResolver=J.ay(class wn{constructor(){this._redirectPersistence=J.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=J.aB,this._overrideRedirectResult=J.aC}_initialize(de){var X=this;return(0,_.Z)(function*(){const ue=de._key();let ce=X.eventManagers.get(ue);return ce||(ce=new je(de),X.eventManagers.set(ue,ce),X.attachCallbackListeners(de,ce)),ce})()}_openPopup(de){(0,J.at)(de,"operation-not-supported-in-this-environment")}_openRedirect(de,X,ue,ce){var Me=this;return(0,_.Z)(function*(){!function qe(Ce){var de,X,ue,ce,Me,et,Zt,Yt,Jn,Xn;const Mt=pe();(0,J.ax)("function"==typeof(null===(de=null==Mt?void 0:Mt.universalLinks)||void 0===de?void 0:de.subscribe),Ce,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,J.ax)(void 0!==(null===(X=null==Mt?void 0:Mt.BuildInfo)||void 0===X?void 0:X.packageName),Ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,J.ax)("function"==typeof(null===(Me=null===(ce=null===(ue=null==Mt?void 0:Mt.cordova)||void 0===ue?void 0:ue.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===Me?void 0:Me.openUrl),Ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,J.ax)("function"==typeof(null===(Yt=null===(Zt=null===(et=null==Mt?void 0:Mt.cordova)||void 0===et?void 0:et.plugins)||void 0===Zt?void 0:Zt.browsertab)||void 0===Yt?void 0:Yt.isAvailable),Ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,J.ax)("function"==typeof(null===(Xn=null===(Jn=null==Mt?void 0:Mt.cordova)||void 0===Jn?void 0:Jn.InAppBrowser)||void 0===Xn?void 0:Xn.open),Ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(de);const et=yield Me._initialize(de);yield et.initialized(),et.resetRedirect(),(0,J.aD)(),yield Me._originValidation(de);const Zt=function nt(Ce,de,X=null){return{type:de,eventId:X,urlResponse:null,sessionId:We(),postBody:null,tenantId:Ce.tenantId,error:(0,J.aw)(Ce,"no-auth-event")}}(de,ue,ce);yield function It(Ce,de){return Qe()._set(dt(Ce),de)}(de,Zt);const Yt=yield function fe(Ce,de,X){return ge.apply(this,arguments)}(de,Zt,X),Jn=yield function rt(Ce){const{cordova:de}=pe();return new Promise(X=>{de.plugins.browsertab.isAvailable(ue=>{let ce=null;ue?de.plugins.browsertab.openUrl(Ce):ce=de.InAppBrowser.open(Ce,(0,J.ap)()?"_blank":"_system","location=yes"),X(ce)})})}(Yt);return function mt(Ce,de,X){return ot.apply(this,arguments)}(de,et,Jn)})()}_isIframeWebStorageSupported(de,X){throw new Error("Method not implemented.")}_originValidation(de){const X=de._key();return this.originValidationPromises[X]||(this.originValidationPromises[X]=function Fe(Ce){return _t.apply(this,arguments)}(de)),this.originValidationPromises[X]}attachCallbackListeners(de,X){const{universalLinks:ue,handleOpenURL:ce,BuildInfo:Me}=pe(),et=setTimeout((0,_.Z)(function*(){yield At(de),X.onEvent(qt())}),500),Zt=function(){var Xn=(0,_.Z)(function*(Mt){clearTimeout(et);const Vt=yield At(de);let Hn=null;Vt&&(null==Mt?void 0:Mt.url)&&(Hn=function Ne(Ce,de){var X,ue;const ce=function at(Ce){const de=In(Ce),X=de.link?decodeURIComponent(de.link):void 0,ue=In(X).link,ce=de.deep_link_id?decodeURIComponent(de.deep_link_id):void 0;return In(ce).link||ce||ue||X||Ce}(de);if(ce.includes("/__/auth/callback")){const Me=In(ce),et=Me.firebaseError?function wt(Ce){try{return JSON.parse(Ce)}catch(de){return null}}(decodeURIComponent(Me.firebaseError)):null,Zt=null===(ue=null===(X=null==et?void 0:et.code)||void 0===X?void 0:X.split("auth/"))||void 0===ue?void 0:ue[1],Yt=Zt?(0,J.aw)(Zt):null;return Yt?{type:Ce.type,eventId:Ce.eventId,tenantId:Ce.tenantId,error:Yt,urlResponse:null,sessionId:null,postBody:null}:{type:Ce.type,eventId:Ce.eventId,tenantId:Ce.tenantId,sessionId:Ce.sessionId,urlResponse:ce,postBody:null}}return null}(Vt,Mt.url)),X.onEvent(Hn||qt())});return function(Vt){return Xn.apply(this,arguments)}}();void 0!==ue&&"function"==typeof ue.subscribe&&ue.subscribe(null,Zt);const Yt=ce,Jn=`${Me.packageName.toLowerCase()}://`;pe().handleOpenURL=function(){var Xn=(0,_.Z)(function*(Mt){if(Mt.toLowerCase().startsWith(Jn)&&Zt({url:Mt}),"function"==typeof Yt)try{Yt(Mt)}catch(Vt){console.error(Vt)}});return function(Mt){return Xn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=J.a,this._completeRedirectFn=J.aB,this._overrideRedirectResult=J.aC}_initialize(de){var X=this;return(0,_.Z)(function*(){return yield X.selectUnderlyingResolver(),X.assertedUnderlyingResolver._initialize(de)})()}_openPopup(de,X,ue,ce){var Me=this;return(0,_.Z)(function*(){return yield Me.selectUnderlyingResolver(),Me.assertedUnderlyingResolver._openPopup(de,X,ue,ce)})()}_openRedirect(de,X,ue,ce){var Me=this;return(0,_.Z)(function*(){return yield Me.selectUnderlyingResolver(),Me.assertedUnderlyingResolver._openRedirect(de,X,ue,ce)})()}_isIframeWebStorageSupported(de,X){this.assertedUnderlyingResolver._isIframeWebStorageSupported(de,X)}_originValidation(de){return this.assertedUnderlyingResolver._originValidation(de)}get _shouldInitProactively(){return hi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Tn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var de=this;return(0,_.Z)(function*(){if(de.underlyingResolver)return;const X=yield function Jt(){return Yn.apply(this,arguments)}();de.underlyingResolver=X?de.cordovaResolver:de.browserResolver})()}}function Sr(Ce){return Ce.unwrap()}function sn(Ce){return cr(Ce)}function cr(Ce){const{_tokenResponse:de}=Ce instanceof Ee.ZR?Ce.customData:Ce;if(!de)return null;if(!(Ce instanceof Ee.ZR)&&"temporaryProof"in de&&"phoneNumber"in de)return J.P.credentialFromResult(Ce);const X=de.providerId;if(!X||X===J.o.PASSWORD)return null;let ue;switch(X){case J.o.GOOGLE:ue=J.Q;break;case J.o.FACEBOOK:ue=J.N;break;case J.o.GITHUB:ue=J.T;break;case J.o.TWITTER:ue=J.W;break;default:const{oauthIdToken:ce,oauthAccessToken:Me,oauthTokenSecret:et,pendingToken:Zt,nonce:Yt}=de;return Me||et||ce||Zt?Zt?X.startsWith("saml.")?J.aL._create(X,Zt):J.J._fromParams({providerId:X,signInMethod:X,pendingToken:Zt,idToken:ce,accessToken:Me}):new J.U(X).credential({idToken:ce,accessToken:Me,rawNonce:Yt}):null}return Ce instanceof Ee.ZR?ue.credentialFromError(Ce):ue.credentialFromResult(Ce)}function ui(Ce,de){return de.catch(X=>{throw X instanceof Ee.ZR&&function fi(Ce,de){var X,ue;const ce=null===(X=de.customData)||void 0===X?void 0:X._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ue=de)||void 0===ue?void 0:ue.code))de.resolver=new Bn(Ce,J.an(Ce,de));else if(ce){const Me=cr(de),et=de;Me&&(et.credential=Me,et.tenantId=ce.tenantId||void 0,et.email=ce.email||void 0,et.phoneNumber=ce.phoneNumber||void 0)}}(Ce,X),X}).then(X=>{const ce=X.user;return{operationType:X.operationType,credential:sn(X),additionalUserInfo:J.al(X),user:Yi.getOrCreate(ce)}})}function yn(Ce,de){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,_.Z)(function*(Ce,de){const X=yield de;return{verificationId:X.verificationId,confirm:ue=>ui(Ce,X.confirm(ue))}})).apply(this,arguments)}class Bn{constructor(de,X){this.resolver=X,this.auth=function Fi(Ce){return Ce.wrapped()}(de)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(de){return ui(Sr(this.auth),this.resolver.resolveSignIn(de))}}class Yi{constructor(de){this._delegate=de,this.multiFactor=J.ao(de)}static getOrCreate(de){return Yi.USER_MAP.has(de)||Yi.USER_MAP.set(de,new Yi(de)),Yi.USER_MAP.get(de)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(de){return this._delegate.getIdTokenResult(de)}getIdToken(de){return this._delegate.getIdToken(de)}linkAndRetrieveDataWithCredential(de){return this.linkWithCredential(de)}linkWithCredential(de){var X=this;return(0,_.Z)(function*(){return ui(X.auth,J.Z(X._delegate,de))})()}linkWithPhoneNumber(de,X){var ue=this;return(0,_.Z)(function*(){return yn(ue.auth,J.l(ue._delegate,de,X))})()}linkWithPopup(de){var X=this;return(0,_.Z)(function*(){return ui(X.auth,J.d(X._delegate,de,gn))})()}linkWithRedirect(de){var X=this;return(0,_.Z)(function*(){return yield Ai(J.aE(X.auth)),J.g(X._delegate,de,gn)})()}reauthenticateAndRetrieveDataWithCredential(de){return this.reauthenticateWithCredential(de)}reauthenticateWithCredential(de){var X=this;return(0,_.Z)(function*(){return ui(X.auth,J._(X._delegate,de))})()}reauthenticateWithPhoneNumber(de,X){return yn(this.auth,J.r(this._delegate,de,X))}reauthenticateWithPopup(de){return ui(this.auth,J.e(this._delegate,de,gn))}reauthenticateWithRedirect(de){var X=this;return(0,_.Z)(function*(){return yield Ai(J.aE(X.auth)),J.h(X._delegate,de,gn)})()}sendEmailVerification(de){return J.ab(this._delegate,de)}unlink(de){var X=this;return(0,_.Z)(function*(){return yield J.ak(X._delegate,de),X})()}updateEmail(de){return J.ag(this._delegate,de)}updatePassword(de){return J.ah(this._delegate,de)}updatePhoneNumber(de){return J.u(this._delegate,de)}updateProfile(de){return J.af(this._delegate,de)}verifyBeforeUpdateEmail(de,X){return J.ac(this._delegate,de,X)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Yi.USER_MAP=new WeakMap;const Ut=J.ax;let bt=(()=>{class Ce{constructor(X,ue){if(this.app=X,ue.isInitialized())return this._delegate=ue.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ce}=X.options;Ut(ce,"invalid-api-key",{appName:X.name}),Ut(ce,"invalid-api-key",{appName:X.name});const Me="undefined"!=typeof window?gn:void 0;this._delegate=ue.initialize({options:{persistence:fn(ce,X.name),popupRedirectResolver:Me}}),this._delegate._updateErrorMap(J.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Yi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(X){this._delegate.languageCode=X}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(X){this._delegate.tenantId=X}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(X,ue){J.G(this._delegate,X,ue)}applyActionCode(X){return J.a2(this._delegate,X)}checkActionCode(X){return J.a3(this._delegate,X)}confirmPasswordReset(X,ue){return J.a1(this._delegate,X,ue)}createUserWithEmailAndPassword(X,ue){var ce=this;return(0,_.Z)(function*(){return ui(ce._delegate,J.a5(ce._delegate,X,ue))})()}fetchProvidersForEmail(X){return this.fetchSignInMethodsForEmail(X)}fetchSignInMethodsForEmail(X){return J.aa(this._delegate,X)}isSignInWithEmailLink(X){return J.a8(this._delegate,X)}getRedirectResult(){var X=this;return(0,_.Z)(function*(){Ut(Nt(),X._delegate,"operation-not-supported-in-this-environment");const ue=yield J.j(X._delegate,gn);return ue?ui(X._delegate,Promise.resolve(ue)):{credential:null,user:null}})()}addFrameworkForLogging(X){!function Nn(Ce,de){(0,J.aE)(Ce)._logFramework(de)}(this._delegate,X)}onAuthStateChanged(X,ue,ce){const{next:Me,error:et,complete:Zt}=nn(X,ue,ce);return this._delegate.onAuthStateChanged(Me,et,Zt)}onIdTokenChanged(X,ue,ce){const{next:Me,error:et,complete:Zt}=nn(X,ue,ce);return this._delegate.onIdTokenChanged(Me,et,Zt)}sendSignInLinkToEmail(X,ue){return J.a7(this._delegate,X,ue)}sendPasswordResetEmail(X,ue){return J.a0(this._delegate,X,ue||void 0)}setPersistence(X){var ue=this;return(0,_.Z)(function*(){let ce;switch(function Zi(Ce,de){Ti(Object.values(kn).includes(de),Ce,"invalid-persistence-type"),(0,Ee.b$)()?Ti(de!==kn.SESSION,Ce,"unsupported-persistence-type"):(0,Ee.UG)()?Ti(de===kn.NONE,Ce,"unsupported-persistence-type"):$n()?Ti(de===kn.NONE||de===kn.LOCAL&&(0,Ee.hl)(),Ce,"unsupported-persistence-type"):Ti(de===kn.NONE||Ei(),Ce,"unsupported-persistence-type")}(ue._delegate,X),X){case kn.SESSION:ce=J.a;break;case kn.LOCAL:ce=(yield J.ay(J.i)._isAvailable())?J.i:J.b;break;case kn.NONE:ce=J.L;break;default:return J.at("argument-error",{appName:ue._delegate.name})}return ue._delegate.setPersistence(ce)})()}signInAndRetrieveDataWithCredential(X){return this.signInWithCredential(X)}signInAnonymously(){return ui(this._delegate,J.X(this._delegate))}signInWithCredential(X){return ui(this._delegate,J.Y(this._delegate,X))}signInWithCustomToken(X){return ui(this._delegate,J.$(this._delegate,X))}signInWithEmailAndPassword(X,ue){return ui(this._delegate,J.a6(this._delegate,X,ue))}signInWithEmailLink(X,ue){return ui(this._delegate,J.a9(this._delegate,X,ue))}signInWithPhoneNumber(X,ue){return yn(this._delegate,J.s(this._delegate,X,ue))}signInWithPopup(X){var ue=this;return(0,_.Z)(function*(){return Ut(Nt(),ue._delegate,"operation-not-supported-in-this-environment"),ui(ue._delegate,J.c(ue._delegate,X,gn))})()}signInWithRedirect(X){var ue=this;return(0,_.Z)(function*(){return Ut(Nt(),ue._delegate,"operation-not-supported-in-this-environment"),yield Ai(ue._delegate),J.f(ue._delegate,X,gn)})()}updateCurrentUser(X){return this._delegate.updateCurrentUser(X)}verifyPasswordResetCode(X){return J.a4(this._delegate,X)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Ce.Persistence=kn,Ce})();function nn(Ce,de,X){let ue=Ce;"function"!=typeof Ce&&({next:ue,error:de,complete:X}=Ce);const ce=ue;return{next:et=>ce(et&&Yi.getOrCreate(et)),error:de,complete:X}}function fn(Ce,de){const X=function tr(Ce,de){const X=Pn();if(!X)return[];const ue=J.az(Vi,Ce,de);switch(X.getItem(ue)){case kn.NONE:return[J.L];case kn.LOCAL:return[J.i,J.a];case kn.SESSION:return[J.a];default:return[]}}(Ce,de);if("undefined"!=typeof self&&!X.includes(J.i)&&X.push(J.i),"undefined"!=typeof window)for(const ue of[J.b,J.a])X.includes(ue)||X.push(ue);return X.includes(J.L)||X.push(J.L),X}class dn{constructor(){this.providerId="phone",this._delegate=new J.P(Sr(c.Z.auth()))}static credential(de,X){return J.P.credential(de,X)}verifyPhoneNumber(de,X){return this._delegate.verifyPhoneNumber(de,X)}unwrap(){return this._delegate}}dn.PHONE_SIGN_IN_METHOD=J.P.PHONE_SIGN_IN_METHOD,dn.PROVIDER_ID=J.P.PROVIDER_ID;const on=J.ax;class xe{constructor(de,X,ue=c.Z.app()){var ce;on(null===(ce=ue.options)||void 0===ce?void 0:ce.apiKey,"invalid-api-key",{appName:ue.name}),this._delegate=new J.R(de,X,ue.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ve(Ce){Ce.INTERNAL.registerComponent(new Ge.wA("auth-compat",de=>{const X=de.getProvider("app-compat").getImmediate(),ue=de.getProvider("auth");return new bt(X,ue)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:J.A.EMAIL_SIGNIN,PASSWORD_RESET:J.A.PASSWORD_RESET,RECOVER_EMAIL:J.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:J.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:J.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:J.A.VERIFY_EMAIL}},EmailAuthProvider:J.M,FacebookAuthProvider:J.N,GithubAuthProvider:J.T,GoogleAuthProvider:J.Q,OAuthProvider:J.U,SAMLAuthProvider:J.V,PhoneAuthProvider:dn,PhoneMultiFactorGenerator:J.m,RecaptchaVerifier:xe,TwitterAuthProvider:J.W,Auth:bt,AuthCredential:J.H,Error:Ee.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Ce.registerVersion("@firebase/auth-compat","0.2.23")}(c.Z)},2731:(rn,Ye,V)=>{V.d(Ye,{ET:()=>_.ET,hJ:()=>_.hJ,JU:()=>_.JU,ad:()=>_.ad,cf:()=>_.cf,r7:()=>_.r7});var _=V(5525)},1135:(rn,Ye,V)=>{V.d(Ye,{X:()=>c});var _=V(7579);class c extends _.x{constructor(Ee){super(),this._value=Ee}get value(){return this.getValue()}_subscribe(Ee){const Ie=super._subscribe(Ee);return!Ie.closed&&Ee.next(this._value),Ie}getValue(){const{hasError:Ee,thrownError:Ie,_value:Ze}=this;if(Ee)throw Ie;return this._throwIfClosed(),Ze}next(Ee){super.next(this._value=Ee)}}},8306:(rn,Ye,V)=>{V.d(Ye,{y:()=>fe});var _=V(930),c=V(727),J=V(8822),Ee=V(4671);var Ge=V(2416),pe=V(576),ke=V(2806);let fe=(()=>{class rt{constructor(ot){ot&&(this._subscribe=ot)}lift(ot){const qe=new rt;return qe.source=this,qe.operator=ot,qe}subscribe(ot,qe,ze){const Ue=function _t(rt){return rt&&rt instanceof _.Lv||function Fe(rt){return rt&&(0,pe.m)(rt.next)&&(0,pe.m)(rt.error)&&(0,pe.m)(rt.complete)}(rt)&&(0,c.Nn)(rt)}(ot)?ot:new _.Hp(ot,qe,ze);return(0,ke.x)(()=>{const{operator:vt,source:Pe}=this;Ue.add(vt?vt.call(Ue,Pe):Pe?this._subscribe(Ue):this._trySubscribe(Ue))}),Ue}_trySubscribe(ot){try{return this._subscribe(ot)}catch(qe){ot.error(qe)}}forEach(ot,qe){return new(qe=ge(qe))((ze,Ue)=>{let vt;vt=this.subscribe(Pe=>{try{ot(Pe)}catch(je){Ue(je),null==vt||vt.unsubscribe()}},Ue,ze)})}_subscribe(ot){var qe;return null===(qe=this.source)||void 0===qe?void 0:qe.subscribe(ot)}[J.L](){return this}pipe(...ot){return function Ze(rt){return 0===rt.length?Ee.y:1===rt.length?rt[0]:function(ot){return rt.reduce((qe,ze)=>ze(qe),ot)}}(ot)(this)}toPromise(ot){return new(ot=ge(ot))((qe,ze)=>{let Ue;this.subscribe(vt=>Ue=vt,vt=>ze(vt),()=>qe(Ue))})}}return rt.create=mt=>new rt(mt),rt})();function ge(rt){var mt;return null!==(mt=null!=rt?rt:Ge.v.Promise)&&void 0!==mt?mt:Promise}},7579:(rn,Ye,V)=>{V.d(Ye,{x:()=>Ge});var _=V(8306),c=V(727);const Ee=(0,V(3888).d)(ke=>function(){ke(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ie=V(8737),Ze=V(2806);let Ge=(()=>{class ke extends _.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ge){const Fe=new pe(this,this);return Fe.operator=ge,Fe}_throwIfClosed(){if(this.closed)throw new Ee}next(ge){(0,Ze.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const Fe=this.observers.slice();for(const _t of Fe)_t.next(ge)}})}error(ge){(0,Ze.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ge;const{observers:Fe}=this;for(;Fe.length;)Fe.shift().error(ge)}})}complete(){(0,Ze.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ge}=this;for(;ge.length;)ge.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var ge;return(null===(ge=this.observers)||void 0===ge?void 0:ge.length)>0}_trySubscribe(ge){return this._throwIfClosed(),super._trySubscribe(ge)}_subscribe(ge){return this._throwIfClosed(),this._checkFinalizedStatuses(ge),this._innerSubscribe(ge)}_innerSubscribe(ge){const{hasError:Fe,isStopped:_t,observers:rt}=this;return Fe||_t?c.Lc:(rt.push(ge),new c.w0(()=>(0,Ie.P)(rt,ge)))}_checkFinalizedStatuses(ge){const{hasError:Fe,thrownError:_t,isStopped:rt}=this;Fe?ge.error(_t):rt&&ge.complete()}asObservable(){const ge=new _.y;return ge.source=this,ge}}return ke.create=(fe,ge)=>new pe(fe,ge),ke})();class pe extends Ge{constructor(fe,ge){super(),this.destination=fe,this.source=ge}next(fe){var ge,Fe;null===(Fe=null===(ge=this.destination)||void 0===ge?void 0:ge.next)||void 0===Fe||Fe.call(ge,fe)}error(fe){var ge,Fe;null===(Fe=null===(ge=this.destination)||void 0===ge?void 0:ge.error)||void 0===Fe||Fe.call(ge,fe)}complete(){var fe,ge;null===(ge=null===(fe=this.destination)||void 0===fe?void 0:fe.complete)||void 0===ge||ge.call(fe)}_subscribe(fe){var ge,Fe;return null!==(Fe=null===(ge=this.source)||void 0===ge?void 0:ge.subscribe(fe))&&void 0!==Fe?Fe:c.Lc}}},930:(rn,Ye,V)=>{V.d(Ye,{Hp:()=>_t,Lv:()=>Fe});var _=V(576),c=V(727),J=V(2416),Ee=V(7849),Ie=V(5032);const Ze=ke("C",void 0,void 0);function ke(ze,Ue,vt){return{kind:ze,value:Ue,error:vt}}var fe=V(3410),ge=V(2806);class Fe extends c.w0{constructor(Ue){super(),this.isStopped=!1,Ue?(this.destination=Ue,(0,c.Nn)(Ue)&&Ue.add(this)):this.destination=qe}static create(Ue,vt,Pe){return new _t(Ue,vt,Pe)}next(Ue){this.isStopped?ot(function pe(ze){return ke("N",ze,void 0)}(Ue),this):this._next(Ue)}error(Ue){this.isStopped?ot(function Ge(ze){return ke("E",void 0,ze)}(Ue),this):(this.isStopped=!0,this._error(Ue))}complete(){this.isStopped?ot(Ze,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ue){this.destination.next(Ue)}_error(Ue){try{this.destination.error(Ue)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class _t extends Fe{constructor(Ue,vt,Pe){let je;if(super(),(0,_.m)(Ue))je=Ue;else if(Ue){let nt;({next:je,error:vt,complete:Pe}=Ue),this&&J.v.useDeprecatedNextContext?(nt=Object.create(Ue),nt.unsubscribe=()=>this.unsubscribe()):nt=Ue,je=null==je?void 0:je.bind(nt),vt=null==vt?void 0:vt.bind(nt),Pe=null==Pe?void 0:Pe.bind(nt)}this.destination={next:je?rt(je):Ie.Z,error:rt(null!=vt?vt:mt),complete:Pe?rt(Pe):Ie.Z}}}function rt(ze,Ue){return(...vt)=>{try{ze(...vt)}catch(Pe){J.v.useDeprecatedSynchronousErrorHandling?(0,ge.O)(Pe):(0,Ee.h)(Pe)}}}function mt(ze){throw ze}function ot(ze,Ue){const{onStoppedNotification:vt}=J.v;vt&&fe.z.setTimeout(()=>vt(ze,Ue))}const qe={closed:!0,next:Ie.Z,error:mt,complete:Ie.Z}},727:(rn,Ye,V)=>{V.d(Ye,{Lc:()=>Ze,w0:()=>Ie,Nn:()=>Ge});var _=V(576);const J=(0,V(3888).d)(ke=>function(ge){ke(this),this.message=ge?`${ge.length} errors occurred during unsubscription:\n${ge.map((Fe,_t)=>`${_t+1}) ${Fe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ge});var Ee=V(8737);class Ie{constructor(fe){this.initialTeardown=fe,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let fe;if(!this.closed){this.closed=!0;const{_parentage:ge}=this;if(ge)if(this._parentage=null,Array.isArray(ge))for(const rt of ge)rt.remove(this);else ge.remove(this);const{initialTeardown:Fe}=this;if((0,_.m)(Fe))try{Fe()}catch(rt){fe=rt instanceof J?rt.errors:[rt]}const{_teardowns:_t}=this;if(_t){this._teardowns=null;for(const rt of _t)try{pe(rt)}catch(mt){fe=null!=fe?fe:[],mt instanceof J?fe=[...fe,...mt.errors]:fe.push(mt)}}if(fe)throw new J(fe)}}add(fe){var ge;if(fe&&fe!==this)if(this.closed)pe(fe);else{if(fe instanceof Ie){if(fe.closed||fe._hasParent(this))return;fe._addParent(this)}(this._teardowns=null!==(ge=this._teardowns)&&void 0!==ge?ge:[]).push(fe)}}_hasParent(fe){const{_parentage:ge}=this;return ge===fe||Array.isArray(ge)&&ge.includes(fe)}_addParent(fe){const{_parentage:ge}=this;this._parentage=Array.isArray(ge)?(ge.push(fe),ge):ge?[ge,fe]:fe}_removeParent(fe){const{_parentage:ge}=this;ge===fe?this._parentage=null:Array.isArray(ge)&&(0,Ee.P)(ge,fe)}remove(fe){const{_teardowns:ge}=this;ge&&(0,Ee.P)(ge,fe),fe instanceof Ie&&fe._removeParent(this)}}Ie.EMPTY=(()=>{const ke=new Ie;return ke.closed=!0,ke})();const Ze=Ie.EMPTY;function Ge(ke){return ke instanceof Ie||ke&&"closed"in ke&&(0,_.m)(ke.remove)&&(0,_.m)(ke.add)&&(0,_.m)(ke.unsubscribe)}function pe(ke){(0,_.m)(ke)?ke():ke.unsubscribe()}},2416:(rn,Ye,V)=>{V.d(Ye,{v:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(rn,Ye,V)=>{V.d(Ye,{a:()=>fe});var _=V(8306),c=V(4742),J=V(8996),Ee=V(4671),Ie=V(3268),Ze=V(3269),Ge=V(1810),pe=V(5403),ke=V(9672);function fe(..._t){const rt=(0,Ze.yG)(_t),mt=(0,Ze.jO)(_t),{args:ot,keys:qe}=(0,c.D)(_t);if(0===ot.length)return(0,J.D)([],rt);const ze=new _.y(function ge(_t,rt,mt=Ee.y){return ot=>{Fe(rt,()=>{const{length:qe}=_t,ze=new Array(qe);let Ue=qe,vt=qe;for(let Pe=0;Pe<qe;Pe++)Fe(rt,()=>{const je=(0,J.D)(_t[Pe],rt);let nt=!1;je.subscribe(new pe.Q(ot,It=>{ze[Pe]=It,nt||(nt=!0,vt--),vt||ot.next(mt(ze.slice()))},()=>{--Ue||ot.complete()}))},ot)},ot)}}(ot,rt,qe?Ue=>(0,Ge.n)(qe,Ue):Ee.y));return mt?ze.pipe((0,Ie.Z)(mt)):ze}function Fe(_t,rt,mt){_t?(0,ke.f)(mt,_t,rt):rt()}},7272:(rn,Ye,V)=>{V.d(Ye,{z:()=>Ie});var _=V(8189),J=V(3269),Ee=V(8996);function Ie(...Ze){return function c(){return(0,_.J)(1)}()((0,Ee.D)(Ze,(0,J.yG)(Ze)))}},515:(rn,Ye,V)=>{V.d(Ye,{E:()=>c});const c=new(V(8306).y)(Ie=>Ie.complete())},8996:(rn,Ye,V)=>{V.d(Ye,{D:()=>je});var _=V(8421),c=V(5363),J=V(9468),Ze=V(8306),pe=V(2202),ke=V(576),fe=V(9672);function Fe(nt,It){if(!nt)throw new Error("Iterable cannot be null");return new Ze.y(At=>{(0,fe.f)(At,It,()=>{const it=nt[Symbol.asyncIterator]();(0,fe.f)(At,It,()=>{it.next().then(Ne=>{Ne.done?At.complete():At.next(Ne.value)})},0,!0)})})}var _t=V(3670),rt=V(8239),mt=V(1144),ot=V(6495),qe=V(2206),ze=V(4532),Ue=V(3260);function je(nt,It){return It?function Pe(nt,It){if(null!=nt){if((0,_t.c)(nt))return function Ee(nt,It){return(0,_.Xf)(nt).pipe((0,J.R)(It),(0,c.Q)(It))}(nt,It);if((0,mt.z)(nt))return function Ge(nt,It){return new Ze.y(At=>{let it=0;return It.schedule(function(){it===nt.length?At.complete():(At.next(nt[it++]),At.closed||this.schedule())})})}(nt,It);if((0,rt.t)(nt))return function Ie(nt,It){return(0,_.Xf)(nt).pipe((0,J.R)(It),(0,c.Q)(It))}(nt,It);if((0,qe.D)(nt))return Fe(nt,It);if((0,ot.T)(nt))return function ge(nt,It){return new Ze.y(At=>{let it;return(0,fe.f)(At,It,()=>{it=nt[pe.h](),(0,fe.f)(At,It,()=>{let Ne,We;try{({value:Ne,done:We}=it.next())}catch(Qe){return void At.error(Qe)}We?At.complete():At.next(Ne)},0,!0)}),()=>(0,ke.m)(null==it?void 0:it.return)&&it.return()})}(nt,It);if((0,Ue.L)(nt))return function vt(nt,It){return Fe((0,Ue.Q)(nt),It)}(nt,It)}throw(0,ze.z)(nt)}(nt,It):(0,_.Xf)(nt)}},8421:(rn,Ye,V)=>{V.d(Ye,{Xf:()=>_t});var _=V(5987),c=V(1144),J=V(8239),Ee=V(8306),Ie=V(3670),Ze=V(2206),Ge=V(4532),pe=V(6495),ke=V(3260),fe=V(576),ge=V(7849),Fe=V(8822);function _t(Pe){if(Pe instanceof Ee.y)return Pe;if(null!=Pe){if((0,Ie.c)(Pe))return function rt(Pe){return new Ee.y(je=>{const nt=Pe[Fe.L]();if((0,fe.m)(nt.subscribe))return nt.subscribe(je);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,c.z)(Pe))return function mt(Pe){return new Ee.y(je=>{for(let nt=0;nt<Pe.length&&!je.closed;nt++)je.next(Pe[nt]);je.complete()})}(Pe);if((0,J.t)(Pe))return function ot(Pe){return new Ee.y(je=>{Pe.then(nt=>{je.closed||(je.next(nt),je.complete())},nt=>je.error(nt)).then(null,ge.h)})}(Pe);if((0,Ze.D)(Pe))return ze(Pe);if((0,pe.T)(Pe))return function qe(Pe){return new Ee.y(je=>{for(const nt of Pe)if(je.next(nt),je.closed)return;je.complete()})}(Pe);if((0,ke.L)(Pe))return function Ue(Pe){return ze((0,ke.Q)(Pe))}(Pe)}throw(0,Ge.z)(Pe)}function ze(Pe){return new Ee.y(je=>{(function vt(Pe,je){var nt,It,At,it;return(0,_.mG)(this,void 0,void 0,function*(){try{for(nt=(0,_.KL)(Pe);!(It=yield nt.next()).done;)if(je.next(It.value),je.closed)return}catch(Ne){At={error:Ne}}finally{try{It&&!It.done&&(it=nt.return)&&(yield it.call(nt))}finally{if(At)throw At.error}}je.complete()})})(Pe,je).catch(nt=>je.error(nt))})}},6451:(rn,Ye,V)=>{V.d(Ye,{T:()=>Ze});var _=V(8189),c=V(8421),J=V(515),Ee=V(3269),Ie=V(8996);function Ze(...Ge){const pe=(0,Ee.yG)(Ge),ke=(0,Ee._6)(Ge,1/0),fe=Ge;return fe.length?1===fe.length?(0,c.Xf)(fe[0]):(0,_.J)(ke)((0,Ie.D)(fe,pe)):J.E}},9646:(rn,Ye,V)=>{V.d(Ye,{of:()=>J});var _=V(3269),c=V(8996);function J(...Ee){const Ie=(0,_.yG)(Ee);return(0,c.D)(Ee,Ie)}},5403:(rn,Ye,V)=>{V.d(Ye,{Q:()=>c});var _=V(930);class c extends _.Lv{constructor(Ee,Ie,Ze,Ge,pe){super(Ee),this.onFinalize=pe,this._next=Ie?function(ke){try{Ie(ke)}catch(fe){Ee.error(fe)}}:super._next,this._error=Ge?function(ke){try{Ge(ke)}catch(fe){Ee.error(fe)}finally{this.unsubscribe()}}:super._error,this._complete=Ze?function(){try{Ze()}catch(ke){Ee.error(ke)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ee;const{closed:Ie}=this;super.unsubscribe(),!Ie&&(null===(Ee=this.onFinalize)||void 0===Ee||Ee.call(this))}}},6590:(rn,Ye,V)=>{V.d(Ye,{d:()=>J});var _=V(4482),c=V(5403);function J(Ee){return(0,_.e)((Ie,Ze)=>{let Ge=!1;Ie.subscribe(new c.Q(Ze,pe=>{Ge=!0,Ze.next(pe)},()=>{Ge||Ze.next(Ee),Ze.complete()}))})}},9300:(rn,Ye,V)=>{V.d(Ye,{h:()=>J});var _=V(4482),c=V(5403);function J(Ee,Ie){return(0,_.e)((Ze,Ge)=>{let pe=0;Ze.subscribe(new c.Q(Ge,ke=>Ee.call(Ie,ke,pe++)&&Ge.next(ke)))})}},590:(rn,Ye,V)=>{V.d(Ye,{P:()=>Ge});var _=V(6805),c=V(9300),J=V(5698),Ee=V(6590),Ie=V(8068),Ze=V(4671);function Ge(pe,ke){const fe=arguments.length>=2;return ge=>ge.pipe(pe?(0,c.h)((Fe,_t)=>pe(Fe,_t,ge)):Ze.y,(0,J.q)(1),fe?(0,Ee.d)(ke):(0,Ie.T)(()=>new _.K))}},4004:(rn,Ye,V)=>{V.d(Ye,{U:()=>J});var _=V(4482),c=V(5403);function J(Ee,Ie){return(0,_.e)((Ze,Ge)=>{let pe=0;Ze.subscribe(new c.Q(Ge,ke=>{Ge.next(Ee.call(Ie,ke,pe++))}))})}},8189:(rn,Ye,V)=>{V.d(Ye,{J:()=>J});var _=V(5577),c=V(4671);function J(Ee=1/0){return(0,_.z)(c.y,Ee)}},5577:(rn,Ye,V)=>{V.d(Ye,{z:()=>pe});var _=V(4004),c=V(8421),J=V(4482),Ee=V(9672),Ie=V(5403),Ge=V(576);function pe(ke,fe,ge=1/0){return(0,Ge.m)(fe)?pe((Fe,_t)=>(0,_.U)((rt,mt)=>fe(Fe,rt,_t,mt))((0,c.Xf)(ke(Fe,_t))),ge):("number"==typeof fe&&(ge=fe),(0,J.e)((Fe,_t)=>function Ze(ke,fe,ge,Fe,_t,rt,mt,ot){const qe=[];let ze=0,Ue=0,vt=!1;const Pe=()=>{vt&&!qe.length&&!ze&&fe.complete()},je=It=>ze<Fe?nt(It):qe.push(It),nt=It=>{rt&&fe.next(It),ze++;let At=!1;(0,c.Xf)(ge(It,Ue++)).subscribe(new Ie.Q(fe,it=>{null==_t||_t(it),rt?je(it):fe.next(it)},()=>{At=!0},void 0,()=>{if(At)try{for(ze--;qe.length&&ze<Fe;){const it=qe.shift();mt?(0,Ee.f)(fe,mt,()=>nt(it)):nt(it)}Pe()}catch(it){fe.error(it)}}))};return ke.subscribe(new Ie.Q(fe,je,()=>{vt=!0,Pe()})),()=>{null==ot||ot()}}(Fe,_t,ke,ge)))}},5363:(rn,Ye,V)=>{V.d(Ye,{Q:()=>Ee});var _=V(9672),c=V(4482),J=V(5403);function Ee(Ie,Ze=0){return(0,c.e)((Ge,pe)=>{Ge.subscribe(new J.Q(pe,ke=>(0,_.f)(pe,Ie,()=>pe.next(ke),Ze),()=>(0,_.f)(pe,Ie,()=>pe.complete(),Ze),ke=>(0,_.f)(pe,Ie,()=>pe.error(ke),Ze)))})}},5026:(rn,Ye,V)=>{V.d(Ye,{R:()=>Ee});var _=V(4482),c=V(5403);function J(Ie,Ze,Ge,pe,ke){return(fe,ge)=>{let Fe=Ge,_t=Ze,rt=0;fe.subscribe(new c.Q(ge,mt=>{const ot=rt++;_t=Fe?Ie(_t,mt,ot):(Fe=!0,mt),pe&&ge.next(_t)},ke&&(()=>{Fe&&ge.next(_t),ge.complete()})))}}function Ee(Ie,Ze){return(0,_.e)(J(Ie,Ze,arguments.length>=2,!0))}},3099:(rn,Ye,V)=>{V.d(Ye,{B:()=>Ze});var _=V(8996),c=V(5698),J=V(7579),Ee=V(930),Ie=V(4482);function Ze(pe={}){const{connector:ke=(()=>new J.x),resetOnError:fe=!0,resetOnComplete:ge=!0,resetOnRefCountZero:Fe=!0}=pe;return _t=>{let rt=null,mt=null,ot=null,qe=0,ze=!1,Ue=!1;const vt=()=>{null==mt||mt.unsubscribe(),mt=null},Pe=()=>{vt(),rt=ot=null,ze=Ue=!1},je=()=>{const nt=rt;Pe(),null==nt||nt.unsubscribe()};return(0,Ie.e)((nt,It)=>{qe++,!Ue&&!ze&&vt();const At=ot=null!=ot?ot:ke();It.add(()=>{qe--,0===qe&&!Ue&&!ze&&(mt=Ge(je,Fe))}),At.subscribe(It),rt||(rt=new Ee.Hp({next:it=>At.next(it),error:it=>{Ue=!0,vt(),mt=Ge(Pe,fe,it),At.error(it)},complete:()=>{ze=!0,vt(),mt=Ge(Pe,ge),At.complete()}}),(0,_.D)(nt).subscribe(rt))})(_t)}}function Ge(pe,ke,...fe){return!0===ke?(pe(),null):!1===ke?null:ke(...fe).pipe((0,c.q)(1)).subscribe(()=>pe())}},8675:(rn,Ye,V)=>{V.d(Ye,{O:()=>Ee});var _=V(7272),c=V(3269),J=V(4482);function Ee(...Ie){const Ze=(0,c.yG)(Ie);return(0,J.e)((Ge,pe)=>{(Ze?(0,_.z)(Ie,Ge,Ze):(0,_.z)(Ie,Ge)).subscribe(pe)})}},9468:(rn,Ye,V)=>{V.d(Ye,{R:()=>c});var _=V(4482);function c(J,Ee=0){return(0,_.e)((Ie,Ze)=>{Ze.add(J.schedule(()=>Ie.subscribe(Ze),Ee))})}},3900:(rn,Ye,V)=>{V.d(Ye,{w:()=>Ee});var _=V(8421),c=V(4482),J=V(5403);function Ee(Ie,Ze){return(0,c.e)((Ge,pe)=>{let ke=null,fe=0,ge=!1;const Fe=()=>ge&&!ke&&pe.complete();Ge.subscribe(new J.Q(pe,_t=>{null==ke||ke.unsubscribe();let rt=0;const mt=fe++;(0,_.Xf)(Ie(_t,mt)).subscribe(ke=new J.Q(pe,ot=>pe.next(Ze?Ze(_t,ot,mt,rt++):ot),()=>{ke=null,Fe()}))},()=>{ge=!0,Fe()}))})}},5698:(rn,Ye,V)=>{V.d(Ye,{q:()=>Ee});var _=V(515),c=V(4482),J=V(5403);function Ee(Ie){return Ie<=0?()=>_.E:(0,c.e)((Ze,Ge)=>{let pe=0;Ze.subscribe(new J.Q(Ge,ke=>{++pe<=Ie&&(Ge.next(ke),Ie<=pe&&Ge.complete())}))})}},8505:(rn,Ye,V)=>{V.d(Ye,{b:()=>Ie});var _=V(576),c=V(4482),J=V(5403),Ee=V(4671);function Ie(Ze,Ge,pe){const ke=(0,_.m)(Ze)||Ge||pe?{next:Ze,error:Ge,complete:pe}:Ze;return ke?(0,c.e)((fe,ge)=>{var Fe;null===(Fe=ke.subscribe)||void 0===Fe||Fe.call(ke);let _t=!0;fe.subscribe(new J.Q(ge,rt=>{var mt;null===(mt=ke.next)||void 0===mt||mt.call(ke,rt),ge.next(rt)},()=>{var rt;_t=!1,null===(rt=ke.complete)||void 0===rt||rt.call(ke),ge.complete()},rt=>{var mt;_t=!1,null===(mt=ke.error)||void 0===mt||mt.call(ke,rt),ge.error(rt)},()=>{var rt,mt;_t&&(null===(rt=ke.unsubscribe)||void 0===rt||rt.call(ke)),null===(mt=ke.finalize)||void 0===mt||mt.call(ke)}))}):Ee.y}},8068:(rn,Ye,V)=>{V.d(Ye,{T:()=>Ee});var _=V(6805),c=V(4482),J=V(5403);function Ee(Ze=Ie){return(0,c.e)((Ge,pe)=>{let ke=!1;Ge.subscribe(new J.Q(pe,fe=>{ke=!0,pe.next(fe)},()=>ke?pe.complete():pe.error(Ze())))})}function Ie(){return new _.K}},4408:(rn,Ye,V)=>{V.d(Ye,{o:()=>Ie});var _=V(727);class c extends _.w0{constructor(Ge,pe){super()}schedule(Ge,pe=0){return this}}const J={setInterval(...Ze){const{delegate:Ge}=J;return((null==Ge?void 0:Ge.setInterval)||setInterval)(...Ze)},clearInterval(Ze){const{delegate:Ge}=J;return((null==Ge?void 0:Ge.clearInterval)||clearInterval)(Ze)},delegate:void 0};var Ee=V(8737);class Ie extends c{constructor(Ge,pe){super(Ge,pe),this.scheduler=Ge,this.work=pe,this.pending=!1}schedule(Ge,pe=0){if(this.closed)return this;this.state=Ge;const ke=this.id,fe=this.scheduler;return null!=ke&&(this.id=this.recycleAsyncId(fe,ke,pe)),this.pending=!0,this.delay=pe,this.id=this.id||this.requestAsyncId(fe,this.id,pe),this}requestAsyncId(Ge,pe,ke=0){return J.setInterval(Ge.flush.bind(Ge,this),ke)}recycleAsyncId(Ge,pe,ke=0){if(null!=ke&&this.delay===ke&&!1===this.pending)return pe;J.clearInterval(pe)}execute(Ge,pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ke=this._execute(Ge,pe);if(ke)return ke;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ge,pe){let fe,ke=!1;try{this.work(Ge)}catch(ge){ke=!0,fe=ge||new Error("Scheduled action threw falsy error")}if(ke)return this.unsubscribe(),fe}unsubscribe(){if(!this.closed){const{id:Ge,scheduler:pe}=this,{actions:ke}=pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ee.P)(ke,this),null!=Ge&&(this.id=this.recycleAsyncId(pe,Ge,null)),this.delay=null,super.unsubscribe()}}}},7565:(rn,Ye,V)=>{V.d(Ye,{v:()=>J});var _=V(6063);class c{constructor(Ie,Ze=c.now){this.schedulerActionCtor=Ie,this.now=Ze}schedule(Ie,Ze=0,Ge){return new this.schedulerActionCtor(this,Ie).schedule(Ge,Ze)}}c.now=_.l.now;class J extends c{constructor(Ie,Ze=c.now){super(Ie,Ze),this.actions=[],this._active=!1,this._scheduled=void 0}flush(Ie){const{actions:Ze}=this;if(this._active)return void Ze.push(Ie);let Ge;this._active=!0;do{if(Ge=Ie.execute(Ie.state,Ie.delay))break}while(Ie=Ze.shift());if(this._active=!1,Ge){for(;Ie=Ze.shift();)Ie.unsubscribe();throw Ge}}}},4986:(rn,Ye,V)=>{V.d(Ye,{z:()=>J,P:()=>Ee});var _=V(4408);const J=new(V(7565).v)(_.o),Ee=J},6063:(rn,Ye,V)=>{V.d(Ye,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3410:(rn,Ye,V)=>{V.d(Ye,{z:()=>_});const _={setTimeout(...c){const{delegate:J}=_;return((null==J?void 0:J.setTimeout)||setTimeout)(...c)},clearTimeout(c){const{delegate:J}=_;return((null==J?void 0:J.clearTimeout)||clearTimeout)(c)},delegate:void 0}},2202:(rn,Ye,V)=>{V.d(Ye,{h:()=>c});const c=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(rn,Ye,V)=>{V.d(Ye,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(rn,Ye,V)=>{V.d(Ye,{K:()=>c});const c=(0,V(3888).d)(J=>function(){J(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(rn,Ye,V)=>{V.d(Ye,{jO:()=>Ee,yG:()=>Ie,_6:()=>Ze});var _=V(576),c=V(3532);function J(Ge){return Ge[Ge.length-1]}function Ee(Ge){return(0,_.m)(J(Ge))?Ge.pop():void 0}function Ie(Ge){return(0,c.K)(J(Ge))?Ge.pop():void 0}function Ze(Ge,pe){return"number"==typeof J(Ge)?Ge.pop():pe}},4742:(rn,Ye,V)=>{V.d(Ye,{D:()=>Ie});const{isArray:_}=Array,{getPrototypeOf:c,prototype:J,keys:Ee}=Object;function Ie(Ge){if(1===Ge.length){const pe=Ge[0];if(_(pe))return{args:pe,keys:null};if(function Ze(Ge){return Ge&&"object"==typeof Ge&&c(Ge)===J}(pe)){const ke=Ee(pe);return{args:ke.map(fe=>pe[fe]),keys:ke}}}return{args:Ge,keys:null}}},8737:(rn,Ye,V)=>{function _(c,J){if(c){const Ee=c.indexOf(J);0<=Ee&&c.splice(Ee,1)}}V.d(Ye,{P:()=>_})},3888:(rn,Ye,V)=>{function _(c){const Ee=c(Ie=>{Error.call(Ie),Ie.stack=(new Error).stack});return Ee.prototype=Object.create(Error.prototype),Ee.prototype.constructor=Ee,Ee}V.d(Ye,{d:()=>_})},1810:(rn,Ye,V)=>{function _(c,J){return c.reduce((Ee,Ie,Ze)=>(Ee[Ie]=J[Ze],Ee),{})}V.d(Ye,{n:()=>_})},2806:(rn,Ye,V)=>{V.d(Ye,{x:()=>J,O:()=>Ee});var _=V(2416);let c=null;function J(Ie){if(_.v.useDeprecatedSynchronousErrorHandling){const Ze=!c;if(Ze&&(c={errorThrown:!1,error:null}),Ie(),Ze){const{errorThrown:Ge,error:pe}=c;if(c=null,Ge)throw pe}}else Ie()}function Ee(Ie){_.v.useDeprecatedSynchronousErrorHandling&&c&&(c.errorThrown=!0,c.error=Ie)}},9672:(rn,Ye,V)=>{function _(c,J,Ee,Ie=0,Ze=!1){const Ge=J.schedule(function(){Ee(),Ze?c.add(this.schedule(null,Ie)):this.unsubscribe()},Ie);if(c.add(Ge),!Ze)return Ge}V.d(Ye,{f:()=>_})},4671:(rn,Ye,V)=>{function _(c){return c}V.d(Ye,{y:()=>_})},1144:(rn,Ye,V)=>{V.d(Ye,{z:()=>_});const _=c=>c&&"number"==typeof c.length&&"function"!=typeof c},2206:(rn,Ye,V)=>{V.d(Ye,{D:()=>c});var _=V(576);function c(J){return Symbol.asyncIterator&&(0,_.m)(null==J?void 0:J[Symbol.asyncIterator])}},576:(rn,Ye,V)=>{function _(c){return"function"==typeof c}V.d(Ye,{m:()=>_})},3670:(rn,Ye,V)=>{V.d(Ye,{c:()=>J});var _=V(8822),c=V(576);function J(Ee){return(0,c.m)(Ee[_.L])}},6495:(rn,Ye,V)=>{V.d(Ye,{T:()=>J});var _=V(2202),c=V(576);function J(Ee){return(0,c.m)(null==Ee?void 0:Ee[_.h])}},8239:(rn,Ye,V)=>{V.d(Ye,{t:()=>c});var _=V(576);function c(J){return(0,_.m)(null==J?void 0:J.then)}},3260:(rn,Ye,V)=>{V.d(Ye,{Q:()=>J,L:()=>Ee});var _=V(5987),c=V(576);function J(Ie){return(0,_.FC)(this,arguments,function*(){const Ge=Ie.getReader();try{for(;;){const{value:pe,done:ke}=yield(0,_.qq)(Ge.read());if(ke)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(pe)}}finally{Ge.releaseLock()}})}function Ee(Ie){return(0,c.m)(null==Ie?void 0:Ie.getReader)}},3532:(rn,Ye,V)=>{V.d(Ye,{K:()=>c});var _=V(576);function c(J){return J&&(0,_.m)(J.schedule)}},4482:(rn,Ye,V)=>{V.d(Ye,{A:()=>c,e:()=>J});var _=V(576);function c(Ee){return(0,_.m)(null==Ee?void 0:Ee.lift)}function J(Ee){return Ie=>{if(c(Ie))return Ie.lift(function(Ze){try{return Ee(Ze,this)}catch(Ge){this.error(Ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(rn,Ye,V)=>{V.d(Ye,{Z:()=>Ee});var _=V(4004);const{isArray:c}=Array;function Ee(Ie){return(0,_.U)(Ze=>function J(Ie,Ze){return c(Ze)?Ie(...Ze):Ie(Ze)}(Ie,Ze))}},5032:(rn,Ye,V)=>{function _(){}V.d(Ye,{Z:()=>_})},7849:(rn,Ye,V)=>{V.d(Ye,{h:()=>J});var _=V(2416),c=V(3410);function J(Ee){c.z.setTimeout(()=>{const{onUnhandledError:Ie}=_.v;if(!Ie)throw Ee;Ie(Ee)})}},4532:(rn,Ye,V)=>{function _(c){return new TypeError(`You provided ${null!==c&&"object"==typeof c?"an invalid object":`'${c}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Ye,{z:()=>_})},5987:(rn,Ye,V)=>{function pe(Ne,We,Qe,dt){return new(Qe||(Qe=Promise))(function(at,In){function tn(qt){try{$t(dt.next(qt))}catch(Nn){In(Nn)}}function wn(qt){try{$t(dt.throw(qt))}catch(Nn){In(Nn)}}function $t(qt){qt.done?at(qt.value):function wt(at){return at instanceof Qe?at:new Qe(function(In){In(at)})}(qt.value).then(tn,wn)}$t((dt=dt.apply(Ne,We||[])).next())})}function qe(Ne){return this instanceof qe?(this.v=Ne,this):new qe(Ne)}function ze(Ne,We,Qe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var wt,dt=Qe.apply(Ne,We||[]),at=[];return wt={},In("next"),In("throw"),In("return"),wt[Symbol.asyncIterator]=function(){return this},wt;function In(bn){dt[bn]&&(wt[bn]=function(pt){return new Promise(function(Ot,Le){at.push([bn,pt,Ot,Le])>1||tn(bn,pt)})})}function tn(bn,pt){try{!function wn(bn){bn.value instanceof qe?Promise.resolve(bn.value.v).then($t,qt):Nn(at[0][2],bn)}(dt[bn](pt))}catch(Ot){Nn(at[0][3],Ot)}}function $t(bn){tn("next",bn)}function qt(bn){tn("throw",bn)}function Nn(bn,pt){bn(pt),at.shift(),at.length&&tn(at[0][0],at[0][1])}}function vt(Ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Qe,We=Ne[Symbol.asyncIterator];return We?We.call(Ne):(Ne=function Fe(Ne){var We="function"==typeof Symbol&&Symbol.iterator,Qe=We&&Ne[We],dt=0;if(Qe)return Qe.call(Ne);if(Ne&&"number"==typeof Ne.length)return{next:function(){return Ne&&dt>=Ne.length&&(Ne=void 0),{value:Ne&&Ne[dt++],done:!Ne}}};throw new TypeError(We?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ne),Qe={},dt("next"),dt("throw"),dt("return"),Qe[Symbol.asyncIterator]=function(){return this},Qe);function dt(at){Qe[at]=Ne[at]&&function(In){return new Promise(function(tn,wn){!function wt(at,In,tn,wn){Promise.resolve(wn).then(function($t){at({value:$t,done:tn})},In)}(tn,wn,(In=Ne[at](In)).done,In.value)})}}}V.d(Ye,{mG:()=>pe,qq:()=>qe,FC:()=>ze,KL:()=>vt})},1777:(rn,Ye,V)=>{V.d(Ye,{l3:()=>J,_j:()=>_,LC:()=>c,ZN:()=>ze,jt:()=>Ie,vP:()=>Ge,SB:()=>ke,oB:()=>pe,eR:()=>ge,X$:()=>Ee,ZE:()=>Ue,k1:()=>vt});class _{}class c{}const J="*";function Ee(Pe,je){return{type:7,name:Pe,definitions:je,options:{}}}function Ie(Pe,je=null){return{type:4,styles:je,timings:Pe}}function Ge(Pe,je=null){return{type:2,steps:Pe,options:je}}function pe(Pe){return{type:6,styles:Pe,offset:null}}function ke(Pe,je,nt){return{type:0,name:Pe,styles:je,options:nt}}function ge(Pe,je,nt=null){return{type:1,expr:Pe,animation:je,options:nt}}function qe(Pe){Promise.resolve(null).then(Pe)}class ze{constructor(je=0,nt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=je+nt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(je=>je()),this._onDoneFns=[])}onStart(je){this._onStartFns.push(je)}onDone(je){this._onDoneFns.push(je)}onDestroy(je){this._onDestroyFns.push(je)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){qe(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(je=>je()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(je=>je()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(je){this._position=this.totalTime?je*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(je){const nt="start"==je?this._onStartFns:this._onDoneFns;nt.forEach(It=>It()),nt.length=0}}class Ue{constructor(je){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=je;let nt=0,It=0,At=0;const it=this.players.length;0==it?qe(()=>this._onFinish()):this.players.forEach(Ne=>{Ne.onDone(()=>{++nt==it&&this._onFinish()}),Ne.onDestroy(()=>{++It==it&&this._onDestroy()}),Ne.onStart(()=>{++At==it&&this._onStart()})}),this.totalTime=this.players.reduce((Ne,We)=>Math.max(Ne,We.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(je=>je()),this._onDoneFns=[])}init(){this.players.forEach(je=>je.init())}onStart(je){this._onStartFns.push(je)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(je=>je()),this._onStartFns=[])}onDone(je){this._onDoneFns.push(je)}onDestroy(je){this._onDestroyFns.push(je)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(je=>je.play())}pause(){this.players.forEach(je=>je.pause())}restart(){this.players.forEach(je=>je.restart())}finish(){this._onFinish(),this.players.forEach(je=>je.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(je=>je.destroy()),this._onDestroyFns.forEach(je=>je()),this._onDestroyFns=[])}reset(){this.players.forEach(je=>je.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(je){const nt=je*this.totalTime;this.players.forEach(It=>{const At=It.totalTime?Math.min(1,nt/It.totalTime):1;It.setPosition(At)})}getPosition(){const je=this.players.reduce((nt,It)=>null===nt||It.totalTime>nt.totalTime?It:nt,null);return null!=je?je.getPosition():0}beforeDestroy(){this.players.forEach(je=>{je.beforeDestroy&&je.beforeDestroy()})}triggerCallback(je){const nt="start"==je?this._onStartFns:this._onDoneFns;nt.forEach(It=>It()),nt.length=0}}const vt="!"},9808:(rn,Ye,V)=>{V.d(Ye,{mr:()=>Ue,ez:()=>As,K0:()=>Ge,Do:()=>Pe,V_:()=>fe,Ye:()=>je,S$:()=>qe,sg:()=>ar,O5:()=>He,PC:()=>_s,tP:()=>ys,b0:()=>vt,lw:()=>pe,EM:()=>Je,JF:()=>Fn,NF:()=>vr,PM:()=>ne,w_:()=>Ze,bD:()=>Js,q:()=>J,Mx:()=>Wr,HT:()=>Ie});var _=V(5e3);let c=null;function J(){return c}function Ie(B){c||(c=B)}class Ze{}const Ge=new _.OlP("DocumentToken");let pe=(()=>{class B{historyGo($){throw new Error("Not implemented")}}return B.\u0275fac=function($){return new($||B)},B.\u0275prov=_.Yz7({token:B,factory:function(){return function ke(){return(0,_.LFG)(ge)}()},providedIn:"platform"}),B})();const fe=new _.OlP("Location Initialized");let ge=(()=>{class B extends pe{constructor($){super(),this._doc=$,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return J().getBaseHref(this._doc)}onPopState($){const le=J().getGlobalEventTarget(this._doc,"window");return le.addEventListener("popstate",$,!1),()=>le.removeEventListener("popstate",$)}onHashChange($){const le=J().getGlobalEventTarget(this._doc,"window");return le.addEventListener("hashchange",$,!1),()=>le.removeEventListener("hashchange",$)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname($){this.location.pathname=$}pushState($,le,Oe){Fe()?this._history.pushState($,le,Oe):this.location.hash=Oe}replaceState($,le,Oe){Fe()?this._history.replaceState($,le,Oe):this.location.hash=Oe}forward(){this._history.forward()}back(){this._history.back()}historyGo($=0){this._history.go($)}getState(){return this._history.state}}return B.\u0275fac=function($){return new($||B)(_.LFG(Ge))},B.\u0275prov=_.Yz7({token:B,factory:function(){return function _t(){return new ge((0,_.LFG)(Ge))}()},providedIn:"platform"}),B})();function Fe(){return!!window.history.pushState}function rt(B,se){if(0==B.length)return se;if(0==se.length)return B;let $=0;return B.endsWith("/")&&$++,se.startsWith("/")&&$++,2==$?B+se.substring(1):1==$?B+se:B+"/"+se}function mt(B){const se=B.match(/#|\?|$/),$=se&&se.index||B.length;return B.slice(0,$-("/"===B[$-1]?1:0))+B.slice($)}function ot(B){return B&&"?"!==B[0]?"?"+B:B}let qe=(()=>{class B{historyGo($){throw new Error("Not implemented")}}return B.\u0275fac=function($){return new($||B)},B.\u0275prov=_.Yz7({token:B,factory:function(){return function ze(B){const se=(0,_.LFG)(Ge).location;return new vt((0,_.LFG)(pe),se&&se.origin||"")}()},providedIn:"root"}),B})();const Ue=new _.OlP("appBaseHref");let vt=(()=>{class B extends qe{constructor($,le){if(super(),this._platformLocation=$,this._removeListenerFns=[],null==le&&(le=this._platformLocation.getBaseHrefFromDOM()),null==le)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=le}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}prepareExternalUrl($){return rt(this._baseHref,$)}path($=!1){const le=this._platformLocation.pathname+ot(this._platformLocation.search),Oe=this._platformLocation.hash;return Oe&&$?`${le}${Oe}`:le}pushState($,le,Oe,ft){const kt=this.prepareExternalUrl(Oe+ot(ft));this._platformLocation.pushState($,le,kt)}replaceState($,le,Oe,ft){const kt=this.prepareExternalUrl(Oe+ot(ft));this._platformLocation.replaceState($,le,kt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo($=0){var le,Oe;null===(Oe=(le=this._platformLocation).historyGo)||void 0===Oe||Oe.call(le,$)}}return B.\u0275fac=function($){return new($||B)(_.LFG(pe),_.LFG(Ue,8))},B.\u0275prov=_.Yz7({token:B,factory:B.\u0275fac}),B})(),Pe=(()=>{class B extends qe{constructor($,le){super(),this._platformLocation=$,this._baseHref="",this._removeListenerFns=[],null!=le&&(this._baseHref=le)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}path($=!1){let le=this._platformLocation.hash;return null==le&&(le="#"),le.length>0?le.substring(1):le}prepareExternalUrl($){const le=rt(this._baseHref,$);return le.length>0?"#"+le:le}pushState($,le,Oe,ft){let kt=this.prepareExternalUrl(Oe+ot(ft));0==kt.length&&(kt=this._platformLocation.pathname),this._platformLocation.pushState($,le,kt)}replaceState($,le,Oe,ft){let kt=this.prepareExternalUrl(Oe+ot(ft));0==kt.length&&(kt=this._platformLocation.pathname),this._platformLocation.replaceState($,le,kt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo($=0){var le,Oe;null===(Oe=(le=this._platformLocation).historyGo)||void 0===Oe||Oe.call(le,$)}}return B.\u0275fac=function($){return new($||B)(_.LFG(pe),_.LFG(Ue,8))},B.\u0275prov=_.Yz7({token:B,factory:B.\u0275fac}),B})(),je=(()=>{class B{constructor($,le){this._subject=new _.vpe,this._urlChangeListeners=[],this._platformStrategy=$;const Oe=this._platformStrategy.getBaseHref();this._platformLocation=le,this._baseHref=mt(At(Oe)),this._platformStrategy.onPopState(ft=>{this._subject.emit({url:this.path(!0),pop:!0,state:ft.state,type:ft.type})})}path($=!1){return this.normalize(this._platformStrategy.path($))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo($,le=""){return this.path()==this.normalize($+ot(le))}normalize($){return B.stripTrailingSlash(function It(B,se){return B&&se.startsWith(B)?se.substring(B.length):se}(this._baseHref,At($)))}prepareExternalUrl($){return $&&"/"!==$[0]&&($="/"+$),this._platformStrategy.prepareExternalUrl($)}go($,le="",Oe=null){this._platformStrategy.pushState(Oe,"",$,le),this._notifyUrlChangeListeners(this.prepareExternalUrl($+ot(le)),Oe)}replaceState($,le="",Oe=null){this._platformStrategy.replaceState(Oe,"",$,le),this._notifyUrlChangeListeners(this.prepareExternalUrl($+ot(le)),Oe)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo($=0){var le,Oe;null===(Oe=(le=this._platformStrategy).historyGo)||void 0===Oe||Oe.call(le,$)}onUrlChange($){this._urlChangeListeners.push($),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(le=>{this._notifyUrlChangeListeners(le.url,le.state)}))}_notifyUrlChangeListeners($="",le){this._urlChangeListeners.forEach(Oe=>Oe($,le))}subscribe($,le,Oe){return this._subject.subscribe({next:$,error:le,complete:Oe})}}return B.normalizeQueryParams=ot,B.joinWithSlash=rt,B.stripTrailingSlash=mt,B.\u0275fac=function($){return new($||B)(_.LFG(qe),_.LFG(pe))},B.\u0275prov=_.Yz7({token:B,factory:function(){return function nt(){return new je((0,_.LFG)(qe),(0,_.LFG)(pe))}()},providedIn:"root"}),B})();function At(B){return B.replace(/\/index.html$/,"")}var We=(()=>((We=We||{})[We.Zero=0]="Zero",We[We.One=1]="One",We[We.Two=2]="Two",We[We.Few=3]="Few",We[We.Many=4]="Many",We[We.Other=5]="Other",We))();const $n=_.kL8;class xn{}let vi=(()=>{class B extends xn{constructor($){super(),this.locale=$}getPluralCategory($,le){switch($n(le||this.locale)($)){case We.Zero:return"zero";case We.One:return"one";case We.Two:return"two";case We.Few:return"few";case We.Many:return"many";default:return"other"}}}return B.\u0275fac=function($){return new($||B)(_.LFG(_.soG))},B.\u0275prov=_.Yz7({token:B,factory:B.\u0275fac}),B})();function Wr(B,se){se=encodeURIComponent(se);for(const $ of B.split(";")){const le=$.indexOf("="),[Oe,ft]=-1==le?[$,""]:[$.slice(0,le),$.slice(le+1)];if(Oe.trim()===se)return decodeURIComponent(ft)}return null}class _r{constructor(se,$,le,Oe){this.$implicit=se,this.ngForOf=$,this.index=le,this.count=Oe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ar=(()=>{class B{constructor($,le,Oe){this._viewContainer=$,this._template=le,this._differs=Oe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf($){this._ngForOf=$,this._ngForOfDirty=!0}set ngForTrackBy($){this._trackByFn=$}get ngForTrackBy(){return this._trackByFn}set ngForTemplate($){$&&(this._template=$)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const $=this._ngForOf;!this._differ&&$&&(this._differ=this._differs.find($).create(this.ngForTrackBy))}if(this._differ){const $=this._differ.diff(this._ngForOf);$&&this._applyChanges($)}}_applyChanges($){const le=this._viewContainer;$.forEachOperation((Oe,ft,kt)=>{if(null==Oe.previousIndex)le.createEmbeddedView(this._template,new _r(Oe.item,this._ngForOf,-1,-1),null===kt?void 0:kt);else if(null==kt)le.remove(null===ft?void 0:ft);else if(null!==ft){const cn=le.get(ft);le.move(cn,kt),qr(cn,Oe)}});for(let Oe=0,ft=le.length;Oe<ft;Oe++){const cn=le.get(Oe).context;cn.index=Oe,cn.count=ft,cn.ngForOf=this._ngForOf}$.forEachIdentityChange(Oe=>{qr(le.get(Oe.currentIndex),Oe)})}static ngTemplateContextGuard($,le){return!0}}return B.\u0275fac=function($){return new($||B)(_.Y36(_.s_b),_.Y36(_.Rgc),_.Y36(_.ZZ4))},B.\u0275dir=_.lG2({type:B,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),B})();function qr(B,se){B.context.$implicit=se.item}let He=(()=>{class B{constructor($,le){this._viewContainer=$,this._context=new Xe,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=le}set ngIf($){this._context.$implicit=this._context.ngIf=$,this._updateView()}set ngIfThen($){St("ngIfThen",$),this._thenTemplateRef=$,this._thenViewRef=null,this._updateView()}set ngIfElse($){St("ngIfElse",$),this._elseTemplateRef=$,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard($,le){return!0}}return B.\u0275fac=function($){return new($||B)(_.Y36(_.s_b),_.Y36(_.Rgc))},B.\u0275dir=_.lG2({type:B,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),B})();class Xe{constructor(){this.$implicit=null,this.ngIf=null}}function St(B,se){if(se&&!se.createEmbeddedView)throw new Error(`${B} must be a TemplateRef, but received '${(0,_.AaK)(se)}'.`)}let _s=(()=>{class B{constructor($,le,Oe){this._ngEl=$,this._differs=le,this._renderer=Oe,this._ngStyle=null,this._differ=null}set ngStyle($){this._ngStyle=$,!this._differ&&$&&(this._differ=this._differs.find($).create())}ngDoCheck(){if(this._differ){const $=this._differ.diff(this._ngStyle);$&&this._applyChanges($)}}_setStyle($,le){const[Oe,ft]=$.split(".");null!=(le=null!=le&&ft?`${le}${ft}`:le)?this._renderer.setStyle(this._ngEl.nativeElement,Oe,le):this._renderer.removeStyle(this._ngEl.nativeElement,Oe)}_applyChanges($){$.forEachRemovedItem(le=>this._setStyle(le.key,null)),$.forEachAddedItem(le=>this._setStyle(le.key,le.currentValue)),$.forEachChangedItem(le=>this._setStyle(le.key,le.currentValue))}}return B.\u0275fac=function($){return new($||B)(_.Y36(_.SBq),_.Y36(_.aQg),_.Y36(_.Qsj))},B.\u0275dir=_.lG2({type:B,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),B})(),ys=(()=>{class B{constructor($){this._viewContainerRef=$,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges($){if($.ngTemplateOutlet){const le=this._viewContainerRef;this._viewRef&&le.remove(le.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?le.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&$.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return B.\u0275fac=function($){return new($||B)(_.Y36(_.s_b))},B.\u0275dir=_.lG2({type:B,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[_.TTD]}),B})(),As=(()=>{class B{}return B.\u0275fac=function($){return new($||B)},B.\u0275mod=_.oAB({type:B}),B.\u0275inj=_.cJS({providers:[{provide:xn,useClass:vi}]}),B})();const Js="browser";function vr(B){return B===Js}function ne(B){return"server"===B}let Je=(()=>{class B{}return B.\u0275prov=(0,_.Yz7)({token:B,providedIn:"root",factory:()=>new Rt((0,_.LFG)(Ge),window)}),B})();class Rt{constructor(se,$){this.document=se,this.window=$,this.offset=()=>[0,0]}setOffset(se){this.offset=Array.isArray(se)?()=>se:se}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(se){this.supportsScrolling()&&this.window.scrollTo(se[0],se[1])}scrollToAnchor(se){if(!this.supportsScrolling())return;const $=function _n(B,se){const $=B.getElementById(se)||B.getElementsByName(se)[0];if($)return $;if("function"==typeof B.createTreeWalker&&B.body&&(B.body.createShadowRoot||B.body.attachShadow)){const le=B.createTreeWalker(B.body,NodeFilter.SHOW_ELEMENT);let Oe=le.currentNode;for(;Oe;){const ft=Oe.shadowRoot;if(ft){const kt=ft.getElementById(se)||ft.querySelector(`[name="${se}"]`);if(kt)return kt}Oe=le.nextNode()}}return null}(this.document,se);$&&(this.scrollToElement($),this.attemptFocus($))}setHistoryScrollRestoration(se){if(this.supportScrollRestoration()){const $=this.window.history;$&&$.scrollRestoration&&($.scrollRestoration=se)}}scrollToElement(se){const $=se.getBoundingClientRect(),le=$.left+this.window.pageXOffset,Oe=$.top+this.window.pageYOffset,ft=this.offset();this.window.scrollTo(le-ft[0],Oe-ft[1])}attemptFocus(se){return se.focus(),this.document.activeElement===se}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const se=Bt(this.window.history)||Bt(Object.getPrototypeOf(this.window.history));return!(!se||!se.writable&&!se.set)}catch(se){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(se){return!1}}}function Bt(B){return Object.getOwnPropertyDescriptor(B,"scrollRestoration")}class Fn{}},5e3:(rn,Ye,V)=>{V.d(Ye,{deG:()=>qc,tb:()=>Vm,AFp:()=>Pb,ip1:()=>iv,CZH:()=>ff,hGG:()=>sE,z2F:()=>$m,sBO:()=>M1,Sil:()=>Ub,_Vd:()=>Nm,EJc:()=>jr,SBq:()=>Mm,qLn:()=>Ad,vpe:()=>Du,tBr:()=>yt,XFs:()=>Jt,OlP:()=>Ui,zs3:()=>Ha,ZZ4:()=>Wm,aQg:()=>_f,soG:()=>Ur,YKP:()=>yb,h0i:()=>xp,PXZ:()=>sv,R0b:()=>Ol,FiY:()=>Gt,Lbi:()=>Lb,g9A:()=>Fb,Qsj:()=>qw,FYo:()=>xC,JOm:()=>Tl,q3G:()=>Tr,tp0:()=>On,Rgc:()=>Lc,dDg:()=>jp,q4F:()=>gb,GfV:()=>OC,s_b:()=>sh,ifc:()=>Pn,eFA:()=>Vc,G48:()=>N1,Gpc:()=>ge,f3M:()=>Tf,X6Q:()=>ET,_c5:()=>ST,VLi:()=>A1,c2e:()=>Bb,zSh:()=>K_,wAp:()=>ai,vHH:()=>mt,EiD:()=>au,mCW:()=>bc,qzn:()=>iu,JVY:()=>yc,pB0:()=>If,eBb:()=>Xp,L6k:()=>bl,LAX:()=>vc,cg1:()=>q0,kL8:()=>rC,yhl:()=>bd,dqk:()=>sn,sIi:()=>qd,CqO:()=>od,QGY:()=>Zr,F4k:()=>vp,RDi:()=>Se,AaK:()=>pe,z3N:()=>Ua,qOj:()=>jh,TTD:()=>Hs,_Bn:()=>SC,xp6:()=>Pd,uIk:()=>Xl,Tol:()=>cd,ekj:()=>bp,Suo:()=>YC,Xpm:()=>dn,lG2:()=>ue,Yz7:()=>Ot,cJS:()=>ht,oAB:()=>Ce,Yjl:()=>ce,Y36:()=>yp,_UZ:()=>_u,BQk:()=>zh,ynx:()=>yu,qZA:()=>om,TgZ:()=>Dy,EpF:()=>L0,n5z:()=>xo,Ikx:()=>Or,SDv:()=>lb,QtT:()=>cb,pQV:()=>cf,LFG:()=>Cs,$8M:()=>rs,$Z:()=>P0,NdJ:()=>nc,CRH:()=>QC,oxw:()=>am,ALo:()=>jy,xi3:()=>$y,Hsn:()=>um,F$t:()=>cm,Q6J:()=>wy,s9C:()=>Yh,MGl:()=>Il,DdM:()=>BC,VKq:()=>VC,WLB:()=>UC,kEZ:()=>jC,iGM:()=>zC,MAs:()=>KE,CHM:()=>Ln,oJD:()=>Mf,LSH:()=>lu,Udp:()=>Cu,d8E:()=>ao,YNc:()=>fp,W1O:()=>Bp,_uU:()=>Sy,Oqu:()=>wm,hij:()=>Pc,AsE:()=>nf,Gf:()=>KC});var _=V(7579),c=V(727),J=V(8306),Ee=V(6451),Ie=V(3099);function Ze(o){for(let a in o)if(o[a]===Ze)return a;throw Error("Could not find renamed property on target object.")}function Ge(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function pe(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(pe).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function ke(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const fe=Ze({__forward_ref__:Ze});function ge(o){return o.__forward_ref__=ge,o.toString=function(){return pe(this())},o}function Fe(o){return _t(o)?o():o}function _t(o){return"function"==typeof o&&o.hasOwnProperty(fe)&&o.__forward_ref__===ge}class mt extends Error{constructor(a,u){super(function ot(o,a){return`NG0${Math.abs(o)}${a?": "+a:""}`}(a,u)),this.code=a}}function qe(o){return"string"==typeof o?o:null==o?"":String(o)}function ze(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():qe(o)}function je(o,a){const u=a?` in ${a}`:"";throw new mt(-201,`No provider for ${ze(o)} found${u}`)}function qt(o,a,u,f){throw new Error(`ASSERTION ERROR: ${o}`+(null==f?"":` [Expected=> ${u} ${f} ${a} <=Actual]`))}function Ot(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function ht(o){return{providers:o.providers||[],imports:o.imports||[]}}function Kt(o){return Mn(o,Ei)||Mn(o,Nt)}function Mn(o,a){return o.hasOwnProperty(a)?o[a]:null}function Ki(o){return o&&(o.hasOwnProperty($n)||o.hasOwnProperty(hi))?o[$n]:null}const Ei=Ze({\u0275prov:Ze}),$n=Ze({\u0275inj:Ze}),Nt=Ze({ngInjectableDef:Ze}),hi=Ze({ngInjectorDef:Ze});var Jt=(()=>((Jt=Jt||{})[Jt.Default=0]="Default",Jt[Jt.Host=1]="Host",Jt[Jt.Self=2]="Self",Jt[Jt.SkipSelf=4]="SkipSelf",Jt[Jt.Optional=8]="Optional",Jt))();let Yn;function kn(o){const a=Yn;return Yn=o,a}function Ti(o,a,u){const f=Kt(o);return f&&"root"==f.providedIn?void 0===f.value?f.value=f.factory():f.value:u&Jt.Optional?null:void 0!==a?a:void je(pe(o),"Injector")}function Zi(o){return{toString:o}.toString()}var Ai=(()=>((Ai=Ai||{})[Ai.OnPush=0]="OnPush",Ai[Ai.Default=1]="Default",Ai))(),Pn=(()=>{return(o=Pn||(Pn={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Pn;var o})();const Tn="undefined"!=typeof globalThis&&globalThis,gn="undefined"!=typeof window&&window,Sr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,sn=Tn||"undefined"!=typeof global&&global||gn||Sr,ui={},yn=[],Qn=Ze({\u0275cmp:Ze}),Bn=Ze({\u0275dir:Ze}),Yi=Ze({\u0275pipe:Ze}),Ut=Ze({\u0275mod:Ze}),bt=Ze({\u0275fac:Ze}),nn=Ze({__NG_ELEMENT_ID__:Ze});let fn=0;function dn(o){return Zi(()=>{const u={},f={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Ai.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||yn,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Pn.Emulated,id:"c",styles:o.styles||yn,_:null,setInput:null,schemas:o.schemas||null,tView:null},m=o.directives,b=o.features,D=o.pipes;return f.id+=fn++,f.inputs=X(o.inputs,u),f.outputs=X(o.outputs),b&&b.forEach(x=>x(f)),f.directiveDefs=m?()=>("function"==typeof m?m():m).map(xe):null,f.pipeDefs=D?()=>("function"==typeof D?D():D).map(we):null,f})}function xe(o){return Me(o)||function et(o){return o[Bn]||null}(o)}function we(o){return function Zt(o){return o[Yi]||null}(o)}const Ve={};function Ce(o){return Zi(()=>{const a={type:o.type,bootstrap:o.bootstrap||yn,declarations:o.declarations||yn,imports:o.imports||yn,exports:o.exports||yn,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(Ve[o.id]=o.type),a})}function X(o,a){if(null==o)return ui;const u={};for(const f in o)if(o.hasOwnProperty(f)){let m=o[f],b=m;Array.isArray(m)&&(b=m[1],m=m[0]),u[m]=f,a&&(a[m]=b)}return u}const ue=dn;function ce(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function Me(o){return o[Qn]||null}function Yt(o,a){const u=o[Ut]||null;if(!u&&!0===a)throw new Error(`Type ${pe(o)} does not have '\u0275mod' property.`);return u}function mn(o){return Array.isArray(o)&&"object"==typeof o[1]}function ei(o){return Array.isArray(o)&&!0===o[1]}function dr(o){return 0!=(8&o.flags)}function Ri(o){return 2==(2&o.flags)}function Di(o){return 1==(1&o.flags)}function yr(o){return null!==o.template}function _s(o){return 0!=(512&o[2])}function Fs(o,a){return o.hasOwnProperty(bt)?o[bt]:null}class nr{constructor(a,u,f){this.previousValue=a,this.currentValue=u,this.firstChange=f}isFirstChange(){return this.firstChange}}function Hs(){return Gs}function Gs(o){return o.type.prototype.ngOnChanges&&(o.setInput=Is),bs}function bs(){const o=Js(this),a=null==o?void 0:o.current;if(a){const u=o.previous;if(u===ui)o.previous=a;else for(let f in a)u[f]=a[f];o.current=null,this.ngOnChanges(a)}}function Is(o,a,u,f){const m=Js(o)||function Ss(o,a){return o[As]=a}(o,{previous:ui,current:null}),b=m.current||(m.current={}),D=m.previous,x=this.declaredInputs[u],P=D[x];b[x]=new nr(P&&P.currentValue,a,D===ui),o[f]=a}Hs.ngInherit=!0;const As="__ngSimpleChanges__";function Js(o){return o[As]||null}let Te;function Se(o){Te=o}function Je(){return void 0!==Te?Te:"undefined"!=typeof document?document:void 0}function Bt(o){return!!o.listen}const _n={createRenderer:(o,a)=>Je()};function Fn(o){for(;Array.isArray(o);)o=o[0];return o}function $(o,a){return Fn(a[o])}function le(o,a){return Fn(a[o.index])}function ft(o,a){return o.data[a]}function kt(o,a){return o[a]}function cn(o,a){const u=a[o];return mn(u)?u:u[0]}function ri(o){return 4==(4&o[2])}function pi(o){return 128==(128&o[2])}function gi(o,a){return null==a?null:o[a]}function Qi(o){o[18]=0}function Hi(o,a){o[5]+=a;let u=o,f=o[3];for(;null!==f&&(1===a&&1===u[5]||-1===a&&0===u[5]);)f[5]+=a,u=f,f=f[3]}const vn={lFrame:ma(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function W(){return vn.bindingsEnabled}function Y(){return vn.lFrame.lView}function ct(){return vn.lFrame.tView}function Ln(o){return vn.lFrame.contextLView=o,o[8]}function oi(){let o=ts();for(;null!==o&&64===o.type;)o=o.parent;return o}function ts(){return vn.lFrame.currentTNode}function Pr(){const o=vn.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}function hs(o,a){const u=vn.lFrame;u.currentTNode=o,u.isParent=a}function Io(){return vn.lFrame.isParent}function Zo(){vn.lFrame.isParent=!1}function fa(){return vn.isInCheckNoChangesMode}function pa(o){vn.isInCheckNoChangesMode=o}function Ns(){const o=vn.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function Xs(){return vn.lFrame.bindingIndex}function Ao(){return vn.lFrame.bindingIndex++}function mo(o){const a=vn.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}function Qa(o){vn.lFrame.inI18n=o}function Bl(o,a){const u=vn.lFrame;u.bindingIndex=u.bindingRootIndex=o,Ma(a)}function Ma(o){vn.lFrame.currentDirectiveIndex=o}function So(o){const a=vn.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function ul(){return vn.lFrame.currentQueryIndex}function ga(o){vn.lFrame.currentQueryIndex=o}function xa(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function Oa(o,a,u){if(u&Jt.SkipSelf){let m=a,b=o;for(;!(m=m.parent,null!==m||u&Jt.Host||(m=xa(b),null===m||(b=b[15],10&m.type))););if(null===m)return!1;a=m,o=b}const f=vn.lFrame=hl();return f.currentTNode=a,f.lView=o,!0}function dl(o){const a=hl(),u=o[1];vn.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function hl(){const o=vn.lFrame,a=null===o?null:o.child;return null===a?ma(o):a}function ma(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function _a(){const o=vn.lFrame;return vn.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Zs=_a;function Ra(){const o=_a();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Ls(){return vn.lFrame.selectedIndex}function Wo(o){vn.lFrame.selectedIndex=o}function Nr(){const o=vn.lFrame;return ft(o.tView,o.selectedIndex)}function na(o,a){for(let u=a.directiveStart,f=a.directiveEnd;u<f;u++){const b=o.data[u].type.prototype,{ngAfterContentInit:D,ngAfterContentChecked:x,ngAfterViewInit:P,ngAfterViewChecked:Q,ngOnDestroy:oe}=b;D&&(o.contentHooks||(o.contentHooks=[])).push(-u,D),x&&((o.contentHooks||(o.contentHooks=[])).push(u,x),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,x)),P&&(o.viewHooks||(o.viewHooks=[])).push(-u,P),Q&&((o.viewHooks||(o.viewHooks=[])).push(u,Q),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,Q)),null!=oe&&(o.destroyHooks||(o.destroyHooks=[])).push(u,oe)}}function br(o,a,u){Ja(o,a,3,u)}function eo(o,a,u,f){(3&o[2])===u&&Ja(o,a,u,f)}function Ws(o,a){let u=o[2];(3&u)===a&&(u&=2047,u+=1,o[2]=u)}function Ja(o,a,u,f){const b=null!=f?f:-1,D=a.length-1;let x=0;for(let P=void 0!==f?65535&o[18]:0;P<D;P++)if("number"==typeof a[P+1]){if(x=a[P],null!=f&&x>=f)break}else a[P]<0&&(o[18]+=65536),(x<b||-1==b)&&(xu(o,u,a,P),o[18]=(4294901760&o[18])+P+2),P++}function xu(o,a,u,f){const m=u[f]<0,b=u[f+1],x=o[m?-u[f]:u[f]];if(m){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{b.call(x)}finally{}}}else try{b.call(x)}finally{}}class Mi{constructor(a,u,f){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=f}}function is(o,a,u){const f=Bt(o);let m=0;for(;m<u.length;){const b=u[m];if("number"==typeof b){if(0!==b)break;m++;const D=u[m++],x=u[m++],P=u[m++];f?o.setAttribute(a,x,P,D):a.setAttributeNS(D,x,P)}else{const D=b,x=u[++m];Gc(D)?f&&o.setProperty(a,D,x):f?o.setAttribute(a,D,x):a.setAttribute(D,x),m++}}return m}function dc(o){return 3===o||4===o||6===o}function Gc(o){return 64===o.charCodeAt(0)}function qs(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let f=0;f<a.length;f++){const m=a[f];"number"==typeof m?u=m:0===u||Zc(o,u,m,null,-1===u||2===u?a[++f]:null)}}return o}function Zc(o,a,u,f,m){let b=0,D=o.length;if(-1===a)D=-1;else for(;b<o.length;){const x=o[b++];if("number"==typeof x){if(x===a){D=-1;break}if(x>a){D=b-1;break}}}for(;b<o.length;){const x=o[b];if("number"==typeof x)break;if(x===u){if(null===f)return void(null!==m&&(o[b+1]=m));if(f===o[b+1])return void(o[b+2]=m)}b++,null!==f&&b++,null!==m&&b++}-1!==D&&(o.splice(D,0,a),b=D+1),o.splice(b++,0,u),null!==f&&o.splice(b++,0,f),null!==m&&o.splice(b++,0,m)}function _d(o){return-1!==o}function fl(o){return 32767&o}function ka(o,a){let u=function Wc(o){return o>>16}(o),f=a;for(;u>0;)f=f[15],u--;return f}let Ou=!0;function jl(o){const a=Ou;return Ou=o,a}let k=0;function I(o,a){const u=q(o,a);if(-1!==u)return u;const f=a[1];f.firstCreatePass&&(o.injectorIndex=a.length,U(f.data,o),U(a,null),U(f.blueprint,null));const m=he(o,a),b=o.injectorIndex;if(_d(m)){const D=fl(m),x=ka(m,a),P=x[1].data;for(let Q=0;Q<8;Q++)a[b+Q]=x[D+Q]|P[D+Q]}return a[b+8]=m,b}function U(o,a){o.push(0,0,0,0,0,0,0,0,a)}function q(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function he(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,f=null,m=a;for(;null!==m;){const b=m[1],D=b.type;if(f=2===D?b.declTNode:1===D?m[6]:null,null===f)return-1;if(u++,m=m[15],-1!==f.injectorIndex)return f.injectorIndex|u<<16}return-1}function ye(o,a,u){!function M(o,a,u){let f;"string"==typeof u?f=u.charCodeAt(0)||0:u.hasOwnProperty(nn)&&(f=u[nn]),null==f&&(f=u[nn]=k++);const m=255&f;a.data[o+(m>>5)]|=1<<m}(o,a,u)}function xt(o,a,u){if(u&Jt.Optional)return o;je(a,"NodeInjector")}function Sn(o,a,u,f){if(u&Jt.Optional&&void 0===f&&(f=null),0==(u&(Jt.Self|Jt.Host))){const m=o[9],b=kn(void 0);try{return m?m.get(a,f,u&Jt.Optional):Ti(a,f,u&Jt.Optional)}finally{kn(b)}}return xt(f,a,u)}function Ii(o,a,u,f=Jt.Default,m){if(null!==o){const b=function _o(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(nn)?o[nn]:void 0;return"number"==typeof a?a>=0?255&a:ir:a}(u);if("function"==typeof b){if(!Oa(a,o,f))return f&Jt.Host?xt(m,u,f):Sn(a,u,f,m);try{const D=b(f);if(null!=D||f&Jt.Optional)return D;je(u)}finally{Zs()}}else if("number"==typeof b){let D=null,x=q(o,a),P=-1,Q=f&Jt.Host?a[16][6]:null;for((-1===x||f&Jt.SkipSelf)&&(P=-1===x?he(o,a):a[x+8],-1!==P&&ya(f,!1)?(D=a[1],x=fl(P),a=ka(P,a)):x=-1);-1!==x;){const oe=a[1];if(fr(b,x,oe.data)){const ve=Cr(x,a,u,D,f,Q);if(ve!==ti)return ve}P=a[x+8],-1!==P&&ya(f,a[1].data[x+8]===Q)&&fr(b,x,a)?(D=oe,x=fl(P),a=ka(P,a)):x=-1}}}return Sn(a,u,f,m)}const ti={};function ir(){return new Bs(oi(),Y())}function Cr(o,a,u,f,m,b){const D=a[1],x=D.data[o+8],oe=zs(x,D,u,null==f?Ri(x)&&Ou:f!=D&&0!=(3&x.type),m&Jt.Host&&b===x);return null!==oe?Fr(a,D,oe,x):ti}function zs(o,a,u,f,m){const b=o.providerIndexes,D=a.data,x=1048575&b,P=o.directiveStart,oe=b>>20,$e=m?x+oe:o.directiveEnd;for(let lt=f?x:x+oe;lt<$e;lt++){const Lt=D[lt];if(lt<P&&u===Lt||lt>=P&&Lt.type===u)return lt}if(m){const lt=D[P];if(lt&&yr(lt)&&lt.type===u)return P}return null}function Fr(o,a,u,f){let m=o[u];const b=a.data;if(function No(o){return o instanceof Mi}(m)){const D=m;D.resolving&&function Ue(o,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new mt(-200,`Circular dependency in DI detected for ${o}${u}`)}(ze(b[u]));const x=jl(D.canSeeViewProviders);D.resolving=!0;const P=D.injectImpl?kn(D.injectImpl):null;Oa(o,f,Jt.Default);try{m=o[u]=D.factory(void 0,b,o,f),a.firstCreatePass&&u>=f.directiveStart&&function md(o,a,u){const{ngOnChanges:f,ngOnInit:m,ngDoCheck:b}=a.type.prototype;if(f){const D=Gs(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,D),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,D)}m&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,m),b&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,b),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,b))}(u,b[u],a)}finally{null!==P&&kn(P),jl(x),D.resolving=!1,Zs()}}return m}function fr(o,a,u){return!!(u[a+(o>>5)]&1<<o)}function ya(o,a){return!(o&Jt.Self||o&Jt.Host&&a)}class Bs{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,f){return Ii(this._tNode,this._lView,a,f,u)}}function xo(o){return Zi(()=>{const a=o.prototype.constructor,u=a[bt]||Oo(a),f=Object.prototype;let m=Object.getPrototypeOf(o.prototype).constructor;for(;m&&m!==f;){const b=m[bt]||Oo(m);if(b&&b!==u)return b;m=Object.getPrototypeOf(m)}return b=>new b})}function Oo(o){return _t(o)?()=>{const a=Oo(Fe(o));return a&&a()}:Fs(o)}function rs(o){return function _e(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const f=u.length;let m=0;for(;m<f;){const b=u[m];if(dc(b))break;if(0===b)m+=2;else if("number"==typeof b)for(m++;m<f&&"string"==typeof u[m];)m++;else{if(b===a)return u[m+1];m+=2}}}return null}(oi(),o)}const qo="__parameters__";function yo(o,a,u){return Zi(()=>{const f=function Pa(o){return function(...u){if(o){const f=o(...u);for(const m in f)this[m]=f[m]}}}(a);function m(...b){if(this instanceof m)return f.apply(this,b),this;const D=new m(...b);return x.annotation=D,x;function x(P,Q,oe){const ve=P.hasOwnProperty(qo)?P[qo]:Object.defineProperty(P,qo,{value:[]})[qo];for(;ve.length<=oe;)ve.push(null);return(ve[oe]=ve[oe]||[]).push(D),P}}return u&&(m.prototype=Object.create(u.prototype)),m.prototype.ngMetadataName=o,m.annotationCls=m,m})}class Ui{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Ot({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const qc=new Ui("AnalyzeForEntryComponents");function bo(o,a){void 0===a&&(a=o);for(let u=0;u<o.length;u++){let f=o[u];Array.isArray(f)?(a===o&&(a=o.slice(0,u)),bo(f,a)):a!==o&&a.push(f)}return a}function Lr(o,a){o.forEach(u=>Array.isArray(u)?Lr(u,a):a(u))}function ph(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function zo(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function Br(o,a){const u=[];for(let f=0;f<o;f++)u.push(a);return u}function Es(o,a,u){let f=va(o,a);return f>=0?o[1|f]=u:(f=~f,function gh(o,a,u,f){let m=o.length;if(m==a)o.push(u,f);else if(1===m)o.push(f,o[0]),o[0]=u;else{for(m--,o.push(o[m-1],o[m]);m>a;)o[m]=o[m-2],m--;o[a]=u,o[a+1]=f}}(o,f,a,u)),f}function uo(o,a){const u=va(o,a);if(u>=0)return o[1|u]}function va(o,a){return function ba(o,a,u){let f=0,m=o.length>>u;for(;m!==f;){const b=f+(m-f>>1),D=o[b<<u];if(a===D)return b<<u;D>a?m=b:f=b+1}return~(m<<u)}(o,a,1)}const Ta={},el="__NG_DI_FLAG__",Va="ngTempTokenPath",Hl=/\n/gm,Jc="__source",Gl=Ze({provide:String,useValue:Ze});let _l;function mh(o){const a=_l;return _l=o,a}function ss(o,a=Jt.Default){if(void 0===_l)throw new mt(203,"");return null===_l?Ti(o,void 0,a):_l.get(o,a&Jt.Optional?null:void 0,a)}function Cs(o,a=Jt.Default){return(function Ht(){return Yn}()||ss)(Fe(o),a)}const Tf=Cs;function L(o){const a=[];for(let u=0;u<o.length;u++){const f=Fe(o[u]);if(Array.isArray(f)){if(0===f.length)throw new mt(900,"");let m,b=Jt.Default;for(let D=0;D<f.length;D++){const x=f[D],P=ae(x);"number"==typeof P?-1===P?m=x.token:b|=P:m=x}a.push(Cs(m,b))}else a.push(Cs(f))}return a}function H(o,a){return o[el]=a,o.prototype[el]=a,o}function ae(o){return o[el]}const yt=H(yo("Inject",o=>({token:o})),-1),Gt=H(yo("Optional"),8),On=H(yo("SkipSelf"),4);let mc,nl;function Wl(o){var a;return(null===(a=function _c(){if(void 0===mc&&(mc=null,sn.trustedTypes))try{mc=sn.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return mc}())||void 0===a?void 0:a.createHTML(o))||o}function nu(o){var a;return(null===(a=function tu(){if(void 0===nl&&(nl=null,sn.trustedTypes))try{nl=sn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return nl}())||void 0===a?void 0:a.createHTML(o))||o}class ql{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class wf extends ql{getTypeName(){return"HTML"}}class _h extends ql{getTypeName(){return"Style"}}class yh extends ql{getTypeName(){return"Script"}}class Df extends ql{getTypeName(){return"URL"}}class ju extends ql{getTypeName(){return"ResourceURL"}}function Ua(o){return o instanceof ql?o.changingThisBreaksApplicationSecurity:o}function iu(o,a){const u=bd(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===a}function bd(o){return o instanceof ql&&o.getTypeName()||null}function yc(o){return new wf(o)}function bl(o){return new _h(o)}function Xp(o){return new yh(o)}function vc(o){return new Df(o)}function If(o){return new ju(o)}function ru(o){const a=new eg(o);return function Ed(){try{return!!(new window.DOMParser).parseFromString(Wl(""),"text/html")}catch(o){return!1}}()?new $u(a):a}class $u{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(Wl(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class eg{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const f=this.inertDocument.createElement("body");u.appendChild(f)}}getInertBodyElement(a){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Wl(a),u;const f=this.inertDocument.createElement("body");return f.innerHTML=Wl(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(f),f}stripCustomNsAttrs(a){const u=a.attributes;for(let m=u.length-1;0<m;m--){const D=u.item(m).name;("xmlns:ns1"===D||0===D.indexOf("ns1:"))&&a.removeAttribute(D)}let f=a.firstChild;for(;f;)f.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(f),f=f.nextSibling}}const n_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,fs=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function bc(o){return(o=String(o)).match(n_)||o.match(fs)?o:"unsafe:"+o}function Cd(o){return(o=String(o)).split(",").map(a=>bc(a.trim())).join(", ")}function il(o){const a={};for(const u of o.split(","))a[u]=!0;return a}function su(...o){const a={};for(const u of o)for(const f in u)u.hasOwnProperty(f)&&(a[f]=!0);return a}const Hu=il("area,br,col,hr,img,wbr"),tg=il("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Af=il("rp,rt"),vh=su(Hu,su(tg,il("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),su(Af,il("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),su(Af,tg)),bh=il("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Cc=il("srcset"),Vs=su(bh,Cc,il("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),il("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),rr=il("script,style,template");class rg{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,f=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?f=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,f&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let m=this.checkClobberedElement(u,u.nextSibling);if(m){u=m;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!vh.hasOwnProperty(u))return this.sanitizedSomething=!0,!rr.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const f=a.attributes;for(let m=0;m<f.length;m++){const b=f.item(m),D=b.name,x=D.toLowerCase();if(!Vs.hasOwnProperty(x)){this.sanitizedSomething=!0;continue}let P=b.value;bh[x]&&(P=bc(P)),Cc[x]&&(P=Cd(P)),this.buf.push(" ",D,'="',ou(P),'"')}return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();vh.hasOwnProperty(u)&&!Hu.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push(ou(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const oa=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ir=/([^\#-~ |!])/g;function ou(o){return o.replace(/&/g,"&amp;").replace(oa,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Ir,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ro;function au(o,a){let u=null;try{ro=ro||ru(o);let f=a?String(a):"";u=ro.getInertBodyElement(f);let m=5,b=f;do{if(0===m)throw new Error("Failed to sanitize html because the input is unstable");m--,f=b,b=u.innerHTML,u=ro.getInertBodyElement(f)}while(f!==b);return Wl((new rg).sanitizeChildren(zl(u)||u))}finally{if(u){const f=zl(u)||u;for(;f.firstChild;)f.removeChild(f.firstChild)}}}function zl(o){return"content"in o&&function Nf(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var Tr=(()=>((Tr=Tr||{})[Tr.NONE=0]="NONE",Tr[Tr.HTML=1]="HTML",Tr[Tr.STYLE=2]="STYLE",Tr[Tr.SCRIPT=3]="SCRIPT",Tr[Tr.URL=4]="URL",Tr[Tr.RESOURCE_URL=5]="RESOURCE_URL",Tr))();function Mf(o){const a=ie();return a?nu(a.sanitize(Tr.HTML,o)||""):iu(o,"HTML")?nu(Ua(o)):au(Je(),qe(o))}function lu(o){const a=ie();return a?a.sanitize(Tr.URL,o)||"":iu(o,"URL")?Ua(o):bc(qe(o))}function ie(){const o=Y();return o&&o[12]}const an="__ngContext__";function Gn(o,a){o[an]=a}function Gr(o){const a=function pr(o){return o[an]||null}(o);return a?Array.isArray(a)?a:a.lView:null}function wc(o){return o.ngOriginalError}function ag(o,...a){o.error(...a)}class Ad{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a),f=function Of(o){return o&&o.ngErrorLogger||ag}(a);f(this._console,"ERROR",a),u&&f(this._console,"ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&wc(a);for(;u&&wc(u);)u=wc(u);return u||null}}const Mv=/^>|^->|<!--|-->|--!>|<!-$/g,Ch=/(<|>)/;const qu=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(sn))();function Cl(o){return o instanceof Function?o():o}var Tl=(()=>((Tl=Tl||{})[Tl.Important=1]="Important",Tl[Tl.DashCase=2]="DashCase",Tl))();let zu;function xd(o,a){return zu(o,a)}function Th(o){const a=o[3];return ei(a)?a[3]:a}function o_(o){return dg(o[13])}function a_(o){return dg(o[4])}function dg(o){for(;null!==o&&!ei(o);)o=o[4];return o}function Ku(o,a,u,f,m){if(null!=f){let b,D=!1;ei(f)?b=f:mn(f)&&(D=!0,f=f[0]);const x=Fn(f);0===o&&null!==u?null==m?Vf(a,u,x):Qu(a,u,x,m||null,!0):1===o&&null!==u?Qu(a,u,x,m||null,!0):2===o?Ih(a,x,D):3===o&&a.destroyNode(x),null!=b&&function NE(o,a,u,f,m){const b=u[7];b!==Fn(u)&&Ku(a,o,f,b,m);for(let x=10;x<u.length;x++){const P=u[x];jf(P[1],P,o,a,f,b)}}(a,o,b,u,m)}}function Pf(o,a){return Bt(o)?o.createText(a):o.createTextNode(a)}function hg(o,a,u){Bt(o)?o.setValue(a,u):a.textContent=u}function l_(o,a){return o.createComment(function Rf(o){return o.replace(Mv,a=>a.replace(Ch,"\u200b$1\u200b"))}(a))}function Ff(o,a,u){return Bt(o)?o.createElement(a,u):null===u?o.createElement(a):o.createElementNS(u,a)}function Lf(o,a){const u=o[9],f=u.indexOf(a),m=a[3];1024&a[2]&&(a[2]&=-1025,Hi(m,-1)),u.splice(f,1)}function oo(o,a){if(o.length<=10)return;const u=10+a,f=o[u];if(f){const m=f[17];null!==m&&m!==o&&Lf(m,f),a>0&&(o[u-1][4]=f[4]);const b=zo(o,10+a);!function c_(o,a){jf(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(f[1],f);const D=b[19];null!==D&&D.detachView(b[1]),f[3]=null,f[4]=null,f[2]&=-129}return f}function Bf(o,a){if(!(256&a[2])){const u=a[11];Bt(u)&&u.destroyNode&&jf(o,a,u,3,null,null),function Fv(o){let a=o[13];if(!a)return Od(o[1],o);for(;a;){let u=null;if(mn(a))u=a[13];else{const f=a[10];f&&(u=f)}if(!u){for(;a&&!a[4]&&a!==o;)mn(a)&&Od(a[1],a),a=a[3];null===a&&(a=o),mn(a)&&Od(a[1],a),u=a&&a[4]}a=u}}(a)}}function Od(o,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function Yu(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let f=0;f<u.length;f+=2){const m=a[u[f]];if(!(m instanceof Mi)){const b=u[f+1];if(Array.isArray(b))for(let D=0;D<b.length;D+=2){const x=m[b[D]],P=b[D+1];try{P.call(x)}finally{}}else try{b.call(m)}finally{}}}}(o,a),function gg(o,a){const u=o.cleanup,f=a[7];let m=-1;if(null!==u)for(let b=0;b<u.length-1;b+=2)if("string"==typeof u[b]){const D=u[b+1],x="function"==typeof D?D(a):Fn(a[D]),P=f[m=u[b+2]],Q=u[b+3];"boolean"==typeof Q?x.removeEventListener(u[b],P,Q):Q>=0?f[m=Q]():f[m=-Q].unsubscribe(),b+=2}else{const D=f[m=u[b+1]];u[b].call(D)}if(null!==f){for(let b=m+1;b<f.length;b++)f[b]();a[7]=null}}(o,a),1===a[1].type&&Bt(a[11])&&a[11].destroy();const u=a[17];if(null!==u&&ei(a[3])){u!==a[3]&&Lf(u,a);const f=a[19];null!==f&&f.detachView(o)}}}function u_(o,a,u){return Bv(o,a.parent,u)}function Bv(o,a,u){let f=a;for(;null!==f&&40&f.type;)f=(a=f).parent;if(null===f)return u[0];if(2&f.flags){const m=o.data[f.directiveStart].encapsulation;if(m===Pn.None||m===Pn.Emulated)return null}return le(f,u)}function Qu(o,a,u,f,m){Bt(o)?o.insertBefore(a,u,f,m):a.insertBefore(u,f,m)}function Vf(o,a,u){Bt(o)?o.appendChild(a,u):a.appendChild(u)}function Dc(o,a,u,f,m){null!==f?Qu(o,a,u,f,m):Vf(o,a,u)}function Ic(o,a){return Bt(o)?o.parentNode(a):a.parentNode}function d_(o,a,u){return wh(o,a,u)}function mg(o,a,u){return 40&o.type?le(o,u):null}let _g,wh=mg;function h_(o,a){wh=o,_g=a}function yg(o,a,u,f){const m=u_(o,f,a),b=a[11],x=d_(f.parent||a[6],f,a);if(null!=m)if(Array.isArray(u))for(let P=0;P<u.length;P++)Dc(b,m,u[P],x,!1);else Dc(b,m,u,x,!1);void 0!==_g&&_g(b,f,a,u,m)}function Uf(o,a){if(null!==a){const u=a.type;if(3&u)return le(a,o);if(4&u)return Dh(-1,o[a.index]);if(8&u){const f=a.child;if(null!==f)return Uf(o,f);{const m=o[a.index];return ei(m)?Dh(-1,m):Fn(m)}}if(32&u)return xd(a,o)()||Fn(o[a.index]);{const f=vg(o,a);return null!==f?Array.isArray(f)?f[0]:Uf(Th(o[16]),f):Uf(o,a.next)}}return null}function vg(o,a){return null!==a?o[16][6].projection[a.projection]:null}function Dh(o,a){const u=10+o+1;if(u<a.length){const f=a[u],m=f[1].firstChild;if(null!==m)return Uf(f,m)}return a[7]}function Ih(o,a,u){const f=Ic(o,a);f&&function Rd(o,a,u,f){Bt(o)?o.removeChild(a,u,f):a.removeChild(u)}(o,f,a,u)}function Ac(o,a,u,f,m,b,D){for(;null!=u;){const x=f[u.index],P=u.type;if(D&&0===a&&(x&&Gn(Fn(x),f),u.flags|=4),64!=(64&u.flags))if(8&P)Ac(o,a,u.child,f,m,b,!1),Ku(a,o,m,x,b);else if(32&P){const Q=xd(u,f);let oe;for(;oe=Q();)Ku(a,o,m,oe,b);Ku(a,o,m,x,b)}else 16&P?bg(o,a,f,u,m,b):Ku(a,o,m,x,b);u=D?u.projectionNext:u.next}}function jf(o,a,u,f,m,b){Ac(u,f,o.firstChild,a,m,b,!1)}function bg(o,a,u,f,m,b){const D=u[16],P=D[6].projection[f.projection];if(Array.isArray(P))for(let Q=0;Q<P.length;Q++)Ku(a,o,m,P[Q],b);else Ac(o,a,P,D[3],m,b,!0)}function Ah(o,a,u){Bt(o)?o.setAttribute(a,"style",u):a.style.cssText=u}function cu(o,a,u){Bt(o)?""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u):a.className=u}function Ju(o,a,u){let f=o.length;for(;;){const m=o.indexOf(a,u);if(-1===m)return m;if(0===m||o.charCodeAt(m-1)<=32){const b=a.length;if(m+b===f||o.charCodeAt(m+b)<=32)return m}u=m+1}}const Uv="ng-template";function xE(o,a,u){let f=0;for(;f<o.length;){let m=o[f++];if(u&&"class"===m){if(m=o[f],-1!==Ju(m.toLowerCase(),a,0))return!0}else if(1===m){for(;f<o.length&&"string"==typeof(m=o[f++]);)if(m.toLowerCase()===a)return!0;return!1}}return!1}function Eg(o){return 4===o.type&&o.value!==Uv}function Cg(o,a,u){return a===(4!==o.type||u?o.value:Uv)}function p_(o,a,u){let f=4;const m=o.attrs||[],b=function g_(o){for(let a=0;a<o.length;a++)if(dc(o[a]))return a;return o.length}(m);let D=!1;for(let x=0;x<a.length;x++){const P=a[x];if("number"!=typeof P){if(!D)if(4&f){if(f=2|1&f,""!==P&&!Cg(o,P,u)||""===P&&1===a.length){if(wl(f))return!1;D=!0}}else{const Q=8&f?P:a[++x];if(8&f&&null!==o.attrs){if(!xE(o.attrs,Q,u)){if(wl(f))return!1;D=!0}continue}const ve=$f(8&f?"class":P,m,Eg(o),u);if(-1===ve){if(wl(f))return!1;D=!0;continue}if(""!==Q){let $e;$e=ve>b?"":m[ve+1].toLowerCase();const lt=8&f?$e:null;if(lt&&-1!==Ju(lt,Q,0)||2&f&&Q!==$e){if(wl(f))return!1;D=!0}}}}else{if(!D&&!wl(f)&&!wl(P))return!1;if(D&&wl(P))continue;D=!1,f=P|1&f}}return wl(f)||D}function wl(o){return 0==(1&o)}function $f(o,a,u,f){if(null===a)return-1;let m=0;if(f||!u){let b=!1;for(;m<a.length;){const D=a[m];if(D===o)return m;if(3===D||6===D)b=!0;else{if(1===D||2===D){let x=a[++m];for(;"string"==typeof x;)x=a[++m];continue}if(4===D)break;if(0===D){m+=4;continue}}m+=b?1:2}return-1}return function jv(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const f=o[u];if("number"==typeof f)return-1;if(f===a)return u;u++}return-1}(a,o)}function Hf(o,a,u=!1){for(let f=0;f<a.length;f++)if(p_(o,a[f],u))return!0;return!1}function ja(o,a){e:for(let u=0;u<a.length;u++){const f=a[u];if(o.length===f.length){for(let m=0;m<o.length;m++)if(o[m]!==f[m])continue e;return!0}}return!1}function m_(o,a){return o?":not("+a.trim()+")":a}function Tg(o){let a=o[0],u=1,f=2,m="",b=!1;for(;u<o.length;){let D=o[u];if("string"==typeof D)if(2&f){const x=o[++u];m+="["+D+(x.length>0?'="'+x+'"':"")+"]"}else 8&f?m+="."+D:4&f&&(m+=" "+D);else""!==m&&!wl(D)&&(a+=m_(b,m),m=""),f=D,b=b||!wl(f);u++}return""!==m&&(a+=m_(b,m)),a}const wi={};function Pd(o){__(ct(),Y(),Ls()+o,fa())}function __(o,a,u,f){if(!f)if(3==(3&a[2])){const b=o.preOrderCheckHooks;null!==b&&br(a,b,u)}else{const b=o.preOrderHooks;null!==b&&eo(a,b,0,u)}Wo(u)}function wg(o,a){return o<<17|a<<2}function la(o){return o>>17&32767}function Zf(o){return 2|o}function Nc(o){return(131068&o)>>2}function Dg(o,a){return-131069&o|a<<2}function Ig(o){return 1|o}function Mh(o,a){const u=o.contentQueries;if(null!==u)for(let f=0;f<u.length;f+=2){const m=u[f],b=u[f+1];if(-1!==b){const D=o.data[b];ga(m),D.contentQueries(2,a[b],b)}}}function Bd(o,a,u,f,m,b,D,x,P,Q){const oe=a.blueprint.slice();return oe[0]=m,oe[2]=140|f,Qi(oe),oe[3]=oe[15]=o,oe[8]=u,oe[10]=D||o&&o[10],oe[11]=x||o&&o[11],oe[12]=P||o&&o[12]||null,oe[9]=Q||o&&o[9]||null,oe[6]=b,oe[16]=2==a.type?o[16]:oe,oe}function Vd(o,a,u,f,m){let b=o.data[a];if(null===b)b=xh(o,a,u,f,m),function cl(){return vn.lFrame.inI18n}()&&(b.flags|=64);else if(64&b.type){b.type=u,b.value=f,b.attrs=m;const D=Pr();b.injectorIndex=null===D?-1:D.injectorIndex}return hs(b,!0),b}function xh(o,a,u,f,m){const b=ts(),D=Io(),P=o.data[a]=function kE(o,a,u,f,m,b){return{type:u,index:f,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:m,attrs:b,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,D?b:b&&b.parent,u,a,f,m);return null===o.firstChild&&(o.firstChild=P),null!==b&&(D?null==b.child&&null!==P.parent&&(b.child=P):null===b.next&&(b.next=P)),P}function Ud(o,a,u,f){if(0===u)return-1;const m=a.length;for(let b=0;b<u;b++)a.push(f),o.blueprint.push(f),o.data.push(null);return m}function jd(o,a,u){dl(a);try{const f=o.viewQuery;null!==f&&W_(1,f,u);const m=o.template;null!==m&&Rg(o,a,m,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&Mh(o,a),o.staticViewQueries&&W_(2,o.viewQuery,u);const b=o.components;null!==b&&function S_(o,a){for(let u=0;u<a.length;u++)Fh(o,a[u])}(a,b)}catch(f){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),f}finally{a[2]&=-5,Ra()}}function $d(o,a,u,f){const m=a[2];if(256==(256&m))return;dl(a);const b=fa();try{Qi(a),function lc(o){return vn.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&Rg(o,a,u,2,f);const D=3==(3&m);if(!b)if(D){const Q=o.preOrderCheckHooks;null!==Q&&br(a,Q,null)}else{const Q=o.preOrderHooks;null!==Q&&eo(a,Q,0,null),Ws(a,0)}if(function Ug(o){for(let a=o_(o);null!==a;a=a_(a)){if(!a[2])continue;const u=a[9];for(let f=0;f<u.length;f++){const m=u[f],b=m[3];0==(1024&m[2])&&Hi(b,1),m[2]|=1024}}}(a),function U_(o){for(let a=o_(o);null!==a;a=a_(a))for(let u=10;u<a.length;u++){const f=a[u],m=f[1];pi(f)&&$d(m,f,m.template,f[8])}}(a),null!==o.contentQueries&&Mh(o,a),!b)if(D){const Q=o.contentCheckHooks;null!==Q&&br(a,Q)}else{const Q=o.contentHooks;null!==Q&&eo(a,Q,1),Ws(a,1)}!function Og(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let f=0;f<u.length;f++){const m=u[f];if(m<0)Wo(~m);else{const b=m,D=u[++f],x=u[++f];Bl(D,b),x(2,a[b])}}}finally{Wo(-1)}}(o,a);const x=o.components;null!==x&&function A_(o,a){for(let u=0;u<a.length;u++)j_(o,a[u])}(a,x);const P=o.viewQuery;if(null!==P&&W_(2,P,f),!b)if(D){const Q=o.viewCheckHooks;null!==Q&&br(a,Q)}else{const Q=o.viewHooks;null!==Q&&eo(a,Q,2),Ws(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),b||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,Hi(a[3],-1))}finally{Ra()}}function Jv(o,a,u,f){const m=a[10],b=!fa(),D=ri(a);try{b&&!D&&m.begin&&m.begin(),D&&jd(o,a,f),$d(o,a,u,f)}finally{b&&!D&&m.end&&m.end()}}function Rg(o,a,u,f,m){const b=Ls(),D=2&f;try{Wo(-1),D&&a.length>20&&__(o,a,20,fa()),u(f,m)}finally{Wo(b)}}function Xf(o,a,u){if(dr(a)){const m=a.directiveEnd;for(let b=a.directiveStart;b<m;b++){const D=o.data[b];D.contentQueries&&D.contentQueries(1,u[b],b)}}}function Hd(o,a,u){!W()||(function P_(o,a,u,f){const m=u.directiveStart,b=u.directiveEnd;o.firstCreatePass||I(u,a),Gn(f,a);const D=u.initialInputs;for(let x=m;x<b;x++){const P=o.data[x],Q=yr(P);Q&&fu(a,u,P);const oe=Fr(a,o,x,u);Gn(oe,a),null!==D&&B_(0,x-m,oe,P,0,D),Q&&(cn(u.index,a)[8]=oe)}}(o,a,u,le(u,a)),128==(128&u.flags)&&function kh(o,a,u){const f=u.directiveStart,m=u.directiveEnd,D=u.index,x=function ea(){return vn.lFrame.currentDirectiveIndex}();try{Wo(D);for(let P=f;P<m;P++){const Q=o.data[P],oe=a[P];Ma(P),(null!==Q.hostBindings||0!==Q.hostVars||null!==Q.hostAttrs)&&Fg(Q,oe)}}finally{Wo(-1),Ma(x)}}(o,a,u))}function Oh(o,a,u=le){const f=a.localNames;if(null!==f){let m=a.index+1;for(let b=0;b<f.length;b+=2){const D=f[b+1],x=-1===D?u(a,o):o[D];o[m++]=x}}}function kg(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=Rh(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function Rh(o,a,u,f,m,b,D,x,P,Q){const oe=20+f,ve=oe+m,$e=function N_(o,a){const u=[];for(let f=0;f<a;f++)u.push(f<o?null:wi);return u}(oe,ve),lt="function"==typeof Q?Q():Q;return $e[1]={type:o,blueprint:$e,template:u,queries:null,viewQuery:x,declTNode:a,data:$e.slice().fill(null,oe),bindingStartIndex:oe,expandoStartIndex:ve,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof b?b():b,pipeRegistry:"function"==typeof D?D():D,firstChild:null,schemas:P,consts:lt,incompleteFirstPass:!1}}function Xv(o,a,u,f){const m=Zg(a);null===u?m.push(f):(m.push(u),o.firstCreatePass&&q_(o).push(f,m.length-1))}function e0(o,a,u){for(let f in o)if(o.hasOwnProperty(f)){const m=o[f];(u=null===u?{}:u).hasOwnProperty(f)?u[f].push(a,m):u[f]=[a,m]}return u}function Yo(o,a,u,f,m,b,D,x){const P=le(a,u);let oe,Q=a.inputs;!x&&null!=Q&&(oe=Q[f])?(zg(o,u,oe,f,m),Ri(a)&&function O_(o,a){const u=cn(a,o);16&u[2]||(u[2]|=64)}(u,a.index)):3&a.type&&(f=function Pg(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(f),m=null!=D?D(m,a.value||"",f):m,Bt(b)?b.setProperty(P,f,m):Gc(f)||(P.setProperty?P.setProperty(f,m):P[f]=m))}function k_(o,a,u,f){let m=!1;if(W()){const b=function Lg(o,a,u){const f=o.directiveRegistry;let m=null;if(f)for(let b=0;b<f.length;b++){const D=f[b];Hf(u,D.selectors,!1)&&(m||(m=[]),ye(I(u,a),o,D.type),yr(D)?(Ph(o,u),m.unshift(D)):m.push(D))}return m}(o,a,u),D=null===f?null:{"":-1};if(null!==b){m=!0,Bg(u,o.data.length,b.length);for(let oe=0;oe<b.length;oe++){const ve=b[oe];ve.providersResolver&&ve.providersResolver(ve)}let x=!1,P=!1,Q=Ud(o,a,b.length,null);for(let oe=0;oe<b.length;oe++){const ve=b[oe];u.mergedAttrs=qs(u.mergedAttrs,ve.hostAttrs),Vg(o,u,a,Q,ve),o0(Q,ve,D),null!==ve.contentQueries&&(u.flags|=8),(null!==ve.hostBindings||null!==ve.hostAttrs||0!==ve.hostVars)&&(u.flags|=128);const $e=ve.type.prototype;!x&&($e.ngOnChanges||$e.ngOnInit||$e.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),x=!0),!P&&($e.ngOnChanges||$e.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),P=!0),Q++}!function t0(o,a){const f=a.directiveEnd,m=o.data,b=a.attrs,D=[];let x=null,P=null;for(let Q=a.directiveStart;Q<f;Q++){const oe=m[Q],ve=oe.inputs,$e=null===b||Eg(a)?null:PE(ve,b);D.push($e),x=e0(ve,Q,x),P=e0(oe.outputs,Q,P)}null!==x&&(x.hasOwnProperty("class")&&(a.flags|=16),x.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=D,a.inputs=x,a.outputs=P}(o,u)}D&&function F_(o,a,u){if(a){const f=o.localNames=[];for(let m=0;m<a.length;m+=2){const b=u[a[m+1]];if(null==b)throw new mt(-301,`Export of name '${a[m+1]}' not found!`);f.push(a[m],b)}}}(u,f,D)}return u.mergedAttrs=qs(u.mergedAttrs,u.attrs),m}function s0(o,a,u,f,m,b){const D=b.hostBindings;if(D){let x=o.hostBindingOpCodes;null===x&&(x=o.hostBindingOpCodes=[]);const P=~a.index;(function ep(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(x)!=P&&x.push(P),x.push(f,m,D)}}function Fg(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function Ph(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function o0(o,a,u){if(u){if(a.exportAs)for(let f=0;f<a.exportAs.length;f++)u[a.exportAs[f]]=o;yr(a)&&(u[""]=o)}}function Bg(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}function Vg(o,a,u,f,m){o.data[f]=m;const b=m.factory||(m.factory=Fs(m.type)),D=new Mi(b,yr(m),null);o.blueprint[f]=D,u[f]=D,s0(o,a,0,f,Ud(o,u,m.hostVars,wi),m)}function fu(o,a,u){const f=le(a,o),m=kg(u),b=o[10],D=$g(o,Bd(o,m,null,u.onPush?64:16,f,a,b,b.createRenderer(f,u),null,null));o[a.index]=D}function L_(o,a,u,f,m,b,D){if(null==b)Bt(o)?o.removeAttribute(a,m,u):a.removeAttribute(m);else{const x=null==D?qe(b):D(b,f||"",m);Bt(o)?o.setAttribute(a,m,x,u):u?a.setAttributeNS(u,m,x):a.setAttribute(m,x)}}function B_(o,a,u,f,m,b){const D=b[a];if(null!==D){const x=f.setInput;for(let P=0;P<D.length;){const Q=D[P++],oe=D[P++],ve=D[P++];null!==x?f.setInput(u,ve,Q,oe):u[oe]=ve}}}function PE(o,a){let u=null,f=0;for(;f<a.length;){const m=a[f];if(0!==m)if(5!==m){if("number"==typeof m)break;o.hasOwnProperty(m)&&(null===u&&(u=[]),u.push(m,o[m],a[f+1])),f+=2}else f+=2;else f+=4}return u}function V_(o,a,u,f){return new Array(o,!0,!1,a,null,0,f,u,null,null)}function j_(o,a){const u=cn(a,o);if(pi(u)){const f=u[1];80&u[2]?$d(f,u,f.template,u[8]):u[5]>0&&jg(u)}}function jg(o){for(let f=o_(o);null!==f;f=a_(f))for(let m=10;m<f.length;m++){const b=f[m];if(1024&b[2]){const D=b[1];$d(D,b,D.template,b[8])}else b[5]>0&&jg(b)}const u=o[1].components;if(null!==u)for(let f=0;f<u.length;f++){const m=cn(u[f],o);pi(m)&&m[5]>0&&jg(m)}}function Fh(o,a){const u=cn(a,o),f=u[1];(function $_(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(f,u),jd(f,u,u[8])}function $g(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function H_(o){for(;o;){o[2]|=64;const a=Th(o);if(_s(o)&&!a)return o;o=a}return null}function G_(o,a,u){const f=a[10];f.begin&&f.begin();try{$d(o,a,o.template,u)}catch(m){throw qg(a,m),m}finally{f.end&&f.end()}}function Gg(o){!function Hg(o){for(let a=0;a<o.components.length;a++){const u=o.components[a],f=Gr(u),m=f[1];Jv(m,f,m.template,u)}}(o[8])}function W_(o,a,u){ga(0),a(o,u)}const LE=(()=>Promise.resolve(null))();function Zg(o){return o[7]||(o[7]=[])}function q_(o){return o.cleanup||(o.cleanup=[])}function qg(o,a){const u=o[9],f=u?u.get(Ad,null):null;f&&f.handleError(a)}function zg(o,a,u,f,m){for(let b=0;b<u.length;){const D=u[b++],x=u[b++],P=a[D],Q=o.data[D];null!==Q.setInput?Q.setInput(P,m,f,x):P[x]=m}}function $a(o,a,u){const f=$(a,o);hg(o[11],f,u)}function Jl(o,a,u){let f=u?o.styles:null,m=u?o.classes:null,b=0;if(null!==a)for(let D=0;D<a.length;D++){const x=a[D];"number"==typeof x?b=x:1==b?m=ke(m,x):2==b&&(f=ke(f,x+": "+a[++D]+";"))}u?o.styles=f:o.stylesWithoutHost=f,u?o.classes=m:o.classesWithoutHost=m}const Kg=new Ui("INJECTOR",-1);class Gd{get(a,u=Ta){if(u===Ta){const f=new Error(`NullInjectorError: No provider for ${pe(a)}!`);throw f.name="NullInjectorError",f}return u}}const K_=new Ui("Set Injector scope."),np={},Y_={};let ip;function Yg(){return void 0===ip&&(ip=new Gd),ip}function Qg(o,a=null,u=null,f){const m=u0(o,a,u,f);return m._resolveInjectorDefTypes(),m}function u0(o,a=null,u=null,f){return new BE(o,u,a||Yg(),f)}class BE{constructor(a,u,f,m=null){this.parent=f,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const b=[];u&&Lr(u,x=>this.processProvider(x,a,u)),Lr([a],x=>this.processInjectorType(x,[],b)),this.records.set(Kg,Bh(void 0,this));const D=this.records.get(K_);this.scope=null!=D?D.value:null,this.source=m||("object"==typeof a?null:pe(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,u=Ta,f=Jt.Default){this.assertNotDestroyed();const m=mh(this),b=kn(void 0);try{if(!(f&Jt.SkipSelf)){let x=this.records.get(a);if(void 0===x){const P=function HE(o){return"function"==typeof o||"object"==typeof o&&o instanceof Ui}(a)&&Kt(a);x=P&&this.injectableDefInScope(P)?Bh(rp(a),np):null,this.records.set(a,x)}if(null!=x)return this.hydrate(a,x)}return(f&Jt.Self?Yg():this.parent).get(a,u=f&Jt.Optional&&u===Ta?null:u)}catch(D){if("NullInjectorError"===D.name){if((D[Va]=D[Va]||[]).unshift(pe(a)),m)throw D;return function De(o,a,u,f){const m=o[Va];throw a[Jc]&&m.unshift(a[Jc]),o.message=function tt(o,a,u,f=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let m=pe(a);if(Array.isArray(a))m=a.map(pe).join(" -> ");else if("object"==typeof a){let b=[];for(let D in a)if(a.hasOwnProperty(D)){let x=a[D];b.push(D+":"+("string"==typeof x?JSON.stringify(x):pe(x)))}m=`{${b.join(", ")}}`}return`${u}${f?"("+f+")":""}[${m}]: ${o.replace(Hl,"\n  ")}`}("\n"+o.message,m,u,f),o.ngTokenPath=m,o[Va]=null,o}(D,a,"R3InjectorError",this.source)}throw D}finally{kn(b),mh(m)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((f,m)=>a.push(pe(m))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new mt(205,"")}processInjectorType(a,u,f){if(!(a=Fe(a)))return!1;let m=Ki(a);const b=null==m&&a.ngModule||void 0,D=void 0===b?a:b,x=-1!==f.indexOf(D);if(void 0!==b&&(m=Ki(b)),null==m)return!1;if(null!=m.imports&&!x){let oe;f.push(D);try{Lr(m.imports,ve=>{this.processInjectorType(ve,u,f)&&(void 0===oe&&(oe=[]),oe.push(ve))})}finally{}if(void 0!==oe)for(let ve=0;ve<oe.length;ve++){const{ngModule:$e,providers:lt}=oe[ve];Lr(lt,Lt=>this.processProvider(Lt,$e,lt||yn))}}this.injectorDefTypes.add(D);const P=Fs(D)||(()=>new D);this.records.set(D,Bh(P,np));const Q=m.providers;if(null!=Q&&!x){const oe=a;Lr(Q,ve=>this.processProvider(ve,oe,Q))}return void 0!==b&&void 0!==a.providers}processProvider(a,u,f){let m=Zd(a=Fe(a))?a:Fe(a&&a.provide);const b=function VE(o,a,u){return X_(o)?Bh(void 0,o.useValue):Bh(J_(o),np)}(a);if(Zd(a)||!0!==a.multi)this.records.get(m);else{let D=this.records.get(m);D||(D=Bh(void 0,np,!0),D.factory=()=>L(D.multi),this.records.set(m,D)),m=a,D.multi.push(a)}this.records.set(m,b)}hydrate(a,u){return u.value===np&&(u.value=Y_,u.value=u.factory()),"object"==typeof u.value&&u.value&&function $E(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=Fe(a.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function rp(o){const a=Kt(o),u=null!==a?a.factory:Fs(o);if(null!==u)return u;if(o instanceof Ui)throw new mt(204,"");if(o instanceof Function)return function Q_(o){const a=o.length;if(a>0)throw Br(a,"?"),new mt(204,"");const u=function Kn(o){const a=o&&(o[Ei]||o[Nt]);if(a){const u=function ii(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new mt(204,"")}function J_(o,a,u){let f;if(Zd(o)){const m=Fe(o);return Fs(m)||rp(m)}if(X_(o))f=()=>Fe(o.useValue);else if(function h0(o){return!(!o||!o.useFactory)}(o))f=()=>o.useFactory(...L(o.deps||[]));else if(function d0(o){return!(!o||!o.useExisting)}(o))f=()=>Cs(Fe(o.useExisting));else{const m=Fe(o&&(o.useClass||o.provide));if(!function jE(o){return!!o.deps}(o))return Fs(m)||rp(m);f=()=>new m(...L(o.deps))}return f}function Bh(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function X_(o){return null!==o&&"object"==typeof o&&Gl in o}function Zd(o){return"function"==typeof o}let Ha=(()=>{class o{static create(u,f){var m;if(Array.isArray(u))return Qg({name:""},f,u,"");{const b=null!==(m=u.name)&&void 0!==m?m:"";return Qg({name:b},u.parent,u.providers,b)}}}return o.THROW_IF_NOT_FOUND=Ta,o.NULL=new Gd,o.\u0275prov=Ot({token:o,providedIn:"any",factory:()=>Cs(Kg)}),o.__NG_ELEMENT_ID__=-1,o})();function sy(o,a){na(Gr(o)[1],oi())}function jh(o){let a=function oy(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const f=[o];for(;a;){let m;if(yr(o))m=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new mt(903,"");m=a.\u0275dir}if(m){if(u){f.push(m);const D=o;D.inputs=$h(o.inputs),D.declaredInputs=$h(o.declaredInputs),D.outputs=$h(o.outputs);const x=m.hostBindings;x&&WE(o,x);const P=m.viewQuery,Q=m.contentQueries;if(P&&y0(o,P),Q&&cp(o,Q),Ge(o.inputs,m.inputs),Ge(o.declaredInputs,m.declaredInputs),Ge(o.outputs,m.outputs),yr(m)&&m.data.animation){const oe=o.data;oe.animation=(oe.animation||[]).concat(m.data.animation)}}const b=m.features;if(b)for(let D=0;D<b.length;D++){const x=b[D];x&&x.ngInherit&&x(o),x===jh&&(u=!1)}}a=Object.getPrototypeOf(a)}!function _0(o){let a=0,u=null;for(let f=o.length-1;f>=0;f--){const m=o[f];m.hostVars=a+=m.hostVars,m.hostAttrs=qs(m.hostAttrs,u=qs(u,m.hostAttrs))}}(f)}function $h(o){return o===ui?{}:o===yn?[]:o}function y0(o,a){const u=o.viewQuery;o.viewQuery=u?(f,m)=>{a(f,m),u(f,m)}:a}function cp(o,a){const u=o.contentQueries;o.contentQueries=u?(f,m,b)=>{a(f,m,b),u(f,m,b)}:a}function WE(o,a){const u=o.hostBindings;o.hostBindings=u?(f,m)=>{a(f,m),u(f,m)}:a}let up=null;function Hh(){if(!up){const o=sn.Symbol;if(o&&o.iterator)up=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const f=a[u];"entries"!==f&&"size"!==f&&Map.prototype[f]===Map.prototype.entries&&(up=f)}}}return up}function qd(o){return!!dp(o)&&(Array.isArray(o)||!(o instanceof Map)&&Hh()in o)}function dp(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Dl(o,a,u){return o[a]=u}function Vo(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function gu(o,a,u,f){const m=Vo(o,a,u);return Vo(o,a+1,f)||m}function Xl(o,a,u,f){const m=Y();return Vo(m,Ao(),a)&&(ct(),function Ql(o,a,u,f,m,b){const D=le(o,a);L_(a[11],D,b,o.value,u,f,m)}(Nr(),m,o,a,u,f)),Xl}function zd(o,a,u,f){return Vo(o,Ao(),u)?a+qe(u)+f:wi}function fp(o,a,u,f,m,b,D,x){const P=Y(),Q=ct(),oe=o+20,ve=Q.firstCreatePass?function C0(o,a,u,f,m,b,D,x,P){const Q=a.consts,oe=Vd(a,o,4,D||null,gi(Q,x));k_(a,u,oe,gi(Q,P)),na(a,oe);const ve=oe.tViews=Rh(2,oe,f,m,b,a.directiveRegistry,a.pipeRegistry,null,a.schemas,Q);return null!==a.queries&&(a.queries.template(a,oe),ve.queries=a.queries.embeddedTView(oe)),oe}(oe,Q,P,a,u,f,m,b,D):Q.data[oe];hs(ve,!1);const $e=P[11].createComment("");yg(Q,P,$e,ve),Gn($e,P),$g(P,P[oe]=V_($e,P,$e,ve)),Di(ve)&&Hd(Q,P,ve),null!=D&&Oh(P,ve,x)}function KE(o){return kt(function Ll(){return vn.lFrame.contextLView}(),20+o)}function yp(o,a=Jt.Default){const u=Y();return null===u?Cs(o,a):Ii(oi(),u,Fe(o),a)}function P0(){throw new Error("invalid")}function wy(o,a,u){const f=Y();return Vo(f,Ao(),a)&&Yo(ct(),Nr(),f,o,a,f[11],u,!1),wy}function F0(o,a,u,f,m){const D=m?"class":"style";zg(o,u,a.inputs[D],D,f)}function Dy(o,a,u,f){const m=Y(),b=ct(),D=20+o,x=m[11],P=m[D]=Ff(x,a,function ns(){return vn.lFrame.currentNamespace}()),Q=b.firstCreatePass?function tC(o,a,u,f,m,b,D){const x=a.consts,Q=Vd(a,o,2,m,gi(x,b));return k_(a,u,Q,gi(x,D)),null!==Q.attrs&&Jl(Q,Q.attrs,!1),null!==Q.mergedAttrs&&Jl(Q,Q.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,Q),Q}(D,b,m,0,a,u,f):b.data[D];hs(Q,!0);const oe=Q.mergedAttrs;null!==oe&&is(x,P,oe);const ve=Q.classes;null!==ve&&cu(x,P,ve);const $e=Q.styles;null!==$e&&Ah(x,P,$e),64!=(64&Q.flags)&&yg(b,m,P,Q),0===function kr(){return vn.lFrame.elementDepthCount}()&&Gn(P,m),function qi(){vn.lFrame.elementDepthCount++}(),Di(Q)&&(Hd(b,m,Q),Xf(b,Q,m)),null!==f&&Oh(m,Q)}function om(){let o=oi();Io()?Zo():(o=o.parent,hs(o,!1));const a=o;!function Go(){vn.lFrame.elementDepthCount--}();const u=ct();u.firstCreatePass&&(na(u,o),dr(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Mo(o){return 0!=(16&o.flags)}(a)&&F0(u,a,Y(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function En(o){return 0!=(32&o.flags)}(a)&&F0(u,a,Y(),a.stylesWithoutHost,!1)}function _u(o,a,u,f){Dy(o,a,u,f),om()}function yu(o,a,u){const f=Y(),m=ct(),b=o+20,D=m.firstCreatePass?function cw(o,a,u,f,m){const b=a.consts,D=gi(b,f),x=Vd(a,o,8,"ng-container",D);return null!==D&&Jl(x,D,!0),k_(a,u,x,gi(b,m)),null!==a.queries&&a.queries.elementStart(a,x),x}(b,m,f,a,u):m.data[b];hs(D,!0);const x=f[b]=f[11].createComment("");yg(m,f,x,D),Gn(x,f),Di(D)&&(Hd(m,f,D),Xf(m,D,f)),null!=u&&Oh(f,D)}function zh(){let o=oi();const a=ct();Io()?Zo():(o=o.parent,hs(o,!1)),a.firstCreatePass&&(na(a,o),dr(o)&&a.queries.elementEnd(o))}function L0(){return Y()}function Zr(o){return!!o&&"function"==typeof o.then}function vp(o){return!!o&&"function"==typeof o.subscribe}const od=vp;function nc(o,a,u,f){const m=Y(),b=ct(),D=oi();return function vu(o,a,u,f,m,b,D,x){const P=Di(f),oe=o.firstCreatePass&&q_(o),ve=a[8],$e=Zg(a);let lt=!0;if(3&f.type||x){const Dn=le(f,a),Wn=x?x(Dn):Dn,Qt=$e.length,_i=x?Er=>x(Fn(Er[f.index])):f.index;if(Bt(u)){let Er=null;if(!x&&P&&(Er=function Jd(o,a,u,f){const m=o.cleanup;if(null!=m)for(let b=0;b<m.length-1;b+=2){const D=m[b];if(D===u&&m[b+1]===f){const x=a[7],P=m[b+2];return x.length>P?x[P]:null}"string"==typeof D&&(b+=2)}return null}(o,a,m,f.index)),null!==Er)(Er.__ngLastListenerFn__||Er).__ngNextListenerFn__=b,Er.__ngLastListenerFn__=b,lt=!1;else{b=Uo(f,a,ve,b,!1);const Yr=u.listen(Wn,m,b);$e.push(b,Yr),oe&&oe.push(m,_i,Qt,Qt+1)}}else b=Uo(f,a,ve,b,!0),Wn.addEventListener(m,b,D),$e.push(b),oe&&oe.push(m,_i,Qt,D)}else b=Uo(f,a,ve,b,!1);const Lt=f.outputs;let ln;if(lt&&null!==Lt&&(ln=Lt[m])){const Dn=ln.length;if(Dn)for(let Wn=0;Wn<Dn;Wn+=2){const Rl=a[ln[Wn]][ln[Wn+1]].subscribe(b),vf=$e.length;$e.push(b,Rl),oe&&oe.push(m,f.index,vf,-(vf+1))}}}(b,m,m[11],D,o,a,!!u,f),nc}function Kh(o,a,u,f){try{return!1!==u(f)}catch(m){return qg(o,m),!1}}function Uo(o,a,u,f,m){return function b(D){if(D===Function)return f;const x=2&o.flags?cn(o.index,a):a;0==(32&a[2])&&H_(x);let P=Kh(a,0,f,D),Q=b.__ngNextListenerFn__;for(;Q;)P=Kh(a,0,Q,D)&&P,Q=Q.__ngNextListenerFn__;return m&&!1===P&&(D.preventDefault(),D.returnValue=!1),P}}function am(o=1){return function Vl(o){return(vn.lFrame.contextLView=function ta(o,a){for(;o>0;)a=a[15],o--;return a}(o,vn.lFrame.contextLView))[8]}(o)}function lm(o,a){let u=null;const f=function Gf(o){const a=o.attrs;if(null!=a){const u=a.indexOf(5);if(0==(1&u))return a[u+1]}return null}(o);for(let m=0;m<a.length;m++){const b=a[m];if("*"!==b){if(null===f?Hf(o,b,!0):ja(f,b))return m}else u=m}return u}function cm(o){const a=Y()[16][6];if(!a.projection){const f=a.projection=Br(o?o.length:1,null),m=f.slice();let b=a.child;for(;null!==b;){const D=o?lm(b,o):0;null!==D&&(m[D]?m[D].projectionNext=b:f[D]=b,m[D]=b),b=b.next}}}function um(o,a=0,u){const f=Y(),m=ct(),b=Vd(m,20+o,16,null,u||null);null===b.projection&&(b.projection=a),Zo(),64!=(64&b.flags)&&function Vv(o,a,u){bg(a[11],0,a,u,u_(o,u,a),d_(u.parent||a[6],u,a))}(m,f,b)}function Yh(o,a,u){return Il(o,"",a,"",u),Yh}function Il(o,a,u,f,m){const b=Y(),D=zd(b,a,u,f);return D!==wi&&Yo(ct(),Nr(),b,o,D,b[11],m,!1),Il}function ld(o,a,u,f,m){const b=o[u+1],D=null===a;let x=f?la(b):Nc(b),P=!1;for(;0!==x&&(!1===P||D);){const oe=o[x+1];Jh(o[x],a)&&(P=!0,o[x+1]=f?Ig(oe):Zf(oe)),x=f?la(oe):Nc(oe)}P&&(o[u+1]=f?Zf(b):Ig(b))}function Jh(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&va(o,a)>=0}const cs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Xh(o){return o.substring(cs.key,cs.keyEnd)}function bu(o,a){const u=cs.textEnd;return u===a?-1:(a=cs.keyEnd=function gm(o,a,u){for(;a<u&&o.charCodeAt(a)>32;)a++;return a}(o,cs.key=a,u),Al(o,a,u))}function Al(o,a,u){for(;a<u&&o.charCodeAt(a)<=32;)a++;return a}function Cu(o,a,u){return Nl(o,a,u,!1),Cu}function bp(o,a){return Nl(o,a,null,!0),bp}function cd(o){!function ho(o,a,u,f){const m=ct(),b=mo(2);m.firstUpdatePass&&ud(m,null,b,f);const D=Y();if(u!==wi&&Vo(D,b,u)){const x=m.data[Ls()];if(Tm(x,f)&&!Tu(m,b)){let P=f?x.classesWithoutHost:x.stylesWithoutHost;null!==P&&(u=ke(P,u||"")),F0(m,x,D,u,f)}else!function Cp(o,a,u,f,m,b,D,x){m===wi&&(m=yn);let P=0,Q=0,oe=0<m.length?m[0]:null,ve=0<b.length?b[0]:null;for(;null!==oe||null!==ve;){const $e=P<m.length?m[P+1]:void 0,lt=Q<b.length?b[Q+1]:void 0;let ln,Lt=null;oe===ve?(P+=2,Q+=2,$e!==lt&&(Lt=ve,ln=lt)):null===ve||null!==oe&&oe<ve?(P+=2,Lt=oe):(Q+=2,Lt=ve,ln=lt),null!==Lt&&bm(o,a,u,f,Lt,ln,D,x),oe=P<m.length?m[P]:null,ve=Q<b.length?b[Q]:null}}(m,x,D,D[11],D[b+1],D[b+1]=function U0(o,a,u){if(null==u||""===u)return yn;const f=[],m=Ua(u);if(Array.isArray(m))for(let b=0;b<m.length;b++)o(f,m[b],!0);else if("object"==typeof m)for(const b in m)m.hasOwnProperty(b)&&o(f,b,m[b]);else"string"==typeof m&&a(f,m);return f}(o,a,u),f,b)}}(Es,Qo,o,!0)}function Qo(o,a){for(let u=function fm(o){return function Ay(o){cs.key=0,cs.keyEnd=0,cs.value=0,cs.valueEnd=0,cs.textEnd=o.length}(o),bu(o,Al(o,0,cs.textEnd))}(a);u>=0;u=bu(a,u))Es(o,Xh(a),!0)}function Nl(o,a,u,f){const m=Y(),b=ct(),D=mo(2);b.firstUpdatePass&&ud(b,o,D,f),a!==wi&&Vo(m,D,a)&&bm(b,b.data[Ls()],m,m[11],o,m[D+1]=function Cm(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=pe(Ua(o)))),o}(a,u),f,D)}function Tu(o,a){return a>=o.expandoStartIndex}function ud(o,a,u,f){const m=o.data;if(null===m[u+1]){const b=m[Ls()],D=Tu(o,u);Tm(b,f)&&null===a&&!D&&(a=!1),a=function wu(o,a,u,f){const m=So(o);let b=f?a.residualClasses:a.residualStyles;if(null===m)0===(f?a.classBindings:a.styleBindings)&&(u=ef(u=ic(null,o,a,u,f),a.attrs,f),b=null);else{const D=a.directiveStylingLast;if(-1===D||o[D]!==m)if(u=ic(m,o,a,u,f),null===b){let P=function Wa(o,a,u){const f=u?a.classBindings:a.styleBindings;if(0!==Nc(f))return o[la(f)]}(o,a,f);void 0!==P&&Array.isArray(P)&&(P=ic(null,o,a,P[1],f),P=ef(P,a.attrs,f),function vm(o,a,u,f){o[la(u?a.classBindings:a.styleBindings)]=f}(o,a,f,P))}else b=function Ep(o,a,u){let f;const m=a.directiveEnd;for(let b=1+a.directiveStylingLast;b<m;b++)f=ef(f,o[b].hostAttrs,u);return ef(f,a.attrs,u)}(o,a,f)}return void 0!==b&&(f?a.residualClasses=b:a.residualStyles=b),u}(m,b,a,f),function nh(o,a,u,f,m,b){let D=b?a.classBindings:a.styleBindings,x=la(D),P=Nc(D);o[f]=u;let oe,Q=!1;if(Array.isArray(u)){const ve=u;oe=ve[1],(null===oe||va(ve,oe)>0)&&(Q=!0)}else oe=u;if(m)if(0!==P){const $e=la(o[x+1]);o[f+1]=wg($e,x),0!==$e&&(o[$e+1]=Dg(o[$e+1],f)),o[x+1]=function Sc(o,a){return 131071&o|a<<17}(o[x+1],f)}else o[f+1]=wg(x,0),0!==x&&(o[x+1]=Dg(o[x+1],f)),x=f;else o[f+1]=wg(P,0),0===x?x=f:o[P+1]=Dg(o[P+1],f),P=f;Q&&(o[f+1]=Zf(o[f+1])),ld(o,oe,f,!0),ld(o,oe,f,!1),function V0(o,a,u,f,m){const b=m?o.residualClasses:o.residualStyles;null!=b&&"string"==typeof a&&va(b,a)>=0&&(u[f+1]=Ig(u[f+1]))}(a,oe,o,f,b),D=wg(x,P),b?a.classBindings=D:a.styleBindings=D}(m,b,a,u,D,f)}}function ic(o,a,u,f,m){let b=null;const D=u.directiveEnd;let x=u.directiveStylingLast;for(-1===x?x=u.directiveStart:x++;x<D&&(b=a[x],f=ef(f,b.hostAttrs,m),b!==o);)x++;return null!==o&&(u.directiveStylingLast=x),f}function ef(o,a,u){const f=u?1:2;let m=-1;if(null!==a)for(let b=0;b<a.length;b++){const D=a[b];"number"==typeof D?m=D:m===f&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Es(o,D,!!u||a[++b]))}return void 0===o?null:o}function bm(o,a,u,f,m,b,D,x){if(!(3&a.type))return;const P=o.data,Q=P[x+1];Tp(function v_(o){return 1==(1&o)}(Q)?Em(P,a,u,m,Nc(Q),D):void 0)||(Tp(b)||function y_(o){return 2==(2&o)}(Q)&&(b=Em(P,null,u,m,x,D)),function ME(o,a,u,f,m){const b=Bt(o);if(a)m?b?o.addClass(u,f):u.classList.add(f):b?o.removeClass(u,f):u.classList.remove(f);else{let D=-1===f.indexOf("-")?void 0:Tl.DashCase;if(null==m)b?o.removeStyle(u,f,D):u.style.removeProperty(f);else{const x="string"==typeof m&&m.endsWith("!important");x&&(m=m.slice(0,-10),D|=Tl.Important),b?o.setStyle(u,f,m,D):u.style.setProperty(f,m,x?"important":"")}}}(f,D,$(Ls(),u),m,b))}function Em(o,a,u,f,m,b){const D=null===a;let x;for(;m>0;){const P=o[m],Q=Array.isArray(P),oe=Q?P[1]:P,ve=null===oe;let $e=u[m+1];$e===wi&&($e=ve?yn:void 0);let lt=ve?uo($e,f):oe===f?$e:void 0;if(Q&&!Tp(lt)&&(lt=uo(P,f)),Tp(lt)&&(x=lt,D))return x;const Lt=o[m+1];m=D?la(Lt):Nc(Lt)}if(null!==a){let P=b?a.residualClasses:a.residualStyles;null!=P&&(x=uo(P,f))}return x}function Tp(o){return void 0!==o}function Tm(o,a){return 0!=(o.flags&(a?16:32))}function Sy(o,a=""){const u=Y(),f=ct(),m=o+20,b=f.firstCreatePass?Vd(f,m,1,a,null):f.data[m],D=u[m]=Pf(u[11],a);yg(f,u,D,b),hs(b,!1)}function wm(o){return Pc("",o,""),wm}function Pc(o,a,u){const f=Y(),m=zd(f,o,a,u);return m!==wi&&$a(f,Ls(),m),Pc}function nf(o,a,u,f,m){const b=Y(),D=function rd(o,a,u,f,m,b){const x=gu(o,Xs(),u,m);return mo(2),x?a+qe(u)+f+qe(m)+b:wi}(b,o,a,u,f,m);return D!==wi&&$a(b,Ls(),D),nf}function Or(o,a,u){const f=Y();return Vo(f,Ao(),a)&&Yo(ct(),Nr(),f,o,a,f[11],u,!0),Or}function ao(o,a,u){const f=Y();if(Vo(f,Ao(),a)){const b=ct(),D=Nr();Yo(b,D,f,o,a,function Wg(o,a,u){return(null===o||yr(o))&&(u=function B(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(u[a.index])),u[11]}(So(b.data),D,f),u,!0)}return ao}const Ar=void 0;var jo=["en",[["a","p"],["AM","PM"],Ar],[["AM","PM"],Ar,Ar],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ar,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ar,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ar,"{1} 'at' {0}",Ar],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Vr(o){const u=Math.floor(Math.abs(o)),f=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===f?1:5}];let al={};function q0(o){const a=function K0(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=z0(a);if(u)return u;const f=a.split("-")[0];if(u=z0(f),u)return u;if("en"===f)return jo;throw new Error(`Missing locale data for the locale "${o}".`)}function rC(o){return q0(o)[ai.PluralCase]}function z0(o){return o in al||(al[o]=sn.ng&&sn.ng.common&&sn.ng.common.locales&&sn.ng.common.locales[o]),al[o]}var ai=(()=>((ai=ai||{})[ai.LocaleId=0]="LocaleId",ai[ai.DayPeriodsFormat=1]="DayPeriodsFormat",ai[ai.DayPeriodsStandalone=2]="DayPeriodsStandalone",ai[ai.DaysFormat=3]="DaysFormat",ai[ai.DaysStandalone=4]="DaysStandalone",ai[ai.MonthsFormat=5]="MonthsFormat",ai[ai.MonthsStandalone=6]="MonthsStandalone",ai[ai.Eras=7]="Eras",ai[ai.FirstDayOfWeek=8]="FirstDayOfWeek",ai[ai.WeekendRange=9]="WeekendRange",ai[ai.DateFormat=10]="DateFormat",ai[ai.TimeFormat=11]="TimeFormat",ai[ai.DateTimeFormat=12]="DateTimeFormat",ai[ai.NumberSymbols=13]="NumberSymbols",ai[ai.NumberFormats=14]="NumberFormats",ai[ai.CurrencyCode=15]="CurrencyCode",ai[ai.CurrencySymbol=16]="CurrencySymbol",ai[ai.CurrencyName=17]="CurrencyName",ai[ai.Currencies=18]="Currencies",ai[ai.Directionality=19]="Directionality",ai[ai.PluralCase=20]="PluralCase",ai[ai.ExtraData=21]="ExtraData",ai))();const Dm=["zero","one","two","few","many"],xy="en-US",Ip={marker:"element"},Oy={marker:"ICU"};var lo=(()=>((lo=lo||{})[lo.SHIFT=2]="SHIFT",lo[lo.APPEND_EAGERLY=1]="APPEND_EAGERLY",lo[lo.COMMENT=2]="COMMENT",lo))();let sC=xy;function J0(o,a,u){const f=a.insertBeforeIndex,m=Array.isArray(f)?f[0]:f;return null===m?mg(o,0,u):Fn(u[m])}function xl(o,a,u,f,m){const b=a.insertBeforeIndex;if(Array.isArray(b)){let D=f,x=null;if(3&a.type||(x=D,D=m),null!==D&&0==(2&a.flags))for(let P=1;P<b.length;P++)Qu(o,D,u[b[P]],x,!1)}}function af(o,a){if(o.push(a),o.length>1)for(let u=o.length-2;u>=0;u--){const f=o[u];lC(f)||dw(f,a)&&null===cC(f)&&hw(f,a.index)}}function lC(o){return!(64&o.type)}function dw(o,a){return lC(a)||o.index>a.index}function cC(o){const a=o.insertBeforeIndex;return Array.isArray(a)?a[0]:a}function hw(o,a){const u=o.insertBeforeIndex;Array.isArray(u)?u[0]=a:(h_(J0,xl),o.insertBeforeIndex=a)}function Ap(o,a){const u=o.data[a];return null===u||"string"==typeof u?null:u.hasOwnProperty("currentCaseLViewIndex")?u:u.value}function fw(o,a,u){const f=xh(o,u,64,null,null);return af(a,f),f}function Sp(o,a){const u=a[o.currentCaseLViewIndex];return null===u?u:u<0?~u:u}function dC(o){return o>>>17}function hC(o){return(131070&o)>>>1}let Im=0,Am=0;function eb(o,a,u,f){const m=u[11];let D,b=null;for(let x=0;x<a.length;x++){const P=a[x];if("string"==typeof P){const Q=a[++x];null===u[Q]&&(u[Q]=Pf(m,P))}else if("number"==typeof P)switch(1&P){case 0:const Q=dC(P);let oe,ve;if(null===b&&(b=Q,D=Ic(m,f)),Q===b?(oe=f,ve=D):(oe=null,ve=Fn(u[Q])),null!==ve){const ln=hC(P);Qu(m,ve,u[ln],oe,!1);const Wn=Ap(o,ln);if(null!==Wn&&"object"==typeof Wn){const Qt=Sp(Wn,u);null!==Qt&&eb(o,Wn.create[Qt],u,u[Wn.anchorIdx])}}break;case 1:const lt=a[++x],Lt=a[++x];L_(m,$(P>>>1,u),null,null,lt,Lt,null)}else switch(P){case Oy:const Q=a[++x],oe=a[++x];null===u[oe]&&Gn(u[oe]=l_(m,Q),u);break;case Ip:const ve=a[++x],$e=a[++x];null===u[$e]&&Gn(u[$e]=Ff(m,ve,null),u)}}}function ky(o,a,u,f,m){for(let b=0;b<u.length;b++){const D=u[b],x=u[++b];if(D&m){let P="";for(let Q=b+1;Q<=b+x;Q++){const oe=u[Q];if("string"==typeof oe)P+=oe;else if("number"==typeof oe)if(oe<0)P+=qe(a[f-oe]);else{const ve=oe>>>2;switch(3&oe){case 1:const $e=u[++Q],lt=u[++Q],Lt=o.data[ve];"string"==typeof Lt?L_(a[11],a[ve],null,Lt,$e,P,lt):Yo(o,Lt,a,$e,P,a[11],lt,!1);break;case 0:const ln=a[ve];null!==ln&&hg(a[11],ln,P);break;case 2:Py(o,Ap(o,ve),a,P);break;case 3:tb(o,Ap(o,ve),f,a)}}}}else{const P=u[b+1];if(P>0&&3==(3&P)){const oe=Ap(o,P>>>2);a[oe.currentCaseLViewIndex]<0&&tb(o,oe,f,a)}}b+=x}}function tb(o,a,u,f){let m=f[a.currentCaseLViewIndex];if(null!==m){let b=Im;m<0&&(m=f[a.currentCaseLViewIndex]=~m,b=-1),ky(o,f,a.update[m],u,b)}}function Py(o,a,u,f){const m=function mw(o,a){let u=o.cases.indexOf(a);if(-1===u)switch(o.type){case 1:{const f=function Y0(o,a){const u=rC(a)(parseInt(o,10)),f=Dm[u];return void 0!==f?f:"other"}(a,function aC(){return sC}());u=o.cases.indexOf(f),-1===u&&"other"!==f&&(u=o.cases.indexOf("other"));break}case 0:u=o.cases.indexOf("other")}return-1===u?null:u}(a,f);if(Sp(a,u)!==m&&(Fy(o,a,u),u[a.currentCaseLViewIndex]=null===m?null:~m,null!==m)){const D=u[a.anchorIdx];D&&eb(o,a.create[m],u,D)}}function Fy(o,a,u){let f=Sp(a,u);if(null!==f){const m=a.remove[f];for(let b=0;b<m.length;b++){const D=m[b];if(D>0){const x=$(D,u);null!==x&&Ih(u[11],x)}else Fy(o,Ap(o,~D),u)}}}function _w(){const o=[];let u,f,a=-1;function b(x,P){a=0;const Q=Sp(x,P);f=null!==Q?x.remove[Q]:yn}function D(){if(a<f.length){const x=f[a++];return x>0?u[x]:(o.push(a,f),b(u[1].data[~x],u),D())}return 0===o.length?null:(f=o.pop(),a=o.pop(),D())}return function m(x,P){for(u=P;o.length;)o.pop();return b(x.value,P),D}}const Sm=/\ufffd(\d+):?\d*\ufffd/gi,bw=/\ufffd(\d+)\ufffd/,gC=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,LD=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,mC=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Ew=/\uE500/g;function yC(o,a,u,f,m,b,D){const x=Ud(o,f,1,null);let P=x<<lo.SHIFT,Q=Pr();a===Q&&(Q=null),null===Q&&(P|=lo.APPEND_EAGERLY),D&&(P|=lo.COMMENT,function cg(o){void 0===zu&&(zu=o())}(_w)),m.push(P,null===b?"":b);const oe=xh(o,x,D?32:1,null===b?"":b,null);af(u,oe);const ve=oe.index;return hs(oe,!1),null!==Q&&a!==Q&&function uC(o,a){let u=o.insertBeforeIndex;null===u?(h_(J0,xl),u=o.insertBeforeIndex=[null,a]):(function Ne(o,a,u){o!=a&&qt(u,o,a,"==")}(Array.isArray(u),!0,"Expecting array here"),u.push(a))}(Q,ve),oe}function Tw(o,a,u,f,m,b,D){const x=D.match(Sm),P=yC(o,a,u,b,f,x?null:D,!1);x&&lf(m,D,P.index,null,0,null)}function lf(o,a,u,f,m,b){const D=o.length,x=D+1;o.push(null,null);const P=D+2,Q=a.split(Sm);let oe=0;for(let ve=0;ve<Q.length;ve++){const $e=Q[ve];if(1&ve){const lt=m+parseInt($e,10);o.push(-1-lt),oe|=ib(lt)}else""!==$e&&o.push($e)}return o.push(u<<2|(f?1:0)),f&&o.push(f,b),o[D]=oe,o[x]=o.length-P,oe}function ib(o){return 1<<Math.min(o,31)}function rb(o){let a,b,u="",f=0,m=!1;for(;null!==(a=LD.exec(o));)m?a[0]===`\ufffd/*${b}\ufffd`&&(f=a.index,m=!1):(u+=o.substring(f,a.index+a[0].length),b=a[1],m=!0);return u+=o.substr(f),u}function vC(o,a,u,f,m,b){let D=0;const x={type:m.type,currentCaseLViewIndex:Ud(o,a,1,null),anchorIdx:b,cases:[],create:[],remove:[],update:[]};(function CC(o,a,u){o.push(ib(a.mainBinding),2,-1-a.mainBinding,u<<2|2)})(u,m,b),function Ry(o,a,u){const f=o.data[a];null===f?o.data[a]=u:f.value=u}(o,b,x);const P=m.values;for(let Q=0;Q<P.length;Q++){const oe=P[Q],ve=[];for(let $e=0;$e<oe.length;$e++){const lt=oe[$e];if("string"!=typeof lt){const Lt=ve.push(lt)-1;oe[$e]=`\x3c!--\ufffd${Lt}\ufffd--\x3e`}}D=Sw(o,x,a,u,f,m.cases[Q],oe.join(""),ve)|D}D&&function TC(o,a,u){o.push(a,1,u<<2|3)}(u,D,b)}function Aw(o){const a=[],u=[];let f=1,m=0;const b=sb(o=o.replace(gC,function(D,x,P){return f="select"===P?0:1,m=parseInt(x.substr(1),10),""}));for(let D=0;D<b.length;){let x=b[D++].trim();1===f&&(x=x.replace(/\s*(?:=)?(\w+)\s*/,"$1")),x.length&&a.push(x);const P=sb(b[D++]);a.length>u.length&&u.push(P)}return{type:f,mainBinding:m,cases:a,values:u}}function sb(o){if(!o)return[];let a=0;const u=[],f=[],m=/[{}]/g;let b;for(m.lastIndex=0;b=m.exec(o);){const x=b.index;if("}"==b[0]){if(u.pop(),0==u.length){const P=o.substring(a,x);gC.test(P)?f.push(Aw(P)):f.push(P),a=x+1}}else{if(0==u.length){const P=o.substring(a,x);f.push(P),a=x+1}u.push("{")}}const D=o.substring(a);return f.push(D),f}function Sw(o,a,u,f,m,b,D,x){const P=[],Q=[],oe=[];a.cases.push(b),a.create.push(P),a.remove.push(Q),a.update.push(oe);const $e=ru(Je()).getInertBodyElement(D),lt=zl($e)||$e;return lt?bC(o,a,u,f,P,Q,oe,lt,m,x,0):0}function bC(o,a,u,f,m,b,D,x,P,Q,oe){let ve=0,$e=x.firstChild;for(;$e;){const lt=Ud(o,u,1,null);switch($e.nodeType){case Node.ELEMENT_NODE:const Lt=$e,ln=Lt.tagName.toLowerCase();if(vh.hasOwnProperty(ln)){ab(m,Ip,ln,P,lt),o.data[lt]=ln;const _i=Lt.attributes;for(let Er=0;Er<_i.length;Er++){const Yr=_i.item(Er),Rl=Yr.name.toLowerCase();Yr.value.match(Sm)?Vs.hasOwnProperty(Rl)&&lf(D,Yr.value,lt,Yr.name,0,bh[Rl]?bc:Cc[Rl]?Cd:null):Nw(m,lt,Yr)}ve=bC(o,a,u,f,m,b,D,$e,lt,Q,oe+1)|ve,EC(b,lt,oe)}break;case Node.TEXT_NODE:const Dn=$e.textContent||"",Wn=Dn.match(Sm);ab(m,null,Wn?"":Dn,P,lt),EC(b,lt,oe),Wn&&(ve=lf(D,Dn,lt,null,0,null)|ve);break;case Node.COMMENT_NODE:const Qt=bw.exec($e.textContent||"");if(Qt){const Er=Q[parseInt(Qt[1],10)];ab(m,Oy,"",P,lt),vC(o,u,f,P,Er,lt),ob(b,lt,oe)}}$e=$e.nextSibling}return ve}function EC(o,a,u){0===u&&o.push(a)}function ob(o,a,u){0===u&&(o.push(~a),o.push(a))}function ab(o,a,u,f,m){null!==a&&o.push(a),o.push(u,m,function fC(o,a,u){return o|a<<17|u<<1}(0,f,m))}function Nw(o,a,u){o.push(a<<1|1,u.name,u.value)}function wC(o,a,u=-1){const f=ct(),m=Y(),b=20+o,D=gi(f.consts,a),x=Pr();f.firstCreatePass&&function _C(o,a,u,f,m,b){const D=Pr(),x=[],P=[],Q=[[]];m=function Iw(o,a){if(function Dw(o){return-1===o}(a))return rb(o);{const u=o.indexOf(`:${a}\ufffd`)+2+a.toString().length,f=o.search(new RegExp(`\ufffd\\/\\*\\d+:${a}\ufffd`));return rb(o.substring(u,f))}}(m,b);const oe=function Cw(o){return o.replace(Ew," ")}(m).split(mC);for(let ve=0;ve<oe.length;ve++){let $e=oe[ve];if(0==(1&ve)){const lt=sb($e);for(let Lt=0;Lt<lt.length;Lt++){let ln=lt[Lt];if(0==(1&Lt)){const Dn=ln;""!==Dn&&Tw(o,D,Q[0],x,P,u,Dn)}else{const Dn=ln;if("object"!=typeof Dn)throw new Error(`Unable to parse ICU expression in "${m}" message.`);vC(o,u,P,a,Dn,yC(o,D,Q[0],u,x,"",!0).index)}}}else{const lt=47===$e.charCodeAt(0),ln=($e.charCodeAt(lt?1:0),20+Number.parseInt($e.substring(lt?2:1)));if(lt)Q.shift(),hs(Pr(),!1);else{const Dn=fw(o,Q[0],ln);Q.unshift([]),hs(Dn,!0)}}}o.data[f]={create:x,update:P}}(f,null===x?0:x.index,m,b,D,u);const P=f.data[b],oe=Bv(f,x===m[6]?null:x,m);(function gw(o,a,u,f){const m=o[11];for(let b=0;b<a.length;b++){const D=a[b++],x=a[b],P=(D&lo.COMMENT)===lo.COMMENT,Q=(D&lo.APPEND_EAGERLY)===lo.APPEND_EAGERLY,oe=D>>>lo.SHIFT;let ve=o[oe];null===ve&&(ve=o[oe]=P?m.createComment(x):Pf(m,x)),Q&&null!==u&&Qu(m,u,ve,f,!1)}})(m,P.create,oe,x&&8&x.type?m[x.index]:null),Qa(!0)}function lb(o,a,u){wC(o,a,u),function DC(){Qa(!1)}()}function cf(o){return function pC(o){o&&(Im|=1<<Math.min(Am,31)),Am++}(Vo(Y(),Ao(),o)),cf}function cb(o){!function pw(o,a,u){if(Am>0){const f=o.data[u];ky(o,a,Array.isArray(f)?f:f.update,Xs()-Am-1,Im)}Im=0,Am=0}(ct(),Y(),o+20)}function db(o,a,u,f,m){if(o=Fe(o),Array.isArray(o))for(let b=0;b<o.length;b++)db(o[b],a,u,f,m);else{const b=ct(),D=Y();let x=Zd(o)?o:Fe(o.provide),P=J_(o);const Q=oi(),oe=1048575&Q.providerIndexes,ve=Q.directiveStart,$e=Q.providerIndexes>>20;if(Zd(o)||!o.multi){const lt=new Mi(P,m,yp),Lt=fb(x,a,m?oe:oe+$e,ve);-1===Lt?(ye(I(Q,D),b,x),hb(b,o,a.length),a.push(x),Q.directiveStart++,Q.directiveEnd++,m&&(Q.providerIndexes+=1048576),u.push(lt),D.push(lt)):(u[Lt]=lt,D[Lt]=lt)}else{const lt=fb(x,a,oe+$e,ve),Lt=fb(x,a,oe,oe+$e),ln=lt>=0&&u[lt],Dn=Lt>=0&&u[Lt];if(m&&!Dn||!m&&!ln){ye(I(Q,D),b,x);const Wn=function jw(o,a,u,f,m){const b=new Mi(o,u,yp);return b.multi=[],b.index=a,b.componentProviders=0,AC(b,m,f&&!u),b}(m?Uw:Vw,u.length,m,f,P);!m&&Dn&&(u[Lt].providerFactory=Wn),hb(b,o,a.length,0),a.push(x),Q.directiveStart++,Q.directiveEnd++,m&&(Q.providerIndexes+=1048576),u.push(Wn),D.push(Wn)}else hb(b,o,lt>-1?lt:Lt,AC(u[m?Lt:lt],P,!m&&f));!m&&f&&Dn&&u[Lt].componentProviders++}}}function hb(o,a,u,f){const m=Zd(a),b=function UE(o){return!!o.useClass}(a);if(m||b){const P=(b?Fe(a.useClass):a).prototype.ngOnDestroy;if(P){const Q=o.destroyHooks||(o.destroyHooks=[]);if(!m&&a.multi){const oe=Q.indexOf(u);-1===oe?Q.push(u,[f,P]):Q[oe+1].push(f,P)}else Q.push(u,P)}}}function AC(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function fb(o,a,u,f){for(let m=u;m<f;m++)if(a[m]===o)return m;return-1}function Vw(o,a,u,f){return pb(this.multi,[])}function Uw(o,a,u,f){const m=this.multi;let b;if(this.providerFactory){const D=this.providerFactory.componentProviders,x=Fr(u,u[1],this.providerFactory.index,f);b=x.slice(0,D),pb(m,b);for(let P=D;P<x.length;P++)b.push(x[P])}else b=[],pb(m,b);return b}function pb(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function SC(o,a=[]){return u=>{u.providersResolver=(f,m)=>function Bw(o,a,u){const f=ct();if(f.firstCreatePass){const m=yr(o);db(u,f.data,f.blueprint,m,!0),db(a,f.data,f.blueprint,m,!1)}}(f,m?m(o):o,a)}}class NC{}class Gw{resolveComponentFactory(a){throw function Hw(o){const a=Error(`No component factory found for ${pe(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let Nm=(()=>{class o{}return o.NULL=new Gw,o})();function Zw(){return Mp(oi(),Y())}function Mp(o,a){return new Mm(le(o,a))}let Mm=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=Zw,o})();function Ww(o){return o instanceof Mm?o.nativeElement:o}class xC{}let qw=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function Kw(){const o=Y(),u=cn(oi().index,o);return function zw(o){return o[11]}(mn(u)?u:o)}(),o})(),Yw=(()=>{class o{}return o.\u0275prov=Ot({token:o,providedIn:"root",factory:()=>null}),o})();class OC{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const gb=new OC("13.1.3"),mb={};function By(o,a,u,f,m=!1){for(;null!==u;){const b=a[u.index];if(null!==b&&f.push(Fn(b)),ei(b))for(let x=10;x<b.length;x++){const P=b[x],Q=P[1].firstChild;null!==Q&&By(P[1],P,Q,f)}const D=u.type;if(8&D)By(o,a,u.child,f);else if(32&D){const x=xd(u,a);let P;for(;P=x();)f.push(P)}else if(16&D){const x=vg(a,u);if(Array.isArray(x))f.push(...x);else{const P=Th(a[16]);By(P[1],P,x,f,!0)}}u=m?u.projectionNext:u.next}return f}class xm{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return By(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(ei(a)){const u=a[8],f=u?u.indexOf(this):-1;f>-1&&(oo(a,f),zo(u,f))}this._attachedToViewContainer=!1}Bf(this._lView[1],this._lView)}onDestroy(a){Xv(this._lView[1],this._lView,null,a)}markForCheck(){H_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){G_(this._lView[1],this._lView,this.context)}checkNoChanges(){!function FE(o,a,u){pa(!0);try{G_(o,a,u)}finally{pa(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new mt(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function SE(o,a){jf(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new mt(902,"");this._appRef=a}}class Qw extends xm{constructor(a){super(a),this._view=a}detectChanges(){Gg(this._view)}checkNoChanges(){!function Z_(o){pa(!0);try{Gg(o)}finally{pa(!1)}}(this._view)}get context(){return null}}class RC extends Nm{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=Me(a);return new _b(u,this.ngModule)}}function kC(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}const Xw=new Ui("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>qu});class _b extends NC{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function Sh(o){return o.map(Tg).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return kC(this.componentDef.inputs)}get outputs(){return kC(this.componentDef.outputs)}create(a,u,f,m){const b=(m=m||this.ngModule)?function e1(o,a){return{get:(u,f,m)=>{const b=o.get(u,mb,m);return b!==mb||f===mb?b:a.get(u,f,m)}}}(a,m.injector):a,D=b.get(xC,_n),x=b.get(Yw,null),P=D.createRenderer(null,this.componentDef),Q=this.componentDef.selectors[0][0]||"div",oe=f?function x_(o,a,u){if(Bt(o))return o.selectRootElement(a,u===Pn.ShadowDom);let f="string"==typeof a?o.querySelector(a):a;return f.textContent="",f}(P,f,this.componentDef.encapsulation):Ff(D.createRenderer(null,this.componentDef),Q,function Jw(o){const a=o.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(Q)),ve=this.componentDef.onPush?576:528,$e=function m0(o,a){return{components:[],scheduler:o||qu,clean:LE,playerHandler:a||null,flags:0}}(),lt=Rh(0,null,null,1,0,null,null,null,null,null),Lt=Bd(null,lt,$e,ve,null,null,D,P,x,b);let ln,Dn;dl(Lt);try{const Wn=function Oc(o,a,u,f,m,b){const D=u[1];u[20]=o;const P=Vd(D,20,2,"#host",null),Q=P.mergedAttrs=a.hostAttrs;null!==Q&&(Jl(P,Q,!0),null!==o&&(is(m,o,Q),null!==P.classes&&cu(m,o,P.classes),null!==P.styles&&Ah(m,o,P.styles)));const oe=f.createRenderer(o,a),ve=Bd(u,kg(a),null,a.onPush?64:16,u[20],P,f,oe,b||null,null);return D.firstCreatePass&&(ye(I(P,u),D,a.type),Ph(D,P),Bg(P,u.length,1)),$g(u,ve),u[20]=ve}(oe,this.componentDef,Lt,D,P);if(oe)if(f)is(P,oe,["ng-version",gb.full]);else{const{attrs:Qt,classes:_i}=function $v(o){const a=[],u=[];let f=1,m=2;for(;f<o.length;){let b=o[f];if("string"==typeof b)2===m?""!==b&&a.push(b,o[++f]):8===m&&u.push(b);else{if(!wl(m))break;m=b}f++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);Qt&&is(P,oe,Qt),_i&&_i.length>0&&cu(P,oe,_i.join(" "))}if(Dn=ft(lt,20),void 0!==u){const Qt=Dn.projection=[];for(let _i=0;_i<this.ngContentSelectors.length;_i++){const Er=u[_i];Qt.push(null!=Er?Array.from(Er):null)}}ln=function tm(o,a,u,f,m){const b=u[1],D=function R_(o,a,u){const f=oi();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Vg(o,f,a,Ud(o,a,1,null),u));const m=Fr(a,o,f.directiveStart,f);Gn(m,a);const b=le(f,a);return b&&Gn(b,a),m}(b,u,a);if(f.components.push(D),o[8]=D,m&&m.forEach(P=>P(D,a)),a.contentQueries){const P=oi();a.contentQueries(1,D,P.directiveStart)}const x=oi();return!b.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(Wo(x.index),s0(u[1],x,0,x.directiveStart,x.directiveEnd,a),Fg(a,D)),D}(Wn,this.componentDef,Lt,$e,[sy]),jd(lt,Lt,null)}finally{Ra()}return new n1(this.componentType,ln,Mp(Dn,Lt),Lt,Dn)}}class n1 extends class $w{}{constructor(a,u,f,m,b){super(),this.location=f,this._rootLView=m,this._tNode=b,this.instance=u,this.hostView=this.changeDetectorRef=new Qw(m),this.componentType=a}get injector(){return new Bs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class xp{}class yb{}const Op=new Map;class LC extends xp{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new RC(this);const f=Yt(a);this._bootstrapComponents=Cl(f.bootstrap),this._r3Injector=u0(a,u,[{provide:xp,useValue:this},{provide:Nm,useValue:this.componentFactoryResolver}],pe(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,u=Ha.THROW_IF_NOT_FOUND,f=Jt.Default){return a===Ha||a===xp||a===Kg?this:this._r3Injector.get(a,u,f)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class vb extends yb{constructor(a){super(),this.moduleType=a,null!==Yt(a)&&function s1(o){const a=new Set;!function u(f){const m=Yt(f,!0),b=m.id;null!==b&&(function PC(o,a,u){if(a&&a!==u)throw new Error(`Duplicate module registered for ${o} - ${pe(a)} vs ${pe(a.name)}`)}(b,Op.get(b),f),Op.set(b,f));const D=Cl(m.imports);for(const x of D)a.has(x)||(a.add(x),u(x))}(o)}(a)}create(a){return new LC(this.moduleType,a)}}function BC(o,a,u){const f=Ns()+o,m=Y();return m[f]===wi?Dl(m,f,u?a.call(u):a()):function Gh(o,a){return o[a]}(m,f)}function VC(o,a,u,f){return function Rm(o,a,u,f,m,b){const D=a+u;return Vo(o,D,m)?Dl(o,D+1,b?f.call(b,m):f(m)):Om(o,D+1)}(Y(),Ns(),o,a,u,f)}function UC(o,a,u,f,m){return Vy(Y(),Ns(),o,a,u,f,m)}function jC(o,a,u,f,m,b){return function Uy(o,a,u,f,m,b,D,x){const P=a+u;return function hp(o,a,u,f,m){const b=gu(o,a,u,f);return Vo(o,a+2,m)||b}(o,P,m,b,D)?Dl(o,P+3,x?f.call(x,m,b,D):f(m,b,D)):Om(o,P+3)}(Y(),Ns(),o,a,u,f,m,b)}function Om(o,a){const u=o[a];return u===wi?void 0:u}function Vy(o,a,u,f,m,b,D){const x=a+u;return gu(o,x,m,b)?Dl(o,x+2,D?f.call(D,m,b):f(m,b)):Om(o,x+2)}function jy(o,a){const u=ct();let f;const m=o+20;u.firstCreatePass?(f=function d1(o,a){if(a)for(let u=a.length-1;u>=0;u--){const f=a[u];if(o===f.name)return f}}(a,u.pipeRegistry),u.data[m]=f,f.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(m,f.onDestroy)):f=u.data[m];const b=f.factory||(f.factory=Fs(f.type)),D=kn(yp);try{const x=jl(!1),P=b();return jl(x),function fy(o,a,u,f){u>=o.data.length&&(o.data[u]=null,o.blueprint[u]=null),a[u]=f}(u,Y(),m,P),P}finally{kn(D)}}function $y(o,a,u,f){const m=o+20,b=Y(),D=kt(b,m);return function kp(o,a){return o[1].data[a].pure}(b,m)?Vy(b,Ns(),a,D.transform,u,f,D):D.transform(u,f)}function Eb(o){return a=>{setTimeout(o,void 0,a)}}const Du=class bb extends _.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,f){var m,b,D;let x=a,P=u||(()=>null),Q=f;if(a&&"object"==typeof a){const ve=a;x=null===(m=ve.next)||void 0===m?void 0:m.bind(ve),P=null===(b=ve.error)||void 0===b?void 0:b.bind(ve),Q=null===(D=ve.complete)||void 0===D?void 0:D.bind(ve)}this.__isAsync&&(P=Eb(P),x&&(x=Eb(x)),Q&&(Q=Eb(Q)));const oe=super.subscribe({next:x,error:P,complete:Q});return a instanceof c.w0&&a.add(oe),oe}};function h1(){return this._results[Hh()]()}class Hy{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Hh(),f=Hy.prototype;f[u]||(f[u]=h1)}get changes(){return this._changes||(this._changes=new Du)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const f=this;f.dirty=!1;const m=bo(a);(this._changesDetected=!function vo(o,a,u){if(o.length!==a.length)return!1;for(let f=0;f<o.length;f++){let m=o[f],b=a[f];if(u&&(m=u(m),b=u(b)),b!==m)return!1}return!0}(f._results,m,u))&&(f._results=m,f.length=m.length,f.last=m[this.length-1],f.first=m[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Lc=(()=>{class o{}return o.__NG_ELEMENT_ID__=ZC,o})();const Cb=Lc,Pp=class extends Cb{constructor(a,u,f){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=f}createEmbeddedView(a){const u=this._declarationTContainer.tViews,f=Bd(this._declarationLView,u,a,16,null,u.declTNode,null,null,null,null);f[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(f[19]=b.createEmbeddedView(u)),jd(u,f,a),new xm(f)}};function ZC(){return km(oi(),Y())}function km(o,a){return 4&o.type?new Pp(a,o,Mp(o,a)):null}let sh=(()=>{class o{}return o.__NG_ELEMENT_ID__=uf,o})();function uf(){return Gy(oi(),Y())}const WC=sh,Tb=class extends WC{constructor(a,u,f){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=f}get element(){return Mp(this._hostTNode,this._hostLView)}get injector(){return new Bs(this._hostTNode,this._hostLView)}get parentInjector(){const a=he(this._hostTNode,this._hostLView);if(_d(a)){const u=ka(a,this._hostLView),f=fl(a);return new Bs(u[1].data[f+8],u)}return new Bs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=$o(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,f){const m=a.createEmbeddedView(u||{});return this.insert(m,f),m}createComponent(a,u,f,m,b){const D=a&&!function gl(o){return"function"==typeof o}(a);let x;if(D)x=u;else{const ve=u||{};x=ve.index,f=ve.injector,m=ve.projectableNodes,b=ve.ngModuleRef}const P=D?a:new _b(Me(a)),Q=f||this.parentInjector;if(!b&&null==P.ngModule&&Q){const ve=Q.get(xp,null);ve&&(b=ve)}const oe=P.create(Q,m,void 0,b);return this.insert(oe.hostView,x),oe}insert(a,u){const f=a._lView,m=f[1];if(function si(o){return ei(o[3])}(f)){const oe=this.indexOf(a);if(-1!==oe)this.detach(oe);else{const ve=f[3],$e=new Tb(ve,ve[6],ve[3]);$e.detach($e.indexOf(a))}}const b=this._adjustIndex(u),D=this._lContainer;!function pg(o,a,u,f){const m=10+f,b=u.length;f>0&&(u[m-1][4]=a),f<b-10?(a[4]=u[m],ph(u,10+f,a)):(u.push(a),a[4]=null),a[3]=u;const D=a[17];null!==D&&u!==D&&function Lv(o,a){const u=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===u?o[9]=[a]:u.push(a)}(D,a);const x=a[19];null!==x&&x.insertView(o),a[2]|=128}(m,f,D,b);const x=Dh(b,D),P=f[11],Q=Ic(P,D[7]);return null!==Q&&function fg(o,a,u,f,m,b){f[0]=m,f[6]=a,jf(o,f,u,1,m,b)}(m,D[6],P,f,Q,x),a.attachToViewContainerRef(),ph(df(D),b,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=$o(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),f=oo(this._lContainer,u);f&&(zo(df(this._lContainer),u),Bf(f[1],f))}detach(a){const u=this._adjustIndex(a,-1),f=oo(this._lContainer,u);return f&&null!=zo(df(this._lContainer),u)?new xm(f):null}_adjustIndex(a,u=0){return null==a?this.length+u:a}};function $o(o){return o[8]}function df(o){return o[8]||(o[8]=[])}function Gy(o,a){let u;const f=a[o.index];if(ei(f))u=f;else{let m;if(8&o.type)m=Fn(f);else{const b=a[11];m=b.createComment("");const D=le(o,a);Qu(b,Ic(b,D),m,function kd(o,a){return Bt(o)?o.nextSibling(a):a.nextSibling}(b,D),!1)}a[o.index]=u=V_(f,a,m,o),$g(a,u)}return new Tb(u,o,a)}class Fp{constructor(a){this.queryList=a,this.matches=null}clone(){return new Fp(this.queryList)}setDirty(){this.queryList.setDirty()}}class wb{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const f=null!==a.contentQueries?a.contentQueries[0]:u.length,m=[];for(let b=0;b<f;b++){const D=u.getByIndex(b);m.push(this.queries[D.indexInDeclarationView].clone())}return new wb(m)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==XC(a,u).matches&&this.queries[u].setDirty()}}class Au{constructor(a,u,f=null){this.predicate=a,this.flags=u,this.read=f}}class sc{constructor(a=[]){this.queries=a}elementStart(a,u){for(let f=0;f<this.queries.length;f++)this.queries[f].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let f=0;f<this.length;f++){const m=null!==u?u.length:0,b=this.getByIndex(f).embeddedTView(a,m);b&&(b.indexInDeclarationView=f,null!==u?u.push(b):u=[b])}return null!==u?new sc(u):null}template(a,u){for(let f=0;f<this.queries.length;f++)this.queries[f].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class dd{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new dd(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let f=a.parent;for(;null!==f&&8&f.type&&f.index!==u;)f=f.parent;return u===(null!==f?f.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const f=this.metadata.predicate;if(Array.isArray(f))for(let m=0;m<f.length;m++){const b=f[m];this.matchTNodeWithReadOption(a,u,f1(u,b)),this.matchTNodeWithReadOption(a,u,zs(u,a,b,!1,!1))}else f===Lc?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,zs(u,a,f,!1,!1))}matchTNodeWithReadOption(a,u,f){if(null!==f){const m=this.metadata.read;if(null!==m)if(m===Mm||m===sh||m===Lc&&4&u.type)this.addMatch(u.index,-2);else{const b=zs(u,a,m,!1,!1);null!==b&&this.addMatch(u.index,b)}else this.addMatch(u.index,f)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function f1(o,a){const u=o.localNames;if(null!==u)for(let f=0;f<u.length;f+=2)if(u[f]===a)return u[f+1];return null}function Db(o,a,u,f){return-1===u?function Pm(o,a){return 11&o.type?Mp(o,a):4&o.type?km(o,a):null}(a,o):-2===u?function qC(o,a,u){return u===Mm?Mp(a,o):u===Lc?km(a,o):u===sh?Gy(a,o):void 0}(o,a,f):Fr(o,o[1],u,a)}function Ho(o,a,u,f){const m=a[19].queries[f];if(null===m.matches){const b=o.data,D=u.matches,x=[];for(let P=0;P<D.length;P+=2){const Q=D[P];x.push(Q<0?null:Db(a,b[Q],D[P+1],u.metadata.read))}m.matches=x}return m.matches}function Zy(o,a,u,f){const m=o.queries.getByIndex(u),b=m.matches;if(null!==b){const D=Ho(o,a,m,u);for(let x=0;x<b.length;x+=2){const P=b[x];if(P>0)f.push(D[x/2]);else{const Q=b[x+1],oe=a[-P];for(let ve=10;ve<oe.length;ve++){const $e=oe[ve];$e[17]===$e[3]&&Zy($e[1],$e,Q,f)}if(null!==oe[9]){const ve=oe[9];for(let $e=0;$e<ve.length;$e++){const lt=ve[$e];Zy(lt[1],lt,Q,f)}}}}}return f}function zC(o){const a=Y(),u=ct(),f=ul();ga(f+1);const m=XC(u,f);if(o.dirty&&ri(a)===(2==(2&m.metadata.flags))){if(null===m.matches)o.reset([]);else{const b=m.crossesNgTemplate?Zy(u,a,f,[]):Ho(u,a,m,f);o.reset(b,Ww),o.notifyOnChanges()}return!0}return!1}function KC(o,a,u){const f=ct();f.firstCreatePass&&(Fm(f,new Au(o,a,u),-1),2==(2&a)&&(f.staticViewQueries=!0)),Wy(f,Y(),a)}function YC(o,a,u,f){const m=ct();if(m.firstCreatePass){const b=oi();Fm(m,new Au(a,u,f),b.index),function Lp(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(m,o),2==(2&u)&&(m.staticContentQueries=!0)}Wy(m,Y(),u)}function QC(){return function JC(o,a){return o[19].queries[a].queryList}(Y(),ul())}function Wy(o,a,u){const f=new Hy(4==(4&u));Xv(o,a,f,f.destroy),null===a[19]&&(a[19]=new wb),a[19].queries.push(new Fp(f))}function Fm(o,a,u){null===o.queries&&(o.queries=new sc),o.queries.track(new dd(a,u))}function XC(o,a){return o.queries.getByIndex(a)}function Bp(o,a){return km(o,a)}function Bm(...o){}const iv=new Ui("Application Initializer");let ff=(()=>{class o{constructor(u){this.appInits=u,this.resolve=Bm,this.reject=Bm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((f,m)=>{this.resolve=f,this.reject=m})}runInitializers(){if(this.initialized)return;const u=[],f=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let m=0;m<this.appInits.length;m++){const b=this.appInits[m]();if(Zr(b))u.push(b);else if(od(b)){const D=new Promise((x,P)=>{b.subscribe({complete:x,error:P})});u.push(D)}}Promise.all(u).then(()=>{f()}).catch(m=>{this.reject(m)}),0===u.length&&f(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(Cs(iv,8))},o.\u0275prov=Ot({token:o,factory:o.\u0275fac}),o})();const Pb=new Ui("AppId"),C1={provide:Pb,useFactory:function pT(){return`${rv()}${rv()}${rv()}`},deps:[]};function rv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Fb=new Ui("Platform Initializer"),Lb=new Ui("Platform ID"),Vm=new Ui("appBootstrapListener");let Bb=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=Ot({token:o,factory:o.\u0275fac}),o})();const Ur=new Ui("LocaleId"),jr=new Ui("DefaultCurrencyCode");class Vb{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let Ub=(()=>{class o{compileModuleSync(u){return new vb(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const f=this.compileModuleSync(u),b=Cl(Yt(u).declarations).reduce((D,x)=>{const P=Me(x);return P&&D.push(new _b(P)),D},[]);return new Vb(f,b)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=Ot({token:o,factory:o.\u0275fac}),o})();const js=(()=>Promise.resolve(0))();function sr(o){"undefined"==typeof Zone?js.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Ol{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:f=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Du(!1),this.onMicrotaskEmpty=new Du(!1),this.onStable=new Du(!1),this.onError=new Du(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const m=this;m._nesting=0,m._outer=m._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(m._inner=m._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(m._inner=m._inner.fork(Zone.longStackTraceZoneSpec)),m.shouldCoalesceEventChangeDetection=!f&&u,m.shouldCoalesceRunChangeDetection=f,m.lastRequestAnimationFrameId=-1,m.nativeRequestAnimationFrame=function za(){let o=sn.requestAnimationFrame,a=sn.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const f=a[Zone.__symbol__("OriginalDelegate")];f&&(a=f)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function I1(o){const a=()=>{!function D1(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(sn,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,$b(o),o.isCheckStableRunning=!0,ll(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),$b(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,f,m,b,D,x)=>{try{return Hb(o),u.invokeTask(m,b,D,x)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===b.type||o.shouldCoalesceRunChangeDetection)&&a(),oh(o)}},onInvoke:(u,f,m,b,D,x,P)=>{try{return Hb(o),u.invoke(m,b,D,x,P)}finally{o.shouldCoalesceRunChangeDetection&&a(),oh(o)}},onHasTask:(u,f,m,b)=>{u.hasTask(m,b),f===m&&("microTask"==b.change?(o._hasPendingMicrotasks=b.microTask,$b(o),ll(o)):"macroTask"==b.change&&(o.hasPendingMacrotasks=b.macroTask))},onHandleError:(u,f,m,b)=>(u.handleError(m,b),o.runOutsideAngular(()=>o.onError.emit(b)),!1)})}(m)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ol.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ol.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,u,f){return this._inner.run(a,u,f)}runTask(a,u,f,m){const b=this._inner,D=b.scheduleEventTask("NgZoneEvent: "+m,a,jb,Bm,Bm);try{return b.runTask(D,u,f)}finally{b.cancelTask(D)}}runGuarded(a,u,f){return this._inner.runGuarded(a,u,f)}runOutsideAngular(a){return this._outer.run(a)}}const jb={};function ll(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function $b(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function Hb(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function oh(o){o._nesting--,ll(o)}class Gb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Du,this.onMicrotaskEmpty=new Du,this.onStable=new Du,this.onError=new Du}run(a,u,f){return a.apply(u,f)}runGuarded(a,u,f){return a.apply(u,f)}runOutsideAngular(a){return a()}runTask(a,u,f,m){return a.apply(u,f)}}let jp=(()=>{class o{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ol.assertNotInAngularZone(),sr(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())sr(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(f=>!f.updateCb||!f.updateCb(u)||(clearTimeout(f.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,f,m){let b=-1;f&&f>0&&(b=setTimeout(()=>{this._callbacks=this._callbacks.filter(D=>D.timeoutId!==b),u(this._didWork,this.getPendingTasks())},f)),this._callbacks.push({doneCb:u,timeoutId:b,updateCb:m})}whenStable(u,f,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,f,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,f,m){return[]}}return o.\u0275fac=function(u){return new(u||o)(Cs(Ol))},o.\u0275prov=Ot({token:o,factory:o.\u0275fac}),o})(),gT=(()=>{class o{constructor(){this._applications=new Map,Zb.addToWindow(this)}registerApplication(u,f){this._applications.set(u,f)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,f=!0){return Zb.findTestabilityInTree(this,u,f)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=Ot({token:o,factory:o.\u0275fac}),o})();class mT{addToWindow(a){}findTestabilityInTree(a,u,f){return null}}function A1(o){Zb=o}let Bc,Zb=new mT;const jm=new Ui("AllowMultipleToken");class sv{constructor(a,u){this.name=a,this.token=u}}function Vc(o,a,u=[]){const f=`Platform: ${a}`,m=new Ui(f);return(b=[])=>{let D=vT();if(!D||D.injector.get(jm,!1))if(o)o(u.concat(b).concat({provide:m,useValue:!0}));else{const x=u.concat(b).concat({provide:m,useValue:!0},{provide:K_,useValue:"platform"});!function yT(o){if(Bc&&!Bc.destroyed&&!Bc.injector.get(jm,!1))throw new mt(400,"");Bc=o.get(Ka);const a=o.get(Fb,null);a&&a.forEach(u=>u())}(Ha.create({providers:x,name:f}))}return function ov(o){const a=vT();if(!a)throw new mt(401,"");return a}()}}function vT(){return Bc&&!Bc.destroyed?Bc:null}let Ka=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,f){const x=function S1(o,a){let u;return u="noop"===o?new Gb:("zone.js"===o?void 0:o)||new Ol({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),u}(f?f.ngZone:void 0,{ngZoneEventCoalescing:f&&f.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:f&&f.ngZoneRunCoalescing||!1}),P=[{provide:Ol,useValue:x}];return x.run(()=>{const Q=Ha.create({providers:P,parent:this.injector,name:u.moduleType.name}),oe=u.create(Q),ve=oe.injector.get(Ad,null);if(!ve)throw new mt(402,"");return x.runOutsideAngular(()=>{const $e=x.onError.subscribe({next:lt=>{ve.handleError(lt)}});oe.onDestroy(()=>{lv(this._modules,oe),$e.unsubscribe()})}),function Wb(o,a,u){try{const f=u();return Zr(f)?f.catch(m=>{throw a.runOutsideAngular(()=>o.handleError(m)),m}):f}catch(f){throw a.runOutsideAngular(()=>o.handleError(f)),f}}(ve,x,()=>{const $e=oe.injector.get(ff);return $e.runInitializers(),$e.donePromise.then(()=>(function oC(o){(function $t(o,a){null==o&&qt(a,o,null,"!=")})(o,"Expected localeId to be defined"),"string"==typeof o&&(sC=o.toLowerCase().replace(/_/g,"-"))}(oe.injector.get(Ur,xy)||xy),this._moduleDoBootstrap(oe),oe))})})}bootstrapModule(u,f=[]){const m=av({},f);return function _T(o,a,u){const f=new vb(u);return Promise.resolve(f)}(0,0,u).then(b=>this.bootstrapModuleFactory(b,m))}_moduleDoBootstrap(u){const f=u.injector.get($m);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(m=>f.bootstrap(m));else{if(!u.instance.ngDoBootstrap)throw new mt(403,"");u.instance.ngDoBootstrap(f)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new mt(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(Cs(Ha))},o.\u0275prov=Ot({token:o,factory:o.\u0275fac}),o})();function av(o,a){return Array.isArray(a)?a.reduce(av,o):Object.assign(Object.assign({},o),a)}let $m=(()=>{class o{constructor(u,f,m,b,D){this._zone=u,this._injector=f,this._exceptionHandler=m,this._componentFactoryResolver=b,this._initStatus=D,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const x=new J.y(Q=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{Q.next(this._stable),Q.complete()})}),P=new J.y(Q=>{let oe;this._zone.runOutsideAngular(()=>{oe=this._zone.onStable.subscribe(()=>{Ol.assertNotInAngularZone(),sr(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,Q.next(!0))})})});const ve=this._zone.onUnstable.subscribe(()=>{Ol.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{Q.next(!1)}))});return()=>{oe.unsubscribe(),ve.unsubscribe()}});this.isStable=(0,Ee.T)(x,P.pipe((0,Ie.B)()))}bootstrap(u,f){if(!this._initStatus.done)throw new mt(405,"");let m;m=u instanceof NC?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(m.componentType);const b=function mr(o){return o.isBoundToModule}(m)?void 0:this._injector.get(xp),x=m.create(Ha.NULL,[],f||m.selector,b),P=x.location.nativeElement,Q=x.injector.get(jp,null),oe=Q&&x.injector.get(gT);return Q&&oe&&oe.registerApplication(P,Q),x.onDestroy(()=>{this.detachView(x.hostView),lv(this.components,x),oe&&oe.unregisterApplication(P)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new mt(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const f=u;this._views.push(f),f.attachToAppRef(this)}detachView(u){const f=u;lv(this._views,f),f.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(Vm,[]).concat(this._bootstrapListeners).forEach(m=>m(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(u){return new(u||o)(Cs(Ol),Cs(Ha),Cs(Ad),Cs(Nm),Cs(ff))},o.\u0275prov=Ot({token:o,factory:o.\u0275fac}),o})();function lv(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}let gf=!0,zb=!1;function ET(){return zb=!0,gf}function N1(){if(zb)throw new Error("Cannot enable prod mode after platform setup.");gf=!1}let M1=(()=>{class o{}return o.__NG_ELEMENT_ID__=x1,o})();function x1(o){return function cv(o,a,u){if(Ri(o)&&!u){const f=cn(o.index,a);return new xm(f,f)}return 47&o.type?new xm(a[16],a):null}(oi(),Y(),16==(16&o))}class DT{constructor(){}supports(a){return qd(a)}create(a){return new P1(a)}}const Jb=(o,a)=>a;class P1{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Jb}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,f=this._removalsHead,m=0,b=null;for(;u||f;){const D=!f||u&&u.currentIndex<IT(f,m,b)?u:f,x=IT(D,m,b),P=D.currentIndex;if(D===f)m--,f=f._nextRemoved;else if(u=u._next,null==D.previousIndex)m++;else{b||(b=[]);const Q=x-m,oe=P-m;if(Q!=oe){for(let $e=0;$e<Q;$e++){const lt=$e<b.length?b[$e]:b[$e]=0,Lt=lt+$e;oe<=Lt&&Lt<Q&&(b[$e]=lt+1)}b[D.previousIndex]=oe-Q}}x!==P&&a(D,x,P)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!qd(a))throw new mt(900,"");return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let m,b,D,u=this._itHead,f=!1;if(Array.isArray(a)){this.length=a.length;for(let x=0;x<this.length;x++)b=a[x],D=this._trackByFn(x,b),null!==u&&Object.is(u.trackById,D)?(f&&(u=this._verifyReinsertion(u,b,D,x)),Object.is(u.item,b)||this._addIdentityChange(u,b)):(u=this._mismatch(u,b,D,x),f=!0),u=u._next}else m=0,function cy(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[Hh()]();let f;for(;!(f=u.next()).done;)a(f.value)}}(a,x=>{D=this._trackByFn(m,x),null!==u&&Object.is(u.trackById,D)?(f&&(u=this._verifyReinsertion(u,x,D,m)),Object.is(u.item,x)||this._addIdentityChange(u,x)):(u=this._mismatch(u,x,D,m),f=!0),u=u._next,m++}),this.length=m;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,f,m){let b;return null===a?b=this._itTail:(b=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,b,m)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(f,m))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,b,m)):a=this._addAfter(new F1(u,f),b,m),a}_verifyReinsertion(a,u,f,m){let b=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null);return null!==b?a=this._reinsertAfter(b,a._prev,m):a.currentIndex!=m&&(a.currentIndex=m,this._addToMoves(a,m)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,f){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const m=a._prevRemoved,b=a._nextRemoved;return null===m?this._removalsHead=b:m._nextRemoved=b,null===b?this._removalsTail=m:b._prevRemoved=m,this._insertAfter(a,u,f),this._addToMoves(a,f),a}_moveAfter(a,u,f){return this._unlink(a),this._insertAfter(a,u,f),this._addToMoves(a,f),a}_addAfter(a,u,f){return this._insertAfter(a,u,f),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,f){const m=null===u?this._itHead:u._next;return a._next=m,a._prev=u,null===m?this._itTail=a:m._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new _v),this._linkedRecords.put(a),a.currentIndex=f,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,f=a._next;return null===u?this._itHead=f:u._next=f,null===f?this._itTail=u:f._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _v),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class F1{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class L1{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let f;for(f=this._head;null!==f;f=f._nextDup)if((null===u||u<=f.currentIndex)&&Object.is(f.trackById,a))return f;return null}remove(a){const u=a._prevDup,f=a._nextDup;return null===u?this._head=f:u._nextDup=f,null===f?this._tail=u:f._prevDup=u,null===this._head}}class _v{constructor(){this.map=new Map}put(a){const u=a.trackById;let f=this.map.get(u);f||(f=new L1,this.map.set(u,f)),f.add(a)}get(a,u){const m=this.map.get(a);return m?m.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function IT(o,a,u){const f=o.previousIndex;if(null===f)return f;let m=0;return u&&f<u.length&&(m=u[f]),f+a+m}class yv{constructor(){}supports(a){return a instanceof Map||dp(a)}create(){return new B1}}class B1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||dp(a)))throw new mt(900,"")}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(f,m)=>{if(u&&u.key===m)this._maybeAddToChanges(u,f),this._appendAfter=u,u=u._next;else{const b=this._getOrCreateRecordForKey(m,f);u=this._insertBeforeOrAppend(u,b)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let f=u;null!==f;f=f._nextRemoved)f===this._mapHead&&(this._mapHead=null),this._records.delete(f.key),f._nextRemoved=f._next,f.previousValue=f.currentValue,f.currentValue=null,f._prev=null,f._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const f=a._prev;return u._next=a,u._prev=f,a._prev=u,f&&(f._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const m=this._records.get(a);this._maybeAddToChanges(m,u);const b=m._prev,D=m._next;return b&&(b._next=D),D&&(D._prev=b),m._next=null,m._prev=null,m}const f=new vv(a);return this._records.set(a,f),f.currentValue=u,this._addToAdditions(f),f}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(f=>u(a[f],f))}}class vv{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Xb(){return new Wm([new DT])}let Wm=(()=>{class o{constructor(u){this.factories=u}static create(u,f){if(null!=f){const m=f.factories.slice();u=u.concat(m)}return new o(u)}static extend(u){return{provide:o,useFactory:f=>o.create(u,f||Xb()),deps:[[o,new On,new Gt]]}}find(u){const f=this.factories.find(m=>m.supports(u));if(null!=f)return f;throw new mt(901,"")}}return o.\u0275prov=Ot({token:o,providedIn:"root",factory:Xb}),o})();function AT(){return new _f([new yv])}let _f=(()=>{class o{constructor(u){this.factories=u}static create(u,f){if(f){const m=f.factories.slice();u=u.concat(m)}return new o(u)}static extend(u){return{provide:o,useFactory:f=>o.create(u,f||AT()),deps:[[o,new On,new Gt]]}}find(u){const f=this.factories.find(b=>b.supports(u));if(f)return f;throw new mt(901,"")}}return o.\u0275prov=Ot({token:o,providedIn:"root",factory:AT}),o})();const Hp=[new yv],nE=new Wm([new DT]),V1=new _f(Hp),ST=Vc(null,"core",[{provide:Lb,useValue:"unknown"},{provide:Ka,deps:[Ha]},{provide:gT,deps:[]},{provide:Bb,deps:[]}]),iE=[{provide:$m,useClass:$m,deps:[Ol,Ha,Ad,Nm,ff]},{provide:Xw,deps:[Ol],useFactory:function rE(o){let a=[];return o.onStable.subscribe(()=>{for(;a.length;)a.pop()()}),function(u){a.push(u)}}},{provide:ff,useClass:ff,deps:[[new Gt,iv]]},{provide:Ub,useClass:Ub,deps:[]},C1,{provide:Wm,useFactory:function U1(){return nE},deps:[]},{provide:_f,useFactory:function j1(){return V1},deps:[]},{provide:Ur,useFactory:function $1(o){return o||function oc(){return"undefined"!=typeof $localize&&$localize.locale||xy}()},deps:[[new yt(Ur),new Gt,new On]]},{provide:jr,useValue:"USD"}];let sE=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(Cs($m))},o.\u0275mod=Ce({type:o}),o.\u0275inj=ht({providers:iE}),o})()},2382:(rn,Ye,V)=>{V.d(Ye,{Fj:()=>Pe,qu:()=>qi,u:()=>nr,sg:()=>Do,u5:()=>vn,JU:()=>mt,JJ:()=>Ai,JL:()=>lr,On:()=>Jr,wV:()=>Os,UX:()=>es,kI:()=>Ne,_Y:()=>zr});var _=V(5e3),c=V(9808),J=V(8306),Ee=V(4742),Ie=V(8421),Ze=V(3269),Ge=V(5403),pe=V(3268),ke=V(1810),ge=V(8996),Fe=V(4004);let _t=(()=>{class W{constructor(F,Y){this._renderer=F,this._elementRef=Y,this.onChange=ct=>{},this.onTouched=()=>{}}setProperty(F,Y){this._renderer.setProperty(this._elementRef.nativeElement,F,Y)}registerOnTouched(F){this.onTouched=F}registerOnChange(F){this.onChange=F}setDisabledState(F){this.setProperty("disabled",F)}}return W.\u0275fac=function(F){return new(F||W)(_.Y36(_.Qsj),_.Y36(_.SBq))},W.\u0275dir=_.lG2({type:W}),W})(),rt=(()=>{class W extends _t{}return W.\u0275fac=function(){let j;return function(Y){return(j||(j=_.n5z(W)))(Y||W)}}(),W.\u0275dir=_.lG2({type:W,features:[_.qOj]}),W})();const mt=new _.OlP("NgValueAccessor"),ze={provide:mt,useExisting:(0,_.Gpc)(()=>Pe),multi:!0},vt=new _.OlP("CompositionEventMode");let Pe=(()=>{class W extends _t{constructor(F,Y,ct){super(F,Y),this._compositionMode=ct,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ue(){const W=(0,c.q)()?(0,c.q)().getUserAgent():"";return/android (\d+)/.test(W.toLowerCase())}())}writeValue(F){this.setProperty("value",null==F?"":F)}_handleInput(F){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(F)}_compositionStart(){this._composing=!0}_compositionEnd(F){this._composing=!1,this._compositionMode&&this.onChange(F)}}return W.\u0275fac=function(F){return new(F||W)(_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(vt,8))},W.\u0275dir=_.lG2({type:W,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(F,Y){1&F&&_.NdJ("input",function(Ln){return Y._handleInput(Ln.target.value)})("blur",function(){return Y.onTouched()})("compositionstart",function(){return Y._compositionStart()})("compositionend",function(Ln){return Y._compositionEnd(Ln.target.value)})},features:[_._Bn([ze]),_.qOj]}),W})();function je(W){return null==W||0===W.length}function nt(W){return null!=W&&"number"==typeof W.length}const It=new _.OlP("NgValidators"),At=new _.OlP("NgAsyncValidators"),it=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ne{static min(j){return function We(W){return j=>{if(je(j.value)||je(W))return null;const F=parseFloat(j.value);return!isNaN(F)&&F<W?{min:{min:W,actual:j.value}}:null}}(j)}static max(j){return function Qe(W){return j=>{if(je(j.value)||je(W))return null;const F=parseFloat(j.value);return!isNaN(F)&&F>W?{max:{max:W,actual:j.value}}:null}}(j)}static required(j){return function dt(W){return je(W.value)?{required:!0}:null}(j)}static requiredTrue(j){return function wt(W){return!0===W.value?null:{required:!0}}(j)}static email(j){return function at(W){return je(W.value)||it.test(W.value)?null:{email:!0}}(j)}static minLength(j){return function In(W){return j=>je(j.value)||!nt(j.value)?null:j.value.length<W?{minlength:{requiredLength:W,actualLength:j.value.length}}:null}(j)}static maxLength(j){return function tn(W){return j=>nt(j.value)&&j.value.length>W?{maxlength:{requiredLength:W,actualLength:j.value.length}}:null}(j)}static pattern(j){return function wn(W){if(!W)return $t;let j,F;return"string"==typeof W?(F="","^"!==W.charAt(0)&&(F+="^"),F+=W,"$"!==W.charAt(W.length-1)&&(F+="$"),j=new RegExp(F)):(F=W.toString(),j=W),Y=>{if(je(Y.value))return null;const ct=Y.value;return j.test(ct)?null:{pattern:{requiredPattern:F,actualValue:ct}}}}(j)}static nullValidator(j){return null}static compose(j){return ht(j)}static composeAsync(j){return Mn(j)}}function $t(W){return null}function qt(W){return null!=W}function Nn(W){const j=(0,_.QGY)(W)?(0,ge.D)(W):W;return(0,_.CqO)(j),j}function bn(W){let j={};return W.forEach(F=>{j=null!=F?Object.assign(Object.assign({},j),F):j}),0===Object.keys(j).length?null:j}function pt(W,j){return j.map(F=>F(W))}function Le(W){return W.map(j=>function Ot(W){return!W.validate}(j)?j:F=>j.validate(F))}function ht(W){if(!W)return null;const j=W.filter(qt);return 0==j.length?null:function(F){return bn(pt(F,j))}}function Kt(W){return null!=W?ht(Le(W)):null}function Mn(W){if(!W)return null;const j=W.filter(qt);return 0==j.length?null:function(F){return function fe(...W){const j=(0,Ze.jO)(W),{args:F,keys:Y}=(0,Ee.D)(W),ct=new J.y(Ln=>{const{length:oi}=F;if(!oi)return void Ln.complete();const ts=new Array(oi);let Pr=oi,hs=oi;for(let Io=0;Io<oi;Io++){let Zo=!1;(0,Ie.Xf)(F[Io]).subscribe(new Ge.Q(Ln,ha=>{Zo||(Zo=!0,hs--),ts[Io]=ha},()=>Pr--,void 0,()=>{(!Pr||!Zo)&&(hs||Ln.next(Y?(0,ke.n)(Y,ts):ts),Ln.complete())}))}});return j?ct.pipe((0,pe.Z)(j)):ct}(pt(F,j).map(Nn)).pipe((0,Fe.U)(bn))}}function Kn(W){return null!=W?Mn(Le(W)):null}function ii(W,j){return null===W?[j]:Array.isArray(W)?[...W,j]:[W,j]}function Ki(W){return W._rawValidators}function Ei(W){return W._rawAsyncValidators}function $n(W){return W?Array.isArray(W)?W:[W]:[]}function Nt(W,j){return Array.isArray(W)?W.includes(j):W===j}function hi(W,j){const F=$n(j);return $n(W).forEach(ct=>{Nt(F,ct)||F.push(ct)}),F}function Jt(W,j){return $n(j).filter(F=>!Nt(W,F))}class Yn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(j){this._rawValidators=j||[],this._composedValidatorFn=Kt(this._rawValidators)}_setAsyncValidators(j){this._rawAsyncValidators=j||[],this._composedAsyncValidatorFn=Kn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(j){this._onDestroyCallbacks.push(j)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(j=>j()),this._onDestroyCallbacks=[]}reset(j){this.control&&this.control.reset(j)}hasError(j,F){return!!this.control&&this.control.hasError(j,F)}getError(j,F){return this.control?this.control.getError(j,F):null}}class Ht extends Yn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class kn extends Yn{get formDirective(){return null}get path(){return null}}class Ti{constructor(j){this._cd=j}is(j){var F,Y,ct;return"submitted"===j?!!(null===(F=this._cd)||void 0===F?void 0:F.submitted):!!(null===(ct=null===(Y=this._cd)||void 0===Y?void 0:Y.control)||void 0===ct?void 0:ct[j])}}let Ai=(()=>{class W extends Ti{constructor(F){super(F)}}return W.\u0275fac=function(F){return new(F||W)(_.Y36(Ht,2))},W.\u0275dir=_.lG2({type:W,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(F,Y){2&F&&_.ekj("ng-untouched",Y.is("untouched"))("ng-touched",Y.is("touched"))("ng-pristine",Y.is("pristine"))("ng-dirty",Y.is("dirty"))("ng-valid",Y.is("valid"))("ng-invalid",Y.is("invalid"))("ng-pending",Y.is("pending"))},features:[_.qOj]}),W})(),lr=(()=>{class W extends Ti{constructor(F){super(F)}}return W.\u0275fac=function(F){return new(F||W)(_.Y36(kn,10))},W.\u0275dir=_.lG2({type:W,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(F,Y){2&F&&_.ekj("ng-untouched",Y.is("untouched"))("ng-touched",Y.is("touched"))("ng-pristine",Y.is("pristine"))("ng-dirty",Y.is("dirty"))("ng-valid",Y.is("valid"))("ng-invalid",Y.is("invalid"))("ng-pending",Y.is("pending"))("ng-submitted",Y.is("submitted"))},features:[_.qOj]}),W})();function nn(W,j){return[...j.path,W]}function fn(W,j){we(W,j),j.valueAccessor.writeValue(W.value),function Ce(W,j){j.valueAccessor.registerOnChange(F=>{W._pendingValue=F,W._pendingChange=!0,W._pendingDirty=!0,"change"===W.updateOn&&X(W,j)})}(W,j),function ue(W,j){const F=(Y,ct)=>{j.valueAccessor.writeValue(Y),ct&&j.viewToModelUpdate(Y)};W.registerOnChange(F),j._registerOnDestroy(()=>{W._unregisterOnChange(F)})}(W,j),function de(W,j){j.valueAccessor.registerOnTouched(()=>{W._pendingTouched=!0,"blur"===W.updateOn&&W._pendingChange&&X(W,j),"submit"!==W.updateOn&&W.markAsTouched()})}(W,j),function xe(W,j){if(j.valueAccessor.setDisabledState){const F=Y=>{j.valueAccessor.setDisabledState(Y)};W.registerOnDisabledChange(F),j._registerOnDestroy(()=>{W._unregisterOnDisabledChange(F)})}}(W,j)}function dn(W,j,F=!0){const Y=()=>{};j.valueAccessor&&(j.valueAccessor.registerOnChange(Y),j.valueAccessor.registerOnTouched(Y)),Ve(W,j),W&&(j._invokeOnDestroyCallbacks(),W._registerOnCollectionChange(()=>{}))}function on(W,j){W.forEach(F=>{F.registerOnValidatorChange&&F.registerOnValidatorChange(j)})}function we(W,j){const F=Ki(W);null!==j.validator?W.setValidators(ii(F,j.validator)):"function"==typeof F&&W.setValidators([F]);const Y=Ei(W);null!==j.asyncValidator?W.setAsyncValidators(ii(Y,j.asyncValidator)):"function"==typeof Y&&W.setAsyncValidators([Y]);const ct=()=>W.updateValueAndValidity();on(j._rawValidators,ct),on(j._rawAsyncValidators,ct)}function Ve(W,j){let F=!1;if(null!==W){if(null!==j.validator){const ct=Ki(W);if(Array.isArray(ct)&&ct.length>0){const Ln=ct.filter(oi=>oi!==j.validator);Ln.length!==ct.length&&(F=!0,W.setValidators(Ln))}}if(null!==j.asyncValidator){const ct=Ei(W);if(Array.isArray(ct)&&ct.length>0){const Ln=ct.filter(oi=>oi!==j.asyncValidator);Ln.length!==ct.length&&(F=!0,W.setAsyncValidators(Ln))}}}const Y=()=>{};return on(j._rawValidators,Y),on(j._rawAsyncValidators,Y),F}function X(W,j){W._pendingDirty&&W.markAsDirty(),W.setValue(W._pendingValue,{emitModelToViewChange:!1}),j.viewToModelUpdate(W._pendingValue),W._pendingChange=!1}function Yt(W,j){if(!W.hasOwnProperty("model"))return!1;const F=W.model;return!!F.isFirstChange()||!Object.is(j,F.currentValue)}function Mt(W,j){if(!j)return null;let F,Y,ct;return Array.isArray(j),j.forEach(Ln=>{Ln.constructor===Pe?F=Ln:function Jn(W){return Object.getPrototypeOf(W.constructor)===rt}(Ln)?Y=Ln:ct=Ln}),ct||Y||F||null}function Vt(W,j){const F=W.indexOf(j);F>-1&&W.splice(F,1)}const ji="VALID",Si="INVALID",Xt="PENDING",Zn="DISABLED";function Oi(W){return(xn(W)?W.validators:W)||null}function Wi(W){return Array.isArray(W)?Kt(W):W||null}function ur(W,j){return(xn(j)?j.asyncValidators:W)||null}function Qr(W){return Array.isArray(W)?Kn(W):W||null}function xn(W){return null!=W&&!Array.isArray(W)&&"object"==typeof W}const or=W=>W instanceof ar,vi=W=>W instanceof qr,zn=W=>W instanceof Ke;function Wr(W){return or(W)?W.value:W.getRawValue()}function Ds(W,j){const F=vi(W),Y=W.controls;if(!(F?Object.keys(Y):Y).length)throw new _.vHH(1e3,"");if(!Y[j])throw new _.vHH(1001,"")}function $i(W,j){vi(W),W._forEachChild((Y,ct)=>{if(void 0===j[ct])throw new _.vHH(1002,"")})}class _r{constructor(j,F){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=j,this._rawAsyncValidators=F,this._composedValidatorFn=Wi(this._rawValidators),this._composedAsyncValidatorFn=Qr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(j){this._rawValidators=this._composedValidatorFn=j}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(j){this._rawAsyncValidators=this._composedAsyncValidatorFn=j}get parent(){return this._parent}get valid(){return this.status===ji}get invalid(){return this.status===Si}get pending(){return this.status==Xt}get disabled(){return this.status===Zn}get enabled(){return this.status!==Zn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(j){this._rawValidators=j,this._composedValidatorFn=Wi(j)}setAsyncValidators(j){this._rawAsyncValidators=j,this._composedAsyncValidatorFn=Qr(j)}addValidators(j){this.setValidators(hi(j,this._rawValidators))}addAsyncValidators(j){this.setAsyncValidators(hi(j,this._rawAsyncValidators))}removeValidators(j){this.setValidators(Jt(j,this._rawValidators))}removeAsyncValidators(j){this.setAsyncValidators(Jt(j,this._rawAsyncValidators))}hasValidator(j){return Nt(this._rawValidators,j)}hasAsyncValidator(j){return Nt(this._rawAsyncValidators,j)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(j={}){this.touched=!0,this._parent&&!j.onlySelf&&this._parent.markAsTouched(j)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(j=>j.markAllAsTouched())}markAsUntouched(j={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(F=>{F.markAsUntouched({onlySelf:!0})}),this._parent&&!j.onlySelf&&this._parent._updateTouched(j)}markAsDirty(j={}){this.pristine=!1,this._parent&&!j.onlySelf&&this._parent.markAsDirty(j)}markAsPristine(j={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(F=>{F.markAsPristine({onlySelf:!0})}),this._parent&&!j.onlySelf&&this._parent._updatePristine(j)}markAsPending(j={}){this.status=Xt,!1!==j.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!j.onlySelf&&this._parent.markAsPending(j)}disable(j={}){const F=this._parentMarkedDirty(j.onlySelf);this.status=Zn,this.errors=null,this._forEachChild(Y=>{Y.disable(Object.assign(Object.assign({},j),{onlySelf:!0}))}),this._updateValue(),!1!==j.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},j),{skipPristineCheck:F})),this._onDisabledChange.forEach(Y=>Y(!0))}enable(j={}){const F=this._parentMarkedDirty(j.onlySelf);this.status=ji,this._forEachChild(Y=>{Y.enable(Object.assign(Object.assign({},j),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:j.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},j),{skipPristineCheck:F})),this._onDisabledChange.forEach(Y=>Y(!1))}_updateAncestors(j){this._parent&&!j.onlySelf&&(this._parent.updateValueAndValidity(j),j.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(j){this._parent=j}updateValueAndValidity(j={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ji||this.status===Xt)&&this._runAsyncValidator(j.emitEvent)),!1!==j.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!j.onlySelf&&this._parent.updateValueAndValidity(j)}_updateTreeValidity(j={emitEvent:!0}){this._forEachChild(F=>F._updateTreeValidity(j)),this.updateValueAndValidity({onlySelf:!0,emitEvent:j.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zn:ji}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(j){if(this.asyncValidator){this.status=Xt,this._hasOwnPendingAsyncValidator=!0;const F=Nn(this.asyncValidator(this));this._asyncValidationSubscription=F.subscribe(Y=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Y,{emitEvent:j})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(j,F={}){this.errors=j,this._updateControlsErrors(!1!==F.emitEvent)}get(j){return function Ni(W,j,F){if(null==j||(Array.isArray(j)||(j=j.split(F)),Array.isArray(j)&&0===j.length))return null;let Y=W;return j.forEach(ct=>{Y=vi(Y)?Y.controls.hasOwnProperty(ct)?Y.controls[ct]:null:zn(Y)&&Y.at(ct)||null}),Y}(this,j,".")}getError(j,F){const Y=F?this.get(F):this;return Y&&Y.errors?Y.errors[j]:null}hasError(j,F){return!!this.getError(j,F)}get root(){let j=this;for(;j._parent;)j=j._parent;return j}_updateControlsErrors(j){this.status=this._calculateStatus(),j&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(j)}_initObservables(){this.valueChanges=new _.vpe,this.statusChanges=new _.vpe}_calculateStatus(){return this._allControlsDisabled()?Zn:this.errors?Si:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xt)?Xt:this._anyControlsHaveStatus(Si)?Si:ji}_anyControlsHaveStatus(j){return this._anyControls(F=>F.status===j)}_anyControlsDirty(){return this._anyControls(j=>j.dirty)}_anyControlsTouched(){return this._anyControls(j=>j.touched)}_updatePristine(j={}){this.pristine=!this._anyControlsDirty(),this._parent&&!j.onlySelf&&this._parent._updatePristine(j)}_updateTouched(j={}){this.touched=this._anyControlsTouched(),this._parent&&!j.onlySelf&&this._parent._updateTouched(j)}_isBoxedValue(j){return"object"==typeof j&&null!==j&&2===Object.keys(j).length&&"value"in j&&"disabled"in j}_registerOnCollectionChange(j){this._onCollectionChange=j}_setUpdateStrategy(j){xn(j)&&null!=j.updateOn&&(this._updateOn=j.updateOn)}_parentMarkedDirty(j){return!j&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ar extends _r{constructor(j=null,F,Y){super(Oi(F),ur(Y,F)),this._onChange=[],this._pendingChange=!1,this._applyFormState(j),this._setUpdateStrategy(F),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(j,F={}){this.value=this._pendingValue=j,this._onChange.length&&!1!==F.emitModelToViewChange&&this._onChange.forEach(Y=>Y(this.value,!1!==F.emitViewToModelChange)),this.updateValueAndValidity(F)}patchValue(j,F={}){this.setValue(j,F)}reset(j=null,F={}){this._applyFormState(j),this.markAsPristine(F),this.markAsUntouched(F),this.setValue(this.value,F),this._pendingChange=!1}_updateValue(){}_anyControls(j){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(j){this._onChange.push(j)}_unregisterOnChange(j){Vt(this._onChange,j)}registerOnDisabledChange(j){this._onDisabledChange.push(j)}_unregisterOnDisabledChange(j){Vt(this._onDisabledChange,j)}_forEachChild(j){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(j){this._isBoxedValue(j)?(this.value=this._pendingValue=j.value,j.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=j}}class qr extends _r{constructor(j,F,Y){super(Oi(F),ur(Y,F)),this.controls=j,this._initObservables(),this._setUpdateStrategy(F),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(j,F){return this.controls[j]?this.controls[j]:(this.controls[j]=F,F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange),F)}addControl(j,F,Y={}){this.registerControl(j,F),this.updateValueAndValidity({emitEvent:Y.emitEvent}),this._onCollectionChange()}removeControl(j,F={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),delete this.controls[j],this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}setControl(j,F,Y={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),delete this.controls[j],F&&this.registerControl(j,F),this.updateValueAndValidity({emitEvent:Y.emitEvent}),this._onCollectionChange()}contains(j){return this.controls.hasOwnProperty(j)&&this.controls[j].enabled}setValue(j,F={}){$i(this,j),Object.keys(j).forEach(Y=>{Ds(this,Y),this.controls[Y].setValue(j[Y],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F)}patchValue(j,F={}){null!=j&&(Object.keys(j).forEach(Y=>{this.controls[Y]&&this.controls[Y].patchValue(j[Y],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F))}reset(j={},F={}){this._forEachChild((Y,ct)=>{Y.reset(j[ct],{onlySelf:!0,emitEvent:F.emitEvent})}),this._updatePristine(F),this._updateTouched(F),this.updateValueAndValidity(F)}getRawValue(){return this._reduceChildren({},(j,F,Y)=>(j[Y]=Wr(F),j))}_syncPendingControls(){let j=this._reduceChildren(!1,(F,Y)=>!!Y._syncPendingControls()||F);return j&&this.updateValueAndValidity({onlySelf:!0}),j}_forEachChild(j){Object.keys(this.controls).forEach(F=>{const Y=this.controls[F];Y&&j(Y,F)})}_setUpControls(){this._forEachChild(j=>{j.setParent(this),j._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(j){for(const F of Object.keys(this.controls)){const Y=this.controls[F];if(this.contains(F)&&j(Y))return!0}return!1}_reduceValue(){return this._reduceChildren({},(j,F,Y)=>((F.enabled||this.disabled)&&(j[Y]=F.value),j))}_reduceChildren(j,F){let Y=j;return this._forEachChild((ct,Ln)=>{Y=F(Y,ct,Ln)}),Y}_allControlsDisabled(){for(const j of Object.keys(this.controls))if(this.controls[j].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Ke extends _r{constructor(j,F,Y){super(Oi(F),ur(Y,F)),this.controls=j,this._initObservables(),this._setUpdateStrategy(F),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(j){return this.controls[j]}push(j,F={}){this.controls.push(j),this._registerControl(j),this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}insert(j,F,Y={}){this.controls.splice(j,0,F),this._registerControl(F),this.updateValueAndValidity({emitEvent:Y.emitEvent})}removeAt(j,F={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),this.controls.splice(j,1),this.updateValueAndValidity({emitEvent:F.emitEvent})}setControl(j,F,Y={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),this.controls.splice(j,1),F&&(this.controls.splice(j,0,F),this._registerControl(F)),this.updateValueAndValidity({emitEvent:Y.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(j,F={}){$i(this,j),j.forEach((Y,ct)=>{Ds(this,ct),this.at(ct).setValue(Y,{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F)}patchValue(j,F={}){null!=j&&(j.forEach((Y,ct)=>{this.at(ct)&&this.at(ct).patchValue(Y,{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F))}reset(j=[],F={}){this._forEachChild((Y,ct)=>{Y.reset(j[ct],{onlySelf:!0,emitEvent:F.emitEvent})}),this._updatePristine(F),this._updateTouched(F),this.updateValueAndValidity(F)}getRawValue(){return this.controls.map(j=>Wr(j))}clear(j={}){this.controls.length<1||(this._forEachChild(F=>F._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:j.emitEvent}))}_syncPendingControls(){let j=this.controls.reduce((F,Y)=>!!Y._syncPendingControls()||F,!1);return j&&this.updateValueAndValidity({onlySelf:!0}),j}_forEachChild(j){this.controls.forEach((F,Y)=>{j(F,Y)})}_updateValue(){this.value=this.controls.filter(j=>j.enabled||this.disabled).map(j=>j.value)}_anyControls(j){return this.controls.some(F=>F.enabled&&j(F))}_setUpControls(){this._forEachChild(j=>this._registerControl(j))}_allControlsDisabled(){for(const j of this.controls)if(j.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(j){j.setParent(this),j._registerOnCollectionChange(this._onCollectionChange)}}const _s={provide:Ht,useExisting:(0,_.Gpc)(()=>Jr)},ys=(()=>Promise.resolve(null))();let Jr=(()=>{class W extends Ht{constructor(F,Y,ct,Ln){super(),this.control=new ar,this._registered=!1,this.update=new _.vpe,this._parent=F,this._setValidators(Y),this._setAsyncValidators(ct),this.valueAccessor=Mt(0,Ln)}ngOnChanges(F){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in F&&this._updateDisabled(F),Yt(F,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?nn(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(F){this.viewModel=F,this.update.emit(F)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){fn(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(F){ys.then(()=>{this.control.setValue(F,{emitViewToModelChange:!1})})}_updateDisabled(F){const Y=F.isDisabled.currentValue,ct=""===Y||Y&&"false"!==Y;ys.then(()=>{ct&&!this.control.disabled?this.control.disable():!ct&&this.control.disabled&&this.control.enable()})}}return W.\u0275fac=function(F){return new(F||W)(_.Y36(kn,9),_.Y36(It,10),_.Y36(At,10),_.Y36(mt,10))},W.\u0275dir=_.lG2({type:W,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_._Bn([_s]),_.qOj,_.TTD]}),W})(),zr=(()=>{class W{}return W.\u0275fac=function(F){return new(F||W)},W.\u0275dir=_.lG2({type:W,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),W})();const Ia={provide:mt,useExisting:(0,_.Gpc)(()=>Os),multi:!0};let Os=(()=>{class W extends rt{writeValue(F){this.setProperty("value",null==F?"":F)}registerOnChange(F){this.onChange=Y=>{F(""==Y?null:parseFloat(Y))}}}return W.\u0275fac=function(){let j;return function(Y){return(j||(j=_.n5z(W)))(Y||W)}}(),W.\u0275dir=_.lG2({type:W,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(F,Y){1&F&&_.NdJ("input",function(Ln){return Y.onChange(Ln.target.value)})("blur",function(){return Y.onTouched()})},features:[_._Bn([Ia]),_.qOj]}),W})(),Rs=(()=>{class W{}return W.\u0275fac=function(F){return new(F||W)},W.\u0275mod=_.oAB({type:W}),W.\u0275inj=_.cJS({}),W})();const Qs=new _.OlP("NgModelWithFormControlWarning"),da={provide:kn,useExisting:(0,_.Gpc)(()=>Do)};let Do=(()=>{class W extends kn{constructor(F,Y){super(),this.validators=F,this.asyncValidators=Y,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _.vpe,this._setValidators(F),this._setAsyncValidators(Y)}ngOnChanges(F){this._checkFormPresent(),F.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ve(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(F){const Y=this.form.get(F.path);return fn(Y,F),Y.updateValueAndValidity({emitEvent:!1}),this.directives.push(F),Y}getControl(F){return this.form.get(F.path)}removeControl(F){dn(F.control||null,F,!1),Vt(this.directives,F)}addFormGroup(F){this._setUpFormContainer(F)}removeFormGroup(F){this._cleanUpFormContainer(F)}getFormGroup(F){return this.form.get(F.path)}addFormArray(F){this._setUpFormContainer(F)}removeFormArray(F){this._cleanUpFormContainer(F)}getFormArray(F){return this.form.get(F.path)}updateModel(F,Y){this.form.get(F.path).setValue(Y)}onSubmit(F){return this.submitted=!0,function Xn(W,j){W._syncPendingControls(),j.forEach(F=>{const Y=F.control;"submit"===Y.updateOn&&Y._pendingChange&&(F.viewToModelUpdate(Y._pendingValue),Y._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(F),!1}onReset(){this.resetForm()}resetForm(F){this.form.reset(F),this.submitted=!1}_updateDomValue(){this.directives.forEach(F=>{const Y=F.control,ct=this.form.get(F.path);Y!==ct&&(dn(Y||null,F),or(ct)&&(fn(ct,F),F.control=ct))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(F){const Y=this.form.get(F.path);(function ce(W,j){we(W,j)})(Y,F),Y.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(F){if(this.form){const Y=this.form.get(F.path);Y&&function Me(W,j){return Ve(W,j)}(Y,F)&&Y.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){we(this.form,this),this._oldForm&&Ve(this._oldForm,this)}_checkFormPresent(){}}return W.\u0275fac=function(F){return new(F||W)(_.Y36(It,10),_.Y36(At,10))},W.\u0275dir=_.lG2({type:W,selectors:[["","formGroup",""]],hostBindings:function(F,Y){1&F&&_.NdJ("submit",function(Ln){return Y.onSubmit(Ln)})("reset",function(){return Y.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_._Bn([da]),_.qOj,_.TTD]}),W})();const Fs={provide:Ht,useExisting:(0,_.Gpc)(()=>nr)};let nr=(()=>{class W extends Ht{constructor(F,Y,ct,Ln,oi){super(),this._ngModelWarningConfig=oi,this._added=!1,this.update=new _.vpe,this._ngModelWarningSent=!1,this._parent=F,this._setValidators(Y),this._setAsyncValidators(ct),this.valueAccessor=Mt(0,Ln)}set isDisabled(F){}ngOnChanges(F){this._added||this._setUpControl(),Yt(F,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(F){this.viewModel=F,this.update.emit(F)}get path(){return nn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return W._ngModelWarningSentOnce=!1,W.\u0275fac=function(F){return new(F||W)(_.Y36(kn,13),_.Y36(It,10),_.Y36(At,10),_.Y36(mt,10),_.Y36(Qs,8))},W.\u0275dir=_.lG2({type:W,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[_._Bn([Fs]),_.qOj,_.TTD]}),W})(),Hi=(()=>{class W{}return W.\u0275fac=function(F){return new(F||W)},W.\u0275mod=_.oAB({type:W}),W.\u0275inj=_.cJS({imports:[[Rs]]}),W})(),vn=(()=>{class W{}return W.\u0275fac=function(F){return new(F||W)},W.\u0275mod=_.oAB({type:W}),W.\u0275inj=_.cJS({imports:[Hi]}),W})(),es=(()=>{class W{static withConfig(F){return{ngModule:W,providers:[{provide:Qs,useValue:F.warnOnNgModelWithFormControl}]}}}return W.\u0275fac=function(F){return new(F||W)},W.\u0275mod=_.oAB({type:W}),W.\u0275inj=_.cJS({imports:[Hi]}),W})(),qi=(()=>{class W{group(F,Y=null){const ct=this._reduceControls(F);let ts,Ln=null,oi=null;return null!=Y&&(function kr(W){return void 0!==W.asyncValidators||void 0!==W.validators||void 0!==W.updateOn}(Y)?(Ln=null!=Y.validators?Y.validators:null,oi=null!=Y.asyncValidators?Y.asyncValidators:null,ts=null!=Y.updateOn?Y.updateOn:void 0):(Ln=null!=Y.validator?Y.validator:null,oi=null!=Y.asyncValidator?Y.asyncValidator:null)),new qr(ct,{asyncValidators:oi,updateOn:ts,validators:Ln})}control(F,Y,ct){return new ar(F,Y,ct)}array(F,Y,ct){const Ln=F.map(oi=>this._createControl(oi));return new Ke(Ln,Y,ct)}_reduceControls(F){const Y={};return Object.keys(F).forEach(ct=>{Y[ct]=this._createControl(F[ct])}),Y}_createControl(F){return or(F)||vi(F)||zn(F)?F:Array.isArray(F)?this.control(F[0],F.length>1?F[1]:null,F.length>2?F[2]:null):this.control(F)}}return W.\u0275fac=function(F){return new(F||W)},W.\u0275prov=_.Yz7({token:W,factory:W.\u0275fac,providedIn:es}),W})()},2313:(rn,Ye,V)=>{V.d(Ye,{b2:()=>Nt,H7:()=>we,q6:()=>Ei,se:()=>wt});var _=V(9808),c=V(5e3);class J extends _.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ee extends J{static makeCurrent(){(0,_.HT)(new Ee)}onAndCancel(ue,ce,Me){return ue.addEventListener(ce,Me,!1),()=>{ue.removeEventListener(ce,Me,!1)}}dispatchEvent(ue,ce){ue.dispatchEvent(ce)}remove(ue){ue.parentNode&&ue.parentNode.removeChild(ue)}createElement(ue,ce){return(ce=ce||this.getDefaultDocument()).createElement(ue)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ue){return ue.nodeType===Node.ELEMENT_NODE}isShadowRoot(ue){return ue instanceof DocumentFragment}getGlobalEventTarget(ue,ce){return"window"===ce?window:"document"===ce?ue:"body"===ce?ue.body:null}getBaseHref(ue){const ce=function Ze(){return Ie=Ie||document.querySelector("base"),Ie?Ie.getAttribute("href"):null}();return null==ce?null:function pe(X){Ge=Ge||document.createElement("a"),Ge.setAttribute("href",X);const ue=Ge.pathname;return"/"===ue.charAt(0)?ue:`/${ue}`}(ce)}resetBaseElement(){Ie=null}getUserAgent(){return window.navigator.userAgent}getCookie(ue){return(0,_.Mx)(document.cookie,ue)}}let Ge,Ie=null;const ke=new c.OlP("TRANSITION_ID"),ge=[{provide:c.ip1,useFactory:function fe(X,ue,ce){return()=>{ce.get(c.CZH).donePromise.then(()=>{const Me=(0,_.q)(),et=ue.querySelectorAll(`style[ng-transition="${X}"]`);for(let Zt=0;Zt<et.length;Zt++)Me.remove(et[Zt])})}},deps:[ke,_.K0,c.zs3],multi:!0}];class Fe{static init(){(0,c.VLi)(new Fe)}addToWindow(ue){c.dqk.getAngularTestability=(Me,et=!0)=>{const Zt=ue.findTestabilityInTree(Me,et);if(null==Zt)throw new Error("Could not find testability for element.");return Zt},c.dqk.getAllAngularTestabilities=()=>ue.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>ue.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(Me=>{const et=c.dqk.getAllAngularTestabilities();let Zt=et.length,Yt=!1;const Jn=function(Xn){Yt=Yt||Xn,Zt--,0==Zt&&Me(Yt)};et.forEach(function(Xn){Xn.whenStable(Jn)})})}findTestabilityInTree(ue,ce,Me){if(null==ce)return null;const et=ue.getTestability(ce);return null!=et?et:Me?(0,_.q)().isShadowRoot(ce)?this.findTestabilityInTree(ue,ce.host,!0):this.findTestabilityInTree(ue,ce.parentElement,!0):null}}let _t=(()=>{class X{build(){return new XMLHttpRequest}}return X.\u0275fac=function(ce){return new(ce||X)},X.\u0275prov=c.Yz7({token:X,factory:X.\u0275fac}),X})();const rt=new c.OlP("EventManagerPlugins");let mt=(()=>{class X{constructor(ce,Me){this._zone=Me,this._eventNameToPlugin=new Map,ce.forEach(et=>et.manager=this),this._plugins=ce.slice().reverse()}addEventListener(ce,Me,et){return this._findPluginFor(Me).addEventListener(ce,Me,et)}addGlobalEventListener(ce,Me,et){return this._findPluginFor(Me).addGlobalEventListener(ce,Me,et)}getZone(){return this._zone}_findPluginFor(ce){const Me=this._eventNameToPlugin.get(ce);if(Me)return Me;const et=this._plugins;for(let Zt=0;Zt<et.length;Zt++){const Yt=et[Zt];if(Yt.supports(ce))return this._eventNameToPlugin.set(ce,Yt),Yt}throw new Error(`No event manager plugin found for event ${ce}`)}}return X.\u0275fac=function(ce){return new(ce||X)(c.LFG(rt),c.LFG(c.R0b))},X.\u0275prov=c.Yz7({token:X,factory:X.\u0275fac}),X})();class ot{constructor(ue){this._doc=ue}addGlobalEventListener(ue,ce,Me){const et=(0,_.q)().getGlobalEventTarget(this._doc,ue);if(!et)throw new Error(`Unsupported event target ${et} for event ${ce}`);return this.addEventListener(et,ce,Me)}}let qe=(()=>{class X{constructor(){this._stylesSet=new Set}addStyles(ce){const Me=new Set;ce.forEach(et=>{this._stylesSet.has(et)||(this._stylesSet.add(et),Me.add(et))}),this.onStylesAdded(Me)}onStylesAdded(ce){}getAllStyles(){return Array.from(this._stylesSet)}}return X.\u0275fac=function(ce){return new(ce||X)},X.\u0275prov=c.Yz7({token:X,factory:X.\u0275fac}),X})(),ze=(()=>{class X extends qe{constructor(ce){super(),this._doc=ce,this._hostNodes=new Map,this._hostNodes.set(ce.head,[])}_addStylesToHost(ce,Me,et){ce.forEach(Zt=>{const Yt=this._doc.createElement("style");Yt.textContent=Zt,et.push(Me.appendChild(Yt))})}addHost(ce){const Me=[];this._addStylesToHost(this._stylesSet,ce,Me),this._hostNodes.set(ce,Me)}removeHost(ce){const Me=this._hostNodes.get(ce);Me&&Me.forEach(Ue),this._hostNodes.delete(ce)}onStylesAdded(ce){this._hostNodes.forEach((Me,et)=>{this._addStylesToHost(ce,et,Me)})}ngOnDestroy(){this._hostNodes.forEach(ce=>ce.forEach(Ue))}}return X.\u0275fac=function(ce){return new(ce||X)(c.LFG(_.K0))},X.\u0275prov=c.Yz7({token:X,factory:X.\u0275fac}),X})();function Ue(X){(0,_.q)().remove(X)}const vt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Pe=/%COMP%/g;function We(X,ue,ce){for(let Me=0;Me<ue.length;Me++){let et=ue[Me];Array.isArray(et)?We(X,et,ce):(et=et.replace(Pe,X),ce.push(et))}return ce}function Qe(X){return ue=>{if("__ngUnwrap__"===ue)return X;!1===X(ue)&&(ue.preventDefault(),ue.returnValue=!1)}}let wt=(()=>{class X{constructor(ce,Me,et){this.eventManager=ce,this.sharedStylesHost=Me,this.appId=et,this.rendererByCompId=new Map,this.defaultRenderer=new at(ce)}createRenderer(ce,Me){if(!ce||!Me)return this.defaultRenderer;switch(Me.encapsulation){case c.ifc.Emulated:{let et=this.rendererByCompId.get(Me.id);return et||(et=new wn(this.eventManager,this.sharedStylesHost,Me,this.appId),this.rendererByCompId.set(Me.id,et)),et.applyToHost(ce),et}case 1:case c.ifc.ShadowDom:return new $t(this.eventManager,this.sharedStylesHost,ce,Me);default:if(!this.rendererByCompId.has(Me.id)){const et=We(Me.id,Me.styles,[]);this.sharedStylesHost.addStyles(et),this.rendererByCompId.set(Me.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return X.\u0275fac=function(ce){return new(ce||X)(c.LFG(mt),c.LFG(ze),c.LFG(c.AFp))},X.\u0275prov=c.Yz7({token:X,factory:X.\u0275fac}),X})();class at{constructor(ue){this.eventManager=ue,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ue,ce){return ce?document.createElementNS(vt[ce]||ce,ue):document.createElement(ue)}createComment(ue){return document.createComment(ue)}createText(ue){return document.createTextNode(ue)}appendChild(ue,ce){ue.appendChild(ce)}insertBefore(ue,ce,Me){ue&&ue.insertBefore(ce,Me)}removeChild(ue,ce){ue&&ue.removeChild(ce)}selectRootElement(ue,ce){let Me="string"==typeof ue?document.querySelector(ue):ue;if(!Me)throw new Error(`The selector "${ue}" did not match any elements`);return ce||(Me.textContent=""),Me}parentNode(ue){return ue.parentNode}nextSibling(ue){return ue.nextSibling}setAttribute(ue,ce,Me,et){if(et){ce=et+":"+ce;const Zt=vt[et];Zt?ue.setAttributeNS(Zt,ce,Me):ue.setAttribute(ce,Me)}else ue.setAttribute(ce,Me)}removeAttribute(ue,ce,Me){if(Me){const et=vt[Me];et?ue.removeAttributeNS(et,ce):ue.removeAttribute(`${Me}:${ce}`)}else ue.removeAttribute(ce)}addClass(ue,ce){ue.classList.add(ce)}removeClass(ue,ce){ue.classList.remove(ce)}setStyle(ue,ce,Me,et){et&(c.JOm.DashCase|c.JOm.Important)?ue.style.setProperty(ce,Me,et&c.JOm.Important?"important":""):ue.style[ce]=Me}removeStyle(ue,ce,Me){Me&c.JOm.DashCase?ue.style.removeProperty(ce):ue.style[ce]=""}setProperty(ue,ce,Me){ue[ce]=Me}setValue(ue,ce){ue.nodeValue=ce}listen(ue,ce,Me){return"string"==typeof ue?this.eventManager.addGlobalEventListener(ue,ce,Qe(Me)):this.eventManager.addEventListener(ue,ce,Qe(Me))}}class wn extends at{constructor(ue,ce,Me,et){super(ue),this.component=Me;const Zt=We(et+"-"+Me.id,Me.styles,[]);ce.addStyles(Zt),this.contentAttr=function it(X){return"_ngcontent-%COMP%".replace(Pe,X)}(et+"-"+Me.id),this.hostAttr=function Ne(X){return"_nghost-%COMP%".replace(Pe,X)}(et+"-"+Me.id)}applyToHost(ue){super.setAttribute(ue,this.hostAttr,"")}createElement(ue,ce){const Me=super.createElement(ue,ce);return super.setAttribute(Me,this.contentAttr,""),Me}}class $t extends at{constructor(ue,ce,Me,et){super(ue),this.sharedStylesHost=ce,this.hostEl=Me,this.shadowRoot=Me.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Zt=We(et.id,et.styles,[]);for(let Yt=0;Yt<Zt.length;Yt++){const Jn=document.createElement("style");Jn.textContent=Zt[Yt],this.shadowRoot.appendChild(Jn)}}nodeOrShadowRoot(ue){return ue===this.hostEl?this.shadowRoot:ue}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ue,ce){return super.appendChild(this.nodeOrShadowRoot(ue),ce)}insertBefore(ue,ce,Me){return super.insertBefore(this.nodeOrShadowRoot(ue),ce,Me)}removeChild(ue,ce){return super.removeChild(this.nodeOrShadowRoot(ue),ce)}parentNode(ue){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ue)))}}let qt=(()=>{class X extends ot{constructor(ce){super(ce)}supports(ce){return!0}addEventListener(ce,Me,et){return ce.addEventListener(Me,et,!1),()=>this.removeEventListener(ce,Me,et)}removeEventListener(ce,Me,et){return ce.removeEventListener(Me,et)}}return X.\u0275fac=function(ce){return new(ce||X)(c.LFG(_.K0))},X.\u0275prov=c.Yz7({token:X,factory:X.\u0275fac}),X})();const Nn=["alt","control","meta","shift"],pt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ot={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Le={alt:X=>X.altKey,control:X=>X.ctrlKey,meta:X=>X.metaKey,shift:X=>X.shiftKey};let ht=(()=>{class X extends ot{constructor(ce){super(ce)}supports(ce){return null!=X.parseEventName(ce)}addEventListener(ce,Me,et){const Zt=X.parseEventName(Me),Yt=X.eventCallback(Zt.fullKey,et,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,_.q)().onAndCancel(ce,Zt.domEventName,Yt))}static parseEventName(ce){const Me=ce.toLowerCase().split("."),et=Me.shift();if(0===Me.length||"keydown"!==et&&"keyup"!==et)return null;const Zt=X._normalizeKey(Me.pop());let Yt="";if(Nn.forEach(Xn=>{const Mt=Me.indexOf(Xn);Mt>-1&&(Me.splice(Mt,1),Yt+=Xn+".")}),Yt+=Zt,0!=Me.length||0===Zt.length)return null;const Jn={};return Jn.domEventName=et,Jn.fullKey=Yt,Jn}static getEventFullKey(ce){let Me="",et=function Kt(X){let ue=X.key;if(null==ue){if(ue=X.keyIdentifier,null==ue)return"Unidentified";ue.startsWith("U+")&&(ue=String.fromCharCode(parseInt(ue.substring(2),16)),3===X.location&&Ot.hasOwnProperty(ue)&&(ue=Ot[ue]))}return pt[ue]||ue}(ce);return et=et.toLowerCase()," "===et?et="space":"."===et&&(et="dot"),Nn.forEach(Zt=>{Zt!=et&&Le[Zt](ce)&&(Me+=Zt+".")}),Me+=et,Me}static eventCallback(ce,Me,et){return Zt=>{X.getEventFullKey(Zt)===ce&&et.runGuarded(()=>Me(Zt))}}static _normalizeKey(ce){return"esc"===ce?"escape":ce}}return X.\u0275fac=function(ce){return new(ce||X)(c.LFG(_.K0))},X.\u0275prov=c.Yz7({token:X,factory:X.\u0275fac}),X})();const Ei=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:_.bD},{provide:c.g9A,useValue:function Mn(){Ee.makeCurrent(),Fe.init()},multi:!0},{provide:_.K0,useFactory:function ii(){return(0,c.RDi)(document),document},deps:[]}]),$n=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function Kn(){return new c.qLn},deps:[]},{provide:rt,useClass:qt,multi:!0,deps:[_.K0,c.R0b,c.Lbi]},{provide:rt,useClass:ht,multi:!0,deps:[_.K0]},{provide:wt,useClass:wt,deps:[mt,ze,c.AFp]},{provide:c.FYo,useExisting:wt},{provide:qe,useExisting:ze},{provide:ze,useClass:ze,deps:[_.K0]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:mt,useClass:mt,deps:[rt,c.R0b]},{provide:_.JF,useClass:_t,deps:[]}];let Nt=(()=>{class X{constructor(ce){if(ce)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(ce){return{ngModule:X,providers:[{provide:c.AFp,useValue:ce.appId},{provide:ke,useExisting:c.AFp},ge]}}}return X.\u0275fac=function(ce){return new(ce||X)(c.LFG(X,12))},X.\u0275mod=c.oAB({type:X}),X.\u0275inj=c.cJS({providers:$n,imports:[_.ez,c.hGG]}),X})();"undefined"!=typeof window&&window;let we=(()=>{class X{}return X.\u0275fac=function(ce){return new(ce||X)},X.\u0275prov=c.Yz7({token:X,factory:function(ce){let Me=null;return Me=ce?new(ce||X):c.LFG(Ce),Me},providedIn:"root"}),X})(),Ce=(()=>{class X extends we{constructor(ce){super(),this._doc=ce}sanitize(ce,Me){if(null==Me)return null;switch(ce){case c.q3G.NONE:return Me;case c.q3G.HTML:return(0,c.qzn)(Me,"HTML")?(0,c.z3N)(Me):(0,c.EiD)(this._doc,String(Me)).toString();case c.q3G.STYLE:return(0,c.qzn)(Me,"Style")?(0,c.z3N)(Me):Me;case c.q3G.SCRIPT:if((0,c.qzn)(Me,"Script"))return(0,c.z3N)(Me);throw new Error("unsafe value used in a script context");case c.q3G.URL:return(0,c.yhl)(Me),(0,c.qzn)(Me,"URL")?(0,c.z3N)(Me):(0,c.mCW)(String(Me));case c.q3G.RESOURCE_URL:if((0,c.qzn)(Me,"ResourceURL"))return(0,c.z3N)(Me);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${ce} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(ce){return(0,c.JVY)(ce)}bypassSecurityTrustStyle(ce){return(0,c.L6k)(ce)}bypassSecurityTrustScript(ce){return(0,c.eBb)(ce)}bypassSecurityTrustUrl(ce){return(0,c.LAX)(ce)}bypassSecurityTrustResourceUrl(ce){return(0,c.pB0)(ce)}}return X.\u0275fac=function(ce){return new(ce||X)(c.LFG(_.K0))},X.\u0275prov=c.Yz7({token:X,factory:function(ce){let Me=null;return Me=ce?new ce:function Ve(X){return new Ce(X.get(_.K0))}(c.LFG(c.zs3)),Me},providedIn:"root"}),X})()},541:(rn,Ye,V)=>{V.d(Ye,{F0:()=>ns,rH:()=>br,yS:()=>eo,Bz:()=>is,lC:()=>Ss});var _=V(5e3),c=V(8306),J=V(8421);function Ee(k){return new c.y(M=>{(0,J.Xf)(k()).subscribe(M)})}var Ie=V(727),Ze=V(4482),Ge=V(5403);function pe(){return(0,Ze.e)((k,M)=>{let I=null;k._refCount++;const U=new Ge.Q(M,void 0,void 0,void 0,()=>{if(!k||k._refCount<=0||0<--k._refCount)return void(I=null);const q=k._connection,he=I;I=null,q&&(!he||q===he)&&q.unsubscribe(),M.unsubscribe()});k.subscribe(U),U.closed||(I=k.connect())})}class ke extends c.y{constructor(M,I){super(),this.source=M,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,Ze.A)(M)&&(this.lift=M.lift)}_subscribe(M){return this.getSubject().subscribe(M)}getSubject(){const M=this._subject;return(!M||M.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:M}=this;this._subject=this._connection=null,null==M||M.unsubscribe()}connect(){let M=this._connection;if(!M){M=this._connection=new Ie.w0;const I=this.getSubject();M.add(this.source.subscribe(new Ge.Q(I,void 0,()=>{this._teardown(),I.complete()},U=>{this._teardown(),I.error(U)},()=>this._teardown()))),M.closed&&(this._connection=null,M=Ie.w0.EMPTY)}return M}refCount(){return pe()(this)}}var fe=V(8996),ge=V(9646),Fe=V(1135),_t=V(9841),rt=V(6805),mt=V(7272),ot=V(515),qe=V(7579);function ze(k){return(0,Ze.e)((M,I)=>{let he,U=null,q=!1;U=M.subscribe(new Ge.Q(I,void 0,void 0,ye=>{he=(0,J.Xf)(k(ye,ze(k)(M))),U?(U.unsubscribe(),U=null,he.subscribe(I)):q=!0})),q&&(U.unsubscribe(),U=null,he.subscribe(I))})}var Ue=V(5577),vt=V(576);function Pe(k,M){return(0,vt.m)(M)?(0,Ue.z)(k,M,1):(0,Ue.z)(k,1)}var je=V(9300);function nt(k){return k<=0?()=>ot.E:(0,Ze.e)((M,I)=>{let U=[];M.subscribe(new Ge.Q(I,q=>{U.push(q),k<U.length&&U.shift()},()=>{for(const q of U)I.next(q);I.complete()},void 0,()=>{U=null}))})}var It=V(8068),At=V(6590),it=V(4671),Qe=V(4004),dt=V(3900),wt=V(5698),at=V(8675),In=V(5026),tn=V(590),wn=V(8505),$t=V(8189),qt=V(9808);class Nn{constructor(M,I){this.id=M,this.url=I}}class bn extends Nn{constructor(M,I,U="imperative",q=null){super(M,I),this.navigationTrigger=U,this.restoredState=q}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class pt extends Nn{constructor(M,I,U){super(M,I),this.urlAfterRedirects=U}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ot extends Nn{constructor(M,I,U){super(M,I),this.reason=U}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Le extends Nn{constructor(M,I,U){super(M,I),this.error=U}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ht extends Nn{constructor(M,I,U,q){super(M,I),this.urlAfterRedirects=U,this.state=q}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kt extends Nn{constructor(M,I,U,q){super(M,I),this.urlAfterRedirects=U,this.state=q}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mn extends Nn{constructor(M,I,U,q,he){super(M,I),this.urlAfterRedirects=U,this.state=q,this.shouldActivate=he}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Kn extends Nn{constructor(M,I,U,q){super(M,I),this.urlAfterRedirects=U,this.state=q}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ii extends Nn{constructor(M,I,U,q){super(M,I),this.urlAfterRedirects=U,this.state=q}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ki{constructor(M){this.route=M}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ei{constructor(M){this.route=M}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class $n{constructor(M){this.snapshot=M}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nt{constructor(M){this.snapshot=M}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hi{constructor(M){this.snapshot=M}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jt{constructor(M){this.snapshot=M}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yn{constructor(M,I,U){this.routerEvent=M,this.position=I,this.anchor=U}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ht="primary";class kn{constructor(M){this.params=M||{}}has(M){return Object.prototype.hasOwnProperty.call(this.params,M)}get(M){if(this.has(M)){const I=this.params[M];return Array.isArray(I)?I[0]:I}return null}getAll(M){if(this.has(M)){const I=this.params[M];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function Ti(k){return new kn(k)}const Vi="ngNavigationCancelingError";function Zi(k){const M=Error("NavigationCancelingError: "+k);return M[Vi]=!0,M}function lr(k,M,I){const U=I.path.split("/");if(U.length>k.length||"full"===I.pathMatch&&(M.hasChildren()||U.length<k.length))return null;const q={};for(let he=0;he<U.length;he++){const ye=U[he],_e=k[he];if(ye.startsWith(":"))q[ye.substring(1)]=_e;else if(ye!==_e.path)return null}return{consumed:k.slice(0,U.length),posParams:q}}function Pn(k,M){const I=k?Object.keys(k):void 0,U=M?Object.keys(M):void 0;if(!I||!U||I.length!=U.length)return!1;let q;for(let he=0;he<I.length;he++)if(q=I[he],!Tn(k[q],M[q]))return!1;return!0}function Tn(k,M){if(Array.isArray(k)&&Array.isArray(M)){if(k.length!==M.length)return!1;const I=[...k].sort(),U=[...M].sort();return I.every((q,he)=>U[he]===q)}return k===M}function gn(k){return Array.prototype.concat.apply([],k)}function Sr(k){return k.length>0?k[k.length-1]:null}function sn(k,M){for(const I in k)k.hasOwnProperty(I)&&M(k[I],I)}function fi(k){return(0,_.CqO)(k)?k:(0,_.QGY)(k)?(0,fe.D)(Promise.resolve(k)):(0,ge.of)(k)}const ui={exact:function Yi(k,M,I){if(!Ve(k.segments,M.segments)||!fn(k.segments,M.segments,I)||k.numberOfChildren!==M.numberOfChildren)return!1;for(const U in M.children)if(!k.children[U]||!Yi(k.children[U],M.children[U],I))return!1;return!0},subset:bt},yn={exact:function Bn(k,M){return Pn(k,M)},subset:function Ut(k,M){return Object.keys(M).length<=Object.keys(k).length&&Object.keys(M).every(I=>Tn(k[I],M[I]))},ignored:()=>!0};function Qn(k,M,I){return ui[I.paths](k.root,M.root,I.matrixParams)&&yn[I.queryParams](k.queryParams,M.queryParams)&&!("exact"===I.fragment&&k.fragment!==M.fragment)}function bt(k,M,I){return nn(k,M,M.segments,I)}function nn(k,M,I,U){if(k.segments.length>I.length){const q=k.segments.slice(0,I.length);return!(!Ve(q,I)||M.hasChildren()||!fn(q,I,U))}if(k.segments.length===I.length){if(!Ve(k.segments,I)||!fn(k.segments,I,U))return!1;for(const q in M.children)if(!k.children[q]||!bt(k.children[q],M.children[q],U))return!1;return!0}{const q=I.slice(0,k.segments.length),he=I.slice(k.segments.length);return!!(Ve(k.segments,q)&&fn(k.segments,q,U)&&k.children[Ht])&&nn(k.children[Ht],M,he,U)}}function fn(k,M,I){return M.every((U,q)=>yn[I](k[q].parameters,U.parameters))}class dn{constructor(M,I,U){this.root=M,this.queryParams=I,this.fragment=U}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ti(this.queryParams)),this._queryParamMap}toString(){return ue.serialize(this)}}class on{constructor(M,I){this.segments=M,this.children=I,this.parent=null,sn(I,(U,q)=>U.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ce(this)}}class xe{constructor(M,I){this.path=M,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=Ti(this.parameters)),this._parameterMap}toString(){return Vt(this)}}function Ve(k,M){return k.length===M.length&&k.every((I,U)=>I.path===M[U].path)}class de{}class X{parse(M){const I=new Wi(M);return new dn(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(M){const I=`/${Me(M.root,!0)}`,U=function jn(k){const M=Object.keys(k).map(I=>{const U=k[I];return Array.isArray(U)?U.map(q=>`${Zt(I)}=${Zt(q)}`).join("&"):`${Zt(I)}=${Zt(U)}`}).filter(I=>!!I);return M.length?`?${M.join("&")}`:""}(M.queryParams);return`${I}${U}${"string"==typeof M.fragment?`#${function Yt(k){return encodeURI(k)}(M.fragment)}`:""}`}}const ue=new X;function ce(k){return k.segments.map(M=>Vt(M)).join("/")}function Me(k,M){if(!k.hasChildren())return ce(k);if(M){const I=k.children[Ht]?Me(k.children[Ht],!1):"",U=[];return sn(k.children,(q,he)=>{he!==Ht&&U.push(`${he}:${Me(q,!1)}`)}),U.length>0?`${I}(${U.join("//")})`:I}{const I=function Ce(k,M){let I=[];return sn(k.children,(U,q)=>{q===Ht&&(I=I.concat(M(U,q)))}),sn(k.children,(U,q)=>{q!==Ht&&(I=I.concat(M(U,q)))}),I}(k,(U,q)=>q===Ht?[Me(k.children[Ht],!1)]:[`${q}:${Me(U,!1)}`]);return 1===Object.keys(k.children).length&&null!=k.children[Ht]?`${ce(k)}/${I[0]}`:`${ce(k)}/(${I.join("//")})`}}function et(k){return encodeURIComponent(k).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Zt(k){return et(k).replace(/%3B/gi,";")}function Jn(k){return et(k).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xn(k){return decodeURIComponent(k)}function Mt(k){return Xn(k.replace(/\+/g,"%20"))}function Vt(k){return`${Jn(k.path)}${function Hn(k){return Object.keys(k).map(M=>`;${Jn(M)}=${Jn(k[M])}`).join("")}(k.parameters)}`}const ji=/^[^\/()?;=#]+/;function Si(k){const M=k.match(ji);return M?M[0]:""}const Xt=/^[^=?&#]+/,Ni=/^[^&#]+/;class Wi{constructor(M){this.url=M,this.remaining=M}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new on([],{}):new on([],this.parseChildren())}parseQueryParams(){const M={};if(this.consumeOptional("?"))do{this.parseQueryParam(M)}while(this.consumeOptional("&"));return M}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const M=[];for(this.peekStartsWith("(")||M.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),M.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let U={};return this.peekStartsWith("(")&&(U=this.parseParens(!1)),(M.length>0||Object.keys(I).length>0)&&(U[Ht]=new on(M,I)),U}parseSegment(){const M=Si(this.remaining);if(""===M&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(M),new xe(Xn(M),this.parseMatrixParams())}parseMatrixParams(){const M={};for(;this.consumeOptional(";");)this.parseParam(M);return M}parseParam(M){const I=Si(this.remaining);if(!I)return;this.capture(I);let U="";if(this.consumeOptional("=")){const q=Si(this.remaining);q&&(U=q,this.capture(U))}M[Xn(I)]=Xn(U)}parseQueryParam(M){const I=function Zn(k){const M=k.match(Xt);return M?M[0]:""}(this.remaining);if(!I)return;this.capture(I);let U="";if(this.consumeOptional("=")){const ye=function Oi(k){const M=k.match(Ni);return M?M[0]:""}(this.remaining);ye&&(U=ye,this.capture(U))}const q=Mt(I),he=Mt(U);if(M.hasOwnProperty(q)){let ye=M[q];Array.isArray(ye)||(ye=[ye],M[q]=ye),ye.push(he)}else M[q]=he}parseParens(M){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const U=Si(this.remaining),q=this.remaining[U.length];if("/"!==q&&")"!==q&&";"!==q)throw new Error(`Cannot parse url '${this.url}'`);let he;U.indexOf(":")>-1?(he=U.substr(0,U.indexOf(":")),this.capture(he),this.capture(":")):M&&(he=Ht);const ye=this.parseChildren();I[he]=1===Object.keys(ye).length?ye[Ht]:new on([],ye),this.consumeOptional("//")}return I}peekStartsWith(M){return this.remaining.startsWith(M)}consumeOptional(M){return!!this.peekStartsWith(M)&&(this.remaining=this.remaining.substring(M.length),!0)}capture(M){if(!this.consumeOptional(M))throw new Error(`Expected "${M}".`)}}class ur{constructor(M){this._root=M}get root(){return this._root.value}parent(M){const I=this.pathFromRoot(M);return I.length>1?I[I.length-2]:null}children(M){const I=Qr(M,this._root);return I?I.children.map(U=>U.value):[]}firstChild(M){const I=Qr(M,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(M){const I=xn(M,this._root);return I.length<2?[]:I[I.length-2].children.map(q=>q.value).filter(q=>q!==M)}pathFromRoot(M){return xn(M,this._root).map(I=>I.value)}}function Qr(k,M){if(k===M.value)return M;for(const I of M.children){const U=Qr(k,I);if(U)return U}return null}function xn(k,M){if(k===M.value)return[M];for(const I of M.children){const U=xn(k,I);if(U.length)return U.unshift(M),U}return[]}class or{constructor(M,I){this.value=M,this.children=I}toString(){return`TreeNode(${this.value})`}}function vi(k){const M={};return k&&k.children.forEach(I=>M[I.value.outlet]=I),M}class zn extends ur{constructor(M,I){super(M),this.snapshot=I,He(this,M)}toString(){return this.snapshot.toString()}}function Wr(k,M){const I=function Ds(k,M){const ye=new qr([],{},{},"",{},Ht,M,null,k.root,-1,{});return new Ke("",new or(ye,[]))}(k,M),U=new Fe.X([new xe("",{})]),q=new Fe.X({}),he=new Fe.X({}),ye=new Fe.X({}),_e=new Fe.X(""),xt=new $i(U,q,ye,_e,he,Ht,M,I.root);return xt.snapshot=I.root,new zn(new or(xt,[]),I)}class $i{constructor(M,I,U,q,he,ye,_e,xt){this.url=M,this.params=I,this.queryParams=U,this.fragment=q,this.data=he,this.outlet=ye,this.component=_e,this._futureSnapshot=xt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Qe.U)(M=>Ti(M)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Qe.U)(M=>Ti(M)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _r(k,M="emptyOnly"){const I=k.pathFromRoot;let U=0;if("always"!==M)for(U=I.length-1;U>=1;){const q=I[U],he=I[U-1];if(q.routeConfig&&""===q.routeConfig.path)U--;else{if(he.component)break;U--}}return function ar(k){return k.reduce((M,I)=>({params:Object.assign(Object.assign({},M.params),I.params),data:Object.assign(Object.assign({},M.data),I.data),resolve:Object.assign(Object.assign({},M.resolve),I._resolvedData)}),{params:{},data:{},resolve:{}})}(I.slice(U))}class qr{constructor(M,I,U,q,he,ye,_e,xt,Sn,Ii,ti){this.url=M,this.params=I,this.queryParams=U,this.fragment=q,this.data=he,this.outlet=ye,this.component=_e,this.routeConfig=xt,this._urlSegment=Sn,this._lastPathIndex=Ii,this._resolve=ti}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ti(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ti(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(U=>U.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ke extends ur{constructor(M,I){super(I),this.url=M,He(this,I)}toString(){return Xe(this._root)}}function He(k,M){M.value._routerState=k,M.children.forEach(I=>He(k,I))}function Xe(k){const M=k.children.length>0?` { ${k.children.map(Xe).join(", ")} } `:"";return`${k.value}${M}`}function St(k){if(k.snapshot){const M=k.snapshot,I=k._futureSnapshot;k.snapshot=I,Pn(M.queryParams,I.queryParams)||k.queryParams.next(I.queryParams),M.fragment!==I.fragment&&k.fragment.next(I.fragment),Pn(M.params,I.params)||k.params.next(I.params),function tr(k,M){if(k.length!==M.length)return!1;for(let I=0;I<k.length;++I)if(!Pn(k[I],M[I]))return!1;return!0}(M.url,I.url)||k.url.next(I.url),Pn(M.data,I.data)||k.data.next(I.data)}else k.snapshot=k._futureSnapshot,k.data.next(k._futureSnapshot.data)}function zt(k,M){const I=Pn(k.params,M.params)&&function we(k,M){return Ve(k,M)&&k.every((I,U)=>Pn(I.parameters,M[U].parameters))}(k.url,M.url);return I&&!(!k.parent!=!M.parent)&&(!k.parent||zt(k.parent,M.parent))}function ei(k,M,I){if(I&&k.shouldReuseRoute(M.value,I.value.snapshot)){const U=I.value;U._futureSnapshot=M.value;const q=function dr(k,M,I){return M.children.map(U=>{for(const q of I.children)if(k.shouldReuseRoute(U.value,q.value.snapshot))return ei(k,U,q);return ei(k,U)})}(k,M,I);return new or(U,q)}{if(k.shouldAttach(M.value)){const he=k.retrieve(M.value);if(null!==he){const ye=he.route;return ye.value._futureSnapshot=M.value,ye.children=M.children.map(_e=>ei(k,_e)),ye}}const U=function Ri(k){return new $i(new Fe.X(k.url),new Fe.X(k.params),new Fe.X(k.queryParams),new Fe.X(k.fragment),new Fe.X(k.data),k.outlet,k.component,k)}(M.value),q=M.children.map(he=>ei(k,he));return new or(U,q)}}function yr(k){return"object"==typeof k&&null!=k&&!k.outlets&&!k.segmentPath}function _s(k){return"object"==typeof k&&null!=k&&k.outlets}function ys(k,M,I,U,q){let he={};return U&&sn(U,(ye,_e)=>{he[_e]=Array.isArray(ye)?ye.map(xt=>`${xt}`):`${ye}`}),new dn(I.root===k?M:Jr(I.root,k,M),he,q)}function Jr(k,M,I){const U={};return sn(k.children,(q,he)=>{U[he]=q===M?I:Jr(q,M,I)}),new on(k.segments,U)}class zr{constructor(M,I,U){if(this.isAbsolute=M,this.numberOfDoubleDots=I,this.commands=U,M&&U.length>0&&yr(U[0]))throw new Error("Root segment cannot have matrix parameters");const q=U.find(_s);if(q&&q!==Sr(U))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Os{constructor(M,I,U){this.segmentGroup=M,this.processChildren=I,this.index=U}}function Co(k,M,I){if(k||(k=new on([],{})),0===k.segments.length&&k.hasChildren())return vs(k,M,I);const U=function ds(k,M,I){let U=0,q=M;const he={match:!1,pathIndex:0,commandIndex:0};for(;q<k.segments.length;){if(U>=I.length)return he;const ye=k.segments[q],_e=I[U];if(_s(_e))break;const xt=`${_e}`,Sn=U<I.length-1?I[U+1]:null;if(q>0&&void 0===xt)break;if(xt&&Sn&&"object"==typeof Sn&&void 0===Sn.outlets){if(!wo(xt,Sn,ye))return he;U+=2}else{if(!wo(xt,{},ye))return he;U++}q++}return{match:!0,pathIndex:q,commandIndex:U}}(k,M,I),q=I.slice(U.commandIndex);if(U.match&&U.pathIndex<k.segments.length){const he=new on(k.segments.slice(0,U.pathIndex),{});return he.children[Ht]=new on(k.segments.slice(U.pathIndex),k.children),vs(he,0,q)}return U.match&&0===q.length?new on(k.segments,{}):U.match&&!k.hasChildren()?$s(k,M,I):U.match?vs(k,0,q):$s(k,M,I)}function vs(k,M,I){if(0===I.length)return new on(k.segments,{});{const U=function Rs(k){return _s(k[0])?k[0].outlets:{[Ht]:k}}(I),q={};return sn(U,(he,ye)=>{"string"==typeof he&&(he=[he]),null!==he&&(q[ye]=Co(k.children[ye],M,he))}),sn(k.children,(he,ye)=>{void 0===U[ye]&&(q[ye]=he)}),new on(k.segments,q)}}function $s(k,M,I){const U=k.segments.slice(0,M);let q=0;for(;q<I.length;){const he=I[q];if(_s(he)){const xt=Qs(he.outlets);return new on(U,xt)}if(0===q&&yr(I[0])){U.push(new xe(k.segments[M].path,To(I[0]))),q++;continue}const ye=_s(he)?he.outlets[Ht]:`${he}`,_e=q<I.length-1?I[q+1]:null;ye&&_e&&yr(_e)?(U.push(new xe(ye,To(_e))),q+=2):(U.push(new xe(ye,{})),q++)}return new on(U,{})}function Qs(k){const M={};return sn(k,(I,U)=>{"string"==typeof I&&(I=[I]),null!==I&&(M[U]=$s(new on([],{}),0,I))}),M}function To(k){const M={};return sn(k,(I,U)=>M[U]=`${I}`),M}function wo(k,M,I){return k==I.path&&Pn(M,I.parameters)}class Do{constructor(M,I,U,q){this.routeReuseStrategy=M,this.futureState=I,this.currState=U,this.forwardEvent=q}activate(M){const I=this.futureState._root,U=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,U,M),St(this.futureState.root),this.activateChildRoutes(I,U,M)}deactivateChildRoutes(M,I,U){const q=vi(I);M.children.forEach(he=>{const ye=he.value.outlet;this.deactivateRoutes(he,q[ye],U),delete q[ye]}),sn(q,(he,ye)=>{this.deactivateRouteAndItsChildren(he,U)})}deactivateRoutes(M,I,U){const q=M.value,he=I?I.value:null;if(q===he)if(q.component){const ye=U.getContext(q.outlet);ye&&this.deactivateChildRoutes(M,I,ye.children)}else this.deactivateChildRoutes(M,I,U);else he&&this.deactivateRouteAndItsChildren(I,U)}deactivateRouteAndItsChildren(M,I){M.value.component&&this.routeReuseStrategy.shouldDetach(M.value.snapshot)?this.detachAndStoreRouteSubtree(M,I):this.deactivateRouteAndOutlet(M,I)}detachAndStoreRouteSubtree(M,I){const U=I.getContext(M.value.outlet),q=U&&M.value.component?U.children:I,he=vi(M);for(const ye of Object.keys(he))this.deactivateRouteAndItsChildren(he[ye],q);if(U&&U.outlet){const ye=U.outlet.detach(),_e=U.children.onOutletDeactivated();this.routeReuseStrategy.store(M.value.snapshot,{componentRef:ye,route:M,contexts:_e})}}deactivateRouteAndOutlet(M,I){const U=I.getContext(M.value.outlet),q=U&&M.value.component?U.children:I,he=vi(M);for(const ye of Object.keys(he))this.deactivateRouteAndItsChildren(he[ye],q);U&&U.outlet&&(U.outlet.deactivate(),U.children.onOutletDeactivated(),U.attachRef=null,U.resolver=null,U.route=null)}activateChildRoutes(M,I,U){const q=vi(I);M.children.forEach(he=>{this.activateRoutes(he,q[he.value.outlet],U),this.forwardEvent(new Jt(he.value.snapshot))}),M.children.length&&this.forwardEvent(new Nt(M.value.snapshot))}activateRoutes(M,I,U){const q=M.value,he=I?I.value:null;if(St(q),q===he)if(q.component){const ye=U.getOrCreateContext(q.outlet);this.activateChildRoutes(M,I,ye.children)}else this.activateChildRoutes(M,I,U);else if(q.component){const ye=U.getOrCreateContext(q.outlet);if(this.routeReuseStrategy.shouldAttach(q.snapshot)){const _e=this.routeReuseStrategy.retrieve(q.snapshot);this.routeReuseStrategy.store(q.snapshot,null),ye.children.onOutletReAttached(_e.contexts),ye.attachRef=_e.componentRef,ye.route=_e.route.value,ye.outlet&&ye.outlet.attach(_e.componentRef,_e.route.value),St(_e.route.value),this.activateChildRoutes(M,null,ye.children)}else{const _e=function Sa(k){for(let M=k.parent;M;M=M.parent){const I=M.routeConfig;if(I&&I._loadedConfig)return I._loadedConfig;if(I&&I.component)return null}return null}(q.snapshot),xt=_e?_e.module.componentFactoryResolver:null;ye.attachRef=null,ye.route=q,ye.resolver=xt,ye.outlet&&ye.outlet.activateWith(q,xt),this.activateChildRoutes(M,null,ye.children)}}else this.activateChildRoutes(M,null,U)}}class Kr{constructor(M,I){this.routes=M,this.module=I}}function Xr(k){return"function"==typeof k}function Ps(k){return k instanceof dn}const bs=Symbol("INITIAL_VALUE");function Is(){return(0,dt.w)(k=>(0,_t.a)(k.map(M=>M.pipe((0,wt.q)(1),(0,at.O)(bs)))).pipe((0,In.R)((M,I)=>{let U=!1;return I.reduce((q,he,ye)=>q!==bs?q:(he===bs&&(U=!0),U||!1!==he&&ye!==I.length-1&&!Ps(he)?q:he),M)},bs),(0,je.h)(M=>M!==bs),(0,Qe.U)(M=>Ps(M)?M:!0===M),(0,wt.q)(1)))}class As{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Js,this.attachRef=null}}class Js{constructor(){this.contexts=new Map}onChildOutletCreated(M,I){const U=this.getOrCreateContext(M);U.outlet=I,this.contexts.set(M,U)}onChildOutletDestroyed(M){const I=this.getContext(M);I&&(I.outlet=null,I.attachRef=null)}onOutletDeactivated(){const M=this.contexts;return this.contexts=new Map,M}onOutletReAttached(M){this.contexts=M}getOrCreateContext(M){let I=this.getContext(M);return I||(I=new As,this.contexts.set(M,I)),I}getContext(M){return this.contexts.get(M)||null}}let Ss=(()=>{class k{constructor(I,U,q,he,ye){this.parentContexts=I,this.location=U,this.resolver=q,this.changeDetector=ye,this.activated=null,this._activatedRoute=null,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.attachEvents=new _.vpe,this.detachEvents=new _.vpe,this.name=he||Ht,I.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const I=this.parentContexts.getContext(this.name);I&&I.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,U){this.activated=I,this._activatedRoute=U,this.location.insert(I.hostView),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,U){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=I;const ye=(U=U||this.resolver).resolveComponentFactory(I._futureSnapshot.routeConfig.component),_e=this.parentContexts.getOrCreateContext(this.name).children,xt=new Rr(I,_e,this.location.injector);this.activated=this.location.createComponent(ye,this.location.length,xt),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return k.\u0275fac=function(I){return new(I||k)(_.Y36(Js),_.Y36(_.s_b),_.Y36(_._Vd),_.$8M("name"),_.Y36(_.sBO))},k.\u0275dir=_.lG2({type:k,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),k})();class Rr{constructor(M,I,U){this.route=M,this.childContexts=I,this.parent=U}get(M,I){return M===$i?this.route:M===Js?this.childContexts:this.parent.get(M,I)}}let Na=(()=>{class k{}return k.\u0275fac=function(I){return new(I||k)},k.\u0275cmp=_.Xpm({type:k,selectors:[["ng-component"]],decls:1,vars:0,template:function(I,U){1&I&&_._UZ(0,"router-outlet")},directives:[Ss],encapsulation:2}),k})();function vr(k,M=""){for(let I=0;I<k.length;I++){const U=k[I];ne(U,te(M,U))}}function ne(k,M){k.children&&vr(k.children,M)}function te(k,M){return M?k||M.path?k&&!M.path?`${k}/`:!k&&M.path?M.path:`${k}/${M.path}`:"":k}function Te(k){const M=k.children&&k.children.map(Te),I=M?Object.assign(Object.assign({},k),{children:M}):Object.assign({},k);return!I.component&&(M||I.loadChildren)&&I.outlet&&I.outlet!==Ht&&(I.component=Na),I}function Se(k){return k.outlet||Ht}function Je(k,M){const I=k.filter(U=>Se(U)===M);return I.push(...k.filter(U=>Se(U)!==M)),I}const Rt={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Bt(k,M,I){var U;if(""===M.path)return"full"===M.pathMatch&&(k.hasChildren()||I.length>0)?Object.assign({},Rt):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const he=(M.matcher||lr)(I,k,M);if(!he)return Object.assign({},Rt);const ye={};sn(he.posParams,(xt,Sn)=>{ye[Sn]=xt.path});const _e=he.consumed.length>0?Object.assign(Object.assign({},ye),he.consumed[he.consumed.length-1].parameters):ye;return{matched:!0,consumedSegments:he.consumed,lastChild:he.consumed.length,parameters:_e,positionalParamSegments:null!==(U=he.posParams)&&void 0!==U?U:{}}}function _n(k,M,I,U,q="corrected"){if(I.length>0&&function B(k,M,I){return I.some(U=>$(k,M,U)&&Se(U)!==Ht)}(k,I,U)){const ye=new on(M,function Fn(k,M,I,U){const q={};q[Ht]=U,U._sourceSegment=k,U._segmentIndexShift=M.length;for(const he of I)if(""===he.path&&Se(he)!==Ht){const ye=new on([],{});ye._sourceSegment=k,ye._segmentIndexShift=M.length,q[Se(he)]=ye}return q}(k,M,U,new on(I,k.children)));return ye._sourceSegment=k,ye._segmentIndexShift=M.length,{segmentGroup:ye,slicedSegments:[]}}if(0===I.length&&function se(k,M,I){return I.some(U=>$(k,M,U))}(k,I,U)){const ye=new on(k.segments,function Vn(k,M,I,U,q,he){const ye={};for(const _e of U)if($(k,I,_e)&&!q[Se(_e)]){const xt=new on([],{});xt._sourceSegment=k,xt._segmentIndexShift="legacy"===he?k.segments.length:M.length,ye[Se(_e)]=xt}return Object.assign(Object.assign({},q),ye)}(k,M,I,U,k.children,q));return ye._sourceSegment=k,ye._segmentIndexShift=M.length,{segmentGroup:ye,slicedSegments:I}}const he=new on(k.segments,k.children);return he._sourceSegment=k,he._segmentIndexShift=M.length,{segmentGroup:he,slicedSegments:I}}function $(k,M,I){return(!(k.hasChildren()||M.length>0)||"full"!==I.pathMatch)&&""===I.path}function le(k,M,I,U){return!!(Se(k)===U||U!==Ht&&$(M,I,k))&&("**"===k.path||Bt(M,k,I).matched)}function Oe(k,M,I){return 0===M.length&&!k.children[I]}class ft{constructor(M){this.segmentGroup=M||null}}class kt{constructor(M){this.urlTree=M}}function cn(k){return new c.y(M=>M.error(new ft(k)))}function ri(k){return new c.y(M=>M.error(new kt(k)))}function pi(k){return new c.y(M=>M.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${k}'`)))}class Qi{constructor(M,I,U,q,he){this.configLoader=I,this.urlSerializer=U,this.urlTree=q,this.config=he,this.allowRedirects=!0,this.ngModule=M.get(_.h0i)}apply(){const M=_n(this.urlTree.root,[],[],this.config).segmentGroup,I=new on(M.segments,M.children);return this.expandSegmentGroup(this.ngModule,this.config,I,Ht).pipe((0,Qe.U)(he=>this.createUrlTree(vn(he),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ze(he=>{if(he instanceof kt)return this.allowRedirects=!1,this.match(he.urlTree);throw he instanceof ft?this.noMatchError(he):he}))}match(M){return this.expandSegmentGroup(this.ngModule,this.config,M.root,Ht).pipe((0,Qe.U)(q=>this.createUrlTree(vn(q),M.queryParams,M.fragment))).pipe(ze(q=>{throw q instanceof ft?this.noMatchError(q):q}))}noMatchError(M){return new Error(`Cannot match any routes. URL Segment: '${M.segmentGroup}'`)}createUrlTree(M,I,U){const q=M.segments.length>0?new on([],{[Ht]:M}):M;return new dn(q,I,U)}expandSegmentGroup(M,I,U,q){return 0===U.segments.length&&U.hasChildren()?this.expandChildren(M,I,U).pipe((0,Qe.U)(he=>new on([],he))):this.expandSegment(M,U,I,U.segments,q,!0)}expandChildren(M,I,U){const q=[];for(const he of Object.keys(U.children))"primary"===he?q.unshift(he):q.push(he);return(0,fe.D)(q).pipe(Pe(he=>{const ye=U.children[he],_e=Je(I,he);return this.expandSegmentGroup(M,_e,ye,he).pipe((0,Qe.U)(xt=>({segment:xt,outlet:he})))}),(0,In.R)((he,ye)=>(he[ye.outlet]=ye.segment,he),{}),function Ne(k,M){const I=arguments.length>=2;return U=>U.pipe(k?(0,je.h)((q,he)=>k(q,he,U)):it.y,nt(1),I?(0,At.d)(M):(0,It.T)(()=>new rt.K))}())}expandSegment(M,I,U,q,he,ye){return(0,fe.D)(U).pipe(Pe(_e=>this.expandSegmentAgainstRoute(M,I,U,_e,q,he,ye).pipe(ze(Sn=>{if(Sn instanceof ft)return(0,ge.of)(null);throw Sn}))),(0,tn.P)(_e=>!!_e),ze((_e,xt)=>{if(_e instanceof rt.K||"EmptyError"===_e.name){if(Oe(I,q,he))return(0,ge.of)(new on([],{}));throw new ft(I)}throw _e}))}expandSegmentAgainstRoute(M,I,U,q,he,ye,_e){return le(q,I,he,ye)?void 0===q.redirectTo?this.matchSegmentAgainstRoute(M,I,q,he,ye):_e&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(M,I,U,q,he,ye):cn(I):cn(I)}expandSegmentAgainstRouteUsingRedirect(M,I,U,q,he,ye){return"**"===q.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(M,U,q,ye):this.expandRegularSegmentAgainstRouteUsingRedirect(M,I,U,q,he,ye)}expandWildCardWithParamsAgainstRouteUsingRedirect(M,I,U,q){const he=this.applyRedirectCommands([],U.redirectTo,{});return U.redirectTo.startsWith("/")?ri(he):this.lineralizeSegments(U,he).pipe((0,Ue.z)(ye=>{const _e=new on(ye,{});return this.expandSegment(M,_e,I,ye,q,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(M,I,U,q,he,ye){const{matched:_e,consumedSegments:xt,lastChild:Sn,positionalParamSegments:Ii}=Bt(I,q,he);if(!_e)return cn(I);const ti=this.applyRedirectCommands(xt,q.redirectTo,Ii);return q.redirectTo.startsWith("/")?ri(ti):this.lineralizeSegments(q,ti).pipe((0,Ue.z)(ir=>this.expandSegment(M,I,U,ir.concat(he.slice(Sn)),ye,!1)))}matchSegmentAgainstRoute(M,I,U,q,he){if("**"===U.path)return U.loadChildren?(U._loadedConfig?(0,ge.of)(U._loadedConfig):this.configLoader.load(M.injector,U)).pipe((0,Qe.U)(ir=>(U._loadedConfig=ir,new on(q,{})))):(0,ge.of)(new on(q,{}));const{matched:ye,consumedSegments:_e,lastChild:xt}=Bt(I,U,q);if(!ye)return cn(I);const Sn=q.slice(xt);return this.getChildConfig(M,U,q).pipe((0,Ue.z)(ti=>{const ir=ti.module,Cr=ti.routes,{segmentGroup:zs,slicedSegments:Fr}=_n(I,_e,Sn,Cr),_o=new on(zs.segments,zs.children);if(0===Fr.length&&_o.hasChildren())return this.expandChildren(ir,Cr,_o).pipe((0,Qe.U)(xo=>new on(_e,xo)));if(0===Cr.length&&0===Fr.length)return(0,ge.of)(new on(_e,{}));const fr=Se(U)===he;return this.expandSegment(ir,_o,Cr,Fr,fr?Ht:he,!0).pipe((0,Qe.U)(Bs=>new on(_e.concat(Bs.segments),Bs.children)))}))}getChildConfig(M,I,U){return I.children?(0,ge.of)(new Kr(I.children,M)):I.loadChildren?void 0!==I._loadedConfig?(0,ge.of)(I._loadedConfig):this.runCanLoadGuards(M.injector,I,U).pipe((0,Ue.z)(q=>q?this.configLoader.load(M.injector,I).pipe((0,Qe.U)(he=>(I._loadedConfig=he,he))):function si(k){return new c.y(M=>M.error(Zi(`Cannot load children because the guard of the route "path: '${k.path}'" returned false`)))}(I))):(0,ge.of)(new Kr([],M))}runCanLoadGuards(M,I,U){const q=I.canLoad;if(!q||0===q.length)return(0,ge.of)(!0);const he=q.map(ye=>{const _e=M.get(ye);let xt;if(function Fs(k){return k&&Xr(k.canLoad)}(_e))xt=_e.canLoad(I,U);else{if(!Xr(_e))throw new Error("Invalid CanLoad guard");xt=_e(I,U)}return fi(xt)});return(0,ge.of)(he).pipe(Is(),(0,wn.b)(ye=>{if(!Ps(ye))return;const _e=Zi(`Redirecting to "${this.urlSerializer.serialize(ye)}"`);throw _e.url=ye,_e}),(0,Qe.U)(ye=>!0===ye))}lineralizeSegments(M,I){let U=[],q=I.root;for(;;){if(U=U.concat(q.segments),0===q.numberOfChildren)return(0,ge.of)(U);if(q.numberOfChildren>1||!q.children[Ht])return pi(M.redirectTo);q=q.children[Ht]}}applyRedirectCommands(M,I,U){return this.applyRedirectCreatreUrlTree(I,this.urlSerializer.parse(I),M,U)}applyRedirectCreatreUrlTree(M,I,U,q){const he=this.createSegmentGroup(M,I.root,U,q);return new dn(he,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(M,I){const U={};return sn(M,(q,he)=>{if("string"==typeof q&&q.startsWith(":")){const _e=q.substring(1);U[he]=I[_e]}else U[he]=q}),U}createSegmentGroup(M,I,U,q){const he=this.createSegments(M,I.segments,U,q);let ye={};return sn(I.children,(_e,xt)=>{ye[xt]=this.createSegmentGroup(M,_e,U,q)}),new on(he,ye)}createSegments(M,I,U,q){return I.map(he=>he.path.startsWith(":")?this.findPosParam(M,he,q):this.findOrReturn(he,U))}findPosParam(M,I,U){const q=U[I.path.substring(1)];if(!q)throw new Error(`Cannot redirect to '${M}'. Cannot find '${I.path}'.`);return q}findOrReturn(M,I){let U=0;for(const q of I){if(q.path===M.path)return I.splice(U),q;U++}return M}}function vn(k){const M={};for(const U of Object.keys(k.children)){const he=vn(k.children[U]);(he.segments.length>0||he.hasChildren())&&(M[U]=he)}return function Hi(k){if(1===k.numberOfChildren&&k.children[Ht]){const M=k.children[Ht];return new on(k.segments.concat(M.segments),M.children)}return k}(new on(k.segments,M))}class kr{constructor(M){this.path=M,this.route=this.path[this.path.length-1]}}class qi{constructor(M,I){this.component=M,this.route=I}}function Go(k,M,I){const U=k._root;return Y(U,M?M._root:null,I,[U.value])}function j(k,M,I){const U=function F(k){if(!k)return null;for(let M=k.parent;M;M=M.parent){const I=M.routeConfig;if(I&&I._loadedConfig)return I._loadedConfig}return null}(M);return(U?U.module.injector:I).get(k)}function Y(k,M,I,U,q={canDeactivateChecks:[],canActivateChecks:[]}){const he=vi(M);return k.children.forEach(ye=>{(function ct(k,M,I,U,q={canDeactivateChecks:[],canActivateChecks:[]}){const he=k.value,ye=M?M.value:null,_e=I?I.getContext(k.value.outlet):null;if(ye&&he.routeConfig===ye.routeConfig){const xt=function Ln(k,M,I){if("function"==typeof I)return I(k,M);switch(I){case"pathParamsChange":return!Ve(k.url,M.url);case"pathParamsOrQueryParamsChange":return!Ve(k.url,M.url)||!Pn(k.queryParams,M.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zt(k,M)||!Pn(k.queryParams,M.queryParams);default:return!zt(k,M)}}(ye,he,he.routeConfig.runGuardsAndResolvers);xt?q.canActivateChecks.push(new kr(U)):(he.data=ye.data,he._resolvedData=ye._resolvedData),Y(k,M,he.component?_e?_e.children:null:I,U,q),xt&&_e&&_e.outlet&&_e.outlet.isActivated&&q.canDeactivateChecks.push(new qi(_e.outlet.component,ye))}else ye&&oi(M,_e,q),q.canActivateChecks.push(new kr(U)),Y(k,null,he.component?_e?_e.children:null:I,U,q)})(ye,he[ye.value.outlet],I,U.concat([ye.value]),q),delete he[ye.value.outlet]}),sn(he,(ye,_e)=>oi(ye,I.getContext(_e),q)),q}function oi(k,M,I){const U=vi(k),q=k.value;sn(U,(he,ye)=>{oi(he,q.component?M?M.children.getContext(ye):null:M,I)}),I.canDeactivateChecks.push(new qi(q.component&&M&&M.outlet&&M.outlet.isActivated?M.outlet.component:null,q))}class pa{}function Ns(k){return new c.y(M=>M.error(k))}class lc{constructor(M,I,U,q,he,ye){this.rootComponentType=M,this.config=I,this.urlTree=U,this.url=q,this.paramsInheritanceStrategy=he,this.relativeLinkResolution=ye}recognize(){const M=_n(this.urlTree.root,[],[],this.config.filter(ye=>void 0===ye.redirectTo),this.relativeLinkResolution).segmentGroup,I=this.processSegmentGroup(this.config,M,Ht);if(null===I)return null;const U=new qr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ht,this.rootComponentType,null,this.urlTree.root,-1,{}),q=new or(U,I),he=new Ke(this.url,q);return this.inheritParamsAndData(he._root),he}inheritParamsAndData(M){const I=M.value,U=_r(I,this.paramsInheritanceStrategy);I.params=Object.freeze(U.params),I.data=Object.freeze(U.data),M.children.forEach(q=>this.inheritParamsAndData(q))}processSegmentGroup(M,I,U){return 0===I.segments.length&&I.hasChildren()?this.processChildren(M,I):this.processSegment(M,I,I.segments,U)}processChildren(M,I){const U=[];for(const he of Object.keys(I.children)){const ye=I.children[he],_e=Je(M,he),xt=this.processSegmentGroup(_e,ye,he);if(null===xt)return null;U.push(...xt)}const q=Qa(U);return function Ao(k){k.sort((M,I)=>M.value.outlet===Ht?-1:I.value.outlet===Ht?1:M.value.outlet.localeCompare(I.value.outlet))}(q),q}processSegment(M,I,U,q){for(const he of M){const ye=this.processSegmentAgainstRoute(he,I,U,q);if(null!==ye)return ye}return Oe(I,U,q)?[]:null}processSegmentAgainstRoute(M,I,U,q){if(M.redirectTo||!le(M,I,U,q))return null;let he,ye=[],_e=[];if("**"===M.path){const Cr=U.length>0?Sr(U).parameters:{};he=new qr(U,Cr,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,So(M),Se(M),M.component,M,ea(I),Ma(I)+U.length,ul(M))}else{const Cr=Bt(I,M,U);if(!Cr.matched)return null;ye=Cr.consumedSegments,_e=U.slice(Cr.lastChild),he=new qr(ye,Cr.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,So(M),Se(M),M.component,M,ea(I),Ma(I)+ye.length,ul(M))}const xt=function mo(k){return k.children?k.children:k.loadChildren?k._loadedConfig.routes:[]}(M),{segmentGroup:Sn,slicedSegments:Ii}=_n(I,ye,_e,xt.filter(Cr=>void 0===Cr.redirectTo),this.relativeLinkResolution);if(0===Ii.length&&Sn.hasChildren()){const Cr=this.processChildren(xt,Sn);return null===Cr?null:[new or(he,Cr)]}if(0===xt.length&&0===Ii.length)return[new or(he,[])];const ti=Se(M)===q,ir=this.processSegment(xt,Sn,Ii,ti?Ht:q);return null===ir?null:[new or(he,ir)]}}function cl(k){const M=k.value.routeConfig;return M&&""===M.path&&void 0===M.redirectTo}function Qa(k){const M=[],I=new Set;for(const U of k){if(!cl(U)){M.push(U);continue}const q=M.find(he=>U.value.routeConfig===he.value.routeConfig);void 0!==q?(q.children.push(...U.children),I.add(q)):M.push(U)}for(const U of I){const q=Qa(U.children);M.push(new or(U.value,q))}return M.filter(U=>!I.has(U))}function ea(k){let M=k;for(;M._sourceSegment;)M=M._sourceSegment;return M}function Ma(k){let M=k,I=M._segmentIndexShift?M._segmentIndexShift:0;for(;M._sourceSegment;)M=M._sourceSegment,I+=M._segmentIndexShift?M._segmentIndexShift:0;return I-1}function So(k){return k.data||{}}function ul(k){return k.resolve||{}}function ma(k){return(0,dt.w)(M=>{const I=k(M);return I?(0,fe.D)(I).pipe((0,Qe.U)(()=>M)):(0,ge.of)(M)})}class Ra extends class Zs{shouldDetach(M){return!1}store(M,I){}shouldAttach(M){return!1}retrieve(M){return null}shouldReuseRoute(M,I){return M.routeConfig===I.routeConfig}}{}const Vl=new _.OlP("ROUTES");class ta{constructor(M,I,U,q){this.injector=M,this.compiler=I,this.onLoadStartListener=U,this.onLoadEndListener=q}load(M,I){if(I._loader$)return I._loader$;this.onLoadStartListener&&this.onLoadStartListener(I);const q=this.loadModuleFactory(I.loadChildren).pipe((0,Qe.U)(he=>{this.onLoadEndListener&&this.onLoadEndListener(I);const ye=he.create(M);return new Kr(gn(ye.injector.get(Vl,void 0,_.XFs.Self|_.XFs.Optional)).map(Te),ye)}),ze(he=>{throw I._loader$=void 0,he}));return I._loader$=new ke(q,()=>new qe.x).pipe(pe()),I._loader$}loadModuleFactory(M){return fi(M()).pipe((0,Ue.z)(I=>I instanceof _.YKP?(0,ge.of)(I):(0,fe.D)(this.compiler.compileModuleAsync(I))))}}class Wo{shouldProcessUrl(M){return!0}extract(M){return M}merge(M,I){return M}}function Nr(k){throw k}function cc(k,M,I){return M.parse("/")}function Hc(k,M){return(0,ge.of)(null)}const uc={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ns=(()=>{class k{constructor(I,U,q,he,ye,_e,xt){this.rootComponentType=I,this.urlSerializer=U,this.rootContexts=q,this.location=he,this.config=xt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new qe.x,this.errorHandler=Nr,this.malformedUriErrorHandler=cc,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Hc,afterPreactivation:Hc},this.urlHandlingStrategy=new Wo,this.routeReuseStrategy=new Ra,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=ye.get(_.h0i),this.console=ye.get(_.c2e);const ti=ye.get(_.R0b);this.isNgZoneEnabled=ti instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(xt),this.currentUrlTree=function cr(){return new dn(new on([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ta(ye,_e,ir=>this.triggerEvent(new Ki(ir)),ir=>this.triggerEvent(new Ei(ir))),this.routerState=Wr(this.currentUrlTree,this.rootComponentType),this.transitions=new Fe.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var I;return null===(I=this.location.getState())||void 0===I?void 0:I.\u0275routerPageId}setupNavigations(I){const U=this.events;return I.pipe((0,je.h)(q=>0!==q.id),(0,Qe.U)(q=>Object.assign(Object.assign({},q),{extractedUrl:this.urlHandlingStrategy.extract(q.rawUrl)})),(0,dt.w)(q=>{let he=!1,ye=!1;return(0,ge.of)(q).pipe((0,wn.b)(_e=>{this.currentNavigation={id:_e.id,initialUrl:_e.currentRawUrl,extractedUrl:_e.extractedUrl,trigger:_e.source,extras:_e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,dt.w)(_e=>{const xt=this.browserUrlTree.toString(),Sn=!this.navigated||_e.extractedUrl.toString()!==xt||xt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Sn)&&this.urlHandlingStrategy.shouldProcessUrl(_e.rawUrl))return na(_e.source)&&(this.browserUrlTree=_e.extractedUrl),(0,ge.of)(_e).pipe((0,dt.w)(ti=>{const ir=this.transitions.getValue();return U.next(new bn(ti.id,this.serializeUrl(ti.extractedUrl),ti.source,ti.restoredState)),ir!==this.transitions.getValue()?ot.E:Promise.resolve(ti)}),function es(k,M,I,U){return(0,dt.w)(q=>function gi(k,M,I,U,q){return new Qi(k,M,I,U,q).apply()}(k,M,I,q.extractedUrl,U).pipe((0,Qe.U)(he=>Object.assign(Object.assign({},q),{urlAfterRedirects:he}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,wn.b)(ti=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:ti.urlAfterRedirects})}),function ga(k,M,I,U,q){return(0,Ue.z)(he=>function Xs(k,M,I,U,q="emptyOnly",he="legacy"){try{const ye=new lc(k,M,I,U,q,he).recognize();return null===ye?Ns(new pa):(0,ge.of)(ye)}catch(ye){return Ns(ye)}}(k,M,he.urlAfterRedirects,I(he.urlAfterRedirects),U,q).pipe((0,Qe.U)(ye=>Object.assign(Object.assign({},he),{targetSnapshot:ye}))))}(this.rootComponentType,this.config,ti=>this.serializeUrl(ti),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,wn.b)(ti=>{if("eager"===this.urlUpdateStrategy){if(!ti.extras.skipLocationChange){const Cr=this.urlHandlingStrategy.merge(ti.urlAfterRedirects,ti.rawUrl);this.setBrowserUrl(Cr,ti)}this.browserUrlTree=ti.urlAfterRedirects}const ir=new ht(ti.id,this.serializeUrl(ti.extractedUrl),this.serializeUrl(ti.urlAfterRedirects),ti.targetSnapshot);U.next(ir)}));if(Sn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:ir,extractedUrl:Cr,source:zs,restoredState:Fr,extras:_o}=_e,fr=new bn(ir,this.serializeUrl(Cr),zs,Fr);U.next(fr);const ya=Wr(Cr,this.rootComponentType).snapshot;return(0,ge.of)(Object.assign(Object.assign({},_e),{targetSnapshot:ya,urlAfterRedirects:Cr,extras:Object.assign(Object.assign({},_o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=_e.rawUrl,_e.resolve(null),ot.E}),ma(_e=>{const{targetSnapshot:xt,id:Sn,extractedUrl:Ii,rawUrl:ti,extras:{skipLocationChange:ir,replaceUrl:Cr}}=_e;return this.hooks.beforePreactivation(xt,{navigationId:Sn,appliedUrlTree:Ii,rawUrlTree:ti,skipLocationChange:!!ir,replaceUrl:!!Cr})}),(0,wn.b)(_e=>{const xt=new Kt(_e.id,this.serializeUrl(_e.extractedUrl),this.serializeUrl(_e.urlAfterRedirects),_e.targetSnapshot);this.triggerEvent(xt)}),(0,Qe.U)(_e=>Object.assign(Object.assign({},_e),{guards:Go(_e.targetSnapshot,_e.currentSnapshot,this.rootContexts)})),function ts(k,M){return(0,Ue.z)(I=>{const{targetSnapshot:U,currentSnapshot:q,guards:{canActivateChecks:he,canDeactivateChecks:ye}}=I;return 0===ye.length&&0===he.length?(0,ge.of)(Object.assign(Object.assign({},I),{guardsResult:!0})):function Pr(k,M,I,U){return(0,fe.D)(k).pipe((0,Ue.z)(q=>function fa(k,M,I,U,q){const he=M&&M.routeConfig?M.routeConfig.canDeactivate:null;if(!he||0===he.length)return(0,ge.of)(!0);const ye=he.map(_e=>{const xt=j(_e,M,q);let Sn;if(function Gs(k){return k&&Xr(k.canDeactivate)}(xt))Sn=fi(xt.canDeactivate(k,M,I,U));else{if(!Xr(xt))throw new Error("Invalid CanDeactivate guard");Sn=fi(xt(k,M,I,U))}return Sn.pipe((0,tn.P)())});return(0,ge.of)(ye).pipe(Is())}(q.component,q.route,I,M,U)),(0,tn.P)(q=>!0!==q,!0))}(ye,U,q,k).pipe((0,Ue.z)(_e=>_e&&function ks(k){return"boolean"==typeof k}(_e)?function hs(k,M,I,U){return(0,fe.D)(M).pipe(Pe(q=>(0,mt.z)(function Zo(k,M){return null!==k&&M&&M(new $n(k)),(0,ge.of)(!0)}(q.route.parent,U),function Io(k,M){return null!==k&&M&&M(new hi(k)),(0,ge.of)(!0)}(q.route,U),function Ll(k,M,I){const U=M[M.length-1],he=M.slice(0,M.length-1).reverse().map(ye=>function W(k){const M=k.routeConfig?k.routeConfig.canActivateChild:null;return M&&0!==M.length?{node:k,guards:M}:null}(ye)).filter(ye=>null!==ye).map(ye=>Ee(()=>{const _e=ye.guards.map(xt=>{const Sn=j(xt,ye.node,I);let Ii;if(function Hs(k){return k&&Xr(k.canActivateChild)}(Sn))Ii=fi(Sn.canActivateChild(U,k));else{if(!Xr(Sn))throw new Error("Invalid CanActivateChild guard");Ii=fi(Sn(U,k))}return Ii.pipe((0,tn.P)())});return(0,ge.of)(_e).pipe(Is())}));return(0,ge.of)(he).pipe(Is())}(k,q.path,I),function ha(k,M,I){const U=M.routeConfig?M.routeConfig.canActivate:null;if(!U||0===U.length)return(0,ge.of)(!0);const q=U.map(he=>Ee(()=>{const ye=j(he,M,I);let _e;if(function nr(k){return k&&Xr(k.canActivate)}(ye))_e=fi(ye.canActivate(M,k));else{if(!Xr(ye))throw new Error("Invalid CanActivate guard");_e=fi(ye(M,k))}return _e.pipe((0,tn.P)())}));return(0,ge.of)(q).pipe(Is())}(k,q.route,I))),(0,tn.P)(q=>!0!==q,!0))}(U,he,k,M):(0,ge.of)(_e)),(0,Qe.U)(_e=>Object.assign(Object.assign({},I),{guardsResult:_e})))})}(this.ngModule.injector,_e=>this.triggerEvent(_e)),(0,wn.b)(_e=>{if(Ps(_e.guardsResult)){const Sn=Zi(`Redirecting to "${this.serializeUrl(_e.guardsResult)}"`);throw Sn.url=_e.guardsResult,Sn}const xt=new Mn(_e.id,this.serializeUrl(_e.extractedUrl),this.serializeUrl(_e.urlAfterRedirects),_e.targetSnapshot,!!_e.guardsResult);this.triggerEvent(xt)}),(0,je.h)(_e=>!!_e.guardsResult||(this.restoreHistory(_e),this.cancelNavigationTransition(_e,""),!1)),ma(_e=>{if(_e.guards.canActivateChecks.length)return(0,ge.of)(_e).pipe((0,wn.b)(xt=>{const Sn=new Kn(xt.id,this.serializeUrl(xt.extractedUrl),this.serializeUrl(xt.urlAfterRedirects),xt.targetSnapshot);this.triggerEvent(Sn)}),(0,dt.w)(xt=>{let Sn=!1;return(0,ge.of)(xt).pipe(function xa(k,M){return(0,Ue.z)(I=>{const{targetSnapshot:U,guards:{canActivateChecks:q}}=I;if(!q.length)return(0,ge.of)(I);let he=0;return(0,fe.D)(q).pipe(Pe(ye=>function Oa(k,M,I,U){return function dl(k,M,I,U){const q=Object.keys(k);if(0===q.length)return(0,ge.of)({});const he={};return(0,fe.D)(q).pipe((0,Ue.z)(ye=>function hl(k,M,I,U){const q=j(k,M,U);return fi(q.resolve?q.resolve(M,I):q(M,I))}(k[ye],M,I,U).pipe((0,wn.b)(_e=>{he[ye]=_e}))),nt(1),(0,Ue.z)(()=>Object.keys(he).length===q.length?(0,ge.of)(he):ot.E))}(k._resolve,k,M,U).pipe((0,Qe.U)(he=>(k._resolvedData=he,k.data=Object.assign(Object.assign({},k.data),_r(k,I).resolve),null)))}(ye.route,U,k,M)),(0,wn.b)(()=>he++),nt(1),(0,Ue.z)(ye=>he===q.length?(0,ge.of)(I):ot.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,wn.b)({next:()=>Sn=!0,complete:()=>{Sn||(this.restoreHistory(xt),this.cancelNavigationTransition(xt,"At least one route resolver didn't emit any value."))}}))}),(0,wn.b)(xt=>{const Sn=new ii(xt.id,this.serializeUrl(xt.extractedUrl),this.serializeUrl(xt.urlAfterRedirects),xt.targetSnapshot);this.triggerEvent(Sn)}))}),ma(_e=>{const{targetSnapshot:xt,id:Sn,extractedUrl:Ii,rawUrl:ti,extras:{skipLocationChange:ir,replaceUrl:Cr}}=_e;return this.hooks.afterPreactivation(xt,{navigationId:Sn,appliedUrlTree:Ii,rawUrlTree:ti,skipLocationChange:!!ir,replaceUrl:!!Cr})}),(0,Qe.U)(_e=>{const xt=function mn(k,M,I){const U=ei(k,M._root,I?I._root:void 0);return new zn(U,M)}(this.routeReuseStrategy,_e.targetSnapshot,_e.currentRouterState);return Object.assign(Object.assign({},_e),{targetRouterState:xt})}),(0,wn.b)(_e=>{this.currentUrlTree=_e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(_e.urlAfterRedirects,_e.rawUrl),this.routerState=_e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(_e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,_e),this.browserUrlTree=_e.urlAfterRedirects)}),((k,M,I)=>(0,Qe.U)(U=>(new Do(M,U.targetRouterState,U.currentRouterState,I).activate(k),U)))(this.rootContexts,this.routeReuseStrategy,_e=>this.triggerEvent(_e)),(0,wn.b)({next(){he=!0},complete(){he=!0}}),function We(k){return(0,Ze.e)((M,I)=>{try{M.subscribe(I)}finally{I.add(k)}})}(()=>{var _e;he||ye||this.cancelNavigationTransition(q,`Navigation ID ${q.id} is not equal to the current navigation id ${this.navigationId}`),(null===(_e=this.currentNavigation)||void 0===_e?void 0:_e.id)===q.id&&(this.currentNavigation=null)}),ze(_e=>{if(ye=!0,function Ai(k){return k&&k[Vi]}(_e)){const xt=Ps(_e.url);xt||(this.navigated=!0,this.restoreHistory(q,!0));const Sn=new Ot(q.id,this.serializeUrl(q.extractedUrl),_e.message);U.next(Sn),xt?setTimeout(()=>{const Ii=this.urlHandlingStrategy.merge(_e.url,this.rawUrlTree),ti={skipLocationChange:q.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||na(q.source)};this.scheduleNavigation(Ii,"imperative",null,ti,{resolve:q.resolve,reject:q.reject,promise:q.promise})},0):q.resolve(!1)}else{this.restoreHistory(q,!0);const xt=new Le(q.id,this.serializeUrl(q.extractedUrl),_e);U.next(xt);try{q.resolve(this.errorHandler(_e))}catch(Sn){q.reject(Sn)}}return ot.E}))}))}resetRootComponentType(I){this.rootComponentType=I,this.routerState.root.component=this.rootComponentType}setTransition(I){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),I))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const U="popstate"===I.type?"popstate":"hashchange";"popstate"===U&&setTimeout(()=>{var q;const he={replaceUrl:!0},ye=(null===(q=I.state)||void 0===q?void 0:q.navigationId)?I.state:null;if(ye){const xt=Object.assign({},ye);delete xt.navigationId,delete xt.\u0275routerPageId,0!==Object.keys(xt).length&&(he.state=xt)}const _e=this.parseUrl(I.url);this.scheduleNavigation(_e,U,ye,he)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(I){this.events.next(I)}resetConfig(I){vr(I),this.config=I.map(Te),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(I,U={}){const{relativeTo:q,queryParams:he,fragment:ye,queryParamsHandling:_e,preserveFragment:xt}=U,Sn=q||this.routerState.root,Ii=xt?this.currentUrlTree.fragment:ye;let ti=null;switch(_e){case"merge":ti=Object.assign(Object.assign({},this.currentUrlTree.queryParams),he);break;case"preserve":ti=this.currentUrlTree.queryParams;break;default:ti=he||null}return null!==ti&&(ti=this.removeEmptyProps(ti)),function Di(k,M,I,U,q){if(0===I.length)return ys(M.root,M.root,M,U,q);const he=function Ia(k){if("string"==typeof k[0]&&1===k.length&&"/"===k[0])return new zr(!0,0,k);let M=0,I=!1;const U=k.reduce((q,he,ye)=>{if("object"==typeof he&&null!=he){if(he.outlets){const _e={};return sn(he.outlets,(xt,Sn)=>{_e[Sn]="string"==typeof xt?xt.split("/"):xt}),[...q,{outlets:_e}]}if(he.segmentPath)return[...q,he.segmentPath]}return"string"!=typeof he?[...q,he]:0===ye?(he.split("/").forEach((_e,xt)=>{0==xt&&"."===_e||(0==xt&&""===_e?I=!0:".."===_e?M++:""!=_e&&q.push(_e))}),q):[...q,he]},[]);return new zr(I,M,U)}(I);if(he.toRoot())return ys(M.root,new on([],{}),M,U,q);const ye=function Xo(k,M,I){if(k.isAbsolute)return new Os(M.root,!0,0);if(-1===I.snapshot._lastPathIndex){const he=I.snapshot._urlSegment;return new Os(he,he===M.root,0)}const U=yr(k.commands[0])?0:1;return function Aa(k,M,I){let U=k,q=M,he=I;for(;he>q;){if(he-=q,U=U.parent,!U)throw new Error("Invalid number of '../'");q=U.segments.length}return new Os(U,!1,q-he)}(I.snapshot._urlSegment,I.snapshot._lastPathIndex+U,k.numberOfDoubleDots)}(he,M,k),_e=ye.processChildren?vs(ye.segmentGroup,ye.index,he.commands):Co(ye.segmentGroup,ye.index,he.commands);return ys(ye.segmentGroup,_e,M,U,q)}(Sn,this.currentUrlTree,I,ti,null!=Ii?Ii:null)}navigateByUrl(I,U={skipLocationChange:!1}){const q=Ps(I)?I:this.parseUrl(I),he=this.urlHandlingStrategy.merge(q,this.rawUrlTree);return this.scheduleNavigation(he,"imperative",null,U)}navigate(I,U={skipLocationChange:!1}){return function md(k){for(let M=0;M<k.length;M++){const I=k[M];if(null==I)throw new Error(`The requested path contains ${I} segment at index ${M}`)}}(I),this.navigateByUrl(this.createUrlTree(I,U),U)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let U;try{U=this.urlSerializer.parse(I)}catch(q){U=this.malformedUriErrorHandler(q,this.urlSerializer,I)}return U}isActive(I,U){let q;if(q=!0===U?Object.assign({},uc):!1===U?Object.assign({},gd):U,Ps(I))return Qn(this.currentUrlTree,I,q);const he=this.parseUrl(I);return Qn(this.currentUrlTree,he,q)}removeEmptyProps(I){return Object.keys(I).reduce((U,q)=>{const he=I[q];return null!=he&&(U[q]=he),U},{})}processNavigations(){this.navigations.subscribe(I=>{this.navigated=!0,this.lastSuccessfulId=I.id,this.currentPageId=I.targetPageId,this.events.next(new pt(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,I.resolve(!0)},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)})}scheduleNavigation(I,U,q,he,ye){var _e,xt,Sn;if(this.disposed)return Promise.resolve(!1);const Ii=this.transitions.value,ti=na(U)&&Ii&&!na(Ii.source),ir=Ii.rawUrl.toString()===I.toString(),Cr=Ii.id===(null===(_e=this.currentNavigation)||void 0===_e?void 0:_e.id);if(ti&&ir&&Cr)return Promise.resolve(!0);let Fr,_o,fr;ye?(Fr=ye.resolve,_o=ye.reject,fr=ye.promise):fr=new Promise((xo,Oo)=>{Fr=xo,_o=Oo});const ya=++this.navigationId;let Bs;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(q=this.location.getState()),Bs=q&&q.\u0275routerPageId?q.\u0275routerPageId:he.replaceUrl||he.skipLocationChange?null!==(xt=this.browserPageId)&&void 0!==xt?xt:0:(null!==(Sn=this.browserPageId)&&void 0!==Sn?Sn:0)+1):Bs=0,this.setTransition({id:ya,targetPageId:Bs,source:U,restoredState:q,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:I,extras:he,resolve:Fr,reject:_o,promise:fr,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),fr.catch(xo=>Promise.reject(xo))}setBrowserUrl(I,U){const q=this.urlSerializer.serialize(I),he=Object.assign(Object.assign({},U.extras.state),this.generateNgRouterState(U.id,U.targetPageId));this.location.isCurrentPathEqualTo(q)||U.extras.replaceUrl?this.location.replaceState(q,"",he):this.location.go(q,"",he)}restoreHistory(I,U=!1){var q,he;if("computed"===this.canceledNavigationResolution){const ye=this.currentPageId-I.targetPageId;"popstate"!==I.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(q=this.currentNavigation)||void 0===q?void 0:q.finalUrl)||0===ye?this.currentUrlTree===(null===(he=this.currentNavigation)||void 0===he?void 0:he.finalUrl)&&0===ye&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ye)}else"replace"===this.canceledNavigationResolution&&(U&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(I,U){const q=new Ot(I.id,this.serializeUrl(I.extractedUrl),U);this.triggerEvent(q),I.resolve(!1)}generateNgRouterState(I,U){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:U}:{navigationId:I}}}return k.\u0275fac=function(I){_.$Z()},k.\u0275prov=_.Yz7({token:k,factory:k.\u0275fac}),k})();function na(k){return"imperative"!==k}let br=(()=>{class k{constructor(I,U,q,he,ye){this.router=I,this.route=U,this.tabIndexAttribute=q,this.renderer=he,this.el=ye,this.commands=null,this.onChanges=new qe.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(I){if(null!=this.tabIndexAttribute)return;const U=this.renderer,q=this.el.nativeElement;null!==I?U.setAttribute(q,"tabindex",I):U.removeAttribute(q,"tabindex")}ngOnChanges(I){this.onChanges.next(this)}set routerLink(I){null!=I?(this.commands=Array.isArray(I)?I:[I],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const I={skipLocationChange:Ws(this.skipLocationChange),replaceUrl:Ws(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,I),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ws(this.preserveFragment)})}}return k.\u0275fac=function(I){return new(I||k)(_.Y36(ns),_.Y36($i),_.$8M("tabindex"),_.Y36(_.Qsj),_.Y36(_.SBq))},k.\u0275dir=_.lG2({type:k,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(I,U){1&I&&_.NdJ("click",function(){return U.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[_.TTD]}),k})(),eo=(()=>{class k{constructor(I,U,q){this.router=I,this.route=U,this.locationStrategy=q,this.commands=null,this.href=null,this.onChanges=new qe.x,this.subscription=I.events.subscribe(he=>{he instanceof pt&&this.updateTargetUrlAndHref()})}set routerLink(I){this.commands=null!=I?Array.isArray(I)?I:[I]:null}ngOnChanges(I){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(I,U,q,he,ye){if(0!==I||U||q||he||ye||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const _e={skipLocationChange:Ws(this.skipLocationChange),replaceUrl:Ws(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,_e),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ws(this.preserveFragment)})}}return k.\u0275fac=function(I){return new(I||k)(_.Y36(ns),_.Y36($i),_.Y36(qt.S$))},k.\u0275dir=_.lG2({type:k,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(I,U){1&I&&_.NdJ("click",function(he){return U.onClick(he.button,he.ctrlKey,he.shiftKey,he.altKey,he.metaKey)}),2&I&&_.uIk("target",U.target)("href",U.href,_.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[_.TTD]}),k})();function Ws(k){return""===k||!!k}class Wt{}class No{preload(M,I){return(0,ge.of)(null)}}let Ul=(()=>{class k{constructor(I,U,q,he){this.router=I,this.injector=q,this.preloadingStrategy=he,this.loader=new ta(q,U,xt=>I.triggerEvent(new Ki(xt)),xt=>I.triggerEvent(new Ei(xt)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,je.h)(I=>I instanceof pt),Pe(()=>this.preload())).subscribe(()=>{})}preload(){const I=this.injector.get(_.h0i);return this.processRoutes(I,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,U){const q=[];for(const he of U)if(he.loadChildren&&!he.canLoad&&he._loadedConfig){const ye=he._loadedConfig;q.push(this.processRoutes(ye.module,ye.routes))}else he.loadChildren&&!he.canLoad?q.push(this.preloadConfig(I,he)):he.children&&q.push(this.processRoutes(I,he.children));return(0,fe.D)(q).pipe((0,$t.J)(),(0,Qe.U)(he=>{}))}preloadConfig(I,U){return this.preloadingStrategy.preload(U,()=>(U._loadedConfig?(0,ge.of)(U._loadedConfig):this.loader.load(I.injector,U)).pipe((0,Ue.z)(he=>(U._loadedConfig=he,this.processRoutes(he.module,he.routes)))))}}return k.\u0275fac=function(I){return new(I||k)(_.LFG(ns),_.LFG(_.Sil),_.LFG(_.zs3),_.LFG(Wt))},k.\u0275prov=_.Yz7({token:k,factory:k.\u0275fac}),k})(),An=(()=>{class k{constructor(I,U,q={}){this.router=I,this.viewportScroller=U,this.options=q,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},q.scrollPositionRestoration=q.scrollPositionRestoration||"disabled",q.anchorScrolling=q.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(I=>{I instanceof bn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof pt&&(this.lastId=I.id,this.scheduleScrollEvent(I,this.router.parseUrl(I.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(I=>{I instanceof Yn&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,U){this.router.triggerEvent(new Yn(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,U))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return k.\u0275fac=function(I){_.$Z()},k.\u0275prov=_.Yz7({token:k,factory:k.\u0275fac}),k})();const Mo=new _.OlP("ROUTER_CONFIGURATION"),En=new _.OlP("ROUTER_FORROOT_GUARD"),Ct=[qt.Ye,{provide:de,useClass:X},{provide:ns,useFactory:function _d(k,M,I,U,q,he,ye={},_e,xt){const Sn=new ns(null,k,M,I,U,q,gn(he));return _e&&(Sn.urlHandlingStrategy=_e),xt&&(Sn.routeReuseStrategy=xt),function fl(k,M){k.errorHandler&&(M.errorHandler=k.errorHandler),k.malformedUriErrorHandler&&(M.malformedUriErrorHandler=k.malformedUriErrorHandler),k.onSameUrlNavigation&&(M.onSameUrlNavigation=k.onSameUrlNavigation),k.paramsInheritanceStrategy&&(M.paramsInheritanceStrategy=k.paramsInheritanceStrategy),k.relativeLinkResolution&&(M.relativeLinkResolution=k.relativeLinkResolution),k.urlUpdateStrategy&&(M.urlUpdateStrategy=k.urlUpdateStrategy),k.canceledNavigationResolution&&(M.canceledNavigationResolution=k.canceledNavigationResolution)}(ye,Sn),ye.enableTracing&&Sn.events.subscribe(Ii=>{var ti,ir;null===(ti=console.group)||void 0===ti||ti.call(console,`Router Event: ${Ii.constructor.name}`),console.log(Ii.toString()),console.log(Ii),null===(ir=console.groupEnd)||void 0===ir||ir.call(console)}),Sn},deps:[de,Js,qt.Ye,_.zs3,_.Sil,Vl,Mo,[class Ls{},new _.FiY],[class _a{},new _.FiY]]},Js,{provide:$i,useFactory:function Wc(k){return k.routerState.root},deps:[ns]},Ul,No,class Mi{preload(M,I){return I().pipe(ze(()=>(0,ge.of)(null)))}},{provide:Mo,useValue:{enableTracing:!1}}];function en(){return new _.PXZ("Router",ns)}let is=(()=>{class k{constructor(I,U){}static forRoot(I,U){return{ngModule:k,providers:[Ct,Zc(I),{provide:En,useFactory:qs,deps:[[ns,new _.FiY,new _.tp0]]},{provide:Mo,useValue:U||{}},{provide:qt.S$,useFactory:Gc,deps:[qt.lw,[new _.tBr(qt.mr),new _.FiY],Mo]},{provide:An,useFactory:dc,deps:[ns,qt.EM,Mo]},{provide:Wt,useExisting:U&&U.preloadingStrategy?U.preloadingStrategy:No},{provide:_.PXZ,multi:!0,useFactory:en},[ka,{provide:_.ip1,multi:!0,useFactory:Ou,deps:[ka]},{provide:yd,useFactory:jl,deps:[ka]},{provide:_.tb,multi:!0,useExisting:yd}]]}}static forChild(I){return{ngModule:k,providers:[Zc(I)]}}}return k.\u0275fac=function(I){return new(I||k)(_.LFG(En,8),_.LFG(ns,8))},k.\u0275mod=_.oAB({type:k}),k.\u0275inj=_.cJS({}),k})();function dc(k,M,I){return I.scrollOffset&&M.setOffset(I.scrollOffset),new An(k,M,I)}function Gc(k,M,I={}){return I.useHash?new qt.Do(k,M):new qt.b0(k,M)}function qs(k){return"guarded"}function Zc(k){return[{provide:_.deG,multi:!0,useValue:k},{provide:Vl,multi:!0,useValue:k}]}let ka=(()=>{class k{constructor(I){this.injector=I,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new qe.x}appInitializer(){return this.injector.get(qt.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let U=null;const q=new Promise(_e=>U=_e),he=this.injector.get(ns),ye=this.injector.get(Mo);return"disabled"===ye.initialNavigation?(he.setUpLocationChangeListener(),U(!0)):"enabled"===ye.initialNavigation||"enabledBlocking"===ye.initialNavigation?(he.hooks.afterPreactivation=()=>this.initNavigation?(0,ge.of)(null):(this.initNavigation=!0,U(!0),this.resultOfPreactivationDone),he.initialNavigation()):U(!0),q})}bootstrapListener(I){const U=this.injector.get(Mo),q=this.injector.get(Ul),he=this.injector.get(An),ye=this.injector.get(ns),_e=this.injector.get(_.z2F);I===_e.components[0]&&(("enabledNonBlocking"===U.initialNavigation||void 0===U.initialNavigation)&&ye.initialNavigation(),q.setUpPreloading(),he.init(),ye.resetRootComponentType(_e.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return k.\u0275fac=function(I){return new(I||k)(_.LFG(_.zs3))},k.\u0275prov=_.Yz7({token:k,factory:k.\u0275fac}),k})();function Ou(k){return k.appInitializer.bind(k)}function jl(k){return k.bootstrapListener.bind(k)}const yd=new _.OlP("Router Initializer")},3942:(rn,Ye,V)=>{V.d(Ye,{Z:()=>mt});var _=V(2090),c=V(4859),J=V(9681),Ee=V(1877);class Ie{constructor(qe,ze){this._delegate=qe,this.firebase=ze,(0,J._addComponent)(qe,new c.wA("app-compat",()=>this,"PUBLIC")),this.container=qe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(qe){this._delegate.automaticDataCollectionEnabled=qe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(qe=>{this._delegate.checkDestroyed(),qe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,J.deleteApp)(this._delegate)))}_getService(qe,ze=J._DEFAULT_ENTRY_NAME){var Ue;this._delegate.checkDestroyed();const vt=this._delegate.container.getProvider(qe);return!vt.isInitialized()&&"EXPLICIT"===(null===(Ue=vt.getComponent())||void 0===Ue?void 0:Ue.instantiationMode)&&vt.initialize(),vt.getImmediate({identifier:ze})}_removeServiceInstance(qe,ze=J._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(qe).clearInstance(ze)}_addComponent(qe){(0,J._addComponent)(this._delegate,qe)}_addOrOverwriteComponent(qe){(0,J._addOrOverwriteComponent)(this._delegate,qe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ge=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),fe=function ke(){const ot=function pe(ot){const qe={},ze={__esModule:!0,initializeApp:function Pe(At,it={}){const Ne=J.initializeApp(At,it);if((0,_.r3)(qe,Ne.name))return qe[Ne.name];const We=new ot(Ne,ze);return qe[Ne.name]=We,We},app:vt,registerVersion:J.registerVersion,setLogLevel:J.setLogLevel,onLog:J.onLog,apps:null,SDK_VERSION:J.SDK_VERSION,INTERNAL:{registerComponent:function nt(At){const it=At.name,Ne=it.replace("-compat","");if(J._registerComponent(At)&&"PUBLIC"===At.type){const We=(Qe=vt())=>{if("function"!=typeof Qe[Ne])throw Ge.create("invalid-app-argument",{appName:it});return Qe[Ne]()};void 0!==At.serviceProps&&(0,_.ZB)(We,At.serviceProps),ze[Ne]=We,ot.prototype[Ne]=function(...Qe){return this._getService.bind(this,it).apply(this,At.multipleInstances?Qe:[])}}return"PUBLIC"===At.type?ze[Ne]:null},removeApp:function Ue(At){delete qe[At]},useAsService:function It(At,it){return"serverAuth"===it?null:it},modularAPIs:J}};function vt(At){if(!(0,_.r3)(qe,At=At||J._DEFAULT_ENTRY_NAME))throw Ge.create("no-app",{appName:At});return qe[At]}return ze.default=ze,Object.defineProperty(ze,"apps",{get:function je(){return Object.keys(qe).map(At=>qe[At])}}),vt.App=ot,ze}(Ie);return ot.INTERNAL=Object.assign(Object.assign({},ot.INTERNAL),{createFirebaseNamespace:ke,extendNamespace:function qe(ze){(0,_.ZB)(ot,ze)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),ot}(),ge=new Ee.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){ge.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ot=self.firebase.SDK_VERSION;ot&&ot.indexOf("LITE")>=0&&ge.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const mt=fe;!function rt(ot){(0,J.registerVersion)("@firebase/app-compat","0.1.37",ot)}()},9681:(rn,Ye,V)=>{V.r(Ye),V.d(Ye,{FirebaseError:()=>Ee.ZR,SDK_VERSION:()=>Ei,_DEFAULT_ENTRY_NAME:()=>$t,_addComponent:()=>pt,_addOrOverwriteComponent:()=>Ot,_apps:()=>Nn,_clearComponents:()=>Mn,_components:()=>bn,_getProvider:()=>ht,_registerComponent:()=>Le,_removeServiceInstance:()=>Kt,deleteApp:()=>Jt,getApp:()=>Nt,getApps:()=>hi,initializeApp:()=>$n,onLog:()=>kn,registerVersion:()=>Ht,setLogLevel:()=>Ti});var _=V(5861),c=V(4859),J=V(1877),Ee=V(2090),Ie=V(8766);class Ze{constructor(bt){this.container=bt}getPlatformInfoString(){return this.container.getProviders().map(nn=>{if(function Ge(Ut){const bt=Ut.getComponent();return"VERSION"===(null==bt?void 0:bt.type)}(nn)){const fn=nn.getImmediate();return`${fn.library}/${fn.version}`}return null}).filter(nn=>nn).join(" ")}}const pe="@firebase/app",fe=new J.Yd("@firebase/app"),$t="[DEFAULT]",qt={[pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Nn=new Map,bn=new Map;function pt(Ut,bt){try{Ut.container.addComponent(bt)}catch(nn){fe.debug(`Component ${bt.name} failed to register with FirebaseApp ${Ut.name}`,nn)}}function Ot(Ut,bt){Ut.container.addOrOverwriteComponent(bt)}function Le(Ut){const bt=Ut.name;if(bn.has(bt))return fe.debug(`There were multiple attempts to register component ${bt}.`),!1;bn.set(bt,Ut);for(const nn of Nn.values())pt(nn,Ut);return!0}function ht(Ut,bt){const nn=Ut.container.getProvider("heartbeat").getImmediate({optional:!0});return nn&&nn.triggerHeartbeat(),Ut.container.getProvider(bt)}function Kt(Ut,bt,nn=$t){ht(Ut,bt).clearInstance(nn)}function Mn(){bn.clear()}const ii=new Ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ki{constructor(bt,nn,fn){this._isDeleted=!1,this._options=Object.assign({},bt),this._config=Object.assign({},nn),this._name=nn.name,this._automaticDataCollectionEnabled=nn.automaticDataCollectionEnabled,this._container=fn,this.container.addComponent(new c.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(bt){this.checkDestroyed(),this._automaticDataCollectionEnabled=bt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(bt){this._isDeleted=bt}checkDestroyed(){if(this.isDeleted)throw ii.create("app-deleted",{appName:this._name})}}const Ei="9.12.1";function $n(Ut,bt={}){let nn=Ut;"object"!=typeof bt&&(bt={name:bt});const fn=Object.assign({name:$t,automaticDataCollectionEnabled:!1},bt),dn=fn.name;if("string"!=typeof dn||!dn)throw ii.create("bad-app-name",{appName:String(dn)});if(nn||(nn=(0,Ee.aH)()),!nn)throw ii.create("no-options");const on=Nn.get(dn);if(on){if((0,Ee.vZ)(nn,on.options)&&(0,Ee.vZ)(fn,on.config))return on;throw ii.create("duplicate-app",{appName:dn})}const xe=new c.H0(dn);for(const Ve of bn.values())xe.addComponent(Ve);const we=new Ki(nn,fn,xe);return Nn.set(dn,we),we}function Nt(Ut=$t){const bt=Nn.get(Ut);if(!bt&&Ut===$t)return $n();if(!bt)throw ii.create("no-app",{appName:Ut});return bt}function hi(){return Array.from(Nn.values())}function Jt(Ut){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,_.Z)(function*(Ut){const bt=Ut.name;Nn.has(bt)&&(Nn.delete(bt),yield Promise.all(Ut.container.getProviders().map(nn=>nn.delete())),Ut.isDeleted=!0)})).apply(this,arguments)}function Ht(Ut,bt,nn){var fn;let dn=null!==(fn=qt[Ut])&&void 0!==fn?fn:Ut;nn&&(dn+=`-${nn}`);const on=dn.match(/\s|\//),xe=bt.match(/\s|\//);if(on||xe){const we=[`Unable to register library "${dn}" with version "${bt}":`];return on&&we.push(`library name "${dn}" contains illegal characters (whitespace or "/")`),on&&xe&&we.push("and"),xe&&we.push(`version name "${bt}" contains illegal characters (whitespace or "/")`),void fe.warn(we.join(" "))}Le(new c.wA(`${dn}-version`,()=>({library:dn,version:bt}),"VERSION"))}function kn(Ut,bt){if(null!==Ut&&"function"!=typeof Ut)throw ii.create("invalid-log-argument");(0,J.Am)(Ut,bt)}function Ti(Ut){(0,J.Ub)(Ut)}const Ai="firebase-heartbeat-store";let lr=null;function tr(){return lr||(lr=(0,Ie.X3)("firebase-heartbeat-database",1,{upgrade:(Ut,bt)=>{0===bt&&Ut.createObjectStore(Ai)}}).catch(Ut=>{throw ii.create("idb-open",{originalErrorMessage:Ut.message})})),lr}function Tn(){return(Tn=(0,_.Z)(function*(Ut){var bt;try{return(yield tr()).transaction(Ai).objectStore(Ai).get(Fi(Ut))}catch(nn){if(nn instanceof Ee.ZR)fe.warn(nn.message);else{const fn=ii.create("idb-get",{originalErrorMessage:null===(bt=nn)||void 0===bt?void 0:bt.message});fe.warn(fn.message)}}})).apply(this,arguments)}function gn(Ut,bt){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,_.Z)(function*(Ut,bt){var nn;try{const dn=(yield tr()).transaction(Ai,"readwrite");return yield dn.objectStore(Ai).put(bt,Fi(Ut)),dn.done}catch(fn){if(fn instanceof Ee.ZR)fe.warn(fn.message);else{const dn=ii.create("idb-set",{originalErrorMessage:null===(nn=fn)||void 0===nn?void 0:nn.message});fe.warn(dn.message)}}})).apply(this,arguments)}function Fi(Ut){return`${Ut.name}!${Ut.options.appId}`}class cr{constructor(bt){this.container=bt,this._heartbeatsCache=null;const nn=this.container.getProvider("app").getImmediate();this._storage=new Qn(nn),this._heartbeatsCachePromise=this._storage.read().then(fn=>(this._heartbeatsCache=fn,fn))}triggerHeartbeat(){var bt=this;return(0,_.Z)(function*(){const fn=bt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),dn=ui();if(null===bt._heartbeatsCache&&(bt._heartbeatsCache=yield bt._heartbeatsCachePromise),bt._heartbeatsCache.lastSentHeartbeatDate!==dn&&!bt._heartbeatsCache.heartbeats.some(on=>on.date===dn))return bt._heartbeatsCache.heartbeats.push({date:dn,agent:fn}),bt._heartbeatsCache.heartbeats=bt._heartbeatsCache.heartbeats.filter(on=>{const xe=new Date(on.date).valueOf();return Date.now()-xe<=2592e6}),bt._storage.overwrite(bt._heartbeatsCache)})()}getHeartbeatsHeader(){var bt=this;return(0,_.Z)(function*(){if(null===bt._heartbeatsCache&&(yield bt._heartbeatsCachePromise),null===bt._heartbeatsCache||0===bt._heartbeatsCache.heartbeats.length)return"";const nn=ui(),{heartbeatsToSend:fn,unsentEntries:dn}=function yn(Ut,bt=1024){const nn=[];let fn=Ut.slice();for(const dn of Ut){const on=nn.find(xe=>xe.agent===dn.agent);if(on){if(on.dates.push(dn.date),Bn(nn)>bt){on.dates.pop();break}}else if(nn.push({agent:dn.agent,dates:[dn.date]}),Bn(nn)>bt){nn.pop();break}fn=fn.slice(1)}return{heartbeatsToSend:nn,unsentEntries:fn}}(bt._heartbeatsCache.heartbeats),on=(0,Ee.L)(JSON.stringify({version:2,heartbeats:fn}));return bt._heartbeatsCache.lastSentHeartbeatDate=nn,dn.length>0?(bt._heartbeatsCache.heartbeats=dn,yield bt._storage.overwrite(bt._heartbeatsCache)):(bt._heartbeatsCache.heartbeats=[],bt._storage.overwrite(bt._heartbeatsCache)),on})()}}function ui(){return(new Date).toISOString().substring(0,10)}class Qn{constructor(bt){this.app=bt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,Ee.hl)()&&(0,Ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var bt=this;return(0,_.Z)(function*(){return(yield bt._canUseIndexedDBPromise)&&(yield function Pn(Ut){return Tn.apply(this,arguments)}(bt.app))||{heartbeats:[]}})()}overwrite(bt){var nn=this;return(0,_.Z)(function*(){var fn;if(yield nn._canUseIndexedDBPromise){const on=yield nn.read();return gn(nn.app,{lastSentHeartbeatDate:null!==(fn=bt.lastSentHeartbeatDate)&&void 0!==fn?fn:on.lastSentHeartbeatDate,heartbeats:bt.heartbeats})}})()}add(bt){var nn=this;return(0,_.Z)(function*(){var fn;if(yield nn._canUseIndexedDBPromise){const on=yield nn.read();return gn(nn.app,{lastSentHeartbeatDate:null!==(fn=bt.lastSentHeartbeatDate)&&void 0!==fn?fn:on.lastSentHeartbeatDate,heartbeats:[...on.heartbeats,...bt.heartbeats]})}})()}}function Bn(Ut){return(0,Ee.L)(JSON.stringify({version:2,heartbeats:Ut})).length}!function Yi(Ut){Le(new c.wA("platform-logger",bt=>new Ze(bt),"PRIVATE")),Le(new c.wA("heartbeat",bt=>new cr(bt),"PRIVATE")),Ht(pe,"0.8.2",Ut),Ht(pe,"0.8.2","esm2017"),Ht("fire-js","")}("")},4859:(rn,Ye,V)=>{V.d(Ye,{wA:()=>J,H0:()=>pe});var _=V(5861),c=V(2090);class J{constructor(fe,ge,Fe){this.name=fe,this.instanceFactory=ge,this.type=Fe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(fe){return this.instantiationMode=fe,this}setMultipleInstances(fe){return this.multipleInstances=fe,this}setServiceProps(fe){return this.serviceProps=fe,this}setInstanceCreatedCallback(fe){return this.onInstanceCreated=fe,this}}const Ee="[DEFAULT]";class Ie{constructor(fe,ge){this.name=fe,this.container=ge,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(fe){const ge=this.normalizeInstanceIdentifier(fe);if(!this.instancesDeferred.has(ge)){const Fe=new c.BH;if(this.instancesDeferred.set(ge,Fe),this.isInitialized(ge)||this.shouldAutoInitialize())try{const _t=this.getOrInitializeService({instanceIdentifier:ge});_t&&Fe.resolve(_t)}catch(_t){}}return this.instancesDeferred.get(ge).promise}getImmediate(fe){var ge;const Fe=this.normalizeInstanceIdentifier(null==fe?void 0:fe.identifier),_t=null!==(ge=null==fe?void 0:fe.optional)&&void 0!==ge&&ge;if(!this.isInitialized(Fe)&&!this.shouldAutoInitialize()){if(_t)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Fe})}catch(rt){if(_t)return null;throw rt}}getComponent(){return this.component}setComponent(fe){if(fe.name!==this.name)throw Error(`Mismatching Component ${fe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=fe,this.shouldAutoInitialize()){if(function Ge(ke){return"EAGER"===ke.instantiationMode}(fe))try{this.getOrInitializeService({instanceIdentifier:Ee})}catch(ge){}for(const[ge,Fe]of this.instancesDeferred.entries()){const _t=this.normalizeInstanceIdentifier(ge);try{const rt=this.getOrInitializeService({instanceIdentifier:_t});Fe.resolve(rt)}catch(rt){}}}}clearInstance(fe=Ee){this.instancesDeferred.delete(fe),this.instancesOptions.delete(fe),this.instances.delete(fe)}delete(){var fe=this;return(0,_.Z)(function*(){const ge=Array.from(fe.instances.values());yield Promise.all([...ge.filter(Fe=>"INTERNAL"in Fe).map(Fe=>Fe.INTERNAL.delete()),...ge.filter(Fe=>"_delete"in Fe).map(Fe=>Fe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(fe=Ee){return this.instances.has(fe)}getOptions(fe=Ee){return this.instancesOptions.get(fe)||{}}initialize(fe={}){const{options:ge={}}=fe,Fe=this.normalizeInstanceIdentifier(fe.instanceIdentifier);if(this.isInitialized(Fe))throw Error(`${this.name}(${Fe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const _t=this.getOrInitializeService({instanceIdentifier:Fe,options:ge});for(const[rt,mt]of this.instancesDeferred.entries())Fe===this.normalizeInstanceIdentifier(rt)&&mt.resolve(_t);return _t}onInit(fe,ge){var Fe;const _t=this.normalizeInstanceIdentifier(ge),rt=null!==(Fe=this.onInitCallbacks.get(_t))&&void 0!==Fe?Fe:new Set;rt.add(fe),this.onInitCallbacks.set(_t,rt);const mt=this.instances.get(_t);return mt&&fe(mt,_t),()=>{rt.delete(fe)}}invokeOnInitCallbacks(fe,ge){const Fe=this.onInitCallbacks.get(ge);if(Fe)for(const _t of Fe)try{_t(fe,ge)}catch(rt){}}getOrInitializeService({instanceIdentifier:fe,options:ge={}}){let Fe=this.instances.get(fe);if(!Fe&&this.component&&(Fe=this.component.instanceFactory(this.container,{instanceIdentifier:(ke=fe,ke===Ee?void 0:ke),options:ge}),this.instances.set(fe,Fe),this.instancesOptions.set(fe,ge),this.invokeOnInitCallbacks(Fe,fe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,fe,Fe)}catch(_t){}var ke;return Fe||null}normalizeInstanceIdentifier(fe=Ee){return this.component?this.component.multipleInstances?fe:Ee:fe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pe{constructor(fe){this.name=fe,this.providers=new Map}addComponent(fe){const ge=this.getProvider(fe.name);if(ge.isComponentSet())throw new Error(`Component ${fe.name} has already been registered with ${this.name}`);ge.setComponent(fe)}addOrOverwriteComponent(fe){this.getProvider(fe.name).isComponentSet()&&this.providers.delete(fe.name),this.addComponent(fe)}getProvider(fe){if(this.providers.has(fe))return this.providers.get(fe);const ge=new Ie(fe,this);return this.providers.set(fe,ge),ge}getProviders(){return Array.from(this.providers.values())}}},1877:(rn,Ye,V)=>{V.d(Ye,{in:()=>c,Yd:()=>Ge,Ub:()=>pe,Am:()=>ke});const _=[];var c=(()=>{return(fe=c||(c={}))[fe.DEBUG=0]="DEBUG",fe[fe.VERBOSE=1]="VERBOSE",fe[fe.INFO=2]="INFO",fe[fe.WARN=3]="WARN",fe[fe.ERROR=4]="ERROR",fe[fe.SILENT=5]="SILENT",c;var fe})();const J={debug:c.DEBUG,verbose:c.VERBOSE,info:c.INFO,warn:c.WARN,error:c.ERROR,silent:c.SILENT},Ee=c.INFO,Ie={[c.DEBUG]:"log",[c.VERBOSE]:"log",[c.INFO]:"info",[c.WARN]:"warn",[c.ERROR]:"error"},Ze=(fe,ge,...Fe)=>{if(ge<fe.logLevel)return;const _t=(new Date).toISOString(),rt=Ie[ge];if(!rt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ge})`);console[rt](`[${_t}]  ${fe.name}:`,...Fe)};class Ge{constructor(ge){this.name=ge,this._logLevel=Ee,this._logHandler=Ze,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(ge){if(!(ge in c))throw new TypeError(`Invalid value "${ge}" assigned to \`logLevel\``);this._logLevel=ge}setLogLevel(ge){this._logLevel="string"==typeof ge?J[ge]:ge}get logHandler(){return this._logHandler}set logHandler(ge){if("function"!=typeof ge)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ge}get userLogHandler(){return this._userLogHandler}set userLogHandler(ge){this._userLogHandler=ge}debug(...ge){this._userLogHandler&&this._userLogHandler(this,c.DEBUG,...ge),this._logHandler(this,c.DEBUG,...ge)}log(...ge){this._userLogHandler&&this._userLogHandler(this,c.VERBOSE,...ge),this._logHandler(this,c.VERBOSE,...ge)}info(...ge){this._userLogHandler&&this._userLogHandler(this,c.INFO,...ge),this._logHandler(this,c.INFO,...ge)}warn(...ge){this._userLogHandler&&this._userLogHandler(this,c.WARN,...ge),this._logHandler(this,c.WARN,...ge)}error(...ge){this._userLogHandler&&this._userLogHandler(this,c.ERROR,...ge),this._logHandler(this,c.ERROR,...ge)}}function pe(fe){_.forEach(ge=>{ge.setLogLevel(fe)})}function ke(fe,ge){for(const Fe of _){let _t=null;ge&&ge.level&&(_t=J[ge.level]),Fe.userLogHandler=null===fe?null:(rt,mt,...ot)=>{const qe=ot.map(ze=>{if(null==ze)return null;if("string"==typeof ze)return ze;if("number"==typeof ze||"boolean"==typeof ze)return ze.toString();if(ze instanceof Error)return ze.message;try{return JSON.stringify(ze)}catch(Ue){return null}}).filter(ze=>ze).join(" ");mt>=(null!=_t?_t:rt.logLevel)&&fe({level:c[mt].toLowerCase(),message:qe,args:ot,type:rt.name})}}}},8766:(rn,Ye,V)=>{V.d(Ye,{Lj:()=>Pe,X3:()=>vt});var _=V(5861);let J,Ee;const Ge=new WeakMap,pe=new WeakMap,ke=new WeakMap,fe=new WeakMap,ge=new WeakMap;let rt={get(it,Ne,We){if(it instanceof IDBTransaction){if("done"===Ne)return pe.get(it);if("objectStoreNames"===Ne)return it.objectStoreNames||ke.get(it);if("store"===Ne)return We.objectStoreNames[1]?void 0:We.objectStore(We.objectStoreNames[0])}return ze(it[Ne])},set:(it,Ne,We)=>(it[Ne]=We,!0),has:(it,Ne)=>it instanceof IDBTransaction&&("done"===Ne||"store"===Ne)||Ne in it};function qe(it){return"function"==typeof it?function ot(it){return it!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ze(){return Ee||(Ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(it)?function(...Ne){return it.apply(Ue(this),Ne),ze(Ge.get(this))}:function(...Ne){return ze(it.apply(Ue(this),Ne))}:function(Ne,...We){const Qe=it.call(Ue(this),Ne,...We);return ke.set(Qe,Ne.sort?Ne.sort():[Ne]),ze(Qe)}}(it):(it instanceof IDBTransaction&&function _t(it){if(pe.has(it))return;const Ne=new Promise((We,Qe)=>{const dt=()=>{it.removeEventListener("complete",wt),it.removeEventListener("error",at),it.removeEventListener("abort",at)},wt=()=>{We(),dt()},at=()=>{Qe(it.error||new DOMException("AbortError","AbortError")),dt()};it.addEventListener("complete",wt),it.addEventListener("error",at),it.addEventListener("abort",at)});pe.set(it,Ne)}(it),((it,Ne)=>Ne.some(We=>it instanceof We))(it,function Ie(){return J||(J=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(it,rt):it)}function ze(it){if(it instanceof IDBRequest)return function Fe(it){const Ne=new Promise((We,Qe)=>{const dt=()=>{it.removeEventListener("success",wt),it.removeEventListener("error",at)},wt=()=>{We(ze(it.result)),dt()},at=()=>{Qe(it.error),dt()};it.addEventListener("success",wt),it.addEventListener("error",at)});return Ne.then(We=>{We instanceof IDBCursor&&Ge.set(We,it)}).catch(()=>{}),ge.set(Ne,it),Ne}(it);if(fe.has(it))return fe.get(it);const Ne=qe(it);return Ne!==it&&(fe.set(it,Ne),ge.set(Ne,it)),Ne}const Ue=it=>ge.get(it);function vt(it,Ne,{blocked:We,upgrade:Qe,blocking:dt,terminated:wt}={}){const at=indexedDB.open(it,Ne),In=ze(at);return Qe&&at.addEventListener("upgradeneeded",tn=>{Qe(ze(at.result),tn.oldVersion,tn.newVersion,ze(at.transaction))}),We&&at.addEventListener("blocked",()=>We()),In.then(tn=>{wt&&tn.addEventListener("close",()=>wt()),dt&&tn.addEventListener("versionchange",()=>dt())}).catch(()=>{}),In}function Pe(it,{blocked:Ne}={}){const We=indexedDB.deleteDatabase(it);return Ne&&We.addEventListener("blocked",()=>Ne()),ze(We).then(()=>{})}const je=["get","getKey","getAll","getAllKeys","count"],nt=["put","add","delete","clear"],It=new Map;function At(it,Ne){if(!(it instanceof IDBDatabase)||Ne in it||"string"!=typeof Ne)return;if(It.get(Ne))return It.get(Ne);const We=Ne.replace(/FromIndex$/,""),Qe=Ne!==We,dt=nt.includes(We);if(!(We in(Qe?IDBIndex:IDBObjectStore).prototype)||!dt&&!je.includes(We))return;const wt=function(){var at=(0,_.Z)(function*(In,...tn){const wn=this.transaction(In,dt?"readwrite":"readonly");let $t=wn.store;return Qe&&($t=$t.index(tn.shift())),(yield Promise.all([$t[We](...tn),dt&&wn.done]))[0]});return function(tn){return at.apply(this,arguments)}}();return It.set(Ne,wt),wt}!function mt(it){rt=it(rt)}(it=>PA(kA({},it),{get:(Ne,We,Qe)=>At(Ne,We)||it.get(Ne,We,Qe),has:(Ne,We)=>!!At(Ne,We)||it.has(Ne,We)}))},2290:(rn,Ye,V)=>{V.d(Ye,{Rh:()=>wn,_W:()=>at});var _=V(5e3),c=V(1777),J=V(7579),Ee=V(9808),Ie=V(2313);const Ze=["toast-component",""];function Ge(pt,Ot){if(1&pt){const Le=_.EpF();_.TgZ(0,"button",5),_.NdJ("click",function(){return _.CHM(Le),_.oxw().remove()}),_.TgZ(1,"span",6),_._uU(2,"\xd7"),_.qZA(),_.qZA()}}function pe(pt,Ot){if(1&pt&&(_.ynx(0),_._uU(1),_.BQk()),2&pt){const Le=_.oxw(2);_.xp6(1),_.hij("[",Le.duplicatesCount+1,"]")}}function ke(pt,Ot){if(1&pt&&(_.TgZ(0,"div"),_._uU(1),_.YNc(2,pe,2,1,"ng-container",4),_.qZA()),2&pt){const Le=_.oxw();_.Tol(Le.options.titleClass),_.uIk("aria-label",Le.title),_.xp6(1),_.hij(" ",Le.title," "),_.xp6(1),_.Q6J("ngIf",Le.duplicatesCount)}}function fe(pt,Ot){if(1&pt&&_._UZ(0,"div",7),2&pt){const Le=_.oxw();_.Tol(Le.options.messageClass),_.Q6J("innerHTML",Le.message,_.oJD)}}function ge(pt,Ot){if(1&pt&&(_.TgZ(0,"div",8),_._uU(1),_.qZA()),2&pt){const Le=_.oxw();_.Tol(Le.options.messageClass),_.uIk("aria-label",Le.message),_.xp6(1),_.hij(" ",Le.message," ")}}function Fe(pt,Ot){if(1&pt&&(_.TgZ(0,"div"),_._UZ(1,"div",9),_.qZA()),2&pt){const Le=_.oxw();_.xp6(1),_.Udp("width",Le.width+"%")}}function _t(pt,Ot){if(1&pt){const Le=_.EpF();_.TgZ(0,"button",5),_.NdJ("click",function(){return _.CHM(Le),_.oxw().remove()}),_.TgZ(1,"span",6),_._uU(2,"\xd7"),_.qZA(),_.qZA()}}function rt(pt,Ot){if(1&pt&&(_.ynx(0),_._uU(1),_.BQk()),2&pt){const Le=_.oxw(2);_.xp6(1),_.hij("[",Le.duplicatesCount+1,"]")}}function mt(pt,Ot){if(1&pt&&(_.TgZ(0,"div"),_._uU(1),_.YNc(2,rt,2,1,"ng-container",4),_.qZA()),2&pt){const Le=_.oxw();_.Tol(Le.options.titleClass),_.uIk("aria-label",Le.title),_.xp6(1),_.hij(" ",Le.title," "),_.xp6(1),_.Q6J("ngIf",Le.duplicatesCount)}}function ot(pt,Ot){if(1&pt&&_._UZ(0,"div",7),2&pt){const Le=_.oxw();_.Tol(Le.options.messageClass),_.Q6J("innerHTML",Le.message,_.oJD)}}function qe(pt,Ot){if(1&pt&&(_.TgZ(0,"div",8),_._uU(1),_.qZA()),2&pt){const Le=_.oxw();_.Tol(Le.options.messageClass),_.uIk("aria-label",Le.message),_.xp6(1),_.hij(" ",Le.message," ")}}function ze(pt,Ot){if(1&pt&&(_.TgZ(0,"div"),_._UZ(1,"div",9),_.qZA()),2&pt){const Le=_.oxw();_.xp6(1),_.Udp("width",Le.width+"%")}}class Pe{constructor(Ot,Le){this.component=Ot,this.injector=Le}attach(Ot,Le){return this._attachedHost=Ot,Ot.attach(this,Le)}detach(){const Ot=this._attachedHost;if(Ot)return this._attachedHost=void 0,Ot.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(Ot){this._attachedHost=Ot}}class nt{constructor(Ot,Le,ht,Kt,Mn,Kn){this.toastId=Ot,this.config=Le,this.message=ht,this.title=Kt,this.toastType=Mn,this.toastRef=Kn,this._onTap=new J.x,this._onAction=new J.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(Ot){this._onAction.next(Ot)}onAction(){return this._onAction.asObservable()}}const It={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},At=new _.OlP("ToastConfig");class it{constructor(Ot){this._overlayRef=Ot,this.duplicatesCount=0,this._afterClosed=new J.x,this._activate=new J.x,this._manualClose=new J.x,this._resetTimeout=new J.x,this._countDuplicate=new J.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(Ot,Le){Ot&&this._resetTimeout.next(),Le&&this._countDuplicate.next(++this.duplicatesCount)}}class Ne{constructor(Ot,Le){this._toastPackage=Ot,this._parentInjector=Le}get(Ot,Le,ht){return Ot===nt?this._toastPackage:this._parentInjector.get(Ot,Le,ht)}}class We extends class je{attach(Ot,Le){return this._attachedPortal=Ot,this.attachComponentPortal(Ot,Le)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(Ot){this._disposeFn=Ot}}{constructor(Ot,Le,ht){super(),this._hostDomElement=Ot,this._componentFactoryResolver=Le,this._appRef=ht}attachComponentPortal(Ot,Le){const ht=this._componentFactoryResolver.resolveComponentFactory(Ot.component);let Kt;return Kt=ht.create(Ot.injector),this._appRef.attachView(Kt.hostView),this.setDisposeFn(()=>{this._appRef.detachView(Kt.hostView),Kt.destroy()}),Le?this._hostDomElement.insertBefore(this._getComponentRootNode(Kt),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(Kt)),Kt}_getComponentRootNode(Ot){return Ot.hostView.rootNodes[0]}}class Qe{constructor(Ot){this._portalHost=Ot}attach(Ot,Le=!0){return this._portalHost.attach(Ot,Le)}detach(){return this._portalHost.detach()}}let dt=(()=>{class pt{constructor(Le){this._document=Le}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const Le=this._document.createElement("div");Le.classList.add("overlay-container"),Le.setAttribute("aria-live","polite"),this._document.body.appendChild(Le),this._containerElement=Le}}return pt.\u0275fac=function(Le){return new(Le||pt)(_.LFG(Ee.K0))},pt.\u0275prov=_.Yz7({token:pt,factory:pt.\u0275fac,providedIn:"root"}),pt})(),wt=(()=>{class pt{constructor(Le,ht,Kt,Mn){this._overlayContainer=Le,this._componentFactoryResolver=ht,this._appRef=Kt,this._document=Mn,this._paneElements=new Map}create(Le,ht){return this._createOverlayRef(this.getPaneElement(Le,ht))}getPaneElement(Le="",ht){return this._paneElements.get(ht)||this._paneElements.set(ht,{}),this._paneElements.get(ht)[Le]||(this._paneElements.get(ht)[Le]=this._createPaneElement(Le,ht)),this._paneElements.get(ht)[Le]}_createPaneElement(Le,ht){const Kt=this._document.createElement("div");return Kt.id="toast-container",Kt.classList.add(Le),Kt.classList.add("toast-container"),ht?ht.getContainerElement().appendChild(Kt):this._overlayContainer.getContainerElement().appendChild(Kt),Kt}_createPortalHost(Le){return new We(Le,this._componentFactoryResolver,this._appRef)}_createOverlayRef(Le){return new Qe(this._createPortalHost(Le))}}return pt.\u0275fac=function(Le){return new(Le||pt)(_.LFG(dt),_.LFG(_._Vd),_.LFG(_.z2F),_.LFG(Ee.K0))},pt.\u0275prov=_.Yz7({token:pt,factory:pt.\u0275fac,providedIn:"root"}),pt})(),at=(()=>{class pt{constructor(Le,ht,Kt,Mn,Kn){this.overlay=ht,this._injector=Kt,this.sanitizer=Mn,this.ngZone=Kn,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},Le.default),Le.config),Le.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},Le.default.iconClasses),Le.config.iconClasses))}show(Le,ht,Kt={},Mn=""){return this._preBuildNotification(Mn,Le,ht,this.applyConfig(Kt))}success(Le,ht,Kt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",Le,ht,this.applyConfig(Kt))}error(Le,ht,Kt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",Le,ht,this.applyConfig(Kt))}info(Le,ht,Kt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",Le,ht,this.applyConfig(Kt))}warning(Le,ht,Kt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",Le,ht,this.applyConfig(Kt))}clear(Le){for(const ht of this.toasts)if(void 0!==Le){if(ht.toastId===Le)return void ht.toastRef.manualClose()}else ht.toastRef.manualClose()}remove(Le){const ht=this._findToast(Le);if(!ht||(ht.activeToast.toastRef.close(),this.toasts.splice(ht.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const Kt=this.toasts[this.currentlyActive].toastRef;Kt.isInactive()||(this.currentlyActive=this.currentlyActive+1,Kt.activate())}return!0}findDuplicate(Le="",ht="",Kt,Mn){const{includeTitleDuplicates:Kn}=this.toastrConfig;for(const ii of this.toasts){const Ki=Kn&&ii.title===Le;if((!Kn||Ki)&&ii.message===ht)return ii.toastRef.onDuplicate(Kt,Mn),ii}return null}applyConfig(Le={}){return Object.assign(Object.assign({},this.toastrConfig),Le)}_findToast(Le){for(let ht=0;ht<this.toasts.length;ht++)if(this.toasts[ht].toastId===Le)return{index:ht,activeToast:this.toasts[ht]};return null}_preBuildNotification(Le,ht,Kt,Mn){return Mn.onActivateTick?this.ngZone.run(()=>this._buildNotification(Le,ht,Kt,Mn)):this._buildNotification(Le,ht,Kt,Mn)}_buildNotification(Le,ht,Kt,Mn){if(!Mn.toastComponent)throw new Error("toastComponent required");const Kn=this.findDuplicate(Kt,ht,this.toastrConfig.resetTimeoutOnDuplicate&&Mn.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&Kt||ht)&&this.toastrConfig.preventDuplicates&&null!==Kn)return Kn;this.previousToastMessage=ht;let ii=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(ii=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const Ki=this.overlay.create(Mn.positionClass,this.overlayContainer);this.index=this.index+1;let Ei=ht;ht&&Mn.enableHtml&&(Ei=this.sanitizer.sanitize(_.q3G.HTML,ht));const $n=new it(Ki),Nt=new nt(this.index,Mn,Ei,Kt,Le,$n),hi=new Ne(Nt,this._injector),Jt=new Pe(Mn.toastComponent,hi),Yn=Ki.attach(Jt,this.toastrConfig.newestOnTop);$n.componentInstance=Yn.instance;const Ht={toastId:this.index,title:Kt||"",message:ht||"",toastRef:$n,onShown:$n.afterActivate(),onHidden:$n.afterClosed(),onTap:Nt.onTap(),onAction:Nt.onAction(),portal:Yn};return ii||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Ht.toastRef.activate()})),this.toasts.push(Ht),Ht}}return pt.\u0275fac=function(Le){return new(Le||pt)(_.LFG(At),_.LFG(wt),_.LFG(_.zs3),_.LFG(Ie.H7),_.LFG(_.R0b))},pt.\u0275prov=_.Yz7({token:pt,factory:pt.\u0275fac,providedIn:"root"}),pt})(),In=(()=>{class pt{constructor(Le,ht,Kt){this.toastrService=Le,this.toastPackage=ht,this.ngZone=Kt,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=ht.message,this.title=ht.title,this.options=ht.config,this.originalTimeout=ht.config.timeOut,this.toastClasses=`${ht.toastType} ${ht.config.toastClass}`,this.sub=ht.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=ht.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=ht.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=ht.toastRef.countDuplicate().subscribe(Mn=>{this.duplicatesCount=Mn})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const Le=(new Date).getTime();this.width=(this.hideTime-Le)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(Le,ht){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(Le),ht)):this.timeout=setTimeout(()=>Le(),ht)}outsideInterval(Le,ht){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(Le),ht)):this.intervalId=setInterval(()=>Le(),ht)}runInsideAngular(Le){this.ngZone?this.ngZone.run(()=>Le()):Le()}}return pt.\u0275fac=function(Le){return new(Le||pt)(_.Y36(at),_.Y36(nt),_.Y36(_.R0b))},pt.\u0275cmp=_.Xpm({type:pt,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(Le,ht){1&Le&&_.NdJ("click",function(){return ht.tapToast()})("mouseenter",function(){return ht.stickAround()})("mouseleave",function(){return ht.delayedHideToast()}),2&Le&&(_.d8E("@flyInOut",ht.state),_.Tol(ht.toastClasses),_.Udp("display",ht.displayStyle))},attrs:Ze,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(Le,ht){1&Le&&(_.YNc(0,Ge,3,0,"button",0),_.YNc(1,ke,3,5,"div",1),_.YNc(2,fe,1,3,"div",2),_.YNc(3,ge,2,4,"div",3),_.YNc(4,Fe,2,2,"div",4)),2&Le&&(_.Q6J("ngIf",ht.options.closeButton),_.xp6(1),_.Q6J("ngIf",ht.title),_.xp6(1),_.Q6J("ngIf",ht.message&&ht.options.enableHtml),_.xp6(1),_.Q6J("ngIf",ht.message&&!ht.options.enableHtml),_.xp6(1),_.Q6J("ngIf",ht.options.progressBar))},directives:[Ee.O5],encapsulation:2,data:{animation:[(0,c.X$)("flyInOut",[(0,c.SB)("inactive",(0,c.oB)({opacity:0})),(0,c.SB)("active",(0,c.oB)({opacity:1})),(0,c.SB)("removed",(0,c.oB)({opacity:0})),(0,c.eR)("inactive => active",(0,c.jt)("{{ easeTime }}ms {{ easing }}")),(0,c.eR)("active => removed",(0,c.jt)("{{ easeTime }}ms {{ easing }}"))])]}}),pt})();const tn=Object.assign(Object.assign({},It),{toastComponent:In});let wn=(()=>{class pt{static forRoot(Le={}){return{ngModule:pt,providers:[{provide:At,useValue:{default:tn,config:Le}}]}}}return pt.\u0275fac=function(Le){return new(Le||pt)},pt.\u0275mod=_.oAB({type:pt}),pt.\u0275inj=_.cJS({imports:[[Ee.ez]]}),pt})(),qt=(()=>{class pt{constructor(Le,ht,Kt){this.toastrService=Le,this.toastPackage=ht,this.appRef=Kt,this.width=-1,this.toastClasses="",this.state="inactive",this.message=ht.message,this.title=ht.title,this.options=ht.config,this.originalTimeout=ht.config.timeOut,this.toastClasses=`${ht.toastType} ${ht.config.toastClass}`,this.sub=ht.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=ht.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=ht.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=ht.toastRef.countDuplicate().subscribe(Mn=>{this.duplicatesCount=Mn})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const Le=(new Date).getTime();this.width=(this.hideTime-Le)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return pt.\u0275fac=function(Le){return new(Le||pt)(_.Y36(at),_.Y36(nt),_.Y36(_.z2F))},pt.\u0275cmp=_.Xpm({type:pt,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(Le,ht){1&Le&&_.NdJ("click",function(){return ht.tapToast()})("mouseenter",function(){return ht.stickAround()})("mouseleave",function(){return ht.delayedHideToast()}),2&Le&&(_.Tol(ht.toastClasses),_.Udp("display",ht.displayStyle))},attrs:Ze,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(Le,ht){1&Le&&(_.YNc(0,_t,3,0,"button",0),_.YNc(1,mt,3,5,"div",1),_.YNc(2,ot,1,3,"div",2),_.YNc(3,qe,2,4,"div",3),_.YNc(4,ze,2,2,"div",4)),2&Le&&(_.Q6J("ngIf",ht.options.closeButton),_.xp6(1),_.Q6J("ngIf",ht.title),_.xp6(1),_.Q6J("ngIf",ht.message&&ht.options.enableHtml),_.xp6(1),_.Q6J("ngIf",ht.message&&!ht.options.enableHtml),_.xp6(1),_.Q6J("ngIf",ht.options.progressBar))},directives:[Ee.O5],encapsulation:2}),pt})();Object.assign(Object.assign({},It),{toastComponent:qt})},5861:(rn,Ye,V)=>{function _(J,Ee,Ie,Ze,Ge,pe,ke){try{var fe=J[pe](ke),ge=fe.value}catch(Fe){return void Ie(Fe)}fe.done?Ee(ge):Promise.resolve(ge).then(Ze,Ge)}function c(J){return function(){var Ee=this,Ie=arguments;return new Promise(function(Ze,Ge){var pe=J.apply(Ee,Ie);function ke(ge){_(pe,Ze,Ge,ke,fe,"next",ge)}function fe(ge){_(pe,Ze,Ge,ke,fe,"throw",ge)}ke(void 0)})}}V.d(Ye,{Z:()=>c})}},rn=>{rn(rn.s=2809)}]);